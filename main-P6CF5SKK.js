var FG=Object.create;var $0=Object.defineProperty,BG=Object.defineProperties,VG=Object.getOwnPropertyDescriptor,UG=Object.getOwnPropertyDescriptors,zG=Object.getOwnPropertyNames,dx=Object.getOwnPropertySymbols,HG=Object.getPrototypeOf,RT=Object.prototype.hasOwnProperty,yO=Object.prototype.propertyIsEnumerable;var jG=(n,t)=>(t=Symbol[n])?t:Symbol.for("Symbol."+n);var gO=(n,t,e)=>t in n?$0(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Ke=(n,t)=>{for(var e in t||={})RT.call(t,e)&&gO(n,e,t[e]);if(dx)for(var e of dx(t))yO.call(t,e)&&gO(n,e,t[e]);return n},Mn=(n,t)=>BG(n,UG(t));var vO=(n,t)=>{var e={};for(var i in n)RT.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&dx)for(var i of dx(n))t.indexOf(i)<0&&yO.call(n,i)&&(e[i]=n[i]);return e};var hx=(n,t)=>()=>(n&&(t=n(n=0)),t);var fx=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),_O=(n,t)=>{for(var e in t)$0(n,e,{get:t[e],enumerable:!0})},bO=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of zG(t))!RT.call(n,r)&&r!==e&&$0(n,r,{get:()=>t[r],enumerable:!(i=VG(t,r))||i.enumerable});return n};var $m=(n,t,e)=>(e=n!=null?FG(HG(n)):{},bO(t||!n||!n.__esModule?$0(e,"default",{value:n,enumerable:!0}):e,n)),xO=n=>bO($0({},"__esModule",{value:!0}),n);var In=(n,t,e)=>new Promise((i,r)=>{var s=u=>{try{a(e.next(u))}catch(h){r(h)}},o=u=>{try{a(e.throw(u))}catch(h){r(h)}},a=u=>u.done?i(u.value):Promise.resolve(u.value).then(s,o);a((e=e.apply(n,t)).next())}),px=function(n,t){this[0]=n,this[1]=t},wO=(n,t,e)=>{var i=(o,a,u,h)=>{try{var p=e[o](a),v=(a=p.value)instanceof px,x=p.done;Promise.resolve(v?a[0]:a).then(S=>v?i(o==="return"?o:"next",a[1]?{done:S.done,value:S.value}:S,u,h):u({value:S,done:x})).catch(S=>i("throw",S,u,h))}catch(S){h(S)}},r=o=>s[o]=a=>new Promise((u,h)=>i(o,a,u,h)),s={};return e=e.apply(n,t),s[jG("asyncIterator")]=()=>s,r("next"),r("throw"),r("return"),s};var rR=fx((v_,iR)=>{"use strict";(function(n,t){typeof v_=="object"&&typeof iR=="object"?(n._Highcharts=t(),iR.exports=n._Highcharts):typeof define=="function"&&define.amd?define("highcharts/highcharts",[],t):typeof v_=="object"?(n._Highcharts=t(),v_.highcharts=n._Highcharts):(n.Highcharts&&n.Highcharts.error(16,!0),n.Highcharts=t())})(typeof window>"u"?v_:window,()=>(()=>{"use strict";let n,t;var e,i,r,s,o,a,u,h,p,v,x,S,D,O,N,T,j,Z,G={};G.d=(M,l)=>{for(var d in l)G.o(l,d)&&!G.o(M,d)&&Object.defineProperty(M,d,{enumerable:!0,get:l[d]})},G.o=(M,l)=>Object.prototype.hasOwnProperty.call(M,l);var le={};G.d(le,{default:()=>OG}),function(M){M.SVG_NS="http://www.w3.org/2000/svg",M.product="Highcharts",M.version="12.3.0",M.win=typeof window<"u"?window:{},M.doc=M.win.document,M.svg=!!M.doc?.createElementNS?.(M.SVG_NS,"svg")?.createSVGRect,M.pageLang=M.doc?.documentElement?.closest("[lang]")?.lang,M.userAgent=M.win.navigator?.userAgent||"",M.isChrome=M.win.chrome,M.isFirefox=M.userAgent.indexOf("Firefox")!==-1,M.isMS=/(edge|msie|trident)/i.test(M.userAgent)&&!M.win.opera,M.isSafari=!M.isChrome&&M.userAgent.indexOf("Safari")!==-1,M.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(M.userAgent),M.isWebKit=M.userAgent.indexOf("AppleWebKit")!==-1,M.deg2rad=2*Math.PI/360,M.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],M.noop=function(){},M.supportsPassiveEvents=function(){let l=!1;if(!M.isMS){let d=Object.defineProperty({},"passive",{get:function(){l=!0}});M.win.addEventListener&&M.win.removeEventListener&&(M.win.addEventListener("testPassive",M.noop,d),M.win.removeEventListener("testPassive",M.noop,d))}return l}(),M.charts=[],M.composed=[],M.dateFormats={},M.seriesTypes={},M.symbolSizes={},M.chartCount=0}(e||(e={}));let K=e,{charts:oe,doc:ue,win:te}=K;function V(M,l,d,f){let g=l?"Highcharts error":"Highcharts warning";M===32&&(M=`${g}: Deprecated member`);let y=Re(M),_=y?`${g} #${M}: www.highcharts.com/errors/${M}/`:M.toString();if(f!==void 0){let b="";y&&(_+="?"),rt(f,function(C,A){b+=`
 - ${A}: ${C}`,y&&(_+=encodeURI(A)+"="+encodeURI(C))}),_+=b}Sn(K,"displayError",{chart:d,code:M,message:_,params:f},function(){if(l)throw Error(_);te.console&&V.messages.indexOf(_)===-1&&console.warn(_)}),V.messages.push(_)}function se(M,l){return parseInt(M,l||10)}function we(M){return typeof M=="string"}function he(M){let l=Object.prototype.toString.call(M);return l==="[object Array]"||l==="[object Array Iterator]"}function je(M,l){return!!M&&typeof M=="object"&&(!l||!he(M))}function ze(M){return je(M)&&typeof M.nodeType=="number"}function de(M){let l=M?.constructor;return!!(je(M,!0)&&!ze(M)&&l?.name&&l.name!=="Object")}function Re(M){return typeof M=="number"&&!isNaN(M)&&M<1/0&&M>-1/0}function me(M){return M!=null}function $e(M,l,d){let f,g=we(l)&&!me(d),y=(_,b)=>{me(_)?M.setAttribute(b,_):g?(f=M.getAttribute(b))||b!=="class"||(f=M.getAttribute(b+"Name")):M.removeAttribute(b)};return we(l)?y(d,l):rt(l,y),f}function tt(M){return he(M)?M:[M]}function xt(M,l){let d;for(d in M||(M={}),l)M[d]=l[d];return M}function Tt(){let M=arguments,l=M.length;for(let d=0;d<l;d++){let f=M[d];if(f!=null)return f}}function ut(M,l){xt(M.style,l)}function Ie(M){return Math.pow(10,Math.floor(Math.log(M)/Math.LN10))}function at(M,l){return M>1e14?M:parseFloat(M.toPrecision(l||14))}(V||(V={})).messages=[],Math.easeInOutSine=function(M){return-.5*(Math.cos(Math.PI*M)-1)};let Rt=Array.prototype.find?function(M,l){return M.find(l)}:function(M,l){let d,f=M.length;for(d=0;d<f;d++)if(l(M[d],d))return M[d]};function rt(M,l,d){for(let f in M)Object.hasOwnProperty.call(M,f)&&l.call(d||M[f],M[f],f,M)}function zt(M,l,d){function f(_,b){let C=M.removeEventListener;C&&C.call(M,_,b,!1)}function g(_){let b,C;M.nodeName&&(l?(b={})[l]=!0:b=_,rt(b,function(A,R){if(_[R])for(C=_[R].length;C--;)f(R,_[R][C].fn)}))}let y=typeof M=="function"&&M.prototype||M;if(Object.hasOwnProperty.call(y,"hcEvents")){let _=y.hcEvents;if(l){let b=_[l]||[];d?(_[l]=b.filter(function(C){return d!==C.fn}),f(l,d)):(g(_),_[l]=[])}else g(_),delete y.hcEvents}}function Sn(M,l,d,f){if(d=d||{},ue?.createEvent&&(M.dispatchEvent||M.fireEvent&&M!==K)){let g=ue.createEvent("Events");g.initEvent(l,!0,!0),d=xt(g,d),M.dispatchEvent?M.dispatchEvent(d):M.fireEvent(l,d)}else if(M.hcEvents){d.target||xt(d,{preventDefault:function(){d.defaultPrevented=!0},target:M,type:l});let g=[],y=M,_=!1;for(;y.hcEvents;)Object.hasOwnProperty.call(y,"hcEvents")&&y.hcEvents[l]&&(g.length&&(_=!0),g.unshift.apply(g,y.hcEvents[l])),y=Object.getPrototypeOf(y);_&&g.sort((b,C)=>b.order-C.order),g.forEach(b=>{b.fn.call(M,d)===!1&&d.preventDefault()})}f&&!d.defaultPrevented&&f.call(M,d)}let dn=function(){let M=Math.random().toString(36).substring(2,9)+"-",l=0;return function(){return"highcharts-"+(n?"":M)+l++}}();te.jQuery&&(te.jQuery.fn.highcharts=function(){let M=[].slice.call(arguments);if(this[0])return M[0]?(new K[we(M[0])?M.shift():"Chart"](this[0],M[0],M[1]),this):oe[$e(this[0],"data-highcharts-chart")]});let Mt={addEvent:function(M,l,d,f={}){let g=typeof M=="function"&&M.prototype||M;Object.hasOwnProperty.call(g,"hcEvents")||(g.hcEvents={});let y=g.hcEvents;K.Point&&M instanceof K.Point&&M.series&&M.series.chart&&(M.series.chart.runTrackerClick=!0);let _=M.addEventListener;_&&_.call(M,l,d,!!K.supportsPassiveEvents&&{passive:f.passive===void 0?l.indexOf("touch")!==-1:f.passive,capture:!1}),y[l]||(y[l]=[]);let b={fn:d,order:typeof f.order=="number"?f.order:1/0};return y[l].push(b),y[l].sort((C,A)=>C.order-A.order),function(){zt(M,l,d)}},arrayMax:function(M){let l=M.length,d=M[0];for(;l--;)M[l]>d&&(d=M[l]);return d},arrayMin:function(M){let l=M.length,d=M[0];for(;l--;)M[l]<d&&(d=M[l]);return d},attr:$e,clamp:function(M,l,d){return M>l?M<d?M:d:l},clearTimeout:function(M){me(M)&&clearTimeout(M)},correctFloat:at,createElement:function(M,l,d,f,g){let y=ue.createElement(M);return l&&xt(y,l),g&&ut(y,{padding:"0",border:"none",margin:"0"}),d&&ut(y,d),f&&f.appendChild(y),y},crisp:function(M,l=0,d){let f=l%2/2,g=d?-1:1;return(Math.round(M*g-f)+f)*g},css:ut,defined:me,destroyObjectProperties:function(M,l,d){rt(M,function(f,g){f!==l&&f?.destroy&&f.destroy(),(f?.destroy||!d)&&delete M[g]})},diffObjects:function(M,l,d,f){let g={};return function y(_,b,C,A){let R=d?b:_;rt(_,function(I,F){if(!A&&f&&f.indexOf(F)>-1&&b[F]){I=tt(I),C[F]=[];for(let U=0;U<Math.max(I.length,b[F].length);U++)b[F][U]&&(I[U]===void 0?C[F][U]=b[F][U]:(C[F][U]={},y(I[U],b[F][U],C[F][U],A+1)))}else je(I,!0)&&!I.nodeType?(C[F]=he(I)?[]:{},y(I,b[F]||{},C[F],A+1),Object.keys(C[F]).length===0&&(F!=="colorAxis"||A!==0)&&delete C[F]):(_[F]!==b[F]||F in _&&!(F in b))&&F!=="__proto__"&&F!=="constructor"&&(C[F]=R[F])})}(M,l,g,0),g},discardElement:function(M){M?.parentElement?.removeChild(M)},erase:function(M,l){let d=M.length;for(;d--;)if(M[d]===l){M.splice(d,1);break}},error:V,extend:xt,extendClass:function(M,l){let d=function(){};return d.prototype=new M,xt(d.prototype,l),d},find:Rt,fireEvent:Sn,getAlignFactor:(M="")=>({center:.5,right:1,middle:.5,bottom:1})[M]||0,getClosestDistance:function(M,l){let d,f,g,y,_=!l;return M.forEach(b=>{if(b.length>1)for(y=f=b.length-1;y>0;y--)(g=b[y]-b[y-1])<0&&!_?(l?.(),l=void 0):g&&(d===void 0||g<d)&&(d=g)}),d},getMagnitude:Ie,getNestedProperty:function(M,l){let d=M.split(".");for(;d.length&&me(l);){let f=d.shift();if(f===void 0||f==="__proto__")return;if(f==="this"){let y;return je(l)&&(y=l["@this"]),y??l}let g=l[f.replace(/[\\'"]/g,"")];if(!me(g)||typeof g=="function"||typeof g.nodeType=="number"||g===te)return;l=g}return l},getStyle:function M(l,d,f){let g;if(d==="width"){let _=Math.min(l.offsetWidth,l.scrollWidth),b=l.getBoundingClientRect?.().width;return b<_&&b>=_-1&&(_=Math.floor(b)),Math.max(0,_-(M(l,"padding-left",!0)||0)-(M(l,"padding-right",!0)||0))}if(d==="height")return Math.max(0,Math.min(l.offsetHeight,l.scrollHeight)-(M(l,"padding-top",!0)||0)-(M(l,"padding-bottom",!0)||0));let y=te.getComputedStyle(l,void 0);return y&&(g=y.getPropertyValue(d),Tt(f,d!=="opacity")&&(g=se(g))),g},insertItem:function(M,l){let d,f=M.options.index,g=l.length;for(d=M.options.isInternal?g:0;d<g+1;d++)if(!l[d]||Re(f)&&f<Tt(l[d].options.index,l[d]._i)||l[d].options.isInternal){l.splice(d,0,M);break}return d},isArray:he,isClass:de,isDOMElement:ze,isFunction:function(M){return typeof M=="function"},isNumber:Re,isObject:je,isString:we,merge:function(M,...l){let d,f=[M,...l],g={},y=function(b,C){return typeof b!="object"&&(b={}),rt(C,function(A,R){R!=="__proto__"&&R!=="constructor"&&(!je(A,!0)||de(A)||ze(A)?b[R]=C[R]:b[R]=y(b[R]||{},A))}),b};M===!0&&(g=f[1],f=Array.prototype.slice.call(f,2));let _=f.length;for(d=0;d<_;d++)g=y(g,f[d]);return g},normalizeTickInterval:function(M,l,d,f,g){let y,_=M;d=Tt(d,Ie(M));let b=M/d;for(!l&&(l=g?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],f===!1&&(d===1?l=l.filter(function(C){return C%1==0}):d<=.1&&(l=[1/d]))),y=0;y<l.length&&(_=l[y],(!g||!(_*d>=M))&&(g||!(b<=(l[y]+(l[y+1]||l[y]))/2)));y++);return at(_*d,-Math.round(Math.log(.001)/Math.LN10))},objectEach:rt,offset:function(M){let l=ue.documentElement,d=M.parentElement||M.parentNode?M.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:d.top+(te.pageYOffset||l.scrollTop)-(l.clientTop||0),left:d.left+(te.pageXOffset||l.scrollLeft)-(l.clientLeft||0),width:d.width,height:d.height}},pad:function(M,l,d){return Array((l||2)+1-String(M).replace("-","").length).join(d||"0")+M},pick:Tt,pInt:se,pushUnique:function(M,l){return 0>M.indexOf(l)&&!!M.push(l)},relativeLength:function(M,l,d){return/%$/.test(M)?l*parseFloat(M)/100+(d||0):parseFloat(M)},removeEvent:zt,replaceNested:function(M,...l){let d,f;do for(f of(d=M,l))M=M.replace(f[0],f[1]);while(M!==d);return M},splat:tt,stableSort:function(M,l){let d,f,g=M.length;for(f=0;f<g;f++)M[f].safeI=f;for(M.sort(function(y,_){return(d=l(y,_))===0?y.safeI-_.safeI:d}),f=0;f<g;f++)delete M[f].safeI},syncTimeout:function(M,l,d){return l>0?setTimeout(M,l,d):(M.call(0,d),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},ucfirst:function(M){return we(M)?M.substring(0,1).toUpperCase()+M.substring(1):String(M)},uniqueKey:dn,useSerialIds:function(M){return n=Tt(M,n)},wrap:function(M,l,d){let f=M[l];M[l]=function(){let g=arguments,y=this;return d.apply(this,[function(){return f.apply(y,arguments.length?arguments:g)}].concat([].slice.call(arguments)))}}},{pageLang:Zi,win:Bn}=K,{defined:Me,error:hr,extend:Qn,isNumber:fi,isObject:rn,isString:ei,merge:hn,objectEach:Rn,pad:$i,splat:fe,timeUnits:J,ucfirst:Ge}=Mt,nt=K.isSafari&&Bn.Intl&&!Bn.Intl.DateTimeFormat.prototype.formatRange,dt=M=>M.main===void 0,Qe=class{constructor(M,l){this.options={timezone:"UTC"},this.variableTimezone=!1,this.Date=Bn.Date,this.update(M),this.lang=l}update(M={}){this.dTLCache={},this.options=M=hn(!0,this.options,M);let{timezoneOffset:l,useUTC:d,locale:f}=M;this.Date=M.Date||Bn.Date||Date;let g=M.timezone;Me(d)&&(g=d?"UTC":void 0),l&&l%60==0&&(g="Etc/GMT"+(l>0?"+":"")+l/60),this.variableTimezone=g!=="UTC"&&g?.indexOf("Etc/GMT")!==0,this.timezone=g,this.lang&&f&&(this.lang.locale=f),["months","shortMonths","weekdays","shortWeekdays"].forEach(y=>{let _=/months/i.test(y),b=/short/.test(y),C={timeZone:"UTC"};C[_?"month":"weekday"]=b?"short":"long",this[y]=(_?[0,1,2,3,4,5,6,7,8,9,10,11]:[3,4,5,6,7,8,9]).map(A=>this.dateFormat(C,(_?31:1)*24*36e5*A))})}toParts(M){let[l,d,f,g,y,_,b]=this.dateTimeFormat({weekday:"narrow",day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},M,"es").split(/(?:, | |\/|:)/g);return[g,f-1,d,y,_,b,Math.floor(Number(M)||0)%1e3,"DLMXJVS".indexOf(l)].map(Number)}dateTimeFormat(M,l,d=this.options.locale||Zi){let f=JSON.stringify(M)+d;ei(M)&&(M=this.str2dtf(M));let g=this.dTLCache[f];if(!g){M.timeZone??(M.timeZone=this.timezone);try{g=new Intl.DateTimeFormat(d,M)}catch(y){/Invalid time zone/i.test(y.message)?(hr(34),M.timeZone="UTC",g=new Intl.DateTimeFormat(d,M)):hr(y.message,!1)}}return this.dTLCache[f]=g,g?.format(l)||""}str2dtf(M,l={}){let d={L:{fractionalSecondDigits:3},S:{second:"2-digit"},M:{minute:"numeric"},H:{hour:"2-digit"},k:{hour:"numeric"},E:{weekday:"narrow"},a:{weekday:"short"},A:{weekday:"long"},d:{day:"2-digit"},e:{day:"numeric"},b:{month:"short"},B:{month:"long"},m:{month:"2-digit"},o:{month:"numeric"},y:{year:"2-digit"},Y:{year:"numeric"}};return Object.keys(d).forEach(f=>{M.indexOf(f)!==-1&&Qn(l,d[f])}),l}makeTime(M,l,d=1,f=0,g,y,_){let b=this.Date.UTC(M,l,d,f,g||0,y||0,_||0);if(this.timezone!=="UTC"){let C=this.getTimezoneOffset(b);if(b+=C,[2,3,8,9,10,11].indexOf(l)!==-1&&(f<5||f>20)){let A=this.getTimezoneOffset(b);C!==A?b+=A-C:C-36e5!==this.getTimezoneOffset(b-36e5)||nt||(b-=36e5)}}return b}parse(M){if(!ei(M))return M??void 0;let l=(M=M.replace(/\//g,"-").replace(/(GMT|UTC)/,"")).indexOf("Z")>-1||/([+-][0-9]{2}):?[0-9]{2}$/.test(M),d=/^[0-9]{4}-[0-9]{2}(-[0-9]{2}|)$/.test(M);l||d||(M+="Z");let f=Date.parse(M);if(fi(f))return f+(!l||d?this.getTimezoneOffset(f):0)}getTimezoneOffset(M){if(this.timezone!=="UTC"){let[l,d,f,g,y=0]=this.dateTimeFormat({timeZoneName:"shortOffset"},M,"en").split(/(GMT|:)/).map(Number),_=-(60*(f+y/60)*6e4);if(fi(_))return _}return 0}dateFormat(M,l,d){let f=this.lang;if(!Me(l)||isNaN(l))return f?.invalidDate||"";if(ei(M=M??"%Y-%m-%d %H:%M:%S")){let g,y=/%\[([a-zA-Z]+)\]/g;for(;g=y.exec(M);)M=M.replace(g[0],this.dateTimeFormat(g[1],l,f?.locale))}if(ei(M)&&M.indexOf("%")!==-1){let g=this,[y,_,b,C,A,R,I,F]=this.toParts(l),U=f?.weekdays||this.weekdays,H=f?.shortWeekdays||this.shortWeekdays,$=f?.months||this.months,X=f?.shortMonths||this.shortMonths;Rn(Qn({a:H?H[F]:U[F].substr(0,3),A:U[F],d:$i(b),e:$i(b,2," "),w:F,v:f?.weekFrom??"",b:X[_],B:$[_],m:$i(_+1),o:_+1,y:y.toString().substr(2,2),Y:y,H:$i(C),k:C,I:$i(C%12||12),l:C%12||12,M:$i(A),p:C<12?"AM":"PM",P:C<12?"am":"pm",S:$i(R),L:$i(I,3)},K.dateFormats),function(q,ie){if(ei(M))for(;M.indexOf("%"+ie)!==-1;)M=M.replace("%"+ie,typeof q=="function"?q.call(g,l):q)})}else if(rn(M)){let g=(this.getTimezoneOffset(l)||0)/36e5,y=this.timezone||"Etc/GMT"+(g>=0?"+":"")+g,{prefix:_="",suffix:b=""}=M;M=_+this.dateTimeFormat(Qn({timeZone:y},M),l)+b}return d?Ge(M):M}resolveDTLFormat(M){return rn(M,!0)?rn(M,!0)&&dt(M)?{main:M}:M:{main:(M=fe(M))[0],from:M[1],to:M[2]}}getDateFormat(M,l,d,f){let g=this.dateFormat("%m-%d %H:%M:%S.%L",l),y="01-01 00:00:00.000",_={millisecond:15,second:12,minute:9,hour:6,day:3},b="millisecond",C=b;for(b in J){if(M&&M===J.week&&+this.dateFormat("%w",l)===d&&g.substr(6)===y.substr(6)){b="week";break}if(M&&J[b]>M){b=C;break}if(_[b]&&g.substr(_[b])!==y.substr(_[b]))break;b!=="week"&&(C=b)}return this.resolveDTLFormat(f[b]).main}},{defined:yn,extend:Ht,timeUnits:kt}=Mt,fn=class extends Qe{getTimeTicks(M,l,d,f){let g=this,y=[],_={},{count:b=1,unitRange:C}=M,[A,R,I,F,U,H]=g.toParts(l),$=(l||0)%1e3,X;if(f??(f=1),yn(l)){if($=C>=kt.second?0:b*Math.floor($/b),C>=kt.second&&(H=C>=kt.minute?0:b*Math.floor(H/b)),C>=kt.minute&&(U=C>=kt.hour?0:b*Math.floor(U/b)),C>=kt.hour&&(F=C>=kt.day?0:b*Math.floor(F/b)),C>=kt.day&&(I=C>=kt.month?1:Math.max(1,b*Math.floor(I/b))),C>=kt.month&&(R=C>=kt.year?0:b*Math.floor(R/b)),C>=kt.year&&(A-=A%b),C===kt.week){b&&(l=g.makeTime(A,R,I,F,U,H,$));let ae=this.dateTimeFormat({timeZone:this.timezone,weekday:"narrow"},l,"es"),pe="DLMXJVS".indexOf(ae);I+=-pe+f+(pe<f?-7:0)}l=g.makeTime(A,R,I,F,U,H,$),g.variableTimezone&&yn(d)&&(X=d-l>4*kt.month||g.getTimezoneOffset(l)!==g.getTimezoneOffset(d));let q=l,ie=1;for(;q<d;)y.push(q),C===kt.year?q=g.makeTime(A+ie*b,0):C===kt.month?q=g.makeTime(A,R+ie*b):X&&(C===kt.day||C===kt.week)?q=g.makeTime(A,R,I+ie*b*(C===kt.day?1:7)):X&&C===kt.hour&&b>1?q=g.makeTime(A,R,I,F+ie*b):q+=C*b,ie++;y.push(q),C<=kt.hour&&y.length<1e4&&y.forEach(ae=>{ae%18e5==0&&g.dateFormat("%H%M%S%L",ae)==="000000000"&&(_[ae]="day")})}return y.info=Ht(M,{higherRanks:_,totalRange:C*b}),y}},{isTouchDevice:vt}=K,{fireEvent:Jt,merge:pn}=Mt,vn={colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{weekFrom:"week from",chartTitle:"Chart title",locale:void 0,loading:"Loading...",months:void 0,seriesName:"Series {add index 1}",shortMonths:void 0,weekdays:void 0,numericSymbols:["k","M","G","T","P","E"],pieSliceName:"Slice",resetZoom:"Reset zoom",yAxisTitle:"Values",resetZoomTitle:"Reset zoom level 1:1"},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,timezone:"UTC",timezoneOffset:0,useUTC:void 0},chart:{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",margin:15,minScale:.67},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:""},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{color:"#333333",fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:M=>Math.sqrt(1-Math.pow(M-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%[AebHMSL]",second:"%[AebHMS]",minute:"%[AebHM]",hour:"%[AebHM]",day:"%[AebY]",week:"%v %[AebY]",month:"%[BY]",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,position:{x:0,y:3},shared:!1,snap:vt?25:10,headerFormat:'<span style="font-size: 0.8em">{ucfirst point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25CF</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}},Ft=new fn(vn.time,vn.lang),_n={defaultOptions:vn,defaultTime:Ft,getOptions:function(){return vn},setOptions:function(M){return Jt(K,"setOptions",{options:M}),pn(!0,vn,M),M.time&&Ft.update(vn.time),M.lang&&"locale"in M.lang&&Ft.update({locale:M.lang.locale}),M.lang?.chartTitle&&(vn.title=Mn(Ke({},vn.title),{text:M.lang.chartTitle})),vn}},{win:Pe}=K,{isNumber:Lt,isString:Ct,merge:nn,pInt:pt,defined:ct}=Mt,sn=(M,l,d)=>`color-mix(in srgb,${M},${l} ${100*d}%)`,Vn=M=>Ct(M)&&!!M&&M!=="none";class Dn{static parse(l){return l?new Dn(l):Dn.None}constructor(l){let d,f,g,y;this.rgba=[NaN,NaN,NaN,NaN],this.input=l;let _=K.Color;if(_&&_!==Dn)return new _(l);if(typeof l=="object"&&l.stops!==void 0)this.stops=l.stops.map(b=>new Dn(b[1]));else if(typeof l=="string")for(this.input=l=Dn.names[l.toLowerCase()]||l,g=Dn.parsers.length;g--&&!f;)(d=(y=Dn.parsers[g]).regex.exec(l))&&(f=y.parse(d));f&&(this.rgba=f)}get(l){let d=this.input,f=this.rgba;if(this.output)return this.output;if(typeof d=="object"&&this.stops!==void 0){let g=nn(d);return g.stops=[].slice.call(g.stops),this.stops.forEach((y,_)=>{g.stops[_]=[g.stops[_][0],y.get(l)]}),g}return f&&Lt(f[0])?l!=="rgb"&&(l||f[3]!==1)?l==="a"?`${f[3]}`:"rgba("+f.join(",")+")":"rgb("+f[0]+","+f[1]+","+f[2]+")":d}brighten(l){let d=this.rgba;if(this.stops)this.stops.forEach(function(f){f.brighten(l)});else if(Lt(l)&&l!==0)if(Lt(d[0]))for(let f=0;f<3;f++)d[f]+=pt(255*l),d[f]<0&&(d[f]=0),d[f]>255&&(d[f]=255);else Dn.useColorMix&&Vn(this.input)&&(this.output=sn(this.input,l>0?"white":"black",Math.abs(l)));return this}setOpacity(l){return this.rgba[3]=l,this}tweenTo(l,d){let f=this.rgba,g=l.rgba;if(!Lt(f[0])||!Lt(g[0]))return Dn.useColorMix&&Vn(this.input)&&Vn(l.input)&&d<.99?sn(this.input,l.input,d):l.input||"none";let y=g[3]!==1||f[3]!==1,_=(C,A)=>C+(f[A]-C)*(1-d),b=g.slice(0,3).map(_).map(Math.round);return y&&b.push(_(g[3],3)),(y?"rgba(":"rgb(")+b.join(",")+")"}}Dn.names={white:"#ffffff",black:"#000000"},Dn.parsers=[{regex:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?(?:\.\d+)?)\s*\)/,parse:function(M){return[pt(M[1]),pt(M[2]),pt(M[3]),parseFloat(M[4],10)]}},{regex:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,parse:function(M){return[pt(M[1]),pt(M[2]),pt(M[3]),1]}},{regex:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?$/i,parse:function(M){return[pt(M[1]+M[1],16),pt(M[2]+M[2],16),pt(M[3]+M[3],16),ct(M[4])?pt(M[4]+M[4],16)/255:1]}},{regex:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?$/i,parse:function(M){return[pt(M[1],16),pt(M[2],16),pt(M[3],16),ct(M[4])?pt(M[4],16)/255:1]}}],Dn.useColorMix=Pe.CSS?.supports("color","color-mix(in srgb,red,blue 9%)"),Dn.None=new Dn("");let{parse:Oi}=Dn,{win:rs}=K,{isNumber:ss,objectEach:jd}=Mt,Wr=(()=>{class M{constructor(d,f,g){this.pos=NaN,this.options=f,this.elem=d,this.prop=g}dSetter(){let d=this.paths,f=d?.[0],g=d?.[1],y=this.now||0,_=[];if(y!==1&&f&&g)if(f.length===g.length&&y<1)for(let b=0;b<g.length;b++){let C=f[b],A=g[b],R=[];for(let I=0;I<A.length;I++){let F=C[I],U=A[I];ss(F)&&ss(U)&&(A[0]!=="A"||I!==4&&I!==5)?R[I]=F+y*(U-F):R[I]=U}_.push(R)}else _=g;else _=this.toD||[];this.elem.attr("d",_,void 0,!0)}update(){let d=this.elem,f=this.prop,g=this.now,y=this.options.step;this[f+"Setter"]?this[f+"Setter"]():d.attr?d.element&&d.attr(f,g,null,!0):d.style[f]=g+this.unit,y&&y.call(d,g,this)}run(d,f,g){let y=this,_=y.options,b=function(R){return!b.stopped&&y.step(R)},C=rs.requestAnimationFrame||function(R){setTimeout(R,13)},A=function(){for(let R=0;R<M.timers.length;R++)M.timers[R]()||M.timers.splice(R--,1);M.timers.length&&C(A)};d!==f||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=d,this.end=f,this.unit=g,this.now=this.start,this.pos=0,b.elem=this.elem,b.prop=this.prop,b()&&M.timers.push(b)===1&&C(A)):(delete _.curAnim[this.prop],_.complete&&Object.keys(_.curAnim).length===0&&_.complete.call(this.elem))}step(d){let f,g,y=+new Date,_=this.options,b=this.elem,C=_.complete,A=_.duration,R=_.curAnim;return b.attr&&!b.element?f=!1:d||y>=A+this.startTime?(this.now=this.end,this.pos=1,this.update(),R[this.prop]=!0,g=!0,jd(R,function(I){I!==!0&&(g=!1)}),g&&C&&C.call(b),f=!1):(this.pos=_.easing((y-this.startTime)/A),this.now=this.start+(this.end-this.start)*this.pos,this.update(),f=!0),f}initPath(d,f,g){let y=d.startX,_=d.endX,b=g.slice(),C=d.isArea,A=C?2:1,R=f&&g.length>f.length&&g.hasStackedCliffs,I,F,U,H,$=f?.slice();if(!$||R)return[b,b];function X(ie,ae){for(;ie.length<F;){let pe=ie[0],ke=ae[F-ie.length];if(ke&&pe[0]==="M"&&(ke[0]==="C"?ie[0]=["C",pe[1],pe[2],pe[1],pe[2],pe[1],pe[2]]:ie[0]=["L",pe[1],pe[2]]),ie.unshift(pe),C){let Te=ie.pop();ie.push(ie[ie.length-1],Te)}}}function q(ie){for(;ie.length<F;){let ae=ie[Math.floor(ie.length/A)-1].slice();if(ae[0]==="C"&&(ae[1]=ae[5],ae[2]=ae[6]),C){let pe=ie[Math.floor(ie.length/A)].slice();ie.splice(ie.length/2,0,ae,pe)}else ie.push(ae)}}if(y&&_&&_.length){for(U=0;U<y.length;U++)if(y[U]===_[0]){I=U;break}else if(y[0]===_[_.length-y.length+U]){I=U,H=!0;break}else if(y[y.length-1]===_[_.length-y.length+U]){I=y.length-U;break}I===void 0&&($=[])}return $.length&&ss(I)&&(F=b.length+I*A,H?(X($,b),q(b)):(X(b,$),q($))),[$,b]}fillSetter(){M.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,Oi(this.start).tweenTo(Oi(this.end),this.pos),void 0,!0)}}return M.timers=[],M})(),{defined:on,getStyle:Wc,isArray:Gc,isNumber:Uu,isObject:Fa,merge:Yl,objectEach:Zl,pick:Po}=Mt;function ul(M){return Fa(M)?Yl({duration:500,defer:0},M):{duration:500*!!M,defer:0}}function Wd(M,l){let d=Wr.timers.length;for(;d--;)Wr.timers[d].elem!==M||l&&l!==Wr.timers[d].prop||(Wr.timers[d].stopped=!0)}let Gr={animate:function(M,l,d){let f,g="",y,_,b;Fa(d)||(b=arguments,d={duration:b[2],easing:b[3],complete:b[4]}),Uu(d.duration)||(d.duration=400),d.easing=typeof d.easing=="function"?d.easing:Math[d.easing]||Math.easeInOutSine,d.curAnim=Yl(l),Zl(l,function(C,A){Wd(M,A),_=new Wr(M,d,A),y=void 0,A==="d"&&Gc(l.d)?(_.paths=_.initPath(M,M.pathArray,l.d),_.toD=l.d,f=0,y=1):M.attr?f=M.attr(A):(f=parseFloat(Wc(M,A))||0,A!=="opacity"&&(g="px")),y||(y=C),typeof y=="string"&&y.match("px")&&(y=y.replace(/px/g,"")),_.run(f,y,g)})},animObject:ul,getDeferredAnimation:function(M,l,d){let f=ul(l),g=d?[d]:M.series,y=0,_=0;return g.forEach(b=>{let C=ul(b.options.animation);y=Fa(l)&&on(l.defer)?f.defer:Math.max(y,C.duration+C.defer),_=Math.min(f.duration,C.duration)}),M.renderer.forExport&&(y=0),{defer:Math.max(0,y-_),duration:Math.min(y,_)}},setAnimation:function(M,l){l.renderer.globalAnimation=Po(M,l.options.chart.animation,!0)},stop:Wd},{SVG_NS:zu,win:gf}=K,{attr:Gd,createElement:Ba,css:re,error:Fe,isFunction:qe,isString:Xe,objectEach:Be,splat:At}=Mt,{trustedTypes:Ut}=gf,$t=Ut&&qe(Ut.createPolicy)&&Ut.createPolicy("highcharts",{createHTML:M=>M}),qt=$t?$t.createHTML(""):"";class Wt{static filterUserAttributes(l){return Be(l,(d,f)=>{let g=!0;Wt.allowedAttributes.indexOf(f)===-1&&(g=!1),["background","dynsrc","href","lowsrc","src"].indexOf(f)!==-1&&(g=Xe(d)&&Wt.allowedReferences.some(y=>d.indexOf(y)===0)),g||(Fe(33,!1,void 0,{"Invalid attribute in config":`${f}`}),delete l[f]),Xe(d)&&l[f]&&(l[f]=d.replace(/</g,"&lt;"))}),l}static parseStyle(l){return l.split(";").reduce((d,f)=>{let g=f.split(":").map(_=>_.trim()),y=g.shift();return y&&g.length&&(d[y.replace(/-([a-z])/g,_=>_[1].toUpperCase())]=g.join(":")),d},{})}static setElementHTML(l,d){l.innerHTML=Wt.emptyHTML,d&&new Wt(d).addToDOM(l)}constructor(l){this.nodes=typeof l=="string"?this.parseMarkup(l):l}addToDOM(l){return function d(f,g){let y;return At(f).forEach(function(_){let b,C=_.tagName,A=_.textContent?K.doc.createTextNode(_.textContent):void 0,R=Wt.bypassHTMLFiltering;if(C)if(C==="#text")b=A;else if(Wt.allowedTags.indexOf(C)!==-1||R){let I=C==="svg"?zu:g.namespaceURI||zu,F=K.doc.createElementNS(I,C),U=_.attributes||{};Be(_,function(H,$){$!=="tagName"&&$!=="attributes"&&$!=="children"&&$!=="style"&&$!=="textContent"&&(U[$]=H)}),Gd(F,R?U:Wt.filterUserAttributes(U)),_.style&&re(F,_.style),A&&F.appendChild(A),d(_.children||[],F),b=F}else Fe(33,!1,void 0,{"Invalid tagName in config":C});b&&g.appendChild(b),y=b}),y}(this.nodes,l)}parseMarkup(l){let d,f=[];l=l.trim().replace(/ style=(["'])/g," data-style=$1");try{d=new DOMParser().parseFromString($t?$t.createHTML(l):l,"text/html")}catch{}if(!d){let y=Ba("div");y.innerHTML=l,d={body:y}}let g=(y,_)=>{let b=y.nodeName.toLowerCase(),C={tagName:b};b==="#text"&&(C.textContent=y.textContent||"");let A=y.attributes;if(A){let R={};[].forEach.call(A,I=>{I.name==="data-style"?C.style=Wt.parseStyle(I.value):R[I.name]=I.value}),C.attributes=R}if(y.childNodes.length){let R=[];[].forEach.call(y.childNodes,I=>{g(I,R)}),R.length&&(C.children=R)}_.push(C)};return[].forEach.call(d.body.childNodes,y=>g(y,f)),f}}Wt.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","disabled","dx","dy","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","result","role","rowspan","scope","slope","src","startOffset","stdDeviation","stroke-linecap","stroke-width","stroke","style","summary","tabindex","tableValues","target","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],Wt.allowedReferences=["https://","http://","mailto:","/","../","./","#"],Wt.allowedTags=["#text","a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","tbody","td","text","textPath","th","thead","title","tr","tspan","u","ul"],Wt.emptyHTML=qt,Wt.bypassHTMLFiltering=!1;let{defaultOptions:Tn,defaultTime:Pt}=_n,{pageLang:gn}=K,{extend:si,getNestedProperty:Ki,isArray:Di,isNumber:_i,isObject:Dt,isString:ai,pick:li,ucfirst:hs}=Mt,Sr={add:(M,l)=>M+l,divide:(M,l)=>l!==0?M/l:"",eq:(M,l)=>M==l,each:function(M){let l=arguments[arguments.length-1];return!!Di(M)&&M.map((d,f)=>Ti(l.body,si(Dt(d)?d:{"@this":d},{"@index":f,"@first":f===0,"@last":f===M.length-1}))).join("")},ge:(M,l)=>M>=l,gt:(M,l)=>M>l,if:M=>!!M,le:(M,l)=>M<=l,lt:(M,l)=>M<l,multiply:(M,l)=>M*l,ne:(M,l)=>M!=l,subtract:(M,l)=>M-l,ucfirst:hs,unless:M=>!M},fs={},Ro=M=>/^["'].+["']$/.test(M);function Ti(M="",l,d){let f=/\{([a-zA-Z\u00C0-\u017F\d:\.,;\-\/<>\[\]%_@+"'’= #\(\)]+)\}/g,g=/\(([a-zA-Z\u00C0-\u017F\d:\.,;\-\/<>\[\]%_@+"'= ]+)\)/g,y=[],_=/f$/,b=/\.(\d)/,C=d?.options?.lang||Tn.lang,A=d?.time||Pt,R=d?.numberFormatter||Ii.bind(d),I=(X="")=>{let q;return X==="true"||X!=="false"&&((q=Number(X)).toString()===X?q:Ro(X)?X.slice(1,-1):Ki(X,l))},F,U,H=0,$;for(;(F=f.exec(M))!==null;){let X=F,q=g.exec(F[1]);q&&(F=q,$=!0),U?.isBlock||(U={ctx:l,expression:F[1],find:F[0],isBlock:F[1].charAt(0)==="#",start:F.index,startInner:F.index+F[0].length,length:F[0].length});let ie=(U.isBlock?X:F)[1].split(" ")[0].replace("#","");Sr[ie]&&(U.isBlock&&ie===U.fn&&H++,U.fn||(U.fn=ie));let ae=F[1]==="else";if(U.isBlock&&U.fn&&(F[1]===`/${U.fn}`||ae))if(H)!ae&&H--;else{let pe=U.startInner,ke=M.substr(pe,F.index-pe);U.body===void 0?(U.body=ke,U.startInner=F.index+F[0].length):U.elseBody=ke,U.find+=ke+F[0],ae||(y.push(U),U=void 0)}else U.isBlock||y.push(U);if(q&&!U?.isBlock)break}return y.forEach(X=>{let q,ie,{body:ae,elseBody:pe,expression:ke,fn:Te}=X;if(Te){let Se=[X],De=[],Ye=ke.length,Je=0,st;for(ie=0;ie<=Ye;ie++){let Gt=ke.charAt(ie);st||Gt!=='"'&&Gt!=="'"?st===Gt&&(st=""):st=Gt,st||Gt!==" "&&ie!==Ye||(De.push(ke.substr(Je,ie-Je)),Je=ie+1)}for(ie=Sr[Te].length;ie--;)Se.unshift(I(De[ie+1]));q=Sr[Te].apply(l,Se),X.isBlock&&typeof q=="boolean"&&(q=Ti(q?ae:pe,l,d))}else{let Se=Ro(ke)?[ke]:ke.split(":"),De=(q=I(Se.shift()||""))%1!=0;if(typeof q=="number"&&(Se.length||De)){let Ye=Se.join(":");if(_.test(Ye)||De){let Je=parseInt((Ye.match(b)||["","-1"])[1],10);q!==null&&(q=R(q,Je,C.decimalPoint,Ye.indexOf(",")>-1?C.thousandsSep:""))}else q=A.dateFormat(Ye,q)}g.lastIndex=0,g.test(X.find)&&ai(q)&&(q=`"${q}"`)}M=M.replace(X.find,li(q,""))}),$?Ti(M,l,d):M}function Ii(M,l,d,f){l*=1;let g,y,[_,b]=(M=+M||0).toString().split("e").map(Number),C=this?.options?.lang||Tn.lang,A=(M.toString().split(".")[1]||"").split("e")[0].length,R=l,I={};d??(d=C.decimalPoint),f??(f=C.thousandsSep),l===-1?l=Math.min(A,20):_i(l)?l&&b<0&&((y=l+b)>=0?(_=+_.toExponential(y).split("e")[0],l=y):(_=Math.floor(_),M=l<20?+(_*Math.pow(10,b)).toFixed(l):0,b=0)):l=2,b&&(l??(l=2),M=_),_i(l)&&l>=0&&(I.minimumFractionDigits=l,I.maximumFractionDigits=l),f===""&&(I.useGrouping=!1);let F=f||d,U=F?"en":this?.locale||C.locale||gn,H=JSON.stringify(I)+U;return g=(fs[H]??(fs[H]=new Intl.NumberFormat(U,I))).format(M),F&&(g=g.replace(/([,\.])/g,"_$1").replace(/_\,/g,f??",").replace("_.",d??".")),(l||+g!=0)&&(!(b<0)||R)||(g="0"),b&&+g!=0&&(g+="e"+(b<0?"":"+")+b),g}let Fi={dateFormat:function(M,l,d){return Pt.dateFormat(M,l,d)},format:Ti,helpers:Sr,numberFormat:Ii};(function(M){let l;M.rendererTypes={},M.getRendererType=function(d=l){return M.rendererTypes[d]||M.rendererTypes[l]},M.registerRendererType=function(d,f,g){M.rendererTypes[d]=f,(!l||g)&&(l=d,K.Renderer=f)}})(i||(i={}));let cr=i,{clamp:nr,pick:Kl,pushUnique:Ys,stableSort:Hu}=Mt;(r||(r={})).distribute=function M(l,d,f){let g=l,y=g.reducedLen||d,_=(ae,pe)=>ae.target-pe.target,b=[],C=l.length,A=[],R=b.push,I,F,U,H=!0,$,X,q=0,ie;for(I=C;I--;)q+=l[I].size;if(q>y){for(Hu(l,(ae,pe)=>(pe.rank||0)-(ae.rank||0)),U=(ie=l[0].rank===l[l.length-1].rank)?C/2:-1,F=ie?U:C-1;U&&q>y;)$=l[I=Math.floor(F)],Ys(A,I)&&(q-=$.size),F+=U,ie&&F>=l.length&&(U/=2,F=U);A.sort((ae,pe)=>pe-ae).forEach(ae=>R.apply(b,l.splice(ae,1)))}for(Hu(l,_),l=l.map(ae=>({size:ae.size,targets:[ae.target],align:Kl(ae.align,.5)}));H;){for(I=l.length;I--;)$=l[I],X=(Math.min.apply(0,$.targets)+Math.max.apply(0,$.targets))/2,$.pos=nr(X-$.size*$.align,0,d-$.size);for(I=l.length,H=!1;I--;)I>0&&l[I-1].pos+l[I-1].size>l[I].pos&&(l[I-1].size+=l[I].size,l[I-1].targets=l[I-1].targets.concat(l[I].targets),l[I-1].align=.5,l[I-1].pos+l[I-1].size>d&&(l[I-1].pos=d-l[I-1].size),l.splice(I,1),H=!0)}return R.apply(g,b),I=0,l.some(ae=>{let pe=0;return(ae.targets||[]).some(()=>(g[I].pos=ae.pos+pe,f!==void 0&&Math.abs(g[I].pos-g[I].target)>f?(g.slice(0,I+1).forEach(ke=>delete ke.pos),g.reducedLen=(g.reducedLen||d)-.1*d,g.reducedLen>.1*d&&M(g,d,f),!0):(pe+=g[I].size,I++,!1)))}),Hu(g,_),g};let Ql=r,{animate:$c,animObject:yf,stop:dl}=Gr,{deg2rad:qc,doc:Jl,svg:vf,SVG_NS:Xc,win:ti,isFirefox:ko}=K,{addEvent:ar,attr:$d,createElement:_f,crisp:Va,css:qd,defined:ps,erase:Yc,extend:Ua,fireEvent:$r,getAlignFactor:la,isArray:bf,isFunction:ju,isNumber:M0,isObject:Xd,isString:Yd,merge:Wu,objectEach:ec,pick:ii,pInt:Zd,pushUnique:Ps,replaceNested:Gu,syncTimeout:wm,uniqueKey:Zc}=Mt;class Ir{_defaultGetter(l){let d=ii(this[l+"Value"],this[l],this.element?this.element.getAttribute(l):null,0);return/^-?[\d\.]+$/.test(d)&&(d=parseFloat(d)),d}_defaultSetter(l,d,f){f.setAttribute(d,l)}add(l){let d,f=this.renderer,g=this.element;return l&&(this.parentGroup=l),this.textStr!==void 0&&this.element.nodeName==="text"&&f.buildText(this),this.added=!0,(!l||l.handleZ||this.zIndex)&&(d=this.zIndexSetter()),d||(l?l.element:f.box).appendChild(g),this.onAdd&&this.onAdd(),this}addClass(l,d){let f=d?"":this.attr("class")||"";return(l=(l||"").split(/ /g).reduce(function(g,y){return f.indexOf(y)===-1&&g.push(y),g},f?[f]:[]).join(" "))!==f&&this.attr("class",l),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(l,d,f,g=!0){let y=this.renderer,_=y.alignedObjects,b=!!l;l?(this.alignOptions=l,this.alignByTranslate=d,this.alignTo=f):(l=this.alignOptions||{},d=this.alignByTranslate,f=this.alignTo);let C=!f||Yd(f)?f||"renderer":void 0;C&&(b&&Ps(_,this),f=void 0);let A=ii(f,y[C],y),R=(A.x||0)+(l.x||0)+((A.width||0)-(l.width||0))*la(l.align),I=(A.y||0)+(l.y||0)+((A.height||0)-(l.height||0))*la(l.verticalAlign),F={"text-align":l?.align};return F[d?"translateX":"x"]=Math.round(R),F[d?"translateY":"y"]=Math.round(I),g&&(this[this.placed?"animate":"attr"](F),this.placed=!0),this.alignAttr=F,this}alignSetter(l){let d={left:"start",center:"middle",right:"end"};d[l]&&(this.alignValue=l,this.element.setAttribute("text-anchor",d[l]))}animate(l,d,f){let g=yf(ii(d,this.renderer.globalAnimation,!0)),y=g.defer;return Jl.hidden&&(g.duration=0),g.duration!==0?(f&&(g.complete=f),wm(()=>{this.element&&$c(this,l,g)},y)):(this.attr(l,void 0,f||g.complete),ec(l,function(_,b){g.step&&g.step.call(this,_,{prop:b,pos:1,elem:this})},this)),this}applyTextOutline(l){let d=this.element;l.indexOf("contrast")!==-1&&(l=l.replace(/contrast/g,this.renderer.getContrast(d.style.fill)));let f=l.indexOf(" "),g=l.substring(f+1),y=l.substring(0,f);if(y&&y!=="none"&&K.svg){this.fakeTS=!0,y=y.replace(/(^[\d\.]+)(.*?)$/g,function(R,I,F){return 2*Number(I)+F}),this.removeTextOutline();let _=Jl.createElementNS(Xc,"tspan");$d(_,{class:"highcharts-text-outline",fill:g,stroke:g,"stroke-width":y,"stroke-linejoin":"round"});let b=d.querySelector("textPath")||d;[].forEach.call(b.childNodes,R=>{let I=R.cloneNode(!0);I.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(F=>I.removeAttribute(F)),_.appendChild(I)});let C=0;[].forEach.call(b.querySelectorAll("text tspan"),R=>{C+=Number(R.getAttribute("dy"))});let A=Jl.createElementNS(Xc,"tspan");A.textContent="\u200B",$d(A,{x:Number(d.getAttribute("x")),dy:-C}),_.appendChild(A),b.insertBefore(_,b.firstChild)}}attr(l,d,f,g){let{element:y}=this,_=Ir.symbolCustomAttribs,b,C,A=this,R;return typeof l=="string"&&d!==void 0&&(b=l,(l={})[b]=d),typeof l=="string"?A=(this[l+"Getter"]||this._defaultGetter).call(this,l,y):(ec(l,function(I,F){R=!1,g||dl(this,F),this.symbolName&&_.indexOf(F)!==-1&&(C||(this.symbolAttr(l),C=!0),R=!0),this.rotation&&(F==="x"||F==="y")&&(this.doTransform=!0),R||(this[F+"Setter"]||this._defaultSetter).call(this,I,F,y)},this),this.afterSetters()),f&&f.call(this),A}clip(l){if(l&&!l.clipPath){let d=Zc()+"-",f=this.renderer.createElement("clipPath").attr({id:d}).add(this.renderer.defs);Ua(l,{clipPath:f,id:d,count:0}),l.add(f)}return this.attr("clip-path",l?`url(${this.renderer.url}#${l.id})`:"none")}crisp(l,d){d=Math.round(d||l.strokeWidth||0);let f=l.x||this.x||0,g=l.y||this.y||0,y=(l.width||this.width||0)+f,_=(l.height||this.height||0)+g,b=Va(f,d),C=Va(g,d);return Ua(l,{x:b,y:C,width:Va(y,d)-b,height:Va(_,d)-C}),ps(l.strokeWidth)&&(l.strokeWidth=d),l}complexColor(l,d,f){let g=this.renderer,y,_,b,C,A,R,I,F,U,H,$=[],X;$r(this.renderer,"complexColor",{args:arguments},function(){if(l.radialGradient?_="radialGradient":l.linearGradient&&(_="linearGradient"),_){if(b=l[_],A=g.gradients,R=l.stops,U=f.radialReference,bf(b)&&(l[_]=b={x1:b[0],y1:b[1],x2:b[2],y2:b[3],gradientUnits:"userSpaceOnUse"}),_==="radialGradient"&&U&&!ps(b.gradientUnits)&&(C=b,b=Wu(b,g.getRadialAttr(U,C),{gradientUnits:"userSpaceOnUse"})),ec(b,function(q,ie){ie!=="id"&&$.push(ie,q)}),ec(R,function(q){$.push(q)}),A[$=$.join(",")])H=A[$].attr("id");else{b.id=H=Zc();let q=A[$]=g.createElement(_).attr(b).add(g.defs);q.radAttr=C,q.stops=[],R.forEach(function(ie){ie[1].indexOf("rgba")===0?(I=(y=Dn.parse(ie[1])).get("rgb"),F=y.get("a")):(I=ie[1],F=1);let ae=g.createElement("stop").attr({offset:ie[0],"stop-color":I,"stop-opacity":F}).add(q);q.stops.push(ae)})}X="url("+g.url+"#"+H+")",f.setAttribute(d,X),f.gradient=$,l.toString=function(){return X}}})}css(l){let d=this.styles,f={},g=this.element,y,_=!d;if(d&&ec(l,function(b,C){d&&d[C]!==b&&(f[C]=b,_=!0)}),_){d&&(l=Ua(d,f)),l.width===null||l.width==="auto"?delete this.textWidth:g.nodeName.toLowerCase()==="text"&&l.width&&(y=this.textWidth=Zd(l.width)),Ua(this.styles,l),y&&!vf&&this.renderer.forExport&&delete l.width;let b=ko&&l.fontSize||null;b&&(M0(b)||/^\d+$/.test(b))&&(l.fontSize+="px");let C=Wu(l);g.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","whiteSpace","width"].forEach(A=>C&&delete C[A]),C.color&&(C.fill=C.color,delete C.color)),qd(g,C)}return this.added&&(this.element.nodeName==="text"&&this.renderer.buildText(this),l.textOutline&&this.applyTextOutline(l.textOutline)),this}dashstyleSetter(l){let d,f=this["stroke-width"];if(f==="inherit"&&(f=1),l){let g=(l=l.toLowerCase()).replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(d=g.length;d--;)g[d]=""+Zd(g[d])*ii(f,NaN);l=g.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",l)}}destroy(){let l=this,d=l.element||{},f=l.renderer,g=d.ownerSVGElement,y=d.nodeName==="SPAN"&&l.parentGroup||void 0,_,b;if(d.onclick=d.onmouseout=d.onmouseover=d.onmousemove=d.point=null,dl(l),l.clipPath&&g){let C=l.clipPath;[].forEach.call(g.querySelectorAll("[clip-path],[CLIP-PATH]"),function(A){A.getAttribute("clip-path").indexOf(C.element.id)>-1&&A.removeAttribute("clip-path")}),l.clipPath=C.destroy()}if(l.stops){for(b=0;b<l.stops.length;b++)l.stops[b].destroy();l.stops.length=0,l.stops=void 0}for(l.safeRemoveChild(d);y?.div&&y.div.childNodes.length===0;)_=y.parentGroup,l.safeRemoveChild(y.div),delete y.div,y=_;l.alignOptions&&Yc(f.alignedObjects,l),ec(l,(C,A)=>{(l[A]?.parentGroup===l||["connector","foreignObject"].indexOf(A)!==-1)&&l[A]?.destroy?.(),delete l[A]})}dSetter(l,d,f){bf(l)&&(typeof l[0]=="string"&&(l=this.renderer.pathToSegments(l)),this.pathArray=l,l=l.reduce((g,y,_)=>y?.join?(_?g+" ":"")+y.join(" "):(y||"").toString(),"")),/(NaN| {2}|^$)/.test(l)&&(l="M 0 0"),this[d]!==l&&(f.setAttribute(d,l),this[d]=l)}fillSetter(l,d,f){typeof l=="string"?f.setAttribute(d,l):l&&this.complexColor(l,d,f)}hrefSetter(l,d,f){f.setAttributeNS("http://www.w3.org/1999/xlink",d,l)}getBBox(l,d){let f,g,y,_,{alignValue:b,element:C,renderer:A,styles:R,textStr:I}=this,{cache:F,cacheKeys:U}=A,H=C.namespaceURI===this.SVG_NS,$=ii(d,this.rotation,0),X=A.styledMode?C&&Ir.prototype.getStyle.call(C,"font-size"):R.fontSize;if(ps(I)&&((_=I.toString()).indexOf("<")===-1&&(_=_.replace(/\d/g,"0")),_+=["",A.rootFontSize,X,$,this.textWidth,b,R.lineClamp,R.textOverflow,R.fontWeight].join(",")),_&&!l&&(f=F[_]),!f||f.polygon){if(H||A.forExport){try{y=this.fakeTS&&function(ie){let ae=C.querySelector(".highcharts-text-outline");ae&&qd(ae,{display:ie})},ju(y)&&y("none"),f=C.getBBox?Ua({},C.getBBox()):{width:C.offsetWidth,height:C.offsetHeight,x:0,y:0},ju(y)&&y("")}catch{}(!f||f.width<0)&&(f={x:0,y:0,width:0,height:0})}else f=this.htmlGetBBox();g=f.height,H&&(f.height=g={"11px,17":14,"13px,20":16}[`${X||""},${Math.round(g)}`]||g),$&&(f=this.getRotatedBox(f,$));let q={bBox:f};$r(this,"afterGetBBox",q),f=q.bBox}if(_&&(I===""||f.height>0)){for(;U.length>250;)delete F[U.shift()];F[_]||U.push(_),F[_]=f}return f}getRotatedBox(l,d){let{x:f,y:g,width:y,height:_}=l,{alignValue:b,translateY:C,rotationOriginX:A=0,rotationOriginY:R=0}=this,I=la(b),F=Number(this.element.getAttribute("y")||0)-(C?0:g),U=d*qc,H=(d-90)*qc,$=Math.cos(U),X=Math.sin(U),q=y*$,ie=y*X,ae=Math.cos(H),pe=Math.sin(H),[[ke,Te],[Se,De]]=[A,R].map($n=>[$n-$n*$,$n*X]),Ye=f+I*(y-q)+ke+De+F*ae,Je=Ye+q,st=Je-_*ae,Gt=st-q,xn=g+F-I*ie-Te+Se+F*pe,Cn=xn+ie,Xt=Cn-_*pe,Bt=Xt-ie,cn=Math.min(Ye,Je,st,Gt),Tr=Math.min(xn,Cn,Xt,Bt),Ji=Math.max(Ye,Je,st,Gt)-cn,jo=Math.max(xn,Cn,Xt,Bt)-Tr;return{x:cn,y:Tr,width:Ji,height:jo,polygon:[[Ye,xn],[Je,Cn],[st,Xt],[Gt,Bt]]}}getStyle(l){return ti.getComputedStyle(this.element||this,"").getPropertyValue(l)}hasClass(l){return(""+this.attr("class")).split(" ").indexOf(l)!==-1}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(l,d){this.onEvents={},this.opacity=1,this.SVG_NS=Xc,this.element=d==="span"||d==="body"?_f(d):Jl.createElementNS(this.SVG_NS,d),this.renderer=l,this.styles={},$r(this,"afterInit")}on(l,d){let{onEvents:f}=this;return f[l]&&f[l](),f[l]=ar(this.element,l,d),this}opacitySetter(l,d,f){let g=Number(Number(l).toFixed(3));this.opacity=g,f.setAttribute(d,g)}reAlign(){this.alignOptions?.width&&this.alignOptions.align!=="left"&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(l){return this.attr("class",(""+this.attr("class")).replace(Yd(l)?RegExp(`(^| )${l}( |$)`):l," ").replace(/ +/g," ").trim())}removeTextOutline(){let l=this.element.querySelector("tspan.highcharts-text-outline");l&&this.safeRemoveChild(l)}safeRemoveChild(l){let d=l.parentNode;d&&d.removeChild(l)}setRadialReference(l){let d=this.element.gradient&&this.renderer.gradients[this.element.gradient]||void 0;return this.element.radialReference=l,d?.radAttr&&d.animate(this.renderer.getRadialAttr(l,d.radAttr)),this}shadow(l){let{renderer:d}=this,f=Wu(this.parentGroup?.rotation===90?{offsetX:-1,offsetY:-1}:{},Xd(l)?l:{}),g=d.shadowDefinition(f);return this.attr({filter:l?`url(${d.url}#${g})`:"none"})}show(l=!0){return this.attr({visibility:l?"inherit":"visible"})}"stroke-widthSetter"(l,d,f){this[d]=l,f.setAttribute(d,l)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let l=this.getStyle("stroke-width"),d=0,f;return/px$/.test(l)?d=Zd(l):l!==""&&($d(f=Jl.createElementNS(Xc,"rect"),{width:l,"stroke-width":0}),this.element.parentNode.appendChild(f),d=f.getBBox().width,f.parentNode.removeChild(f)),d}symbolAttr(l){let d=this;Ir.symbolCustomAttribs.forEach(function(f){d[f]=ii(l[f],d[f])}),d.attr({d:d.renderer.symbols[d.symbolName](d.x,d.y,d.width,d.height,d)})}textSetter(l){l!==this.textStr&&(delete this.textPxLength,this.textStr=l,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(l){let d=this.element,f=d.getElementsByTagName("title")[0]||Jl.createElementNS(this.SVG_NS,"title");d.insertBefore?d.insertBefore(f,d.firstChild):d.appendChild(f),f.textContent=Gu(ii(l,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let l=this.element;return l.parentNode.appendChild(l),this}translate(l,d){return this.attr({translateX:l,translateY:d})}updateTransform(l="transform"){let{element:d,foreignObject:f,matrix:g,padding:y,rotation:_=0,rotationOriginX:b,rotationOriginY:C,scaleX:A,scaleY:R,text:I,translateX:F=0,translateY:U=0}=this,H=["translate("+F+","+U+")"];ps(g)&&H.push("matrix("+g.join(",")+")"),_&&(H.push("rotate("+_+" "+(b??d.getAttribute("x")??this.x??0)+" "+(C??d.getAttribute("y")??this.y??0)+")"),I?.element.tagName!=="SPAN"||I?.foreignObject||I.attr({rotation:_,rotationOriginX:(b||0)-y,rotationOriginY:(C||0)-y})),(ps(A)||ps(R))&&H.push("scale("+ii(A,1)+" "+ii(R,1)+")"),H.length&&!(I||this).textPath&&(f?.element||d).setAttribute(l,H.join(" "))}visibilitySetter(l,d,f){l==="inherit"?f.removeAttribute(d):this[d]!==l&&f.setAttribute(d,l),this[d]=l}xGetter(l){return this.element.nodeName==="circle"&&(l==="x"?l="cx":l==="y"&&(l="cy")),this._defaultGetter(l)}zIndexSetter(l,d){let f=this.renderer,g=this.parentGroup,y=(g||f).element||f.box,_=this.element,b=y===f.box,C,A,R,I=!1,F,U=this.added,H;if(ps(l)?(_.setAttribute("data-z-index",l),l*=1,this[d]===l&&(U=!1)):ps(this[d])&&_.removeAttribute("data-z-index"),this[d]=l,U){for((l=this.zIndex)&&g&&(g.handleZ=!0),H=(C=y.childNodes).length-1;H>=0&&!I;H--)F=!ps(R=(A=C[H]).getAttribute("data-z-index")),A!==_&&(l<0&&F&&!b&&!H?(y.insertBefore(_,C[H]),I=!0):(Zd(R)<=l||F&&(!ps(l)||l>=0))&&(y.insertBefore(_,C[H+1]),I=!0));I||(y.insertBefore(_,C[3*!!b]),I=!0)}return I}}Ir.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],Ir.prototype.strokeSetter=Ir.prototype.fillSetter,Ir.prototype.yGetter=Ir.prototype.xGetter,Ir.prototype.matrixSetter=Ir.prototype.rotationOriginXSetter=Ir.prototype.rotationOriginYSetter=Ir.prototype.rotationSetter=Ir.prototype.scaleXSetter=Ir.prototype.scaleYSetter=Ir.prototype.translateXSetter=Ir.prototype.translateYSetter=Ir.prototype.verticalAlignSetter=function(M,l){this[l]=M,this.doTransform=!0};let ca=Ir,{defined:Kc,extend:E0,getAlignFactor:Cm,isNumber:tc,merge:T0,pick:oo,removeEvent:Lo}=Mt;class hl extends ca{constructor(l,d,f,g,y,_,b,C,A,R){let I;super(l,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.doUpdate=!1,this.textStr=d,this.x=f,this.y=g,this.anchorX=_,this.anchorY=b,this.baseline=A,this.className=R,this.addClass(R==="button"?"highcharts-no-tooltip":"highcharts-label"),R&&this.addClass("highcharts-"+R),this.text=l.text(void 0,0,0,C).attr({zIndex:1}),typeof y=="string"&&((I=/^url\((.*?)\)$/.test(y))||this.renderer.symbols[y])&&(this.symbolKey=y),this.bBox=hl.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=l.styledMode||I,this.deferredAttr={},this.alignFactor=0}alignSetter(l){let d=Cm(l);this.textAlign=l,d!==this.alignFactor&&(this.alignFactor=d,this.bBox&&tc(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(l,d){this.anchorX=l,this.boxAttr(d,Math.round(l)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(l,d){this.anchorY=l,this.boxAttr(d,l-this.ySetting)}boxAttr(l,d){this.box?this.box.attr(l,d):this.deferredAttr[l]=d}css(l){if(l){let d={};l=T0(l),hl.textProps.forEach(f=>{l[f]!==void 0&&(d[f]=l[f],delete l[f])}),this.text.css(d),"fontSize"in d||"fontWeight"in d?this.updateTextPadding():("width"in d||"textOverflow"in d)&&this.updateBoxSize()}return ca.prototype.css.call(this,l)}destroy(){Lo(this.element,"mouseenter"),Lo(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),ca.prototype.destroy.call(this)}fillSetter(l,d){l&&(this.needsBox=!0),this.fill=l,this.boxAttr(d,l)}getBBox(l,d){this.textStr&&this.bBox.width===0&&this.bBox.height===0&&this.updateBoxSize();let{padding:f,height:g=0,translateX:y=0,translateY:_=0,width:b=0}=this,C=oo(this.paddingLeft,f),A=d??(this.rotation||0),R={width:b,height:g,x:y+this.bBox.x-C,y:_+this.bBox.y-f+this.baselineOffset};return A&&(R=this.getRotatedBox(R,A)),R}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(l){this.heightSetting=l,this.doUpdate=!0}afterSetters(){super.afterSetters(),this.doUpdate&&(this.updateBoxSize(),this.doUpdate=!1)}onAdd(){this.text.add(this),this.attr({text:oo(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&Kc(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(l,d){tc(l)?l!==this[d]&&(this[d]=l,this.updateTextPadding()):this[d]=void 0}rSetter(l,d){this.boxAttr(d,l)}strokeSetter(l,d){this.stroke=l,this.boxAttr(d,l)}"stroke-widthSetter"(l,d){l&&(this.needsBox=!0),this["stroke-width"]=l,this.boxAttr(d,l)}"text-alignSetter"(l){this.textAlign=this["text-align"]=l,this.updateTextPadding()}textSetter(l){l!==void 0&&this.text.attr({text:l}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let l,d=this.text,f={},g=this.padding,y=this.bBox=(!tc(this.widthSetting)||!tc(this.heightSetting)||this.textAlign)&&Kc(d.textStr)?d.getBBox(void 0,0):hl.emptyBBox;this.width=this.getPaddedWidth(),this.height=(this.heightSetting||y.height||0)+2*g;let _=this.renderer.fontMetrics(d);if(this.baselineOffset=g+Math.min((this.text.firstLineMetrics||_).b,y.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-_.h)/2),this.needsBox&&!d.textPath){if(!this.box){let b=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();b.addClass((this.className==="button"?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),b.add(this)}f.x=l=this.getCrispAdjust(),f.y=(this.baseline?-this.baselineOffset:0)+l,f.width=Math.round(this.width),f.height=Math.round(this.height),this.box.attr(E0(f,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let l=this.text,d=l.styles.textAlign||this.textAlign;if(!l.textPath){this.updateBoxSize();let f=this.baseline?0:this.baselineOffset,g=(this.paddingLeft??this.padding)+Cm(d)*(this.widthSetting??this.bBox.width);(g!==l.x||f!==l.y)&&(l.attr({align:d,x:g}),f!==void 0&&l.attr("y",f)),l.x=g,l.y=f}}widthSetter(l){this.widthSetting=tc(l)?l:void 0,this.doUpdate=!0}getPaddedWidth(){let l=this.padding,d=oo(this.paddingLeft,l),f=oo(this.paddingRight,l);return(this.widthSetting||this.bBox.width||0)+d+f}xSetter(l){this.x=l,this.alignFactor&&(l-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(l),this.attr("translateX",this.xSetting)}ySetter(l){this.ySetting=this.y=Math.round(l),this.attr("translateY",this.ySetting)}}hl.emptyBBox={width:0,height:0,x:0,y:0},hl.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineClamp","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"];let{defined:za,isNumber:Sm,pick:Qc}=Mt;function Kd(M,l,d,f,g){let y=[];if(g){let _=g.start||0,b=g.end||0,C=Qc(g.r,d),A=Qc(g.r,f||d),R=2e-4/(g.borderRadius?1:Math.max(C,1)),I=Math.abs(b-_-2*Math.PI)<R;I&&(_=Math.PI/2,b=2.5*Math.PI-R);let F=g.innerR,U=Qc(g.open,I),H=Math.cos(_),$=Math.sin(_),X=Math.cos(b),q=Math.sin(b),ie=Qc(g.longArc,b-_-Math.PI<R?0:1),ae=["A",C,A,0,ie,Qc(g.clockwise,1),M+C*X,l+A*q];ae.params={start:_,end:b,cx:M,cy:l},y.push(["M",M+C*H,l+A*$],ae),za(F)&&((ae=["A",F,F,0,ie,za(g.clockwise)?1-g.clockwise:0,M+F*H,l+F*$]).params={start:b,end:_,cx:M,cy:l},y.push(U?["M",M+F*X,l+F*q]:["L",M+F*X,l+F*q],ae)),U||y.push(["Z"])}return y}function xf(M,l,d,f,g){return g?.r?Qd(M,l,d,f,g):[["M",M,l],["L",M+d,l],["L",M+d,l+f],["L",M,l+f],["Z"]]}function Qd(M,l,d,f,g){let y=g?.r||0;return[["M",M+y,l],["L",M+d-y,l],["A",y,y,0,0,1,M+d,l+y],["L",M+d,l+f-y],["A",y,y,0,0,1,M+d-y,l+f],["L",M+y,l+f],["A",y,y,0,0,1,M,l+f-y],["L",M,l+y],["A",y,y,0,0,1,M+y,l],["Z"]]}let wf={arc:Kd,callout:function(M,l,d,f,g){let y=Math.min(g?.r||0,d,f),_=y+6,b=g?.anchorX,C=g?.anchorY||0,A=Qd(M,l,d,f,{r:y});if(!Sm(b)||b<d&&b>0&&C<f&&C>0)return A;if(M+b>d-_)if(C>l+_&&C<l+f-_)A.splice(3,1,["L",M+d,C-6],["L",M+d+6,C],["L",M+d,C+6],["L",M+d,l+f-y]);else if(b<d){let R=C<l+_,I=R?l:l+f;A.splice(R?2:5,0,["L",b,C],["L",M+d-y,I])}else A.splice(3,1,["L",M+d,f/2],["L",b,C],["L",M+d,f/2],["L",M+d,l+f-y]);else if(M+b<_)if(C>l+_&&C<l+f-_)A.splice(7,1,["L",M,C+6],["L",M-6,C],["L",M,C-6],["L",M,l+y]);else if(b>0){let R=C<l+_,I=R?l:l+f;A.splice(R?1:6,0,["L",b,C],["L",M+y,I])}else A.splice(7,1,["L",M,f/2],["L",b,C],["L",M,f/2],["L",M,l+y]);else C>f&&b<d-_?A.splice(5,1,["L",b+6,l+f],["L",b,l+f+6],["L",b-6,l+f],["L",M+y,l+f]):C<0&&b>_&&A.splice(1,1,["L",b-6,l],["L",b,l-6],["L",b+6,l],["L",d-y,l]);return A},circle:function(M,l,d,f){return Kd(M+d/2,l+f/2,d/2,f/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(M,l,d,f){return[["M",M+d/2,l],["L",M+d,l+f/2],["L",M+d/2,l+f],["L",M,l+f/2],["Z"]]},rect:xf,roundedRect:Qd,square:xf,triangle:function(M,l,d,f){return[["M",M+d/2,l],["L",M+d,l+f],["L",M,l+f],["Z"]]},"triangle-down":function(M,l,d,f){return[["M",M,l],["L",M+d,l],["L",M+d/2,l+f],["Z"]]}},{doc:Cf,SVG_NS:nc,win:Jd}=K,{attr:$u,extend:Sf,fireEvent:Mf,isString:eh,objectEach:ic,pick:fl}=Mt,Ha=(M,l)=>M.substring(0,l)+"\u2026",ao=class{constructor(M){let l=M.styles;this.renderer=M.renderer,this.svgElement=M,this.width=M.textWidth,this.textLineHeight=l?.lineHeight,this.textOutline=l?.textOutline,this.ellipsis=l?.textOverflow==="ellipsis",this.lineClamp=l?.lineClamp,this.noWrap=l?.whiteSpace==="nowrap"}buildSVG(){let M=this.svgElement,l=M.element,d=M.renderer,f=fl(M.textStr,"").toString(),g=f.indexOf("<")!==-1,y=l.childNodes,_=!M.added&&d.box,b=[f,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,M.getStyle("font-size"),M.styles.lineClamp,this.width].join(",");if(b!==M.textCache){M.textCache=b,delete M.actualWidth;for(let C=y.length;C--;)l.removeChild(y[C]);if(g||this.ellipsis||this.width||M.textPath||f.indexOf(" ")!==-1&&(!this.noWrap||/<br.*?>/g.test(f))){if(f!==""){_&&_.appendChild(l);let C=new Wt(f);this.modifyTree(C.nodes),C.addToDOM(l),this.modifyDOM(),this.ellipsis&&(l.textContent||"").indexOf("\u2026")!==-1&&M.attr("title",this.unescapeEntities(M.textStr||"",["&lt;","&gt;"])),_&&_.removeChild(l)}}else l.appendChild(Cf.createTextNode(this.unescapeEntities(f)));eh(this.textOutline)&&M.applyTextOutline&&M.applyTextOutline(this.textOutline)}}modifyDOM(){let M,l=this.svgElement,d=$u(l.element,"x");for(l.firstLineMetrics=void 0;(M=l.element.firstChild)&&/^[\s\u200B]*$/.test(M.textContent||" ");)l.element.removeChild(M);[].forEach.call(l.element.querySelectorAll("tspan.highcharts-br"),(_,b)=>{_.nextSibling&&_.previousSibling&&(b===0&&_.previousSibling.nodeType===1&&(l.firstLineMetrics=l.renderer.fontMetrics(_.previousSibling)),$u(_,{dy:this.getLineHeight(_.nextSibling),x:d}))});let f=this.width||0;if(!f)return;let g=(_,b)=>{let C=_.textContent||"",A=C.replace(/([^\^])-/g,"$1- ").split(" "),R=!this.noWrap&&(A.length>1||l.element.childNodes.length>1),I=this.getLineHeight(b),F=Math.max(0,f-.8*I),U=0,H=l.actualWidth;if(R){let $=[],X=[];for(;b.firstChild&&b.firstChild!==_;)X.push(b.firstChild),b.removeChild(b.firstChild);for(;A.length;)if(A.length&&!this.noWrap&&U>0&&($.push(_.textContent||""),_.textContent=A.join(" ").replace(/- /g,"-")),this.truncate(_,void 0,A,U===0&&H||0,f,F,(q,ie)=>A.slice(0,ie).join(" ").replace(/- /g,"-")),H=l.actualWidth,U++,this.lineClamp&&U>=this.lineClamp){A.length&&(this.truncate(_,_.textContent||"",void 0,0,f,F,Ha),_.textContent=_.textContent?.replace("\u2026","")+"\u2026");break}X.forEach(q=>{b.insertBefore(q,_)}),$.forEach(q=>{b.insertBefore(Cf.createTextNode(q),_);let ie=Cf.createElementNS(nc,"tspan");ie.textContent="\u200B",$u(ie,{dy:I,x:d}),b.insertBefore(ie,_)})}else this.ellipsis&&C&&this.truncate(_,C,void 0,0,f,F,Ha)},y=_=>{[].slice.call(_.childNodes).forEach(b=>{b.nodeType===Jd.Node.TEXT_NODE?g(b,_):(b.className.baseVal.indexOf("highcharts-br")!==-1&&(l.actualWidth=0),y(b))})};y(l.element)}getLineHeight(M){let l=M.nodeType===Jd.Node.TEXT_NODE?M.parentElement:M;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(l||this.svgElement.element).h}modifyTree(M){let l=(d,f)=>{let{attributes:g={},children:y,style:_={},tagName:b}=d,C=this.renderer.styledMode;if(b==="b"||b==="strong"?C?g.class="highcharts-strong":_.fontWeight="bold":(b==="i"||b==="em")&&(C?g.class="highcharts-emphasized":_.fontStyle="italic"),_?.color&&(_.fill=_.color),b==="br"){g.class="highcharts-br",d.textContent="\u200B";let A=M[f+1];A?.textContent&&(A.textContent=A.textContent.replace(/^ +/gm,""))}else b==="a"&&y&&y.some(A=>A.tagName==="#text")&&(d.children=[{children:y,tagName:"tspan"}]);b!=="#text"&&b!=="a"&&(d.tagName="tspan"),Sf(d,{attributes:g,style:_}),y&&y.filter(A=>A.tagName!=="#text").forEach(l)};M.forEach(l),Mf(this.svgElement,"afterModifyTree",{nodes:M})}truncate(M,l,d,f,g,y,_){let b,C,A=this.svgElement,{rotation:R}=A,I=[],F=d&&!f?1:0,U=(l||d||"").length,H=U;d||(g=y);let $=function(X,q){let ie=q||X,ae=M.parentNode;if(ae&&I[ie]===void 0&&ae.getSubStringLength)try{I[ie]=f+ae.getSubStringLength(0,d?ie+1:ie)}catch{}return I[ie]};if(A.rotation=0,f+(C=$(M.textContent.length))>g){for(;F<=U;)H=Math.ceil((F+U)/2),d&&(b=_(d,H)),C=$(H,b&&b.length-1),F===U?F=U+1:C>g?U=H-1:F=H;U===0?M.textContent="":l&&U===l.length-1||(M.textContent=b||_(l||d,H)),this.ellipsis&&C>g&&this.truncate(M,M.textContent||"",void 0,0,g,y,Ha)}d&&d.splice(0,H),A.actualWidth=C,A.rotation=R}unescapeEntities(M,l){return ic(this.renderer.escapes,function(d,f){l&&l.indexOf(d)!==-1||(M=M.toString().replace(RegExp(d,"g"),f))}),M}},{defaultOptions:Mm}=_n,{charts:Em,deg2rad:Ef,doc:pl,isFirefox:th,isMS:qu,isWebKit:A0,noop:Tm,SVG_NS:D0,symbolSizes:lo,win:ml}=K,{addEvent:nh,attr:Zs,createElement:I0,crisp:rc,css:Xu,defined:No,destroyObjectProperties:Am,extend:ua,isArray:P0,isNumber:Ks,isObject:ja,isString:gl,merge:sc,pick:Tf,pInt:Wa,replaceNested:R0,uniqueKey:oc}=Mt;class Oo{constructor(l,d,f,g,y,_,b){let C,A;this.x=0,this.y=0;let R=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),I=R.element;b||R.css(this.getStyle(g||{})),l.appendChild(I),Zs(l,"dir","ltr"),l.innerHTML.indexOf("xmlns")===-1&&Zs(I,"xmlns",this.SVG_NS),this.box=I,this.boxWrapper=R,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(pl.createTextNode("Created with Highcharts 12.3.0")),this.defs=this.createElement("defs").add(),this.allowHTML=_,this.forExport=y,this.styledMode=b,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=R.getStyle("font-size"),this.setSize(d,f,!1),th&&l.getBoundingClientRect&&((C=function(){Xu(l,{left:0,top:0}),A=l.getBoundingClientRect(),Xu(l,{left:Math.ceil(A.left)-A.left+"px",top:Math.ceil(A.top)-A.top+"px"})})(),this.unSubPixelFix=nh(ml,"resize",C))}definition(l){return new Wt([l]).addToDOM(this.defs.element)}getReferenceURL(){if((th||A0)&&pl.getElementsByTagName("base").length){if(!No(t)){let l=oc(),d=new Wt([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:l},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${l})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(pl.body);Xu(d,{position:"fixed",top:0,left:0,zIndex:9e5}),t=pl.elementFromPoint(6,6)?.id==="hitme",pl.body.removeChild(d)}if(t)return R0(ml.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(l){return this.style=ua({fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif',fontSize:"1rem"},l),this.style}setStyle(l){this.boxWrapper.css(this.getStyle(l))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let l=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),Am(this.gradients||{}),this.gradients=null,this.defs=l.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(l){return new this.Element(this,l)}getRadialAttr(l,d){return{cx:l[0]-l[2]/2+(d.cx||0)*l[2],cy:l[1]-l[2]/2+(d.cy||0)*l[2],r:(d.r||0)*l[2]}}shadowDefinition(l){let d=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(l).map(g=>`${g}-${l[g]}`)].join("-").toLowerCase().replace(/[^a-z\d\-]/g,""),f=sc({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},l);return this.defs.element.querySelector(`#${d}`)||this.definition({tagName:"filter",attributes:{id:d,filterUnits:f.filterUnits},children:this.getShadowFilterContent(f)}),d}getShadowFilterContent(l){return[{tagName:"feDropShadow",attributes:{dx:l.offsetX,dy:l.offsetY,"flood-color":l.color,"flood-opacity":Math.min(5*l.opacity,1),stdDeviation:l.width/2}}]}buildText(l){new ao(l).buildSVG()}getContrast(l){if(l==="transparent")return"#000000";let d=Dn.parse(l).rgba,f=" clamp(0,calc(9e9*(0.5 - (0.2126*r + 0.7152*g + 0.0722*b))),1)";if(Ks(d[0])||!Dn.useColorMix){let g=d.map(_=>{let b=_/255;return b<=.04?b/12.92:Math.pow((b+.055)/1.055,2.4)}),y=.2126*g[0]+.7152*g[1]+.0722*g[2];return 1.05/(y+.05)>(y+.05)/.05?"#FFFFFF":"#000000"}return"color(from "+l+" srgb"+f+f+f+")"}button(l,d,f,g,y={},_,b,C,A,R){let I=this.label(l,d,f,A,void 0,void 0,R,void 0,"button"),F=this.styledMode,U=arguments,H=0;y=sc(Mm.global.buttonTheme,y),F&&(delete y.fill,delete y.stroke,delete y["stroke-width"]);let $=y.states||{},X=y.style||{};delete y.states,delete y.style;let q=[Wt.filterUserAttributes(y)],ie=[X];return F||["hover","select","disabled"].forEach((ae,pe)=>{q.push(sc(q[0],Wt.filterUserAttributes(U[pe+5]||$[ae]||{}))),ie.push(q[pe+1].style),delete q[pe+1].style}),nh(I.element,qu?"mouseover":"mouseenter",function(){H!==3&&I.setState(1)}),nh(I.element,qu?"mouseout":"mouseleave",function(){H!==3&&I.setState(H)}),I.setState=(ae=0)=>{if(ae!==1&&(I.state=H=ae),I.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][ae]),!F){I.attr(q[ae]);let pe=ie[ae];ja(pe)&&I.css(pe)}},I.attr(q[0]),!F&&(I.css(ua({cursor:"default"},X)),R&&I.text.css({pointerEvents:"none"})),I.on("touchstart",ae=>ae.stopPropagation()).on("click",function(ae){H!==3&&g?.call(I,ae)})}crispLine(l,d){let[f,g]=l;return No(f[1])&&f[1]===g[1]&&(f[1]=g[1]=rc(f[1],d)),No(f[2])&&f[2]===g[2]&&(f[2]=g[2]=rc(f[2],d)),l}path(l){let d=this.styledMode?{}:{fill:"none"};return P0(l)?d.d=l:ja(l)&&ua(d,l),this.createElement("path").attr(d)}circle(l,d,f){let g=ja(l)?l:l===void 0?{}:{x:l,y:d,r:f},y=this.createElement("circle");return y.xSetter=y.ySetter=function(_,b,C){C.setAttribute("c"+b,_)},y.attr(g)}arc(l,d,f,g,y,_){let b;ja(l)?(d=(b=l).y,f=b.r,g=b.innerR,y=b.start,_=b.end,l=b.x):b={innerR:g,start:y,end:_};let C=this.symbol("arc",l,d,f,f,b);return C.r=f,C}rect(l,d,f,g,y,_){let b=ja(l)?l:l===void 0?{}:{x:l,y:d,r:y,width:Math.max(f||0,0),height:Math.max(g||0,0)},C=this.createElement("rect");return this.styledMode||(_!==void 0&&(b["stroke-width"]=_,ua(b,C.crisp(b))),b.fill="none"),C.rSetter=function(A,R,I){C.r=A,Zs(I,{rx:A,ry:A})},C.rGetter=function(){return C.r||0},C.attr(b)}roundedRect(l){return this.symbol("roundedRect").attr(l)}setSize(l,d,f){this.width=l,this.height=d,this.boxWrapper.animate({width:l,height:d},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:Tf(f,!0)?void 0:0}),this.alignElements()}g(l){let d=this.createElement("g");return l?d.attr({class:"highcharts-"+l}):d}image(l,d,f,g,y,_){let b={preserveAspectRatio:"none"};Ks(d)&&(b.x=d),Ks(f)&&(b.y=f),Ks(g)&&(b.width=g),Ks(y)&&(b.height=y);let C=this.createElement("image").attr(b),A=function(R){C.attr({href:l}),_.call(C,R)};if(_){C.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let R=new ml.Image;nh(R,"load",A),R.src=l,R.complete&&A({})}else C.attr({href:l});return C}symbol(l,d,f,g,y,_){let b,C,A,R,I=this,F=/^url\((.*?)\)$/,U=F.test(l),H=!U&&(this.symbols[l]?l:"circle"),$=H&&this.symbols[H];if($)typeof d=="number"&&(C=$.call(this.symbols,d||0,f||0,g||0,y||0,_)),b=this.path(C),I.styledMode||b.attr("fill","none"),ua(b,{symbolName:H||void 0,x:d,y:f,width:g,height:y}),_&&ua(b,_);else if(U){A=l.match(F)[1];let X=b=this.image(A);X.imgwidth=Tf(_?.width,lo[A]?.width),X.imgheight=Tf(_?.height,lo[A]?.height),R=q=>q.attr({width:q.width,height:q.height}),["width","height"].forEach(q=>{X[`${q}Setter`]=function(ie,ae){this[ae]=ie;let{alignByTranslate:pe,element:ke,width:Te,height:Se,imgwidth:De,imgheight:Ye}=this,Je=ae==="width"?De:Ye,st=1;_&&_.backgroundSize==="within"&&Te&&Se&&De&&Ye?(st=Math.min(Te/De,Se/Ye),Zs(ke,{width:Math.round(De*st),height:Math.round(Ye*st)})):ke&&Je&&ke.setAttribute(ae,Je),!pe&&De&&Ye&&this.translate(((Te||0)-De*st)/2,((Se||0)-Ye*st)/2)}}),No(d)&&X.attr({x:d,y:f}),X.isImg=!0,X.symbolUrl=l,No(X.imgwidth)&&No(X.imgheight)?R(X):(X.attr({width:0,height:0}),I0("img",{onload:function(){let q=Em[I.chartIndex];this.width===0&&(Xu(this,{position:"absolute",top:"-999em"}),pl.body.appendChild(this)),lo[A]={width:this.width,height:this.height},X.imgwidth=this.width,X.imgheight=this.height,X.element&&R(X),this.parentNode&&this.parentNode.removeChild(this),I.imgCount--,I.imgCount||!q||q.hasLoaded||q.onload()},src:A}),this.imgCount++)}return b}clipRect(l,d,f,g){return this.rect(l,d,f,g,0)}text(l,d,f,g){let y={};if(g&&(this.allowHTML||!this.forExport))return this.html(l,d,f);y.x=Math.round(d||0),f&&(y.y=Math.round(f)),No(l)&&(y.text=l);let _=this.createElement("text").attr(y);return g&&(!this.forExport||this.allowHTML)||(_.xSetter=function(b,C,A){let R=A.getElementsByTagName("tspan"),I=A.getAttribute(C);for(let F=0,U;F<R.length;F++)(U=R[F]).getAttribute(C)===I&&U.setAttribute(C,b);A.setAttribute(C,b)}),_}fontMetrics(l){let d=Wa(ca.prototype.getStyle.call(l,"font-size")||0),f=d<24?d+3:Math.round(1.2*d),g=Math.round(.8*f);return{h:f,b:g,f:d}}rotCorr(l,d,f){let g=l;return d&&f&&(g=Math.max(g*Math.cos(d*Ef),4)),{x:-l/3*Math.sin(d*Ef),y:g}}pathToSegments(l){let d=[],f=[],g={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let y=0;y<l.length;y++)gl(f[0])&&Ks(l[y])&&f.length===g[f[0].toUpperCase()]&&l.splice(y,0,f[0].replace("M","L").replace("m","l")),typeof l[y]=="string"&&(f.length&&d.push(f.slice(0)),f.length=0),f.push(l[y]);return d.push(f.slice(0)),d}label(l,d,f,g,y,_,b,C,A){return new hl(this,l,d,f,g,y,_,b,C,A)}alignElements(){this.alignedObjects.forEach(l=>l.align())}}ua(Oo.prototype,{Element:ca,SVG_NS:D0,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:wf,draw:Tm}),cr.registerRendererType("svg",Oo,!0);let{composed:da,isFirefox:ih}=K,{attr:Af,css:Fo,createElement:yl,defined:ac,extend:lc,getAlignFactor:Jc,isNumber:cc,pInt:rh,pushUnique:Df}=Mt;function Dm(M,l,d){let f=this.div?.style;ca.prototype[`${l}Setter`].call(this,M,l,d),f&&(d.style[l]=f[l]=M)}let sh=(M,l)=>{if(!M.div){let d=Af(M.element,"class"),f=M.css,g=yl("div",d?{className:d}:void 0,Mn(Ke({position:"absolute",left:`${M.translateX||0}px`,top:`${M.translateY||0}px`},M.styles),{display:M.display,opacity:M.opacity,visibility:M.visibility}),M.parentGroup?.div||l);M.classSetter=(y,_,b)=>{b.setAttribute("class",y),g.className=y},M.translateXSetter=M.translateYSetter=(y,_)=>{M[_]=y,g.style[_==="translateX"?"left":"top"]=`${y}px`,M.doTransform=!0},M.scaleXSetter=M.scaleYSetter=(y,_)=>{M[_]=y,M.doTransform=!0},M.opacitySetter=M.visibilitySetter=Dm,M.css=y=>(f.call(M,y),y.cursor&&(g.style.cursor=y.cursor),y.pointerEvents&&(g.style.pointerEvents=y.pointerEvents),M),M.on=function(){return ca.prototype.on.apply({element:g,onEvents:M.onEvents},arguments),M},M.div=g}return M.div};class vl extends ca{static compose(l){Df(da,this.compose)&&(l.prototype.html=function(d,f,g){return new vl(this,"span").attr({text:d,x:Math.round(f),y:Math.round(g)})})}constructor(l,d){super(l,d),vl.useForeignObject?this.foreignObject=l.createElement("foreignObject").attr({zIndex:2}):this.css(Ke({position:"absolute"},l.styledMode?{}:{fontFamily:l.style.fontFamily,fontSize:l.style.fontSize})),this.element.style.whiteSpace="nowrap"}getSpanCorrection(l,d,f){this.xCorr=-l*f,this.yCorr=-d}css(l){let d,{element:f}=this,g=f.tagName==="SPAN"&&l&&"width"in l,y=g&&l.width;return g&&(delete l.width,this.textWidth=rh(y)||void 0,d=!0),l?.textOverflow==="ellipsis"&&(l.overflow="hidden",l.whiteSpace="nowrap"),l?.lineClamp&&(l.display="-webkit-box",l.WebkitLineClamp=l.lineClamp,l.WebkitBoxOrient="vertical",l.overflow="hidden"),cc(Number(l?.fontSize))&&(l.fontSize+="px"),lc(this.styles,l),Fo(f,l),d&&this.updateTransform(),this}htmlGetBBox(){let{element:l}=this;return{x:l.offsetLeft,y:l.offsetTop,width:l.offsetWidth,height:l.offsetHeight}}updateTransform(){if(!this.added){this.alignOnAdd=!0;return}let{element:l,foreignObject:d,oldTextWidth:f,renderer:g,rotation:y,rotationOriginX:_,rotationOriginY:b,scaleX:C,scaleY:A,styles:{display:R="inline-block",whiteSpace:I},textAlign:F="left",textWidth:U,translateX:H=0,translateY:$=0,x:X=0,y:q=0}=this;if(d||Fo(l,{marginLeft:`${H}px`,marginTop:`${$}px`}),l.tagName==="SPAN"){let ie,ae=[y,F,l.innerHTML,U,this.textAlign].join(","),pe=-(this.parentGroup?.padding*1)||0;if(U!==f){let De=this.textPxLength?this.textPxLength:(Fo(l,{width:"",whiteSpace:I||"nowrap"}),l.offsetWidth),Ye=U||0,Je=l.style.textOverflow===""&&l.style.webkitLineClamp;(Ye>f||De>Ye||Je)&&(/[\-\s\u00AD]/.test(l.textContent||l.innerText)||l.style.textOverflow==="ellipsis")&&(Fo(l,{width:(y||C||De>Ye||Je)&&cc(U)?U+"px":"auto",display:R,whiteSpace:I||"normal"}),this.oldTextWidth=U)}d&&(Fo(l,{display:"inline-block",verticalAlign:"top"}),d.attr({width:g.width,height:g.height})),ae!==this.cTT&&(ie=g.fontMetrics(l).b,ac(y)&&!d&&(y!==(this.oldRotation||0)||F!==this.oldAlign)&&Fo(l,{transform:`rotate(${y}deg)`,transformOrigin:`${pe}% ${pe}px`}),this.getSpanCorrection(!ac(y)&&!this.textWidth&&this.textPxLength||l.offsetWidth,ie,Jc(F)));let{xCorr:ke=0,yCorr:Te=0}=this,Se={left:`${X+ke}px`,top:`${q+Te}px`,textAlign:F,transformOrigin:`${(_??X)-ke-X-pe}px ${(b??q)-Te-q-pe}px`};(C||A)&&(Se.transform=`scale(${C??1},${A??1})`),d?(super.updateTransform(),cc(X)&&cc(q)?(d.attr({x:X+ke,y:q+Te,width:l.offsetWidth+3,height:l.offsetHeight,"transform-origin":l.getAttribute("transform-origin")||"0 0"}),Fo(l,{display:R,textAlign:F})):ih&&d.attr({width:0,height:0})):Fo(l,Se),this.cTT=ae,this.oldRotation=y,this.oldAlign=F}}add(l){let{foreignObject:d,renderer:f}=this,g=f.box.parentNode,y=[];if(d)d.add(l),super.add(f.createElement("body").attr({xmlns:"http://www.w3.org/1999/xhtml"}).css({background:"transparent",margin:"0 3px 0 0"}).add(d));else{let _;if(this.parentGroup=l,l&&!(_=l.div)){let b=l;for(;b;)y.push(b),b=b.parentGroup;for(let C of y.reverse())_=sh(C,g)}(_||g).appendChild(this.element)}return this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(l){l!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,Wt.setElementHTML(this.element,l??""),this.textStr=l,this.doTransform=!0)}alignSetter(l){this.alignValue=this.textAlign=l,this.doTransform=!0}xSetter(l,d){this[d]=l,this.doTransform=!0}}let _l=vl.prototype;_l.visibilitySetter=_l.opacitySetter=Dm,_l.ySetter=_l.rotationSetter=_l.rotationOriginXSetter=_l.rotationOriginYSetter=_l.xSetter,function(M){M.xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%[HMSL]",range:!1},second:{main:"%[HMS]",range:!1},minute:{main:"%[HM]",range:!1},hour:{main:"%[HM]",range:!1},day:{main:"%[eb]"},week:{main:"%[eb]"},month:{main:"%[bY]"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em",textOverflow:"ellipsis"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},M.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:l}=this.axis.chart;return l(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0}}(s||(s={}));let eu=s,{addEvent:Im,isFunction:Yu,objectEach:os,removeEvent:Zu}=Mt;(o||(o={})).registerEventOptions=function(M,l){M.eventOptions=M.eventOptions||{},os(l.events,function(d,f){M.eventOptions[f]!==d&&(M.eventOptions[f]&&(Zu(M,f,M.eventOptions[f]),delete M.eventOptions[f]),Yu(d)&&(M.eventOptions[f]=d,Im(M,f,d,{order:0})))})};let ha=o,{deg2rad:tu}=K,{clamp:k0,correctFloat:Ku,defined:Ga,destroyObjectProperties:Rs,extend:Pm,fireEvent:yo,getAlignFactor:Rm,isNumber:Qu,merge:km,objectEach:$a,pick:Bo}=Mt,ks=class{constructor(M,l,d,f,g){this.isNew=!0,this.isNewLabel=!0,this.axis=M,this.pos=l,this.type=d||"",this.parameters=g||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,yo(this,"init"),d||f||this.addLabel()}addLabel(){let M=this,l=M.axis,d=l.options,f=l.chart,g=l.categories,y=l.logarithmic,_=l.names,b=M.pos,C=Bo(M.options?.labels,d.labels),A=l.tickPositions,R=b===A[0],I=b===A[A.length-1],F=(!C.step||C.step===1)&&l.tickInterval===1,U=A.info,H=M.label,$,X,q,ie=this.parameters.category||(g?Bo(g[b],_[b],b):b);y&&Qu(ie)&&(ie=Ku(y.lin2log(ie))),l.dateTime&&(U?$=(X=f.time.resolveDTLFormat(d.dateTimeLabelFormats[!d.grid?.enabled&&U.higherRanks[b]||U.unitName])).main:Qu(ie)&&($=l.dateTime.getXDateFormat(ie,d.dateTimeLabelFormats||{}))),M.isFirst=R,M.isLast=I;let ae={axis:l,chart:f,dateTimeLabelFormat:$,isFirst:R,isLast:I,pos:b,tick:M,tickPositionInfo:U,value:ie};yo(this,"labelFormat",ae);let pe=Se=>C.formatter?C.formatter.call(Se,Se):C.format?(Se.text=l.defaultLabelFormatter.call(Se),Fi.format(C.format,Se,f)):l.defaultLabelFormatter.call(Se),ke=pe.call(ae,ae),Te=X?.list;Te?M.shortenLabel=function(){for(q=0;q<Te.length;q++)if(Pm(ae,{dateTimeLabelFormat:Te[q]}),H.attr({text:pe.call(ae,ae)}),H.getBBox().width<l.getSlotWidth(M)-2*(C.padding||0))return;H.attr({text:""})}:M.shortenLabel=void 0,F&&l._addedPlotLB&&M.moveLabel(ke,C),Ga(H)||M.movedLabel?H&&H.textStr!==ke&&!F&&(!H.textWidth||C.style.width||H.styles.width||H.css({width:null}),H.attr({text:ke}),H.textPxLength=H.getBBox().width):(M.label=H=M.createLabel(ke,C),M.rotation=0)}createLabel(M,l,d){let f=this.axis,{renderer:g,styledMode:y}=f.chart,_=l.style.whiteSpace,b=Ga(M)&&l.enabled?g.text(M,d?.x,d?.y,l.useHTML).add(f.labelGroup):void 0;return b&&(y||b.css(km(l.style)),b.textPxLength=b.getBBox().width,!y&&_&&b.css({whiteSpace:_})),b}destroy(){Rs(this,this.axis)}getPosition(M,l,d,f){let g=this.axis,y=g.chart,_=f&&y.oldChartHeight||y.chartHeight,b={x:M?Ku(g.translate(l+d,void 0,void 0,f)+g.transB):g.left+g.offset+(g.opposite?(f&&y.oldChartWidth||y.chartWidth)-g.right-g.left:0),y:M?_-g.bottom+g.offset-(g.opposite?g.height:0):Ku(_-g.translate(l+d,void 0,void 0,f)-g.transB)};return b.y=k0(b.y,-1e9,1e9),yo(this,"afterGetPosition",{pos:b}),b}getLabelPosition(M,l,d,f,g,y,_,b){let C,A,R=this.axis,I=R.transA,F=R.isLinked&&R.linkedParent?R.linkedParent.reversed:R.reversed,U=R.staggerLines,H=R.tickRotCorr||{x:0,y:0},$=f||R.reserveSpaceDefault?0:-R.labelOffset*(R.labelAlign==="center"?.5:1),X=g.distance,q={};return C=R.side===0?d.rotation?-X:-d.getBBox().height:R.side===2?H.y+X:Math.cos(d.rotation*tu)*(H.y-d.getBBox(!1,0).height/2),Ga(g.y)&&(C=R.side===0&&R.horiz?g.y+C:g.y),M=M+Bo(g.x,[0,1,0,-1][R.side]*X)+$+H.x-(y&&f?y*I*(F?-1:1):0),l=l+C-(y&&!f?y*I*(F?1:-1):0),U&&(A=_/(b||1)%U,R.opposite&&(A=U-A-1),l+=A*(R.labelOffset/U)),q.x=M,q.y=Math.round(l),yo(this,"afterGetLabelPosition",{pos:q,tickmarkOffset:y,index:_}),q}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(M,l,d,f,g=!1,y){return y.crispLine([["M",M,l],["L",M+(g?0:-d),l+(g?d:0)]],f)}handleOverflow(M){let l=this.axis,d=l.options.labels,f=M.x,g=l.chart.chartWidth,y=l.chart.spacing,_=Bo(l.labelLeft,Math.min(l.pos,y[3])),b=Bo(l.labelRight,Math.max(l.isRadial?0:l.pos+l.len,g-y[1])),C=this.label,A=this.rotation,R=Rm(l.labelAlign||C.attr("align")),I=C.getBBox().width,F=l.getSlotWidth(this),U=F,H=1,$;A||d.overflow!=="justify"?A<0&&f-R*I<_?$=Math.round(f/Math.cos(A*tu)-_):A>0&&f+R*I>b&&($=Math.round((g-f)/Math.cos(A*tu))):(f-R*I<_?U=M.x+U*(1-R)-_:f+(1-R)*I>b&&(U=b-M.x+U*R,H=-1),(U=Math.min(F,U))<F&&l.labelAlign==="center"&&(M.x+=H*(F-U-R*(F-Math.min(I,U)))),(I>U||l.autoRotation&&C?.styles?.width)&&($=U)),$&&C&&(this.shortenLabel?this.shortenLabel():C.css(Pm({},{width:Math.floor($)+"px",lineClamp:+!l.isRadial})))}moveLabel(M,l){let d=this,f=d.label,g=d.axis,y=!1,_;f&&f.textStr===M?(d.movedLabel=f,y=!0,delete d.label):$a(g.ticks,function(b){y||b.isNew||b===d||!b.label||b.label.textStr!==M||(d.movedLabel=b.label,y=!0,b.labelPos=d.movedLabel.xy,delete b.label)}),!y&&(d.labelPos||f)&&(_=d.labelPos||f.xy,d.movedLabel=d.createLabel(M,l,_),d.movedLabel&&d.movedLabel.attr({opacity:0}))}render(M,l,d){let f=this.axis,g=f.horiz,y=this.pos,_=Bo(this.tickmarkOffset,f.tickmarkOffset),b=this.getPosition(g,y,_,l),C=b.x,A=b.y,R=f.pos,I=R+f.len,F=g?C:A,U=Bo(d,this.label?.newOpacity,1);!f.chart.polar&&(Ku(F)<R||F>I)&&(d=0),d??(d=1),this.isActive=!0,this.renderGridLine(l,d),this.renderMark(b,d),this.renderLabel(b,l,U,M),this.isNew=!1,yo(this,"afterRender")}renderGridLine(M,l){let d=this.axis,f=d.options,g={},y=this.pos,_=this.type,b=Bo(this.tickmarkOffset,d.tickmarkOffset),C=d.chart.renderer,A=this.gridLine,R,I=f.gridLineWidth,F=f.gridLineColor,U=f.gridLineDashStyle;this.type==="minor"&&(I=f.minorGridLineWidth,F=f.minorGridLineColor,U=f.minorGridLineDashStyle),A||(d.chart.styledMode||(g.stroke=F,g["stroke-width"]=I||0,g.dashstyle=U),_||(g.zIndex=1),M&&(l=0),this.gridLine=A=C.path().attr(g).addClass("highcharts-"+(_?_+"-":"")+"grid-line").add(d.gridGroup)),A&&(R=d.getPlotLinePath({value:y+b,lineWidth:A.strokeWidth(),force:"pass",old:M,acrossPanes:!1}))&&A[M||this.isNew?"attr":"animate"]({d:R,opacity:l})}renderMark(M,l){let d=this.axis,f=d.options,g=d.chart.renderer,y=this.type,_=d.tickSize(y?y+"Tick":"tick"),b=M.x,C=M.y,A=Bo(f[y!=="minor"?"tickWidth":"minorTickWidth"],!y&&d.isXAxis?1:0),R=f[y!=="minor"?"tickColor":"minorTickColor"],I=this.mark,F=!I;_&&(d.opposite&&(_[0]=-_[0]),!I&&(this.mark=I=g.path().addClass("highcharts-"+(y?y+"-":"")+"tick").add(d.axisGroup),d.chart.styledMode||I.attr({stroke:R,"stroke-width":A})),I[F?"attr":"animate"]({d:this.getMarkPath(b,C,_[0],I.strokeWidth(),d.horiz,g),opacity:l}))}renderLabel(M,l,d,f){let g=this.axis,y=g.horiz,_=g.options,b=this.label,C=_.labels,A=C.step,R=Bo(this.tickmarkOffset,g.tickmarkOffset),I=M.x,F=M.y,U=!0;b&&Qu(I)&&(b.xy=M=this.getLabelPosition(I,F,b,y,C,R,f,A),(!this.isFirst||this.isLast||_.showFirstLabel)&&(!this.isLast||this.isFirst||_.showLastLabel)?!y||C.step||C.rotation||l||d===0||this.handleOverflow(M):U=!1,A&&f%A&&(U=!1),U&&Qu(M.y)?(M.opacity=d,b[this.isNewLabel?"attr":"animate"](M).show(!0),this.isNewLabel=!1):(b.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let M=this.label,l=this.axis;M&&!this.isNew&&(M.animate({opacity:0},void 0,M.destroy),delete this.label),l.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}},{animObject:qa}=Gr,{xAxis:oh,yAxis:vo}=eu,{defaultOptions:bl}=_n,{registerEventOptions:uc}=ha,{deg2rad:Lm}=K,{arrayMax:Nm,arrayMin:If,clamp:ah,correctFloat:Mr,defined:ir,destroyObjectProperties:Om,erase:Fm,error:lh,extend:Ju,fireEvent:fr,getClosestDistance:c,insertItem:m,isArray:w,isNumber:P,isString:z,merge:ee,normalizeTickInterval:_e,objectEach:Ve,pick:Oe,relativeLength:ht,removeEvent:Zt,splat:On,syncTimeout:ci}=Mt,ms=(M,l)=>_e(l,void 0,void 0,Oe(M.options.allowDecimals,l<.5||M.tickAmount!==void 0),!!M.tickAmount);Ju(bl,{xAxis:oh,yAxis:ee(oh,vo)});let Pr=(()=>{class M{constructor(d,f,g){this.init(d,f,g)}init(d,f,g=this.coll){let y=g==="xAxis",_=this.isZAxis||(d.inverted?!y:y);this.chart=d,this.horiz=_,this.isXAxis=y,this.coll=g,fr(this,"init",{userOptions:f}),this.opposite=Oe(f.opposite,this.opposite),this.side=Oe(f.side,this.side,_?2*!this.opposite:this.opposite?1:3),this.setOptions(f);let b=this.options,C=b.labels;this.type??(this.type=b.type||"linear"),this.uniqueNames??(this.uniqueNames=b.uniqueNames??!0),fr(this,"afterSetType"),this.userOptions=f,this.minPixelPadding=0,this.reversed=Oe(b.reversed,this.reversed),this.visible=b.visible,this.zoomEnabled=b.zoomEnabled,this.hasNames=this.type==="category"||b.categories===!0,this.categories=w(b.categories)&&b.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=ir(b.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len??(this.len=0),this.minRange=this.userMinRange=b.minRange||b.maxZoom,this.range=b.range,this.offset=b.offset||0,this.max=void 0,this.min=void 0;let A=Oe(b.crosshair,On(d.options.tooltip.crosshairs)[+!y]);this.crosshair=A===!0?{}:A,d.axes.indexOf(this)===-1&&(y?d.axes.splice(d.xAxis.length,0,this):d.axes.push(this),m(this,d[this.coll])),d.orderItems(this.coll),this.series=this.series||[],d.inverted&&!this.isZAxis&&y&&!ir(this.reversed)&&(this.reversed=!0),this.labelRotation=P(C.rotation)?C.rotation:void 0,uc(this,b),fr(this,"afterInit")}setOptions(d){let f=this.horiz?{labels:{autoRotation:[-45],padding:3},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=ee(f,this.coll==="yAxis"?{title:{text:this.chart.options.lang.yAxisTitle}}:{},bl[this.coll],d),fr(this,"afterSetOptions",{userOptions:d})}defaultLabelFormatter(){let d=this.axis,{numberFormatter:f}=this.chart,g=P(this.value)?this.value:NaN,y=d.chart.time,_=d.categories,b=this.dateTimeLabelFormat,C=bl.lang,A=C.numericSymbols,R=C.numericSymbolMagnitude||1e3,I=d.logarithmic?Math.abs(g):d.tickInterval,F=A?.length,U,H;if(_)H=`${this.value}`;else if(b)H=y.dateFormat(b,g,!0);else if(F&&A&&I>=1e3)for(;F--&&H===void 0;)I>=(U=Math.pow(R,F+1))&&10*g%U==0&&A[F]!==null&&g!==0&&(H=f(g/U,-1)+A[F]);return H===void 0&&(H=Math.abs(g)>=1e4?f(g,-1):f(g,-1,void 0,"")),H}getSeriesExtremes(){let d,f=this;fr(this,"getSeriesExtremes",null,function(){f.hasVisibleSeries=!1,f.dataMin=f.dataMax=f.threshold=void 0,f.softThreshold=!f.isXAxis,f.series.forEach(g=>{if(g.reserveSpace()){let y=g.options,_,b=y.threshold,C,A;if(f.hasVisibleSeries=!0,f.positiveValuesOnly&&0>=(b||0)&&(b=void 0),f.isXAxis)(_=g.getColumn("x")).length&&(_=f.logarithmic?_.filter(R=>R>0):_,C=(d=g.getXExtremes(_)).min,A=d.max,P(C)||C instanceof Date||(_=_.filter(P),C=(d=g.getXExtremes(_)).min,A=d.max),_.length&&(f.dataMin=Math.min(Oe(f.dataMin,C),C),f.dataMax=Math.max(Oe(f.dataMax,A),A)));else{let R=g.applyExtremes();P(R.dataMin)&&(C=R.dataMin,f.dataMin=Math.min(Oe(f.dataMin,C),C)),P(R.dataMax)&&(A=R.dataMax,f.dataMax=Math.max(Oe(f.dataMax,A),A)),ir(b)&&(f.threshold=b),(!y.softThreshold||f.positiveValuesOnly)&&(f.softThreshold=!1)}}})}),fr(this,"afterGetSeriesExtremes")}translate(d,f,g,y,_,b){let C=this.linkedParent||this,A=y&&C.old?C.old.min:C.min;if(!P(A))return NaN;let R=C.minPixelPadding,I=(C.isOrdinal||C.brokenAxis?.hasBreaks||C.logarithmic&&_)&&C.lin2val,F=1,U=0,H=y&&C.old?C.old.transA:C.transA,$=0;return H||(H=C.transA),g&&(F*=-1,U=C.len),C.reversed&&(F*=-1,U-=F*(C.sector||C.len)),f?($=(d=d*F+U-R)/H+A,I&&($=C.lin2val($))):(I&&(d=C.val2lin(d)),$=F*(d-A)*H+U+F*R+(P(b)?H*b:0),C.isRadial||($=Mr($))),$}toPixels(d,f){return this.translate(this.chart?.time.parse(d)??NaN,!1,!this.horiz,void 0,!0)+(f?0:this.pos)}toValue(d,f){return this.translate(d-(f?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(d){let f=this,g=f.chart,y=f.left,_=f.top,b=d.old,C=d.value,A=d.lineWidth,R=b&&g.oldChartHeight||g.chartHeight,I=b&&g.oldChartWidth||g.chartWidth,F=f.transB,U=d.translatedValue,H=d.force,$,X,q,ie,ae;function pe(Te,Se,De){return H!=="pass"&&(Te<Se||Te>De)&&(H?Te=ah(Te,Se,De):ae=!0),Te}let ke={value:C,lineWidth:A,old:b,force:H,acrossPanes:d.acrossPanes,translatedValue:U};return fr(this,"getPlotLinePath",ke,function(Te){$=q=(U=ah(U=Oe(U,f.translate(C,void 0,void 0,b)),-1e9,1e9))+F,X=ie=R-U-F,P(U)?f.horiz?(X=_,ie=R-f.bottom+(f.options.isInternal?0:g.scrollablePixelsY||0),$=q=pe($,y,y+f.width)):($=y,q=I-f.right+(g.scrollablePixelsX||0),X=ie=pe(X,_,_+f.height)):(ae=!0,H=!1),Te.path=ae&&!H?void 0:g.renderer.crispLine([["M",$,X],["L",q,ie]],A||1)}),ke.path}getLinearTickPositions(d,f,g){let y,_,b,C=Mr(Math.floor(f/d)*d),A=Mr(Math.ceil(g/d)*d),R=[];if(Mr(C+d)===C&&(b=20),this.single)return[f];for(y=C;y<=A&&(R.push(y),(y=Mr(y+d,b))!==_);)_=y;return R}getMinorTickInterval(){let{minorTicks:d,minorTickInterval:f}=this.options;return d===!0?Oe(f,"auto"):d!==!1?f:void 0}getMinorTickPositions(){let d=this.options,f=this.tickPositions,g=this.minorTickInterval,y=this.pointRangePadding||0,_=(this.min||0)-y,b=(this.max||0)+y,C=this.brokenAxis?.hasBreaks?this.brokenAxis.unitLength:b-_,A=[],R;if(C&&C/g<this.len/3){let I=this.logarithmic;if(I)this.paddedTicks.forEach(function(F,U,H){U&&A.push.apply(A,I.getLogTickPositions(g,H[U-1],H[U],!0))});else if(this.dateTime&&this.getMinorTickInterval()==="auto")A=A.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(g),_,b,d.startOfWeek));else for(R=_+(f[0]-_)%g;R<=b&&R!==A[0];R+=g)A.push(R)}return A.length!==0&&this.trimTicks(A),A}adjustForMinRange(){let d=this.options,f=this.logarithmic,g=this.chart.time,{max:y,min:_,minRange:b}=this,C,A,R,I;this.isXAxis&&b===void 0&&!f&&(b=ir(d.min)||ir(d.max)||ir(d.floor)||ir(d.ceiling)?null:Math.min(5*(c(this.series.map(F=>{let U=F.getColumn("x");return F.xIncrement?U.slice(0,2):U}))||0),this.dataMax-this.dataMin)),P(y)&&P(_)&&P(b)&&y-_<b&&(A=this.dataMax-this.dataMin>=b,C=(b-y+_)/2,R=[_-C,g.parse(d.min)??_-C],A&&(R[2]=f?f.log2lin(this.dataMin):this.dataMin),I=[(_=Nm(R))+b,g.parse(d.max)??_+b],A&&(I[2]=f?f.log2lin(this.dataMax):this.dataMax),(y=If(I))-_<b&&(R[0]=y-b,R[1]=g.parse(d.min)??y-b,_=Nm(R))),this.minRange=b,this.min=_,this.max=y}getClosest(){let d,f;if(this.categories)f=1;else{let g=[];this.series.forEach(function(y){let _=y.closestPointRange,b=y.getColumn("x");b.length===1?g.push(b[0]):y.sorted&&ir(_)&&y.reserveSpace()&&(f=ir(f)?Math.min(f,_):_)}),g.length&&(g.sort((y,_)=>y-_),d=c([g]))}return d&&f?Math.min(d,f):d||f}nameToX(d){let f=w(this.options.categories),g=f?this.categories:this.names,y=d.options.x,_;return d.series.requireSorting=!1,ir(y)||(y=this.uniqueNames&&g?f?g.indexOf(d.name):Oe(g.keys[d.name],-1):d.series.autoIncrement()),y===-1?!f&&g&&(_=g.length):P(y)&&(_=y),_!==void 0?(this.names[_]=d.name,this.names.keys[d.name]=_):d.x&&(_=d.x),_}updateNames(){let d=this,f=this.names;f.length>0&&(Object.keys(f.keys).forEach(function(g){delete f.keys[g]}),f.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(g=>{g.xIncrement=null,(!g.points||g.isDirtyData)&&(d.max=Math.max(d.max||0,g.dataTable.rowCount-1),g.processData(),g.generatePoints());let y=g.getColumn("x").slice();g.data.forEach((_,b)=>{let C=y[b];_?.options&&_.name!==void 0&&(C=d.nameToX(_))!==void 0&&C!==_.x&&(y[b]=_.x=C)}),g.dataTable.setColumn("x",y)}))}setAxisTranslation(){let d=this,f=d.max-d.min,g=d.linkedParent,y=!!d.categories,_=d.isXAxis,b=d.axisPointRange||0,C,A=0,R=0,I,F=d.transA;(_||y||b)&&(C=d.getClosest(),g?(A=g.minPointOffset,R=g.pointRangePadding):d.series.forEach(function(U){let H=y?1:_?Oe(U.options.pointRange,C,0):d.axisPointRange||0,$=U.options.pointPlacement;if(b=Math.max(b,H),!d.single||y){let X=U.is("xrange")?!_:_;A=Math.max(A,X&&z($)?0:H/2),R=Math.max(R,X&&$==="on"?0:H)}}),I=d.ordinal?.slope&&C?d.ordinal.slope/C:1,d.minPointOffset=A*=I,d.pointRangePadding=R*=I,d.pointRange=Math.min(b,d.single&&y?1:f),_&&(d.closestPointRange=C)),d.translationSlope=d.transA=F=d.staticScale||d.len/(f+R||1),d.transB=d.horiz?d.left:d.bottom,d.minPixelPadding=F*A,fr(this,"afterSetAxisTranslation")}minFromRange(){let{max:d,min:f}=this;return P(d)&&P(f)&&d-f||void 0}setTickInterval(d){let{categories:f,chart:g,dataMax:y,dataMin:_,dateTime:b,isXAxis:C,logarithmic:A,options:R,softThreshold:I}=this,F=g.time,U=P(this.threshold)?this.threshold:void 0,H=this.minRange||0,{ceiling:$,floor:X,linkedTo:q,softMax:ie,softMin:ae}=R,pe=P(q)&&g[this.coll]?.[q],ke=R.tickPixelInterval,Te=R.maxPadding,Se=R.minPadding,De=0,Ye,Je=P(R.tickInterval)&&R.tickInterval>=0?R.tickInterval:void 0,st,Gt,xn,Cn;if(b||f||pe||this.getTickAmount(),xn=Oe(this.userMin,F.parse(R.min)),Cn=Oe(this.userMax,F.parse(R.max)),pe?(this.linkedParent=pe,Ye=pe.getExtremes(),this.min=Oe(Ye.min,Ye.dataMin),this.max=Oe(Ye.max,Ye.dataMax),this.type!==pe.type&&lh(11,!0,g)):(I&&ir(U)&&P(y)&&P(_)&&(_>=U?(st=U,Se=0):y<=U&&(Gt=U,Te=0)),this.min=Oe(xn,st,_),this.max=Oe(Cn,Gt,y)),P(this.max)&&P(this.min)&&(A&&(this.positiveValuesOnly&&!d&&0>=Math.min(this.min,Oe(_,this.min))&&lh(10,!0,g),this.min=Mr(A.log2lin(this.min),16),this.max=Mr(A.log2lin(this.max),16)),this.range&&P(_)&&(this.userMin=this.min=xn=Math.max(_,this.minFromRange()||0),this.userMax=Cn=this.max,this.range=void 0)),fr(this,"foundExtremes"),this.adjustForMinRange(),P(this.min)&&P(this.max)){if(!P(this.userMin)&&P(ae)&&ae<this.min&&(this.min=xn=ae),!P(this.userMax)&&P(ie)&&ie>this.max&&(this.max=Cn=ie),f||this.axisPointRange||this.stacking?.usePercentage||pe||(De=this.max-this.min)&&(!ir(xn)&&Se&&(this.min-=De*Se),!ir(Cn)&&Te&&(this.max+=De*Te)),!P(this.userMin)&&P(X)&&(this.min=Math.max(this.min,X)),!P(this.userMax)&&P($)&&(this.max=Math.min(this.max,$)),I&&P(_)&&P(y)){let Bt=U||0;!ir(xn)&&this.min<Bt&&_>=Bt?this.min=R.minRange?Math.min(Bt,this.max-H):Bt:!ir(Cn)&&this.max>Bt&&y<=Bt&&(this.max=R.minRange?Math.max(Bt,this.min+H):Bt)}!g.polar&&this.min>this.max&&(ir(R.min)?this.max=this.min:ir(R.max)&&(this.min=this.max)),De=this.max-this.min}if(this.min!==this.max&&P(this.min)&&P(this.max)?pe&&!Je&&ke===pe.options.tickPixelInterval?this.tickInterval=Je=pe.tickInterval:this.tickInterval=Oe(Je,this.tickAmount?De/Math.max(this.tickAmount-1,1):void 0,f?1:De*ke/Math.max(this.len,ke)):this.tickInterval=1,C&&!d){let Bt=this.min!==this.old?.min||this.max!==this.old?.max;this.series.forEach(function(cn){cn.forceCrop=cn.forceCropping?.(),cn.processData(Bt)}),fr(this,"postProcessData",{hasExtremesChanged:Bt})}this.setAxisTranslation(),fr(this,"initialAxisTranslation"),this.pointRange&&!Je&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let Xt=Oe(R.minTickInterval,b&&!this.series.some(Bt=>!Bt.sorted)?this.closestPointRange:0);!Je&&Xt&&this.tickInterval<Xt&&(this.tickInterval=Xt),b||A||Je||(this.tickInterval=ms(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){let d=this.options,f=d.tickPositions,g=d.tickPositioner,y=this.getMinorTickInterval(),_=!this.isPanning,b=_&&d.startOnTick,C=_&&d.endOnTick,A=[],R;if(this.tickmarkOffset=this.categories&&d.tickmarkPlacement==="between"&&this.tickInterval===1?.5:0,this.single=this.min===this.max&&ir(this.min)&&!this.tickAmount&&(this.min%1==0||d.allowDecimals!==!1),f)A=f.slice();else if(P(this.min)&&P(this.max)){if(!this.ordinal?.positions&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))A=[this.min,this.max],lh(19,!1,this.chart);else if(this.dateTime)A=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,d.units),this.min,this.max,d.startOfWeek,this.ordinal?.positions,this.closestPointRange,!0);else if(this.logarithmic)A=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let I=this.tickInterval,F=I;for(;F<=2*I&&(A=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&A.length>this.tickAmount);)this.tickInterval=ms(this,F*=1.1)}A.length>this.len&&(A=[A[0],A[A.length-1]])[0]===A[1]&&(A.length=1),g&&(this.tickPositions=A,(R=g.apply(this,[this.min,this.max]))&&(A=R))}this.tickPositions=A,this.minorTickInterval=y==="auto"&&this.tickInterval?this.tickInterval/d.minorTicksPerMajor:y,this.paddedTicks=A.slice(0),this.trimTicks(A,b,C),!this.isLinked&&P(this.min)&&P(this.max)&&(this.single&&A.length<2&&!this.categories&&!this.series.some(I=>I.is("heatmap")&&I.options.pointPlacement==="between")&&(this.min-=.5,this.max+=.5),f||R||this.adjustTickAmount()),fr(this,"afterSetTickPositions")}trimTicks(d,f,g){let y=d[0],_=d[d.length-1],b=!this.isOrdinal&&this.minPointOffset||0;if(fr(this,"trimTicks"),!this.isLinked||!this.grid){if(f&&y!==-1/0)this.min=y;else for(;this.min-b>d[0];)d.shift();if(g)this.max=_;else for(;this.max+b<d[d.length-1];)d.pop();d.length===0&&ir(y)&&!this.options.tickPositions&&d.push((_+y)/2)}}alignToOthers(){let d,f=this,g=f.chart,y=[this],_=f.options,b=g.options.chart,C=this.coll==="yAxis"&&b.alignThresholds,A=[];if(f.thresholdAlignment=void 0,(b.alignTicks!==!1&&_.alignTicks||C)&&_.startOnTick!==!1&&_.endOnTick!==!1&&!f.logarithmic){let R=F=>{let{horiz:U,options:H}=F;return[U?H.left:H.top,H.width,H.height,H.pane].join(",")},I=R(this);g[this.coll].forEach(function(F){let{series:U}=F;U.length&&U.some(H=>H.visible)&&F!==f&&R(F)===I&&(d=!0,y.push(F))})}if(d&&C){y.forEach(I=>{let F=I.getThresholdAlignment(f);P(F)&&A.push(F)});let R=A.length>1?A.reduce((I,F)=>I+=F,0)/A.length:void 0;y.forEach(I=>{I.thresholdAlignment=R})}return d}getThresholdAlignment(d){if((!P(this.dataMin)||this!==d&&this.series.some(f=>f.isDirty||f.isDirtyData))&&this.getSeriesExtremes(),P(this.threshold)){let f=ah((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(f=1-f),f}}getTickAmount(){let d=this.options,f=d.tickPixelInterval,g=d.tickAmount;ir(d.tickInterval)||g||!(this.len<f)||this.isRadial||this.logarithmic||!d.startOnTick||!d.endOnTick||(g=2),!g&&this.alignToOthers()&&(g=Math.ceil(this.len/f)+1),g<4&&(this.finalTickAmt=g,g=5),this.tickAmount=g}adjustTickAmount(){let d=this,{finalTickAmt:f,max:g,min:y,options:_,tickPositions:b,tickAmount:C,thresholdAlignment:A}=d,R=b?.length,I=Oe(d.threshold,d.softThreshold?0:null),F,U,H=d.tickInterval,$,X=()=>b.push(Mr(b[b.length-1]+H)),q=()=>b.unshift(Mr(b[0]-H));if(P(A)&&($=A<.5?Math.ceil(A*(C-1)):Math.floor(A*(C-1)),_.reversed&&($=C-1-$)),d.hasData()&&P(y)&&P(g)){let ie=()=>{d.transA*=(R-1)/(C-1),d.min=_.startOnTick?b[0]:Math.min(y,b[0]),d.max=_.endOnTick?b[b.length-1]:Math.max(g,b[b.length-1])};if(P($)&&P(d.threshold)){for(;b[$]!==I||b.length!==C||b[0]>y||b[b.length-1]<g;){for(b.length=0,b.push(d.threshold);b.length<C;)b[$]===void 0||b[$]>d.threshold?q():X();if(H>8*d.tickInterval)break;H*=2}ie()}else if(R<C){for(;b.length<C;)b.length%2||y===I?X():q();ie()}if(ir(f)){for(U=F=b.length;U--;)(f===3&&U%2==1||f<=2&&U>0&&U<F-1)&&b.splice(U,1);d.finalTickAmt=void 0}}}setScale(){let{coll:d,stacking:f}=this,g=!1,y=!1;this.series.forEach(b=>{g=g||b.isDirtyData||b.isDirty,y=y||b.xAxis?.isDirty||!1}),this.setAxisSize();let _=this.len!==this.old?.len;_||g||y||this.isLinked||this.forceRedraw||this.userMin!==this.old?.userMin||this.userMax!==this.old?.userMax||this.alignToOthers()?(f&&d==="yAxis"&&f.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),f&&d==="xAxis"&&f.buildStacks(),this.isDirty||(this.isDirty=_||this.min!==this.old?.min||this.max!==this.old?.max)):f&&f.cleanStacks(),g&&delete this.allExtremes,fr(this,"afterSetScale")}setExtremes(d,f,g=!0,y,_){let b=this.chart;this.series.forEach(C=>{delete C.kdTree}),d=b.time.parse(d),f=b.time.parse(f),fr(this,"setExtremes",_=Ju(_,{min:d,max:f}),C=>{this.userMin=C.min,this.userMax=C.max,this.eventArgs=C,g&&b.redraw(y)})}setAxisSize(){let d=this.chart,f=this.options,g=f.offsets||[0,0,0,0],y=this.horiz,_=this.width=Math.round(ht(Oe(f.width,d.plotWidth-g[3]+g[1]),d.plotWidth)),b=this.height=Math.round(ht(Oe(f.height,d.plotHeight-g[0]+g[2]),d.plotHeight)),C=this.top=Math.round(ht(Oe(f.top,d.plotTop+g[0]),d.plotHeight,d.plotTop)),A=this.left=Math.round(ht(Oe(f.left,d.plotLeft+g[3]),d.plotWidth,d.plotLeft));this.bottom=d.chartHeight-b-C,this.right=d.chartWidth-_-A,this.len=Math.max(y?_:b,0),this.pos=y?A:C}getExtremes(){let d=this.logarithmic;return{min:d?Mr(d.lin2log(this.min)):this.min,max:d?Mr(d.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(d){let f=this.logarithmic,g=f?f.lin2log(this.min):this.min,y=f?f.lin2log(this.max):this.max;return d===null||d===-1/0?d=g:d===1/0?d=y:g>d?d=g:y<d&&(d=y),this.translate(d,0,1,0,1)}autoLabelAlign(d){let f=(Oe(d,0)-90*this.side+720)%360,g={align:"center"};return fr(this,"autoLabelAlign",g,function(y){f>15&&f<165?y.align="right":f>195&&f<345&&(y.align="left")}),g.align}tickSize(d){let f=this.options,g=Oe(f[d==="tick"?"tickWidth":"minorTickWidth"],d==="tick"&&this.isXAxis&&!this.categories?1:0),y=f[d==="tick"?"tickLength":"minorTickLength"],_;g&&y&&(f[d+"Position"]==="inside"&&(y=-y),_=[y,g]);let b={tickSize:_};return fr(this,"afterTickSize",b),b.tickSize}labelMetrics(){let d=this.chart.renderer,f=this.ticks,g=f[Object.keys(f)[0]]||{};return this.chart.renderer.fontMetrics(g.label||g.movedLabel||d.box)}unsquish(){let d=this.options.labels,f=d.padding||0,g=this.horiz,y=this.tickInterval,_=this.len/((+!!this.categories+this.max-this.min)/y),b=d.rotation,C=Mr(.8*this.labelMetrics().h),A=Math.max(this.max-this.min,0),R=function($){let X=($+2*f)/(_||1);return(X=X>1?Math.ceil(X):1)*y>A&&$!==1/0&&_!==1/0&&A&&(X=Math.ceil(A/y)),Mr(X*y)},I=y,F,U=Number.MAX_VALUE,H;if(g){if(!d.staggerLines&&(P(b)?H=[b]:_<d.autoRotationLimit&&(H=d.autoRotation)),H){let $,X;for(let q of H)(q===b||q&&q>=-90&&q<=90)&&(X=($=R(Math.abs(C/Math.sin(Lm*q))))+Math.abs(q/360))<U&&(U=X,F=q,I=$)}}else I=R(.75*C);return this.autoRotation=H,this.labelRotation=Oe(F,P(b)?b:0),d.step?y:I}getSlotWidth(d){let f=this.chart,g=this.horiz,y=this.options.labels,_=Math.max(this.tickPositions.length-!this.categories,1),b=f.margin[3];if(d&&P(d.slotWidth))return d.slotWidth;if(g&&y.step<2&&!this.isRadial)return y.rotation?0:(this.staggerLines||1)*this.len/_;if(!g){let C=y.style.width;if(C!==void 0)return parseInt(String(C),10);if(b)return b-f.spacing[3]}return .33*f.chartWidth}renderUnsquish(){let d=this.chart,f=d.renderer,g=this.tickPositions,y=this.ticks,_=this.options.labels,b=_.style,C=this.horiz,A=this.getSlotWidth(),R=Math.max(1,Math.round(A-(C?2*(_.padding||0):_.distance||0))),I={},F=this.labelMetrics(),U=b.lineClamp,H,$=U??(Math.floor(this.len/(g.length*F.h))||1),X=0;z(_.rotation)||(I.rotation=_.rotation||0),g.forEach(function(q){let ie=y[q];ie.movedLabel&&ie.replaceMovedLabel();let ae=ie.label?.textPxLength||0;ae>X&&(X=ae)}),this.maxLabelLength=X,this.autoRotation?X>R&&X>F.h?I.rotation=this.labelRotation:this.labelRotation=0:A&&(H=R),I.rotation&&(H=X>.5*d.chartHeight?.33*d.chartHeight:X,U||($=1)),this.labelAlign=_.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(I.align=this.labelAlign),g.forEach(function(q){let ie=y[q],ae=ie?.label,pe=b.width,ke={};ae&&(ae.attr(I),ie.shortenLabel?ie.shortenLabel():H&&!pe&&b.whiteSpace!=="nowrap"&&(H<(ae.textPxLength||0)||ae.element.tagName==="SPAN")?ae.css(Ju(ke,{width:`${H}px`,lineClamp:$})):!ae.styles.width||ke.width||pe||ae.css({width:"auto"}),ie.rotation=I.rotation)},this),this.tickRotCorr=f.rotCorr(F.b,this.labelRotation||0,this.side!==0)}hasData(){return this.series.some(function(d){return d.hasData()})||this.options.showEmpty&&ir(this.min)&&ir(this.max)}addTitle(d){let f,g=this.chart.renderer,y=this.horiz,_=this.opposite,b=this.options.title,C=this.chart.styledMode;this.axisTitle||((f=b.textAlign)||(f=(y?{low:"left",middle:"center",high:"right"}:{low:_?"right":"left",middle:"center",high:_?"left":"right"})[b.align]),this.axisTitle=g.text(b.text||"",0,0,b.useHTML).attr({zIndex:7,rotation:b.rotation||0,align:f}).addClass("highcharts-axis-title"),C||this.axisTitle.css(ee(b.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),C||b.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[d?"show":"hide"](d)}generateTick(d){let f=this.ticks;f[d]?f[d].addLabel():f[d]=new ks(this,d)}createGroups(){let{axisParent:d,chart:f,coll:g,options:y}=this,_=f.renderer,b=(C,A,R)=>_.g(C).attr({zIndex:R}).addClass(`highcharts-${g.toLowerCase()}${A} `+(this.isRadial?`highcharts-radial-axis${A} `:"")+(y.className||"")).add(d);this.axisGroup||(this.gridGroup=b("grid","-grid",y.gridZIndex),this.axisGroup=b("axis","",y.zIndex),this.labelGroup=b("axis-labels","-labels",y.labels.zIndex))}getOffset(){let d=this,{chart:f,horiz:g,options:y,side:_,ticks:b,tickPositions:C,coll:A}=d,R=f.inverted&&!d.isZAxis?[1,0,3,2][_]:_,I=d.hasData(),F=y.title,U=y.labels,H=P(y.crossing),$=f.axisOffset,X=f.clipOffset,q=[-1,1,1,-1][_],ie,ae=0,pe,ke=0,Te=0,Se,De;if(d.showAxis=ie=I||y.showEmpty,d.staggerLines=d.horiz&&U.staggerLines||void 0,d.createGroups(),I||d.isLinked?(C.forEach(function(Ye){d.generateTick(Ye)}),d.renderUnsquish(),d.reserveSpaceDefault=_===0||_===2||{1:"left",3:"right"}[_]===d.labelAlign,Oe(U.reserveSpace,!H&&null,d.labelAlign==="center"||null,d.reserveSpaceDefault)&&C.forEach(function(Ye){Te=Math.max(b[Ye].getLabelSize(),Te)}),d.staggerLines&&(Te*=d.staggerLines),d.labelOffset=Te*(d.opposite?-1:1)):Ve(b,function(Ye,Je){Ye.destroy(),delete b[Je]}),F?.text&&F.enabled!==!1&&(d.addTitle(ie),ie&&!H&&F.reserveSpace!==!1&&(d.titleOffset=ae=d.axisTitle.getBBox()[g?"height":"width"],ke=ir(pe=F.offset)?0:Oe(F.margin,g?5:10))),d.renderLine(),d.offset=q*Oe(y.offset,$[_]?$[_]+(y.margin||0):0),d.tickRotCorr=d.tickRotCorr||{x:0,y:0},De=_===0?-d.labelMetrics().h:_===2?d.tickRotCorr.y:0,Se=Math.abs(Te)+ke,Te&&(Se-=De,Se+=q*(g?Oe(U.y,d.tickRotCorr.y+q*U.distance):Oe(U.x,q*U.distance))),d.axisTitleMargin=Oe(pe,Se),d.getMaxLabelDimensions&&(d.maxLabelDimensions=d.getMaxLabelDimensions(b,C)),A!=="colorAxis"&&X){let Ye=this.tickSize("tick");$[_]=Math.max($[_],(d.axisTitleMargin||0)+ae+q*d.offset,Se,C?.length&&Ye?Ye[0]+q*d.offset:0);let Je=!d.axisLine||y.offset?0:d.axisLine.strokeWidth()/2;X[R]=Math.max(X[R],Je)}fr(this,"afterGetOffset")}getLinePath(d){let f=this.chart,g=this.opposite,y=this.offset,_=this.horiz,b=this.left+(g?this.width:0)+y,C=f.chartHeight-this.bottom-(g?this.height:0)+y;return g&&(d*=-1),f.renderer.crispLine([["M",_?this.left:b,_?C:this.top],["L",_?f.chartWidth-this.right:b,_?C:f.chartHeight-this.bottom]],d)}renderLine(){!this.axisLine&&(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(d){let f=this.horiz,g=this.left,y=this.top,_=this.len,b=this.options.title,C=f?g:y,A=this.opposite,R=this.offset,I=b.x,F=b.y,U=this.chart.renderer.fontMetrics(d),H=d?Math.max(d.getBBox(!1,0).height-U.h-1,0):0,$={low:C+(f?0:_),middle:C+_/2,high:C+(f?_:0)}[b.align],X=(f?y+this.height:g)+(f?1:-1)*(A?-1:1)*(this.axisTitleMargin||0)+[-H,H,U.f,-H][this.side],q={x:f?$+I:X+(A?this.width:0)+R+I,y:f?X+F-(A?this.height:0)+R:$+F};return fr(this,"afterGetTitlePosition",{titlePosition:q}),q}renderMinorTick(d,f){let g=this.minorTicks;g[d]||(g[d]=new ks(this,d,"minor")),f&&g[d].isNew&&g[d].render(null,!0),g[d].render(null,!1,1)}renderTick(d,f,g){let y=this.isLinked,_=this.ticks;(!y||d>=this.min&&d<=this.max||this.grid?.isColumn)&&(_[d]||(_[d]=new ks(this,d)),g&&_[d].isNew&&_[d].render(f,!0,-1),_[d].render(f))}render(){let d,f,g=this,y=g.chart,_=g.logarithmic,b=y.renderer,C=g.options,A=g.isLinked,R=g.tickPositions,I=g.axisTitle,F=g.ticks,U=g.minorTicks,H=g.alternateBands,$=C.stackLabels,X=C.alternateGridColor,q=C.crossing,ie=g.tickmarkOffset,ae=g.axisLine,pe=g.showAxis,ke=qa(b.globalAnimation);if(g.labelEdge.length=0,g.overlap=!1,[F,U,H].forEach(function(Te){Ve(Te,function(Se){Se.isActive=!1})}),P(q)){let Te=this.isXAxis?y.yAxis[0]:y.xAxis[0],Se=[1,-1,-1,1][this.side];if(Te){let De=Te.toPixels(q,!0);g.horiz&&(De=Te.len-De),g.offset=Se*De}}if(g.hasData()||A){let Te=g.chart.hasRendered&&g.old&&P(g.old.min);g.minorTickInterval&&!g.categories&&g.getMinorTickPositions().forEach(function(Se){g.renderMinorTick(Se,Te)}),R.length&&(R.forEach(function(Se,De){g.renderTick(Se,De,Te)}),ie&&(g.min===0||g.single)&&(F[-1]||(F[-1]=new ks(g,-1,null,!0)),F[-1].render(-1))),X&&R.forEach(function(Se,De){f=R[De+1]!==void 0?R[De+1]+ie:g.max-ie,De%2==0&&Se<g.max&&f<=g.max+(y.polar?-ie:ie)&&(H[Se]||(H[Se]=new K.PlotLineOrBand(g,{})),d=Se+ie,H[Se].options={from:_?_.lin2log(d):d,to:_?_.lin2log(f):f,color:X,className:"highcharts-alternate-grid"},H[Se].render(),H[Se].isActive=!0)}),g._addedPlotLB||(g._addedPlotLB=!0,(C.plotLines||[]).concat(C.plotBands||[]).forEach(function(Se){g.addPlotBandOrLine(Se)}))}[F,U,H].forEach(function(Te){let Se=[],De=ke.duration;Ve(Te,function(Ye,Je){Ye.isActive||(Ye.render(Je,!1,0),Ye.isActive=!1,Se.push(Je))}),ci(function(){let Ye=Se.length;for(;Ye--;)Te[Se[Ye]]&&!Te[Se[Ye]].isActive&&(Te[Se[Ye]].destroy(),delete Te[Se[Ye]])},Te!==H&&y.hasRendered&&De?De:0)}),ae&&(ae[ae.isPlaced?"animate":"attr"]({d:this.getLinePath(ae.strokeWidth())}),ae.isPlaced=!0,ae[pe?"show":"hide"](pe)),I&&pe&&(I[I.isNew?"attr":"animate"](g.getTitlePosition(I)),I.isNew=!1),$?.enabled&&g.stacking&&g.stacking.renderStackTotals(),g.old={len:g.len,max:g.max,min:g.min,transA:g.transA,userMax:g.userMax,userMin:g.userMin},g.isDirty=!1,fr(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(d){d.render()})),this.series.forEach(function(d){d.isDirty=!0})}getKeepProps(){return this.keepProps||M.keepProps}destroy(d){let f=this,g=f.plotLinesAndBands,y=this.eventOptions;if(fr(this,"destroy",{keepEvents:d}),d||Zt(f),[f.ticks,f.minorTicks,f.alternateBands].forEach(function(_){Om(_)}),g){let _=g.length;for(;_--;)g[_].destroy()}for(let _ in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach(function(b){f[b]&&(f[b]=f[b].destroy())}),f.plotLinesAndBandsGroups)f.plotLinesAndBandsGroups[_]=f.plotLinesAndBandsGroups[_].destroy();Ve(f,function(_,b){f.getKeepProps().indexOf(b)===-1&&delete f[b]}),this.eventOptions=y}drawCrosshair(d,f){let g=this.crosshair,y=g?.snap??!0,_=this.chart,b,C,A,R=this.cross,I;if(fr(this,"drawCrosshair",{e:d,point:f}),d||(d=this.cross?.e),g&&(ir(f)||!y)!==!1){if(y?ir(f)&&(C=Oe(this.coll!=="colorAxis"?f.crosshairPos:null,this.isXAxis?f.plotX:this.len-f.plotY)):C=d&&(this.horiz?d.chartX-this.pos:this.len-d.chartY+this.pos),ir(C)&&(I={value:f&&(this.isXAxis?f.x:Oe(f.stackY,f.y)),translatedValue:C},_.polar&&Ju(I,{isCrosshair:!0,chartX:d?.chartX,chartY:d?.chartY,point:f}),b=this.getPlotLinePath(I)||null),!ir(b))return void this.hideCrosshair();A=this.categories&&!this.isRadial,R||(this.cross=R=_.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(A?"category ":"thin ")+(g.className||"")).attr({zIndex:Oe(g.zIndex,2)}).add(),!_.styledMode&&(R.attr({stroke:g.color||(A?Dn.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":Oe(g.width,1)}).css({"pointer-events":"none"}),g.dashStyle&&R.attr({dashstyle:g.dashStyle}))),R.show().attr({d:b}),A&&!g.width&&R.attr({"stroke-width":this.transA}),this.cross.e=d}else this.hideCrosshair();fr(this,"afterDrawCrosshair",{e:d,point:f})}hideCrosshair(){this.cross&&this.cross.hide(),fr(this,"afterHideCrosshair")}update(d,f){let g=this.chart;d=ee(this.userOptions,d),this.destroy(!0),this.init(g,d),g.isDirtyBox=!0,Oe(f,!0)&&g.redraw()}remove(d){let f=this.chart,g=this.coll,y=this.series,_=y.length;for(;_--;)y[_]&&y[_].remove(!1);Fm(f.axes,this),Fm(f[g]||[],this),f.orderItems(g),this.destroy(),f.isDirtyBox=!0,Oe(d,!0)&&f.redraw()}setTitle(d,f){this.update({title:d},f)}setCategories(d,f){this.update({categories:d},f)}}return M.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"],M})(),{addEvent:_o,getMagnitude:as,normalizeTickInterval:dc,timeUnits:ch}=Mt;(function(M){function l(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function d(){if(this.type!=="datetime"){this.dateTime=void 0;return}this.dateTime||(this.dateTime=new f(this))}M.compose=function(g){return g.keepProps.includes("dateTime")||(g.keepProps.push("dateTime"),g.prototype.getTimeTicks=l,_o(g,"afterSetType",d)),g};class f{constructor(y){this.axis=y}normalizeTimeTickInterval(y,_){let b=_||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],C=b[b.length-1],A=ch[C[0]],R=C[1],I;for(I=0;I<b.length&&(A=ch[(C=b[I])[0]],R=C[1],!b[I+1]||!(y<=(A*R[R.length-1]+ch[b[I+1][0]])/2));I++);A===ch.year&&y<5*A&&(R=[1,2,5]);let F=dc(y/A,R,C[0]==="year"?Math.max(as(y/A),1):1);return{unitRange:A,count:F,unitName:C[0]}}getXDateFormat(y,_){let{axis:b}=this,C=b.chart.time;return b.closestPointRange?C.getDateFormat(b.closestPointRange,y,b.options.startOfWeek,_)||C.resolveDTLFormat(_.year).main:C.resolveDTLFormat(_.day).main}}M.Additions=f})(a||(a={}));let L0=a,{addEvent:Bm,normalizeTickInterval:Vm,pick:uh}=Mt;(function(M){function l(){this.type!=="logarithmic"?this.logarithmic=void 0:this.logarithmic??(this.logarithmic=new f(this))}function d(){let g=this.logarithmic;g&&(this.lin2val=function(y){return g.lin2log(y)},this.val2lin=function(y){return g.log2lin(y)})}M.compose=function(g){return g.keepProps.includes("logarithmic")||(g.keepProps.push("logarithmic"),Bm(g,"afterSetType",l),Bm(g,"afterInit",d)),g};class f{constructor(y){this.axis=y}getLogTickPositions(y,_,b,C){let A=this.axis,R=A.len,I=A.options,F=[];if(C||(this.minorAutoInterval=void 0),y>=.5)y=Math.round(y),F=A.getLinearTickPositions(y,_,b);else if(y>=.08){let U,H,$,X,q,ie,ae,pe=Math.floor(_);for(U=y>.3?[1,2,4]:y>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],H=pe;H<b+1&&!ae;H++)for($=0,X=U.length;$<X&&!ae;$++)(q=this.log2lin(this.lin2log(H)*U[$]))>_&&(!C||ie<=b)&&ie!==void 0&&F.push(ie),ie>b&&(ae=!0),ie=q}else{let U=this.lin2log(_),H=this.lin2log(b),$=C?A.getMinorTickInterval():I.tickInterval,X=I.tickPixelInterval/(C?5:1),q=C?R/A.tickPositions.length:R;y=Vm(y=uh($==="auto"?null:$,this.minorAutoInterval,(H-U)*X/(q||1))),F=A.getLinearTickPositions(y,U,H).map(this.log2lin),C||(this.minorAutoInterval=y/5)}return C||(A.tickInterval=y),F}lin2log(y){return Math.pow(10,y)}log2lin(y){return Math.log(y)/Math.LN10}}M.Additions=f})(u||(u={}));let Um=u,{erase:Nr,extend:ed,isNumber:Pf}=Mt;(function(M){let l;function d(A){return this.addPlotBandOrLine(A,"plotBands")}function f(A,R){let I=this.userOptions,F=new l(this,A);if(this.visible&&(F=F.render()),F){if(this._addedPlotLB||(this._addedPlotLB=!0,(I.plotLines||[]).concat(I.plotBands||[]).forEach(U=>{this.addPlotBandOrLine(U)})),R){let U=I[R]||[];U.push(A),I[R]=U}this.plotLinesAndBands.push(F)}return F}function g(A){return this.addPlotBandOrLine(A,"plotLines")}function y(A,R,I){I=I||this.options;let F=this.getPlotLinePath({value:R,force:!0,acrossPanes:I.acrossPanes}),U=[],H=this.horiz,$=!Pf(this.min)||!Pf(this.max)||A<this.min&&R<this.min||A>this.max&&R>this.max,X=this.getPlotLinePath({value:A,force:!0,acrossPanes:I.acrossPanes}),q,ie=1,ae;if(X&&F)for($&&(ae=X.toString()===F.toString(),ie=0),q=0;q<X.length;q+=2){let pe=X[q],ke=X[q+1],Te=F[q],Se=F[q+1];(pe[0]==="M"||pe[0]==="L")&&(ke[0]==="M"||ke[0]==="L")&&(Te[0]==="M"||Te[0]==="L")&&(Se[0]==="M"||Se[0]==="L")&&(H&&Te[1]===pe[1]?(Te[1]+=ie,Se[1]+=ie):H||Te[2]!==pe[2]||(Te[2]+=ie,Se[2]+=ie),U.push(["M",pe[1],pe[2]],["L",ke[1],ke[2]],["L",Se[1],Se[2]],["L",Te[1],Te[2]],["Z"])),U.isFlat=ae}return U}function _(A){this.removePlotBandOrLine(A)}function b(A){let R=this.plotLinesAndBands,I=this.options,F=this.userOptions;if(R){let U=R.length;for(;U--;)R[U].id===A&&R[U].destroy();[I.plotLines||[],F.plotLines||[],I.plotBands||[],F.plotBands||[]].forEach(function(H){for(U=H.length;U--;)H[U]?.id===A&&Nr(H,H[U])})}}function C(A){this.removePlotBandOrLine(A)}M.compose=function(A,R){let I=R.prototype;return I.addPlotBand||(l=A,ed(I,{addPlotBand:d,addPlotLine:g,addPlotBandOrLine:f,getPlotBandPath:y,removePlotBand:_,removePlotLine:C,removePlotBandOrLine:b})),R}})(h||(h={}));let Rf=h,{addEvent:dh,arrayMax:td,arrayMin:xl,defined:Vo,destroyObjectProperties:Wb,erase:ZE,fireEvent:zm,merge:nd,objectEach:gs,pick:KE}=Mt;class W{static compose(l,d){return dh(l,"afterInit",function(){this.labelCollectors.push(()=>{let f=[];for(let g of this.axes)for(let{label:y,options:_}of g.plotLinesAndBands)y&&!_?.label?.allowOverlap&&f.push(y);return f})}),Rf.compose(W,d)}constructor(l,d){this.axis=l,this.options=d,this.id=d.id}render(){zm(this,"render");let{axis:l,options:d}=this,{horiz:f,logarithmic:g}=l,{color:y,events:_,zIndex:b=0}=d,{renderer:C,time:A}=l.chart,R={},I=A.parse(d.to),F=A.parse(d.from),U=A.parse(d.value),H=d.borderWidth,$=d.label,{label:X,svgElem:q}=this,ie=[],ae,pe=Vo(F)&&Vo(I),ke=Vo(U),Te=!q,Se={class:"highcharts-plot-"+(pe?"band ":"line ")+(d.className||"")},De=pe?"bands":"lines";if(!l.chart.styledMode&&(ke?(Se.stroke=y||"#999999",Se["stroke-width"]=KE(d.width,1),d.dashStyle&&(Se.dashstyle=d.dashStyle)):pe&&(Se.fill=y||"#e6e9ff",H&&(Se.stroke=d.borderColor,Se["stroke-width"]=H))),R.zIndex=b,De+="-"+b,(ae=l.plotLinesAndBandsGroups[De])||(l.plotLinesAndBandsGroups[De]=ae=C.g("plot-"+De).attr(R).add()),q||(this.svgElem=q=C.path().attr(Se).add(ae)),Vo(U))ie=l.getPlotLinePath({value:g?.log2lin(U)??U,lineWidth:q.strokeWidth(),acrossPanes:d.acrossPanes});else{if(!(Vo(F)&&Vo(I)))return;ie=l.getPlotBandPath(g?.log2lin(F)??F,g?.log2lin(I)??I,d)}return!this.eventsAdded&&_&&(gs(_,(Ye,Je)=>{q?.on(Je,st=>{_[Je].apply(this,[st])})}),this.eventsAdded=!0),(Te||!q.d)&&ie?.length?q.attr({d:ie}):q&&(ie?(q.show(),q.animate({d:ie})):q.d&&(q.hide(),X&&(this.label=X=X.destroy()))),$&&(Vo($.text)||Vo($.formatter))&&ie?.length&&l.width>0&&l.height>0&&!ie.isFlat?($=nd(Ke({align:f&&pe?"center":void 0,x:f?!pe&&4:10,verticalAlign:!f&&pe?"middle":void 0,y:f?pe?16:10:pe?6:-4,rotation:f&&!pe?90:0},pe?{inside:!0}:{}),$),this.renderLabel($,ie,pe,b)):X&&X.hide(),this}renderLabel(l,d,f,g){let y=this.axis,_=y.chart.renderer,b=l.inside,C=this.label;C||(this.label=C=_.text(this.getLabelText(l),0,0,l.useHTML).attr({align:l.textAlign||l.align,rotation:l.rotation,class:"highcharts-plot-"+(f?"band":"line")+"-label "+(l.className||""),zIndex:g}),y.chart.styledMode||C.css(nd({color:y.chart.options.title?.style.color,fontSize:"0.8em",textOverflow:f&&!b?"":"ellipsis"},l.style)),C.add());let A=d.xBounds||[d[0][1],d[1][1],f?d[2][1]:d[0][1]],R=d.yBounds||[d[0][2],d[1][2],f?d[2][2]:d[0][2]],I=xl(A),F=xl(R),U=td(A)-I;C.align(l,!1,{x:I,y:F,width:U,height:td(R)-F}),C.alignAttr.y-=_.fontMetrics(C).b,(!C.alignValue||C.alignValue==="left"||Vo(b))&&C.css({width:(l.style?.width||(f&&b?U:C.rotation===90?y.height-(C.alignAttr.y-y.top):(l.clip?y.width:y.chart.chartWidth)-(C.alignAttr.x-y.left)))+"px"}),C.show(!0)}getLabelText(l){return Vo(l.formatter)?l.formatter.call(this):l.text}destroy(){ZE(this.axis.plotLinesAndBands,this),delete this.axis,Wb(this)}}let{animObject:E}=Gr,{format:k}=Fi,{composed:B,dateFormats:Y,doc:ne,isSafari:Q}=K,{distribute:ce}=Ql,{addEvent:ve,clamp:Ce,css:Ee,discardElement:be,extend:We,fireEvent:He,getAlignFactor:lt,isArray:St,isNumber:et,isObject:Et,isString:Ze,merge:Gn,pick:tn,pushUnique:bi,splat:ni,syncTimeout:bn}=Mt;class xi{constructor(l,d,f){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=l,this.init(l,d),this.pointer=f}bodyFormatter(l){return l.map(d=>{let f=d.series.tooltipOptions,g=d.formatPrefix||"point";return(f[g+"Formatter"]||d.tooltipFormatter).call(d,f[g+"Format"]||"")})}cleanSplit(l){this.chart.series.forEach(function(d){let f=d?.tt;f&&(!f.isActive||l?d.tt=f.destroy():f.isActive=!1)})}defaultFormatter(l){let d,f=this.points||ni(this);return(d=(d=[l.headerFooterFormatter(f[0])]).concat(l.bodyFormatter(f))).push(l.headerFooterFormatter(f[0],!0)),d}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),be(this.container)),Mt.clearTimeout(this.hideTimer)}getAnchor(l,d){let f,{chart:g,pointer:y}=this,_=g.inverted,b=g.plotTop,C=g.plotLeft;if(l=ni(l),l[0].series?.yAxis&&!l[0].series.yAxis.options.reversedStacks&&(l=l.slice().reverse()),this.followPointer&&d)d.chartX===void 0&&(d=y.normalize(d)),f=[d.chartX-C,d.chartY-b];else if(l[0].tooltipPos)f=l[0].tooltipPos;else{let R=0,I=0;l.forEach(function(F){let U=F.pos(!0);U&&(R+=U[0],I+=U[1])}),R/=l.length,I/=l.length,this.shared&&l.length>1&&d&&(_?R=d.chartX:I=d.chartY),f=[R-C,I-b]}let A={point:l[0],ret:f};return He(this,"getAnchor",A),A.ret.map(Math.round)}getClassName(l,d,f){let g=this.options,y=l.series,_=y.options;return[g.className,"highcharts-label",f&&"highcharts-tooltip-header",d?"highcharts-tooltip-box":"highcharts-tooltip",!f&&"highcharts-color-"+tn(l.colorIndex,y.colorIndex),_?.className].filter(Ze).join(" ")}getLabel({anchorX:l,anchorY:d}={anchorX:0,anchorY:0}){let f=this,g=this.chart.styledMode,y=this.options,_=this.split&&this.allowShared,b=this.container,C=this.chart.renderer;if(this.label){let A=!this.label.hasClass("highcharts-label");(!_&&A||_&&!A)&&this.destroy()}if(!this.label){if(this.outside){let A=this.chart,R=A.options.chart.style,I=cr.getRendererType();this.container=b=K.doc.createElement("div"),b.className="highcharts-tooltip-container "+(A.renderTo.className.match(/(highcharts[a-zA-Z0-9-]+)\s?/gm)||""),Ee(b,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(R?.zIndex||0)+3)}),this.renderer=C=new I(b,0,0,R,void 0,void 0,C.styledMode)}if(_?this.label=C.g("tooltip"):(this.label=C.label("",l,d,y.shape||"callout",void 0,void 0,y.useHTML,void 0,"tooltip").attr({padding:y.padding,r:y.borderRadius}),g||this.label.attr({fill:y.backgroundColor,"stroke-width":y.borderWidth||0}).css(y.style).css({pointerEvents:y.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),f.outside){let A=this.label;[A.xSetter,A.ySetter].forEach((R,I)=>{A[I?"ySetter":"xSetter"]=F=>{R.call(A,f.distance),A[I?"y":"x"]=F,b&&(b.style[I?"top":"left"]=`${F}px`)}})}this.label.attr({zIndex:8}).shadow(y.shadow??!y.fixed).add()}return b&&!b.parentElement&&K.doc.body.appendChild(b),this.label}getPlayingField(){let{body:l,documentElement:d}=ne,{chart:f,distance:g,outside:y}=this;return{width:y?Math.max(l.scrollWidth,d.scrollWidth,l.offsetWidth,d.offsetWidth,d.clientWidth)-2*g-2:f.chartWidth,height:y?Math.max(l.scrollHeight,d.scrollHeight,l.offsetHeight,d.offsetHeight,d.clientHeight):f.chartHeight}}getPosition(l,d,f){let{distance:g,chart:y,outside:_,pointer:b}=this,{inverted:C,plotLeft:A,plotTop:R,polar:I}=y,{plotX:F=0,plotY:U=0}=f,H={},$=C&&f.h||0,{height:X,width:q}=this.getPlayingField(),ie=b.getChartPosition(),ae=Xt=>Xt*ie.scaleX,pe=Xt=>Xt*ie.scaleY,ke=Xt=>{let Bt=Xt==="x";return[Xt,Bt?q:X,Bt?l:d].concat(_?[Bt?ae(l):pe(d),Bt?ie.left-g+ae(F+A):ie.top-g+pe(U+R),0,Bt?q:X]:[Bt?l:d,Bt?F+A:U+R,Bt?A:R,Bt?A+y.plotWidth:R+y.plotHeight])},Te=ke("y"),Se=ke("x"),De,Ye=!!f.negative;!I&&y.hoverSeries?.yAxis?.reversed&&(Ye=!Ye);let Je=!this.followPointer&&tn(f.ttBelow,!I&&!C===Ye),st=function(Xt,Bt,cn,Tr,Ji,jo,$n){let Un=_?Xt==="y"?pe(g):ae(g):g,Xi=(cn-Tr)/2,wi=Tr<Ji-g,mr=Ji+g+Tr<Bt,gr=Ji-Un-cn+Xi,er=Ji+Un-Xi;if(Je&&mr)H[Xt]=er;else if(!Je&&wi)H[Xt]=gr;else if(wi)H[Xt]=Math.min($n-Tr,gr-$<0?gr:gr-$);else{if(!mr)return H[Xt]=0,!1;H[Xt]=Math.max(jo,er+$+cn>Bt?er:er+$)}},Gt=function(Xt,Bt,cn,Tr,Ji){if(Ji<g||Ji>Bt-g)return!1;Ji<cn/2?H[Xt]=1:Ji>Bt-Tr/2?H[Xt]=Bt-Tr-2:H[Xt]=Ji-cn/2},xn=function(Xt){[Te,Se]=[Se,Te],De=Xt},Cn=()=>{st.apply(0,Te)!==!1?Gt.apply(0,Se)!==!1||De||(xn(!0),Cn()):De?H.x=H.y=0:(xn(!0),Cn())};return(C&&!I||this.len>1)&&xn(),Cn(),H}getFixedPosition(l,d,f){let g=f.series,{chart:y,options:_,split:b}=this,C=_.position,A=C.relativeTo,R=_.shared||g?.yAxis?.isRadial&&(A==="pane"||!A)?"plotBox":A,I=R==="chart"?y.renderer:y[R]||y.getClipBox(g,!0);return{x:I.x+(I.width-l)*lt(C.align)+C.x,y:I.y+(I.height-d)*lt(C.verticalAlign)+(!b&&C.y||0)}}hide(l){let d=this;Mt.clearTimeout(this.hideTimer),l=tn(l,this.options.hideDelay),this.isHidden||(this.hideTimer=bn(function(){let f=d.getLabel();d.getLabel().animate({opacity:0},{duration:l&&150,complete:()=>{f.hide(),d.container&&d.container.remove()}}),d.isHidden=!0},l))}init(l,d){this.chart=l,this.options=d,this.crosshairs=[],this.isHidden=!0,this.split=d.split&&!l.inverted&&!l.polar,this.shared=d.shared||this.split,this.outside=tn(d.outside,!!(l.scrollablePixelsX||l.scrollablePixelsY))}shouldStickOnContact(l){return!!(!this.followPointer&&this.options.stickOnContact&&(!l||this.pointer.inClass(l.target,"highcharts-tooltip")))}move(l,d,f,g){let{followPointer:y,options:_}=this,b=E(!y&&!this.isHidden&&!_.fixed&&_.animation),C=y||(this.len||0)>1,A={x:l,y:d};C?A.anchorX=A.anchorY=NaN:(A.anchorX=f,A.anchorY=g),b.step=()=>this.drawTracker(),this.getLabel().animate(A,b)}refresh(l,d){let{chart:f,options:g,pointer:y,shared:_}=this,b=ni(l),C=b[0],A=g.format,R=g.formatter||this.defaultFormatter,I=f.styledMode,F=this.allowShared;if(!g.enabled||!C.series)return;Mt.clearTimeout(this.hideTimer),this.allowShared=!(!St(l)&&l.series&&l.series.noSharedTooltip),F=F&&!this.allowShared,this.followPointer=!this.split&&C.series.tooltipOptions.followPointer;let U=this.getAnchor(l,d),H=U[0],$=U[1];_&&this.allowShared&&(y.applyInactiveState(b),b.forEach(ie=>ie.setState("hover")),C.points=b),this.len=b.length;let X=Ze(A)?k(A,C,f):R.call(C,this);C.points=void 0;let q=C.series;if(this.distance=tn(q.tooltipOptions.distance,16),X===!1)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(X,b);else{let ie=H,ae=$;if(d&&y.isDirectTouch&&(ie=d.chartX-f.plotLeft,ae=d.chartY-f.plotTop),!(f.polar||q.options.clip===!1||b.some(pe=>y.isDirectTouch||pe.series.shouldShowTooltip(ie,ae))))return void this.hide();{let pe=this.getLabel(F&&this.tt||{});(!g.style.width||I)&&pe.css({width:(this.outside?this.getPlayingField():f.spacingBox).width+"px"}),pe.attr({class:this.getClassName(C),text:X&&X.join?X.join(""):X}),this.outside&&pe.attr({x:Ce(pe.x||0,0,this.getPlayingField().width-(pe.width||0)-1)}),I||pe.attr({stroke:g.borderColor||C.color||q.color||"#666666"}),this.updatePosition({plotX:H,plotY:$,negative:C.negative,ttBelow:C.ttBelow,series:q,h:U[2]||0})}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}He(this,"refresh")}renderSplit(l,d){let f=this,{chart:g,chart:{chartWidth:y,chartHeight:_,plotHeight:b,plotLeft:C,plotTop:A,scrollablePixelsY:R=0,scrollablePixelsX:I,styledMode:F},distance:U,options:H,options:{fixed:$,position:X,positioner:q},pointer:ie}=f,{scrollLeft:ae=0,scrollTop:pe=0}=g.scrollablePlotArea?.scrollingContainer||{},ke=f.outside&&typeof I!="number"?ne.documentElement.getBoundingClientRect():{left:ae,right:ae+y,top:pe,bottom:pe+_},Te=f.getLabel(),Se=this.renderer||g.renderer,De=!!g.xAxis[0]?.opposite,{left:Ye,top:Je}=ie.getChartPosition(),st=q||$,Gt=A+pe,xn=0,Cn=b-R,Xt=function($n,Un,Xi,wi=[0,0],mr=!0){let gr,er;if(Xi.isHeader)er=De?0:Cn,gr=Ce(wi[0]-$n/2,ke.left,ke.right-$n-(f.outside?Ye:0));else if($&&Xi){let Br=f.getFixedPosition($n,Un,Xi);gr=Br.x,er=Br.y-Gt}else er=wi[1]-Gt,gr=Ce(gr=mr?wi[0]-$n-U:wi[0]+U,mr?gr:ke.left,ke.right);return{x:gr,y:er}};Ze(l)&&(l=[!1,l]);let Bt=l.slice(0,d.length+1).reduce(function($n,Un,Xi){if(Un!==!1&&Un!==""){let wi=d[Xi-1]||{isHeader:!0,plotX:d[0].plotX,plotY:b,series:{}},mr=wi.isHeader,gr=mr?f:wi.series,er=gr.tt=function(mc,Go,ou){let _h=mc,{isHeader:Bf,series:G0}=Go,gc=G0.tooltipOptions||H;if(!_h){let Gm={padding:gc.padding,r:gc.borderRadius};F||(Gm.fill=gc.backgroundColor,Gm["stroke-width"]=gc.borderWidth??($&&!Bf?0:1)),_h=Se.label("",0,0,gc[Bf?"headerShape":"shape"]||($&&!Bf?"rect":"callout"),void 0,void 0,gc.useHTML).addClass(f.getClassName(Go,!0,Bf)).attr(Gm).add(Te)}return _h.isActive=!0,_h.attr({text:ou}),F||_h.css(gc.style).attr({stroke:gc.borderColor||Go.color||G0.color||"#333333"}),_h}(gr.tt,wi,Un.toString()),Br=er.getBBox(),Wo=Br.width+er.strokeWidth();mr&&(xn=Br.height,Cn+=xn,De&&(Gt-=xn));let{anchorX:pa,anchorY:vh}=function(mc){let Go,ou,{isHeader:_h,plotX:Bf=0,plotY:G0=0,series:gc}=mc;if(_h)Go=Math.max(C+Bf,C),ou=A+b/2;else{let{xAxis:Gm,yAxis:mO}=gc;Go=Gm.pos+Ce(Bf,-U,Gm.len+U),gc.shouldShowTooltip(0,mO.pos-A+G0,{ignoreX:!0})&&(ou=mO.pos+G0)}return{anchorX:Go=Ce(Go,ke.left-U,ke.right+U),anchorY:ou}}(wi);if(typeof vh=="number"){let mc=Br.height+1,Go=(q||Xt).call(f,Wo,mc,wi,[pa,vh]);$n.push({align:st?0:void 0,anchorX:pa,anchorY:vh,boxWidth:Wo,point:wi,rank:tn(Go.rank,+!!mr),size:mc,target:Go.y,tt:er,x:Go.x})}else er.isActive=!1}return $n},[]);!st&&Bt.some($n=>{let{outside:Un}=f,Xi=(Un?Ye:0)+$n.anchorX;return Xi<ke.left&&Xi+$n.boxWidth<ke.right||Xi<Ye-ke.left+$n.boxWidth&&ke.right-Xi>Xi})&&(Bt=Bt.map($n=>{let{x:Un,y:Xi}=Xt.call(this,$n.boxWidth,$n.size,$n.point,[$n.anchorX,$n.anchorY],!1);return We($n,{target:Xi,x:Un})})),f.cleanSplit(),ce(Bt,Cn);let cn={left:Ye,right:Ye};Bt.forEach(function($n){let{x:Un,boxWidth:Xi,isHeader:wi}=$n;!wi&&(f.outside&&Ye+Un<cn.left&&(cn.left=Ye+Un),!wi&&f.outside&&cn.left+Xi>cn.right&&(cn.right=Ye+Un))}),Bt.forEach(function($n){let{x:Un,anchorX:Xi,anchorY:wi,pos:mr,point:{isHeader:gr}}=$n,er={visibility:mr===void 0?"hidden":"inherit",x:Un,y:(mr||0)+Gt+($&&X.y||0),anchorX:Xi,anchorY:wi};if(f.outside&&Un<Xi){let Br=Ye-cn.left;Br>0&&(gr||(er.x=Un+Br,er.anchorX=Xi+Br),gr&&(er.x=(cn.right-cn.left)/2,er.anchorX=Xi+Br))}$n.tt.attr(er)});let{container:Tr,outside:Ji,renderer:jo}=f;if(Ji&&Tr&&jo){let{width:$n,height:Un,x:Xi,y:wi}=Te.getBBox();jo.setSize($n+Xi,Un+wi,!1),Tr.style.left=cn.left+"px",Tr.style.top=Je+"px"}Q&&Te.attr({opacity:Te.opacity===1?.999:1})}drawTracker(){if(!this.shouldStickOnContact()){this.tracker&&(this.tracker=this.tracker.destroy());return}let l=this.chart,d=this.label,f=this.shared?l.hoverPoints:l.hoverPoint;if(!d||!f)return;let g={x:0,y:0,width:0,height:0},y=this.getAnchor(f),_=d.getBBox();y[0]+=l.plotLeft-(d.translateX||0),y[1]+=l.plotTop-(d.translateY||0),g.x=Math.min(0,y[0]),g.y=Math.min(0,y[1]),g.width=y[0]<0?Math.max(Math.abs(y[0]),_.width-y[0]):Math.max(Math.abs(y[0]),_.width),g.height=y[1]<0?Math.max(Math.abs(y[1]),_.height-Math.abs(y[1])):Math.max(Math.abs(y[1]),_.height),this.tracker?this.tracker.attr(g):(this.tracker=d.renderer.rect(g).addClass("highcharts-tracker").add(d),l.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat(l){return l.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}headerFooterFormatter(l,d){let f=l.series,g=f.tooltipOptions,y=f.xAxis,_=y?.dateTime,b={isFooter:d,point:l},C=g.xDateFormat||"",A=g[d?"footerFormat":"headerFormat"];return He(this,"headerFormatter",b,function(R){if(_&&!C&&et(l.key)&&(C=_.getXDateFormat(l.key,g.dateTimeLabelFormats)),_&&C){if(Et(C)){let I=C;Y[0]=F=>f.chart.time.dateFormat(I,F),C="%0"}(l.tooltipDateKeys||["key"]).forEach(I=>{A=A.replace(RegExp("point\\."+I+"([ \\)}])"),`(point.${I}:${C})$1`)})}f.chart.styledMode&&(A=this.styledModeFormat(A)),R.text=k(A,l,this.chart)}),b.text||""}update(l){this.destroy(),this.init(this.chart,Gn(!0,this.options,l))}updatePosition(l){let{chart:d,container:f,distance:g,options:y,pointer:_,renderer:b}=this,{height:C=0,width:A=0}=this.getLabel(),{fixed:R,positioner:I}=y,{left:F,top:U,scaleX:H,scaleY:$}=_.getChartPosition(),X=(I||R&&this.getFixedPosition||this.getPosition).call(this,A,C,l),q=K.doc,ie=(l.plotX||0)+d.plotLeft,ae=(l.plotY||0)+d.plotTop,pe;if(b&&f){if(I||R){let{scrollLeft:ke=0,scrollTop:Te=0}=d.scrollablePlotArea?.scrollingContainer||{};X.x+=ke+F-g,X.y+=Te+U-g}pe=(y.borderWidth||0)+2*g+2,b.setSize(Ce(A+pe,0,q.documentElement.clientWidth)-1,C+pe,!1),(H!==1||$!==1)&&(Ee(f,{transform:`scale(${H}, ${$})`}),ie*=H,ae*=$),ie+=F-X.x,ae+=U-X.y}this.move(Math.round(X.x),Math.round(X.y||0),ie,ae)}}(function(M){M.compose=function(l){bi(B,"Core.Tooltip")&&ve(l,"afterInit",function(){let d=this.chart;d.options.tooltip&&(d.tooltip=new M(d,d.options.tooltip,this))})}})(xi||(xi={}));let pr=xi,{animObject:ft}=Gr,{defaultOptions:Qt}=_n,{format:Ot}=Fi,{addEvent:ln,crisp:Jn,erase:kn,extend:Ln,fireEvent:qi,getNestedProperty:Er,isArray:br,isFunction:bo,isNumber:ls,isObject:ys,merge:Qi,pick:Ui,syncTimeout:es,removeEvent:Uo,uniqueKey:nu}=Mt;class Qs{animateBeforeDestroy(){let l=this,d={x:l.startXPos,opacity:0},f=l.getGraphicalProps();f.singular.forEach(function(g){l[g]=l[g].animate(g==="dataLabel"?{x:l[g].startXPos,y:l[g].startYPos,opacity:0}:d)}),f.plural.forEach(function(g){l[g].forEach(function(y){y.element&&y.animate(Ln({x:l.startXPos},y.startYPos?{x:y.startXPos,y:y.startYPos}:{}))})})}applyOptions(l,d){let f=this.series,g=f.options.pointValKey||f.pointValKey;return Ln(this,l=Qs.prototype.optionsToObject.call(this,l)),this.options=this.options?Ln(this.options,l):l,l.group&&delete this.group,l.dataLabels&&delete this.dataLabels,g&&(this.y=Qs.prototype.getNestedProperty.call(this,g)),this.selected&&(this.state="select"),"name"in this&&d===void 0&&f.xAxis&&f.xAxis.hasNames&&(this.x=f.xAxis.nameToX(this)),this.x===void 0&&f?this.x=d??f.autoIncrement():ls(l.x)&&f.options.relativeXValue?this.x=f.autoIncrement(l.x):typeof this.x=="string"&&(d??(d=f.chart.time.parse(this.x)),ls(d)&&(this.x=d)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let l=this,d=l.series,f=d.chart,g=d.options.dataSorting,y=f.hoverPoints,_=ft(l.series.chart.renderer.globalAnimation),b=()=>{for(let C in(l.graphic||l.graphics||l.dataLabel||l.dataLabels)&&(Uo(l),l.destroyElements()),l)delete l[C]};l.legendItem&&f.legend.destroyItem(l),y&&(l.setState(),kn(y,l),y.length||(f.hoverPoints=null)),l===f.hoverPoint&&l.onMouseOut(),g?.enabled?(this.animateBeforeDestroy(),es(b,_.duration)):b(),f.pointCount--}this.destroyed=!0}destroyElements(l){let d=this,f=d.getGraphicalProps(l);f.singular.forEach(function(g){d[g]=d[g].destroy()}),f.plural.forEach(function(g){d[g].forEach(function(y){y?.element&&y.destroy()}),delete d[g]})}firePointEvent(l,d,f){let g=this,y=this.series.options;g.manageEvent(l),l==="click"&&y.allowPointSelect&&(f=function(_){!g.destroyed&&g.select&&g.select(null,_.ctrlKey||_.metaKey||_.shiftKey)}),qi(g,l,d,f)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(this.colorIndex!==void 0?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone?.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(l){let d,f,g=this,y=[],_={singular:[],plural:[]};for((l=l||{graphic:1,dataLabel:1}).graphic&&y.push("graphic","connector"),l.dataLabel&&y.push("dataLabel","dataLabelPath","dataLabelUpper"),f=y.length;f--;)g[d=y[f]]&&_.singular.push(d);return["graphic","dataLabel"].forEach(function(b){let C=b+"s";l[b]&&g[C]&&_.plural.push(C)}),_}getNestedProperty(l){if(l)return l.indexOf("custom.")===0?Er(l,this.options):this[l]}getZone(){let l=this.series,d=l.zones,f=l.zoneAxis||"y",g,y=0;for(g=d[0];this[f]>=g.value;)g=d[++y];return this.nonZonedColor||(this.nonZonedColor=this.color),g?.color&&!this.options.color?this.color=g.color:this.color=this.nonZonedColor,g}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor(l,d,f){this.formatPrefix="point",this.visible=!0,this.point=this,this.series=l,this.applyOptions(d,f),this.id??(this.id=nu()),this.resolveColor(),this.dataLabelOnNull??(this.dataLabelOnNull=l.options.nullInteraction),l.chart.pointCount++,qi(this,"afterInit")}isValid(){return(ls(this.x)||this.x instanceof Date)&&ls(this.y)}optionsToObject(l){let d=this.series,f=d.options.keys,g=f||d.pointArrayMap||["y"],y=g.length,_={},b,C=0,A=0;if(ls(l)||l===null)_[g[0]]=l;else if(br(l))for(!f&&l.length>y&&((b=typeof l[0])=="string"?d.xAxis?.dateTime?_.x=d.chart.time.parse(l[0]):_.name=l[0]:b==="number"&&(_.x=l[0]),C++);A<y;)f&&l[C]===void 0||(g[A].indexOf(".")>0?Qs.prototype.setNestedProperty(_,l[C],g[A]):_[g[A]]=l[C]),C++,A++;else typeof l=="object"&&(_=l,l.dataLabels&&(d.hasDataLabels=()=>!0),l.marker&&(d._hasPointMarkers=!0));return _}pos(l,d=this.plotY){if(!this.destroyed){let{plotX:f,series:g}=this,{chart:y,xAxis:_,yAxis:b}=g,C=0,A=0;if(ls(f)&&ls(d))return l&&(C=_?_.pos:y.plotLeft,A=b?b.pos:y.plotTop),y.inverted&&_&&b?[b.len-d+A,_.len-f+C]:[f+C,d+A]}}resolveColor(){let l=this.series,d=l.chart.options.chart,f=l.chart.styledMode,g,y,_=d.colorCount,b;delete this.nonZonedColor,l.options.colorByPoint?(f||(g=(y=l.options.colors||l.chart.options.colors)[l.colorCounter],_=y.length),b=l.colorCounter,l.colorCounter++,l.colorCounter===_&&(l.colorCounter=0)):(f||(g=l.color),b=l.colorIndex),this.colorIndex=Ui(this.options.colorIndex,b),this.color=Ui(this.options.color,g)}setNestedProperty(l,d,f){return f.split(".").reduce(function(g,y,_,b){let C=b.length-1===_;return g[y]=C?d:ys(g[y],!0)?g[y]:{},g[y]},l),l}shouldDraw(){return!this.isNull}tooltipFormatter(l){let{chart:d,pointArrayMap:f=["y"],tooltipOptions:g}=this.series,{valueDecimals:y="",valuePrefix:_="",valueSuffix:b=""}=g;return d.styledMode&&(l=d.tooltip?.styledModeFormat(l)||l),f.forEach(C=>{C="{point."+C,(_||b)&&(l=l.replace(RegExp(C+"}","g"),_+C+"}"+b)),l=l.replace(RegExp(C+"}","g"),C+":,."+y+"f}")}),Ot(l,this,d)}update(l,d,f,g){let y,_=this,b=_.series,C=_.graphic,A=b.chart,R=b.options;function I(){_.applyOptions(l);let F=C&&_.hasMockGraphic,U=_.y===null?!F:F;C&&U&&(_.graphic=C.destroy(),delete _.hasMockGraphic),ys(l,!0)&&(C?.element&&l&&l.marker&&l.marker.symbol!==void 0&&(_.graphic=C.destroy()),l?.dataLabels&&_.dataLabel&&(_.dataLabel=_.dataLabel.destroy())),y=_.index;let H={};for(let $ of b.dataColumnKeys())H[$]=_[$];b.dataTable.setRow(H,y),R.data[y]=ys(R.data[y],!0)||ys(l,!0)?_.options:Ui(l,R.data[y]),b.isDirty=b.isDirtyData=!0,!b.fixedBox&&b.hasCartesianSeries&&(A.isDirtyBox=!0),R.legendType==="point"&&(A.isDirtyLegend=!0),d&&A.redraw(f)}d=Ui(d,!0),g===!1?I():_.firePointEvent("update",{options:l},I)}remove(l,d){this.series.removePoint(this.series.data.indexOf(this),l,d)}select(l,d){let f=this,g=f.series,y=g.chart;l=Ui(l,!f.selected),this.selectedStaging=l,f.firePointEvent(l?"select":"unselect",{accumulate:d},function(){f.selected=f.options.selected=l,g.options.data[g.data.indexOf(f)]=f.options,f.setState(l&&"select"),d||y.getSelectedPoints().forEach(function(_){let b=_.series;_.selected&&_!==f&&(_.selected=_.options.selected=!1,b.options.data[b.data.indexOf(_)]=_.options,_.setState(y.hoverPoints&&b.options.inactiveOtherPoints?"inactive":""),_.firePointEvent("unselect"))})}),delete this.selectedStaging}onMouseOver(l){let{inverted:d,pointer:f}=this.series.chart;f&&(l=l?f.normalize(l):f.getChartCoordinatesFromPoint(this,d),f.runPointActions(l,this))}onMouseOut(){let l=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(l.hoverPoints||[]).forEach(function(d){d.setState()}),l.hoverPoints=l.hoverPoint=null}manageEvent(l){let d=Qi(this.series.options.point,this.options),f=d.events?.[l];bo(f)&&(!this.hcEvents?.[l]||this.hcEvents?.[l]?.map(g=>g.fn).indexOf(f)===-1)?(this.importedUserEvent?.(),this.importedUserEvent=ln(this,l,f),this.hcEvents&&(this.hcEvents[l].userEvent=!0)):this.importedUserEvent&&!f&&this.hcEvents?.[l]&&this.hcEvents?.[l].userEvent&&(Uo(this,l),delete this.hcEvents[l],Object.keys(this.hcEvents)||delete this.importedUserEvent)}setState(l,d){let f=this.series,g=this.state,y=f.options.states[l||"normal"]||{},_=Qt.plotOptions[f.type].marker&&f.options.marker,b=_&&_.enabled===!1,C=_?.states?.[l||"normal"]||{},A=C.enabled===!1,R=this.marker||{},I=f.chart,F=_&&f.markerAttribs,U=f.halo,H,$,X,q=f.stateMarkerGraphic,ie;if((l=l||"")===this.state&&!d||this.selected&&l!=="select"||y.enabled===!1||l&&(A||b&&C.enabled===!1)||l&&R.states&&R.states[l]&&R.states[l].enabled===!1)return;if(this.state=l,F&&(H=f.markerAttribs(this,l)),this.graphic&&!this.hasMockGraphic){if(g&&this.graphic.removeClass("highcharts-point-"+g),l&&this.graphic.addClass("highcharts-point-"+l),!I.styledMode){$=f.pointAttribs(this,l),X=Ui(I.options.chart.animation,y.animation);let Te=$.opacity;f.options.inactiveOtherPoints&&ls(Te)&&(this.dataLabels||[]).forEach(function(Se){Se&&!Se.hasClass("highcharts-data-label-hidden")&&(Se.animate({opacity:Te},X),Se.connector&&Se.connector.animate({opacity:Te},X))}),this.graphic.animate($,X)}H&&this.graphic.animate(H,Ui(I.options.chart.animation,C.animation,_.animation)),q&&q.hide()}else l&&C&&(ie=R.symbol||f.symbol,q&&q.currentSymbol!==ie&&(q=q.destroy()),H&&(q?q[d?"animate":"attr"]({x:H.x,y:H.y}):ie&&(f.stateMarkerGraphic=q=I.renderer.symbol(ie,H.x,H.y,H.width,H.height,Qi(_,C)).add(f.markerGroup),q.currentSymbol=ie)),!I.styledMode&&q&&this.state!=="inactive"&&q.attr(f.pointAttribs(this,l))),q&&(q[l&&this.isInside?"show":"hide"](),q.element.point=this,q.addClass(this.getClassName(),!0));let ae=y.halo,pe=this.graphic||q,ke=pe?.visibility||"inherit";ae?.size&&pe&&ke!=="hidden"&&!this.isCluster?(U||(f.halo=U=I.renderer.path().add(pe.parentGroup)),U.show()[d?"animate":"attr"]({d:this.haloPath(ae.size)}),U.attr({class:"highcharts-halo highcharts-color-"+Ui(this.colorIndex,f.colorIndex)+(this.className?" "+this.className:""),visibility:ke,zIndex:-1}),U.point=this,I.styledMode||U.attr(Ln({fill:this.color||f.color,"fill-opacity":ae.opacity},Wt.filterUserAttributes(ae.attributes||{})))):U?.point?.haloPath&&!U.point.destroyed&&U.animate({d:U.point.haloPath(0)},null,U.hide),qi(this,"afterSetState",{state:l})}haloPath(l){let d=this.pos();return d?this.series.chart.renderer.symbols.circle(Jn(d[0],1)-l,d[1]-l,2*l,2*l):[]}}let vs=Qs,{parse:iu}=Dn,{charts:zo,composed:Xa,isTouchDevice:fa}=K,{addEvent:Ho,attr:kf,css:id,extend:hc,find:nN,fireEvent:hh,isNumber:Gb,isObject:$b,objectEach:hj,offset:fj,pick:ru,pushUnique:pj,splat:iN}=Mt;class Ls{applyInactiveState(l=[]){let d=[];l.forEach(f=>{let g=f.series;d.push(g),g.linkedParent&&d.push(g.linkedParent),g.linkedSeries&&d.push.apply(d,g.linkedSeries),g.navigatorSeries&&d.push(g.navigatorSeries),g.boosted&&g.markerGroup&&d.push.apply(d,this.chart.series.filter(y=>y.markerGroup===g.markerGroup))}),this.chart.series.forEach(f=>{d.indexOf(f)===-1?f.setState("inactive",!0):f.options.inactiveOtherPoints&&f.setAllPointsToState("inactive")})}destroy(){let l=this;this.eventsToUnbind.forEach(d=>d()),this.eventsToUnbind=[],!K.chartCount&&(Ls.unbindDocumentMouseUp.forEach(d=>d.unbind()),Ls.unbindDocumentMouseUp.length=0,Ls.unbindDocumentTouchEnd&&(Ls.unbindDocumentTouchEnd=Ls.unbindDocumentTouchEnd())),clearInterval(l.tooltipTimeout),hj(l,function(d,f){l[f]=void 0})}getSelectionMarkerAttrs(l,d){let f={args:{chartX:l,chartY:d},attrs:{},shapeType:"rect"};return hh(this,"getSelectionMarkerAttrs",f,g=>{let y,{chart:_,zoomHor:b,zoomVert:C}=this,{mouseDownX:A=0,mouseDownY:R=0}=_,I=g.attrs;I.x=_.plotLeft,I.y=_.plotTop,I.width=b?1:_.plotWidth,I.height=C?1:_.plotHeight,b&&(I.width=Math.max(1,Math.abs(y=l-A)),I.x=(y>0?0:y)+A),C&&(I.height=Math.max(1,Math.abs(y=d-R)),I.y=(y>0?0:y)+R)}),f}drag(l){let{chart:d}=this,{mouseDownX:f=0,mouseDownY:g=0}=d,{panning:y,panKey:_,selectionMarkerFill:b}=d.options.chart,C=d.plotLeft,A=d.plotTop,R=d.plotWidth,I=d.plotHeight,F=$b(y)?y.enabled:y,U=_&&l[`${_}Key`],H=l.chartX,$=l.chartY,X,q=this.selectionMarker;if((!q||!q.touch)&&(H<C?H=C:H>C+R&&(H=C+R),$<A?$=A:$>A+I&&($=A+I),this.hasDragged=Math.sqrt(Math.pow(f-H,2)+Math.pow(g-$,2)),this.hasDragged>10)){X=d.isInsidePlot(f-C,g-A,{visiblePlotOnly:!0});let{shapeType:ie,attrs:ae}=this.getSelectionMarkerAttrs(H,$);this.hasZoom&&X&&!U&&!q&&(this.selectionMarker=q=d.renderer[ie](),q.attr({class:"highcharts-selection-marker",zIndex:7}).add(),d.styledMode||q.attr({fill:b||iu("#334eff").setOpacity(.25).get()})),q&&q.attr(ae),X&&!q&&F&&d.pan(l,y)}}dragStart(l){let d=this.chart;d.mouseIsDown=l.type,d.cancelClick=!1,d.mouseDownX=l.chartX,d.mouseDownY=l.chartY}getSelectionBox(l){let d={args:{marker:l},result:l.getBBox()};return hh(this,"getSelectionBox",d),d.result}drop(l){let d,{chart:f,selectionMarker:g}=this;for(let y of f.axes)y.isPanning&&(y.isPanning=!1,(y.options.startOnTick||y.options.endOnTick||y.series.some(_=>_.boosted))&&(y.forceRedraw=!0,y.setExtremes(y.userMin,y.userMax,!1),d=!0));if(d&&f.redraw(),g&&l){if(this.hasDragged){let y=this.getSelectionBox(g);f.transform({axes:f.axes.filter(_=>_.zoomEnabled&&(_.coll==="xAxis"&&this.zoomX||_.coll==="yAxis"&&this.zoomY)),selection:Ke({originalEvent:l,xAxis:[],yAxis:[]},y),from:y})}Gb(f.index)&&(this.selectionMarker=g.destroy())}f&&Gb(f.index)&&(id(f.container,{cursor:f._cursor}),f.cancelClick=this.hasDragged>10,f.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[])}findNearestKDPoint(l,d,f){let g;return l.forEach(function(y){let _=!(y.noSharedTooltip&&d)&&0>y.options.findNearestPointBy.indexOf("y"),b=y.searchPoint(f,_);$b(b,!0)&&b.series&&(!$b(g,!0)||function(C,A){let R,I=C.distX-A.distX,F=C.dist-A.dist,U=A.series.group?.zIndex-C.series.group?.zIndex;return I!==0&&d?I:F!==0?F:U!==0?U:C.series.index>A.series.index?-1:1}(g,b)>0)&&(g=b)}),g}getChartCoordinatesFromPoint(l,d){let{xAxis:f,yAxis:g}=l.series,y=l.shapeArgs;if(f&&g){let _=l.clientX??l.plotX??0,b=l.plotY||0;return l.isNode&&y&&Gb(y.x)&&Gb(y.y)&&(_=y.x,b=y.y),d?{chartX:g.len+g.pos-b,chartY:f.len+f.pos-_}:{chartX:_+f.pos,chartY:b+g.pos}}if(y?.x&&y.y)return{chartX:y.x,chartY:y.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:l}=this.chart,d=fj(l);this.chartPosition={left:d.left,top:d.top,scaleX:1,scaleY:1};let{offsetHeight:f,offsetWidth:g}=l;return g>2&&f>2&&(this.chartPosition.scaleX=d.width/g,this.chartPosition.scaleY=d.height/f),this.chartPosition}getCoordinates(l){let d={xAxis:[],yAxis:[]};for(let f of this.chart.axes)d[f.isXAxis?"xAxis":"yAxis"].push({axis:f,value:f.toValue(l[f.horiz?"chartX":"chartY"])});return d}getHoverData(l,d,f,g,y,_){let b=[],C=function(U){return U.visible&&!(!y&&U.directTouch)&&ru(U.options.enableMouseTracking,!0)},A=d,R,I={chartX:_?_.chartX:void 0,chartY:_?_.chartY:void 0,shared:y};hh(this,"beforeGetHoverData",I),R=A&&!A.stickyTracking?[A]:f.filter(U=>U.stickyTracking&&(I.filter||C)(U));let F=g&&l||!_?l:this.findNearestKDPoint(R,y,_);return A=F?.series,F&&(y&&!A.noSharedTooltip?(R=f.filter(function(U){return I.filter?I.filter(U):C(U)&&!U.noSharedTooltip})).forEach(function(U){let H=U.options?.nullInteraction,$=nN(U.points,function(X){return X.x===F.x&&(!X.isNull||!!H)});$b($)&&(U.boosted&&U.boost&&($=U.boost.getPoint($)),b.push($))}):b.push(F)),hh(this,"afterGetHoverData",I={hoverPoint:F}),{hoverPoint:I.hoverPoint,hoverSeries:A,hoverPoints:b}}getPointFromEvent(l){let d=l.target,f;for(;d&&!f;)f=d.point,d=d.parentNode;return f}onTrackerMouseOut(l){let d=this.chart,f=l.relatedTarget,g=d.hoverSeries;this.isDirectTouch=!1,!g||!f||g.stickyTracking||this.inClass(f,"highcharts-tooltip")||this.inClass(f,"highcharts-series-"+g.index)&&this.inClass(f,"highcharts-tracker")||g.onMouseOut()}inClass(l,d){let f=l,g;for(;f;){if(g=kf(f,"class")){if(g.indexOf(d)!==-1)return!0;if(g.indexOf("highcharts-container")!==-1)return!1}f=f.parentElement}}constructor(l,d){this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=d,this.chart=l,this.runChartClick=!!d.chart.events?.click,this.pinchDown=[],this.setDOMEvents(),hh(this,"afterInit")}normalize(l,d){let f=l.touches,g=f?f.length?f.item(0):ru(f.changedTouches,l.changedTouches)[0]:l;d||(d=this.getChartPosition());let y=g.pageX-d.left,_=g.pageY-d.top;return hc(l,{chartX:Math.round(y/=d.scaleX),chartY:Math.round(_/=d.scaleY)})}onContainerClick(l){let d=this.chart,f=d.hoverPoint,g=this.normalize(l),y=d.plotLeft,_=d.plotTop;!d.cancelClick&&(f&&this.inClass(g.target,"highcharts-tracker")?(hh(f.series,"click",hc(g,{point:f})),d.hoverPoint&&f.firePointEvent("click",g)):(hc(g,this.getCoordinates(g)),d.isInsidePlot(g.chartX-y,g.chartY-_,{visiblePlotOnly:!0})&&hh(d,"click",g)))}onContainerMouseDown(l){let d=(1&(l.buttons||l.button))==1;l=this.normalize(l),K.isFirefox&&l.button!==0&&this.onContainerMouseMove(l),(l.button===void 0||d)&&(this.zoomOption(l),d&&l.preventDefault?.(),this.dragStart(l))}onContainerMouseLeave(l){let{pointer:d}=zo[ru(Ls.hoverChartIndex,-1)]||{};l=this.normalize(l),this.onContainerMouseMove(l),d&&!this.inClass(l.relatedTarget,"highcharts-tooltip")&&(d.reset(),d.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(l){let d=this.chart,f=d.tooltip,g=this.normalize(l);this.setHoverChartIndex(l),(d.mouseIsDown==="mousedown"||this.touchSelect(g))&&this.drag(g),!d.exporting?.openMenu&&(this.inClass(g.target,"highcharts-tracker")||d.isInsidePlot(g.chartX-d.plotLeft,g.chartY-d.plotTop,{visiblePlotOnly:!0}))&&!f?.shouldStickOnContact(g)&&(this.inClass(g.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(g))}onDocumentTouchEnd(l){this.onDocumentMouseUp(l)}onContainerTouchMove(l){this.touchSelect(l)?this.onContainerMouseMove(l):this.touch(l)}onContainerTouchStart(l){this.touchSelect(l)?this.onContainerMouseDown(l):(this.zoomOption(l),this.touch(l,!0))}onDocumentMouseMove(l){let d=this.chart,f=d.tooltip,g=this.chartPosition,y=this.normalize(l,g);!g||d.isInsidePlot(y.chartX-d.plotLeft,y.chartY-d.plotTop,{visiblePlotOnly:!0})||f?.shouldStickOnContact(y)||y.target!==d.container.ownerDocument&&this.inClass(y.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(l){zo[ru(Ls.hoverChartIndex,-1)]?.pointer?.drop(l)}pinch(l){let d=this,{chart:f,hasZoom:g,lastTouches:y}=d,_=[].map.call(l.touches||[],I=>d.normalize(I)),b=_.length,C=b===1&&(d.inClass(l.target,"highcharts-tracker")&&f.runTrackerClick||d.runChartClick),A=f.tooltip,R=b===1&&ru(A?.options.followTouchMove,!0);b>1?d.initiated=!0:R&&(d.initiated=!1),g&&d.initiated&&!C&&l.cancelable!==!1&&l.preventDefault(),l.type==="touchstart"?(d.pinchDown=_,d.res=!0,f.mouseDownX=l.chartX):R?this.runPointActions(d.normalize(l)):y&&(hh(f,"touchpan",{originalEvent:l,touches:_},()=>{let I=F=>{let U=F[0],H=F[1]||U;return{x:U.chartX,y:U.chartY,width:H.chartX-U.chartX,height:H.chartY-U.chartY}};f.transform({axes:f.axes.filter(F=>F.zoomEnabled&&(this.zoomHor&&F.horiz||this.zoomVert&&!F.horiz)),to:I(_),from:I(y),trigger:l.type})}),d.res&&(d.res=!1,this.reset(!1,0))),d.lastTouches=_}reset(l,d){let f=this.chart,g=f.hoverSeries,y=f.hoverPoint,_=f.hoverPoints,b=f.tooltip,C=b?.shared?_:y;l&&C&&iN(C).forEach(function(A){A.series.isCartesian&&A.plotX===void 0&&(l=!1)}),l?b&&C&&iN(C).length&&(b.refresh(C),b.shared&&_?_.forEach(function(A){A.setState(A.state,!0),A.series.isCartesian&&(A.series.xAxis.crosshair&&A.series.xAxis.drawCrosshair(null,A),A.series.yAxis.crosshair&&A.series.yAxis.drawCrosshair(null,A))}):y&&(y.setState(y.state,!0),f.axes.forEach(function(A){A.crosshair&&y.series[A.coll]===A&&A.drawCrosshair(null,y)}))):(y&&y.onMouseOut(),_&&_.forEach(function(A){A.setState()}),g&&g.onMouseOut(),b&&b.hide(d),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),f.axes.forEach(function(A){A.hideCrosshair()}),f.hoverPoints=f.hoverPoint=void 0)}runPointActions(l,d,f){let g=this.chart,y=g.series,_=g.tooltip?.options.enabled?g.tooltip:void 0,b=!!_&&_.shared,C=d||g.hoverPoint,A=C?.series||g.hoverSeries,R=(!l||l.type!=="touchmove")&&(!!d||A?.directTouch&&this.isDirectTouch),I=this.getHoverData(C,A,y,R,b,l);C=I.hoverPoint,A=I.hoverSeries;let F=I.hoverPoints,U=A?.tooltipOptions.followPointer&&!A.tooltipOptions.split,H=b&&A&&!A.noSharedTooltip;if(C&&(f||C!==g.hoverPoint||_?.isHidden)){if((g.hoverPoints||[]).forEach(function($){F.indexOf($)===-1&&$.setState()}),g.hoverSeries!==A&&A.onMouseOver(),this.applyInactiveState(F),(F||[]).forEach(function($){$.setState("hover")}),g.hoverPoint&&g.hoverPoint.firePointEvent("mouseOut"),!C.series)return;g.hoverPoints=F,g.hoverPoint=C,C.firePointEvent("mouseOver",void 0,()=>{_&&C&&_.refresh(H?F:C,l)})}else if(U&&_&&!_.isHidden){let $=_.getAnchor([{}],l);g.isInsidePlot($[0],$[1],{visiblePlotOnly:!0})&&_.updatePosition({plotX:$[0],plotY:$[1]})}this.unDocMouseMove||(this.unDocMouseMove=Ho(g.container.ownerDocument,"mousemove",$=>zo[Ls.hoverChartIndex??-1]?.pointer?.onDocumentMouseMove($)),this.eventsToUnbind.push(this.unDocMouseMove)),g.axes.forEach(function($){let X,q=$.crosshair?.snap??!0;q&&((X=g.hoverPoint)&&X.series[$.coll]===$||(X=nN(F,ie=>ie.series?.[$.coll]===$))),X||!q?$.drawCrosshair(l,X):$.hideCrosshair()})}setDOMEvents(){let l=this.chart.container,d=l.ownerDocument;l.onmousedown=this.onContainerMouseDown.bind(this),l.onmousemove=this.onContainerMouseMove.bind(this),l.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(Ho(l,"mouseenter",this.onContainerMouseEnter.bind(this)),Ho(l,"mouseleave",this.onContainerMouseLeave.bind(this))),Ls.unbindDocumentMouseUp.some(g=>g.doc===d)||Ls.unbindDocumentMouseUp.push({doc:d,unbind:Ho(d,"mouseup",this.onDocumentMouseUp.bind(this))});let f=this.chart.renderTo.parentElement;for(;f&&f.tagName!=="BODY";)this.eventsToUnbind.push(Ho(f,"scroll",()=>{delete this.chartPosition})),f=f.parentElement;this.eventsToUnbind.push(Ho(l,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),Ho(l,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),Ls.unbindDocumentTouchEnd||(Ls.unbindDocumentTouchEnd=Ho(d,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),Ho(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){if(!fa)return;let l=this.pointerCaptureEventsToUnbind,d=this.chart,f=d.container,g=ru(d.options.tooltip?.followTouchMove,!0)&&d.series.some(y=>y.options.findNearestPointBy.indexOf("y")>-1);!this.hasPointerCapture&&g?(l.push(Ho(f,"pointerdown",y=>{y.target?.hasPointerCapture(y.pointerId)&&y.target?.releasePointerCapture(y.pointerId)}),Ho(f,"pointermove",y=>{d.pointer?.getPointFromEvent(y)?.onMouseOver(y)})),d.styledMode||id(f,{"touch-action":"none"}),f.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!g&&(l.forEach(y=>y()),l.length=0,d.styledMode||id(f,{"touch-action":ru(d.options.chart.style?.["touch-action"],"manipulation")}),f.className=f.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(l){let d=this.chart,f=K.charts[ru(Ls.hoverChartIndex,-1)];if(f&&f!==d){let g={relatedTarget:d.container};l&&!l?.relatedTarget&&Object.assign({},l,g),f.pointer?.onContainerMouseLeave(l||g)}f?.mouseIsDown||(Ls.hoverChartIndex=d.index)}touch(l,d){let f,{chart:g,pinchDown:y=[]}=this;this.setHoverChartIndex(),(l=this.normalize(l)).touches.length===1?g.isInsidePlot(l.chartX-g.plotLeft,l.chartY-g.plotTop,{visiblePlotOnly:!0})&&!g.exporting?.openMenu?(d&&this.runPointActions(l),l.type==="touchmove"&&(f=!!y[0]&&Math.pow(y[0].chartX-l.chartX,2)+Math.pow(y[0].chartY-l.chartY,2)>=16),ru(f,!0)&&this.pinch(l)):d&&this.reset():l.touches.length===2&&this.pinch(l)}touchSelect(l){return!!(this.chart.zooming.singleTouch&&l.touches&&l.touches.length===1)}zoomOption(l){let d=this.chart,f=d.inverted,g=d.zooming.type||"",y,_;/touch/.test(l.type)&&(g=ru(d.zooming.pinchType,g)),this.zoomX=y=/x/.test(g),this.zoomY=_=/y/.test(g),this.zoomHor=y&&!f||_&&f,this.zoomVert=_&&!f||y&&f,this.hasZoom=y||_}}Ls.unbindDocumentMouseUp=[],function(M){M.compose=function(l){pj(Xa,"Core.Pointer")&&Ho(l,"beforeRender",function(){this.pointer=new M(this,this.options)})}}(Ls||(Ls={}));let rN=Ls;(function(M){M.setLength=function(l,d,f){return Array.isArray(l)?(l.length=d,l):l[f?"subarray":"slice"](0,d)},M.splice=function(l,d,f,g,y=[]){if(Array.isArray(l))return Array.isArray(y)||(y=Array.from(y)),{removed:l.splice(d,f,...y),array:l};let _=Object.getPrototypeOf(l).constructor,b=l[g?"subarray":"slice"](d,d+f),C=new _(l.length-f+y.length);return C.set(l.subarray(0,d),0),C.set(y,d),C.set(l.subarray(d+f),d+y.length),{removed:b,array:C}}})(p||(p={}));let{setLength:mj,splice:sN}=p,{fireEvent:QE,objectEach:N0,uniqueKey:O0}=Mt,qb=class{constructor(M={}){this.autoId=!M.id,this.columns={},this.id=M.id||O0(),this.modified=this,this.rowCount=0,this.versionTag=O0();let l=0;N0(M.columns||{},(d,f)=>{this.columns[f]=d.slice(),l=Math.max(l,d.length)}),this.applyRowCount(l)}applyRowCount(M){this.rowCount=M,N0(this.columns,(l,d)=>{l.length!==M&&(this.columns[d]=mj(l,M))})}deleteRows(M,l=1){if(l>0&&M<this.rowCount){let d=0;N0(this.columns,(f,g)=>{this.columns[g]=sN(f,M,l).array,d=f.length}),this.rowCount=d}QE(this,"afterDeleteRows",{rowIndex:M,rowCount:l}),this.versionTag=O0()}getColumn(M,l){return this.columns[M]}getColumns(M,l){return(M||Object.keys(this.columns)).reduce((d,f)=>(d[f]=this.columns[f],d),{})}getRow(M,l){return(l||Object.keys(this.columns)).map(d=>this.columns[d]?.[M])}setColumn(M,l=[],d=0,f){this.setColumns({[M]:l},d,f)}setColumns(M,l,d){let f=this.rowCount;N0(M,(g,y)=>{this.columns[y]=g.slice(),f=g.length}),this.applyRowCount(f),d?.silent||(QE(this,"afterSetColumns"),this.versionTag=O0())}setRow(M,l=this.rowCount,d,f){let{columns:g}=this,y=d?this.rowCount+1:l+1;N0(M,(_,b)=>{let C=g[b]||f?.addColumns!==!1&&Array(y);C&&(d?C=sN(C,l,0,!0,[_]).array:C[l]=_,g[b]=C)}),y>this.rowCount&&this.applyRowCount(y),f?.silent||(QE(this,"afterSetRows"),this.versionTag=O0())}},{extend:gj,merge:yj,pick:oN}=Mt;(function(M){function l(d,f,g){let y=this.legendItem=this.legendItem||{},{chart:_,options:b}=this,{baseline:C=0,symbolWidth:A,symbolHeight:R}=d,I=this.symbol||"circle",F=R/2,U=_.renderer,H=y.group,$=C-Math.round((d.fontMetrics?.b||R)*(g?.4:.3)),X={},q,ie=b.marker,ae=0;if(_.styledMode||(X["stroke-width"]=Math.min(b.lineWidth||0,24),b.dashStyle?X.dashstyle=b.dashStyle:b.linecap!=="square"&&(X["stroke-linecap"]="round")),y.line=U.path().addClass("highcharts-graph").attr(X).add(H),g&&(y.area=U.path().addClass("highcharts-area").add(H)),X["stroke-linecap"]&&(ae=Math.min(y.line.strokeWidth(),A)/2),A){let pe=[["M",ae,$],["L",A-ae,$]];y.line.attr({d:pe}),y.area?.attr({d:[...pe,["L",A-ae,C],["L",ae,C]]})}if(ie&&ie.enabled!==!1&&A){let pe=Math.min(oN(ie.radius,F),F);I.indexOf("url")===0&&(ie=yj(ie,{width:R,height:R}),pe=0),y.symbol=q=U.symbol(I,A/2-pe,$-pe,2*pe,2*pe,gj({context:"legend"},ie)).addClass("highcharts-point").add(H),q.isMarker=!0}}M.areaMarker=function(d,f){l.call(this,d,f,!0)},M.lineMarker=l,M.rectangle=function(d,f){let g=f.legendItem||{},y=d.options,_=d.symbolHeight,b=y.squareSymbol,C=b?_:d.symbolWidth;g.symbol=this.chart.renderer.rect(b?(d.symbolWidth-_)/2:0,d.baseline-_+1,C,_,oN(d.options.symbolRadius,_/2)).addClass("highcharts-point").attr({zIndex:3}).add(g.group)}})(v||(v={}));let aN=v,{defaultOptions:lN}=_n,{extend:vj,extendClass:_j,merge:bj}=Mt;(function(M){function l(d,f){let g=lN.plotOptions||{},y=f.defaultOptions,_=f.prototype;return _.type=d,_.pointClass||(_.pointClass=vs),!M.seriesTypes[d]&&(y&&(g[d]=y),M.seriesTypes[d]=f,!0)}M.seriesTypes=K.seriesTypes,M.registerSeriesType=l,M.seriesType=function(d,f,g,y,_){let b=lN.plotOptions||{};if(f=f||"",b[d]=bj(b[f],g),delete M.seriesTypes[d],l(d,_j(M.seriesTypes[f]||function(){},y)),M.seriesTypes[d].prototype.type=d,_){class C extends vs{}vj(C.prototype,_),M.seriesTypes[d].prototype.pointClass=C}return M.seriesTypes[d]}})(x||(x={}));let qr=x,{animObject:cN,setAnimation:xj}=Gr,{defaultOptions:Xb}=_n,{registerEventOptions:wj}=ha,{svg:Cj,win:Sj}=K,{seriesTypes:Hm}=qr,{format:Mj}=Fi,{arrayMax:JE,arrayMin:uN,clamp:dN,correctFloat:hN,crisp:Ej,defined:_s,destroyObjectProperties:Tj,diffObjects:Aj,erase:fN,error:Yb,extend:jm,find:Dj,fireEvent:Or,getClosestDistance:Ij,getNestedProperty:pN,insertItem:mN,isArray:gN,isNumber:Ns,isString:Pj,merge:F0,objectEach:eT,pick:Fr,removeEvent:Rj,syncTimeout:yN}=Mt;class fc{constructor(){this.zoneAxis="y"}init(l,d){let f;Or(this,"init",{options:d}),this.dataTable??(this.dataTable=new qb);let g=l.series;this.eventsToUnbind=[],this.chart=l,this.options=this.setOptions(d);let y=this.options,_=y.visible!==!1;this.linkedSeries=[],this.bindAxes(),jm(this,{name:y.name,state:"",visible:_,selected:y.selected===!0}),wj(this,y),(y.events?.click||y.point?.events?.click||y.allowPointSelect)&&(l.runTrackerClick=!0),this.getColor(),this.getSymbol(),this.isCartesian&&(l.hasCartesianSeries=!0),g.length&&(f=g[g.length-1]),this._i=Fr(f?._i,-1)+1,this.opacity=this.options.opacity,l.orderItems("series",mN(this,g)),y.dataSorting?.enabled?this.setDataSortingOptions():this.points||this.data||this.setData(y.data,!1),Or(this,"afterInit")}is(l){return Hm[l]&&this instanceof Hm[l]}bindAxes(){let l,d=this,f=d.options,g=d.chart;Or(this,"bindAxes",null,function(){(d.axisTypes||[]).forEach(function(y){(g[y]||[]).forEach(function(_){l=_.options,(Fr(f[y],0)===_.index||f[y]!==void 0&&f[y]===l.id)&&(mN(d,_.series),d[y]=_,_.isDirty=!0)}),d[y]||d.optionalAxis===y||Yb(18,!0,g)})}),Or(this,"afterBindAxes")}hasData(){return this.visible&&this.dataMax!==void 0&&this.dataMin!==void 0||this.visible&&this.dataTable.rowCount>0}hasMarkerChanged(l,d){let f=l.marker,g=d.marker||{};return f&&(g.enabled&&!f.enabled||g.symbol!==f.symbol||g.height!==f.height||g.width!==f.width)}autoIncrement(l){let d,f=this.options,{pointIntervalUnit:g,relativeXValue:y}=this.options,_=this.chart.time,b=this.xIncrement??_.parse(f.pointStart)??0;if(this.pointInterval=d=Fr(this.pointInterval,f.pointInterval,1),y&&Ns(l)&&(d*=l),g){let C=_.toParts(b);g==="day"?C[2]+=d:g==="month"?C[1]+=d:g==="year"&&(C[0]+=d),d=_.makeTime.apply(_,C)-b}return y&&Ns(l)?b+d:(this.xIncrement=b+d,b)}setDataSortingOptions(){let l=this.options;jm(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),_s(l.pointRange)||(l.pointRange=1)}setOptions(l){let d,f=this.chart,g=f.options.plotOptions,y=f.userOptions||{},_=F0(l),b=f.styledMode,C={plotOptions:g,userOptions:_};Or(this,"setOptions",C);let A=C.plotOptions[this.type],R=y.plotOptions||{},I=R.series||{},F=Xb.plotOptions[this.type]||{},U=R[this.type]||{};A.dataLabels=this.mergeArrays(F.dataLabels,A.dataLabels),this.userOptions=C.userOptions;let H=F0(A,g.series,U,_);this.tooltipOptions=F0(Xb.tooltip,Xb.plotOptions.series?.tooltip,F?.tooltip,f.userOptions.tooltip,R.series?.tooltip,U.tooltip,_.tooltip),this.stickyTracking=Fr(_.stickyTracking,U.stickyTracking,I.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||H.stickyTracking),A.marker===null&&delete H.marker,this.zoneAxis=H.zoneAxis||"y";let $=this.zones=(H.zones||[]).map(X=>Ke({},X));return(H.negativeColor||H.negativeFillColor)&&!H.zones&&(d={value:H[this.zoneAxis+"Threshold"]||H.threshold||0,className:"highcharts-negative"},b||(d.color=H.negativeColor,d.fillColor=H.negativeFillColor),$.push(d)),$.length&&_s($[$.length-1].value)&&$.push(b?{}:{color:this.color,fillColor:this.fillColor}),Or(this,"afterSetOptions",{options:H}),H}getName(){return this.options.name??Mj(this.chart.options.lang.seriesName,this,this.chart)}getCyclic(l,d,f){let g,y,_=this.chart,b=`${l}Index`,C=`${l}Counter`,A=f?.length||_.options.chart.colorCount;!d&&(_s(y=Fr(l==="color"?this.options.colorIndex:void 0,this[b]))?g=y:(_.series.length||(_[C]=0),g=_[C]%A,_[C]+=1),f&&(d=f[g])),g!==void 0&&(this[b]=g),this[l]=d}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||Xb.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let l=this.options.marker;this.getCyclic("symbol",l.symbol,this.chart.options.symbols)}getColumn(l,d){return(d?this.dataTable.modified:this.dataTable).getColumn(l,!0)||[]}findPointIndex(l,d){let f,g,y,{id:_,x:b}=l,C=this.points,A=this.options.dataSorting,R=this.cropStart||0;if(_){let I=this.chart.get(_);I instanceof vs&&(f=I)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let I=F=>!F.touched&&F.index===l.index;if(A?.matchByName?I=F=>!F.touched&&F.name===l.name:this.options.relativeXValue&&(I=F=>!F.touched&&F.options.x===l.x),!(f=Dj(C,I)))return}return f&&(y=f?.index)!==void 0&&(g=!0),y===void 0&&Ns(b)&&(y=this.getColumn("x").indexOf(b,d)),y!==-1&&y!==void 0&&this.cropped&&(y=y>=R?y-R:y),!g&&Ns(y)&&C[y]?.touched&&(y=void 0),y}updateData(l,d){let{options:f,requireSorting:g}=this,y=f.dataSorting,_=this.points,b=[],C=l.length===_.length,A,R,I,F,U=!0;if(this.xIncrement=null,l.forEach(($,X)=>{let q,ie=_s($)&&this.pointClass.prototype.optionsToObject.call({series:this},$)||{},{id:ae,x:pe}=ie;ae||Ns(pe)?((q=this.findPointIndex(ie,F))===-1||q===void 0?b.push($):_[q]&&$!==f.data?.[q]?(_[q].update($,!1,void 0,!1),_[q].touched=!0,g&&(F=q+1)):_[q]&&(_[q].touched=!0),(!C||X!==q||y?.enabled||this.hasDerivedData)&&(A=!0)):b.push($)},this),A)for(R=_.length;R--;)(I=_[R])&&!I.touched&&I.remove?.(!1,d);else C&&!y?.enabled?(l.forEach(($,X)=>{$===_[X].y||_[X].destroyed||_[X].update($,!1,void 0,!1)}),b.length=0):U=!1;if(_.forEach($=>{$&&($.touched=!1)}),!U)return!1;b.forEach($=>{this.addPoint($,!1,void 0,void 0,!1)},this);let H=this.getColumn("x");return this.xIncrement===null&&H.length&&(this.xIncrement=JE(H),this.autoIncrement()),!0}dataColumnKeys(){return["x",...this.pointArrayMap||["y"]]}setData(l,d=!0,f,g){let y=this.points,_=y?.length||0,b=this.options,C=this.chart,A=b.dataSorting,R=this.xAxis,I=b.turboThreshold,F=this.dataTable,U=this.dataColumnKeys(),H=this.pointValKey||"y",$=(this.pointArrayMap||[]).length,X=b.keys,q,ie,ae=0,pe=1,ke;C.options.chart.allowMutatingData||(b.data&&delete this.options.data,this.userOptions.data&&delete this.userOptions.data,ke=F0(!0,l));let Te=(l=ke||l||[]).length;if(A?.enabled&&(l=this.sortData(l)),C.options.chart.allowMutatingData&&g!==!1&&Te&&_&&!this.cropped&&!this.hasGroupedData&&this.visible&&!this.boosted&&(ie=this.updateData(l,f)),!ie){this.xIncrement=null,this.colorCounter=0;let Se=I&&!b.relativeXValue&&Te>I;if(Se){let De=this.getFirstValidPoint(l),Ye=this.getFirstValidPoint(l,Te-1,-1),Je=st=>!!(gN(st)&&(X||Ns(st[0])));if(Ns(De)&&Ns(Ye)){let st=[],Gt=[];for(let xn of l)st.push(this.autoIncrement()),Gt.push(xn);F.setColumns({x:st,[H]:Gt})}else if(Je(De)&&Je(Ye))if($){let st=+(De.length===$),Gt=Array(U.length).fill(0).map(()=>[]);for(let xn of l){st&&Gt[0].push(this.autoIncrement());for(let Cn=st;Cn<=$;Cn++)Gt[Cn]?.push(xn[Cn-st])}F.setColumns(U.reduce((xn,Cn,Xt)=>(xn[Cn]=Gt[Xt],xn),{}))}else{X&&(ae=X.indexOf("x"),pe=X.indexOf("y"),ae=ae>=0?ae:0,pe=pe>=0?pe:1),De.length===1&&(pe=0);let st=[],Gt=[];if(ae===pe)for(let xn of l)st.push(this.autoIncrement()),Gt.push(xn[pe]);else for(let xn of l)st.push(xn[ae]),Gt.push(xn[pe]);F.setColumns({x:st,[H]:Gt})}else Se=!1}if(!Se){let De=U.reduce((Ye,Je)=>(Ye[Je]=[],Ye),{});for(q=0;q<Te;q++){let Ye=this.pointClass.prototype.applyOptions.apply({series:this},[l[q]]);for(let Je of U)De[Je][q]=Ye[Je]}F.setColumns(De)}for(Pj(this.getColumn("y")[0])&&Yb(14,!0,C),this.data=[],this.options.data=this.userOptions.data=l,q=_;q--;)y[q]?.destroy();R&&(R.minRange=R.userMinRange),this.isDirty=C.isDirtyBox=!0,this.isDirtyData=!!y,f=!1}b.legendType==="point"&&(this.processData(),this.generatePoints()),d&&C.redraw(f)}sortData(l){let d=this,f=d.options.dataSorting.sortKey||"y",g=function(y,_){return _s(_)&&y.pointClass.prototype.optionsToObject.call({series:y},_)||{}};return l.forEach(function(y,_){l[_]=g(d,y),l[_].index=_},this),l.concat().sort((y,_)=>{let b=pN(f,y),C=pN(f,_);return C<b?-1:+(C>b)}).forEach(function(y,_){y.x=_},this),d.linkedSeries&&d.linkedSeries.forEach(function(y){let _=y.options,b=_.data;!_.dataSorting?.enabled&&b&&(b.forEach(function(C,A){b[A]=g(y,C),l[A]&&(b[A].x=l[A].x,b[A].index=A)}),y.setData(b,!1))}),l}getProcessedData(l){let d=this,{dataTable:f,isCartesian:g,options:y,xAxis:_}=d,b=y.cropThreshold,C=l||d.getExtremesFromAll,A=_?.logarithmic,R=f.rowCount,I,F,U=0,H,$,X,q=d.getColumn("x"),ie=f,ae=!1;return _&&($=(H=_.getExtremes()).min,X=H.max,ae=!!(_.categories&&!_.names.length),g&&d.sorted&&!C&&(!b||R>b||d.forceCrop)&&(q[R-1]<$||q[0]>X?ie=new qb:d.getColumn(d.pointValKey||"y").length&&(q[0]<$||q[R-1]>X)&&(ie=(I=this.cropData(f,$,X)).modified,U=I.start,F=!0))),q=ie.getColumn("x")||[],{modified:ie,cropped:F,cropStart:U,closestPointRange:Ij([A?q.map(A.log2lin):q],()=>d.requireSorting&&!ae&&Yb(15,!1,d.chart))}}processData(l){let d=this.xAxis,f=this.dataTable;if(this.isCartesian&&!this.isDirty&&!d.isDirty&&!this.yAxis.isDirty&&!l)return!1;let g=this.getProcessedData();f.modified=g.modified,this.cropped=g.cropped,this.cropStart=g.cropStart,this.closestPointRange=this.basePointRange=g.closestPointRange,Or(this,"afterProcessData")}cropData(l,d,f){let g=l.getColumn("x",!0)||[],y=g.length,_={},b,C,A=0,R=y;for(b=0;b<y;b++)if(g[b]>=d){A=Math.max(0,b-1);break}for(C=b;C<y;C++)if(g[C]>f){R=C+1;break}for(let I of this.dataColumnKeys()){let F=l.getColumn(I,!0);F&&(_[I]=F.slice(A,R))}return{modified:new qb({columns:_}),start:A,end:R}}generatePoints(){let l=this.options,d=this.processedData||l.data,f=this.dataTable.modified,g=this.getColumn("x",!0),y=this.pointClass,_=f.rowCount,b=this.cropStart||0,C=this.hasGroupedData,A=l.keys,R=[],I=l.dataGrouping?.groupAll?b:0,F=this.xAxis?.categories,U=this.pointArrayMap||["y"],H=this.dataColumnKeys(),$,X,q,ie,ae=this.data,pe;if(!ae&&!C){let ke=[];ke.length=d?.length||0,ae=this.data=ke}for(A&&C&&(this.options.keys=!1),ie=0;ie<_;ie++)X=b+ie,C?((q=new y(this,f.getRow(ie,H)||[])).dataGroup=this.groupMap[I+ie],q.dataGroup?.options&&(q.options=q.dataGroup.options,jm(q,q.dataGroup.options),delete q.dataLabels)):(q=ae[X],pe=d?d[X]:f.getRow(ie,U),q||pe===void 0||(ae[X]=q=new y(this,pe,g[ie]))),q&&(q.index=C?I+ie:X,R[ie]=q,q.category=F?.[q.x]??q.x,q.key=q.name??q.category);if(this.options.keys=A,ae&&(_!==($=ae.length)||C))for(ie=0;ie<$;ie++)ie!==b||C||(ie+=_),ae[ie]&&(ae[ie].destroyElements(),ae[ie].plotX=void 0);this.data=ae,this.points=R,Or(this,"afterGeneratePoints")}getXExtremes(l){return{min:uN(l),max:JE(l)}}getExtremes(l,d){let{xAxis:f,yAxis:g}=this,y=d||this.getExtremesFromAll||this.options.getExtremesFromAll,_=y&&this.cropped?this.dataTable:this.dataTable.modified,b=_.rowCount,C=l||this.stackedYData,A=C?[C]:(this.keysAffectYAxis||this.pointArrayMap||["y"])?.map(ke=>_.getColumn(ke,!0)||[])||[],R=this.getColumn("x",!0),I=[],F=this.requireSorting&&!this.is("column")?1:0,U=!!g&&g.positiveValuesOnly,H=y||this.cropped||!f,$,X,q,ie=0,ae=0;for(f&&(ie=($=f.getExtremes()).min,ae=$.max),q=0;q<b;q++)if(X=R[q],H||(R[q+F]||X)>=ie&&(R[q-F]||X)<=ae)for(let ke of A){let Te=ke[q];Ns(Te)&&(Te>0||!U)&&I.push(Te)}let pe={activeYData:I,dataMin:uN(I),dataMax:JE(I)};return Or(this,"afterGetExtremes",{dataExtremes:pe}),pe}applyExtremes(){let l=this.getExtremes();return this.dataMin=l.dataMin,this.dataMax=l.dataMax,l}getFirstValidPoint(l,d=0,f=1){let g=l.length,y=d;for(;y>=0&&y<g;){if(_s(l[y]))return l[y];y+=f}}translate(){this.generatePoints();let l=this.options,d=l.stacking,f=this.xAxis,g=this.enabledDataSorting,y=this.yAxis,_=this.points,b=_.length,C=this.pointPlacementToXValue(),A=!!C,R=l.threshold,I=l.startFromThreshold?R:0,F=l?.nullInteraction&&y.len,U,H,$,X,q=Number.MAX_VALUE;function ie(ae){return dN(ae,-1e9,1e9)}for(U=0;U<b;U++){let ae,pe=_[U],ke=pe.x,Te,Se,De=pe.y,Ye=pe.low,Je=d&&y.stacking?.stacks[(this.negStacks&&De<(I?0:R)?"-":"")+this.stackKey];pe.plotX=Ns(H=f.translate(ke,!1,!1,!1,!0,C))?hN(ie(H)):void 0,d&&this.visible&&Je&&Je[ke]&&(X=this.getStackIndicator(X,ke,this.index),!pe.isNull&&X.key&&(Se=(Te=Je[ke]).points[X.key]),Te&&gN(Se)&&(Ye=Se[0],De=Se[1],Ye===I&&X.key===Je[ke].base&&(Ye=Fr(Ns(R)?R:y.min)),y.positiveValuesOnly&&_s(Ye)&&Ye<=0&&(Ye=void 0),pe.total=pe.stackTotal=Fr(Te.total),pe.percentage=_s(pe.y)&&Te.total?pe.y/Te.total*100:void 0,pe.stackY=De,this.irregularWidths||Te.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),pe.yBottom=_s(Ye)?ie(y.translate(Ye,!1,!0,!1,!0)):void 0,this.dataModify&&(De=this.dataModify.modifyValue(De,U)),Ns(De)&&pe.plotX!==void 0?ae=Ns(ae=y.translate(De,!1,!0,!1,!0))?ie(ae):void 0:!Ns(De)&&F&&(ae=F),pe.plotY=ae,pe.isInside=this.isPointInside(pe),pe.clientX=A?hN(f.translate(ke,!1,!1,!1,!0,C)):H,pe.negative=(pe.y||0)<(R||0),pe.isNull||pe.visible===!1||($!==void 0&&(q=Math.min(q,Math.abs(H-$))),$=H),pe.zone=this.zones.length?pe.getZone():void 0,!pe.graphic&&this.group&&g&&(pe.isNew=!0)}this.closestPointRangePx=q,Or(this,"afterTranslate")}getValidPoints(l,d,f){let g=this.chart;return(l||this.points||[]).filter(function(y){let{plotX:_,plotY:b}=y;return(!!f||!y.isNull&&!!Ns(b))&&(!d||!!g.isInsidePlot(_,b,{inverted:g.inverted}))&&y.visible!==!1})}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:l,group:d,markerGroup:f}=this,g=l.sharedClips,y=l.renderer,_=l.getClipBox(this),b=this.getSharedClipKey(),C=g[b];C?C.animate(_):g[b]=C=y.clipRect(_),d&&d.clip(this.options.clip===!1?void 0:C),f&&f.clip()}animate(l){let{chart:d,group:f,markerGroup:g}=this,y=d.inverted,_=cN(this.options.animation),b=[this.getSharedClipKey(),_.duration,_.easing,_.defer].join(","),C=d.sharedClips[b],A=d.sharedClips[b+"m"];if(l&&f){let R=d.getClipBox(this);if(C)C.attr("height",R.height);else{R.width=0,y&&(R.x=d.plotHeight),C=d.renderer.clipRect(R),d.sharedClips[b]=C;let I={x:-99,y:-99,width:y?d.plotWidth+199:99,height:y?99:d.plotHeight+199};A=d.renderer.clipRect(I),d.sharedClips[b+"m"]=A}f.clip(C),g?.clip(A)}else if(C&&!C.hasClass("highcharts-animating")){let R=d.getClipBox(this),I=_.step;(g?.element.childNodes.length||d.series.length>1)&&(_.step=function(F,U){I&&I.apply(U,arguments),U.prop==="width"&&A?.element&&A.attr(y?"height":"width",F+99)}),C.addClass("highcharts-animating").animate(R,_)}}afterAnimate(){this.setClip(),eT(this.chart.sharedClips,(l,d,f)=>{l&&!this.chart.container.querySelector(`[clip-path="url(#${l.id})"]`)&&(l.destroy(),delete f[d])}),this.finishedAnimating=!0,Or(this,"afterAnimate")}drawPoints(l=this.points){let d,f,g,y,_,b,C,A=this.chart,R=A.styledMode,{colorAxis:I,options:F}=this,U=F.marker,H=F.nullInteraction,$=this[this.specialGroup||"markerGroup"],X=this.xAxis,q=Fr(U.enabled,!X||!!X.isRadial||null,this.closestPointRangePx>=U.enabledThreshold*U.radius);if(U.enabled!==!1||this._hasPointMarkers)for(d=0;d<l.length;d++){y=(g=(f=l[d]).graphic)?"animate":"attr",_=f.marker||{},b=!!f.marker;let ie=f.isNull;if((q&&!_s(_.enabled)||_.enabled)&&(!ie||H)&&f.visible!==!1){let ae=Fr(_.symbol,this.symbol,"rect");C=this.markerAttribs(f,f.selected&&"select"),this.enabledDataSorting&&(f.startXPos=X.reversed?-(C.width||0):X.width);let pe=f.isInside!==!1;if(!g&&pe&&((C.width||0)>0||f.hasImage)&&(f.graphic=g=A.renderer.symbol(ae,C.x,C.y,C.width,C.height,b?_:U).add($),this.enabledDataSorting&&A.hasRendered&&(g.attr({x:f.startXPos}),y="animate")),g&&y==="animate"&&g[pe?"show":"hide"](pe).animate(C),g){let ke=this.pointAttribs(f,R||!f.selected?void 0:"select");R?I&&g.css({fill:ke.fill}):g[y](ke)}g&&g.addClass(f.getClassName(),!0)}else g&&(f.graphic=g.destroy())}}markerAttribs(l,d){let f=this.options,g=f.marker,y=l.marker||{},_=y.symbol||g.symbol,b={},C,A,R=Fr(y.radius,g?.radius);d&&(C=g.states[d],A=y.states&&y.states[d],R=Fr(A?.radius,C?.radius,R&&R+(C?.radiusPlus||0))),l.hasImage=_&&_.indexOf("url")===0,l.hasImage&&(R=0);let I=l.pos();return Ns(R)&&I&&(f.crisp&&(I[0]=Ej(I[0],l.hasImage?0:_==="rect"?g?.lineWidth||0:1)),b.x=I[0]-R,b.y=I[1]-R),R&&(b.width=b.height=2*R),b}pointAttribs(l,d){let f=this.options,g=f.marker,y=l?.options,_=y?.marker||{},b=y?.color,C=l?.color,A=l?.zone?.color,R,I,F=this.color,U,H,$=Fr(_.lineWidth,g.lineWidth),X=l?.isNull&&f.nullInteraction?0:1;return F=b||A||C||F,U=_.fillColor||g.fillColor||F,H=_.lineColor||g.lineColor||F,d=d||"normal",R=g.states[d]||{},$=Fr((I=_.states&&_.states[d]||{}).lineWidth,R.lineWidth,$+Fr(I.lineWidthPlus,R.lineWidthPlus,0)),U=I.fillColor||R.fillColor||U,H=I.lineColor||R.lineColor||H,{stroke:H,"stroke-width":$,fill:U,opacity:X=Fr(I.opacity,R.opacity,X)}}destroy(l){let d,f,g=this,y=g.chart,_=/AppleWebKit\/533/.test(Sj.navigator.userAgent),b=g.data||[];for(Or(g,"destroy",{keepEventsForUpdate:l}),this.removeEvents(l),(g.axisTypes||[]).forEach(function(C){f=g[C],f?.series&&(fN(f.series,g),f.isDirty=f.forceRedraw=!0)}),g.legendItem&&g.chart.legend.destroyItem(g),d=b.length;d--;)b[d]?.destroy?.();for(let C of g.zones)Tj(C,void 0,!0);Mt.clearTimeout(g.animationTimeout),eT(g,function(C,A){C instanceof ca&&!C.survive&&C[_&&A==="group"?"hide":"destroy"]()}),y.hoverSeries===g&&(y.hoverSeries=void 0),fN(y.series,g),y.orderItems("series"),eT(g,function(C,A){l&&A==="hcEvents"||delete g[A]})}applyZones(){let{area:l,chart:d,graph:f,zones:g,points:y,xAxis:_,yAxis:b,zoneAxis:C}=this,{inverted:A,renderer:R}=d,I=this[`${C}Axis`],{isXAxis:F,len:U=0,minPointOffset:H=0}=I||{},$=(f?.strokeWidth()||0)/2+1,X=(q,ie=0,ae=0)=>{A&&(ae=U-ae);let{translated:pe=0,lineClip:ke}=q,Te=ae-pe;ke?.push(["L",ie,Math.abs(Te)<$?ae-$*(Te<=0?-1:1):pe])};if(g.length&&(f||l)&&I&&Ns(I.min)){let q=I.getExtremes().max+H,ie=ke=>{ke.forEach((Te,Se)=>{(Te[0]==="M"||Te[0]==="L")&&(ke[Se]=[Te[0],F?U-Te[1]:Te[1],F?Te[2]:U-Te[2]])})};if(g.forEach(ke=>{ke.lineClip=[],ke.translated=dN(I.toPixels(Fr(ke.value,q),!0)||0,0,U)}),f&&!this.showLine&&f.hide(),l&&l.hide(),C==="y"&&y.length<_.len)for(let ke of y){let{plotX:Te,plotY:Se,zone:De}=ke,Ye=De&&g[g.indexOf(De)-1];De&&X(De,Te,Se),Ye&&X(Ye,Te,Se)}let ae=[],pe=I.toPixels(I.getExtremes().min-H,!0);g.forEach(ke=>{let Te=ke.lineClip||[],Se=Math.round(ke.translated||0);_.reversed&&Te.reverse();let{clip:De,simpleClip:Ye}=ke,Je=0,st=0,Gt=_.len,xn=b.len;F?(Je=Se,Gt=pe):(st=Se,xn=pe);let Cn=[["M",Je,st],["L",Gt,st],["L",Gt,xn],["L",Je,xn],["Z"]],Xt=[Cn[0],...Te,Cn[1],Cn[2],...ae,Cn[3],Cn[4]];ae=Te.reverse(),pe=Se,A&&(ie(Xt),l&&ie(Cn)),De?(De.animate({d:Xt}),Ye?.animate({d:Cn})):(De=ke.clip=R.path(Xt),l&&(Ye=ke.simpleClip=R.path(Cn))),f&&ke.graph?.clip(De),l&&ke.area?.clip(Ye)})}else this.visible&&(f&&f.show(),l&&l.show())}plotGroup(l,d,f,g,y){let _=this[l],b=!_,C={visibility:f,zIndex:g||.1};return _s(this.opacity)&&!this.chart.styledMode&&this.state!=="inactive"&&(C.opacity=this.opacity),_||(this[l]=_=this.chart.renderer.g().add(y)),_.addClass("highcharts-"+d+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(_s(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(_.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),_.attr(C)[b?"attr":"animate"](this.getPlotBox(d)),_}getPlotBox(l){let d=this.xAxis,f=this.yAxis,g=this.chart,y=g.inverted&&!g.polar&&d&&this.invertible&&l==="series";g.inverted&&(d=f,f=this.xAxis);let _={scale:1,translateX:d?d.left:g.plotLeft,translateY:f?f.top:g.plotTop,name:l};Or(this,"getPlotBox",_);let{scale:b,translateX:C,translateY:A}=_;return{translateX:C,translateY:A,rotation:90*!!y,rotationOriginX:y?b*(d.len-f.len)/2:0,rotationOriginY:y?b*(d.len+f.len)/2:0,scaleX:y?-b:b,scaleY:b}}removeEvents(l){let{eventsToUnbind:d}=this;l||Rj(this),d.length&&(d.forEach(f=>{f()}),d.length=0)}render(){let l=this,{chart:d,options:f,hasRendered:g}=l,y=cN(f.animation),_=l.visible?"inherit":"hidden",b=f.zIndex,C=d.seriesGroup,A=l.finishedAnimating?0:y.duration;Or(this,"render"),l.plotGroup("group","series",_,b,C),l.markerGroup=l.plotGroup("markerGroup","markers",_,b,C),f.clip!==!1&&l.setClip(),A&&l.animate?.(!0),l.drawGraph&&(l.drawGraph(),l.applyZones()),l.visible&&l.drawPoints(),l.drawDataLabels?.(),l.redrawPoints?.(),f.enableMouseTracking&&l.drawTracker?.(),A&&l.animate?.(),g||(A&&y.defer&&(A+=y.defer),l.animationTimeout=yN(()=>{l.afterAnimate()},A||0)),l.isDirty=!1,l.hasRendered=!0,Or(l,"afterRender")}redraw(){let l=this.isDirty||this.isDirtyData;this.translate(),this.render(),l&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(l,d){let{xAxis:f,yAxis:g}=this,y=this.chart.inverted;return this.searchKDTree({clientX:y?f.len-l.chartY+f.pos:l.chartX-f.pos,plotY:y?g.len-l.chartX+g.pos:l.chartY-g.pos},d,l)}buildKDTree(l){this.buildingKdTree=!0;let d=this,f=d.options,g=f.findNearestPointBy.indexOf("y")>-1?2:1;delete d.kdTree,yN(function(){d.kdTree=function y(_,b,C){let A,R,I=_?.length;if(I)return A=d.kdAxisArray[b%C],_.sort((F,U)=>(F[A]||0)-(U[A]||0)),{point:_[R=Math.floor(I/2)],left:y(_.slice(0,R),b+1,C),right:y(_.slice(R+1),b+1,C)}}(d.getValidPoints(void 0,!d.directTouch,f?.nullInteraction),g,g),d.buildingKdTree=!1},f.kdNow||l?.type==="touchstart"?0:1)}searchKDTree(l,d,f,g,y){let _=this,[b,C]=this.kdAxisArray,A=d?"distX":"dist",R=(_.options.findNearestPointBy||"").indexOf("y")>-1?2:1,I=!!_.isBubble,F=g||((H,$,X)=>{let q=H[X]||0,ie=$[X]||0;return[q===ie&&H.index>$.index||q<ie?H:$,!1]}),U=y||((H,$)=>H<$);if(this.kdTree||this.buildingKdTree||this.buildKDTree(f),this.kdTree)return function H($,X,q,ie){let ae=X.point,pe=_.kdAxisArray[q%ie],ke=ae,Te=!1;(function(Je,st){let Gt=Je[b],xn=st[b],Cn=_s(Gt)&&_s(xn)?Gt-xn:null,Xt=Je[C],Bt=st[C],cn=_s(Xt)&&_s(Bt)?Xt-Bt:0,Tr=I&&st.marker?.radius||0;st.dist=Math.sqrt((Cn&&Cn*Cn||0)+cn*cn)-Tr,st.distX=_s(Cn)?Math.abs(Cn)-Tr:Number.MAX_VALUE})($,ae);let Se=($[pe]||0)-(ae[pe]||0)+(I&&ae.marker?.radius||0),De=Se<0?"left":"right",Ye=Se<0?"right":"left";return X[De]&&([ke,Te]=F(ae,H($,X[De],q+1,ie),A)),X[Ye]&&U(Math.sqrt(Se*Se),ke[A],Te)&&(ke=F(ke,H($,X[Ye],q+1,ie),A)[0]),ke}(l,this.kdTree,R,R)}pointPlacementToXValue(){let{options:l,xAxis:d}=this,f=l.pointPlacement;return f==="between"&&(f=d.reversed?-.5:.5),Ns(f)?f*(l.pointRange||d.pointRange):0}isPointInside(l){let{chart:d,xAxis:f,yAxis:g}=this,{plotX:y=-1,plotY:_=-1}=l;return _>=0&&_<=(g?g.len:d.plotHeight)&&y>=0&&y<=(f?f.len:d.plotWidth)}drawTracker(){let l=this,d=l.options,f=d.trackByArea,g=[].concat((f?l.areaPath:l.graphPath)||[]),y=l.chart,_=y.pointer,b=y.renderer,C=y.options.tooltip?.snap||0,A=()=>{d.enableMouseTracking&&y.hoverSeries!==l&&l.onMouseOver()},R="rgba(192,192,192,"+(Cj?1e-4:.002)+")",I=l.tracker;I?I.attr({d:g}):l.graph&&(l.tracker=I=b.path(g).attr({visibility:l.visible?"inherit":"hidden",zIndex:2}).addClass(f?"highcharts-tracker-area":"highcharts-tracker-line").add(l.group),y.styledMode||I.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:R,fill:f?R:"none","stroke-width":l.graph.strokeWidth()+(f?0:2*C)}),[l.tracker,l.markerGroup,l.dataLabelsGroup].forEach(F=>{F&&(F.addClass("highcharts-tracker").on("mouseover",A).on("mouseout",U=>{_?.onTrackerMouseOut(U)}),d.cursor&&!y.styledMode&&F.css({cursor:d.cursor}),F.on("touchstart",A))})),Or(this,"afterDrawTracker")}addPoint(l,d,f,g,y){let _,b,C=this.options,{chart:A,data:R,dataTable:I,xAxis:F}=this,U=F?.hasNames&&F.names,H=C.data,$=this.getColumn("x");d=Fr(d,!0);let X={series:this};this.pointClass.prototype.applyOptions.apply(X,[l]);let q=X.x;if(b=$.length,this.requireSorting&&q<$[b-1])for(_=!0;b&&$[b-1]>q;)b--;I.setRow(X,b,!0,{addColumns:!1}),U&&X.name&&(U[q]=X.name),H?.splice(b,0,l),(_||this.processedData)&&(this.data.splice(b,0,null),this.processData()),C.legendType==="point"&&this.generatePoints(),f&&(R[0]&&R[0].remove?R[0].remove(!1):([R,H].filter(_s).forEach(ie=>{ie.shift()}),I.deleteRows(0))),y!==!1&&Or(this,"addPoint",{point:X}),this.isDirty=!0,this.isDirtyData=!0,d&&A.redraw(g)}removePoint(l,d,f){let g=this,{chart:y,data:_,points:b,dataTable:C}=g,A=_[l],R=function(){[b?.length===_.length?b:void 0,_,g.options.data].filter(_s).forEach(I=>{I.splice(l,1)}),C.deleteRows(l),A?.destroy(),g.isDirty=!0,g.isDirtyData=!0,d&&y.redraw()};xj(f,y),d=Fr(d,!0),A?A.firePointEvent("remove",null,R):R()}remove(l,d,f,g){let y=this,_=y.chart;function b(){y.destroy(g),_.isDirtyLegend=_.isDirtyBox=!0,_.linkSeries(g),Fr(l,!0)&&_.redraw(d)}f!==!1?Or(y,"remove",null,b):b()}update(l,d){Or(this,"update",{options:l=Aj(l,this.userOptions)});let f=this,g=f.chart,y=f.userOptions,_=f.initialType||f.type,b=g.options.plotOptions,C=Hm[_].prototype,A=f.finishedAnimating&&{animation:!1},R={},I,F,U=fc.keepProps.slice(),H=l.type||y.type||g.options.chart.type,$=!(this.hasDerivedData||H&&H!==this.type||l.keys!==void 0||l.pointStart!==void 0||l.pointInterval!==void 0||l.relativeXValue!==void 0||l.joinBy||l.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some(q=>f.hasOptionChanged(q)));H=H||_,$?(U.push.apply(U,fc.keepPropsForPoints),l.visible!==!1&&U.push("area","graph"),f.parallelArrays.forEach(function(q){U.push(q+"Data")}),l.data&&(l.dataSorting&&jm(f.options.dataSorting,l.dataSorting),this.setData(l.data,!1))):this.dataTable.modified=this.dataTable,l=F0(y,{index:y.index===void 0?f.index:y.index,pointStart:b?.series?.pointStart??y.pointStart??f.getColumn("x")[0]},!$&&{data:f.options.data},l,A),$&&l.data&&(l.data=f.options.data),(U=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(U)).forEach(function(q){U[q]=f[q],delete f[q]});let X=!1;if(Hm[H]){if(X=H!==f.type,f.remove(!1,!1,!1,!0),X)if(g.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(f,Hm[H].prototype);else{let q=Object.hasOwnProperty.call(f,"hcEvents")&&f.hcEvents;for(F in C)f[F]=void 0;jm(f,Hm[H].prototype),q?f.hcEvents=q:delete f.hcEvents}}else Yb(17,!0,g,{missingModuleFor:H});if(U.forEach(function(q){f[q]=U[q]}),f.init(g,l),$&&this.points)for(let q of((I=f.options).visible===!1?(R.graphic=1,R.dataLabel=1):(this.hasMarkerChanged(I,y)&&(R.graphic=1),f.hasDataLabels?.()||(R.dataLabel=1)),this.points))q?.series&&(q.resolveColor(),Object.keys(R).length&&q.destroyElements(R),I.showInLegend===!1&&q.legendItem&&g.legend.destroyItem(q));f.initialType=_,g.linkSeries(),g.setSortedData(),X&&f.linkedSeries.length&&(f.isDirtyData=!0),Or(this,"afterUpdate"),Fr(d,!0)&&g.redraw(!!$&&void 0)}setName(l){this.name=this.options.name=this.userOptions.name=l,this.chart.isDirtyLegend=!0}hasOptionChanged(l){let d=this.chart,f=this.options[l],g=d.options.plotOptions,y=this.userOptions[l],_=Fr(g?.[this.type]?.[l],g?.series?.[l]);return y&&!_s(_)?f!==y:f!==Fr(_,f)}onMouseOver(){let l=this.chart,d=l.hoverSeries;l.pointer?.setHoverChartIndex(),d&&d!==this&&d.onMouseOut(),this.options.events.mouseOver&&Or(this,"mouseOver"),this.setState("hover"),l.hoverSeries=this}onMouseOut(){let l=this.options,d=this.chart,f=d.tooltip,g=d.hoverPoint;d.hoverSeries=null,g&&g.onMouseOut(),this&&l.events.mouseOut&&Or(this,"mouseOut"),f&&!this.stickyTracking&&(!f.shared||this.noSharedTooltip)&&f.hide(),d.series.forEach(function(y){y.setState("",!0)})}setState(l,d){let f=this,g=f.options,y=f.graph,_=g.inactiveOtherPoints,b=g.states,C=Fr(b[l||"normal"]&&b[l||"normal"].animation,f.chart.options.chart.animation),A=g.lineWidth,R=g.opacity;if(l=l||"",f.state!==l&&([f.group,f.markerGroup,f.dataLabelsGroup].forEach(function(I){I&&(f.state&&I.removeClass("highcharts-series-"+f.state),l&&I.addClass("highcharts-series-"+l))}),f.state=l,!f.chart.styledMode)){if(b[l]&&b[l].enabled===!1)return;if(l&&(A=b[l].lineWidth||A+(b[l].lineWidthPlus||0),R=Fr(b[l].opacity,R)),y&&!y.dashstyle&&Ns(A))for(let I of[y,...this.zones.map(F=>F.graph)])I?.animate({"stroke-width":A},C);_||[f.group,f.markerGroup,f.dataLabelsGroup,f.labelBySeries].forEach(function(I){I&&I.animate({opacity:R},C)})}d&&_&&f.points&&f.setAllPointsToState(l||void 0)}setAllPointsToState(l){this.points.forEach(function(d){d.setState&&d.setState(l)})}setVisible(l,d){let f=this,g=f.chart,y=g.options.chart.ignoreHiddenSeries,_=f.visible;f.visible=l=f.options.visible=f.userOptions.visible=l===void 0?!_:l;let b=l?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(C=>{f[C]?.[b]()}),(g.hoverSeries===f||g.hoverPoint?.series===f)&&f.onMouseOut(),f.legendItem&&g.legend.colorizeItem(f,l),f.isDirty=!0,f.options.stacking&&g.series.forEach(C=>{C.options.stacking&&C.visible&&(C.isDirty=!0)}),f.linkedSeries.forEach(C=>{C.setVisible(l,!1)}),y&&(g.isDirtyBox=!0),Or(f,b),d!==!1&&g.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(l){this.selected=l=this.options.selected=l===void 0?!this.selected:l,this.checkbox&&(this.checkbox.checked=l),Or(this,l?"select":"unselect")}shouldShowTooltip(l,d,f={}){return f.series=this,f.visiblePlotOnly=!0,this.chart.isInsidePlot(l,d,f)}drawLegendSymbol(l,d){aN[this.options.legendSymbol||"rectangle"]?.call(this,l,d)}}fc.defaultOptions={lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:M}=this.series.chart;return typeof this.y!="number"?"":M(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"},fc.types=qr.seriesTypes,fc.registerType=qr.registerSeriesType,fc.keepProps=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],fc.keepPropsForPoints=["data","isDirtyData","isDirtyCanvas","points","dataTable","processedData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"],jm(fc.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:vs,requireSorting:!0,sorted:!0}),qr.series=fc;let Ya=fc,{animObject:kj,setAnimation:Lj}=Gr,{registerEventOptions:vN}=ha,{composed:Nj,marginNames:_N}=K,{distribute:Oj}=Ql,{format:Fj}=Fi,{addEvent:Zb,createElement:Bj,css:Vj,defined:tT,discardElement:Uj,find:zj,fireEvent:rd,isNumber:bN,merge:Lf,pick:wl,pushUnique:Hj,relativeLength:jj,stableSort:Wj,syncTimeout:Gj}=Mt;class nT{constructor(l,d){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=l,this.setOptions(d),d.enabled&&(this.render(),vN(this,d),Zb(this.chart,"endResize",function(){this.legend.positionCheckboxes()})),Zb(this.chart,"render",()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())})}setOptions(l){let d=wl(l.padding,8);this.options=l,this.chart.styledMode||(this.itemStyle=l.itemStyle,this.itemHiddenStyle=Lf(this.itemStyle,l.itemHiddenStyle)),this.itemMarginTop=l.itemMarginTop,this.itemMarginBottom=l.itemMarginBottom,this.padding=d,this.initialItemY=d-5,this.symbolWidth=wl(l.symbolWidth,16),this.pages=[],this.proximate=l.layout==="proximate"&&!this.chart.inverted,this.baseline=void 0}update(l,d){let f=this.chart;this.setOptions(Lf(!0,this.options,l)),"events"in this.options&&vN(this,this.options),this.destroy(),f.isDirtyLegend=f.isDirtyBox=!0,wl(d,!0)&&f.redraw(),rd(this,"afterUpdate",{redraw:d})}colorizeItem(l,d){let f=l.color,{area:g,group:y,label:_,line:b,symbol:C}=l.legendItem||{};if((l instanceof Ya||l instanceof vs)&&(l.color=l.options?.legendSymbolColor||f),y?.[d?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:A={}}=this,R=A.color,{fillColor:I,fillOpacity:F,lineColor:U,marker:H}=l.options,$=X=>(!d&&(X.fill&&(X.fill=R),X.stroke&&(X.stroke=R)),X);_?.css(Lf(d?this.itemStyle:A)),b?.attr($({stroke:U||l.color})),C&&C.attr($(H&&C.isMarker?l.pointAttribs():{fill:l.color})),g?.attr($({fill:I||l.color,"fill-opacity":I?1:F??.75}))}l.color=f,rd(this,"afterColorizeItem",{item:l,visible:d})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(l){let{group:d,x:f=0,y:g=0}=l.legendItem||{},y=this.options,_=y.symbolPadding,b=!y.rtl,C=l.checkbox;if(d?.element){let A={translateX:b?f:this.legendWidth-f-2*_-4,translateY:g};d[tT(d.translateY)?"animate":"attr"](A,void 0,()=>{rd(this,"afterPositionItem",{item:l})})}C&&(C.x=f,C.y=g)}destroyItem(l){let d=l.checkbox,f=l.legendItem||{};for(let g of["group","label","line","symbol"])f[g]&&(f[g]=f[g].destroy());d&&Uj(d),l.legendItem=void 0}destroy(){for(let l of this.getAllItems())this.destroyItem(l);for(let l of["clipRect","up","down","pager","nav","box","title","group"])this[l]&&(this[l]=this[l].destroy());this.display=null}positionCheckboxes(){let l,d=this.group?.alignAttr,f=this.clipHeight||this.legendHeight,g=this.titleHeight;d&&(l=d.translateY,this.allItems.forEach(function(y){let _,b=y.checkbox;b&&(_=l+g+b.y+(this.scrollOffset||0)+3,Vj(b,{left:d.translateX+y.checkboxOffset+b.x-20+"px",top:_+"px",display:this.proximate||_>l-6&&_<l+f-6?"":"none"}))},this))}renderTitle(){let l=this.options,d=this.padding,f=l.title,g,y=0;f.text&&(this.title||(this.title=this.chart.renderer.label(f.text,d-3,d-4,void 0,void 0,void 0,l.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(f.style),this.title.add(this.group)),f.width||this.title.css({width:this.maxLegendWidth+"px"}),y=(g=this.title.getBBox()).height,this.offsetWidth=g.width,this.contentGroup.attr({translateY:y})),this.titleHeight=y}setText(l){let d=this.options;l.legendItem.label.attr({text:d.labelFormat?Fj(d.labelFormat,l,this.chart):d.labelFormatter.call(l)})}renderItem(l){let d=l.legendItem=l.legendItem||{},f=this.chart,g=f.renderer,y=this.options,_=y.layout==="horizontal",b=this.symbolWidth,C=y.symbolPadding||0,A=this.itemStyle,R=this.itemHiddenStyle,I=_?wl(y.itemDistance,20):0,F=!y.rtl,U=!l.series,H=!U&&l.series.drawLegendSymbol?l.series:l,$=H.options,X=!!this.createCheckboxForItem&&$&&$.showCheckbox,q=y.useHTML,ie=l.options.className,ae=d.label,pe=b+C+I+20*!!X;!ae&&(d.group=g.g("legend-item").addClass("highcharts-"+H.type+"-series highcharts-color-"+l.colorIndex+(ie?" "+ie:"")+(U?" highcharts-series-"+l.index:"")).attr({zIndex:1}).add(this.scrollGroup),d.label=ae=g.text("",F?b+C:-C,this.baseline||0,q),f.styledMode||ae.css(Lf(l.visible?A:R)),ae.attr({align:F?"left":"right",zIndex:2}).add(d.group),!this.baseline&&(this.fontMetrics=g.fontMetrics(ae),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,ae.attr("y",this.baseline),this.symbolHeight=wl(y.symbolHeight,this.fontMetrics.f),y.squareSymbol&&(this.symbolWidth=wl(y.symbolWidth,Math.max(this.symbolHeight,16)),pe=this.symbolWidth+C+I+20*!!X,F&&ae.attr("x",this.symbolWidth+C))),H.drawLegendSymbol(this,l),this.setItemEvents&&this.setItemEvents(l,ae,q)),X&&!l.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(l),this.colorizeItem(l,l.visible),(f.styledMode||!A.width)&&ae.css({width:(y.itemWidth||this.widthOption||f.spacingBox.width)-pe+"px"}),this.setText(l);let ke=ae.getBBox(),Te=this.fontMetrics?.h||0;l.itemWidth=l.checkboxOffset=y.itemWidth||d.labelWidth||ke.width+pe,this.maxItemWidth=Math.max(this.maxItemWidth,l.itemWidth),this.totalItemWidth+=l.itemWidth,this.itemHeight=l.itemHeight=Math.round(d.labelHeight||(ke.height>1.5*Te?ke.height:Te))}layoutItem(l){let d=this.options,f=this.padding,g=d.layout==="horizontal",y=l.itemHeight,_=this.itemMarginBottom,b=this.itemMarginTop,C=g?wl(d.itemDistance,20):0,A=this.maxLegendWidth,R=d.alignColumns&&this.totalItemWidth>A?this.maxItemWidth:l.itemWidth,I=l.legendItem||{};g&&this.itemX-f+R>A&&(this.itemX=f,this.lastLineHeight&&(this.itemY+=b+this.lastLineHeight+_),this.lastLineHeight=0),this.lastItemY=b+this.itemY+_,this.lastLineHeight=Math.max(y,this.lastLineHeight),I.x=this.itemX,I.y=this.itemY,g?this.itemX+=R:(this.itemY+=b+y+_,this.lastLineHeight=y),this.offsetWidth=this.widthOption||Math.max((g?this.itemX-f-(l.checkbox?0:C):R)+f,this.offsetWidth)}getAllItems(){let l=[];return this.chart.series.forEach(function(d){let f=d?.options;d&&wl(f.showInLegend,!tT(f.linkedTo)&&void 0,!0)&&(l=l.concat(d.legendItem?.labels||(f.legendType==="point"?d.data:d)))}),rd(this,"afterGetAllItems",{allItems:l}),l}getAlignment(){let l=this.options;return this.proximate?l.align.charAt(0)+"tv":l.floating?"":l.align.charAt(0)+l.verticalAlign.charAt(0)+l.layout.charAt(0)}adjustMargins(l,d){let f=this.chart,g=this.options,y=this.getAlignment();y&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(_,b){_.test(y)&&!tT(l[b])&&(f[_N[b]]=Math.max(f[_N[b]],f.legend[(b+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][b]*g[b%2?"x":"y"]+wl(g.margin,12)+d[b]+(f.titleOffset[b]||0)))})}proximatePositions(){let l,d=this.chart,f=[],g=this.options.align==="left";for(let y of(this.allItems.forEach(function(_){let b,C,A=g,R,I;_.yAxis&&(_.xAxis.options.reversed&&(A=!A),_.points&&(b=zj(A?_.points:_.points.slice(0).reverse(),function(F){return bN(F.plotY)})),C=this.itemMarginTop+_.legendItem.label.getBBox().height+this.itemMarginBottom,I=_.yAxis.top-d.plotTop,R=_.visible?(b?b.plotY:_.yAxis.height)+(I-.3*C):I+_.yAxis.height,f.push({target:R,size:C,item:_}))},this),Oj(f,d.plotHeight)))l=y.item.legendItem||{},bN(y.pos)&&(l.y=d.plotTop-d.spacing[0]+y.pos)}render(){let l=this.chart,d=l.renderer,f=this.options,g=this.padding,y=this.getAllItems(),_,b,C,A=this.group,R,I=this.box;this.itemX=g,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=jj(f.width,l.spacingBox.width-g),R=l.spacingBox.width-2*g-f.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(R/=2),this.maxLegendWidth=this.widthOption||R,A||(this.group=A=d.g("legend").addClass(f.className||"").attr({zIndex:7}).add(),this.contentGroup=d.g().attr({zIndex:1}).add(A),this.scrollGroup=d.g().add(this.contentGroup)),this.renderTitle(),Wj(y,(F,U)=>(F.options?.legendIndex||0)-(U.options?.legendIndex||0)),f.reversed&&y.reverse(),this.allItems=y,this.display=_=!!y.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,y.forEach(this.renderItem,this),y.forEach(this.layoutItem,this),b=(this.widthOption||this.offsetWidth)+g,C=this.lastItemY+this.lastLineHeight+this.titleHeight,C=this.handleOverflow(C)+g,I||(this.box=I=d.rect().addClass("highcharts-legend-box").attr({r:f.borderRadius}).add(A)),l.styledMode||I.attr({stroke:f.borderColor,"stroke-width":f.borderWidth||0,fill:f.backgroundColor||"none"}).shadow(f.shadow),b>0&&C>0&&I[I.placed?"animate":"attr"](I.crisp.call({},{x:0,y:0,width:b,height:C},I.strokeWidth())),A[_?"show":"hide"](),l.styledMode&&A.getStyle("display")==="none"&&(b=C=0),this.legendWidth=b,this.legendHeight=C,_&&this.align(),this.proximate||this.positionItems(),rd(this,"afterRender")}align(l=this.chart.spacingBox){let d=this.chart,f=this.options,g=l.y;/(lth|ct|rth)/.test(this.getAlignment())&&d.titleOffset[0]>0?g+=d.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&d.titleOffset[2]>0&&(g-=d.titleOffset[2]),g!==l.y&&(l=Lf(l,{y:g})),d.hasRendered||(this.group.placed=!1),this.group.align(Lf(f,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":f.verticalAlign}),!0,l)}handleOverflow(l){let d=this,f=this.chart,g=f.renderer,y=this.options,_=y.y,b=y.verticalAlign==="top",C=this.padding,A=y.maxHeight,R=y.navigation,I=wl(R.animation,!0),F=R.arrowSize||12,U=this.pages,H=this.allItems,$=function(De){typeof De=="number"?Se.attr({height:De}):Se&&(d.clipRect=Se.destroy(),d.contentGroup.clip()),d.contentGroup.div&&(d.contentGroup.div.style.clip=De?"rect("+C+"px,9999px,"+(C+De)+"px,0)":"auto")},X=function(De){return d[De]=g.circle(0,0,1.3*F).translate(F/2,F/2).add(Te),f.styledMode||d[De].attr("fill","rgba(0,0,0,0.0001)"),d[De]},q,ie,ae,pe,ke=f.spacingBox.height+(b?-_:_)-C,Te=this.nav,Se=this.clipRect;return y.layout!=="horizontal"||y.verticalAlign==="middle"||y.floating||(ke/=2),A&&(ke=Math.min(ke,A)),U.length=0,l&&ke>0&&l>ke&&R.enabled!==!1?(this.clipHeight=q=Math.max(ke-20-this.titleHeight-C,0),this.currentPage=wl(this.currentPage,1),this.fullHeight=l,H.forEach((De,Ye)=>{let Je=(ae=De.legendItem||{}).y||0,st=Math.round(ae.label.getBBox().height),Gt=U.length;(!Gt||Je-U[Gt-1]>q&&(ie||Je)!==U[Gt-1])&&(U.push(ie||Je),Gt++),ae.pageIx=Gt-1,ie&&pe&&(pe.pageIx=Gt-1),Ye===H.length-1&&Je+st-U[Gt-1]>q&&Je>U[Gt-1]&&(U.push(Je),ae.pageIx=Gt),Je!==ie&&(ie=Je),pe=ae}),Se||(Se=d.clipRect=g.clipRect(0,C-2,9999,0),d.contentGroup.clip(Se)),$(q),Te||(this.nav=Te=g.g().attr({zIndex:1}).add(this.group),this.up=g.symbol("triangle",0,0,F,F).add(Te),X("upTracker").on("click",function(){d.scroll(-1,I)}),this.pager=g.text("",15,10).addClass("highcharts-legend-navigation"),!f.styledMode&&R.style&&this.pager.css(R.style),this.pager.add(Te),this.down=g.symbol("triangle-down",0,0,F,F).add(Te),X("downTracker").on("click",function(){d.scroll(1,I)})),d.scroll(0),l=ke):Te&&($(),this.nav=Te.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),l}scroll(l,d){let f=this.chart,g=this.pages,y=g.length,_=this.clipHeight,b=this.options.navigation,C=this.pager,A=this.padding,R=this.currentPage+l;R>y&&(R=y),R>0&&(d!==void 0&&Lj(d,f),this.nav.attr({translateX:A,translateY:_+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(I){I.attr({class:R===1?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),C.attr({text:R+"/"+y}),[this.down,this.downTracker].forEach(function(I){I.attr({x:18+this.pager.getBBox().width,class:R===y?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),f.styledMode||(this.up.attr({fill:R===1?b.inactiveColor:b.activeColor}),this.upTracker.css({cursor:R===1?"default":"pointer"}),this.down.attr({fill:R===y?b.inactiveColor:b.activeColor}),this.downTracker.css({cursor:R===y?"default":"pointer"})),this.scrollOffset=-g[R-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=R,this.positionCheckboxes(),Gj(()=>{rd(this,"afterScroll",{currentPage:R})},kj(wl(d,f.renderer.globalAnimation,!0)).duration))}setItemEvents(l,d,f){let g=this,y=l.legendItem||{},_=g.chart.renderer.boxWrapper,b=l instanceof vs,C=l instanceof Ya,A="highcharts-legend-"+(b?"point":"series")+"-active",R=g.chart.styledMode,I=f?[d,y.symbol]:[y.group],F=U=>{g.allItems.forEach(H=>{l!==H&&[H].concat(H.linkedSeries||[]).forEach($=>{$.setState(U,!b)})})};for(let U of I)U&&U.on("mouseover",function(){l.visible&&F("inactive"),l.setState("hover"),l.visible&&_.addClass(A),R||d.css(g.options.itemHoverStyle)}).on("mouseout",function(){g.chart.styledMode||d.css(Lf(l.visible?g.itemStyle:g.itemHiddenStyle)),F(""),_.removeClass(A),l.setState()}).on("click",function(H){let $=function(){l.setVisible&&l.setVisible(),F(l.visible?"inactive":"")};_.removeClass(A),rd(g,"itemClick",{browserEvent:H,legendItem:l},$),b?l.firePointEvent("legendItemClick",{browserEvent:H}):C&&rd(l,"legendItemClick",{browserEvent:H})})}createCheckboxForItem(l){l.checkbox=Bj("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:l.selected,defaultChecked:l.selected},this.options.itemCheckboxStyle,this.chart.container),Zb(l.checkbox,"click",function(d){let f=d.target;rd(l.series||l,"checkboxClick",{checked:f.checked,item:l},function(){l.select()})})}}(function(M){M.compose=function(l){Hj(Nj,"Core.Legend")&&Zb(l,"beforeMargins",function(){this.legend=new M(this,this.options.legend)})}})(nT||(nT={}));let xN=nT,{animate:iT,animObject:$j,setAnimation:rT}=Gr,{defaultOptions:sT}=_n,{numberFormat:qj}=Fi,{registerEventOptions:wN}=ha,{charts:Nf,doc:B0,marginNames:CN,svg:Xj,win:SN}=K,{seriesTypes:oT}=qr,{addEvent:aT,attr:MN,createElement:lT,css:pc,defined:fh,diffObjects:EN,discardElement:Yj,erase:Zj,error:cT,extend:ph,find:uT,fireEvent:zi,getAlignFactor:Kj,getStyle:dT,isArray:Qj,isNumber:Wm,isObject:Jj,isString:Kb,merge:su,objectEach:hT,pick:co,pInt:eW,relativeLength:TN,removeEvent:AN,splat:Qb,syncTimeout:tW,uniqueKey:nW}=Mt;class mh{static chart(l,d,f){return new mh(l,d,f)}constructor(l,d,f){this.sharedClips={};let g=[...arguments];(Kb(l)||l.nodeName)&&(this.renderTo=g.shift()),this.init(g[0],g[1])}setZoomOptions(){let l=this.options.chart,d=l.zooming;this.zooming=Mn(Ke({},d),{type:co(l.zoomType,d.type),key:co(l.zoomKey,d.key),pinchType:co(l.pinchType,d.pinchType),singleTouch:co(l.zoomBySingleTouch,d.singleTouch,!1),resetButton:su(d.resetButton,l.resetZoomButton)})}init(l,d){zi(this,"init",{args:arguments},function(){let f=su(sT,l),g=f.chart,y=this.renderTo||g.renderTo;this.userOptions=ph({},l),(this.renderTo=Kb(y)?B0.getElementById(y):y)||cT(13,!0,this),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=d,this.isResizing=0,this.options=f,this.axes=[],this.series=[],this.locale=f.lang.locale??this.renderTo.closest("[lang]")?.lang,this.time=new fn(ph(f.time||{},{locale:this.locale}),f.lang),f.time=this.time.options,this.numberFormatter=(g.numberFormatter||qj).bind(this),this.styledMode=g.styledMode,this.hasCartesianSeries=g.showAxes,this.index=Nf.length,Nf.push(this),K.chartCount++,wN(this,g),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),zi(this,"afterInit"),this.firstRender()})}initSeries(l){let d=this.options.chart,f=l.type||d.type,g=oT[f];g||cT(17,!0,this,{missingModuleFor:f});let y=new g;return typeof y.init=="function"&&y.init(this,l),y}setSortedData(){this.getSeriesOrderByLinks().forEach(function(l){l.points||l.data||!l.enabledDataSorting||l.setData(l.options.data,!1)})}getSeriesOrderByLinks(){return this.series.concat().sort(function(l,d){return l.linkedSeries.length||d.linkedSeries.length?d.linkedSeries.length-l.linkedSeries.length:0})}orderItems(l,d=0){let f=this[l],g=this.options[l]=Qb(this.options[l]).slice(),y=this.userOptions[l]=this.userOptions[l]?Qb(this.userOptions[l]).slice():[];if(this.hasRendered&&(g.splice(d),y.splice(d)),f)for(let _=d,b=f.length;_<b;++_){let C=f[_];C&&(C.index=_,C instanceof Ya&&(C.name=C.getName()),C.options.isInternal||(g[_]=C.options,y[_]=C.userOptions))}}getClipBox(l,d){let f=this.inverted,{xAxis:g,yAxis:y}=l||{},{x:_,y:b,width:C,height:A}=su(this.clipBox);return l&&(g&&g.len!==this.plotSizeX&&(C=g.len),y&&y.len!==this.plotSizeY&&(A=y.len),f&&!l.invertible&&([C,A]=[A,C])),d&&(_+=(f?y:g)?.pos??this.plotLeft,b+=(f?g:y)?.pos??this.plotTop),{x:_,y:b,width:C,height:A}}isInsidePlot(l,d,f={}){let{inverted:g,plotBox:y,plotLeft:_,plotTop:b,scrollablePlotBox:C}=this,{scrollLeft:A=0,scrollTop:R=0}=f.visiblePlotOnly&&this.scrollablePlotArea?.scrollingContainer||{},I=f.series,F=f.visiblePlotOnly&&C||y,U=f.inverted?d:l,H=f.inverted?l:d,$={x:U,y:H,isInsidePlot:!0,options:f};if(!f.ignoreX){let X=I&&(g&&!this.polar?I.yAxis:I.xAxis)||{pos:_,len:1/0},q=f.paneCoordinates?X.pos+U:_+U;q>=Math.max(A+_,X.pos)&&q<=Math.min(A+_+F.width,X.pos+X.len)||($.isInsidePlot=!1)}if(!f.ignoreY&&$.isInsidePlot){let X=!g&&f.axis&&!f.axis.isXAxis&&f.axis||I&&(g?I.xAxis:I.yAxis)||{pos:b,len:1/0},q=f.paneCoordinates?X.pos+H:b+H;q>=Math.max(R+b,X.pos)&&q<=Math.min(R+b+F.height,X.pos+X.len)||($.isInsidePlot=!1)}return zi(this,"afterIsInsidePlot",$),$.isInsidePlot}redraw(l){zi(this,"beforeRedraw");let d=this.hasCartesianSeries?this.axes:this.colorAxis||[],f=this.series,g=this.pointer,y=this.legend,_=this.userOptions.legend,b=this.renderer,C=b.isHidden(),A=[],R,I,F,U=this.isDirtyBox,H=this.isDirtyLegend,$;for(b.rootFontSize=b.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),rT(!!this.hasRendered&&l,this),C&&this.temporaryDisplay(),this.layOutTitles(!1),F=f.length;F--;)if((($=f[F]).options.stacking||$.options.centerInCategory)&&(I=!0,$.isDirty)){R=!0;break}if(R)for(F=f.length;F--;)($=f[F]).options.stacking&&($.isDirty=!0);f.forEach(function(X){X.isDirty&&(X.options.legendType==="point"?(typeof X.updateTotals=="function"&&X.updateTotals(),H=!0):_&&(_.labelFormatter||_.labelFormat)&&(H=!0)),X.isDirtyData&&zi(X,"updatedData")}),H&&y&&y.options.enabled&&(y.render(),this.isDirtyLegend=!1),I&&this.getStacks(),d.forEach(function(X){X.updateNames(),X.setScale()}),this.getMargins(),d.forEach(function(X){X.isDirty&&(U=!0)}),d.forEach(function(X){let q=X.min+","+X.max;X.extKey!==q&&(X.extKey=q,A.push(function(){zi(X,"afterSetExtremes",ph(X.eventArgs,X.getExtremes())),delete X.eventArgs})),(U||I)&&X.redraw()}),U&&this.drawChartBox(),zi(this,"predraw"),f.forEach(function(X){(U||X.isDirty)&&X.visible&&X.redraw(),X.isDirtyData=!1}),g&&g.reset(!0),b.draw(),zi(this,"redraw"),zi(this,"render"),C&&this.temporaryDisplay(!0),A.forEach(function(X){X.call()})}get(l){let d=this.series;function f(y){return y.id===l||y.options&&y.options.id===l}let g=uT(this.axes,f)||uT(this.series,f);for(let y=0;!g&&y<d.length;y++)g=uT(d[y].points||[],f);return g}createAxes(){let l=this.userOptions;for(let d of(zi(this,"createAxes"),["xAxis","yAxis"]))for(let f of l[d]=Qb(l[d]||{}))new Pr(this,f,d);zi(this,"afterCreateAxes")}getSelectedPoints(){return this.series.reduce((l,d)=>(d.getPointsCollection().forEach(f=>{co(f.selectedStaging,f.selected)&&l.push(f)}),l),[])}getSelectedSeries(){return this.series.filter(l=>l.selected)}setTitle(l,d,f){this.applyDescription("title",l),this.applyDescription("subtitle",d),this.applyDescription("caption",void 0),this.layOutTitles(f)}applyDescription(l,d){let f=this,g=this.options[l]=su(this.options[l],d),y=this[l];y&&d&&(this[l]=y=y.destroy()),g&&!y&&((y=this.renderer.text(g.text,0,0,g.useHTML).attr({align:g.align,class:"highcharts-"+l,zIndex:g.zIndex||4}).css({textOverflow:"ellipsis",whiteSpace:"nowrap"}).add()).update=function(_,b){f.applyDescription(l,_),f.layOutTitles(b)},this.styledMode||y.css(ph(l==="title"?{fontSize:this.options.isStock?"1em":"1.2em"}:{},g.style)),y.textPxLength=y.getBBox().width,y.css({whiteSpace:g.style?.whiteSpace}),this[l]=y)}layOutTitles(l=!0){let d=[0,0,0],{options:f,renderer:g,spacingBox:y}=this;["title","subtitle","caption"].forEach(b=>{let C=this[b],A=this.options[b],R=su(y),I=C?.textPxLength||0;if(C&&A){zi(this,"layOutTitle",{alignTo:R,key:b,textPxLength:I});let F=g.fontMetrics(C),U=F.b,H=F.h,$=A.verticalAlign||"top",X=$==="top",q=X&&A.minScale||1,ie=b==="title"?X?-3:0:X?d[0]+2:0,ae=Math.min(R.width/I,1),pe=Math.max(q,ae),ke=su({y:$==="bottom"?U:ie+U},{align:b==="title"?ae<q?"left":"center":this.title?.alignValue},A),Te=(A.width||(ae>q?this.chartWidth:R.width)/pe)+"px";C.alignValue!==ke.align&&(C.placed=!1);let Se=Math.round(C.css({width:Te}).getBBox(A.useHTML).height);if(ke.height=Se,C.align(ke,!1,R).attr({align:ke.align,scaleX:pe,scaleY:pe,"transform-origin":`${R.x+I*pe*Kj(ke.align)} ${H}`}),!A.floating){let De=Se*(Se<1.2*H?1:pe);$==="top"?d[0]=Math.ceil(d[0]+De):$==="bottom"&&(d[2]=Math.ceil(d[2]+De))}}},this),d[0]&&(f.title?.verticalAlign||"top")==="top"&&(d[0]+=f.title?.margin||0),d[2]&&f.caption?.verticalAlign==="bottom"&&(d[2]+=f.caption?.margin||0);let _=!this.titleOffset||this.titleOffset.join(",")!==d.join(",");this.titleOffset=d,zi(this,"afterLayOutTitles"),!this.isDirtyBox&&_&&(this.isDirtyBox=this.isDirtyLegend=_,this.hasRendered&&l&&this.isDirtyBox&&this.redraw())}getContainerBox(){let l=[].map.call(this.renderTo.children,f=>{if(f!==this.container){let g=f.style.display;return f.style.display="none",[f,g]}}),d={width:dT(this.renderTo,"width",!0)||0,height:dT(this.renderTo,"height",!0)||0};return l.filter(Boolean).forEach(([f,g])=>{f.style.display=g}),d}getChartSize(){let l=this.options.chart,d=l.width,f=l.height,g=this.getContainerBox(),y=g.height<=1||!this.renderTo.parentElement?.style.height&&this.renderTo.style.height==="100%";this.chartWidth=Math.max(0,d||g.width||600),this.chartHeight=Math.max(0,TN(f,this.chartWidth)||(y?400:g.height)),this.containerBox=g}temporaryDisplay(l){let d=this.renderTo,f;if(l)for(;d?.style;)d.hcOrigStyle&&(pc(d,d.hcOrigStyle),delete d.hcOrigStyle),d.hcOrigDetached&&(B0.body.removeChild(d),d.hcOrigDetached=!1),d=d.parentNode;else for(;d?.style&&(B0.body.contains(d)||d.parentNode||(d.hcOrigDetached=!0,B0.body.appendChild(d)),(dT(d,"display",!1)==="none"||d.hcOricDetached)&&(d.hcOrigStyle={display:d.style.display,height:d.style.height,overflow:d.style.overflow},f={display:"block",overflow:"hidden"},d!==this.renderTo&&(f.height=0),pc(d,f),d.offsetWidth||d.style.setProperty("display","block","important")),(d=d.parentNode)!==B0.body););}setClassName(l){this.container.className="highcharts-container "+(l||"")}getContainer(){let l,d=this.options,f=d.chart,g="data-highcharts-chart",y=nW(),_=this.renderTo,b=eW(MN(_,g));Wm(b)&&Nf[b]&&Nf[b].hasRendered&&Nf[b].destroy(),MN(_,g,this.index),_.innerHTML=Wt.emptyHTML,f.skipClone||_.offsetWidth||this.temporaryDisplay(),this.getChartSize();let C=this.chartHeight,A=this.chartWidth;pc(_,{overflow:"hidden"}),this.styledMode||(l=ph({position:"relative",overflow:"hidden",width:A+"px",height:C+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none",padding:"0px"},f.style||{}));let R=lT("div",{id:y},l,_);this.container=R,this.getChartSize(),A!==this.chartWidth&&(A=this.chartWidth,this.styledMode||pc(R,{width:co(f.style?.width,A+"px")})),this.containerBox=this.getContainerBox(),this._cursor=R.style.cursor;let I=f.renderer||!Xj?cr.getRendererType(f.renderer):Oo;if(this.renderer=new I(R,A,C,void 0,f.forExport,d.exporting?.allowHTML,this.styledMode),rT(void 0,this),this.setClassName(f.className),this.styledMode)for(let F in d.defs)this.renderer.definition(d.defs[F]);else this.renderer.setStyle(f.style);this.renderer.chartIndex=this.index,zi(this,"afterGetContainer")}getMargins(l){let{spacing:d,margin:f,titleOffset:g}=this;this.resetMargins(),g[0]&&!fh(f[0])&&(this.plotTop=Math.max(this.plotTop,g[0]+d[0])),g[2]&&!fh(f[2])&&(this.marginBottom=Math.max(this.marginBottom,g[2]+d[2])),this.legend?.display&&this.legend.adjustMargins(f,d),zi(this,"getMargins"),l||this.getAxisMargins()}getAxisMargins(){let l=this,d=l.axisOffset=[0,0,0,0],f=l.colorAxis,g=l.margin,y=function(_){_.forEach(function(b){b.visible&&b.getOffset()})};l.hasCartesianSeries?y(l.axes):f?.length&&y(f),CN.forEach(function(_,b){fh(g[b])||(l[_]+=d[b])}),l.setChartSize()}getOptions(){return EN(this.userOptions,sT)}reflow(l){let d=this,f=d.containerBox,g=d.getContainerBox();delete d.pointer?.chartPosition,!d.exporting?.isPrinting&&!d.isResizing&&f&&g.width&&((g.width!==f.width||g.height!==f.height)&&(Mt.clearTimeout(d.reflowTimeout),d.reflowTimeout=tW(function(){d.container&&d.setSize(void 0,void 0,!1)},100*!!l)),d.containerBox=g)}setReflow(){let l=this,d=f=>{l.options?.chart.reflow&&l.hasLoaded&&l.reflow(f)};if(typeof ResizeObserver=="function")new ResizeObserver(d).observe(l.renderTo);else{let f=aT(SN,"resize",d);aT(this,"destroy",f)}}setSize(l,d,f){let g=this,y=g.renderer;g.isResizing+=1,rT(f,g);let _=y.globalAnimation;g.oldChartHeight=g.chartHeight,g.oldChartWidth=g.chartWidth,l!==void 0&&(g.options.chart.width=l),d!==void 0&&(g.options.chart.height=d),g.getChartSize();let{chartWidth:b,chartHeight:C,scrollablePixelsX:A=0,scrollablePixelsY:R=0}=g;(g.isDirtyBox||b!==g.oldChartWidth||C!==g.oldChartHeight)&&(g.styledMode||(_?iT:pc)(g.container,{width:`${b+A}px`,height:`${C+R}px`},_),g.setChartSize(!0),y.setSize(b,C,_),g.axes.forEach(function(I){I.isDirty=!0,I.setScale()}),g.isDirtyLegend=!0,g.isDirtyBox=!0,g.layOutTitles(),g.getMargins(),g.redraw(_),g.oldChartHeight=void 0,zi(g,"resize"),setTimeout(()=>{g&&zi(g,"endResize")},$j(_).duration)),g.isResizing-=1}setChartSize(l){let d,f,g,y,{chartHeight:_,chartWidth:b,inverted:C,spacing:A,renderer:R}=this,I=this.clipOffset,F=Math[C?"floor":"round"];this.plotLeft=d=Math.round(this.plotLeft),this.plotTop=f=Math.round(this.plotTop),this.plotWidth=g=Math.max(0,Math.round(b-d-(this.marginRight??0))),this.plotHeight=y=Math.max(0,Math.round(_-f-(this.marginBottom??0))),this.plotSizeX=C?y:g,this.plotSizeY=C?g:y,this.spacingBox=R.spacingBox={x:A[3],y:A[0],width:b-A[3]-A[1],height:_-A[0]-A[2]},this.plotBox=R.plotBox={x:d,y:f,width:g,height:y},I&&(this.clipBox={x:F(I[3]),y:F(I[0]),width:F(this.plotSizeX-I[1]-I[3]),height:F(this.plotSizeY-I[0]-I[2])}),l||(this.axes.forEach(function(U){U.setAxisSize(),U.setAxisTranslation()}),R.alignElements()),zi(this,"afterSetChartSize",{skipAxes:l})}resetMargins(){zi(this,"resetMargins");let l=this,d=l.options.chart,f=d.plotBorderWidth||0,g=Math.round(f)/2;["margin","spacing"].forEach(function(y){let _=d[y],b=Jj(_)?_:[_,_,_,_];["Top","Right","Bottom","Left"].forEach(function(C,A){l[y][A]=co(d[y+C],b[A])})}),CN.forEach(function(y,_){l[y]=co(l.margin[_],l.spacing[_])}),l.axisOffset=[0,0,0,0],l.clipOffset=[g,g,g,g],l.plotBorderWidth=f}drawChartBox(){let l=this.options.chart,d=this.renderer,f=this.chartWidth,g=this.chartHeight,y=this.styledMode,_=this.plotBGImage,b=l.backgroundColor,C=l.plotBackgroundColor,A=l.plotBackgroundImage,R=this.plotLeft,I=this.plotTop,F=this.plotWidth,U=this.plotHeight,H=this.plotBox,$=this.clipRect,X=this.clipBox,q=this.chartBackground,ie=this.plotBackground,ae=this.plotBorder,pe,ke,Te,Se="animate";q||(this.chartBackground=q=d.rect().addClass("highcharts-background").add(),Se="attr"),y?pe=ke=q.strokeWidth():(ke=(pe=l.borderWidth||0)+8*!!l.shadow,Te={fill:b||"none"},(pe||q["stroke-width"])&&(Te.stroke=l.borderColor,Te["stroke-width"]=pe),q.attr(Te).shadow(l.shadow)),q[Se]({x:ke/2,y:ke/2,width:f-ke-pe%2,height:g-ke-pe%2,r:l.borderRadius}),Se="animate",ie||(Se="attr",this.plotBackground=ie=d.rect().addClass("highcharts-plot-background").add()),ie[Se](H),!y&&(ie.attr({fill:C||"none"}).shadow(l.plotShadow),A&&(_?(A!==_.attr("href")&&_.attr("href",A),_.animate(H)):this.plotBGImage=d.image(A,R,I,F,U).add())),$?$.animate({width:X.width,height:X.height}):this.clipRect=d.clipRect(X),Se="animate",ae||(Se="attr",this.plotBorder=ae=d.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),y||ae.attr({stroke:l.plotBorderColor,"stroke-width":l.plotBorderWidth||0,fill:"none"}),ae[Se](ae.crisp(H,-ae.strokeWidth())),this.isDirtyBox=!1,zi(this,"afterDrawChartBox")}propFromSeries(){let l,d,f,g=this,y=g.options.chart,_=g.options.series;["inverted","angular","polar"].forEach(function(b){for(d=oT[y.type],f=y[b]||d&&d.prototype[b],l=_?.length;!f&&l--;)(d=oT[_[l].type])&&d.prototype[b]&&(f=!0);g[b]=f})}linkSeries(l){let d=this,f=d.series;f.forEach(function(g){g.linkedSeries.length=0}),f.forEach(function(g){let{linkedTo:y}=g.options;if(Kb(y)){let _;(_=y===":previous"?d.series[g.index-1]:d.get(y))&&_.linkedParent!==g&&(_.linkedSeries.push(g),g.linkedParent=_,_.enabledDataSorting&&g.setDataSortingOptions(),g.visible=co(g.options.visible,_.options.visible,g.visible))}}),zi(this,"afterLinkSeries",{isUpdating:l})}renderSeries(){this.series.forEach(function(l){l.translate(),l.render()})}render(){let l=this.axes,d=this.colorAxis,f=this.renderer,g=this.options.chart.axisLayoutRuns||2,y=R=>{R.forEach(I=>{I.visible&&I.render()})},_=0,b=!0,C,A=0;for(let R of(this.setTitle(),zi(this,"beforeMargins"),this.getStacks?.(),this.getMargins(!0),this.setChartSize(),l)){let{options:I}=R,{labels:F}=I;if(this.hasCartesianSeries&&R.horiz&&R.visible&&F.enabled&&R.series.length&&R.coll!=="colorAxis"&&!this.polar){_=I.tickLength,R.createGroups();let U=new ks(R,0,"",!0),H=U.createLabel("x",F);if(U.destroy(),H&&co(F.reserveSpace,!Wm(I.crossing))&&(_=H.getBBox().height+F.distance+Math.max(I.offset||0,0)),_){H?.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-_,0);(b||C||g>1)&&A<g;){let R=this.plotWidth,I=this.plotHeight;for(let F of l)A===0?F.setScale():(F.horiz&&b||!F.horiz&&C)&&F.setTickInterval(!0);A===0?this.getAxisMargins():this.getMargins(),b=R/this.plotWidth>(A?1:1.1),C=I/this.plotHeight>(A?1:1.05),A++}this.drawChartBox(),this.hasCartesianSeries?y(l):d?.length&&y(d),this.seriesGroup||(this.seriesGroup=f.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.dataLabelsGroup||(this.dataLabelsGroup=f.g("datalabels-group").attr({zIndex:6}).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(l){let d=this,f=su(!0,this.options.credits,l);f.enabled&&!this.credits&&(this.credits=this.renderer.text(f.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){f.href&&(SN.location.href=f.href)}).attr({align:f.position.align,zIndex:8}),d.styledMode||this.credits.css(f.style),this.credits.add().align(f.position),this.credits.update=function(g){d.credits=d.credits.destroy(),d.addCredits(g)})}destroy(){let l,d=this,f=d.axes,g=d.series,y=d.container,_=y?.parentNode;for(zi(d,"destroy"),d.renderer.forExport?Zj(Nf,d):Nf[d.index]=void 0,K.chartCount--,d.renderTo.removeAttribute("data-highcharts-chart"),AN(d),l=f.length;l--;)f[l]=f[l].destroy();for(this.scroller?.destroy?.(),l=g.length;l--;)g[l]=g[l].destroy();["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach(b=>{d[b]=d[b]?.destroy?.()}),y&&(y.innerHTML=Wt.emptyHTML,AN(y),_&&Yj(y)),hT(d,function(b,C){delete d[C]})}firstRender(){let l=this,d=l.options;l.getContainer(),l.resetMargins(),l.setChartSize(),l.propFromSeries(),l.createAxes();let f=Qj(d.series)?d.series:[];d.series=[],f.forEach(function(g){l.initSeries(g)}),l.linkSeries(),l.setSortedData(),zi(l,"beforeRender"),l.render(),l.pointer?.getChartPosition(),l.renderer.imgCount||l.hasLoaded||l.onload(),l.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach(function(l){l&&this.index!==void 0&&l.apply(this,[this])},this),zi(this,"load"),zi(this,"render"),fh(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:l,title:d}=this;l&&!this.accessibility&&(this.renderer.boxWrapper.attr({role:"img","aria-label":(d?.element.textContent||"").replace(/</g,"&lt;")}),l.accessibility&&l.accessibility.enabled===!1||cT('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(l,d,f){let g,y=this;return l&&(d=co(d,!0),zi(y,"addSeries",{options:l},function(){g=y.initSeries(l),y.isDirtyLegend=!0,y.linkSeries(),g.enabledDataSorting&&g.setData(l.data,!1),zi(y,"afterAddSeries",{series:g}),d&&y.redraw(f)})),g}addAxis(l,d,f,g){return this.createAxis(d?"xAxis":"yAxis",{axis:l,redraw:f,animation:g})}addColorAxis(l,d,f){return this.createAxis("colorAxis",{axis:l,redraw:d,animation:f})}createAxis(l,d){let f=new Pr(this,d.axis,l);return co(d.redraw,!0)&&this.redraw(d.animation),f}showLoading(l){let d=this,f=d.options,g=f.loading,y=function(){_&&pc(_,{left:d.plotLeft+"px",top:d.plotTop+"px",width:d.plotWidth+"px",height:d.plotHeight+"px"})},_=d.loadingDiv,b=d.loadingSpan;_||(d.loadingDiv=_=lT("div",{className:"highcharts-loading highcharts-loading-hidden"},null,d.container)),b||(d.loadingSpan=b=lT("span",{className:"highcharts-loading-inner"},null,_),aT(d,"redraw",y)),_.className="highcharts-loading",Wt.setElementHTML(b,co(l,f.lang.loading,"")),!d.styledMode&&(pc(_,ph(g.style,{zIndex:10})),pc(b,g.labelStyle),d.loadingShown||(pc(_,{opacity:0,display:""}),iT(_,{opacity:g.style.opacity||.5},{duration:g.showDuration||0}))),d.loadingShown=!0,y()}hideLoading(){let l=this.options,d=this.loadingDiv;d&&(d.className="highcharts-loading highcharts-loading-hidden",this.styledMode||iT(d,{opacity:0},{duration:l.loading.hideDuration||100,complete:function(){pc(d,{display:"none"})}})),this.loadingShown=!1}update(l,d,f,g){let y,_,b,C=this,A={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},R=l.isResponsiveOptions,I=[];zi(C,"update",{options:l}),R||C.setResponsive(!1,!0),l=EN(l,C.options),C.userOptions=su(C.userOptions,l);let F=l.chart;F&&(su(!0,C.options.chart,F),this.setZoomOptions(),"className"in F&&C.setClassName(F.className),("inverted"in F||"polar"in F||"type"in F)&&(C.propFromSeries(),y=!0),"alignTicks"in F&&(y=!0),"events"in F&&wN(this,F),hT(F,function($,X){C.propsRequireUpdateSeries.indexOf("chart."+X)!==-1&&(_=!0),C.propsRequireDirtyBox.indexOf(X)!==-1&&(C.isDirtyBox=!0),C.propsRequireReflow.indexOf(X)!==-1&&(C.isDirtyBox=!0,R||(b=!0))}),!C.styledMode&&F.style&&C.renderer.setStyle(C.options.chart.style||{})),!C.styledMode&&l.colors&&(this.options.colors=l.colors),hT(l,function($,X){C[X]&&typeof C[X].update=="function"?C[X].update($,!1):typeof C[A[X]]=="function"?C[A[X]]($):X!=="colors"&&C.collectionsWithUpdate.indexOf(X)===-1&&su(!0,C.options[X],l[X]),X!=="chart"&&C.propsRequireUpdateSeries.indexOf(X)!==-1&&(_=!0)}),this.collectionsWithUpdate.forEach(function($){l[$]&&(Qb(l[$]).forEach(function(X,q){let ie,ae=fh(X.id);ae&&(ie=C.get(X.id)),!ie&&C[$]&&(ie=C[$][co(X.index,q)])&&(ae&&fh(ie.options.id)||ie.options.isInternal)&&(ie=void 0),ie&&ie.coll===$&&(ie.update(X,!1),f&&(ie.touched=!0)),!ie&&f&&C.collectionsWithInit[$]&&(C.collectionsWithInit[$][0].apply(C,[X].concat(C.collectionsWithInit[$][1]||[]).concat([!1])).touched=!0)}),f&&C[$].forEach(function(X){X.touched||X.options.isInternal?delete X.touched:I.push(X)}))}),I.forEach(function($){$.chart&&$.remove&&$.remove(!1)}),y&&C.axes.forEach(function($){$.update({},!1)}),_&&C.getSeriesOrderByLinks().forEach(function($){$.chart&&$.update({},!1)},this);let U=F?.width,H=F&&(Kb(F.height)?TN(F.height,U||C.chartWidth):F.height);b||Wm(U)&&U!==C.chartWidth||Wm(H)&&H!==C.chartHeight?C.setSize(U,H,g):co(d,!0)&&C.redraw(g),zi(C,"afterUpdate",{options:l,redraw:d,animation:g})}setSubtitle(l,d){this.applyDescription("subtitle",l),this.layOutTitles(d)}setCaption(l,d){this.applyDescription("caption",l),this.layOutTitles(d)}showResetZoom(){let l=this,d=sT.lang,f=l.zooming.resetButton,g=f.theme,y=f.relativeTo==="chart"||f.relativeTo==="spacingBox"?null:"plotBox";function _(){l.zoomOut()}zi(this,"beforeShowResetZoom",null,function(){l.resetZoomButton=l.renderer.button(d.resetZoom,null,null,_,g).attr({align:f.position.align,title:d.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(f.position,!1,y)}),zi(this,"afterShowResetZoom")}zoomOut(){zi(this,"selection",{resetSelection:!0},()=>this.transform({reset:!0,trigger:"zoom"}))}pan(l,d){let f=this,g=typeof d=="object"?d:{enabled:d,type:"x"},y=g.type,_=y&&f[{x:"xAxis",xy:"axes",y:"yAxis"}[y]].filter(C=>C.options.panningEnabled&&!C.options.isInternal),b=f.options.chart;b?.panning&&(b.panning=g),zi(this,"pan",{originalEvent:l},()=>{f.transform({axes:_,event:l,to:{x:l.chartX-(f.mouseDownX||0),y:l.chartY-(f.mouseDownY||0)},trigger:"pan"}),pc(f.container,{cursor:"move"})})}transform(l){let{axes:d=this.axes,event:f,from:g={},reset:y,selection:_,to:b={},trigger:C}=l,{inverted:A,time:R}=this;this.hoverPoints?.forEach(H=>H.setState()),zi(this,"transform",l);let I=l.hasZoomed||!1,F,U;for(let H of d){let{horiz:$,len:X,minPointOffset:q=0,options:ie,reversed:ae}=H,pe=$?"width":"height",ke=$?"x":"y",Te=co(b[pe],H.len),Se=co(g[pe],H.len),De=10>Math.abs(Te)?1:Te/Se,Ye=(g[ke]||0)+Se/2-H.pos,Je=Ye-((b[ke]??H.pos)+Te/2-H.pos)/De,st=ae&&!A||!ae&&A?-1:1;if(!y&&(Ye<0||Ye>H.len))continue;let Gt=H.chart.polar||H.isOrdinal?0:q*st||0,xn=H.toValue(Je,!0),Cn=H.toValue(Je+X/De,!0),Xt=xn+Gt,Bt=Cn-Gt,cn=H.allExtremes;if(_&&_[H.coll].push({axis:H,min:Math.min(xn,Cn),max:Math.max(xn,Cn)}),Xt>Bt&&([Xt,Bt]=[Bt,Xt]),De===1&&!y&&H.coll==="yAxis"&&!cn){for(let Go of H.series){let ou=Go.getExtremes(Go.getProcessedData(!0).modified.getColumn("y")||[],!0);cn??(cn={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),Wm(ou.dataMin)&&Wm(ou.dataMax)&&(cn.dataMin=Math.min(ou.dataMin,cn.dataMin),cn.dataMax=Math.max(ou.dataMax,cn.dataMax))}H.allExtremes=cn}let{dataMin:Tr,dataMax:Ji,min:jo,max:$n}=ph(H.getExtremes(),cn||{}),Un=R.parse(ie.min),Xi=R.parse(ie.max),wi=Tr??Un,mr=Ji??Xi,gr=Bt-Xt,er=H.categories?0:Math.min(gr,mr-wi),Br=wi-er*(fh(Un)?0:ie.minPadding),Wo=mr+er*(fh(Xi)?0:ie.maxPadding),pa=H.allowZoomOutside||De===1||C!=="zoom"&&De>1,vh=Math.min(Un??Br,Br,pa?jo:Br),mc=Math.max(Xi??Wo,Wo,pa?$n:Wo);(!H.isOrdinal||De!==1||y)&&(Xt<vh&&(Xt=vh,De>=1&&(Bt=Xt+gr)),Bt>mc&&(Bt=mc,De>=1&&(Xt=Bt-gr)),(y||H.series.length&&(Xt!==jo||Bt!==$n)&&Xt>=vh&&Bt<=mc)&&(_?_[H.coll].push({axis:H,min:Xt,max:Bt}):(H.isPanning=C!=="zoom",H.isPanning&&(U=!0),H.setExtremes(y?void 0:Xt,y?void 0:Bt,!1,!1,{move:Je,trigger:C,scale:De}),!y&&(Xt>vh||Bt<mc)&&C!=="mousewheel"&&(F=!0)),I=!0),this.hasCartesianSeries||y||C==="mousewheel"||(F=!0),f&&(this[$?"mouseDownX":"mouseDownY"]=f[$?"chartX":"chartY"]))}return I&&(_?zi(this,"selection",_,()=>{delete l.selection,l.trigger="zoom",this.transform(l)}):(!F||U||this.resetZoomButton?!F&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()):this.showResetZoom(),this.redraw(C==="zoom"&&(this.options.chart.animation??this.pointCount<100)))),I}}ph(mh.prototype,{callbacks:[],collectionsWithInit:{xAxis:[mh.prototype.addAxis,[!0]],yAxis:[mh.prototype.addAxis,[!1]],series:[mh.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]});let{stop:iW}=Gr,{composed:rW}=K,{addEvent:gh,createElement:Jb,css:fT,defined:pT,erase:sW,merge:DN,pushUnique:IN}=Mt;function oW(){let M=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!M&&(this.scrollablePlotArea=M=new RN(this)),M?.applyFixed()}function PN(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}let RN=(()=>{class M{static compose(d,f,g){IN(rW,this.compose)&&(gh(d,"afterInit",PN),gh(f,"afterSetChartSize",y=>this.afterSetSize(y.target,y)),gh(f,"render",oW),gh(g,"show",PN))}static afterSetSize(d,f){let g,y,_,{minWidth:b,minHeight:C}=d.options.chart.scrollablePlotArea||{},{clipBox:A,plotBox:R,inverted:I,renderer:F}=d;if(!F.forExport&&(b?(d.scrollablePixelsX=g=Math.max(0,b-d.chartWidth),g&&(d.scrollablePlotBox=DN(d.plotBox),R.width=d.plotWidth+=g,A[I?"height":"width"]+=g,_=!0)):C&&(d.scrollablePixelsY=y=Math.max(0,C-d.chartHeight),pT(y)&&(d.scrollablePlotBox=DN(d.plotBox),R.height=d.plotHeight+=y,A[I?"width":"height"]+=y,_=!1)),pT(_)&&!f.skipAxes))for(let U of d.axes)(U.horiz===_||d.hasParallelCoordinates&&U.coll==="yAxis")&&(U.setAxisSize(),U.setAxisTranslation())}constructor(d){let f,g=d.options.chart,y=cr.getRendererType(),_=g.scrollablePlotArea||{},b=this.moveFixedElements.bind(this),C={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};d.scrollablePixelsX&&(C.overflowX="auto"),d.scrollablePixelsY&&(C.overflowY="auto"),this.chart=d;let A=this.parentDiv=Jb("div",{className:"highcharts-scrolling-parent"},{position:"relative"},d.renderTo),R=this.scrollingContainer=Jb("div",{className:"highcharts-scrolling"},C,A),I=this.innerContainer=Jb("div",{className:"highcharts-inner-container"},void 0,R),F=this.fixedDiv=Jb("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(g.style?.zIndex||0)+2,top:0},void 0,!0),U=this.fixedRenderer=new y(F,d.chartWidth,d.chartHeight,g.style);this.mask=U.path().attr({fill:g.backgroundColor||"#fff","fill-opacity":_.opacity??.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),R.parentNode.insertBefore(F,R),fT(d.renderTo,{overflow:"visible"}),gh(d,"afterShowResetZoom",b),gh(d,"afterApplyDrilldown",b),gh(d,"afterLayOutTitles",b),gh(R,"scroll",()=>{let{pointer:H,hoverPoint:$}=d;H&&(delete H.chartPosition,$&&(f=$),H.runPointActions(void 0,f,!0))}),I.appendChild(d.container)}applyFixed(){let{chart:d,fixedRenderer:f,isDirty:g,scrollingContainer:y}=this,{axisOffset:_,chartWidth:b,chartHeight:C,container:A,plotHeight:R,plotLeft:I,plotTop:F,plotWidth:U,scrollablePixelsX:H=0,scrollablePixelsY:$=0}=d,{scrollPositionX:X=0,scrollPositionY:q=0}=d.options.chart.scrollablePlotArea||{},ie=b+H,ae=C+$;f.setSize(b,C),(g??!0)&&(this.isDirty=!1,this.moveFixedElements()),iW(d.container),fT(A,{width:`${ie}px`,height:`${ae}px`}),d.renderer.boxWrapper.attr({width:ie,height:ae,viewBox:[0,0,ie,ae].join(" ")}),d.chartBackground?.attr({width:ie,height:ae}),fT(y,{width:`${b}px`,height:`${C}px`}),pT(g)||(y.scrollLeft=H*X,y.scrollTop=$*q);let pe=F-_[0]-1,ke=I-_[3]-1,Te=F+R+_[2]+1,Se=I+U+_[1]+1,De=I+U-H,Ye=F+R-$,Je=[["M",0,0]];H?Je=[["M",0,pe],["L",I-1,pe],["L",I-1,Te],["L",0,Te],["Z"],["M",De,pe],["L",b,pe],["L",b,Te],["L",De,Te],["Z"]]:$&&(Je=[["M",ke,0],["L",ke,F-1],["L",Se,F-1],["L",Se,0],["Z"],["M",ke,Ye],["L",ke,C],["L",Se,C],["L",Se,Ye],["Z"]]),d.redrawTrigger!=="adjustHeight"&&this.mask.attr({d:Je})}moveFixedElements(){let d,{container:f,inverted:g,scrollablePixelsX:y,scrollablePixelsY:_}=this.chart,b=this.fixedRenderer,C=M.fixedSelectors;if(y&&!g?d=".highcharts-yaxis":y&&g||_&&!g?d=".highcharts-xaxis":_&&g&&(d=".highcharts-yaxis"),d&&!(this.chart.hasParallelCoordinates&&d===".highcharts-yaxis"))for(let A of[`${d}:not(.highcharts-radial-axis)`,`${d}-labels:not(.highcharts-radial-axis-labels)`])IN(C,A);else for(let A of[".highcharts-xaxis",".highcharts-yaxis"])for(let R of[`${A}:not(.highcharts-radial-axis)`,`${A}-labels:not(.highcharts-radial-axis-labels)`])sW(C,R);for(let A of C)[].forEach.call(f.querySelectorAll(A),R=>{(R.namespaceURI===b.SVG_NS?b.box:b.box.parentNode).appendChild(R),R.style.pointerEvents="auto"})}}return M.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"],M})(),{format:aW}=Fi,{series:lW}=qr,{destroyObjectProperties:cW,fireEvent:kN,getAlignFactor:mT,isNumber:gT,pick:V0}=Mt,LN=class{constructor(M,l,d,f,g){let y=M.chart.inverted,_=M.reversed;this.axis=M;let b=this.isNegative=!!d!=!!_;this.options=l=l||{},this.x=f,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=g,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:l.align||(y?b?"left":"right":"center"),verticalAlign:l.verticalAlign||(y?"middle":b?"bottom":"top"),y:l.y,x:l.x},this.textAlign=l.textAlign||(y?b?"right":"left":"center")}destroy(){cW(this,this.axis)}render(M){let l=this.axis.chart,d=this.options,f=d.format,g=f?aW(f,this,l):d.formatter.call(this);if(this.label)this.label.attr({text:g,visibility:"hidden"});else{this.label=l.renderer.label(g,null,void 0,d.shape,void 0,void 0,d.useHTML,!1,"stack-labels");let y={r:d.borderRadius||0,text:g,padding:V0(d.padding,5),visibility:"hidden"};l.styledMode||(y.fill=d.backgroundColor,y.stroke=d.borderColor,y["stroke-width"]=d.borderWidth,this.label.css(d.style||{})),this.label.attr(y),this.label.added||this.label.add(M)}this.label.labelrank=l.plotSizeY,kN(this,"afterRender")}setOffset(M,l,d,f,g,y){let{alignOptions:_,axis:b,label:C,options:A,textAlign:R}=this,I=b.chart,F=this.getStackBox({xOffset:M,width:l,boxBottom:d,boxTop:f,defaultX:g,xAxis:y}),{verticalAlign:U}=_;if(C&&F){let H=C.getBBox(void 0,0),$=C.padding,X=V0(A.overflow,"justify")==="justify",q;_.x=A.x||0,_.y=A.y||0;let{x:ie,y:ae}=this.adjustStackPosition({labelBox:H,verticalAlign:U,textAlign:R});F.x-=ie,F.y-=ae,C.align(_,!1,F),(q=I.isInsidePlot(C.alignAttr.x+_.x+ie,C.alignAttr.y+_.y+ae))||(X=!1),X&&lW.prototype.justifyDataLabel.call(b,C,_,C.alignAttr,H,F),C.attr({x:C.alignAttr.x,y:C.alignAttr.y,rotation:A.rotation,rotationOriginX:H.width*mT(A.textAlign||"center"),rotationOriginY:H.height/2}),V0(!X&&A.crop,!0)&&(q=gT(C.x)&&gT(C.y)&&I.isInsidePlot(C.x-$+(C.width||0),C.y)&&I.isInsidePlot(C.x+$,C.y)),C[q?"show":"hide"]()}kN(this,"afterSetOffset",{xOffset:M,width:l})}adjustStackPosition({labelBox:M,verticalAlign:l,textAlign:d}){return{x:M.width/2+M.width/2*(2*mT(d)-1),y:M.height/2*2*(1-mT(l))}}getStackBox(M){let l=this.axis,d=l.chart,{boxTop:f,defaultX:g,xOffset:y,width:_,boxBottom:b}=M,C=l.stacking.usePercentage?100:V0(f,this.total,0),A=l.toPixels(C),R=M.xAxis||d.xAxis[0],I=V0(g,R.translate(this.x))+y,F=Math.abs(A-l.toPixels(b||gT(l.min)&&l.logarithmic&&l.logarithmic.lin2log(l.min)||0)),U=d.inverted,H=this.isNegative;return U?{x:(H?A:A-F)-d.plotLeft,y:R.height-I-_+R.top-d.plotTop,width:F,height:_}:{x:I+R.transB-d.plotLeft,y:(H?A-F:A)-d.plotTop,width:_,height:F}}},{getDeferredAnimation:uW}=Gr,{series:{prototype:dW}}=qr,{addEvent:NN,correctFloat:U0,defined:ON,destroyObjectProperties:hW,fireEvent:fW,isNumber:yT,objectEach:Of,pick:vT}=Mt;function pW(){let M=this.inverted;this.axes.forEach(l=>{l.stacking?.stacks&&l.hasVisibleSeries&&(l.stacking.oldStacks=l.stacking.stacks)}),this.series.forEach(l=>{let d=l.xAxis?.options||{};l.options.stacking&&l.reserveSpace()&&(l.stackKey=[l.type,vT(l.options.stack,""),M?d.top:d.left,M?d.height:d.width].join(","))})}function mW(){let M=this.stacking;if(M){let l=M.stacks;Of(l,(d,f)=>{hW(d),delete l[f]}),M.stackTotalGroup?.destroy()}}function gW(){this.stacking||(this.stacking=new wW(this))}function yW(M,l,d,f){return!ON(M)||M.x!==l||f&&M.stackKey!==f?M={x:l,index:0,key:f,stackKey:f}:M.index++,M.key=[d,l,M.index].join(","),M}function vW(){let M,l=this,d=l.yAxis,f=l.stackKey||"",g=d.stacking.stacks,y=l.getColumn("x",!0),_=l.options.stacking,b=l[_+"Stacker"];b&&[f,"-"+f].forEach(C=>{let A=y.length,R,I,F;for(;A--;)R=y[A],M=l.getStackIndicator(M,R,l.index,C),I=g[C]?.[R],(F=I?.points[M.key||""])&&b.call(l,F,I,A)})}function _W(M,l,d){let f=l.total?100/l.total:0;M[0]=U0(M[0]*f),M[1]=U0(M[1]*f),this.stackedYData[d]=M[1]}function bW(M){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&this.chart.series.length>1?dW.setStackedPoints.call(this,M,"group"):M.stacking.resetStacks())}function xW(M,l){let d,f,g,y,_,b,C,A=l||this.options.stacking;if(!A||!this.reserveSpace()||({group:"xAxis"}[A]||"yAxis")!==M.coll)return;let R=this.getColumn("x",!0),I=this.getColumn(this.pointValKey||"y",!0),F=[],U=I.length,H=this.options,$=H.threshold||0,X=H.startFromThreshold?$:0,q=H.stack,ie=l?`${this.type},${A}`:this.stackKey||"",ae="-"+ie,pe=this.negStacks,ke=M.stacking,Te=ke.stacks,Se=ke.oldStacks;for(ke.stacksTouched+=1,C=0;C<U;C++){let De=R[C]||0,Ye=I[C],Je=yT(Ye)&&Ye||0;b=(d=this.getStackIndicator(d,De,this.index)).key||"",Te[_=(f=pe&&Je<(X?0:$))?ae:ie]||(Te[_]={}),Te[_][De]||(Se[_]?.[De]?(Te[_][De]=Se[_][De],Te[_][De].total=null):Te[_][De]=new LN(M,M.options.stackLabels,!!f,De,q)),g=Te[_][De],Ye!==null?(g.points[b]=g.points[this.index]=[vT(g.cumulative,X)],ON(g.cumulative)||(g.base=b),g.touched=ke.stacksTouched,d.index>0&&this.singleStacks===!1&&(g.points[b][0]=g.points[this.index+","+De+",0"][0])):(delete g.points[b],delete g.points[this.index]);let st=g.total||0;A==="percent"?(y=f?ie:ae,st=pe&&Te[y]?.[De]?(y=Te[y][De]).total=Math.max(y.total||0,st)+Math.abs(Je):U0(st+Math.abs(Je))):A==="group"?yT(Ye)&&st++:st=U0(st+Je),A==="group"?g.cumulative=(st||1)-1:g.cumulative=U0(vT(g.cumulative,X)+Je),g.total=st,Ye!==null&&(g.points[b].push(g.cumulative),F[C]=g.cumulative,g.hasValidPoints=!0)}A==="percent"&&(ke.usePercentage=!0),A!=="group"&&(this.stackedYData=F),ke.oldStacks={}}class wW{constructor(l){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=l}buildStacks(){let l,d,f=this.axis,g=f.series,y=f.coll==="xAxis",_=f.options.reversedStacks,b=g.length;for(this.resetStacks(),this.usePercentage=!1,d=b;d--;)l=g[_?d:b-d-1],y&&l.setGroupedPoints(f),l.setStackedPoints(f);if(!y)for(d=0;d<b;d++)g[d].modifyStacks();fW(f,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,Of(this.stacks,l=>{Of(l,d=>{d.cumulative=d.total})}))}resetStacks(){Of(this.stacks,l=>{Of(l,(d,f)=>{yT(d.touched)&&d.touched<this.stacksTouched?(d.destroy(),delete l[f]):(d.total=null,d.cumulative=null)})})}renderStackTotals(){let l=this.axis,d=l.chart,f=d.renderer,g=this.stacks,y=uW(d,l.options.stackLabels?.animation||!1),_=this.stackTotalGroup=this.stackTotalGroup||f.g("stack-labels").attr({zIndex:6,opacity:0}).add();_.translate(d.plotLeft,d.plotTop),Of(g,b=>{Of(b,C=>{C.render(_)})}),_.animate({opacity:1},y)}}(S||(S={})).compose=function(M,l,d){let f=l.prototype,g=d.prototype;f.getStacks||(NN(M,"init",gW),NN(M,"destroy",mW),f.getStacks=pW,g.getStackIndicator=yW,g.modifyStacks=vW,g.percentStacker=_W,g.setGroupedPoints=bW,g.setStackedPoints=xW)};let CW=S,{defined:SW,merge:FN,isObject:MW}=Mt;class BN extends Ya{drawGraph(){let l=this.options,d=(this.gappedPath||this.getGraphPath).call(this),f=this.chart.styledMode;[this,...this.zones].forEach((g,y)=>{let _,b=g.graph,C=b?"animate":"attr",A=g.dashStyle||l.dashStyle;b?(b.endX=this.preventGraphAnimation?null:d.xMap,b.animate({d})):d.length&&(g.graph=b=this.chart.renderer.path(d).addClass("highcharts-graph"+(y?` highcharts-zone-graph-${y-1} `:" ")+(y&&g.className||"")).attr({zIndex:1}).add(this.group)),b&&!f&&(_={stroke:!y&&l.lineColor||g.color||this.color||"#cccccc","stroke-width":l.lineWidth||0,fill:this.fillGraph&&this.color||"none"},A?_.dashstyle=A:l.linecap!=="square"&&(_["stroke-linecap"]=_["stroke-linejoin"]="round"),b[C](_).shadow(l.shadow&&FN({filterUnits:"userSpaceOnUse"},MW(l.shadow)?l.shadow:{}))),b&&(b.startX=d.xMap,b.isArea=d.isArea)})}getGraphPath(l,d,f){let g=this,y=g.options,_=[],b=[],C,A=y.step,R=(l=l||g.points).reversed;return R&&l.reverse(),(A={right:1,center:2}[A]||A&&3)&&R&&(A=4-A),(l=this.getValidPoints(l,!1,y.nullInteraction||!(y.connectNulls&&!d&&!f))).forEach(function(I,F){let U,H=I.plotX,$=I.plotY,X=l[F-1],q=I.isNull||typeof $!="number";(I.leftCliff||X?.rightCliff)&&!f&&(C=!0),q&&!SW(d)&&F>0?C=!y.connectNulls:q&&!d?C=!0:(F===0||C?U=[["M",I.plotX,I.plotY]]:g.getPointSpline?U=[g.getPointSpline(l,I,F)]:A?(U=A===1?[["L",X.plotX,$]]:A===2?[["L",(X.plotX+H)/2,X.plotY],["L",(X.plotX+H)/2,$]]:[["L",H,X.plotY]]).push(["L",H,$]):U=[["L",H,$]],b.push(I.x),A&&(b.push(I.x),A===2&&b.push(I.x)),_.push.apply(_,U),C=!1)}),_.xMap=b,g.graphPath=_,_}}BN.defaultOptions=FN(Ya.defaultOptions,{legendSymbol:"lineMarker"}),qr.registerSeriesType("line",BN);let{seriesTypes:{line:_T}}=qr,{extend:EW,merge:TW,objectEach:AW,pick:ex}=Mt;class bT extends _T{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:l,options:d}=this;[this,...this.zones].forEach((f,g)=>{let y={},_=f.fillColor||d.fillColor,b=f.area,C=b?"animate":"attr";b?(b.endX=this.preventGraphAnimation?null:l.xMap,b.animate({d:l})):(y.zIndex=0,(b=f.area=this.chart.renderer.path(l).addClass("highcharts-area"+(g?` highcharts-zone-area-${g-1} `:" ")+(g&&f.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(y.fill=_||f.color||this.color,y["fill-opacity"]=_?1:d.fillOpacity??.75,b.css({pointerEvents:this.stickyTracking?"none":"auto"})),b[C](y),b.startX=l.xMap,b.shiftUnit=d.step?2:1})}getGraphPath(l){let d,f,g,y=_T.prototype.getGraphPath,_=this.options,b=_.stacking,C=this.yAxis,A=[],R=[],I=this.index,F=C.stacking.stacks[this.stackKey],U=_.threshold,H=Math.round(C.getThreshold(_.threshold)),$=ex(_.connectNulls,b==="percent"),X=function(Te,Se,De){let Ye=l[Te],Je=b&&F[Ye.x].points[I],st=Ye[De+"Null"]||0,Gt=Ye[De+"Cliff"]||0,xn,Cn,Xt=!0;Gt||st?(xn=(st?Je[0]:Je[1])+Gt,Cn=Je[0]+Gt,Xt=!!st):!b&&l[Se]&&l[Se].isNull&&(xn=Cn=U),xn!==void 0&&(R.push({plotX:d,plotY:xn===null?H:C.getThreshold(xn),isNull:Xt,isCliff:!0}),A.push({plotX:d,plotY:Cn===null?H:C.getThreshold(Cn),doCurve:!1}))};l=l||this.points,b&&(l=this.getStackPoints(l));for(let Te=0,Se=l.length;Te<Se;++Te)b||(l[Te].leftCliff=l[Te].rightCliff=l[Te].leftNull=l[Te].rightNull=void 0),f=l[Te].isNull,d=ex(l[Te].rectPlotX,l[Te].plotX),g=b?ex(l[Te].yBottom,H):H,(!f||$)&&($||X(Te,Te-1,"left"),f&&!b&&$||(R.push(l[Te]),A.push({x:Te,plotX:d,plotY:g})),$||X(Te,Te+1,"right"));let q=y.call(this,R,!0,!0);A.reversed=!0;let ie=y.call(this,A,!0,!0),ae=ie[0];ae&&ae[0]==="M"&&(ie[0]=["L",ae[1],ae[2]]);let pe=q.concat(ie);pe.length&&pe.push(["Z"]);let ke=y.call(this,R,!1,$);return this.chart.series.length>1&&b&&R.some(Te=>Te.isCliff)&&(pe.hasStackedCliffs=ke.hasStackedCliffs=!0),pe.xMap=q.xMap,this.areaPath=pe,ke}getStackPoints(l){let d=this,f=[],g=[],y=this.xAxis,_=this.yAxis,b=_.stacking.stacks[this.stackKey],C={},A=_.series,R=A.length,I=_.options.reversedStacks?1:-1,F=A.indexOf(d);if(l=l||this.points,this.options.stacking){for(let H=0;H<l.length;H++)l[H].leftNull=l[H].rightNull=void 0,C[l[H].x]=l[H];AW(b,function(H,$){H.total!==null&&g.push($)}),g.sort(function(H,$){return H-$});let U=A.map(H=>H.visible);g.forEach(function(H,$){let X=0,q,ie;if(C[H]&&!C[H].isNull)f.push(C[H]),[-1,1].forEach(function(ae){let pe=ae===1?"rightNull":"leftNull",ke=b[g[$+ae]],Te=0;if(ke){let Se=F;for(;Se>=0&&Se<R;){let De=A[Se].index;!(q=ke.points[De])&&(De===d.index?C[H][pe]=!0:U[Se]&&(ie=b[H].points[De])&&(Te-=ie[1]-ie[0])),Se+=I}}C[H][ae===1?"rightCliff":"leftCliff"]=Te});else{let ae=F;for(;ae>=0&&ae<R;){let pe=A[ae].index;if(q=b[H].points[pe]){X=q[1];break}ae+=I}X=ex(X,0),X=_.translate(X,0,1,0,1),f.push({isNull:!0,plotX:y.translate(H,0,0,0,1),x:H,plotY:X,yBottom:X})}})}return f}}bT.defaultOptions=TW(_T.defaultOptions,{threshold:0,legendSymbol:"areaMarker"}),EW(bT.prototype,{singleStacks:!1}),qr.registerSeriesType("area",bT);let{line:VN}=qr.seriesTypes,{merge:DW,pick:tx}=Mt;class xT extends VN{getPointSpline(l,d,f){let g,y,_,b,C=d.plotX||0,A=d.plotY||0,R=l[f-1],I=l[f+1];function F(H){return H&&!H.isNull&&H.doCurve!==!1&&!d.isCliff}if(F(R)&&F(I)){let H=R.plotX||0,$=R.plotY||0,X=I.plotX||0,q=I.plotY||0,ie=0;g=(1.5*C+H)/2.5,y=(1.5*A+$)/2.5,_=(1.5*C+X)/2.5,b=(1.5*A+q)/2.5,_!==g&&(ie=(b-y)*(_-C)/(_-g)+A-b),y+=ie,b+=ie,y>$&&y>A?(y=Math.max($,A),b=2*A-y):y<$&&y<A&&(y=Math.min($,A),b=2*A-y),b>q&&b>A?(b=Math.max(q,A),y=2*A-b):b<q&&b<A&&(b=Math.min(q,A),y=2*A-b),d.rightContX=_,d.rightContY=b,d.controlPoints={low:[g,y],high:[_,b]}}let U=["C",tx(R.rightContX,R.plotX,0),tx(R.rightContY,R.plotY,0),tx(g,C,0),tx(y,A,0),C,A];return R.rightContX=R.rightContY=void 0,U}}xT.defaultOptions=DW(VN.defaultOptions),qr.registerSeriesType("spline",xT);let UN=xT,{area:IW,area:{prototype:wT}}=qr.seriesTypes,{extend:PW,merge:RW}=Mt;class CT extends UN{}CT.defaultOptions=RW(UN.defaultOptions,IW.defaultOptions),PW(CT.prototype,{getGraphPath:wT.getGraphPath,getStackPoints:wT.getStackPoints,drawGraph:wT.drawGraph}),qr.registerSeriesType("areaspline",CT);let{animObject:kW}=Gr,{parse:LW}=Dn,{noop:NW}=K,{clamp:nx,crisp:ix,defined:zN,extend:HN,fireEvent:jN,isArray:WN,isNumber:rx,merge:ST,pick:z0,objectEach:OW}=Mt;class sx extends Ya{animate(l){let d,f,g=this,y=this.yAxis,_=y.pos,b=y.reversed,C=g.options,{clipOffset:A,inverted:R}=this.chart,I={},F=R?"translateX":"translateY";l&&A?(I.scaleY=.001,f=nx(y.toPixels(C.threshold||0),_,_+y.len),R?I.translateX=(f+=b?-Math.floor(A[0]):Math.ceil(A[2]))-y.len:I.translateY=f+=b?Math.ceil(A[0]):-Math.floor(A[2]),g.clipBox&&g.setClip(),g.group.attr(I)):(d=Number(g.group.attr(F)),g.group.animate({scaleY:1},HN(kW(g.options.animation),{step:function(U,H){g.group&&(I[F]=d+H.pos*(_-d),g.group.attr(I))}})))}init(l,d){super.init.apply(this,arguments);let f=this;(l=f.chart).hasRendered&&l.series.forEach(function(g){g.type===f.type&&(g.isDirty=!0)})}getColumnMetrics(){let l=this,d=l.options,f=l.xAxis,g=l.yAxis,y=f.options.reversedStacks,_=f.reversed&&!y||!f.reversed&&y,b={},C,A=0;d.grouping===!1?A=1:l.chart.series.forEach(function($){let X,q=$.yAxis,ie=$.options;$.type===l.type&&$.reserveSpace()&&g.len===q.len&&g.pos===q.pos&&(ie.stacking&&ie.stacking!=="group"?(b[C=$.stackKey]===void 0&&(b[C]=A++),X=b[C]):ie.grouping!==!1&&(X=A++),$.columnIndex=X)});let R=Math.min(Math.abs(f.transA)*(!f.brokenAxis?.hasBreaks&&f.ordinal?.slope||d.pointRange||f.closestPointRange||f.tickInterval||1),f.len),I=R*d.groupPadding,F=(R-2*I)/(A||1),U=Math.min(d.maxPointWidth||f.len,z0(d.pointWidth,F*(1-2*d.pointPadding))),H=(l.columnIndex||0)+ +!!_;return l.columnMetrics={width:U,offset:(F-U)/2+(I+H*F-R/2)*(_?-1:1),paddedWidth:F,columnCount:A},l.columnMetrics}crispCol(l,d,f,g){let y=this.borderWidth,_=this.chart.inverted;return g=ix(d+g,y,_)-(d=ix(d,y,_)),this.options.crisp&&(f=ix(l+f,y)-(l=ix(l,y))),{x:l,y:d,width:f,height:g}}adjustForMissingColumns(l,d,f,g){if(!f.isNull&&g.columnCount>1){let y=this.xAxis.series.filter(A=>A.visible).map(A=>A.index),_=0,b=0;OW(this.xAxis.stacking?.stacks,A=>{let R=typeof f.x=="number"?A[f.x.toString()]?.points:void 0,I=R?.[this.index],F={};if(R&&WN(I)){let U=this.index,H=Object.keys(R).filter($=>!$.match(",")&&R[$]&&R[$].length>1).map(parseFloat).filter($=>y.indexOf($)!==-1).filter($=>{let X=this.chart.series[$].options,q=X.stacking&&X.stack;if(zN(q)){if(rx(F[q]))return U===$&&(U=F[q]),!1;F[q]=$}return!0}).sort(($,X)=>X-$);_=H.indexOf(U),b=H.length}}),_=this.xAxis.reversed?b-1-_:_;let C=(b-1)*g.paddedWidth+d;l=(f.plotX||0)+C/2-d-_*g.paddedWidth}return l}translate(){let l=this,d=l.chart,f=l.options,g=l.dense=l.closestPointRange*l.xAxis.transA<2,y=l.borderWidth=z0(f.borderWidth,+!g),_=l.xAxis,b=l.yAxis,C=f.threshold,A=z0(f.minPointLength,5),R=l.getColumnMetrics(),I=R.width,F=l.pointXOffset=R.offset,U=l.dataMin,H=l.dataMax,$=l.translatedThreshold=b.getThreshold(C),X=l.barW=Math.max(I,1+2*y);f.pointPadding&&f.crisp&&(X=Math.ceil(X)),Ya.prototype.translate.apply(l),l.points.forEach(function(q){let ie=z0(q.yBottom,$),ae=999+Math.abs(ie),pe=q.plotX||0,ke=nx(q.plotY,-ae,b.len+ae),Te,Se=Math.min(ke,ie),De=Math.max(ke,ie)-Se,Ye=I,Je=pe+F,st=X;A&&Math.abs(De)<A&&(De=A,Te=!b.reversed&&!q.negative||b.reversed&&q.negative,rx(C)&&rx(H)&&q.y===C&&H<=C&&(b.min||0)<C&&(U!==H||(b.max||0)<=C)&&(Te=!Te,q.negative=!q.negative),Se=Math.abs(Se-$)>A?ie-A:$-(Te?A:0)),zN(q.options.pointWidth)&&(Je-=Math.round(((Ye=st=Math.ceil(q.options.pointWidth))-I)/2)),f.centerInCategory&&(Je=l.adjustForMissingColumns(Je,Ye,q,R)),q.barX=Je,q.pointWidth=Ye,q.tooltipPos=d.inverted?[nx(b.len+b.pos-d.plotLeft-ke,b.pos-d.plotLeft,b.len+b.pos-d.plotLeft),_.len+_.pos-d.plotTop-Je-st/2,De]:[_.left-d.plotLeft+Je+st/2,nx(ke+b.pos-d.plotTop,b.pos-d.plotTop,b.len+b.pos-d.plotTop),De],q.shapeType=l.pointClass.prototype.shapeType||"roundedRect",q.shapeArgs=l.crispCol(Je,Se,st,q.isNull?0:De)}),jN(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(l,d){let f=this.options,g=this.pointAttrToOptions||{},y=g.stroke||"borderColor",_=g["stroke-width"]||"borderWidth",b,C,A,R=l&&l.color||this.color,I=l&&l[y]||f[y]||R,F=l&&l.options.dashStyle||f.dashStyle,U=l&&l[_]||f[_]||this[_]||0,H=l?.isNull&&f.nullInteraction?0:l?.opacity??f.opacity??1;l&&this.zones.length&&(C=l.getZone(),R=l.options.color||C&&(C.color||l.nonZonedColor)||this.color,C&&(I=C.borderColor||I,F=C.dashStyle||F,U=C.borderWidth||U)),d&&l&&(A=(b=ST(f.states[d],l.options.states&&l.options.states[d]||{})).brightness,R=b.color||A!==void 0&&LW(R).brighten(b.brightness).get()||R,I=b[y]||I,U=b[_]||U,F=b.dashStyle||F,H=z0(b.opacity,H));let $={fill:R,stroke:I,"stroke-width":U,opacity:H};return F&&($.dashstyle=F),$}drawPoints(l=this.points){let d,f=this,g=this.chart,y=f.options,_=y.nullInteraction,b=g.renderer,C=y.animationLimit||250;l.forEach(function(A){let R=A.plotY,I=A.graphic,F=!!I,U=I&&g.pointCount<C?"animate":"attr";rx(R)&&(A.y!==null||_)?(d=A.shapeArgs,I&&A.hasNewShapeType()&&(I=I.destroy()),f.enabledDataSorting&&(A.startXPos=f.xAxis.reversed?-(d&&d.width||0):f.xAxis.width),!I&&(A.graphic=I=b[A.shapeType](d).add(A.group||f.group),I&&f.enabledDataSorting&&g.hasRendered&&g.pointCount<C&&(I.attr({x:A.startXPos}),F=!0,U="animate")),I&&F&&I[U](ST(d)),g.styledMode||I[U](f.pointAttribs(A,A.selected&&"select")).shadow(A.allowShadow!==!1&&y.shadow),I&&(I.addClass(A.getClassName(),!0),I.attr({visibility:A.visible?"inherit":"hidden"}))):I&&(A.graphic=I.destroy())})}drawTracker(l=this.points){let d,f=this,g=f.chart,y=g.pointer,_=function(b){y?.normalize(b);let C=y?.getPointFromEvent(b);y&&C&&f.options.enableMouseTracking&&(g.isInsidePlot(b.chartX-g.plotLeft,b.chartY-g.plotTop,{visiblePlotOnly:!0})||y?.inClass(b.target,"highcharts-data-label"))&&(y.isDirectTouch=!0,C.onMouseOver(b))};l.forEach(function(b){d=WN(b.dataLabels)?b.dataLabels:b.dataLabel?[b.dataLabel]:[],b.graphic&&(b.graphic.element.point=b),d.forEach(function(C){(C.div||C.element).point=b})}),f._hasTracking||(f.trackerGroups.forEach(function(b){f[b]&&(f[b].addClass("highcharts-tracker").on("mouseover",_).on("mouseout",function(C){y?.onTrackerMouseOut(C)}).on("touchstart",_),!g.styledMode&&f.options.cursor&&f[b].css({cursor:f.options.cursor}))}),f._hasTracking=!0),jN(this,"afterDrawTracker")}remove(){let l=this,d=l.chart;d.hasRendered&&d.series.forEach(function(f){f.type===l.type&&(f.isDirty=!0)}),Ya.prototype.remove.apply(l,arguments)}}sx.defaultOptions=ST(Ya.defaultOptions,{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}),HN(sx.prototype,{directTouch:!0,getSymbol:NW,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),qr.registerSeriesType("column",sx);let ox=sx,{getDeferredAnimation:FW}=Gr,{format:BW}=Fi,{defined:Ff,extend:GN,fireEvent:MT,getAlignFactor:$N,isArray:yh,isString:H0,merge:j0,objectEach:VW,pick:W0,pInt:UW,splat:qN}=Mt;(function(M){function l(){return C(this).some(R=>R?.enabled)}function d(R,I,F,U,H){let{chart:$,enabledDataSorting:X}=this,q=this.isCartesian&&$.inverted,ie=R.plotX,ae=R.plotY,pe=F.rotation||0,ke=Ff(ie)&&Ff(ae)&&$.isInsidePlot(ie,Math.round(ae),{inverted:q,paneCoordinates:!0,series:this}),Te=pe===0&&W0(F.overflow,X?"none":"justify")==="justify",Se=this.visible&&R.visible!==!1&&Ff(ie)&&(R.series.forceDL||X&&!Te||ke||W0(F.inside,!!this.options.stacking)&&U&&$.isInsidePlot(ie,q?U.x+1:U.y+U.height-1,{inverted:q,paneCoordinates:!0,series:this})),De=R.pos();if(Se&&De){var Ye;let Je=I.getBBox(),st=I.getBBox(void 0,0);if(U=GN({x:De[0],y:Math.round(De[1]),width:0,height:0},U||{}),F.alignTo==="plotEdges"&&this.isCartesian&&(U[q?"x":"y"]=0,U[q?"width":"height"]=this.yAxis?.len||0),GN(F,{width:Je.width,height:Je.height}),Ye=U,X&&this.xAxis&&!Te&&this.setDataLabelStartPos(R,I,H,ke,Ye),I.align(j0(F,{width:st.width,height:st.height}),!1,U,!1),I.alignAttr.x+=$N(F.align)*(st.width-Je.width),I.alignAttr.y+=$N(F.verticalAlign)*(st.height-Je.height),I[I.placed?"animate":"attr"]({"text-align":I.alignAttr["text-align"]||"center",x:I.alignAttr.x+(Je.width-st.width)/2,y:I.alignAttr.y+(Je.height-st.height)/2,rotationOriginX:(I.width||0)/2,rotationOriginY:(I.height||0)/2}),Te&&U.height>=0)this.justifyDataLabel(I,F,I.alignAttr,Je,U,H);else if(W0(F.crop,!0)){let{x:Gt,y:xn}=I.alignAttr;Se=$.isInsidePlot(Gt,xn,{paneCoordinates:!0,series:this})&&$.isInsidePlot(Gt+Je.width-1,xn+Je.height-1,{paneCoordinates:!0,series:this})}F.shape&&!pe&&I[H?"attr":"animate"]({anchorX:De[0],anchorY:De[1]})}H&&X&&(I.placed=!1),Se||X&&!Te?(I.show(),I.placed=!0):(I.hide(),I.placed=!1)}function f(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6,this.chart.dataLabelsGroup)}function g(R){let I=this.hasRendered||0,F=this.initDataLabelsGroup().attr({opacity:+I});return!I&&F&&(this.visible&&F.show(),this.options.animation?F.animate({opacity:1},R):F.attr({opacity:1})),F}function y(R){let I;R=R||this.points;let F=this,U=F.chart,H=F.options,$=U.renderer,{backgroundColor:X,plotBackgroundColor:q}=U.options.chart,ie=$.getContrast(H0(q)&&q||H0(X)&&X||"#000000"),ae=C(F),{animation:pe,defer:ke}=ae[0],Te=ke?FW(U,pe,F):{defer:0,duration:0};MT(this,"drawDataLabels"),F.hasDataLabels?.()&&(I=this.initDataLabels(Te),R.forEach(Se=>{let De=Se.dataLabels||[],Ye=Se.color||F.color;qN(b(ae,Se.dlOptions||Se.options?.dataLabels)).forEach((st,Gt)=>{let xn=st.enabled&&(Se.visible||Se.dataLabelOnHidden)&&(!Se.isNull||Se.dataLabelOnNull)&&function(mr,gr){let er=gr.filter;if(er){let Br=er.operator,Wo=mr[er.property],pa=er.value;return Br===">"&&Wo>pa||Br==="<"&&Wo<pa||Br===">="&&Wo>=pa||Br==="<="&&Wo<=pa||Br==="=="&&Wo==pa||Br==="==="&&Wo===pa||Br==="!="&&Wo!=pa||Br==="!=="&&Wo!==pa||!1}return!0}(Se,st),{backgroundColor:Cn,borderColor:Xt,distance:Bt,style:cn={}}=st,Tr,Ji,jo,$n={},Un=De[Gt],Xi=!Un,wi;xn&&(Ji=Ff(Tr=W0(st[Se.formatPrefix+"Format"],st.format))?BW(Tr,Se,U):(st[Se.formatPrefix+"Formatter"]||st.formatter).call(Se,st),jo=st.rotation,!U.styledMode&&(cn.color=W0(st.color,cn.color,H0(F.color)?F.color:void 0,"#000000"),cn.color==="contrast"?(Cn!=="none"&&(wi=Cn),Se.contrastColor=$.getContrast(wi!=="auto"&&H0(wi)&&wi||(H0(Ye)?Ye:"")),cn.color=wi||!Ff(Bt)&&st.inside||0>UW(Bt||0)||H.stacking?Se.contrastColor:ie):delete Se.contrastColor,H.cursor&&(cn.cursor=H.cursor)),$n={r:st.borderRadius||0,rotation:jo,padding:st.padding,zIndex:1},U.styledMode||($n.fill=Cn==="auto"?Se.color:Cn,$n.stroke=Xt==="auto"?Se.color:Xt,$n["stroke-width"]=st.borderWidth),VW($n,(mr,gr)=>{mr===void 0&&delete $n[gr]})),!Un||xn&&Ff(Ji)&&!!(Un.div||Un.text?.foreignObject)==!!st.useHTML&&(Un.rotation&&st.rotation||Un.rotation===st.rotation)||(Un=void 0,Xi=!0),xn&&Ff(Ji)&&Ji!==""&&(Un?$n.text=Ji:(Un=$.label(Ji,0,0,st.shape,void 0,void 0,st.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+Se.colorIndex+" "+(st.className||"")+(st.useHTML?" highcharts-tracker":"")),Un&&(Un.options=st,Un.attr($n),U.styledMode?cn.width&&Un.css({width:cn.width,textOverflow:cn.textOverflow,whiteSpace:cn.whiteSpace}):Un.css(cn).shadow(st.shadow),MT(Un,"beforeAddingDataLabel",{labelOptions:st,point:Se}),Un.added||Un.add(I),F.alignDataLabel(Se,Un,st,void 0,Xi),Un.isActive=!0,De[Gt]&&De[Gt]!==Un&&De[Gt].destroy(),De[Gt]=Un))});let Je=De.length;for(;Je--;)De[Je]?.isActive?De[Je].isActive=!1:(De[Je]?.destroy(),De.splice(Je,1));Se.dataLabel=De[0],Se.dataLabels=De})),MT(this,"afterDrawDataLabels")}function _(R,I,F,U,H,$){let X=this.chart,q=I.align,ie=I.verticalAlign,ae=R.box?0:R.padding||0,pe=X.inverted?this.yAxis:this.xAxis,ke=pe?pe.left-X.plotLeft:0,Te=X.inverted?this.xAxis:this.yAxis,Se=Te?Te.top-X.plotTop:0,{x:De=0,y:Ye=0}=I,Je,st;return(Je=(F.x||0)+ae+ke)<0&&(q==="right"&&De>=0?(I.align="left",I.inside=!0):De-=Je,st=!0),(Je=(F.x||0)+U.width-ae+ke)>X.plotWidth&&(q==="left"&&De<=0?(I.align="right",I.inside=!0):De+=X.plotWidth-Je,st=!0),(Je=F.y+ae+Se)<0&&(ie==="bottom"&&Ye>=0?(I.verticalAlign="top",I.inside=!0):Ye-=Je,st=!0),(Je=(F.y||0)+U.height-ae+Se)>X.plotHeight&&(ie==="top"&&Ye<=0?(I.verticalAlign="bottom",I.inside=!0):Ye+=X.plotHeight-Je,st=!0),st&&(I.x=De,I.y=Ye,R.placed=!$,R.align(I,void 0,H)),st}function b(R,I){let F=[],U;if(yh(R)&&!yh(I))F=R.map(function(H){return j0(H,I)});else if(yh(I)&&!yh(R))F=I.map(function(H){return j0(R,H)});else if(yh(R)||yh(I)){if(yh(R)&&yh(I))for(U=Math.max(R.length,I.length);U--;)F[U]=j0(R[U],I[U])}else F=j0(R,I);return F}function C(R){let I=R.chart.options.plotOptions;return qN(b(b(I?.series?.dataLabels,I?.[R.type]?.dataLabels),R.options.dataLabels))}function A(R,I,F,U,H){let $=this.chart,X=$.inverted,q=this.xAxis,ie=q.reversed,ae=((X?I.height:I.width)||0)/2,pe=R.pointWidth,ke=pe?pe/2:0;I.startXPos=X?H.x:ie?-ae-ke:q.width-ae+ke,I.startYPos=X?ie?this.yAxis.height-ae+ke:-ae-ke:H.y,U?I.visibility==="hidden"&&(I.show(),I.attr({opacity:0}).animate({opacity:1})):I.attr({opacity:1}).animate({opacity:0},void 0,I.hide),$.hasRendered&&(F&&I.attr({x:I.startXPos,y:I.startYPos}),I.placed=!0)}M.compose=function(R){let I=R.prototype;I.initDataLabels||(I.initDataLabels=g,I.initDataLabelsGroup=f,I.alignDataLabel=d,I.drawDataLabels=y,I.justifyDataLabel=_,I.mergeArrays=b,I.setDataLabelStartPos=A,I.hasDataLabels=l)}})(D||(D={}));let ax=D,{composed:zW}=K,{series:XN}=qr,{merge:HW,pushUnique:jW}=Mt;(function(M){function l(d,f,g,y,_){let{chart:b,options:C}=this,A=b.inverted,R=this.xAxis?.len||b.plotSizeX||0,I=this.yAxis?.len||b.plotSizeY||0,F=d.dlBox||d.shapeArgs,U=d.below??(d.plotY||0)>(this.translatedThreshold??I),H=g.inside??!!C.stacking;if(F){if(y=HW(F),g.overflow!=="allow"||g.crop!==!1||C.clip!==!1){y.y<0&&(y.height+=y.y,y.y=0);let $=y.y+y.height-I;$>0&&$<y.height-1&&(y.height-=$)}A&&(y={x:I-y.y-y.height,y:R-y.x-y.width,width:y.height,height:y.width}),H||(A?(y.x+=U?0:y.width,y.width=0):(y.y+=U?y.height:0,y.height=0))}g.align??(g.align=!A||H?"center":U?"right":"left"),g.verticalAlign??(g.verticalAlign=A||H?"middle":U?"top":"bottom"),XN.prototype.alignDataLabel.call(this,d,f,g,y,_),g.inside&&d.contrastColor&&f.css({color:d.contrastColor})}M.compose=function(d){ax.compose(XN),jW(zW,"ColumnDataLabel")&&(d.prototype.alignDataLabel=l)}})(O||(O={}));let WW=O,{extend:GW,merge:$W}=Mt;class ET extends ox{}ET.defaultOptions=$W(ox.defaultOptions,{}),GW(ET.prototype,{inverted:!0}),qr.registerSeriesType("bar",ET);let{column:qW,line:YN}=qr.seriesTypes,{addEvent:XW,extend:YW,merge:ZW}=Mt;class lx extends YN{applyJitter(){let l=this,d=this.options.jitter,f=this.points.length;d&&this.points.forEach(function(g,y){["x","y"].forEach(function(_,b){if(d[_]&&!g.isNull){let C=`plot${_.toUpperCase()}`,A=l[`${_}Axis`],R=d[_]*A.transA;if(A&&!A.logarithmic){let I=Math.max(0,(g[C]||0)-R),F=Math.min(A.len,(g[C]||0)+R);g[C]=I+(F-I)*function(U){let H=1e4*Math.sin(U);return H-Math.floor(H)}(y+b*f),_==="x"&&(g.clientX=g.plotX)}}})})}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}lx.defaultOptions=ZW(YN.defaultOptions,{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25CF</span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}),YW(lx.prototype,{drawTracker:qW.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),XW(lx,"afterTranslate",function(){this.applyJitter()}),qr.registerSeriesType("scatter",lx);let{deg2rad:ZN}=K,{fireEvent:KW,isNumber:TT,pick:cx,relativeLength:QW}=Mt;(function(M){M.getCenter=function(){let l=this.options,d=this.chart,f=2*(l.slicedOffset||0),g=d.plotWidth-2*f,y=d.plotHeight-2*f,_=l.center,b=Math.min(g,y),C=l.thickness,A,R=l.size,I=l.innerSize||0,F,U;typeof R=="string"&&(R=parseFloat(R)),typeof I=="string"&&(I=parseFloat(I));let H=[cx(_?.[0],"50%"),cx(_?.[1],"50%"),cx(R&&R<0?void 0:l.size,"100%"),cx(I&&I<0?void 0:l.innerSize||0,"0%")];for(!d.angular||this instanceof Ya||(H[3]=0),F=0;F<4;++F)U=H[F],A=F<2||F===2&&/%$/.test(U),H[F]=QW(U,[g,y,b,H[2]][F])+(A?f:0);return H[3]>H[2]&&(H[3]=H[2]),TT(C)&&2*C<H[2]&&C>0&&(H[3]=H[2]-2*C),KW(this,"afterGetCenter",{positions:H}),H},M.getStartAndEndRadians=function(l,d){let f=TT(l)?l:0,g=TT(d)&&d>f&&d-f<360?d:f+360;return{start:ZN*(f+-90),end:ZN*(g+-90)}}})(N||(N={}));let KN=N,{setAnimation:JW}=Gr,{addEvent:QN,defined:eG,extend:tG,isNumber:nG,pick:iG,relativeLength:rG}=Mt;class JN extends vs{getConnectorPath(l){let d=l.dataLabelPosition,f=l.options||{},g=f.connectorShape,y=this.connectorShapes[g]||g;return d&&y.call(this,Mn(Ke({},d.computed),{alignment:d.alignment}),d.connectorPosition,f)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(l){let d=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(d.x,d.y,d.r+l,d.r+l,{innerR:d.r-1,start:d.start,end:d.end,borderRadius:d.borderRadius})}constructor(l,d,f){super(l,d,f),this.half=0,this.name??(this.name=l.chart.options.lang.pieSliceName);let g=y=>{this.slice(y.type==="select")};QN(this,"select",g),QN(this,"unselect",g)}isValid(){return nG(this.y)&&this.y>=0}setVisible(l,d=!0){l!==this.visible&&this.update({visible:l??!this.visible},d,void 0,!1)}slice(l,d,f){let g=this.series;JW(f,g.chart),d=iG(d,!0),this.sliced=this.options.sliced=l=eG(l)?l:!this.sliced,g.options.data[g.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}tG(JN.prototype,{connectorShapes:{fixedOffset:function(M,l,d){let f=l.breakAt,g=l.touchingSliceAt,y=d.softConnector?["C",M.x+(M.alignment==="left"?-5:5),M.y,2*f.x-g.x,2*f.y-g.y,f.x,f.y]:["L",f.x,f.y];return[["M",M.x,M.y],y,["L",g.x,g.y]]},straight:function(M,l){let d=l.touchingSliceAt;return[["M",M.x,M.y],["L",d.x,d.y]]},crookedLine:function(M,l,d){let{angle:f=this.angle||0,breakAt:g,touchingSliceAt:y}=l,{series:_}=this,[b,C,A]=_.center,R=A/2,{plotLeft:I,plotWidth:F}=_.chart,U=M.alignment==="left",{x:H,y:$}=M,X=g.x;if(d.crookDistance){let ie=rG(d.crookDistance,1);X=U?b+R+(F+I-b-R)*(1-ie):I+(b-R)*ie}else X=b+(C-$)*Math.tan(f-Math.PI/2);let q=[["M",H,$]];return(U?X<=H&&X>=g.x:X>=H&&X<=g.x)&&q.push(["L",X,$]),q.push(["L",g.x,g.y],["L",y.x,y.y]),q}}});let{getStartAndEndRadians:sG}=KN,{noop:eO}=K,{clamp:oG,extend:aG,fireEvent:tO,merge:AT,pick:lG}=Mt;class DT extends Ya{animate(l){let d=this,f=d.points,g=d.startAngleRad;l||f.forEach(function(y){let _=y.graphic,b=y.shapeArgs;_&&b&&(_.attr({r:lG(y.startR,d.center&&d.center[3]/2),start:g,end:g}),_.animate({r:b.r,start:b.start,end:b.end},d.options.animation))})}drawEmpty(){let l,d,f=this.startAngleRad,g=this.endAngleRad,y=this.options;this.total===0&&this.center?(l=this.center[0],d=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(l,d,this.center[1]/2,0,f,g).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:wf.arc(l,d,this.center[2]/2,0,{start:f,end:g,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":y.borderWidth,fill:y.fillColor||"none",stroke:y.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let l=this.chart.renderer;this.points.forEach(function(d){d.graphic&&d.hasNewShapeType()&&(d.graphic=d.graphic.destroy()),d.graphic||(d.graphic=l[d.shapeType](d.shapeArgs).add(d.series.group),d.delayedRendering=!0)})}generatePoints(){super.generatePoints(),this.updateTotals()}getX(l,d,f,g){let y=this.center,_=this.radii?this.radii[f.index]||0:y[2]/2,b=g.dataLabelPosition,C=b?.distance||0,A=Math.asin(oG((l-y[1])/(_+C),-1,1));return y[0]+Math.cos(A)*(_+C)*(d?-1:1)+(C>0?(d?-1:1)*(g.padding||0):0)}hasData(){return!!this.dataTable.rowCount}redrawPoints(){let l,d,f,g,y=this,_=y.chart;this.drawEmpty(),y.group&&!_.styledMode&&y.group.shadow(y.options.shadow),y.points.forEach(function(b){let C={};d=b.graphic,!b.isNull&&d?(g=b.shapeArgs,l=b.getTranslate(),_.styledMode||(f=y.pointAttribs(b,b.selected&&"select")),b.delayedRendering?(d.setRadialReference(y.center).attr(g).attr(l),_.styledMode||d.attr(f).attr({"stroke-linejoin":"round"}),b.delayedRendering=!1):(d.setRadialReference(y.center),_.styledMode||AT(!0,C,f),AT(!0,C,g,l),d.animate(C)),d.attr({visibility:b.visible?"inherit":"hidden"}),d.addClass(b.getClassName(),!0)):d&&(b.graphic=d.destroy())})}sortByAngle(l,d){l.sort(function(f,g){return f.angle!==void 0&&(g.angle-f.angle)*d})}translate(l){tO(this,"translate"),this.generatePoints();let d=this.options,f=d.slicedOffset,g=sG(d.startAngle,d.endAngle),y=this.startAngleRad=g.start,_=(this.endAngleRad=g.end)-y,b=this.points,C=d.ignoreHiddenPoint,A=b.length,R,I,F,U,H,$,X,q=0;for(l||(this.center=l=this.getCenter()),$=0;$<A;$++){X=b[$],R=y+q*_,X.isValid()&&(!C||X.visible)&&(q+=X.percentage/100),I=y+q*_;let ie={x:l[0],y:l[1],r:l[2]/2,innerR:l[3]/2,start:Math.round(1e3*R)/1e3,end:Math.round(1e3*I)/1e3};X.shapeType="arc",X.shapeArgs=ie,(F=(I+R)/2)>1.5*Math.PI?F-=2*Math.PI:F<-Math.PI/2&&(F+=2*Math.PI),X.slicedTranslation={translateX:Math.round(Math.cos(F)*f),translateY:Math.round(Math.sin(F)*f)},U=Math.cos(F)*l[2]/2,H=Math.sin(F)*l[2]/2,X.tooltipPos=[l[0]+.7*U,l[1]+.7*H],X.half=+(F<-Math.PI/2||F>Math.PI/2),X.angle=F}tO(this,"afterTranslate")}updateTotals(){let l=this.points,d=l.length,f=this.options.ignoreHiddenPoint,g,y,_=0;for(g=0;g<d;g++)(y=l[g]).isValid()&&(!f||y.visible)&&(_+=y.y);for(g=0,this.total=_;g<d;g++)(y=l[g]).percentage=_>0&&(y.visible||!f)?y.y/_*100:0,y.total=_}}DT.defaultOptions=AT(Ya.defaultOptions,{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.isNull?void 0:this.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}),aG(DT.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:ox.prototype.drawTracker,getCenter:KN.getCenter,getSymbol:eO,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:ox.prototype.pointAttribs,pointClass:JN,requireSorting:!1,searchPoint:eO,trackerGroups:["group","dataLabelsGroup"]}),qr.registerSeriesType("pie",DT);let{composed:cG,noop:uG}=K,{distribute:dG}=Ql,{series:nO}=qr,{arrayMax:hG,clamp:iO,defined:rO,pick:fG,pushUnique:pG,relativeLength:sO}=Mt;(function(M){let l={radialDistributionY:function(_,b){return(b.dataLabelPosition?.top||0)+_.distributeBox.pos},radialDistributionX:function(_,b,C,A,R){let I=R.dataLabelPosition;return _.getX(C<(I?.top||0)+2||C>(I?.bottom||0)-2?A:C,b.half,b,R)},justify:function(_,b,C,A){return A[0]+(_.half?-1:1)*(C+(b.dataLabelPosition?.distance||0))},alignToPlotEdges:function(_,b,C,A){let R=_.getBBox().width;return b?R+A:C-R-A},alignToConnectors:function(_,b,C,A){let R=0,I;return _.forEach(function(F){(I=F.dataLabel.getBBox().width)>R&&(R=I)}),b?R+A:C-R-A}};function d(_,b){let C=Math.PI/2,{start:A=0,end:R=0}=_.shapeArgs||{},I=_.angle||0;b>0&&A<C&&R>C&&I>C/2&&I<1.5*C&&(I=I<=C?Math.max(C/2,(A+C)/2):Math.min(1.5*C,(C+R)/2));let{center:F,options:U}=this,H=F[2]/2,$=Math.cos(I),X=Math.sin(I),q=F[0]+$*H,ie=F[1]+X*H,ae=Math.min((U.slicedOffset||0)+(U.borderWidth||0),b/5);return{natural:{x:q+$*b,y:ie+X*b},computed:{},alignment:b<0?"center":_.half?"right":"left",connectorPosition:{angle:I,breakAt:{x:q+$*ae,y:ie+X*ae},touchingSliceAt:{x:q,y:ie}},distance:b}}function f(){let _=this,b=_.points,C=_.chart,A=C.plotWidth,R=C.plotHeight,I=C.plotLeft,F=Math.round(C.chartWidth/3),U=_.center,H=U[2]/2,$=U[1],X=[[],[]],q=[0,0,0,0],ie=_.dataLabelPositioners,ae,pe,ke,Te=0;_.visible&&_.hasDataLabels?.()&&(b.forEach(Se=>{(Se.dataLabels||[]).forEach(De=>{De.shortened&&(De.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),De.shortened=!1)})}),nO.prototype.drawDataLabels.apply(_),b.forEach(Se=>{(Se.dataLabels||[]).forEach((De,Ye)=>{let Je=U[2]/2,st=De.options,Gt=sO(st?.distance||0,Je);Ye===0&&X[Se.half].push(Se),!rO(st?.style?.width)&&De.getBBox().width>F&&(De.css({width:Math.round(.7*F)+"px"}),De.shortened=!0),De.dataLabelPosition=this.getDataLabelPosition(Se,Gt),Te=Math.max(Te,Gt)})}),X.forEach((Se,De)=>{let Ye=Se.length,Je=[],st,Gt,xn=0,Cn;Ye&&(_.sortByAngle(Se,De-.5),Te>0&&(st=Math.max(0,$-H-Te),Gt=Math.min($+H+Te,C.plotHeight),Se.forEach(Xt=>{(Xt.dataLabels||[]).forEach(Bt=>{let cn=Bt.dataLabelPosition;cn&&cn.distance>0&&(cn.top=Math.max(0,$-H-cn.distance),cn.bottom=Math.min($+H+cn.distance,C.plotHeight),xn=Bt.getBBox().height||21,Bt.lineHeight=C.renderer.fontMetrics(Bt.text||Bt).h+2*Bt.padding,Xt.distributeBox={target:(Bt.dataLabelPosition?.natural.y||0)-cn.top+Bt.lineHeight/2,size:xn,rank:Xt.y},Je.push(Xt.distributeBox))})}),dG(Je,Cn=Gt+xn-st,Cn/5)),Se.forEach(Xt=>{(Xt.dataLabels||[]).forEach(Bt=>{let cn=Bt.options||{},Tr=Xt.distributeBox,Ji=Bt.dataLabelPosition,jo=Ji?.natural.y||0,$n=cn.connectorPadding||0,Un=Bt.lineHeight||21,Xi=(Un-Bt.getBBox().height)/2,wi=0,mr=jo,gr="inherit";if(Ji){if(Je&&rO(Tr)&&Ji.distance>0&&(Tr.pos===void 0?gr="hidden":(ke=Tr.size,mr=ie.radialDistributionY(Xt,Bt))),cn.justify)wi=ie.justify(Xt,Bt,H,U);else switch(cn.alignTo){case"connectors":wi=ie.alignToConnectors(Se,De,A,I);break;case"plotEdges":wi=ie.alignToPlotEdges(Bt,De,A,I);break;default:wi=ie.radialDistributionX(_,Xt,mr-Xi,jo,Bt)}if(Ji.attribs={visibility:gr,align:Ji.alignment},Ji.posAttribs={x:wi+(cn.x||0)+({left:$n,right:-$n}[Ji.alignment]||0),y:mr+(cn.y||0)-Un/2},Ji.computed.x=wi,Ji.computed.y=mr-Xi,fG(cn.crop,!0)){let er;wi-(pe=Bt.getBBox().width)<$n&&De===1?(er=Math.round(pe-wi+$n),q[3]=Math.max(er,q[3])):wi+pe>A-$n&&De===0&&(er=Math.round(wi+pe-A+$n),q[1]=Math.max(er,q[1])),mr-ke/2<0?q[0]=Math.max(Math.round(-mr+ke/2),q[0]):mr+ke/2>R&&(q[2]=Math.max(Math.round(mr+ke/2-R),q[2])),Ji.sideOverflow=er}}})}))}),(hG(q)===0||this.verifyDataLabelOverflow(q))&&(this.placeDataLabels(),this.points.forEach(Se=>{(Se.dataLabels||[]).forEach(De=>{let{connectorColor:Ye,connectorWidth:Je=1}=De.options||{},st=De.dataLabelPosition;if(Je){let Gt;ae=De.connector,st&&st.distance>0?(Gt=!ae,ae||(De.connector=ae=C.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+Se.colorIndex+(Se.className?" "+Se.className:"")).add(_.dataLabelsGroup)),C.styledMode||ae.attr({"stroke-width":Je,stroke:Ye||Se.color||"#666666"}),ae[Gt?"attr":"animate"]({d:Se.getConnectorPath(De)}),ae.attr({visibility:st.attribs?.visibility})):ae&&(De.connector=ae.destroy())}})})))}function g(){this.points.forEach(_=>{(_.dataLabels||[]).forEach(b=>{let C=b.dataLabelPosition;C?(C.sideOverflow&&(b.css({width:Math.max(b.getBBox().width-C.sideOverflow,0)+"px",textOverflow:b.options?.style?.textOverflow||"ellipsis"}),b.shortened=!0),b.attr(C.attribs),b[b.moved?"animate":"attr"](C.posAttribs),b.moved=!0):b&&b.attr({y:-9999})}),delete _.distributeBox},this)}function y(_){let b=this.center,C=this.options,A=C.center,R=C.minSize||80,I=R,F=C.size!==null;return!F&&(A[0]!==null?I=Math.max(b[2]-Math.max(_[1],_[3]),R):(I=Math.max(b[2]-_[1]-_[3],R),b[0]+=(_[3]-_[1])/2),A[1]!==null?I=iO(I,R,b[2]-Math.max(_[0],_[2])):(I=iO(I,R,b[2]-_[0]-_[2]),b[1]+=(_[0]-_[2])/2),I<b[2]?(b[2]=I,b[3]=Math.min(C.thickness?Math.max(0,I-2*C.thickness):Math.max(0,sO(C.innerSize||0,I)),I),this.translate(b),this.drawDataLabels&&this.drawDataLabels()):F=!0),F}M.compose=function(_){if(ax.compose(nO),pG(cG,"PieDataLabel")){let b=_.prototype;b.dataLabelPositioners=l,b.alignDataLabel=uG,b.drawDataLabels=f,b.getDataLabelPosition=d,b.placeDataLabels=g,b.verifyDataLabelOverflow=y}}})(T||(T={}));let mG=T;(function(M){M.getCenterOfPoints=function(l){let d=l.reduce((f,g)=>(f.x+=g.x,f.y+=g.y,f),{x:0,y:0});return{x:d.x/l.length,y:d.y/l.length}},M.getDistanceBetweenPoints=function(l,d){return Math.sqrt(Math.pow(d.x-l.x,2)+Math.pow(d.y-l.y,2))},M.getAngleBetweenPoints=function(l,d){return Math.atan2(d.x-l.x,d.y-l.y)},M.pointInPolygon=function({x:l,y:d},f){let g=f.length,y,_,b=!1;for(y=0,_=g-1;y<g;_=y++){let[C,A]=f[y],[R,I]=f[_];A>d!=I>d&&l<(R-C)*(d-A)/(I-A)+C&&(b=!b)}return b}})(j||(j={}));let{pointInPolygon:gG}=j,{addEvent:yG,getAlignFactor:vG,fireEvent:oO,objectEach:aO,pick:_G}=Mt;function bG(M){let l=M.length,d=(R,I)=>!(I.x>=R.x+R.width||I.x+I.width<=R.x||I.y>=R.y+R.height||I.y+I.height<=R.y),f=(R,I)=>{for(let F of R)if(gG({x:F[0],y:F[1]},I))return!0;return!1},g,y,_,b,C,A=!1;for(let R=0;R<l;R++)(g=M[R])&&(g.oldOpacity=g.opacity,g.newOpacity=1,g.absoluteBox=function(I){if(I&&(!I.alignAttr||I.placed)){let F=I.box?0:I.padding||0,U=I.alignAttr||{x:I.attr("x"),y:I.attr("y")},{height:H,polygon:$,width:X}=I.getBBox(),q=vG(I.alignValue)*X;return I.width=X,I.height=H,{x:U.x+(I.parentGroup?.translateX||0)+F-q,y:U.y+(I.parentGroup?.translateY||0)+F,width:X-2*F,height:H-2*F,polygon:$}}}(g));M.sort((R,I)=>(I.labelrank||0)-(R.labelrank||0));for(let R=0;R<l;++R){b=(y=M[R])&&y.absoluteBox;let I=b?.polygon;for(let F=R+1;F<l;++F){C=(_=M[F])&&_.absoluteBox;let U=!1;if(b&&C&&y!==_&&y.newOpacity!==0&&_.newOpacity!==0&&y.visibility!=="hidden"&&_.visibility!=="hidden"){let H=C.polygon;if(I&&H&&I!==H?f(I,H)&&(U=!0):d(b,C)&&(U=!0),U){let $=y.labelrank<_.labelrank?y:_,X=$.text;$.newOpacity=0,X?.element.querySelector("textPath")&&X.hide()}}}}for(let R of M)lO(R,this)&&(A=!0);A&&oO(this,"afterHideAllOverlappingLabels")}function lO(M,l){let d,f=!1;return M&&(d=M.newOpacity,M.oldOpacity!==d&&(M.hasClass("highcharts-data-label")?(M[d?"removeClass":"addClass"]("highcharts-data-label-hidden"),f=!0,M[M.isOld?"animate":"attr"]({opacity:d},void 0,function(){l.styledMode||M.css({pointerEvents:d?"auto":"none"})}),oO(l,"afterHideOverlappingLabel")):M.attr({opacity:d})),M.isOld=!0),f}function xG(){let M=this,l=[];for(let d of M.labelCollectors||[])l=l.concat(d());for(let d of M.yAxis||[])d.stacking&&d.options.stackLabels&&!d.options.stackLabels.allowOverlap&&aO(d.stacking.stacks,f=>{aO(f,g=>{g.label&&l.push(g.label)})});for(let d of M.series||[])if(d.visible&&d.hasDataLabels?.()){let f=g=>{for(let y of g)y.visible&&(y.dataLabels||[]).forEach(_=>{let b=_.options||{};_.labelrank=_G(b.labelrank,y.labelrank,y.shapeArgs?.height),b.allowOverlap??Number(b.distance)>0?(_.oldOpacity=_.opacity,_.newOpacity=1,lO(_,M)):l.push(_)})};f(d.nodes||[]),f(d.points)}this.hideOverlappingLabels(l)}let cO={compose:function(M){let l=M.prototype;l.hideOverlappingLabels||(l.hideOverlappingLabels=bG,yG(M,"render",xG))}},{defaultOptions:wG}=_n,{noop:uO}=K,{addEvent:dO,extend:CG,isObject:hO,merge:SG,relativeLength:IT}=Mt,MG={radius:0,scope:"stack",where:void 0},fO=uO,pO=uO;function EG(M,l,d,f,g={}){let y=fO(M,l,d,f,g),{innerR:_=0,r:b=d,start:C=0,end:A=0}=g;if(g.open||!g.borderRadius)return y;let R=A-C,I=Math.sin(R/2),F=Math.max(Math.min(IT(g.borderRadius||0,b-_),(b-_)/2,b*I/(1+I)),0),U=Math.min(F,R/Math.PI*2*_),H=y.length-1;for(;H--;)(function($,X,q){let ie,ae,pe,ke=$[X],Te=$[X+1];if(Te[0]==="Z"&&(Te=$[0]),(ke[0]==="M"||ke[0]==="L")&&Te[0]==="A"?(ie=ke,ae=Te,pe=!0):ke[0]==="A"&&(Te[0]==="M"||Te[0]==="L")&&(ie=Te,ae=ke),ie&&ae&&ae.params){let Se=ae[1],De=ae[5],Ye=ae.params,{start:Je,end:st,cx:Gt,cy:xn}=Ye,Cn=De?Se-q:Se+q,Xt=Cn?Math.asin(q/Cn):0,Bt=De?Xt:-Xt,cn=Math.cos(Xt)*Cn;pe?(Ye.start=Je+Bt,ie[1]=Gt+cn*Math.cos(Je),ie[2]=xn+cn*Math.sin(Je),$.splice(X+1,0,["A",q,q,0,0,1,Gt+Se*Math.cos(Ye.start),xn+Se*Math.sin(Ye.start)])):(Ye.end=st-Bt,ae[6]=Gt+Se*Math.cos(Ye.end),ae[7]=xn+Se*Math.sin(Ye.end),$.splice(X+1,0,["A",q,q,0,0,1,Gt+cn*Math.cos(st),xn+cn*Math.sin(st)])),ae[4]=Math.abs(Ye.end-Ye.start)<Math.PI?0:1}})(y,H,H>1?U:F);return y}function TG(){if(this.options.borderRadius&&!(this.chart.is3d&&this.chart.is3d())){let{options:M,yAxis:l}=this,d=M.stacking==="percent",f=wG.plotOptions?.[this.type]?.borderRadius,g=PT(M.borderRadius,hO(f)?f:{}),y=l.options.reversed;for(let _ of this.points){let{shapeArgs:b}=_;if(_.shapeType==="roundedRect"&&b){let{width:C=0,height:A=0,y:R=0}=b,I=R,F=A;if(g.scope==="stack"&&_.stackTotal){let X=l.translate(d?100:_.stackTotal,!1,!0,!1,!0),q=l.translate(M.threshold||0,!1,!0,!1,!0),ie=this.crispCol(0,Math.min(X,q),0,Math.abs(X-q));I=ie.y,F=ie.height}let U=(_.negative?-1:1)*(y?-1:1)==-1,H=g.where;!H&&this.is("waterfall")&&Math.abs((_.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(H="all"),H||(H="end");let $=Math.min(IT(g.radius,C),C/2,H==="all"?A/2:1/0)||0;H==="end"&&(U&&(I-=$),F+=$),CG(b,{brBoxHeight:F,brBoxY:I,r:$})}}}}function PT(M,l){return hO(M)||(M={radius:M||0}),SG(MG,l,M)}function AG(){let M=PT(this.options.borderRadius);for(let l of this.points){let d=l.shapeArgs;d&&(d.borderRadius=IT(M.radius,(d.r||0)-(d.innerR||0)))}}function DG(M,l,d,f,g={}){let y=pO(M,l,d,f,g),{r:_=0,brBoxHeight:b=f,brBoxY:C=l}=g,A=l-C,R=C+b-(l+f),I=A-_>-.1?0:_,F=R-_>-.1?0:_,U=Math.max(I&&A,0),H=Math.max(F&&R,0),$=[M+I,l],X=[M+d-I,l],q=[M+d,l+I],ie=[M+d,l+f-F],ae=[M+d-F,l+f],pe=[M+F,l+f],ke=[M,l+f-F],Te=[M,l+I],Se=(De,Ye)=>Math.sqrt(Math.pow(De,2)-Math.pow(Ye,2));if(U){let De=Se(I,I-U);$[0]-=De,X[0]+=De,q[1]=Te[1]=l+I-U}if(f<I-U){let De=Se(I,I-U-f);q[0]=ie[0]=M+d-I+De,ae[0]=Math.min(q[0],ae[0]),pe[0]=Math.max(ie[0],pe[0]),ke[0]=Te[0]=M+I-De,q[1]=Te[1]=l+f}if(H){let De=Se(F,F-H);ae[0]+=De,pe[0]-=De,ie[1]=ke[1]=l+f-F+H}if(f<F-H){let De=Se(F,F-H-f);q[0]=ie[0]=M+d-F+De,X[0]=Math.min(q[0],X[0]),$[0]=Math.max(ie[0],$[0]),ke[0]=Te[0]=M+F-De,ie[1]=ke[1]=l}return y.length=0,y.push(["M",...$],["L",...X],["A",I,I,0,0,1,...q],["L",...ie],["A",F,F,0,0,1,...ae],["L",...pe],["A",F,F,0,0,1,...ke],["L",...Te],["A",I,I,0,0,1,...$],["Z"]),y}let{diffObjects:IG,extend:PG,find:RG,merge:kG,pick:ux,uniqueKey:LG}=Mt;(function(M){function l(f,g){let y=f.condition;(y.callback||function(){return this.chartWidth<=ux(y.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=ux(y.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=ux(y.minWidth,0)&&this.chartHeight>=ux(y.minHeight,0)}).call(this)&&g.push(f._id)}function d(f,g){let y=this.options.responsive,_=this.currentResponsive,b=[],C;!g&&y&&y.rules&&y.rules.forEach(I=>{I._id===void 0&&(I._id=LG()),this.matchResponsiveRule(I,b)},this);let A=kG(...b.map(I=>RG(y?.rules||[],F=>F._id===I)).map(I=>I?.chartOptions));A.isResponsiveOptions=!0,b=b.toString()||void 0;let R=_?.ruleIds;b!==R&&(_&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(_.undoOptions,f,!0),this.updatingResponsive=!1),b?((C=IG(A,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:b,mergedOptions:A,undoOptions:C},this.updatingResponsive||this.update(A,f,!0)):this.currentResponsive=void 0)}M.compose=function(f){let g=f.prototype;return g.matchResponsiveRule||PG(g,{matchResponsiveRule:l,setResponsive:d}),f}})(Z||(Z={}));let NG=Z;K.AST=Wt,K.Axis=Pr,K.Chart=mh,K.Color=Dn,K.DataLabel=ax,K.DataTableCore=qb,K.Fx=Wr,K.HTMLElement=vl,K.Legend=xN,K.LegendSymbol=aN,K.OverlappingDataLabels=K.OverlappingDataLabels||cO,K.PlotLineOrBand=W,K.Point=vs,K.Pointer=rN,K.RendererRegistry=cr,K.Series=Ya,K.SeriesRegistry=qr,K.StackItem=LN,K.SVGElement=ca,K.SVGRenderer=Oo,K.Templating=Fi,K.Tick=ks,K.Time=fn,K.Tooltip=pr,K.animate=Gr.animate,K.animObject=Gr.animObject,K.chart=mh.chart,K.color=Dn.parse,K.dateFormat=Fi.dateFormat,K.defaultOptions=_n.defaultOptions,K.distribute=Ql.distribute,K.format=Fi.format,K.getDeferredAnimation=Gr.getDeferredAnimation,K.getOptions=_n.getOptions,K.numberFormat=Fi.numberFormat,K.seriesType=qr.seriesType,K.setAnimation=Gr.setAnimation,K.setOptions=_n.setOptions,K.stop=Gr.stop,K.time=_n.defaultTime,K.timers=Wr.timers,{compose:function(M,l,d){let f=M.types.pie;if(!l.symbolCustomAttribs.includes("borderRadius")){let g=d.prototype.symbols;dO(M,"afterColumnTranslate",TG,{order:9}),dO(f,"afterTranslate",AG),l.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY"),fO=g.arc,pO=g.roundedRect,g.arc=EG,g.roundedRect=DG}},optionsToObject:PT}.compose(K.Series,K.SVGElement,K.SVGRenderer),WW.compose(K.Series.types.column),ax.compose(K.Series),L0.compose(K.Axis),vl.compose(K.SVGRenderer),xN.compose(K.Chart),Um.compose(K.Axis),cO.compose(K.Chart),mG.compose(K.Series.types.pie),W.compose(K.Chart,K.Axis),rN.compose(K.Chart),NG.compose(K.Chart),RN.compose(K.Axis,K.Chart,K.Series),CW.compose(K.Axis,K.Chart,K.Series),pr.compose(K.Pointer),Mt.extend(K,Mt);let OG=K;return le.default})())});var kH={};_O(kH,{isAnyArray:()=>rl});function rl(n){let t=ore.call(n);return t.endsWith("Array]")&&!t.includes("Big")}var ore,Tp=hx(()=>{"use strict";ore=Object.prototype.toString});function LH(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!rl(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,i=e===void 0?0:e,r=t.toIndex,s=r===void 0?n.length:r;if(i<0||i>=n.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=i||s>n.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=n[i],a=i+1;a<s;a++)n[a]>o&&(o=n[a]);return o}var NH=hx(()=>{"use strict";Tp()});function OH(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!rl(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,i=e===void 0?0:e,r=t.toIndex,s=r===void 0?n.length:r;if(i<0||i>=n.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=i||s>n.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=n[i],a=i+1;a<s;a++)n[a]<o&&(o=n[a]);return o}var FH=hx(()=>{"use strict";Tp()});var BH={};_O(BH,{default:()=>are});function are(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(rl(n)){if(n.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var e;if(t.output!==void 0){if(!rl(t.output))throw new TypeError("output option must be an array if specified");e=t.output}else e=new Array(n.length);var i=OH(n),r=LH(n);if(i===r)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var s=t.min,o=s===void 0?t.autoMinMax?i:0:s,a=t.max,u=a===void 0?t.autoMinMax?r:1:a;if(o>=u)throw new RangeError("min option must be smaller than max option");for(var h=(u-o)/(r-i),p=0;p<n.length;p++)e[p]=(n[p]-i)*h+o;return e}var VH=hx(()=>{"use strict";Tp();NH();FH()});var $H=fx(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});var Aa=(Tp(),xO(kH)),UH=(VH(),xO(BH)),RS=" ".repeat(2),jH=" ".repeat(4);function lre(){return WH(this)}function WH(n,t={}){let{maxRows:e=15,maxColumns:i=10,maxNumSize:r=8,padMinus:s="auto"}=t;return`${n.constructor.name} {
${RS}[
${jH}${cre(n,e,i,r,s)}
${RS}]
${RS}rows: ${n.rows}
${RS}columns: ${n.columns}
}`}function cre(n,t,e,i,r){let{rows:s,columns:o}=n,a=Math.min(s,t),u=Math.min(o,e),h=[];if(r==="auto"){r=!1;e:for(let p=0;p<a;p++)for(let v=0;v<u;v++)if(n.get(p,v)<0){r=!0;break e}}for(let p=0;p<a;p++){let v=[];for(let x=0;x<u;x++)v.push(ure(n.get(p,x),i,r));h.push(`${v.join(" ")}`)}return u!==o&&(h[h.length-1]+=` ... ${o-e} more columns`),a!==s&&h.push(`... ${s-t} more rows`),h.join(`
${jH}`)}function ure(n,t,e){return(n>=0&&e?` ${zH(n,t-1)}`:zH(n,t)).padEnd(t)}function zH(n,t){let e=n.toString();if(e.length<=t)return e;let i=n.toFixed(t);if(i.length>t&&(i=n.toFixed(Math.max(0,t-(i.length-t)))),i.length<=t&&!i.startsWith("0.000")&&!i.startsWith("-0.000"))return i;let r=n.toExponential(t);return r.length>t&&(r=n.toExponential(Math.max(0,t-(r.length-t)))),r.slice(0)}function dre(n,t){n.prototype.add=function(i){return typeof i=="number"?this.addS(i):this.addM(i)},n.prototype.addS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)+i);return this},n.prototype.addM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)+i.get(r,s));return this},n.add=function(i,r){return new t(i).add(r)},n.prototype.sub=function(i){return typeof i=="number"?this.subS(i):this.subM(i)},n.prototype.subS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)-i);return this},n.prototype.subM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)-i.get(r,s));return this},n.sub=function(i,r){return new t(i).sub(r)},n.prototype.subtract=n.prototype.sub,n.prototype.subtractS=n.prototype.subS,n.prototype.subtractM=n.prototype.subM,n.subtract=n.sub,n.prototype.mul=function(i){return typeof i=="number"?this.mulS(i):this.mulM(i)},n.prototype.mulS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)*i);return this},n.prototype.mulM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)*i.get(r,s));return this},n.mul=function(i,r){return new t(i).mul(r)},n.prototype.multiply=n.prototype.mul,n.prototype.multiplyS=n.prototype.mulS,n.prototype.multiplyM=n.prototype.mulM,n.multiply=n.mul,n.prototype.div=function(i){return typeof i=="number"?this.divS(i):this.divM(i)},n.prototype.divS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)/i);return this},n.prototype.divM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)/i.get(r,s));return this},n.div=function(i,r){return new t(i).div(r)},n.prototype.divide=n.prototype.div,n.prototype.divideS=n.prototype.divS,n.prototype.divideM=n.prototype.divM,n.divide=n.div,n.prototype.mod=function(i){return typeof i=="number"?this.modS(i):this.modM(i)},n.prototype.modS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)%i);return this},n.prototype.modM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)%i.get(r,s));return this},n.mod=function(i,r){return new t(i).mod(r)},n.prototype.modulus=n.prototype.mod,n.prototype.modulusS=n.prototype.modS,n.prototype.modulusM=n.prototype.modM,n.modulus=n.mod,n.prototype.and=function(i){return typeof i=="number"?this.andS(i):this.andM(i)},n.prototype.andS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)&i);return this},n.prototype.andM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)&i.get(r,s));return this},n.and=function(i,r){return new t(i).and(r)},n.prototype.or=function(i){return typeof i=="number"?this.orS(i):this.orM(i)},n.prototype.orS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)|i);return this},n.prototype.orM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)|i.get(r,s));return this},n.or=function(i,r){return new t(i).or(r)},n.prototype.xor=function(i){return typeof i=="number"?this.xorS(i):this.xorM(i)},n.prototype.xorS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)^i);return this},n.prototype.xorM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)^i.get(r,s));return this},n.xor=function(i,r){return new t(i).xor(r)},n.prototype.leftShift=function(i){return typeof i=="number"?this.leftShiftS(i):this.leftShiftM(i)},n.prototype.leftShiftS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)<<i);return this},n.prototype.leftShiftM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)<<i.get(r,s));return this},n.leftShift=function(i,r){return new t(i).leftShift(r)},n.prototype.signPropagatingRightShift=function(i){return typeof i=="number"?this.signPropagatingRightShiftS(i):this.signPropagatingRightShiftM(i)},n.prototype.signPropagatingRightShiftS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>i);return this},n.prototype.signPropagatingRightShiftM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>i.get(r,s));return this},n.signPropagatingRightShift=function(i,r){return new t(i).signPropagatingRightShift(r)},n.prototype.rightShift=function(i){return typeof i=="number"?this.rightShiftS(i):this.rightShiftM(i)},n.prototype.rightShiftS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>>i);return this},n.prototype.rightShiftM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>>i.get(r,s));return this},n.rightShift=function(i,r){return new t(i).rightShift(r)},n.prototype.zeroFillRightShift=n.prototype.rightShift,n.prototype.zeroFillRightShiftS=n.prototype.rightShiftS,n.prototype.zeroFillRightShiftM=n.prototype.rightShiftM,n.zeroFillRightShift=n.rightShift,n.prototype.not=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,~this.get(i,r));return this},n.not=function(i){return new t(i).not()},n.prototype.abs=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.abs(this.get(i,r)));return this},n.abs=function(i){return new t(i).abs()},n.prototype.acos=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.acos(this.get(i,r)));return this},n.acos=function(i){return new t(i).acos()},n.prototype.acosh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.acosh(this.get(i,r)));return this},n.acosh=function(i){return new t(i).acosh()},n.prototype.asin=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.asin(this.get(i,r)));return this},n.asin=function(i){return new t(i).asin()},n.prototype.asinh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.asinh(this.get(i,r)));return this},n.asinh=function(i){return new t(i).asinh()},n.prototype.atan=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.atan(this.get(i,r)));return this},n.atan=function(i){return new t(i).atan()},n.prototype.atanh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.atanh(this.get(i,r)));return this},n.atanh=function(i){return new t(i).atanh()},n.prototype.cbrt=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.cbrt(this.get(i,r)));return this},n.cbrt=function(i){return new t(i).cbrt()},n.prototype.ceil=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.ceil(this.get(i,r)));return this},n.ceil=function(i){return new t(i).ceil()},n.prototype.clz32=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.clz32(this.get(i,r)));return this},n.clz32=function(i){return new t(i).clz32()},n.prototype.cos=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.cos(this.get(i,r)));return this},n.cos=function(i){return new t(i).cos()},n.prototype.cosh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.cosh(this.get(i,r)));return this},n.cosh=function(i){return new t(i).cosh()},n.prototype.exp=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.exp(this.get(i,r)));return this},n.exp=function(i){return new t(i).exp()},n.prototype.expm1=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.expm1(this.get(i,r)));return this},n.expm1=function(i){return new t(i).expm1()},n.prototype.floor=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.floor(this.get(i,r)));return this},n.floor=function(i){return new t(i).floor()},n.prototype.fround=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.fround(this.get(i,r)));return this},n.fround=function(i){return new t(i).fround()},n.prototype.log=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.log(this.get(i,r)));return this},n.log=function(i){return new t(i).log()},n.prototype.log1p=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.log1p(this.get(i,r)));return this},n.log1p=function(i){return new t(i).log1p()},n.prototype.log10=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.log10(this.get(i,r)));return this},n.log10=function(i){return new t(i).log10()},n.prototype.log2=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.log2(this.get(i,r)));return this},n.log2=function(i){return new t(i).log2()},n.prototype.round=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.round(this.get(i,r)));return this},n.round=function(i){return new t(i).round()},n.prototype.sign=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.sign(this.get(i,r)));return this},n.sign=function(i){return new t(i).sign()},n.prototype.sin=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.sin(this.get(i,r)));return this},n.sin=function(i){return new t(i).sin()},n.prototype.sinh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.sinh(this.get(i,r)));return this},n.sinh=function(i){return new t(i).sinh()},n.prototype.sqrt=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.sqrt(this.get(i,r)));return this},n.sqrt=function(i){return new t(i).sqrt()},n.prototype.tan=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.tan(this.get(i,r)));return this},n.tan=function(i){return new t(i).tan()},n.prototype.tanh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.tanh(this.get(i,r)));return this},n.tanh=function(i){return new t(i).tanh()},n.prototype.trunc=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.trunc(this.get(i,r)));return this},n.trunc=function(i){return new t(i).trunc()},n.pow=function(i,r){return new t(i).pow(r)},n.prototype.pow=function(i){return typeof i=="number"?this.powS(i):this.powM(i)},n.prototype.powS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)**i);return this},n.prototype.powM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)**i.get(r,s));return this}}function Ol(n,t,e){let i=e?n.rows:n.rows-1;if(t<0||t>i)throw new RangeError("Row index out of range")}function Fl(n,t,e){let i=e?n.columns:n.columns-1;if(t<0||t>i)throw new RangeError("Column index out of range")}function ny(n,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==n.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function iy(n,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==n.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function pR(n,t){if(!Aa.isAnyArray(t))throw new TypeError("row indices must be an array");for(let e=0;e<t.length;e++)if(t[e]<0||t[e]>=n.rows)throw new RangeError("row indices are out of range")}function mR(n,t){if(!Aa.isAnyArray(t))throw new TypeError("column indices must be an array");for(let e=0;e<t.length;e++)if(t[e]<0||t[e]>=n.columns)throw new RangeError("column indices are out of range")}function sR(n,t,e,i,r){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(kS("startRow",t),kS("endRow",e),kS("startColumn",i),kS("endColumn",r),t>e||i>r||t<0||t>=n.rows||e<0||e>=n.rows||i<0||i>=n.columns||r<0||r>=n.columns)throw new RangeError("Submatrix indices are out of range")}function zS(n,t=0){let e=[];for(let i=0;i<n;i++)e.push(t);return e}function kS(n,t){if(typeof t!="number")throw new TypeError(`${n} must be a number`)}function ty(n){if(n.isEmpty())throw new Error("Empty matrix has no elements to index")}function hre(n){let t=zS(n.rows);for(let e=0;e<n.rows;++e)for(let i=0;i<n.columns;++i)t[e]+=n.get(e,i);return t}function fre(n){let t=zS(n.columns);for(let e=0;e<n.rows;++e)for(let i=0;i<n.columns;++i)t[i]+=n.get(e,i);return t}function pre(n){let t=0;for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)t+=n.get(e,i);return t}function mre(n){let t=zS(n.rows,1);for(let e=0;e<n.rows;++e)for(let i=0;i<n.columns;++i)t[e]*=n.get(e,i);return t}function gre(n){let t=zS(n.columns,1);for(let e=0;e<n.rows;++e)for(let i=0;i<n.columns;++i)t[i]*=n.get(e,i);return t}function yre(n){let t=1;for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)t*=n.get(e,i);return t}function vre(n,t,e){let i=n.rows,r=n.columns,s=[];for(let o=0;o<i;o++){let a=0,u=0,h=0;for(let p=0;p<r;p++)h=n.get(o,p)-e[o],a+=h,u+=h*h;t?s.push((u-a*a/r)/(r-1)):s.push((u-a*a/r)/r)}return s}function _re(n,t,e){let i=n.rows,r=n.columns,s=[];for(let o=0;o<r;o++){let a=0,u=0,h=0;for(let p=0;p<i;p++)h=n.get(p,o)-e[o],a+=h,u+=h*h;t?s.push((u-a*a/i)/(i-1)):s.push((u-a*a/i)/i)}return s}function bre(n,t,e){let i=n.rows,r=n.columns,s=i*r,o=0,a=0,u=0;for(let h=0;h<i;h++)for(let p=0;p<r;p++)u=n.get(h,p)-e,o+=u,a+=u*u;return t?(a-o*o/s)/(s-1):(a-o*o/s)/s}function xre(n,t){for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)n.set(e,i,n.get(e,i)-t[e])}function wre(n,t){for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)n.set(e,i,n.get(e,i)-t[i])}function Cre(n,t){for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)n.set(e,i,n.get(e,i)-t)}function Sre(n){let t=[];for(let e=0;e<n.rows;e++){let i=0;for(let r=0;r<n.columns;r++)i+=n.get(e,r)**2/(n.columns-1);t.push(Math.sqrt(i))}return t}function Mre(n,t){for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)n.set(e,i,n.get(e,i)/t[e])}function Ere(n){let t=[];for(let e=0;e<n.columns;e++){let i=0;for(let r=0;r<n.rows;r++)i+=n.get(r,e)**2/(n.rows-1);t.push(Math.sqrt(i))}return t}function Tre(n,t){for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)n.set(e,i,n.get(e,i)/t[i])}function Are(n){let t=n.size-1,e=0;for(let i=0;i<n.columns;i++)for(let r=0;r<n.rows;r++)e+=n.get(r,i)**2/t;return Math.sqrt(e)}function Dre(n,t){for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)n.set(e,i,n.get(e,i)/t)}var Lr=class n{static from1DArray(t,e,i){if(t*e!==i.length)throw new RangeError("data length does not match given dimensions");let s=new jt(t,e);for(let o=0;o<t;o++)for(let a=0;a<e;a++)s.set(o,a,i[o*e+a]);return s}static rowVector(t){let e=new jt(1,t.length);for(let i=0;i<t.length;i++)e.set(0,i,t[i]);return e}static columnVector(t){let e=new jt(t.length,1);for(let i=0;i<t.length;i++)e.set(i,0,t[i]);return e}static zeros(t,e){return new jt(t,e)}static ones(t,e){return new jt(t,e).fill(1)}static rand(t,e,i={}){if(typeof i!="object")throw new TypeError("options must be an object");let{random:r=Math.random}=i,s=new jt(t,e);for(let o=0;o<t;o++)for(let a=0;a<e;a++)s.set(o,a,r());return s}static randInt(t,e,i={}){if(typeof i!="object")throw new TypeError("options must be an object");let{min:r=0,max:s=1e3,random:o=Math.random}=i;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(s))throw new TypeError("max must be an integer");if(r>=s)throw new RangeError("min must be smaller than max");let a=s-r,u=new jt(t,e);for(let h=0;h<t;h++)for(let p=0;p<e;p++){let v=r+Math.round(o()*a);u.set(h,p,v)}return u}static eye(t,e,i){e===void 0&&(e=t),i===void 0&&(i=1);let r=Math.min(t,e),s=this.zeros(t,e);for(let o=0;o<r;o++)s.set(o,o,i);return s}static diag(t,e,i){let r=t.length;e===void 0&&(e=r),i===void 0&&(i=e);let s=Math.min(r,e,i),o=this.zeros(e,i);for(let a=0;a<s;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let i=t.rows,r=t.columns,s=new jt(i,r);for(let o=0;o<i;o++)for(let a=0;a<r;a++)s.set(o,a,Math.min(t.get(o,a),e.get(o,a)));return s}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let i=t.rows,r=t.columns,s=new this(i,r);for(let o=0;o<i;o++)for(let a=0;a<r;a++)s.set(o,a,Math.max(t.get(o,a),e.get(o,a)));return s}static checkMatrix(t){return n.isMatrix(t)?t:new jt(t)}static isMatrix(t){return t!=null&&t.klass==="Matrix"}get size(){return this.rows*this.columns}apply(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)t.call(this,e,i);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)t.push(this.get(e,i));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let i=0;i<this.columns;i++)t[e].push(this.get(e,i))}return t}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let t=0;t<this.rows;t++)if(this.get(t,t)!==0)return!1;return!0}isEchelonForm(){let t=0,e=0,i=-1,r=!0,s=!1;for(;t<this.rows&&r;){for(e=0,s=!1;e<this.columns&&s===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>i?(s=!0,i=e):(r=!1,s=!0);t++}return r}isReducedEchelonForm(){let t=0,e=0,i=-1,r=!0,s=!1;for(;t<this.rows&&r;){for(e=0,s=!1;e<this.columns&&s===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>i?(s=!0,i=e):(r=!1,s=!0);for(let o=e+1;o<this.rows;o++)this.get(t,o)!==0&&(r=!1);t++}return r}echelonForm(){let t=this.clone(),e=0,i=0;for(;e<t.rows&&i<t.columns;){let r=e;for(let s=e;s<t.rows;s++)t.get(s,i)>t.get(r,i)&&(r=s);if(t.get(r,i)===0)i++;else{t.swapRows(e,r);let s=t.get(e,i);for(let o=i;o<t.columns;o++)t.set(e,o,t.get(e,o)/s);for(let o=e+1;o<t.rows;o++){let a=t.get(o,i)/t.get(e,i);t.set(o,i,0);for(let u=i+1;u<t.columns;u++)t.set(o,u,t.get(o,u)-t.get(e,u)*a)}e++,i++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,i=t.rows,r=i-1;for(;r>=0;)if(t.maxRow(r)===0)r--;else{let s=0,o=!1;for(;s<i&&o===!1;)t.get(r,s)===1?o=!0:s++;for(let a=0;a<r;a++){let u=t.get(a,s);for(let h=s;h<e;h++){let p=t.get(a,h)-u*t.get(r,h);t.set(a,h,p)}}r--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if(typeof t!="object")throw new TypeError("options must be an object");let{rows:e=1,columns:i=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(i)||i<=0)throw new TypeError("columns must be a positive integer");let r=new jt(this.rows*e,this.columns*i);for(let s=0;s<e;s++)for(let o=0;o<i;o++)r.setSubMatrix(this,this.rows*s,this.columns*o);return r}fill(t){for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,t);return this}neg(){return this.mulS(-1)}getRow(t){Ol(this,t);let e=[];for(let i=0;i<this.columns;i++)e.push(this.get(t,i));return e}getRowVector(t){return jt.rowVector(this.getRow(t))}setRow(t,e){Ol(this,t),e=ny(this,e);for(let i=0;i<this.columns;i++)this.set(t,i,e[i]);return this}swapRows(t,e){Ol(this,t),Ol(this,e);for(let i=0;i<this.columns;i++){let r=this.get(t,i);this.set(t,i,this.get(e,i)),this.set(e,i,r)}return this}getColumn(t){Fl(this,t);let e=[];for(let i=0;i<this.rows;i++)e.push(this.get(i,t));return e}getColumnVector(t){return jt.columnVector(this.getColumn(t))}setColumn(t,e){Fl(this,t),e=iy(this,e);for(let i=0;i<this.rows;i++)this.set(i,t,e[i]);return this}swapColumns(t,e){Fl(this,t),Fl(this,e);for(let i=0;i<this.rows;i++){let r=this.get(i,t);this.set(i,t,this.get(i,e)),this.set(i,e,r)}return this}addRowVector(t){t=ny(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)+t[i]);return this}subRowVector(t){t=ny(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)-t[i]);return this}mulRowVector(t){t=ny(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)*t[i]);return this}divRowVector(t){t=ny(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)/t[i]);return this}addColumnVector(t){t=iy(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)+t[e]);return this}subColumnVector(t){t=iy(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)-t[e]);return this}mulColumnVector(t){t=iy(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)*t[e]);return this}divColumnVector(t){t=iy(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)/t[e]);return this}mulRow(t,e){Ol(this,t);for(let i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)*e);return this}mulColumn(t,e){Fl(this,t);for(let i=0;i<this.rows;i++)this.set(i,t,this.get(i,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{let e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)>e[i]&&(e[i]=this.get(i,r));return e}case"column":{let e=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)>e[r]&&(e[r]=this.get(i,r));return e}case void 0:{let e=this.get(0,0);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)>e&&(e=this.get(i,r));return e}default:throw new Error(`invalid option: ${t}`)}}maxIndex(){ty(this);let t=this.get(0,0),e=[0,0];for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)>t&&(t=this.get(i,r),e[0]=i,e[1]=r);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{let e=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)<e[i]&&(e[i]=this.get(i,r));return e}case"column":{let e=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)<e[r]&&(e[r]=this.get(i,r));return e}case void 0:{let e=this.get(0,0);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)<e&&(e=this.get(i,r));return e}default:throw new Error(`invalid option: ${t}`)}}minIndex(){ty(this);let t=this.get(0,0),e=[0,0];for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)<t&&(t=this.get(i,r),e[0]=i,e[1]=r);return e}maxRow(t){if(Ol(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let i=1;i<this.columns;i++)this.get(t,i)>e&&(e=this.get(t,i));return e}maxRowIndex(t){Ol(this,t),ty(this);let e=this.get(t,0),i=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),i[1]=r);return i}minRow(t){if(Ol(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let i=1;i<this.columns;i++)this.get(t,i)<e&&(e=this.get(t,i));return e}minRowIndex(t){Ol(this,t),ty(this);let e=this.get(t,0),i=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),i[1]=r);return i}maxColumn(t){if(Fl(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let i=1;i<this.rows;i++)this.get(i,t)>e&&(e=this.get(i,t));return e}maxColumnIndex(t){Fl(this,t),ty(this);let e=this.get(0,t),i=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),i[0]=r);return i}minColumn(t){if(Fl(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let i=1;i<this.rows;i++)this.get(i,t)<e&&(e=this.get(i,t));return e}minColumnIndex(t){Fl(this,t),ty(this);let e=this.get(0,t),i=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),i[0]=r);return i}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let i=0;i<t;i++)e.push(this.get(i,i));return e}norm(t="frobenius"){switch(t){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${t}`)}}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)t+=this.get(e,i),this.set(e,i,t);return this}dot(t){n.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let i=0;for(let r=0;r<e.length;r++)i+=e[r]*t[r];return i}mmul(t){t=jt.checkMatrix(t);let e=this.rows,i=this.columns,r=t.columns,s=new jt(e,r),o=new Float64Array(i);for(let a=0;a<r;a++){for(let u=0;u<i;u++)o[u]=t.get(u,a);for(let u=0;u<e;u++){let h=0;for(let p=0;p<i;p++)h+=this.get(u,p)*o[p];s.set(u,a,h)}}return s}mpow(t){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(t)||t<0)throw new RangeError("Exponent must be a non-negative integer");let e=jt.eye(this.rows),i=this;for(let r=t;r>=1;r/=2)(r&1)!==0&&(e=e.mmul(i)),i=i.mmul(i);return e}strassen2x2(t){t=jt.checkMatrix(t);let e=new jt(2,2),i=this.get(0,0),r=t.get(0,0),s=this.get(0,1),o=t.get(0,1),a=this.get(1,0),u=t.get(1,0),h=this.get(1,1),p=t.get(1,1),v=(i+h)*(r+p),x=(a+h)*r,S=i*(o-p),D=h*(u-r),O=(i+s)*p,N=(a-i)*(r+o),T=(s-h)*(u+p),j=v+D-O+T,Z=S+O,G=x+D,le=v-x+S+N;return e.set(0,0,j),e.set(0,1,Z),e.set(1,0,G),e.set(1,1,le),e}strassen3x3(t){t=jt.checkMatrix(t);let e=new jt(3,3),i=this.get(0,0),r=this.get(0,1),s=this.get(0,2),o=this.get(1,0),a=this.get(1,1),u=this.get(1,2),h=this.get(2,0),p=this.get(2,1),v=this.get(2,2),x=t.get(0,0),S=t.get(0,1),D=t.get(0,2),O=t.get(1,0),N=t.get(1,1),T=t.get(1,2),j=t.get(2,0),Z=t.get(2,1),G=t.get(2,2),le=(i+r+s-o-a-p-v)*N,K=(i-o)*(-S+N),oe=a*(-x+S+O-N-T-j+G),ue=(-i+o+a)*(x-S+N),te=(o+a)*(-x+S),V=i*x,se=(-i+h+p)*(x-D+T),we=(-i+h)*(D-T),he=(h+p)*(-x+D),je=(i+r+s-a-u-h-p)*T,ze=p*(-x+D+O-N-T-j+Z),de=(-s+p+v)*(N+j-Z),Re=(s-v)*(N-Z),me=s*j,$e=(p+v)*(-j+Z),tt=(-s+a+u)*(T+j-G),xt=(s-u)*(T-G),Tt=(a+u)*(-j+G),ut=r*O,Ie=u*Z,at=o*D,Rt=h*S,rt=v*G,zt=V+me+ut,Sn=le+ue+te+V+de+me+$e,dn=V+se+he+je+me+tt+Tt,Mt=K+oe+ue+V+me+tt+xt,Zi=K+ue+te+V+Ie,Bn=me+tt+xt+Tt+at,Me=V+se+we+ze+de+Re+me,hr=de+Re+me+$e+Rt,Qn=V+se+we+he+rt;return e.set(0,0,zt),e.set(0,1,Sn),e.set(0,2,dn),e.set(1,0,Mt),e.set(1,1,Zi),e.set(1,2,Bn),e.set(2,0,Me),e.set(2,1,hr),e.set(2,2,Qn),e}mmulStrassen(t){t=jt.checkMatrix(t);let e=this.clone(),i=e.rows,r=e.columns,s=t.rows,o=t.columns;r!==s&&console.warn(`Multiplying ${i} x ${r} and ${s} x ${o} matrix: dimensions do not match.`);function a(v,x,S){let D=v.rows,O=v.columns;if(D===x&&O===S)return v;{let N=n.zeros(x,S);return N=N.setSubMatrix(v,0,0),N}}let u=Math.max(i,s),h=Math.max(r,o);e=a(e,u,h),t=a(t,u,h);function p(v,x,S,D){if(S<=512||D<=512)return v.mmul(x);S%2===1&&D%2===1?(v=a(v,S+1,D+1),x=a(x,S+1,D+1)):S%2===1?(v=a(v,S+1,D),x=a(x,S+1,D)):D%2===1&&(v=a(v,S,D+1),x=a(x,S,D+1));let O=parseInt(v.rows/2,10),N=parseInt(v.columns/2,10),T=v.subMatrix(0,O-1,0,N-1),j=x.subMatrix(0,O-1,0,N-1),Z=v.subMatrix(0,O-1,N,v.columns-1),G=x.subMatrix(0,O-1,N,x.columns-1),le=v.subMatrix(O,v.rows-1,0,N-1),K=x.subMatrix(O,x.rows-1,0,N-1),oe=v.subMatrix(O,v.rows-1,N,v.columns-1),ue=x.subMatrix(O,x.rows-1,N,x.columns-1),te=p(n.add(T,oe),n.add(j,ue),O,N),V=p(n.add(le,oe),j,O,N),se=p(T,n.sub(G,ue),O,N),we=p(oe,n.sub(K,j),O,N),he=p(n.add(T,Z),ue,O,N),je=p(n.sub(le,T),n.add(j,G),O,N),ze=p(n.sub(Z,oe),n.add(K,ue),O,N),de=n.add(te,we);de.sub(he),de.add(ze);let Re=n.add(se,he),me=n.add(V,we),$e=n.sub(te,V);$e.add(se),$e.add(je);let tt=n.zeros(2*de.rows,2*de.columns);return tt=tt.setSubMatrix(de,0,0),tt=tt.setSubMatrix(Re,de.rows,0),tt=tt.setSubMatrix(me,0,de.columns),tt=tt.setSubMatrix($e,de.rows,de.columns),tt.subMatrix(0,S-1,0,D-1)}return p(e,t,u,h)}scaleRows(t={}){if(typeof t!="object")throw new TypeError("options must be an object");let{min:e=0,max:i=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(e>=i)throw new RangeError("min must be smaller than max");let r=new jt(this.rows,this.columns);for(let s=0;s<this.rows;s++){let o=this.getRow(s);o.length>0&&UH(o,{min:e,max:i,output:o}),r.setRow(s,o)}return r}scaleColumns(t={}){if(typeof t!="object")throw new TypeError("options must be an object");let{min:e=0,max:i=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(e>=i)throw new RangeError("min must be smaller than max");let r=new jt(this.rows,this.columns);for(let s=0;s<this.columns;s++){let o=this.getColumn(s);o.length&&UH(o,{min:e,max:i,output:o}),r.setColumn(s,o)}return r}flipRows(){let t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let i=0;i<t;i++){let r=this.get(e,i),s=this.get(e,this.columns-1-i);this.set(e,i,s),this.set(e,this.columns-1-i,r)}return this}flipColumns(){let t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let i=0;i<t;i++){let r=this.get(i,e),s=this.get(this.rows-1-i,e);this.set(i,e,s),this.set(this.rows-1-i,e,r)}return this}kroneckerProduct(t){t=jt.checkMatrix(t);let e=this.rows,i=this.columns,r=t.rows,s=t.columns,o=new jt(e*r,i*s);for(let a=0;a<e;a++)for(let u=0;u<i;u++)for(let h=0;h<r;h++)for(let p=0;p<s;p++)o.set(r*a+h,s*u+p,this.get(a,u)*t.get(h,p));return o}kroneckerSum(t){if(t=jt.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,i=t.rows,r=this.kroneckerProduct(jt.eye(i,i)),s=jt.eye(e,e).kroneckerProduct(t);return r.add(s)}transpose(){let t=new jt(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)t.set(i,e,this.get(e,i));return t}sortRows(t=HH){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=HH){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,i,r){sR(this,t,e,i,r);let s=new jt(e-t+1,r-i+1);for(let o=t;o<=e;o++)for(let a=i;a<=r;a++)s.set(o-t,a-i,this.get(o,a));return s}subMatrixRow(t,e,i){if(e===void 0&&(e=0),i===void 0&&(i=this.columns-1),e>i||e<0||e>=this.columns||i<0||i>=this.columns)throw new RangeError("Argument out of range");let r=new jt(t.length,i-e+1);for(let s=0;s<t.length;s++)for(let o=e;o<=i;o++){if(t[s]<0||t[s]>=this.rows)throw new RangeError(`Row index out of range: ${t[s]}`);r.set(s,o-e,this.get(t[s],o))}return r}subMatrixColumn(t,e,i){if(e===void 0&&(e=0),i===void 0&&(i=this.rows-1),e>i||e<0||e>=this.rows||i<0||i>=this.rows)throw new RangeError("Argument out of range");let r=new jt(i-e+1,t.length);for(let s=0;s<t.length;s++)for(let o=e;o<=i;o++){if(t[s]<0||t[s]>=this.columns)throw new RangeError(`Column index out of range: ${t[s]}`);r.set(o-e,s,this.get(o,t[s]))}return r}setSubMatrix(t,e,i){if(t=jt.checkMatrix(t),t.isEmpty())return this;let r=e+t.rows-1,s=i+t.columns-1;sR(this,e,r,i,s);for(let o=0;o<t.rows;o++)for(let a=0;a<t.columns;a++)this.set(e+o,i+a,t.get(o,a));return this}selection(t,e){pR(this,t),mR(this,e);let i=new jt(t.length,e.length);for(let r=0;r<t.length;r++){let s=t[r];for(let o=0;o<e.length;o++){let a=e[o];i.set(r,o,this.get(s,a))}}return i}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let i=0;i<t;i++)e+=this.get(i,i);return e}clone(){return this.constructor.copy(this,new jt(this.rows,this.columns))}static copy(t,e){for(let[i,r,s]of t.entries())e.set(i,r,s);return e}sum(t){switch(t){case"row":return hre(this);case"column":return fre(this);case void 0:return pre(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return mre(this);case"column":return gre(this);case void 0:return yre(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){let e=this.sum(t);switch(t){case"row":{for(let i=0;i<this.rows;i++)e[i]/=this.columns;return e}case"column":{for(let i=0;i<this.columns;i++)e[i]/=this.rows;return e}case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");let{unbiased:i=!0,mean:r=this.mean(t)}=e;if(typeof i!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":{if(!Aa.isAnyArray(r))throw new TypeError("mean must be an array");return vre(this,i,r)}case"column":{if(!Aa.isAnyArray(r))throw new TypeError("mean must be an array");return _re(this,i,r)}case void 0:{if(typeof r!="number")throw new TypeError("mean must be a number");return bre(this,i,r)}default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){typeof t=="object"&&(e=t,t=void 0);let i=this.variance(t,e);if(t===void 0)return Math.sqrt(i);for(let r=0;r<i.length;r++)i[r]=Math.sqrt(i[r]);return i}center(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");let{center:i=this.mean(t)}=e;switch(t){case"row":{if(!Aa.isAnyArray(i))throw new TypeError("center must be an array");return xre(this,i),this}case"column":{if(!Aa.isAnyArray(i))throw new TypeError("center must be an array");return wre(this,i),this}case void 0:{if(typeof i!="number")throw new TypeError("center must be a number");return Cre(this,i),this}default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");let i=e.scale;switch(t){case"row":{if(i===void 0)i=Sre(this);else if(!Aa.isAnyArray(i))throw new TypeError("scale must be an array");return Mre(this,i),this}case"column":{if(i===void 0)i=Ere(this);else if(!Aa.isAnyArray(i))throw new TypeError("scale must be an array");return Tre(this,i),this}case void 0:{if(i===void 0)i=Are(this);else if(typeof i!="number")throw new TypeError("scale must be a number");return Dre(this,i),this}default:throw new Error(`invalid option: ${t}`)}}toString(t){return WH(this,t)}[Symbol.iterator](){return this.entries()}*entries(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield[t,e,this.get(t,e)]}*values(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield this.get(t,e)}};Lr.prototype.klass="Matrix";typeof Symbol<"u"&&(Lr.prototype[Symbol.for("nodejs.util.inspect.custom")]=lre);function HH(n,t){return n-t}function Ire(n){return n.every(t=>typeof t=="number")}Lr.random=Lr.rand;Lr.randomInt=Lr.randInt;Lr.diagonal=Lr.diag;Lr.prototype.diagonal=Lr.prototype.diag;Lr.identity=Lr.eye;Lr.prototype.negate=Lr.prototype.neg;Lr.prototype.tensorProduct=Lr.prototype.kroneckerProduct;var jt=class n extends Lr{data;#e(t,e){if(this.data=[],Number.isInteger(e)&&e>=0)for(let i=0;i<t;i++)this.data.push(new Float64Array(e));else throw new TypeError("nColumns must be a positive integer");this.rows=t,this.columns=e}constructor(t,e){if(super(),n.isMatrix(t))this.#e(t.rows,t.columns),n.copy(t,this);else if(Number.isInteger(t)&&t>=0)this.#e(t,e);else if(Aa.isAnyArray(t)){let i=t;if(t=i.length,e=t?i[0].length:0,typeof e!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let r=0;r<t;r++){if(i[r].length!==e)throw new RangeError("Inconsistent array dimensions");if(!Ire(i[r]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(i[r]))}this.rows=t,this.columns=e}else throw new TypeError("First argument must be a positive number or an array")}set(t,e,i){return this.data[t][e]=i,this}get(t,e){return this.data[t][e]}removeRow(t){return Ol(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return e===void 0&&(e=t,t=this.rows),Ol(this,t,!0),e=Float64Array.from(ny(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){Fl(this,t);for(let e=0;e<this.rows;e++){let i=new Float64Array(this.columns-1);for(let r=0;r<t;r++)i[r]=this.data[e][r];for(let r=t+1;r<this.columns;r++)i[r-1]=this.data[e][r];this.data[e]=i}return this.columns-=1,this}addColumn(t,e){typeof e>"u"&&(e=t,t=this.columns),Fl(this,t,!0),e=iy(this,e);for(let i=0;i<this.rows;i++){let r=new Float64Array(this.columns+1),s=0;for(;s<t;s++)r[s]=this.data[i][s];for(r[s++]=e[i];s<this.columns+1;s++)r[s]=this.data[i][s-1];this.data[i]=r}return this.columns+=1,this}};dre(Lr,jt);var Ap=class n extends Lr{#e;get size(){return this.#e.size}get rows(){return this.#e.rows}get columns(){return this.#e.columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(t){return jt.isMatrix(t)&&t.klassType==="SymmetricMatrix"}static zeros(t){return new this(t)}static ones(t){return new this(t).fill(1)}constructor(t){if(super(),jt.isMatrix(t)){if(!t.isSymmetric())throw new TypeError("not symmetric data");this.#e=jt.copy(t,new jt(t.rows,t.rows))}else if(Number.isInteger(t)&&t>=0)this.#e=new jt(t,t);else if(this.#e=new jt(t),!this.isSymmetric())throw new TypeError("not symmetric data")}clone(){let t=new n(this.diagonalSize);for(let[e,i,r]of this.upperRightEntries())t.set(e,i,r);return t}toMatrix(){return new jt(this)}get(t,e){return this.#e.get(t,e)}set(t,e,i){return this.#e.set(t,e,i),this.#e.set(e,t,i),this}removeCross(t){return this.#e.removeRow(t),this.#e.removeColumn(t),this}addCross(t,e){e===void 0&&(e=t,t=this.diagonalSize);let i=e.slice();return i.splice(t,1),this.#e.addRow(t,i),this.#e.addColumn(t,e),this}applyMask(t){if(t.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");let e=[];for(let[i,r]of t.entries())r||e.push(i);e.reverse();for(let i of e)this.removeCross(i);return this}toCompact(){let{diagonalSize:t}=this,e=new Array(t*(t+1)/2);for(let i=0,r=0,s=0;s<e.length;s++)e[s]=this.get(r,i),++i>=t&&(i=++r);return e}static fromCompact(t){let e=t.length,i=(Math.sqrt(8*e+1)-1)/2;if(!Number.isInteger(i))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(t)}`);let r=new n(i);for(let s=0,o=0,a=0;a<e;a++)r.set(s,o,t[a]),++s>=i&&(s=++o);return r}*upperRightEntries(){for(let t=0,e=0;t<this.diagonalSize;void 0){let i=this.get(t,e);yield[t,e,i],++e>=this.diagonalSize&&(e=++t)}}*upperRightValues(){for(let t=0,e=0;t<this.diagonalSize;void 0)yield this.get(t,e),++e>=this.diagonalSize&&(e=++t)}};Ap.prototype.klassType="SymmetricMatrix";var OS=class n extends Ap{static isDistanceMatrix(t){return Ap.isSymmetricMatrix(t)&&t.klassSubType==="DistanceMatrix"}constructor(t){if(super(t),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(t,e,i){return t===e&&(i=0),super.set(t,e,i)}addCross(t,e){return e===void 0&&(e=t,t=this.diagonalSize),e=e.slice(),e[t]=0,super.addCross(t,e)}toSymmetricMatrix(){return new Ap(this)}clone(){let t=new n(this.diagonalSize);for(let[e,i,r]of this.upperRightEntries())e!==i&&t.set(e,i,r);return t}toCompact(){let{diagonalSize:t}=this,e=(t-1)*t/2,i=new Array(e);for(let r=1,s=0,o=0;o<i.length;o++)i[o]=this.get(s,r),++r>=t&&(r=++s+1);return i}static fromCompact(t){let e=t.length;if(e===0)return new this(0);let i=(Math.sqrt(8*e+1)+1)/2;if(!Number.isInteger(i))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(t)}`);let r=new this(i);for(let s=1,o=0,a=0;a<e;a++)r.set(s,o,t[a]),++s>=i&&(s=++o+1);return r}};OS.prototype.klassSubType="DistanceMatrix";var Mc=class extends Lr{constructor(t,e,i){super(),this.matrix=t,this.rows=e,this.columns=i}},oR=class extends Mc{constructor(t,e){Fl(t,e),super(t,t.rows,1),this.column=e}set(t,e,i){return this.matrix.set(t,this.column,i),this}get(t){return this.matrix.get(t,this.column)}},aR=class extends Mc{constructor(t,e){mR(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,i){return this.matrix.set(t,this.columnIndices[e],i),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}},lR=class extends Mc{constructor(t){super(t,t.rows,t.columns)}set(t,e,i){return this.matrix.set(t,this.columns-e-1,i),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}},cR=class extends Mc{constructor(t){super(t,t.rows,t.columns)}set(t,e,i){return this.matrix.set(this.rows-t-1,e,i),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}},uR=class extends Mc{constructor(t,e){Ol(t,e),super(t,1,t.columns),this.row=e}set(t,e,i){return this.matrix.set(this.row,e,i),this}get(t,e){return this.matrix.get(this.row,e)}},dR=class extends Mc{constructor(t,e){pR(t,e),super(t,e.length,t.columns),this.rowIndices=e}set(t,e,i){return this.matrix.set(this.rowIndices[t],e,i),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}},ry=class extends Mc{constructor(t,e,i){pR(t,e),mR(t,i),super(t,e.length,i.length),this.rowIndices=e,this.columnIndices=i}set(t,e,i){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],i),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}},hR=class extends Mc{constructor(t,e,i,r,s){sR(t,e,i,r,s),super(t,i-e+1,s-r+1),this.startRow=e,this.startColumn=r}set(t,e,i){return this.matrix.set(this.startRow+t,this.startColumn+e,i),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}},fR=class extends Mc{constructor(t){super(t,t.columns,t.rows)}set(t,e,i){return this.matrix.set(e,t,i),this}get(t,e){return this.matrix.get(e,t)}},FS=class extends Lr{constructor(t,e={}){let{rows:i=1}=e;if(t.length%i!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=i,this.columns=t.length/i,this.data=t}set(t,e,i){let r=this._calculateIndex(t,e);return this.data[r]=i,this}get(t,e){let i=this._calculateIndex(t,e);return this.data[i]}_calculateIndex(t,e){return t*this.columns+e}},ta=class extends Lr{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,i){return this.data[t][e]=i,this}get(t,e){return this.data[t][e]}};function Pre(n,t){if(Aa.isAnyArray(n))return n[0]&&Aa.isAnyArray(n[0])?new ta(n):new FS(n,t);throw new Error("the argument is not an array")}var sy=class{constructor(t){t=ta.checkMatrix(t);let e=t.clone(),i=e.rows,r=e.columns,s=new Float64Array(i),o=1,a,u,h,p,v,x,S,D,O;for(a=0;a<i;a++)s[a]=a;for(D=new Float64Array(i),u=0;u<r;u++){for(a=0;a<i;a++)D[a]=e.get(a,u);for(a=0;a<i;a++){for(O=Math.min(a,u),v=0,h=0;h<O;h++)v+=e.get(a,h)*D[h];D[a]-=v,e.set(a,u,D[a])}for(p=u,a=u+1;a<i;a++)Math.abs(D[a])>Math.abs(D[p])&&(p=a);if(p!==u){for(h=0;h<r;h++)x=e.get(p,h),e.set(p,h,e.get(u,h)),e.set(u,h,x);S=s[p],s[p]=s[u],s[u]=S,o=-o}if(u<i&&e.get(u,u)!==0)for(a=u+1;a<i;a++)e.set(a,u,e.get(a,u)/e.get(u,u))}this.LU=e,this.pivotVector=s,this.pivotSign=o}isSingular(){let t=this.LU,e=t.columns;for(let i=0;i<e;i++)if(t.get(i,i)===0)return!0;return!1}solve(t){t=jt.checkMatrix(t);let e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let r=t.columns,s=t.subMatrixRow(this.pivotVector,0,r-1),o=e.columns,a,u,h;for(h=0;h<o;h++)for(a=h+1;a<o;a++)for(u=0;u<r;u++)s.set(a,u,s.get(a,u)-s.get(h,u)*e.get(a,h));for(h=o-1;h>=0;h--){for(u=0;u<r;u++)s.set(h,u,s.get(h,u)/e.get(h,h));for(a=0;a<h;a++)for(u=0;u<r;u++)s.set(a,u,s.get(a,u)-s.get(h,u)*e.get(a,h))}return s}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,i=t.columns;for(let r=0;r<i;r++)e*=t.get(r,r);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,i=t.columns,r=new jt(e,i);for(let s=0;s<e;s++)for(let o=0;o<i;o++)s>o?r.set(s,o,t.get(s,o)):s===o?r.set(s,o,1):r.set(s,o,0);return r}get upperTriangularMatrix(){let t=this.LU,e=t.rows,i=t.columns,r=new jt(e,i);for(let s=0;s<e;s++)for(let o=0;o<i;o++)s<=o?r.set(s,o,t.get(s,o)):r.set(s,o,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}};function _d(n,t){let e=0;return Math.abs(n)>Math.abs(t)?(e=t/n,Math.abs(n)*Math.sqrt(1+e*e)):t!==0?(e=n/t,Math.abs(t)*Math.sqrt(1+e*e)):0}var __=class{constructor(t){t=ta.checkMatrix(t);let e=t.clone(),i=t.rows,r=t.columns,s=new Float64Array(r),o,a,u,h;for(u=0;u<r;u++){let p=0;for(o=u;o<i;o++)p=_d(p,e.get(o,u));if(p!==0){for(e.get(u,u)<0&&(p=-p),o=u;o<i;o++)e.set(o,u,e.get(o,u)/p);for(e.set(u,u,e.get(u,u)+1),a=u+1;a<r;a++){for(h=0,o=u;o<i;o++)h+=e.get(o,u)*e.get(o,a);for(h=-h/e.get(u,u),o=u;o<i;o++)e.set(o,a,e.get(o,a)+h*e.get(o,u))}}s[u]=-p}this.QR=e,this.Rdiag=s}solve(t){t=jt.checkMatrix(t);let e=this.QR,i=e.rows;if(t.rows!==i)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r=t.columns,s=t.clone(),o=e.columns,a,u,h,p;for(h=0;h<o;h++)for(u=0;u<r;u++){for(p=0,a=h;a<i;a++)p+=e.get(a,h)*s.get(a,u);for(p=-p/e.get(h,h),a=h;a<i;a++)s.set(a,u,s.get(a,u)+p*e.get(a,h))}for(h=o-1;h>=0;h--){for(u=0;u<r;u++)s.set(h,u,s.get(h,u)/this.Rdiag[h]);for(a=0;a<h;a++)for(u=0;u<r;u++)s.set(a,u,s.get(a,u)-s.get(h,u)*e.get(a,h))}return s.subMatrix(0,o-1,0,r-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(this.Rdiag[e]===0)return!1;return!0}get upperTriangularMatrix(){let t=this.QR,e=t.columns,i=new jt(e,e),r,s;for(r=0;r<e;r++)for(s=0;s<e;s++)r<s?i.set(r,s,t.get(r,s)):r===s?i.set(r,s,this.Rdiag[r]):i.set(r,s,0);return i}get orthogonalMatrix(){let t=this.QR,e=t.rows,i=t.columns,r=new jt(e,i),s,o,a,u;for(a=i-1;a>=0;a--){for(s=0;s<e;s++)r.set(s,a,0);for(r.set(a,a,1),o=a;o<i;o++)if(t.get(a,a)!==0){for(u=0,s=a;s<e;s++)u+=t.get(s,a)*r.get(s,o);for(u=-u/t.get(a,a),s=a;s<e;s++)r.set(s,o,r.get(s,o)+u*t.get(s,a))}}return r}},Vh=class{constructor(t,e={}){if(t=ta.checkMatrix(t),t.isEmpty())throw new Error("Matrix must be non-empty");let i=t.rows,r=t.columns,{computeLeftSingularVectors:s=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=e,u=!!s,h=!!o,p=!1,v;if(i<r)if(!a)v=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{v=t.transpose(),i=v.rows,r=v.columns,p=!0;let V=u;u=h,h=V}else v=t.clone();let x=Math.min(i,r),S=Math.min(i+1,r),D=new Float64Array(S),O=new jt(i,x),N=new jt(r,r),T=new Float64Array(r),j=new Float64Array(i),Z=new Float64Array(S);for(let V=0;V<S;V++)Z[V]=V;let G=Math.min(i-1,r),le=Math.max(0,Math.min(r-2,i)),K=Math.max(G,le);for(let V=0;V<K;V++){if(V<G){D[V]=0;for(let se=V;se<i;se++)D[V]=_d(D[V],v.get(se,V));if(D[V]!==0){v.get(V,V)<0&&(D[V]=-D[V]);for(let se=V;se<i;se++)v.set(se,V,v.get(se,V)/D[V]);v.set(V,V,v.get(V,V)+1)}D[V]=-D[V]}for(let se=V+1;se<r;se++){if(V<G&&D[V]!==0){let we=0;for(let he=V;he<i;he++)we+=v.get(he,V)*v.get(he,se);we=-we/v.get(V,V);for(let he=V;he<i;he++)v.set(he,se,v.get(he,se)+we*v.get(he,V))}T[se]=v.get(V,se)}if(u&&V<G)for(let se=V;se<i;se++)O.set(se,V,v.get(se,V));if(V<le){T[V]=0;for(let se=V+1;se<r;se++)T[V]=_d(T[V],T[se]);if(T[V]!==0){T[V+1]<0&&(T[V]=0-T[V]);for(let se=V+1;se<r;se++)T[se]/=T[V];T[V+1]+=1}if(T[V]=-T[V],V+1<i&&T[V]!==0){for(let se=V+1;se<i;se++)j[se]=0;for(let se=V+1;se<i;se++)for(let we=V+1;we<r;we++)j[se]+=T[we]*v.get(se,we);for(let se=V+1;se<r;se++){let we=-T[se]/T[V+1];for(let he=V+1;he<i;he++)v.set(he,se,v.get(he,se)+we*j[he])}}if(h)for(let se=V+1;se<r;se++)N.set(se,V,T[se])}}let oe=Math.min(r,i+1);if(G<r&&(D[G]=v.get(G,G)),i<oe&&(D[oe-1]=0),le+1<oe&&(T[le]=v.get(le,oe-1)),T[oe-1]=0,u){for(let V=G;V<x;V++){for(let se=0;se<i;se++)O.set(se,V,0);O.set(V,V,1)}for(let V=G-1;V>=0;V--)if(D[V]!==0){for(let se=V+1;se<x;se++){let we=0;for(let he=V;he<i;he++)we+=O.get(he,V)*O.get(he,se);we=-we/O.get(V,V);for(let he=V;he<i;he++)O.set(he,se,O.get(he,se)+we*O.get(he,V))}for(let se=V;se<i;se++)O.set(se,V,-O.get(se,V));O.set(V,V,1+O.get(V,V));for(let se=0;se<V-1;se++)O.set(se,V,0)}else{for(let se=0;se<i;se++)O.set(se,V,0);O.set(V,V,1)}}if(h)for(let V=r-1;V>=0;V--){if(V<le&&T[V]!==0)for(let se=V+1;se<r;se++){let we=0;for(let he=V+1;he<r;he++)we+=N.get(he,V)*N.get(he,se);we=-we/N.get(V+1,V);for(let he=V+1;he<r;he++)N.set(he,se,N.get(he,se)+we*N.get(he,V))}for(let se=0;se<r;se++)N.set(se,V,0);N.set(V,V,1)}let ue=oe-1,te=Number.EPSILON;for(;oe>0;){let V,se;for(V=oe-2;V>=-1&&V!==-1;V--){let we=Number.MIN_VALUE+te*Math.abs(D[V]+Math.abs(D[V+1]));if(Math.abs(T[V])<=we||Number.isNaN(T[V])){T[V]=0;break}}if(V===oe-2)se=4;else{let we;for(we=oe-1;we>=V&&we!==V;we--){let he=(we!==oe?Math.abs(T[we]):0)+(we!==V+1?Math.abs(T[we-1]):0);if(Math.abs(D[we])<=te*he){D[we]=0;break}}we===V?se=3:we===oe-1?se=1:(se=2,V=we)}switch(V++,se){case 1:{let we=T[oe-2];T[oe-2]=0;for(let he=oe-2;he>=V;he--){let je=_d(D[he],we),ze=D[he]/je,de=we/je;if(D[he]=je,he!==V&&(we=-de*T[he-1],T[he-1]=ze*T[he-1]),h)for(let Re=0;Re<r;Re++)je=ze*N.get(Re,he)+de*N.get(Re,oe-1),N.set(Re,oe-1,-de*N.get(Re,he)+ze*N.get(Re,oe-1)),N.set(Re,he,je)}break}case 2:{let we=T[V-1];T[V-1]=0;for(let he=V;he<oe;he++){let je=_d(D[he],we),ze=D[he]/je,de=we/je;if(D[he]=je,we=-de*T[he],T[he]=ze*T[he],u)for(let Re=0;Re<i;Re++)je=ze*O.get(Re,he)+de*O.get(Re,V-1),O.set(Re,V-1,-de*O.get(Re,he)+ze*O.get(Re,V-1)),O.set(Re,he,je)}break}case 3:{let we=Math.max(Math.abs(D[oe-1]),Math.abs(D[oe-2]),Math.abs(T[oe-2]),Math.abs(D[V]),Math.abs(T[V])),he=D[oe-1]/we,je=D[oe-2]/we,ze=T[oe-2]/we,de=D[V]/we,Re=T[V]/we,me=((je+he)*(je-he)+ze*ze)/2,$e=he*ze*(he*ze),tt=0;(me!==0||$e!==0)&&(me<0?tt=0-Math.sqrt(me*me+$e):tt=Math.sqrt(me*me+$e),tt=$e/(me+tt));let xt=(de+he)*(de-he)+tt,Tt=de*Re;for(let ut=V;ut<oe-1;ut++){let Ie=_d(xt,Tt);Ie===0&&(Ie=Number.MIN_VALUE);let at=xt/Ie,Rt=Tt/Ie;if(ut!==V&&(T[ut-1]=Ie),xt=at*D[ut]+Rt*T[ut],T[ut]=at*T[ut]-Rt*D[ut],Tt=Rt*D[ut+1],D[ut+1]=at*D[ut+1],h)for(let rt=0;rt<r;rt++)Ie=at*N.get(rt,ut)+Rt*N.get(rt,ut+1),N.set(rt,ut+1,-Rt*N.get(rt,ut)+at*N.get(rt,ut+1)),N.set(rt,ut,Ie);if(Ie=_d(xt,Tt),Ie===0&&(Ie=Number.MIN_VALUE),at=xt/Ie,Rt=Tt/Ie,D[ut]=Ie,xt=at*T[ut]+Rt*D[ut+1],D[ut+1]=-Rt*T[ut]+at*D[ut+1],Tt=Rt*T[ut+1],T[ut+1]=at*T[ut+1],u&&ut<i-1)for(let rt=0;rt<i;rt++)Ie=at*O.get(rt,ut)+Rt*O.get(rt,ut+1),O.set(rt,ut+1,-Rt*O.get(rt,ut)+at*O.get(rt,ut+1)),O.set(rt,ut,Ie)}T[oe-2]=xt;break}case 4:{if(D[V]<=0&&(D[V]=D[V]<0?-D[V]:0,h))for(let we=0;we<=ue;we++)N.set(we,V,-N.get(we,V));for(;V<ue&&!(D[V]>=D[V+1]);){let we=D[V];if(D[V]=D[V+1],D[V+1]=we,h&&V<r-1)for(let he=0;he<r;he++)we=N.get(he,V+1),N.set(he,V+1,N.get(he,V)),N.set(he,V,we);if(u&&V<i-1)for(let he=0;he<i;he++)we=O.get(he,V+1),O.set(he,V+1,O.get(he,V)),O.set(he,V,we);V++}oe--;break}}}if(p){let V=N;N=O,O=V}this.m=i,this.n=r,this.s=D,this.U=O,this.V=N}solve(t){let e=t,i=this.threshold,r=this.s.length,s=jt.zeros(r,r);for(let x=0;x<r;x++)Math.abs(this.s[x])<=i?s.set(x,x,0):s.set(x,x,1/this.s[x]);let o=this.U,a=this.rightSingularVectors,u=a.mmul(s),h=a.rows,p=o.rows,v=jt.zeros(h,p);for(let x=0;x<h;x++)for(let S=0;S<p;S++){let D=0;for(let O=0;O<r;O++)D+=u.get(x,O)*o.get(S,O);v.set(x,S,D)}return v.mmul(e)}solveForDiagonal(t){return this.solve(jt.diag(t))}inverse(){let t=this.V,e=this.threshold,i=t.rows,r=t.columns,s=new jt(i,this.s.length);for(let p=0;p<i;p++)for(let v=0;v<r;v++)Math.abs(this.s[v])>e&&s.set(p,v,t.get(p,v)/this.s[v]);let o=this.U,a=o.rows,u=o.columns,h=new jt(i,a);for(let p=0;p<i;p++)for(let v=0;v<a;v++){let x=0;for(let S=0;S<u;S++)x+=s.get(p,S)*o.get(v,S);h.set(p,v,x)}return h}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,i=this.s;for(let r=0,s=i.length;r<s;r++)i[r]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return jt.diag(this.s)}};function Rre(n,t=!1){return n=ta.checkMatrix(n),t?new Vh(n).inverse():GH(n,jt.eye(n.rows))}function GH(n,t,e=!1){return n=ta.checkMatrix(n),t=ta.checkMatrix(t),e?new Vh(n).solve(t):n.isSquare()?new sy(n).solve(t):new __(n).solve(t)}function NS(n){if(n=jt.checkMatrix(n),n.isSquare()){if(n.columns===0)return 1;let t,e,i,r;if(n.columns===2)return t=n.get(0,0),e=n.get(0,1),i=n.get(1,0),r=n.get(1,1),t*r-e*i;if(n.columns===3){let s,o,a;return s=new ry(n,[1,2],[1,2]),o=new ry(n,[1,2],[0,2]),a=new ry(n,[1,2],[0,1]),t=n.get(0,0),e=n.get(0,1),i=n.get(0,2),t*NS(s)-e*NS(o)+i*NS(a)}else return new sy(n).determinant}else throw Error("determinant can only be calculated for a square matrix")}function kre(n,t){let e=[];for(let i=0;i<n;i++)i!==t&&e.push(i);return e}function Lre(n,t,e,i=1e-9,r=1e-9){if(n>r)return new Array(t.rows+1).fill(0);{let s=t.addRow(e,[0]);for(let o=0;o<s.rows;o++)Math.abs(s.get(o,0))<i&&s.set(o,0,0);return s.to1DArray()}}function Nre(n,t={}){let{thresholdValue:e=1e-9,thresholdError:i=1e-9}=t;n=jt.checkMatrix(n);let r=n.rows,s=new jt(r,r);for(let o=0;o<r;o++){let a=jt.columnVector(n.getRow(o)),u=n.subMatrixRow(kre(r,o)).transpose(),p=new Vh(u).solve(a),v=jt.sub(a,u.mmul(p)).abs().max();s.setRow(o,Lre(v,p,o,e,i))}return s}function Ore(n,t=Number.EPSILON){if(n=jt.checkMatrix(n),n.isEmpty())return n.transpose();let e=new Vh(n,{autoTranspose:!0}),i=e.leftSingularVectors,r=e.rightSingularVectors,s=e.diagonal;for(let o=0;o<s.length;o++)Math.abs(s[o])>t?s[o]=1/s[o]:s[o]=0;return r.mmul(jt.diag(s).mmul(i.transpose()))}function Fre(n,t=n,e={}){n=new jt(n);let i=!1;if(typeof t=="object"&&!jt.isMatrix(t)&&!Aa.isAnyArray(t)?(e=t,t=n,i=!0):t=new jt(t),n.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");let{center:r=!0}=e;r&&(n=n.center("column"),i||(t=t.center("column")));let s=n.transpose().mmul(t);for(let o=0;o<s.rows;o++)for(let a=0;a<s.columns;a++)s.set(o,a,s.get(o,a)*(1/(n.rows-1)));return s}function Bre(n,t=n,e={}){n=new jt(n);let i=!1;if(typeof t=="object"&&!jt.isMatrix(t)&&!Aa.isAnyArray(t)?(e=t,t=n,i=!0):t=new jt(t),n.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");let{center:r=!0,scale:s=!0}=e;r&&(n.center("column"),i||t.center("column")),s&&(n.scale("column"),i||t.scale("column"));let o=n.standardDeviation("column",{unbiased:!0}),a=i?o:t.standardDeviation("column",{unbiased:!0}),u=n.transpose().mmul(t);for(let h=0;h<u.rows;h++)for(let p=0;p<u.columns;p++)u.set(h,p,u.get(h,p)*(1/(o[h]*a[p]))*(1/(n.rows-1)));return u}var BS=class{constructor(t,e={}){let{assumeSymmetric:i=!1}=e;if(t=ta.checkMatrix(t),!t.isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");let r=t.columns,s=new jt(r,r),o=new Float64Array(r),a=new Float64Array(r),u=t,h,p,v=!1;if(i?v=!0:v=t.isSymmetric(),v){for(h=0;h<r;h++)for(p=0;p<r;p++)s.set(h,p,u.get(h,p));Vre(r,a,o,s),Ure(r,a,o,s)}else{let x=new jt(r,r),S=new Float64Array(r);for(p=0;p<r;p++)for(h=0;h<r;h++)x.set(h,p,u.get(h,p));zre(r,x,S,s),Hre(r,a,o,s,x)}this.n=r,this.e=a,this.d=o,this.V=s}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t=this.n,e=this.e,i=this.d,r=new jt(t,t),s,o;for(s=0;s<t;s++){for(o=0;o<t;o++)r.set(s,o,0);r.set(s,s,i[s]),e[s]>0?r.set(s,s+1,e[s]):e[s]<0&&r.set(s,s-1,e[s])}return r}};function Vre(n,t,e,i){let r,s,o,a,u,h,p,v;for(u=0;u<n;u++)e[u]=i.get(n-1,u);for(a=n-1;a>0;a--){for(v=0,o=0,h=0;h<a;h++)v=v+Math.abs(e[h]);if(v===0)for(t[a]=e[a-1],u=0;u<a;u++)e[u]=i.get(a-1,u),i.set(a,u,0),i.set(u,a,0);else{for(h=0;h<a;h++)e[h]/=v,o+=e[h]*e[h];for(r=e[a-1],s=Math.sqrt(o),r>0&&(s=-s),t[a]=v*s,o=o-r*s,e[a-1]=r-s,u=0;u<a;u++)t[u]=0;for(u=0;u<a;u++){for(r=e[u],i.set(u,a,r),s=t[u]+i.get(u,u)*r,h=u+1;h<=a-1;h++)s+=i.get(h,u)*e[h],t[h]+=i.get(h,u)*r;t[u]=s}for(r=0,u=0;u<a;u++)t[u]/=o,r+=t[u]*e[u];for(p=r/(o+o),u=0;u<a;u++)t[u]-=p*e[u];for(u=0;u<a;u++){for(r=e[u],s=t[u],h=u;h<=a-1;h++)i.set(h,u,i.get(h,u)-(r*t[h]+s*e[h]));e[u]=i.get(a-1,u),i.set(a,u,0)}}e[a]=o}for(a=0;a<n-1;a++){if(i.set(n-1,a,i.get(a,a)),i.set(a,a,1),o=e[a+1],o!==0){for(h=0;h<=a;h++)e[h]=i.get(h,a+1)/o;for(u=0;u<=a;u++){for(s=0,h=0;h<=a;h++)s+=i.get(h,a+1)*i.get(h,u);for(h=0;h<=a;h++)i.set(h,u,i.get(h,u)-s*e[h])}}for(h=0;h<=a;h++)i.set(h,a+1,0)}for(u=0;u<n;u++)e[u]=i.get(n-1,u),i.set(n-1,u,0);i.set(n-1,n-1,1),t[0]=0}function Ure(n,t,e,i){let r,s,o,a,u,h,p,v,x,S,D,O,N,T,j,Z;for(o=1;o<n;o++)t[o-1]=t[o];t[n-1]=0;let G=0,le=0,K=Number.EPSILON;for(h=0;h<n;h++){for(le=Math.max(le,Math.abs(e[h])+Math.abs(t[h])),p=h;p<n&&!(Math.abs(t[p])<=K*le);)p++;if(p>h)do{for(r=e[h],v=(e[h+1]-r)/(2*t[h]),x=_d(v,1),v<0&&(x=-x),e[h]=t[h]/(v+x),e[h+1]=t[h]*(v+x),S=e[h+1],s=r-e[h],o=h+2;o<n;o++)e[o]-=s;for(G=G+s,v=e[p],D=1,O=D,N=D,T=t[h+1],j=0,Z=0,o=p-1;o>=h;o--)for(N=O,O=D,Z=j,r=D*t[o],s=D*v,x=_d(v,t[o]),t[o+1]=j*x,j=t[o]/x,D=v/x,v=D*e[o]-j*r,e[o+1]=s+j*(D*r+j*e[o]),u=0;u<n;u++)s=i.get(u,o+1),i.set(u,o+1,j*i.get(u,o)+D*s),i.set(u,o,D*i.get(u,o)-j*s);v=-j*Z*N*T*t[h]/S,t[h]=j*v,e[h]=D*v}while(Math.abs(t[h])>K*le);e[h]=e[h]+G,t[h]=0}for(o=0;o<n-1;o++){for(u=o,v=e[o],a=o+1;a<n;a++)e[a]<v&&(u=a,v=e[a]);if(u!==o)for(e[u]=e[o],e[o]=v,a=0;a<n;a++)v=i.get(a,o),i.set(a,o,i.get(a,u)),i.set(a,u,v)}}function zre(n,t,e,i){let r=0,s=n-1,o,a,u,h,p,v,x;for(v=r+1;v<=s-1;v++){for(x=0,h=v;h<=s;h++)x=x+Math.abs(t.get(h,v-1));if(x!==0){for(u=0,h=s;h>=v;h--)e[h]=t.get(h,v-1)/x,u+=e[h]*e[h];for(a=Math.sqrt(u),e[v]>0&&(a=-a),u=u-e[v]*a,e[v]=e[v]-a,p=v;p<n;p++){for(o=0,h=s;h>=v;h--)o+=e[h]*t.get(h,p);for(o=o/u,h=v;h<=s;h++)t.set(h,p,t.get(h,p)-o*e[h])}for(h=0;h<=s;h++){for(o=0,p=s;p>=v;p--)o+=e[p]*t.get(h,p);for(o=o/u,p=v;p<=s;p++)t.set(h,p,t.get(h,p)-o*e[p])}e[v]=x*e[v],t.set(v,v-1,x*a)}}for(h=0;h<n;h++)for(p=0;p<n;p++)i.set(h,p,h===p?1:0);for(v=s-1;v>=r+1;v--)if(t.get(v,v-1)!==0){for(h=v+1;h<=s;h++)e[h]=t.get(h,v-1);for(p=v;p<=s;p++){for(a=0,h=v;h<=s;h++)a+=e[h]*i.get(h,p);for(a=a/e[v]/t.get(v,v-1),h=v;h<=s;h++)i.set(h,p,i.get(h,p)+a*e[h])}}}function Hre(n,t,e,i,r){let s=n-1,o=0,a=n-1,u=Number.EPSILON,h=0,p=0,v=0,x=0,S=0,D=0,O=0,N=0,T,j,Z,G,le,K,oe,ue,te,V,se,we,he,je,ze;for(T=0;T<n;T++)for((T<o||T>a)&&(e[T]=r.get(T,T),t[T]=0),j=Math.max(T-1,0);j<n;j++)p=p+Math.abs(r.get(T,j));for(;s>=o;){for(G=s;G>o&&(D=Math.abs(r.get(G-1,G-1))+Math.abs(r.get(G,G)),D===0&&(D=p),!(Math.abs(r.get(G,G-1))<u*D));)G--;if(G===s)r.set(s,s,r.get(s,s)+h),e[s]=r.get(s,s),t[s]=0,s--,N=0;else if(G===s-1){if(oe=r.get(s,s-1)*r.get(s-1,s),v=(r.get(s-1,s-1)-r.get(s,s))/2,x=v*v+oe,O=Math.sqrt(Math.abs(x)),r.set(s,s,r.get(s,s)+h),r.set(s-1,s-1,r.get(s-1,s-1)+h),ue=r.get(s,s),x>=0){for(O=v>=0?v+O:v-O,e[s-1]=ue+O,e[s]=e[s-1],O!==0&&(e[s]=ue-oe/O),t[s-1]=0,t[s]=0,ue=r.get(s,s-1),D=Math.abs(ue)+Math.abs(O),v=ue/D,x=O/D,S=Math.sqrt(v*v+x*x),v=v/S,x=x/S,j=s-1;j<n;j++)O=r.get(s-1,j),r.set(s-1,j,x*O+v*r.get(s,j)),r.set(s,j,x*r.get(s,j)-v*O);for(T=0;T<=s;T++)O=r.get(T,s-1),r.set(T,s-1,x*O+v*r.get(T,s)),r.set(T,s,x*r.get(T,s)-v*O);for(T=o;T<=a;T++)O=i.get(T,s-1),i.set(T,s-1,x*O+v*i.get(T,s)),i.set(T,s,x*i.get(T,s)-v*O)}else e[s-1]=ue+v,e[s]=ue+v,t[s-1]=O,t[s]=-O;s=s-2,N=0}else{if(ue=r.get(s,s),te=0,oe=0,G<s&&(te=r.get(s-1,s-1),oe=r.get(s,s-1)*r.get(s-1,s)),N===10){for(h+=ue,T=o;T<=s;T++)r.set(T,T,r.get(T,T)-ue);D=Math.abs(r.get(s,s-1))+Math.abs(r.get(s-1,s-2)),ue=te=.75*D,oe=-.4375*D*D}if(N===30&&(D=(te-ue)/2,D=D*D+oe,D>0)){for(D=Math.sqrt(D),te<ue&&(D=-D),D=ue-oe/((te-ue)/2+D),T=o;T<=s;T++)r.set(T,T,r.get(T,T)-D);h+=D,ue=te=oe=.964}for(N=N+1,le=s-2;le>=G&&(O=r.get(le,le),S=ue-O,D=te-O,v=(S*D-oe)/r.get(le+1,le)+r.get(le,le+1),x=r.get(le+1,le+1)-O-S-D,S=r.get(le+2,le+1),D=Math.abs(v)+Math.abs(x)+Math.abs(S),v=v/D,x=x/D,S=S/D,!(le===G||Math.abs(r.get(le,le-1))*(Math.abs(x)+Math.abs(S))<u*(Math.abs(v)*(Math.abs(r.get(le-1,le-1))+Math.abs(O)+Math.abs(r.get(le+1,le+1))))));)le--;for(T=le+2;T<=s;T++)r.set(T,T-2,0),T>le+2&&r.set(T,T-3,0);for(Z=le;Z<=s-1&&(je=Z!==s-1,Z!==le&&(v=r.get(Z,Z-1),x=r.get(Z+1,Z-1),S=je?r.get(Z+2,Z-1):0,ue=Math.abs(v)+Math.abs(x)+Math.abs(S),ue!==0&&(v=v/ue,x=x/ue,S=S/ue)),ue!==0);Z++)if(D=Math.sqrt(v*v+x*x+S*S),v<0&&(D=-D),D!==0){for(Z!==le?r.set(Z,Z-1,-D*ue):G!==le&&r.set(Z,Z-1,-r.get(Z,Z-1)),v=v+D,ue=v/D,te=x/D,O=S/D,x=x/v,S=S/v,j=Z;j<n;j++)v=r.get(Z,j)+x*r.get(Z+1,j),je&&(v=v+S*r.get(Z+2,j),r.set(Z+2,j,r.get(Z+2,j)-v*O)),r.set(Z,j,r.get(Z,j)-v*ue),r.set(Z+1,j,r.get(Z+1,j)-v*te);for(T=0;T<=Math.min(s,Z+3);T++)v=ue*r.get(T,Z)+te*r.get(T,Z+1),je&&(v=v+O*r.get(T,Z+2),r.set(T,Z+2,r.get(T,Z+2)-v*S)),r.set(T,Z,r.get(T,Z)-v),r.set(T,Z+1,r.get(T,Z+1)-v*x);for(T=o;T<=a;T++)v=ue*i.get(T,Z)+te*i.get(T,Z+1),je&&(v=v+O*i.get(T,Z+2),i.set(T,Z+2,i.get(T,Z+2)-v*S)),i.set(T,Z,i.get(T,Z)-v),i.set(T,Z+1,i.get(T,Z+1)-v*x)}}}if(p!==0){for(s=n-1;s>=0;s--)if(v=e[s],x=t[s],x===0)for(G=s,r.set(s,s,1),T=s-1;T>=0;T--){for(oe=r.get(T,T)-v,S=0,j=G;j<=s;j++)S=S+r.get(T,j)*r.get(j,s);if(t[T]<0)O=oe,D=S;else if(G=T,t[T]===0?r.set(T,s,oe!==0?-S/oe:-S/(u*p)):(ue=r.get(T,T+1),te=r.get(T+1,T),x=(e[T]-v)*(e[T]-v)+t[T]*t[T],K=(ue*D-O*S)/x,r.set(T,s,K),r.set(T+1,s,Math.abs(ue)>Math.abs(O)?(-S-oe*K)/ue:(-D-te*K)/O)),K=Math.abs(r.get(T,s)),u*K*K>1)for(j=T;j<=s;j++)r.set(j,s,r.get(j,s)/K)}else if(x<0)for(G=s-1,Math.abs(r.get(s,s-1))>Math.abs(r.get(s-1,s))?(r.set(s-1,s-1,x/r.get(s,s-1)),r.set(s-1,s,-(r.get(s,s)-v)/r.get(s,s-1))):(ze=LS(0,-r.get(s-1,s),r.get(s-1,s-1)-v,x),r.set(s-1,s-1,ze[0]),r.set(s-1,s,ze[1])),r.set(s,s-1,0),r.set(s,s,1),T=s-2;T>=0;T--){for(V=0,se=0,j=G;j<=s;j++)V=V+r.get(T,j)*r.get(j,s-1),se=se+r.get(T,j)*r.get(j,s);if(oe=r.get(T,T)-v,t[T]<0)O=oe,S=V,D=se;else if(G=T,t[T]===0?(ze=LS(-V,-se,oe,x),r.set(T,s-1,ze[0]),r.set(T,s,ze[1])):(ue=r.get(T,T+1),te=r.get(T+1,T),we=(e[T]-v)*(e[T]-v)+t[T]*t[T]-x*x,he=(e[T]-v)*2*x,we===0&&he===0&&(we=u*p*(Math.abs(oe)+Math.abs(x)+Math.abs(ue)+Math.abs(te)+Math.abs(O))),ze=LS(ue*S-O*V+x*se,ue*D-O*se-x*V,we,he),r.set(T,s-1,ze[0]),r.set(T,s,ze[1]),Math.abs(ue)>Math.abs(O)+Math.abs(x)?(r.set(T+1,s-1,(-V-oe*r.get(T,s-1)+x*r.get(T,s))/ue),r.set(T+1,s,(-se-oe*r.get(T,s)-x*r.get(T,s-1))/ue)):(ze=LS(-S-te*r.get(T,s-1),-D-te*r.get(T,s),O,x),r.set(T+1,s-1,ze[0]),r.set(T+1,s,ze[1]))),K=Math.max(Math.abs(r.get(T,s-1)),Math.abs(r.get(T,s))),u*K*K>1)for(j=T;j<=s;j++)r.set(j,s-1,r.get(j,s-1)/K),r.set(j,s,r.get(j,s)/K)}for(T=0;T<n;T++)if(T<o||T>a)for(j=T;j<n;j++)i.set(T,j,r.get(T,j));for(j=n-1;j>=o;j--)for(T=o;T<=a;T++){for(O=0,Z=o;Z<=Math.min(j,a);Z++)O=O+i.get(T,Z)*r.get(Z,j);i.set(T,j,O)}}}function LS(n,t,e,i){let r,s;return Math.abs(e)>Math.abs(i)?(r=i/e,s=e+r*i,[(n+r*t)/s,(t-r*n)/s]):(r=e/i,s=i+r*e,[(r*n+t)/s,(r*t-n)/s])}var VS=class{constructor(t){if(t=ta.checkMatrix(t),!t.isSymmetric())throw new Error("Matrix is not symmetric");let e=t,i=e.rows,r=new jt(i,i),s=!0,o,a,u;for(a=0;a<i;a++){let h=0;for(u=0;u<a;u++){let p=0;for(o=0;o<u;o++)p+=r.get(u,o)*r.get(a,o);p=(e.get(a,u)-p)/r.get(u,u),r.set(a,u,p),h=h+p*p}for(h=e.get(a,a)-h,s&&=h>0,r.set(a,a,Math.sqrt(Math.max(h,0))),u=a+1;u<i;u++)r.set(a,u,0)}this.L=r,this.positiveDefinite=s}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=ta.checkMatrix(t);let e=this.L,i=e.rows;if(t.rows!==i)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let r=t.columns,s=t.clone(),o,a,u;for(u=0;u<i;u++)for(a=0;a<r;a++){for(o=0;o<u;o++)s.set(u,a,s.get(u,a)-s.get(o,a)*e.get(u,o));s.set(u,a,s.get(u,a)/e.get(u,u))}for(u=i-1;u>=0;u--)for(a=0;a<r;a++){for(o=u+1;o<i;o++)s.set(u,a,s.get(u,a)-s.get(o,a)*e.get(o,u));s.set(u,a,s.get(u,a)/e.get(u,u))}return s}get lowerTriangularMatrix(){return this.L}},US=class{constructor(t,e={}){t=ta.checkMatrix(t);let{Y:i}=e,{scaleScores:r=!1,maxIterations:s=1e3,terminationCriteria:o=1e-10}=e,a;if(i){if(Aa.isAnyArray(i)&&typeof i[0]=="number"?i=jt.columnVector(i):i=ta.checkMatrix(i),i.rows!==t.rows)throw new Error("Y should have the same number of rows as X");a=i.getColumnVector(0)}else a=t.getColumnVector(0);let u=1,h,p,v,x;for(let S=0;S<s&&u>o;S++)v=t.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),v=v.div(v.norm()),h=t.mmul(v).div(v.transpose().mmul(v).get(0,0)),S>0&&(u=h.clone().sub(x).pow(2).sum()),x=h.clone(),i?(p=i.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0)),p=p.div(p.norm()),a=i.mmul(p).div(p.transpose().mmul(p).get(0,0))):a=h;if(i){let S=t.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0));S=S.div(S.norm());let D=t.clone().sub(h.clone().mmul(S.transpose())),O=a.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0)),N=i.clone().sub(h.clone().mulS(O.get(0,0)).mmul(p.transpose()));this.t=h,this.p=S.transpose(),this.w=v.transpose(),this.q=p,this.u=a,this.s=h.transpose().mmul(h),this.xResidual=D,this.yResidual=N,this.betas=O}else this.w=v.transpose(),this.s=h.transpose().mmul(h).sqrt(),r?this.t=h.clone().div(this.s.get(0,0)):this.t=h,this.xResidual=t.sub(h.mmul(v.transpose()))}};Ni.AbstractMatrix=Lr;Ni.CHO=VS;Ni.CholeskyDecomposition=VS;Ni.DistanceMatrix=OS;Ni.EVD=BS;Ni.EigenvalueDecomposition=BS;Ni.LU=sy;Ni.LuDecomposition=sy;Ni.Matrix=jt;Ni.MatrixColumnSelectionView=aR;Ni.MatrixColumnView=oR;Ni.MatrixFlipColumnView=lR;Ni.MatrixFlipRowView=cR;Ni.MatrixRowSelectionView=dR;Ni.MatrixRowView=uR;Ni.MatrixSelectionView=ry;Ni.MatrixSubView=hR;Ni.MatrixTransposeView=fR;Ni.NIPALS=US;Ni.Nipals=US;Ni.QR=__;Ni.QrDecomposition=__;Ni.SVD=Vh;Ni.SingularValueDecomposition=Vh;Ni.SymmetricMatrix=Ap;Ni.WrapperMatrix1D=FS;Ni.WrapperMatrix2D=ta;Ni.correlation=Bre;Ni.covariance=Fre;Ni.default=jt;Ni.determinant=NS;Ni.inverse=Rre;Ni.linearDependencies=Nre;Ni.pseudoInverse=Ore;Ni.solve=GH;Ni.wrap=Pre});var _R=fx((XS,QH)=>{"use strict";(function(n,t){typeof XS=="object"&&typeof QH<"u"?t(XS):typeof define=="function"&&define.amd?define(["exports"],t):(n=typeof globalThis<"u"?globalThis:n||self,t(n.leaflet={}))})(XS,function(n){"use strict";var t="1.9.4";function e(c){var m,w,P,z;for(w=1,P=arguments.length;w<P;w++){z=arguments[w];for(m in z)c[m]=z[m]}return c}var i=Object.create||function(){function c(){}return function(m){return c.prototype=m,new c}}();function r(c,m){var w=Array.prototype.slice;if(c.bind)return c.bind.apply(c,w.call(arguments,1));var P=w.call(arguments,2);return function(){return c.apply(m,P.length?P.concat(w.call(arguments)):arguments)}}var s=0;function o(c){return"_leaflet_id"in c||(c._leaflet_id=++s),c._leaflet_id}function a(c,m,w){var P,z,ee,_e;return _e=function(){P=!1,z&&(ee.apply(w,z),z=!1)},ee=function(){P?z=arguments:(c.apply(w,arguments),setTimeout(_e,m),P=!0)},ee}function u(c,m,w){var P=m[1],z=m[0],ee=P-z;return c===P&&w?c:((c-z)%ee+ee)%ee+z}function h(){return!1}function p(c,m){if(m===!1)return c;var w=Math.pow(10,m===void 0?6:m);return Math.round(c*w)/w}function v(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function x(c){return v(c).split(/\s+/)}function S(c,m){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?i(c.options):{});for(var w in m)c.options[w]=m[w];return c.options}function D(c,m,w){var P=[];for(var z in c)P.push(encodeURIComponent(w?z.toUpperCase():z)+"="+encodeURIComponent(c[z]));return(!m||m.indexOf("?")===-1?"?":"&")+P.join("&")}var O=/\{ *([\w_ -]+) *\}/g;function N(c,m){return c.replace(O,function(w,P){var z=m[P];if(z===void 0)throw new Error("No value provided for variable "+w);return typeof z=="function"&&(z=z(m)),z})}var T=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function j(c,m){for(var w=0;w<c.length;w++)if(c[w]===m)return w;return-1}var Z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function G(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var le=0;function K(c){var m=+new Date,w=Math.max(0,16-(m-le));return le=m+w,window.setTimeout(c,w)}var oe=window.requestAnimationFrame||G("RequestAnimationFrame")||K,ue=window.cancelAnimationFrame||G("CancelAnimationFrame")||G("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function te(c,m,w){if(w&&oe===K)c.call(m);else return oe.call(window,r(c,m))}function V(c){c&&ue.call(window,c)}var se={__proto__:null,extend:e,create:i,bind:r,get lastId(){return s},stamp:o,throttle:a,wrapNum:u,falseFn:h,formatNum:p,trim:v,splitWords:x,setOptions:S,getParamString:D,template:N,isArray:T,indexOf:j,emptyImageUrl:Z,requestFn:oe,cancelFn:ue,requestAnimFrame:te,cancelAnimFrame:V};function we(){}we.extend=function(c){var m=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},w=m.__super__=this.prototype,P=i(w);P.constructor=m,m.prototype=P;for(var z in this)Object.prototype.hasOwnProperty.call(this,z)&&z!=="prototype"&&z!=="__super__"&&(m[z]=this[z]);return c.statics&&e(m,c.statics),c.includes&&(he(c.includes),e.apply(null,[P].concat(c.includes))),e(P,c),delete P.statics,delete P.includes,P.options&&(P.options=w.options?i(w.options):{},e(P.options,c.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){w.callInitHooks&&w.callInitHooks.call(this),this._initHooksCalled=!0;for(var ee=0,_e=P._initHooks.length;ee<_e;ee++)P._initHooks[ee].call(this)}},m},we.include=function(c){var m=this.prototype.options;return e(this.prototype,c),c.options&&(this.prototype.options=m,this.mergeOptions(c.options)),this},we.mergeOptions=function(c){return e(this.prototype.options,c),this},we.addInitHook=function(c){var m=Array.prototype.slice.call(arguments,1),w=typeof c=="function"?c:function(){this[c].apply(this,m)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(w),this};function he(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=T(c)?c:[c];for(var m=0;m<c.length;m++)c[m]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var je={on:function(c,m,w){if(typeof c=="object")for(var P in c)this._on(P,c[P],m);else{c=x(c);for(var z=0,ee=c.length;z<ee;z++)this._on(c[z],m,w)}return this},off:function(c,m,w){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var P in c)this._off(P,c[P],m);else{c=x(c);for(var z=arguments.length===1,ee=0,_e=c.length;ee<_e;ee++)z?this._off(c[ee]):this._off(c[ee],m,w)}return this},_on:function(c,m,w,P){if(typeof m!="function"){console.warn("wrong listener type: "+typeof m);return}if(this._listens(c,m,w)===!1){w===this&&(w=void 0);var z={fn:m,ctx:w};P&&(z.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(z)}},_off:function(c,m,w){var P,z,ee;if(this._events&&(P=this._events[c],!!P)){if(arguments.length===1){if(this._firingCount)for(z=0,ee=P.length;z<ee;z++)P[z].fn=h;delete this._events[c];return}if(typeof m!="function"){console.warn("wrong listener type: "+typeof m);return}var _e=this._listens(c,m,w);if(_e!==!1){var Ve=P[_e];this._firingCount&&(Ve.fn=h,this._events[c]=P=P.slice()),P.splice(_e,1)}}},fire:function(c,m,w){if(!this.listens(c,w))return this;var P=e({},m,{type:c,target:this,sourceTarget:m&&m.sourceTarget||this});if(this._events){var z=this._events[c];if(z){this._firingCount=this._firingCount+1||1;for(var ee=0,_e=z.length;ee<_e;ee++){var Ve=z[ee],Oe=Ve.fn;Ve.once&&this.off(c,Oe,Ve.ctx),Oe.call(Ve.ctx||this,P)}this._firingCount--}}return w&&this._propagateEvent(P),this},listens:function(c,m,w,P){typeof c!="string"&&console.warn('"string" type argument expected');var z=m;typeof m!="function"&&(P=!!m,z=void 0,w=void 0);var ee=this._events&&this._events[c];if(ee&&ee.length&&this._listens(c,z,w)!==!1)return!0;if(P){for(var _e in this._eventParents)if(this._eventParents[_e].listens(c,m,w,P))return!0}return!1},_listens:function(c,m,w){if(!this._events)return!1;var P=this._events[c]||[];if(!m)return!!P.length;w===this&&(w=void 0);for(var z=0,ee=P.length;z<ee;z++)if(P[z].fn===m&&P[z].ctx===w)return z;return!1},once:function(c,m,w){if(typeof c=="object")for(var P in c)this._on(P,c[P],m,!0);else{c=x(c);for(var z=0,ee=c.length;z<ee;z++)this._on(c[z],m,w,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[o(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[o(c)],this},_propagateEvent:function(c){for(var m in this._eventParents)this._eventParents[m].fire(c.type,e({layer:c.target,propagatedFrom:c.target},c),!0)}};je.addEventListener=je.on,je.removeEventListener=je.clearAllEventListeners=je.off,je.addOneTimeEventListener=je.once,je.fireEvent=je.fire,je.hasEventListeners=je.listens;var ze=we.extend(je);function de(c,m,w){this.x=w?Math.round(c):c,this.y=w?Math.round(m):m}var Re=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};de.prototype={clone:function(){return new de(this.x,this.y)},add:function(c){return this.clone()._add(me(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(me(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new de(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new de(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Re(this.x),this.y=Re(this.y),this},distanceTo:function(c){c=me(c);var m=c.x-this.x,w=c.y-this.y;return Math.sqrt(m*m+w*w)},equals:function(c){return c=me(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=me(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function me(c,m,w){return c instanceof de?c:T(c)?new de(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new de(c.x,c.y):new de(c,m,w)}function $e(c,m){if(c)for(var w=m?[c,m]:c,P=0,z=w.length;P<z;P++)this.extend(w[P])}$e.prototype={extend:function(c){var m,w;if(!c)return this;if(c instanceof de||typeof c[0]=="number"||"x"in c)m=w=me(c);else if(c=tt(c),m=c.min,w=c.max,!m||!w)return this;return!this.min&&!this.max?(this.min=m.clone(),this.max=w.clone()):(this.min.x=Math.min(m.x,this.min.x),this.max.x=Math.max(w.x,this.max.x),this.min.y=Math.min(m.y,this.min.y),this.max.y=Math.max(w.y,this.max.y)),this},getCenter:function(c){return me((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return me(this.min.x,this.max.y)},getTopRight:function(){return me(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var m,w;return typeof c[0]=="number"||c instanceof de?c=me(c):c=tt(c),c instanceof $e?(m=c.min,w=c.max):m=w=c,m.x>=this.min.x&&w.x<=this.max.x&&m.y>=this.min.y&&w.y<=this.max.y},intersects:function(c){c=tt(c);var m=this.min,w=this.max,P=c.min,z=c.max,ee=z.x>=m.x&&P.x<=w.x,_e=z.y>=m.y&&P.y<=w.y;return ee&&_e},overlaps:function(c){c=tt(c);var m=this.min,w=this.max,P=c.min,z=c.max,ee=z.x>m.x&&P.x<w.x,_e=z.y>m.y&&P.y<w.y;return ee&&_e},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var m=this.min,w=this.max,P=Math.abs(m.x-w.x)*c,z=Math.abs(m.y-w.y)*c;return tt(me(m.x-P,m.y-z),me(w.x+P,w.y+z))},equals:function(c){return c?(c=tt(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function tt(c,m){return!c||c instanceof $e?c:new $e(c,m)}function xt(c,m){if(c)for(var w=m?[c,m]:c,P=0,z=w.length;P<z;P++)this.extend(w[P])}xt.prototype={extend:function(c){var m=this._southWest,w=this._northEast,P,z;if(c instanceof ut)P=c,z=c;else if(c instanceof xt){if(P=c._southWest,z=c._northEast,!P||!z)return this}else return c?this.extend(Ie(c)||Tt(c)):this;return!m&&!w?(this._southWest=new ut(P.lat,P.lng),this._northEast=new ut(z.lat,z.lng)):(m.lat=Math.min(P.lat,m.lat),m.lng=Math.min(P.lng,m.lng),w.lat=Math.max(z.lat,w.lat),w.lng=Math.max(z.lng,w.lng)),this},pad:function(c){var m=this._southWest,w=this._northEast,P=Math.abs(m.lat-w.lat)*c,z=Math.abs(m.lng-w.lng)*c;return new xt(new ut(m.lat-P,m.lng-z),new ut(w.lat+P,w.lng+z))},getCenter:function(){return new ut((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ut(this.getNorth(),this.getWest())},getSouthEast:function(){return new ut(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof ut||"lat"in c?c=Ie(c):c=Tt(c);var m=this._southWest,w=this._northEast,P,z;return c instanceof xt?(P=c.getSouthWest(),z=c.getNorthEast()):P=z=c,P.lat>=m.lat&&z.lat<=w.lat&&P.lng>=m.lng&&z.lng<=w.lng},intersects:function(c){c=Tt(c);var m=this._southWest,w=this._northEast,P=c.getSouthWest(),z=c.getNorthEast(),ee=z.lat>=m.lat&&P.lat<=w.lat,_e=z.lng>=m.lng&&P.lng<=w.lng;return ee&&_e},overlaps:function(c){c=Tt(c);var m=this._southWest,w=this._northEast,P=c.getSouthWest(),z=c.getNorthEast(),ee=z.lat>m.lat&&P.lat<w.lat,_e=z.lng>m.lng&&P.lng<w.lng;return ee&&_e},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,m){return c?(c=Tt(c),this._southWest.equals(c.getSouthWest(),m)&&this._northEast.equals(c.getNorthEast(),m)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Tt(c,m){return c instanceof xt?c:new xt(c,m)}function ut(c,m,w){if(isNaN(c)||isNaN(m))throw new Error("Invalid LatLng object: ("+c+", "+m+")");this.lat=+c,this.lng=+m,w!==void 0&&(this.alt=+w)}ut.prototype={equals:function(c,m){if(!c)return!1;c=Ie(c);var w=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return w<=(m===void 0?1e-9:m)},toString:function(c){return"LatLng("+p(this.lat,c)+", "+p(this.lng,c)+")"},distanceTo:function(c){return Rt.distance(this,Ie(c))},wrap:function(){return Rt.wrapLatLng(this)},toBounds:function(c){var m=180*c/40075017,w=m/Math.cos(Math.PI/180*this.lat);return Tt([this.lat-m,this.lng-w],[this.lat+m,this.lng+w])},clone:function(){return new ut(this.lat,this.lng,this.alt)}};function Ie(c,m,w){return c instanceof ut?c:T(c)&&typeof c[0]!="object"?c.length===3?new ut(c[0],c[1],c[2]):c.length===2?new ut(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new ut(c.lat,"lng"in c?c.lng:c.lon,c.alt):m===void 0?null:new ut(c,m,w)}var at={latLngToPoint:function(c,m){var w=this.projection.project(c),P=this.scale(m);return this.transformation._transform(w,P)},pointToLatLng:function(c,m){var w=this.scale(m),P=this.transformation.untransform(c,w);return this.projection.unproject(P)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var m=this.projection.bounds,w=this.scale(c),P=this.transformation.transform(m.min,w),z=this.transformation.transform(m.max,w);return new $e(P,z)},infinite:!1,wrapLatLng:function(c){var m=this.wrapLng?u(c.lng,this.wrapLng,!0):c.lng,w=this.wrapLat?u(c.lat,this.wrapLat,!0):c.lat,P=c.alt;return new ut(w,m,P)},wrapLatLngBounds:function(c){var m=c.getCenter(),w=this.wrapLatLng(m),P=m.lat-w.lat,z=m.lng-w.lng;if(P===0&&z===0)return c;var ee=c.getSouthWest(),_e=c.getNorthEast(),Ve=new ut(ee.lat-P,ee.lng-z),Oe=new ut(_e.lat-P,_e.lng-z);return new xt(Ve,Oe)}},Rt=e({},at,{wrapLng:[-180,180],R:6371e3,distance:function(c,m){var w=Math.PI/180,P=c.lat*w,z=m.lat*w,ee=Math.sin((m.lat-c.lat)*w/2),_e=Math.sin((m.lng-c.lng)*w/2),Ve=ee*ee+Math.cos(P)*Math.cos(z)*_e*_e,Oe=2*Math.atan2(Math.sqrt(Ve),Math.sqrt(1-Ve));return this.R*Oe}}),rt=6378137,zt={R:rt,MAX_LATITUDE:85.0511287798,project:function(c){var m=Math.PI/180,w=this.MAX_LATITUDE,P=Math.max(Math.min(w,c.lat),-w),z=Math.sin(P*m);return new de(this.R*c.lng*m,this.R*Math.log((1+z)/(1-z))/2)},unproject:function(c){var m=180/Math.PI;return new ut((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*m,c.x*m/this.R)},bounds:function(){var c=rt*Math.PI;return new $e([-c,-c],[c,c])}()};function Sn(c,m,w,P){if(T(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=m,this._c=w,this._d=P}Sn.prototype={transform:function(c,m){return this._transform(c.clone(),m)},_transform:function(c,m){return m=m||1,c.x=m*(this._a*c.x+this._b),c.y=m*(this._c*c.y+this._d),c},untransform:function(c,m){return m=m||1,new de((c.x/m-this._b)/this._a,(c.y/m-this._d)/this._c)}};function dn(c,m,w,P){return new Sn(c,m,w,P)}var Mt=e({},Rt,{code:"EPSG:3857",projection:zt,transformation:function(){var c=.5/(Math.PI*zt.R);return dn(c,.5,-c,.5)}()}),Zi=e({},Mt,{code:"EPSG:900913"});function Bn(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function Me(c,m){var w="",P,z,ee,_e,Ve,Oe;for(P=0,ee=c.length;P<ee;P++){for(Ve=c[P],z=0,_e=Ve.length;z<_e;z++)Oe=Ve[z],w+=(z?"L":"M")+Oe.x+" "+Oe.y;w+=m?on.svg?"z":"x":""}return w||"M0 0"}var hr=document.documentElement.style,Qn="ActiveXObject"in window,fi=Qn&&!document.addEventListener,rn="msLaunchUri"in navigator&&!("documentMode"in document),ei=Wr("webkit"),hn=Wr("android"),Rn=Wr("android 2")||Wr("android 3"),$i=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),fe=hn&&Wr("Google")&&$i<537&&!("AudioNode"in window),J=!!window.opera,Ge=!rn&&Wr("chrome"),nt=Wr("gecko")&&!ei&&!J&&!Qn,dt=!Ge&&Wr("safari"),Qe=Wr("phantom"),yn="OTransition"in hr,Ht=navigator.platform.indexOf("Win")===0,kt=Qn&&"transition"in hr,fn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Rn,vt="MozPerspective"in hr,Jt=!window.L_DISABLE_3D&&(kt||fn||vt)&&!yn&&!Qe,pn=typeof orientation<"u"||Wr("mobile"),vn=pn&&ei,Ft=pn&&fn,_n=!window.PointerEvent&&window.MSPointerEvent,Pe=!!(window.PointerEvent||_n),Lt="ontouchstart"in window||!!window.TouchEvent,Ct=!window.L_NO_TOUCH&&(Lt||Pe),nn=pn&&J,pt=pn&&nt,ct=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,sn=function(){var c=!1;try{var m=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",h,m),window.removeEventListener("testPassiveEventSupport",h,m)}catch{}return c}(),Vn=function(){return!!document.createElement("canvas").getContext}(),Dn=!!(document.createElementNS&&Bn("svg").createSVGRect),Oi=!!Dn&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),rs=!Dn&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var m=c.firstChild;return m.style.behavior="url(#default#VML)",m&&typeof m.adj=="object"}catch{return!1}}(),ss=navigator.platform.indexOf("Mac")===0,jd=navigator.platform.indexOf("Linux")===0;function Wr(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var on={ie:Qn,ielt9:fi,edge:rn,webkit:ei,android:hn,android23:Rn,androidStock:fe,opera:J,chrome:Ge,gecko:nt,safari:dt,phantom:Qe,opera12:yn,win:Ht,ie3d:kt,webkit3d:fn,gecko3d:vt,any3d:Jt,mobile:pn,mobileWebkit:vn,mobileWebkit3d:Ft,msPointer:_n,pointer:Pe,touch:Ct,touchNative:Lt,mobileOpera:nn,mobileGecko:pt,retina:ct,passiveEvents:sn,canvas:Vn,svg:Dn,vml:rs,inlineSvg:Oi,mac:ss,linux:jd},Wc=on.msPointer?"MSPointerDown":"pointerdown",Gc=on.msPointer?"MSPointerMove":"pointermove",Uu=on.msPointer?"MSPointerUp":"pointerup",Fa=on.msPointer?"MSPointerCancel":"pointercancel",Yl={touchstart:Wc,touchmove:Gc,touchend:Uu,touchcancel:Fa},Zl={touchstart:Fe,touchmove:re,touchend:re,touchcancel:re},Po={},ul=!1;function Wd(c,m,w){return m==="touchstart"&&Ba(),Zl[m]?(w=Zl[m].bind(this,w),c.addEventListener(Yl[m],w,!1),w):(console.warn("wrong event specified:",m),h)}function Gr(c,m,w){if(!Yl[m]){console.warn("wrong event specified:",m);return}c.removeEventListener(Yl[m],w,!1)}function zu(c){Po[c.pointerId]=c}function gf(c){Po[c.pointerId]&&(Po[c.pointerId]=c)}function Gd(c){delete Po[c.pointerId]}function Ba(){ul||(document.addEventListener(Wc,zu,!0),document.addEventListener(Gc,gf,!0),document.addEventListener(Uu,Gd,!0),document.addEventListener(Fa,Gd,!0),ul=!0)}function re(c,m){if(m.pointerType!==(m.MSPOINTER_TYPE_MOUSE||"mouse")){m.touches=[];for(var w in Po)m.touches.push(Po[w]);m.changedTouches=[m],c(m)}}function Fe(c,m){m.MSPOINTER_TYPE_TOUCH&&m.pointerType===m.MSPOINTER_TYPE_TOUCH&&$r(m),re(c,m)}function qe(c){var m={},w,P;for(P in c)w=c[P],m[P]=w&&w.bind?w.bind(c):w;return c=m,m.type="dblclick",m.detail=2,m.isTrusted=!1,m._simulated=!0,m}var Xe=200;function Be(c,m){c.addEventListener("dblclick",m);var w=0,P;function z(ee){if(ee.detail!==1){P=ee.detail;return}if(!(ee.pointerType==="mouse"||ee.sourceCapabilities&&!ee.sourceCapabilities.firesTouchEvents)){var _e=bf(ee);if(!(_e.some(function(Oe){return Oe instanceof HTMLLabelElement&&Oe.attributes.for})&&!_e.some(function(Oe){return Oe instanceof HTMLInputElement||Oe instanceof HTMLSelectElement}))){var Ve=Date.now();Ve-w<=Xe?(P++,P===2&&m(qe(ee))):P=1,w=Ve}}}return c.addEventListener("click",z),{dblclick:m,simDblclick:z}}function At(c,m){c.removeEventListener("dblclick",m.dblclick),c.removeEventListener("click",m.simDblclick)}var Ut=Ro(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$t=Ro(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),qt=$t==="webkitTransition"||$t==="OTransition"?$t+"End":"transitionend";function Wt(c){return typeof c=="string"?document.getElementById(c):c}function Tn(c,m){var w=c.style[m]||c.currentStyle&&c.currentStyle[m];if((!w||w==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(c,null);w=P?P[m]:null}return w==="auto"?null:w}function Pt(c,m,w){var P=document.createElement(c);return P.className=m||"",w&&w.appendChild(P),P}function gn(c){var m=c.parentNode;m&&m.removeChild(c)}function si(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function Ki(c){var m=c.parentNode;m&&m.lastChild!==c&&m.appendChild(c)}function Di(c){var m=c.parentNode;m&&m.firstChild!==c&&m.insertBefore(c,m.firstChild)}function _i(c,m){if(c.classList!==void 0)return c.classList.contains(m);var w=hs(c);return w.length>0&&new RegExp("(^|\\s)"+m+"(\\s|$)").test(w)}function Dt(c,m){if(c.classList!==void 0)for(var w=x(m),P=0,z=w.length;P<z;P++)c.classList.add(w[P]);else if(!_i(c,m)){var ee=hs(c);li(c,(ee?ee+" ":"")+m)}}function ai(c,m){c.classList!==void 0?c.classList.remove(m):li(c,v((" "+hs(c)+" ").replace(" "+m+" "," ")))}function li(c,m){c.className.baseVal===void 0?c.className=m:c.className.baseVal=m}function hs(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function Sr(c,m){"opacity"in c.style?c.style.opacity=m:"filter"in c.style&&fs(c,m)}function fs(c,m){var w=!1,P="DXImageTransform.Microsoft.Alpha";try{w=c.filters.item(P)}catch{if(m===1)return}m=Math.round(m*100),w?(w.Enabled=m!==100,w.Opacity=m):c.style.filter+=" progid:"+P+"(opacity="+m+")"}function Ro(c){for(var m=document.documentElement.style,w=0;w<c.length;w++)if(c[w]in m)return c[w];return!1}function Ti(c,m,w){var P=m||new de(0,0);c.style[Ut]=(on.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(w?" scale("+w+")":"")}function Ii(c,m){c._leaflet_pos=m,on.any3d?Ti(c,m):(c.style.left=m.x+"px",c.style.top=m.y+"px")}function Fi(c){return c._leaflet_pos||new de(0,0)}var cr,nr,Kl;if("onselectstart"in document)cr=function(){ti(window,"selectstart",$r)},nr=function(){ar(window,"selectstart",$r)};else{var Ys=Ro(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);cr=function(){if(Ys){var c=document.documentElement.style;Kl=c[Ys],c[Ys]="none"}},nr=function(){Ys&&(document.documentElement.style[Ys]=Kl,Kl=void 0)}}function Hu(){ti(window,"dragstart",$r)}function Ql(){ar(window,"dragstart",$r)}var $c,yf;function dl(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(qc(),$c=c,yf=c.style.outlineStyle,c.style.outlineStyle="none",ti(window,"keydown",qc))}function qc(){$c&&($c.style.outlineStyle=yf,$c=void 0,yf=void 0,ar(window,"keydown",qc))}function Jl(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function vf(c){var m=c.getBoundingClientRect();return{x:m.width/c.offsetWidth||1,y:m.height/c.offsetHeight||1,boundingClientRect:m}}var Xc={__proto__:null,TRANSFORM:Ut,TRANSITION:$t,TRANSITION_END:qt,get:Wt,getStyle:Tn,create:Pt,remove:gn,empty:si,toFront:Ki,toBack:Di,hasClass:_i,addClass:Dt,removeClass:ai,setClass:li,getClass:hs,setOpacity:Sr,testProp:Ro,setTransform:Ti,setPosition:Ii,getPosition:Fi,get disableTextSelection(){return cr},get enableTextSelection(){return nr},disableImageDrag:Hu,enableImageDrag:Ql,preventOutline:dl,restoreOutline:qc,getSizedParentNode:Jl,getScale:vf};function ti(c,m,w,P){if(m&&typeof m=="object")for(var z in m)Va(c,z,m[z],w);else{m=x(m);for(var ee=0,_e=m.length;ee<_e;ee++)Va(c,m[ee],w,P)}return this}var ko="_leaflet_events";function ar(c,m,w,P){if(arguments.length===1)$d(c),delete c[ko];else if(m&&typeof m=="object")for(var z in m)qd(c,z,m[z],w);else if(m=x(m),arguments.length===2)$d(c,function(Ve){return j(m,Ve)!==-1});else for(var ee=0,_e=m.length;ee<_e;ee++)qd(c,m[ee],w,P);return this}function $d(c,m){for(var w in c[ko]){var P=w.split(/\d/)[0];(!m||m(P))&&qd(c,P,null,null,w)}}var _f={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Va(c,m,w,P){var z=m+o(w)+(P?"_"+o(P):"");if(c[ko]&&c[ko][z])return this;var ee=function(Ve){return w.call(P||c,Ve||window.event)},_e=ee;!on.touchNative&&on.pointer&&m.indexOf("touch")===0?ee=Wd(c,m,ee):on.touch&&m==="dblclick"?ee=Be(c,ee):"addEventListener"in c?m==="touchstart"||m==="touchmove"||m==="wheel"||m==="mousewheel"?c.addEventListener(_f[m]||m,ee,on.passiveEvents?{passive:!1}:!1):m==="mouseenter"||m==="mouseleave"?(ee=function(Ve){Ve=Ve||window.event,Yd(c,Ve)&&_e(Ve)},c.addEventListener(_f[m],ee,!1)):c.addEventListener(m,_e,!1):c.attachEvent("on"+m,ee),c[ko]=c[ko]||{},c[ko][z]=ee}function qd(c,m,w,P,z){z=z||m+o(w)+(P?"_"+o(P):"");var ee=c[ko]&&c[ko][z];if(!ee)return this;!on.touchNative&&on.pointer&&m.indexOf("touch")===0?Gr(c,m,ee):on.touch&&m==="dblclick"?At(c,ee):"removeEventListener"in c?c.removeEventListener(_f[m]||m,ee,!1):c.detachEvent("on"+m,ee),c[ko][z]=null}function ps(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function Yc(c){return Va(c,"wheel",ps),this}function Ua(c){return ti(c,"mousedown touchstart dblclick contextmenu",ps),c._leaflet_disable_click=!0,this}function $r(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function la(c){return $r(c),ps(c),this}function bf(c){if(c.composedPath)return c.composedPath();for(var m=[],w=c.target;w;)m.push(w),w=w.parentNode;return m}function ju(c,m){if(!m)return new de(c.clientX,c.clientY);var w=vf(m),P=w.boundingClientRect;return new de((c.clientX-P.left)/w.x-m.clientLeft,(c.clientY-P.top)/w.y-m.clientTop)}var M0=on.linux&&on.chrome?window.devicePixelRatio:on.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Xd(c){return on.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/M0:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function Yd(c,m){var w=m.relatedTarget;if(!w)return!0;try{for(;w&&w!==c;)w=w.parentNode}catch{return!1}return w!==c}var Wu={__proto__:null,on:ti,off:ar,stopPropagation:ps,disableScrollPropagation:Yc,disableClickPropagation:Ua,preventDefault:$r,stop:la,getPropagationPath:bf,getMousePosition:ju,getWheelDelta:Xd,isExternalTarget:Yd,addListener:ti,removeListener:ar},ec=ze.extend({run:function(c,m,w,P){this.stop(),this._el=c,this._inProgress=!0,this._duration=w||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=Fi(c),this._offset=m.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=te(this._animate,this),this._step()},_step:function(c){var m=+new Date-this._startTime,w=this._duration*1e3;m<w?this._runFrame(this._easeOut(m/w),c):(this._runFrame(1),this._complete())},_runFrame:function(c,m){var w=this._startPos.add(this._offset.multiplyBy(c));m&&w._round(),Ii(this._el,w),this.fire("step")},_complete:function(){V(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),ii=ze.extend({options:{crs:Mt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,m){m=S(this,m),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),m.maxBounds&&this.setMaxBounds(m.maxBounds),m.zoom!==void 0&&(this._zoom=this._limitZoom(m.zoom)),m.center&&m.zoom!==void 0&&this.setView(Ie(m.center),m.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$t&&on.any3d&&!on.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ti(this._proxy,qt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,m,w){if(m=m===void 0?this._zoom:this._limitZoom(m),c=this._limitCenter(Ie(c),m,this.options.maxBounds),w=w||{},this._stop(),this._loaded&&!w.reset&&w!==!0){w.animate!==void 0&&(w.zoom=e({animate:w.animate},w.zoom),w.pan=e({animate:w.animate,duration:w.duration},w.pan));var P=this._zoom!==m?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,m,w.zoom):this._tryAnimatedPan(c,w.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(c,m,w.pan&&w.pan.noMoveStart),this},setZoom:function(c,m){return this._loaded?this.setView(this.getCenter(),c,{zoom:m}):(this._zoom=c,this)},zoomIn:function(c,m){return c=c||(on.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,m)},zoomOut:function(c,m){return c=c||(on.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,m)},setZoomAround:function(c,m,w){var P=this.getZoomScale(m),z=this.getSize().divideBy(2),ee=c instanceof de?c:this.latLngToContainerPoint(c),_e=ee.subtract(z).multiplyBy(1-1/P),Ve=this.containerPointToLatLng(z.add(_e));return this.setView(Ve,m,{zoom:w})},_getBoundsCenterZoom:function(c,m){m=m||{},c=c.getBounds?c.getBounds():Tt(c);var w=me(m.paddingTopLeft||m.padding||[0,0]),P=me(m.paddingBottomRight||m.padding||[0,0]),z=this.getBoundsZoom(c,!1,w.add(P));if(z=typeof m.maxZoom=="number"?Math.min(m.maxZoom,z):z,z===1/0)return{center:c.getCenter(),zoom:z};var ee=P.subtract(w).divideBy(2),_e=this.project(c.getSouthWest(),z),Ve=this.project(c.getNorthEast(),z),Oe=this.unproject(_e.add(Ve).divideBy(2).add(ee),z);return{center:Oe,zoom:z}},fitBounds:function(c,m){if(c=Tt(c),!c.isValid())throw new Error("Bounds are not valid.");var w=this._getBoundsCenterZoom(c,m);return this.setView(w.center,w.zoom,m)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,m){return this.setView(c,this._zoom,{pan:m})},panBy:function(c,m){if(c=me(c).round(),m=m||{},!c.x&&!c.y)return this.fire("moveend");if(m.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ec,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),m.noMoveStart||this.fire("movestart"),m.animate!==!1){Dt(this._mapPane,"leaflet-pan-anim");var w=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,w,m.duration||.25,m.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,m,w){if(w=w||{},w.animate===!1||!on.any3d)return this.setView(c,m,w);this._stop();var P=this.project(this.getCenter()),z=this.project(c),ee=this.getSize(),_e=this._zoom;c=Ie(c),m=m===void 0?_e:m;var Ve=Math.max(ee.x,ee.y),Oe=Ve*this.getZoomScale(_e,m),ht=z.distanceTo(P)||1,Zt=1.42,On=Zt*Zt;function ci(Nr){var ed=Nr?-1:1,Pf=Nr?Oe:Ve,Rf=Oe*Oe-Ve*Ve+ed*On*On*ht*ht,dh=2*Pf*On*ht,td=Rf/dh,xl=Math.sqrt(td*td+1)-td,Vo=xl<1e-9?-18:Math.log(xl);return Vo}function ms(Nr){return(Math.exp(Nr)-Math.exp(-Nr))/2}function Pr(Nr){return(Math.exp(Nr)+Math.exp(-Nr))/2}function _o(Nr){return ms(Nr)/Pr(Nr)}var as=ci(0);function dc(Nr){return Ve*(Pr(as)/Pr(as+Zt*Nr))}function ch(Nr){return Ve*(Pr(as)*_o(as+Zt*Nr)-ms(as))/On}function L0(Nr){return 1-Math.pow(1-Nr,1.5)}var Bm=Date.now(),Vm=(ci(1)-as)/Zt,uh=w.duration?1e3*w.duration:1e3*Vm*.8;function Um(){var Nr=(Date.now()-Bm)/uh,ed=L0(Nr)*Vm;Nr<=1?(this._flyToFrame=te(Um,this),this._move(this.unproject(P.add(z.subtract(P).multiplyBy(ch(ed)/ht)),_e),this.getScaleZoom(Ve/dc(ed),_e),{flyTo:!0})):this._move(c,m)._moveEnd(!0)}return this._moveStart(!0,w.noMoveStart),Um.call(this),this},flyToBounds:function(c,m){var w=this._getBoundsCenterZoom(c,m);return this.flyTo(w.center,w.zoom,m)},setMaxBounds:function(c){return c=Tt(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var m=this.options.minZoom;return this.options.minZoom=c,this._loaded&&m!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var m=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&m!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,m){this._enforcingBounds=!0;var w=this.getCenter(),P=this._limitCenter(w,this._zoom,Tt(c));return w.equals(P)||this.panTo(P,m),this._enforcingBounds=!1,this},panInside:function(c,m){m=m||{};var w=me(m.paddingTopLeft||m.padding||[0,0]),P=me(m.paddingBottomRight||m.padding||[0,0]),z=this.project(this.getCenter()),ee=this.project(c),_e=this.getPixelBounds(),Ve=tt([_e.min.add(w),_e.max.subtract(P)]),Oe=Ve.getSize();if(!Ve.contains(ee)){this._enforcingBounds=!0;var ht=ee.subtract(Ve.getCenter()),Zt=Ve.extend(ee).getSize().subtract(Oe);z.x+=ht.x<0?-Zt.x:Zt.x,z.y+=ht.y<0?-Zt.y:Zt.y,this.panTo(this.unproject(z),m),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=e({animate:!1,pan:!0},c===!0?{animate:!0}:c);var m=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var w=this.getSize(),P=m.divideBy(2).round(),z=w.divideBy(2).round(),ee=P.subtract(z);return!ee.x&&!ee.y?this:(c.animate&&c.pan?this.panBy(ee):(c.pan&&this._rawPanBy(ee),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:m,newSize:w}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=e({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var m=r(this._handleGeolocationResponse,this),w=r(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(m,w,c):navigator.geolocation.getCurrentPosition(m,w,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var m=c.code,w=c.message||(m===1?"permission denied":m===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:m,message:"Geolocation error: "+w+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var m=c.coords.latitude,w=c.coords.longitude,P=new ut(m,w),z=P.toBounds(c.coords.accuracy*2),ee=this._locateOptions;if(ee.setView){var _e=this.getBoundsZoom(z);this.setView(P,ee.maxZoom?Math.min(_e,ee.maxZoom):_e)}var Ve={latlng:P,bounds:z,timestamp:c.timestamp};for(var Oe in c.coords)typeof c.coords[Oe]=="number"&&(Ve[Oe]=c.coords[Oe]);this.fire("locationfound",Ve)}},addHandler:function(c,m){if(!m)return this;var w=this[c]=new m(this);return this._handlers.push(w),this.options[c]&&w.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),gn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(V(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)gn(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,m){var w="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),P=Pt("div",w,m||this._mapPane);return c&&(this._panes[c]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),m=this.unproject(c.getBottomLeft()),w=this.unproject(c.getTopRight());return new xt(m,w)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,m,w){c=Tt(c),w=me(w||[0,0]);var P=this.getZoom()||0,z=this.getMinZoom(),ee=this.getMaxZoom(),_e=c.getNorthWest(),Ve=c.getSouthEast(),Oe=this.getSize().subtract(w),ht=tt(this.project(Ve,P),this.project(_e,P)).getSize(),Zt=on.any3d?this.options.zoomSnap:1,On=Oe.x/ht.x,ci=Oe.y/ht.y,ms=m?Math.max(On,ci):Math.min(On,ci);return P=this.getScaleZoom(ms,P),Zt&&(P=Math.round(P/(Zt/100))*(Zt/100),P=m?Math.ceil(P/Zt)*Zt:Math.floor(P/Zt)*Zt),Math.max(z,Math.min(ee,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new de(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,m){var w=this._getTopLeftPoint(c,m);return new $e(w,w.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,m){var w=this.options.crs;return m=m===void 0?this._zoom:m,w.scale(c)/w.scale(m)},getScaleZoom:function(c,m){var w=this.options.crs;m=m===void 0?this._zoom:m;var P=w.zoom(c*w.scale(m));return isNaN(P)?1/0:P},project:function(c,m){return m=m===void 0?this._zoom:m,this.options.crs.latLngToPoint(Ie(c),m)},unproject:function(c,m){return m=m===void 0?this._zoom:m,this.options.crs.pointToLatLng(me(c),m)},layerPointToLatLng:function(c){var m=me(c).add(this.getPixelOrigin());return this.unproject(m)},latLngToLayerPoint:function(c){var m=this.project(Ie(c))._round();return m._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(Ie(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(Tt(c))},distance:function(c,m){return this.options.crs.distance(Ie(c),Ie(m))},containerPointToLayerPoint:function(c){return me(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return me(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var m=this.containerPointToLayerPoint(me(c));return this.layerPointToLatLng(m)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ie(c)))},mouseEventToContainerPoint:function(c){return ju(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var m=this._container=Wt(c);if(m){if(m._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ti(m,"scroll",this._onScroll,this),this._containerId=o(m)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&on.any3d,Dt(c,"leaflet-container"+(on.touch?" leaflet-touch":"")+(on.retina?" leaflet-retina":"")+(on.ielt9?" leaflet-oldie":"")+(on.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var m=Tn(c,"position");m!=="absolute"&&m!=="relative"&&m!=="fixed"&&m!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ii(this._mapPane,new de(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Dt(c.markerPane,"leaflet-zoom-hide"),Dt(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,m,w){Ii(this._mapPane,new de(0,0));var P=!this._loaded;this._loaded=!0,m=this._limitZoom(m),this.fire("viewprereset");var z=this._zoom!==m;this._moveStart(z,w)._move(c,m)._moveEnd(z),this.fire("viewreset"),P&&this.fire("load")},_moveStart:function(c,m){return c&&this.fire("zoomstart"),m||this.fire("movestart"),this},_move:function(c,m,w,P){m===void 0&&(m=this._zoom);var z=this._zoom!==m;return this._zoom=m,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),P?w&&w.pinch&&this.fire("zoom",w):((z||w&&w.pinch)&&this.fire("zoom",w),this.fire("move",w)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return V(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){Ii(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[o(this._container)]=this;var m=c?ar:ti;m(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&m(window,"resize",this._onResize,this),on.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){V(this._resizeRequest),this._resizeRequest=te(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,m){for(var w=[],P,z=m==="mouseout"||m==="mouseover",ee=c.target||c.srcElement,_e=!1;ee;){if(P=this._targets[o(ee)],P&&(m==="click"||m==="preclick")&&this._draggableMoved(P)){_e=!0;break}if(P&&P.listens(m,!0)&&(z&&!Yd(ee,c)||(w.push(P),z))||ee===this._container)break;ee=ee.parentNode}return!w.length&&!_e&&!z&&this.listens(m,!0)&&(w=[this]),w},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var m=c.target||c.srcElement;if(!(!this._loaded||m._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(m))){var w=c.type;w==="mousedown"&&dl(m),this._fireDOMEvent(c,w)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,m,w){if(c.type==="click"){var P=e({},c);P.type="preclick",this._fireDOMEvent(P,P.type,w)}var z=this._findEventTargets(c,m);if(w){for(var ee=[],_e=0;_e<w.length;_e++)w[_e].listens(m,!0)&&ee.push(w[_e]);z=ee.concat(z)}if(z.length){m==="contextmenu"&&$r(c);var Ve=z[0],Oe={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var ht=Ve.getLatLng&&(!Ve._radius||Ve._radius<=10);Oe.containerPoint=ht?this.latLngToContainerPoint(Ve.getLatLng()):this.mouseEventToContainerPoint(c),Oe.layerPoint=this.containerPointToLayerPoint(Oe.containerPoint),Oe.latlng=ht?Ve.getLatLng():this.layerPointToLatLng(Oe.layerPoint)}for(_e=0;_e<z.length;_e++)if(z[_e].fire(m,Oe,!0),Oe.originalEvent._stopped||z[_e].options.bubblingMouseEvents===!1&&j(this._mouseEvents,m)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,m=this._handlers.length;c<m;c++)this._handlers[c].disable()},whenReady:function(c,m){return this._loaded?c.call(m||this,{target:this}):this.on("load",c,m),this},_getMapPanePos:function(){return Fi(this._mapPane)||new de(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,m){var w=c&&m!==void 0?this._getNewPixelOrigin(c,m):this.getPixelOrigin();return w.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,m){var w=this.getSize()._divideBy(2);return this.project(c,m)._subtract(w)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,m,w){var P=this._getNewPixelOrigin(w,m);return this.project(c,m)._subtract(P)},_latLngBoundsToNewLayerBounds:function(c,m,w){var P=this._getNewPixelOrigin(w,m);return tt([this.project(c.getSouthWest(),m)._subtract(P),this.project(c.getNorthWest(),m)._subtract(P),this.project(c.getSouthEast(),m)._subtract(P),this.project(c.getNorthEast(),m)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,m,w){if(!w)return c;var P=this.project(c,m),z=this.getSize().divideBy(2),ee=new $e(P.subtract(z),P.add(z)),_e=this._getBoundsOffset(ee,w,m);return Math.abs(_e.x)<=1&&Math.abs(_e.y)<=1?c:this.unproject(P.add(_e),m)},_limitOffset:function(c,m){if(!m)return c;var w=this.getPixelBounds(),P=new $e(w.min.add(c),w.max.add(c));return c.add(this._getBoundsOffset(P,m))},_getBoundsOffset:function(c,m,w){var P=tt(this.project(m.getNorthEast(),w),this.project(m.getSouthWest(),w)),z=P.min.subtract(c.min),ee=P.max.subtract(c.max),_e=this._rebound(z.x,-ee.x),Ve=this._rebound(z.y,-ee.y);return new de(_e,Ve)},_rebound:function(c,m){return c+m>0?Math.round(c-m)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(m))},_limitZoom:function(c){var m=this.getMinZoom(),w=this.getMaxZoom(),P=on.any3d?this.options.zoomSnap:1;return P&&(c=Math.round(c/P)*P),Math.max(m,Math.min(w,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ai(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,m){var w=this._getCenterOffset(c)._trunc();return(m&&m.animate)!==!0&&!this.getSize().contains(w)?!1:(this.panBy(w,m),!0)},_createAnimProxy:function(){var c=this._proxy=Pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(m){var w=Ut,P=this._proxy.style[w];Ti(this._proxy,this.project(m.center,m.zoom),this.getZoomScale(m.zoom,1)),P===this._proxy.style[w]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){gn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),m=this.getZoom();Ti(this._proxy,this.project(c,m),this.getZoomScale(m,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,m,w){if(this._animatingZoom)return!0;if(w=w||{},!this._zoomAnimated||w.animate===!1||this._nothingToAnimate()||Math.abs(m-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(m),z=this._getCenterOffset(c)._divideBy(1-1/P);return w.animate!==!0&&!this.getSize().contains(z)?!1:(te(function(){this._moveStart(!0,w.noMoveStart||!1)._animateZoom(c,m,!0)},this),!0)},_animateZoom:function(c,m,w,P){this._mapPane&&(w&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=m,Dt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:m,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ai(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Zd(c,m){return new ii(c,m)}var Ps=we.extend({options:{position:"topright"},initialize:function(c){S(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var m=this._map;return m&&m.removeControl(this),this.options.position=c,m&&m.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var m=this._container=this.onAdd(c),w=this.getPosition(),P=c._controlCorners[w];return Dt(m,"leaflet-control"),w.indexOf("bottom")!==-1?P.insertBefore(m,P.firstChild):P.appendChild(m),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(gn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),Gu=function(c){return new Ps(c)};ii.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},m="leaflet-",w=this._controlContainer=Pt("div",m+"control-container",this._container);function P(z,ee){var _e=m+z+" "+m+ee;c[z+ee]=Pt("div",_e,w)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)gn(this._controlCorners[c]);gn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var wm=Ps.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,m,w,P){return w<P?-1:P<w?1:0}},initialize:function(c,m,w){S(this,w),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var P in c)this._addLayer(c[P],P);for(P in m)this._addLayer(m[P],P,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var m=0;m<this._layers.length;m++)this._layers[m].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return Ps.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,m){return this._addLayer(c,m),this._map?this._update():this},addOverlay:function(c,m){return this._addLayer(c,m,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var m=this._getLayer(o(c));return m&&this._layers.splice(this._layers.indexOf(m),1),this._map?this._update():this},expand:function(){Dt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(Dt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):ai(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ai(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",m=this._container=Pt("div",c),w=this.options.collapsed;m.setAttribute("aria-haspopup",!0),Ua(m),Yc(m);var P=this._section=Pt("section",c+"-list");w&&(this._map.on("click",this.collapse,this),ti(m,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var z=this._layersLink=Pt("a",c+"-toggle",m);z.href="#",z.title="Layers",z.setAttribute("role","button"),ti(z,{keydown:function(ee){ee.keyCode===13&&this._expandSafely()},click:function(ee){$r(ee),this._expandSafely()}},this),w||this.expand(),this._baseLayersList=Pt("div",c+"-base",P),this._separator=Pt("div",c+"-separator",P),this._overlaysList=Pt("div",c+"-overlays",P),m.appendChild(P)},_getLayer:function(c){for(var m=0;m<this._layers.length;m++)if(this._layers[m]&&o(this._layers[m].layer)===c)return this._layers[m]},_addLayer:function(c,m,w){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:m,overlay:w}),this.options.sortLayers&&this._layers.sort(r(function(P,z){return this.options.sortFunction(P.layer,z.layer,P.name,z.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;si(this._baseLayersList),si(this._overlaysList),this._layerControlInputs=[];var c,m,w,P,z=0;for(w=0;w<this._layers.length;w++)P=this._layers[w],this._addItem(P),m=m||P.overlay,c=c||!P.overlay,z+=P.overlay?0:1;return this.options.hideSingleBase&&(c=c&&z>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=m&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var m=this._getLayer(o(c.target)),w=m.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;w&&this._map.fire(w,m)},_createRadioElement:function(c,m){var w='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(m?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=w,P.firstChild},_addItem:function(c){var m=document.createElement("label"),w=this._map.hasLayer(c.layer),P;c.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=w):P=this._createRadioElement("leaflet-base-layers_"+o(this),w),this._layerControlInputs.push(P),P.layerId=o(c.layer),ti(P,"click",this._onInputClick,this);var z=document.createElement("span");z.innerHTML=" "+c.name;var ee=document.createElement("span");m.appendChild(ee),ee.appendChild(P),ee.appendChild(z);var _e=c.overlay?this._overlaysList:this._baseLayersList;return _e.appendChild(m),this._checkDisabledLayers(),m},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,m,w,P=[],z=[];this._handlingClick=!0;for(var ee=c.length-1;ee>=0;ee--)m=c[ee],w=this._getLayer(m.layerId).layer,m.checked?P.push(w):m.checked||z.push(w);for(ee=0;ee<z.length;ee++)this._map.hasLayer(z[ee])&&this._map.removeLayer(z[ee]);for(ee=0;ee<P.length;ee++)this._map.hasLayer(P[ee])||this._map.addLayer(P[ee]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,m,w,P=this._map.getZoom(),z=c.length-1;z>=0;z--)m=c[z],w=this._getLayer(m.layerId).layer,m.disabled=w.options.minZoom!==void 0&&P<w.options.minZoom||w.options.maxZoom!==void 0&&P>w.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,ti(c,"click",$r),this.expand();var m=this;setTimeout(function(){ar(c,"click",$r),m._preventClick=!1})}}),Zc=function(c,m,w){return new wm(c,m,w)},Ir=Ps.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var m="leaflet-control-zoom",w=Pt("div",m+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,m+"-in",w,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,m+"-out",w,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),w},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,m,w,P,z){var ee=Pt("a",w,P);return ee.innerHTML=c,ee.href="#",ee.title=m,ee.setAttribute("role","button"),ee.setAttribute("aria-label",m),Ua(ee),ti(ee,"click",la),ti(ee,"click",z,this),ti(ee,"click",this._refocusOnMap,this),ee},_updateDisabled:function(){var c=this._map,m="leaflet-disabled";ai(this._zoomInButton,m),ai(this._zoomOutButton,m),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(Dt(this._zoomOutButton,m),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(Dt(this._zoomInButton,m),this._zoomInButton.setAttribute("aria-disabled","true"))}});ii.mergeOptions({zoomControl:!0}),ii.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ir,this.addControl(this.zoomControl))});var ca=function(c){return new Ir(c)},Kc=Ps.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var m="leaflet-control-scale",w=Pt("div",m),P=this.options;return this._addScales(P,m+"-line",w),c.on(P.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),w},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,m,w){c.metric&&(this._mScale=Pt("div",m,w)),c.imperial&&(this._iScale=Pt("div",m,w))},_update:function(){var c=this._map,m=c.getSize().y/2,w=c.distance(c.containerPointToLatLng([0,m]),c.containerPointToLatLng([this.options.maxWidth,m]));this._updateScales(w)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var m=this._getRoundNum(c),w=m<1e3?m+" m":m/1e3+" km";this._updateScale(this._mScale,w,m/c)},_updateImperial:function(c){var m=c*3.2808399,w,P,z;m>5280?(w=m/5280,P=this._getRoundNum(w),this._updateScale(this._iScale,P+" mi",P/w)):(z=this._getRoundNum(m),this._updateScale(this._iScale,z+" ft",z/m))},_updateScale:function(c,m,w){c.style.width=Math.round(this.options.maxWidth*w)+"px",c.innerHTML=m},_getRoundNum:function(c){var m=Math.pow(10,(Math.floor(c)+"").length-1),w=c/m;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:1,m*w}}),E0=function(c){return new Kc(c)},Cm='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',tc=Ps.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(on.inlineSvg?Cm+" ":"")+"Leaflet</a>"},initialize:function(c){S(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=Pt("div","leaflet-control-attribution"),Ua(this._container);for(var m in c._layers)c._layers[m].getAttribution&&this.addAttribution(c._layers[m].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var m in this._attributions)this._attributions[m]&&c.push(m);var w=[];this.options.prefix&&w.push(this.options.prefix),c.length&&w.push(c.join(", ")),this._container.innerHTML=w.join(' <span aria-hidden="true">|</span> ')}}});ii.mergeOptions({attributionControl:!0}),ii.addInitHook(function(){this.options.attributionControl&&new tc().addTo(this)});var T0=function(c){return new tc(c)};Ps.Layers=wm,Ps.Zoom=Ir,Ps.Scale=Kc,Ps.Attribution=tc,Gu.layers=Zc,Gu.zoom=ca,Gu.scale=E0,Gu.attribution=T0;var oo=we.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});oo.addTo=function(c,m){return c.addHandler(m,this),this};var Lo={Events:je},hl=on.touch?"touchstart mousedown":"mousedown",za=ze.extend({options:{clickTolerance:3},initialize:function(c,m,w,P){S(this,P),this._element=c,this._dragStartTarget=m||c,this._preventOutline=w},enable:function(){this._enabled||(ti(this._dragStartTarget,hl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(za._dragging===this&&this.finishDrag(!0),ar(this._dragStartTarget,hl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!_i(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){za._dragging===this&&this.finishDrag();return}if(!(za._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(za._dragging=this,this._preventOutline&&dl(this._element),Hu(),cr(),!this._moving)){this.fire("down");var m=c.touches?c.touches[0]:c,w=Jl(this._element);this._startPoint=new de(m.clientX,m.clientY),this._startPos=Fi(this._element),this._parentScale=vf(w);var P=c.type==="mousedown";ti(document,P?"mousemove":"touchmove",this._onMove,this),ti(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var m=c.touches&&c.touches.length===1?c.touches[0]:c,w=new de(m.clientX,m.clientY)._subtract(this._startPoint);!w.x&&!w.y||Math.abs(w.x)+Math.abs(w.y)<this.options.clickTolerance||(w.x/=this._parentScale.x,w.y/=this._parentScale.y,$r(c),this._moved||(this.fire("dragstart"),this._moved=!0,Dt(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Dt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(w),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),Ii(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){ai(document.body,"leaflet-dragging"),this._lastTarget&&(ai(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ar(document,"mousemove touchmove",this._onMove,this),ar(document,"mouseup touchend touchcancel",this._onUp,this),Ql(),nr();var m=this._moved&&this._moving;this._moving=!1,za._dragging=!1,m&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function Sm(c,m,w){var P,z=[1,4,2,8],ee,_e,Ve,Oe,ht,Zt,On,ci;for(ee=0,Zt=c.length;ee<Zt;ee++)c[ee]._code=ic(c[ee],m);for(Ve=0;Ve<4;Ve++){for(On=z[Ve],P=[],ee=0,Zt=c.length,_e=Zt-1;ee<Zt;_e=ee++)Oe=c[ee],ht=c[_e],Oe._code&On?ht._code&On||(ci=eh(ht,Oe,On,m,w),ci._code=ic(ci,m),P.push(ci)):(ht._code&On&&(ci=eh(ht,Oe,On,m,w),ci._code=ic(ci,m),P.push(ci)),P.push(Oe));c=P}return c}function Qc(c,m){var w,P,z,ee,_e,Ve,Oe,ht,Zt;if(!c||c.length===0)throw new Error("latlngs not passed");ao(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var On=Ie([0,0]),ci=Tt(c),ms=ci.getNorthWest().distanceTo(ci.getSouthWest())*ci.getNorthEast().distanceTo(ci.getNorthWest());ms<1700&&(On=Kd(c));var Pr=c.length,_o=[];for(w=0;w<Pr;w++){var as=Ie(c[w]);_o.push(m.project(Ie([as.lat-On.lat,as.lng-On.lng])))}for(Ve=Oe=ht=0,w=0,P=Pr-1;w<Pr;P=w++)z=_o[w],ee=_o[P],_e=z.y*ee.x-ee.y*z.x,Oe+=(z.x+ee.x)*_e,ht+=(z.y+ee.y)*_e,Ve+=_e*3;Ve===0?Zt=_o[0]:Zt=[Oe/Ve,ht/Ve];var dc=m.unproject(me(Zt));return Ie([dc.lat+On.lat,dc.lng+On.lng])}function Kd(c){for(var m=0,w=0,P=0,z=0;z<c.length;z++){var ee=Ie(c[z]);m+=ee.lat,w+=ee.lng,P++}return Ie([m/P,w/P])}var xf={__proto__:null,clipPolygon:Sm,polygonCenter:Qc,centroid:Kd};function Qd(c,m){if(!m||!c.length)return c.slice();var w=m*m;return c=$u(c,w),c=nc(c,w),c}function wf(c,m,w){return Math.sqrt(Ha(c,m,w,!0))}function Cf(c,m,w){return Ha(c,m,w)}function nc(c,m){var w=c.length,P=typeof Uint8Array<"u"?Uint8Array:Array,z=new P(w);z[0]=z[w-1]=1,Jd(c,z,m,0,w-1);var ee,_e=[];for(ee=0;ee<w;ee++)z[ee]&&_e.push(c[ee]);return _e}function Jd(c,m,w,P,z){var ee=0,_e,Ve,Oe;for(Ve=P+1;Ve<=z-1;Ve++)Oe=Ha(c[Ve],c[P],c[z],!0),Oe>ee&&(_e=Ve,ee=Oe);ee>w&&(m[_e]=1,Jd(c,m,w,P,_e),Jd(c,m,w,_e,z))}function $u(c,m){for(var w=[c[0]],P=1,z=0,ee=c.length;P<ee;P++)fl(c[P],c[z])>m&&(w.push(c[P]),z=P);return z<ee-1&&w.push(c[ee-1]),w}var Sf;function Mf(c,m,w,P,z){var ee=P?Sf:ic(c,w),_e=ic(m,w),Ve,Oe,ht;for(Sf=_e;;){if(!(ee|_e))return[c,m];if(ee&_e)return!1;Ve=ee||_e,Oe=eh(c,m,Ve,w,z),ht=ic(Oe,w),Ve===ee?(c=Oe,ee=ht):(m=Oe,_e=ht)}}function eh(c,m,w,P,z){var ee=m.x-c.x,_e=m.y-c.y,Ve=P.min,Oe=P.max,ht,Zt;return w&8?(ht=c.x+ee*(Oe.y-c.y)/_e,Zt=Oe.y):w&4?(ht=c.x+ee*(Ve.y-c.y)/_e,Zt=Ve.y):w&2?(ht=Oe.x,Zt=c.y+_e*(Oe.x-c.x)/ee):w&1&&(ht=Ve.x,Zt=c.y+_e*(Ve.x-c.x)/ee),new de(ht,Zt,z)}function ic(c,m){var w=0;return c.x<m.min.x?w|=1:c.x>m.max.x&&(w|=2),c.y<m.min.y?w|=4:c.y>m.max.y&&(w|=8),w}function fl(c,m){var w=m.x-c.x,P=m.y-c.y;return w*w+P*P}function Ha(c,m,w,P){var z=m.x,ee=m.y,_e=w.x-z,Ve=w.y-ee,Oe=_e*_e+Ve*Ve,ht;return Oe>0&&(ht=((c.x-z)*_e+(c.y-ee)*Ve)/Oe,ht>1?(z=w.x,ee=w.y):ht>0&&(z+=_e*ht,ee+=Ve*ht)),_e=c.x-z,Ve=c.y-ee,P?_e*_e+Ve*Ve:new de(z,ee)}function ao(c){return!T(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function Mm(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ao(c)}function Em(c,m){var w,P,z,ee,_e,Ve,Oe,ht;if(!c||c.length===0)throw new Error("latlngs not passed");ao(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Zt=Ie([0,0]),On=Tt(c),ci=On.getNorthWest().distanceTo(On.getSouthWest())*On.getNorthEast().distanceTo(On.getNorthWest());ci<1700&&(Zt=Kd(c));var ms=c.length,Pr=[];for(w=0;w<ms;w++){var _o=Ie(c[w]);Pr.push(m.project(Ie([_o.lat-Zt.lat,_o.lng-Zt.lng])))}for(w=0,P=0;w<ms-1;w++)P+=Pr[w].distanceTo(Pr[w+1])/2;if(P===0)ht=Pr[0];else for(w=0,ee=0;w<ms-1;w++)if(_e=Pr[w],Ve=Pr[w+1],z=_e.distanceTo(Ve),ee+=z,ee>P){Oe=(ee-P)/z,ht=[Ve.x-Oe*(Ve.x-_e.x),Ve.y-Oe*(Ve.y-_e.y)];break}var as=m.unproject(me(ht));return Ie([as.lat+Zt.lat,as.lng+Zt.lng])}var Ef={__proto__:null,simplify:Qd,pointToSegmentDistance:wf,closestPointOnSegment:Cf,clipSegment:Mf,_getEdgeIntersection:eh,_getBitCode:ic,_sqClosestPointOnSegment:Ha,isFlat:ao,_flat:Mm,polylineCenter:Em},pl={project:function(c){return new de(c.lng,c.lat)},unproject:function(c){return new ut(c.y,c.x)},bounds:new $e([-180,-90],[180,90])},th={R:6378137,R_MINOR:6356752314245179e-9,bounds:new $e([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var m=Math.PI/180,w=this.R,P=c.lat*m,z=this.R_MINOR/w,ee=Math.sqrt(1-z*z),_e=ee*Math.sin(P),Ve=Math.tan(Math.PI/4-P/2)/Math.pow((1-_e)/(1+_e),ee/2);return P=-w*Math.log(Math.max(Ve,1e-10)),new de(c.lng*m*w,P)},unproject:function(c){for(var m=180/Math.PI,w=this.R,P=this.R_MINOR/w,z=Math.sqrt(1-P*P),ee=Math.exp(-c.y/w),_e=Math.PI/2-2*Math.atan(ee),Ve=0,Oe=.1,ht;Ve<15&&Math.abs(Oe)>1e-7;Ve++)ht=z*Math.sin(_e),ht=Math.pow((1-ht)/(1+ht),z/2),Oe=Math.PI/2-2*Math.atan(ee*ht)-_e,_e+=Oe;return new ut(_e*m,c.x*m/w)}},qu={__proto__:null,LonLat:pl,Mercator:th,SphericalMercator:zt},A0=e({},Rt,{code:"EPSG:3395",projection:th,transformation:function(){var c=.5/(Math.PI*th.R);return dn(c,.5,-c,.5)}()}),Tm=e({},Rt,{code:"EPSG:4326",projection:pl,transformation:dn(1/180,1,-1/180,.5)}),D0=e({},at,{projection:pl,transformation:dn(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,m){var w=m.lng-c.lng,P=m.lat-c.lat;return Math.sqrt(w*w+P*P)},infinite:!0});at.Earth=Rt,at.EPSG3395=A0,at.EPSG3857=Mt,at.EPSG900913=Zi,at.EPSG4326=Tm,at.Simple=D0;var lo=ze.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[o(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[o(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var m=c.target;if(m.hasLayer(this)){if(this._map=m,this._zoomAnimated=m._zoomAnimated,this.getEvents){var w=this.getEvents();m.on(w,this),this.once("remove",function(){m.off(w,this)},this)}this.onAdd(m),this.fire("add"),m.fire("layeradd",{layer:this})}}});ii.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var m=o(c);return this._layers[m]?this:(this._layers[m]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var m=o(c);return this._layers[m]?(this._loaded&&c.onRemove(this),delete this._layers[m],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return o(c)in this._layers},eachLayer:function(c,m){for(var w in this._layers)c.call(m,this._layers[w]);return this},_addLayers:function(c){c=c?T(c)?c:[c]:[];for(var m=0,w=c.length;m<w;m++)this.addLayer(c[m])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[o(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var m=o(c);this._zoomBoundLayers[m]&&(delete this._zoomBoundLayers[m],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,m=-1/0,w=this._getZoomSpan();for(var P in this._zoomBoundLayers){var z=this._zoomBoundLayers[P].options;c=z.minZoom===void 0?c:Math.min(c,z.minZoom),m=z.maxZoom===void 0?m:Math.max(m,z.maxZoom)}this._layersMaxZoom=m===-1/0?void 0:m,this._layersMinZoom=c===1/0?void 0:c,w!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ml=lo.extend({initialize:function(c,m){S(this,m),this._layers={};var w,P;if(c)for(w=0,P=c.length;w<P;w++)this.addLayer(c[w])},addLayer:function(c){var m=this.getLayerId(c);return this._layers[m]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var m=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[m]&&this._map.removeLayer(this._layers[m]),delete this._layers[m],this},hasLayer:function(c){var m=typeof c=="number"?c:this.getLayerId(c);return m in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var m=Array.prototype.slice.call(arguments,1),w,P;for(w in this._layers)P=this._layers[w],P[c]&&P[c].apply(P,m);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,m){for(var w in this._layers)c.call(m,this._layers[w]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return o(c)}}),nh=function(c,m){return new ml(c,m)},Zs=ml.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),ml.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),ml.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new xt;for(var m in this._layers){var w=this._layers[m];c.extend(w.getBounds?w.getBounds():w.getLatLng())}return c}}),I0=function(c,m){return new Zs(c,m)},rc=we.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){S(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,m){var w=this._getIconUrl(c);if(!w){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(w,m&&m.tagName==="IMG"?m:null);return this._setIconStyles(P,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(c,m){var w=this.options,P=w[m+"Size"];typeof P=="number"&&(P=[P,P]);var z=me(P),ee=me(m==="shadow"&&w.shadowAnchor||w.iconAnchor||z&&z.divideBy(2,!0));c.className="leaflet-marker-"+m+" "+(w.className||""),ee&&(c.style.marginLeft=-ee.x+"px",c.style.marginTop=-ee.y+"px"),z&&(c.style.width=z.x+"px",c.style.height=z.y+"px")},_createImg:function(c,m){return m=m||document.createElement("img"),m.src=c,m},_getIconUrl:function(c){return on.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function Xu(c){return new rc(c)}var No=rc.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof No.imagePath!="string"&&(No.imagePath=this._detectIconPath()),(this.options.imagePath||No.imagePath)+rc.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var m=function(w,P,z){var ee=P.exec(w);return ee&&ee[z]};return c=m(c,/^url\((['"])?(.+)\1\)$/,2),c&&m(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=Pt("div","leaflet-default-icon-path",document.body),m=Tn(c,"background-image")||Tn(c,"backgroundImage");if(document.body.removeChild(c),m=this._stripUrl(m),m)return m;var w=document.querySelector('link[href$="leaflet.css"]');return w?w.href.substring(0,w.href.length-11-1):""}}),Am=oo.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new za(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Dt(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ai(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var m=this._marker,w=m._map,P=this._marker.options.autoPanSpeed,z=this._marker.options.autoPanPadding,ee=Fi(m._icon),_e=w.getPixelBounds(),Ve=w.getPixelOrigin(),Oe=tt(_e.min._subtract(Ve).add(z),_e.max._subtract(Ve).subtract(z));if(!Oe.contains(ee)){var ht=me((Math.max(Oe.max.x,ee.x)-Oe.max.x)/(_e.max.x-Oe.max.x)-(Math.min(Oe.min.x,ee.x)-Oe.min.x)/(_e.min.x-Oe.min.x),(Math.max(Oe.max.y,ee.y)-Oe.max.y)/(_e.max.y-Oe.max.y)-(Math.min(Oe.min.y,ee.y)-Oe.min.y)/(_e.min.y-Oe.min.y)).multiplyBy(P);w.panBy(ht,{animate:!1}),this._draggable._newPos._add(ht),this._draggable._startPos._add(ht),Ii(m._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=te(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(V(this._panRequest),this._panRequest=te(this._adjustPan.bind(this,c)))},_onDrag:function(c){var m=this._marker,w=m._shadow,P=Fi(m._icon),z=m._map.layerPointToLatLng(P);w&&Ii(w,P),m._latlng=z,c.latlng=z,c.oldLatLng=this._oldLatLng,m.fire("move",c).fire("drag",c)},_onDragEnd:function(c){V(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),ua=lo.extend({options:{icon:new No,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,m){S(this,m),this._latlng=Ie(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var m=this._latlng;return this._latlng=Ie(c),this.update(),this.fire("move",{oldLatLng:m,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,m="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),w=c.icon.createIcon(this._icon),P=!1;w!==this._icon&&(this._icon&&this._removeIcon(),P=!0,c.title&&(w.title=c.title),w.tagName==="IMG"&&(w.alt=c.alt||"")),Dt(w,m),c.keyboard&&(w.tabIndex="0",w.setAttribute("role","button")),this._icon=w,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ti(w,"focus",this._panOnFocus,this);var z=c.icon.createShadow(this._shadow),ee=!1;z!==this._shadow&&(this._removeShadow(),ee=!0),z&&(Dt(z,m),z.alt=""),this._shadow=z,c.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),z&&ee&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ar(this._icon,"focus",this._panOnFocus,this),gn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&gn(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&Ii(this._icon,c),this._shadow&&Ii(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var m=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(m)},_initInteraction:function(){if(this.options.interactive&&(Dt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Am)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Am(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&Sr(this._icon,c),this._shadow&&Sr(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var m=this.options.icon.options,w=m.iconSize?me(m.iconSize):me(0,0),P=m.iconAnchor?me(m.iconAnchor):me(0,0);c.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:w.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function P0(c,m){return new ua(c,m)}var Ks=lo.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return S(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ja=Ks.extend({options:{fill:!0,radius:10},initialize:function(c,m){S(this,m),this._latlng=Ie(c),this._radius=this.options.radius},setLatLng:function(c){var m=this._latlng;return this._latlng=Ie(c),this.redraw(),this.fire("move",{oldLatLng:m,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var m=c&&c.radius||this._radius;return Ks.prototype.setStyle.call(this,c),this.setRadius(m),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,m=this._radiusY||c,w=this._clickTolerance(),P=[c+w,m+w];this._pxBounds=new $e(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function gl(c,m){return new ja(c,m)}var sc=ja.extend({initialize:function(c,m,w){if(typeof m=="number"&&(m=e({},w,{radius:m})),S(this,m),this._latlng=Ie(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new xt(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:Ks.prototype.setStyle,_project:function(){var c=this._latlng.lng,m=this._latlng.lat,w=this._map,P=w.options.crs;if(P.distance===Rt.distance){var z=Math.PI/180,ee=this._mRadius/Rt.R/z,_e=w.project([m+ee,c]),Ve=w.project([m-ee,c]),Oe=_e.add(Ve).divideBy(2),ht=w.unproject(Oe).lat,Zt=Math.acos((Math.cos(ee*z)-Math.sin(m*z)*Math.sin(ht*z))/(Math.cos(m*z)*Math.cos(ht*z)))/z;(isNaN(Zt)||Zt===0)&&(Zt=ee/Math.cos(Math.PI/180*m)),this._point=Oe.subtract(w.getPixelOrigin()),this._radius=isNaN(Zt)?0:Oe.x-w.project([ht,c-Zt]).x,this._radiusY=Oe.y-_e.y}else{var On=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=w.latLngToLayerPoint(this._latlng),this._radius=this._point.x-w.latLngToLayerPoint(On).x}this._updateBounds()}});function Tf(c,m,w){return new sc(c,m,w)}var Wa=Ks.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,m){S(this,m),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var m=1/0,w=null,P=Ha,z,ee,_e=0,Ve=this._parts.length;_e<Ve;_e++)for(var Oe=this._parts[_e],ht=1,Zt=Oe.length;ht<Zt;ht++){z=Oe[ht-1],ee=Oe[ht];var On=P(c,z,ee,!0);On<m&&(m=On,w=P(c,z,ee))}return w&&(w.distance=Math.sqrt(m)),w},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Em(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,m){return m=m||this._defaultShape(),c=Ie(c),m.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new xt,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return ao(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var m=[],w=ao(c),P=0,z=c.length;P<z;P++)w?(m[P]=Ie(c[P]),this._bounds.extend(m[P])):m[P]=this._convertLatLngs(c[P]);return m},_project:function(){var c=new $e;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),m=new de(c,c);this._rawPxBounds&&(this._pxBounds=new $e([this._rawPxBounds.min.subtract(m),this._rawPxBounds.max.add(m)]))},_projectLatlngs:function(c,m,w){var P=c[0]instanceof ut,z=c.length,ee,_e;if(P){for(_e=[],ee=0;ee<z;ee++)_e[ee]=this._map.latLngToLayerPoint(c[ee]),w.extend(_e[ee]);m.push(_e)}else for(ee=0;ee<z;ee++)this._projectLatlngs(c[ee],m,w)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var m=this._parts,w,P,z,ee,_e,Ve,Oe;for(w=0,z=0,ee=this._rings.length;w<ee;w++)for(Oe=this._rings[w],P=0,_e=Oe.length;P<_e-1;P++)Ve=Mf(Oe[P],Oe[P+1],c,P,!0),Ve&&(m[z]=m[z]||[],m[z].push(Ve[0]),(Ve[1]!==Oe[P+1]||P===_e-2)&&(m[z].push(Ve[1]),z++))}},_simplifyPoints:function(){for(var c=this._parts,m=this.options.smoothFactor,w=0,P=c.length;w<P;w++)c[w]=Qd(c[w],m)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,m){var w,P,z,ee,_e,Ve,Oe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(w=0,ee=this._parts.length;w<ee;w++)for(Ve=this._parts[w],P=0,_e=Ve.length,z=_e-1;P<_e;z=P++)if(!(!m&&P===0)&&wf(c,Ve[z],Ve[P])<=Oe)return!0;return!1}});function R0(c,m){return new Wa(c,m)}Wa._flat=Mm;var oc=Wa.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Qc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var m=Wa.prototype._convertLatLngs.call(this,c),w=m.length;return w>=2&&m[0]instanceof ut&&m[0].equals(m[w-1])&&m.pop(),m},_setLatLngs:function(c){Wa.prototype._setLatLngs.call(this,c),ao(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ao(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,m=this.options.weight,w=new de(m,m);if(c=new $e(c.min.subtract(w),c.max.add(w)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,z=this._rings.length,ee;P<z;P++)ee=Sm(this._rings[P],c,!0),ee.length&&this._parts.push(ee)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var m=!1,w,P,z,ee,_e,Ve,Oe,ht;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(ee=0,Oe=this._parts.length;ee<Oe;ee++)for(w=this._parts[ee],_e=0,ht=w.length,Ve=ht-1;_e<ht;Ve=_e++)P=w[_e],z=w[Ve],P.y>c.y!=z.y>c.y&&c.x<(z.x-P.x)*(c.y-P.y)/(z.y-P.y)+P.x&&(m=!m);return m||Wa.prototype._containsPoint.call(this,c,!0)}});function Oo(c,m){return new oc(c,m)}var da=Zs.extend({initialize:function(c,m){S(this,m),this._layers={},c&&this.addData(c)},addData:function(c){var m=T(c)?c:c.features,w,P,z;if(m){for(w=0,P=m.length;w<P;w++)z=m[w],(z.geometries||z.geometry||z.features||z.coordinates)&&this.addData(z);return this}var ee=this.options;if(ee.filter&&!ee.filter(c))return this;var _e=ih(c,ee);return _e?(_e.feature=cc(c),_e.defaultOptions=_e.options,this.resetStyle(_e),ee.onEachFeature&&ee.onEachFeature(c,_e),this.addLayer(_e)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=e({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(m){this._setLayerStyle(m,c)},this)},_setLayerStyle:function(c,m){c.setStyle&&(typeof m=="function"&&(m=m(c.feature)),c.setStyle(m))}});function ih(c,m){var w=c.type==="Feature"?c.geometry:c,P=w?w.coordinates:null,z=[],ee=m&&m.pointToLayer,_e=m&&m.coordsToLatLng||Fo,Ve,Oe,ht,Zt;if(!P&&!w)return null;switch(w.type){case"Point":return Ve=_e(P),Af(ee,c,Ve,m);case"MultiPoint":for(ht=0,Zt=P.length;ht<Zt;ht++)Ve=_e(P[ht]),z.push(Af(ee,c,Ve,m));return new Zs(z);case"LineString":case"MultiLineString":return Oe=yl(P,w.type==="LineString"?0:1,_e),new Wa(Oe,m);case"Polygon":case"MultiPolygon":return Oe=yl(P,w.type==="Polygon"?1:2,_e),new oc(Oe,m);case"GeometryCollection":for(ht=0,Zt=w.geometries.length;ht<Zt;ht++){var On=ih({geometry:w.geometries[ht],type:"Feature",properties:c.properties},m);On&&z.push(On)}return new Zs(z);case"FeatureCollection":for(ht=0,Zt=w.features.length;ht<Zt;ht++){var ci=ih(w.features[ht],m);ci&&z.push(ci)}return new Zs(z);default:throw new Error("Invalid GeoJSON object.")}}function Af(c,m,w,P){return c?c(m,w):new ua(w,P&&P.markersInheritOptions&&P)}function Fo(c){return new ut(c[1],c[0],c[2])}function yl(c,m,w){for(var P=[],z=0,ee=c.length,_e;z<ee;z++)_e=m?yl(c[z],m-1,w):(w||Fo)(c[z]),P.push(_e);return P}function ac(c,m){return c=Ie(c),c.alt!==void 0?[p(c.lng,m),p(c.lat,m),p(c.alt,m)]:[p(c.lng,m),p(c.lat,m)]}function lc(c,m,w,P){for(var z=[],ee=0,_e=c.length;ee<_e;ee++)z.push(m?lc(c[ee],ao(c[ee])?0:m-1,w,P):ac(c[ee],P));return!m&&w&&z.length>0&&z.push(z[0].slice()),z}function Jc(c,m){return c.feature?e({},c.feature,{geometry:m}):cc(m)}function cc(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var rh={toGeoJSON:function(c){return Jc(this,{type:"Point",coordinates:ac(this.getLatLng(),c)})}};ua.include(rh),sc.include(rh),ja.include(rh),Wa.include({toGeoJSON:function(c){var m=!ao(this._latlngs),w=lc(this._latlngs,m?1:0,!1,c);return Jc(this,{type:(m?"Multi":"")+"LineString",coordinates:w})}}),oc.include({toGeoJSON:function(c){var m=!ao(this._latlngs),w=m&&!ao(this._latlngs[0]),P=lc(this._latlngs,w?2:m?1:0,!0,c);return m||(P=[P]),Jc(this,{type:(w?"Multi":"")+"Polygon",coordinates:P})}}),ml.include({toMultiPoint:function(c){var m=[];return this.eachLayer(function(w){m.push(w.toGeoJSON(c).geometry.coordinates)}),Jc(this,{type:"MultiPoint",coordinates:m})},toGeoJSON:function(c){var m=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(m==="MultiPoint")return this.toMultiPoint(c);var w=m==="GeometryCollection",P=[];return this.eachLayer(function(z){if(z.toGeoJSON){var ee=z.toGeoJSON(c);if(w)P.push(ee.geometry);else{var _e=cc(ee);_e.type==="FeatureCollection"?P.push.apply(P,_e.features):P.push(_e)}}}),w?Jc(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function Df(c,m){return new da(c,m)}var Dm=Df,sh=lo.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,m,w){this._url=c,this._bounds=Tt(m),S(this,w)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Dt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){gn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&Ki(this._image),this},bringToBack:function(){return this._map&&Di(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=Tt(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",m=this._image=c?this._url:Pt("img");if(Dt(m,"leaflet-image-layer"),this._zoomAnimated&&Dt(m,"leaflet-zoom-animated"),this.options.className&&Dt(m,this.options.className),m.onselectstart=h,m.onmousemove=h,m.onload=r(this.fire,this,"load"),m.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=m.src;return}m.src=this._url,m.alt=this.options.alt},_animateZoom:function(c){var m=this._map.getZoomScale(c.zoom),w=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;Ti(this._image,w,m)},_reset:function(){var c=this._image,m=new $e(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),w=m.getSize();Ii(c,m.min),c.style.width=w.x+"px",c.style.height=w.y+"px"},_updateOpacity:function(){Sr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),vl=function(c,m,w){return new sh(c,m,w)},_l=sh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",m=this._image=c?this._url:Pt("video");if(Dt(m,"leaflet-image-layer"),this._zoomAnimated&&Dt(m,"leaflet-zoom-animated"),this.options.className&&Dt(m,this.options.className),m.onselectstart=h,m.onmousemove=h,m.onloadeddata=r(this.fire,this,"load"),c){for(var w=m.getElementsByTagName("source"),P=[],z=0;z<w.length;z++)P.push(w[z].src);this._url=w.length>0?P:[m.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(m.style,"objectFit")&&(m.style.objectFit="fill"),m.autoplay=!!this.options.autoplay,m.loop=!!this.options.loop,m.muted=!!this.options.muted,m.playsInline=!!this.options.playsInline;for(var ee=0;ee<this._url.length;ee++){var _e=Pt("source");_e.src=this._url[ee],m.appendChild(_e)}}});function eu(c,m,w){return new _l(c,m,w)}var Im=sh.extend({_initImage:function(){var c=this._image=this._url;Dt(c,"leaflet-image-layer"),this._zoomAnimated&&Dt(c,"leaflet-zoom-animated"),this.options.className&&Dt(c,this.options.className),c.onselectstart=h,c.onmousemove=h}});function Yu(c,m,w){return new Im(c,m,w)}var os=lo.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,m){c&&(c instanceof ut||T(c))?(this._latlng=Ie(c),S(this,m)):(S(this,c),this._source=m),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&Sr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&Sr(this._container,1),this.bringToFront(),this.options.interactive&&(Dt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(Sr(this._container,0),this._removeTimeout=setTimeout(r(gn,void 0,this._container),200)):gn(this._container),this.options.interactive&&(ai(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=Ie(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ki(this._container),this},bringToBack:function(){return this._map&&Di(this._container),this},_prepareOpen:function(c){var m=this._source;if(!m._map)return!1;if(m instanceof Zs){m=null;var w=this._source._layers;for(var P in w)if(w[P]._map){m=w[P];break}if(!m)return!1;this._source=m}if(!c)if(m.getCenter)c=m.getCenter();else if(m.getLatLng)c=m.getLatLng();else if(m.getBounds)c=m.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,m=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof m=="string")c.innerHTML=m;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(m)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),m=me(this.options.offset),w=this._getAnchor();this._zoomAnimated?Ii(this._container,c.add(w)):m=m.add(c).add(w);var P=this._containerBottom=-m.y,z=this._containerLeft=-Math.round(this._containerWidth/2)+m.x;this._container.style.bottom=P+"px",this._container.style.left=z+"px"}},_getAnchor:function(){return[0,0]}});ii.include({_initOverlay:function(c,m,w,P){var z=m;return z instanceof c||(z=new c(P).setContent(m)),w&&z.setLatLng(w),z}}),lo.include({_initOverlay:function(c,m,w,P){var z=w;return z instanceof c?(S(z,P),z._source=this):(z=m&&!P?m:new c(P,this),z.setContent(w)),z}});var Zu=os.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,os.prototype.openOn.call(this,c)},onAdd:function(c){os.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ks||this._source.on("preclick",ps))},onRemove:function(c){os.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ks||this._source.off("preclick",ps))},getEvents:function(){var c=os.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",m=this._container=Pt("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),w=this._wrapper=Pt("div",c+"-content-wrapper",m);if(this._contentNode=Pt("div",c+"-content",w),Ua(m),Yc(this._contentNode),ti(m,"contextmenu",ps),this._tipContainer=Pt("div",c+"-tip-container",m),this._tip=Pt("div",c+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=Pt("a",c+"-close-button",m);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',ti(P,"click",function(z){$r(z),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,m=c.style;m.width="",m.whiteSpace="nowrap";var w=c.offsetWidth;w=Math.min(w,this.options.maxWidth),w=Math.max(w,this.options.minWidth),m.width=w+1+"px",m.whiteSpace="",m.height="";var P=c.offsetHeight,z=this.options.maxHeight,ee="leaflet-popup-scrolled";z&&P>z?(m.height=z+"px",Dt(c,ee)):ai(c,ee),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var m=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),w=this._getAnchor();Ii(this._container,m.add(w))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,m=parseInt(Tn(this._container,"marginBottom"),10)||0,w=this._container.offsetHeight+m,P=this._containerWidth,z=new de(this._containerLeft,-w-this._containerBottom);z._add(Fi(this._container));var ee=c.layerPointToContainerPoint(z),_e=me(this.options.autoPanPadding),Ve=me(this.options.autoPanPaddingTopLeft||_e),Oe=me(this.options.autoPanPaddingBottomRight||_e),ht=c.getSize(),Zt=0,On=0;ee.x+P+Oe.x>ht.x&&(Zt=ee.x+P-ht.x+Oe.x),ee.x-Zt-Ve.x<0&&(Zt=ee.x-Ve.x),ee.y+w+Oe.y>ht.y&&(On=ee.y+w-ht.y+Oe.y),ee.y-On-Ve.y<0&&(On=ee.y-Ve.y),(Zt||On)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([Zt,On]))}},_getAnchor:function(){return me(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ha=function(c,m){return new Zu(c,m)};ii.mergeOptions({closePopupOnClick:!0}),ii.include({openPopup:function(c,m,w){return this._initOverlay(Zu,c,m,w).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),lo.include({bindPopup:function(c,m){return this._popup=this._initOverlay(Zu,this._popup,c,m),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof Zs||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){la(c);var m=c.layer||c.target;if(this._popup._source===m&&!(m instanceof Ks)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=m,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var tu=os.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){os.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){os.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=os.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",m=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pt("div",m),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var m,w,P=this._map,z=this._container,ee=P.latLngToContainerPoint(P.getCenter()),_e=P.layerPointToContainerPoint(c),Ve=this.options.direction,Oe=z.offsetWidth,ht=z.offsetHeight,Zt=me(this.options.offset),On=this._getAnchor();Ve==="top"?(m=Oe/2,w=ht):Ve==="bottom"?(m=Oe/2,w=0):Ve==="center"?(m=Oe/2,w=ht/2):Ve==="right"?(m=0,w=ht/2):Ve==="left"?(m=Oe,w=ht/2):_e.x<ee.x?(Ve="right",m=0,w=ht/2):(Ve="left",m=Oe+(Zt.x+On.x)*2,w=ht/2),c=c.subtract(me(m,w,!0)).add(Zt).add(On),ai(z,"leaflet-tooltip-right"),ai(z,"leaflet-tooltip-left"),ai(z,"leaflet-tooltip-top"),ai(z,"leaflet-tooltip-bottom"),Dt(z,"leaflet-tooltip-"+Ve),Ii(z,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&Sr(this._container,c)},_animateZoom:function(c){var m=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(m)},_getAnchor:function(){return me(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),k0=function(c,m){return new tu(c,m)};ii.include({openTooltip:function(c,m,w){return this._initOverlay(tu,c,m,w).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),lo.include({bindTooltip:function(c,m){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(tu,this._tooltip,c,m),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var m=c?"off":"on",w={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?w.add=this._openTooltip:(w.mouseover=this._openTooltip,w.mouseout=this.closeTooltip,w.click=this._openTooltip,this._map?this._addFocusListeners():w.add=this._addFocusListeners),this._tooltip.options.sticky&&(w.mousemove=this._moveTooltip),this[m](w),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof Zs||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var m=typeof c.getElement=="function"&&c.getElement();m&&(ti(m,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),ti(m,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var m=typeof c.getElement=="function"&&c.getElement();m&&m.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var m=this;this._map.once("moveend",function(){m._openOnceFlag=!1,m._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var m=c.latlng,w,P;this._tooltip.options.sticky&&c.originalEvent&&(w=this._map.mouseEventToContainerPoint(c.originalEvent),P=this._map.containerPointToLayerPoint(w),m=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(m)}});var Ku=rc.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var m=c&&c.tagName==="DIV"?c:document.createElement("div"),w=this.options;if(w.html instanceof Element?(si(m),m.appendChild(w.html)):m.innerHTML=w.html!==!1?w.html:"",w.bgPos){var P=me(w.bgPos);m.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(m,"icon"),m},createShadow:function(){return null}});function Ga(c){return new Ku(c)}rc.Default=No;var Rs=lo.extend({options:{tileSize:256,opacity:1,updateWhenIdle:on.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){S(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),gn(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ki(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Di(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof de?c:new de(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var m=this.getPane().children,w=-c(-1/0,1/0),P=0,z=m.length,ee;P<z;P++)ee=m[P].style.zIndex,m[P]!==this._container&&ee&&(w=c(w,+ee));isFinite(w)&&(this.options.zIndex=w+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!on.ielt9){Sr(this._container,this.options.opacity);var c=+new Date,m=!1,w=!1;for(var P in this._tiles){var z=this._tiles[P];if(!(!z.current||!z.loaded)){var ee=Math.min(1,(c-z.loaded)/200);Sr(z.el,ee),ee<1?m=!0:(z.active?w=!0:this._onOpaqueTile(z),z.active=!0)}}w&&!this._noPrune&&this._pruneTiles(),m&&(V(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=Pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,m=this.options.maxZoom;if(c!==void 0){for(var w in this._levels)w=Number(w),this._levels[w].el.children.length||w===c?(this._levels[w].el.style.zIndex=m-Math.abs(c-w),this._onUpdateLevel(w)):(gn(this._levels[w].el),this._removeTilesAtZoom(w),this._onRemoveLevel(w),delete this._levels[w]);var P=this._levels[c],z=this._map;return P||(P=this._levels[c]={},P.el=Pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=m,P.origin=z.project(z.unproject(z.getPixelOrigin()),c).round(),P.zoom=c,this._setZoomTransform(P,z.getCenter(),z.getZoom()),h(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var c,m,w=this._map.getZoom();if(w>this.options.maxZoom||w<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)m=this._tiles[c],m.retain=m.current;for(c in this._tiles)if(m=this._tiles[c],m.current&&!m.active){var P=m.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var m in this._tiles)this._tiles[m].coords.z===c&&this._removeTile(m)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)gn(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,m,w,P){var z=Math.floor(c/2),ee=Math.floor(m/2),_e=w-1,Ve=new de(+z,+ee);Ve.z=+_e;var Oe=this._tileCoordsToKey(Ve),ht=this._tiles[Oe];return ht&&ht.active?(ht.retain=!0,!0):(ht&&ht.loaded&&(ht.retain=!0),_e>P?this._retainParent(z,ee,_e,P):!1)},_retainChildren:function(c,m,w,P){for(var z=2*c;z<2*c+2;z++)for(var ee=2*m;ee<2*m+2;ee++){var _e=new de(z,ee);_e.z=w+1;var Ve=this._tileCoordsToKey(_e),Oe=this._tiles[Ve];if(Oe&&Oe.active){Oe.retain=!0;continue}else Oe&&Oe.loaded&&(Oe.retain=!0);w+1<P&&this._retainChildren(z,ee,w+1,P)}},_resetView:function(c){var m=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),m,m)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var m=this.options;return m.minNativeZoom!==void 0&&c<m.minNativeZoom?m.minNativeZoom:m.maxNativeZoom!==void 0&&m.maxNativeZoom<c?m.maxNativeZoom:c},_setView:function(c,m,w,P){var z=Math.round(m);this.options.maxZoom!==void 0&&z>this.options.maxZoom||this.options.minZoom!==void 0&&z<this.options.minZoom?z=void 0:z=this._clampZoom(z);var ee=this.options.updateWhenZooming&&z!==this._tileZoom;(!P||ee)&&(this._tileZoom=z,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),z!==void 0&&this._update(c),w||this._pruneTiles(),this._noPrune=!!w),this._setZoomTransforms(c,m)},_setZoomTransforms:function(c,m){for(var w in this._levels)this._setZoomTransform(this._levels[w],c,m)},_setZoomTransform:function(c,m,w){var P=this._map.getZoomScale(w,c.zoom),z=c.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(m,w)).round();on.any3d?Ti(c.el,z,P):Ii(c.el,z)},_resetGrid:function(){var c=this._map,m=c.options.crs,w=this._tileSize=this.getTileSize(),P=this._tileZoom,z=this._map.getPixelWorldBounds(this._tileZoom);z&&(this._globalTileRange=this._pxBoundsToTileRange(z)),this._wrapX=m.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,m.wrapLng[0]],P).x/w.x),Math.ceil(c.project([0,m.wrapLng[1]],P).x/w.y)],this._wrapY=m.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([m.wrapLat[0],0],P).y/w.x),Math.ceil(c.project([m.wrapLat[1],0],P).y/w.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var m=this._map,w=m._animatingZoom?Math.max(m._animateToZoom,m.getZoom()):m.getZoom(),P=m.getZoomScale(w,this._tileZoom),z=m.project(c,this._tileZoom).floor(),ee=m.getSize().divideBy(P*2);return new $e(z.subtract(ee),z.add(ee))},_update:function(c){var m=this._map;if(m){var w=this._clampZoom(m.getZoom());if(c===void 0&&(c=m.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(c),z=this._pxBoundsToTileRange(P),ee=z.getCenter(),_e=[],Ve=this.options.keepBuffer,Oe=new $e(z.getBottomLeft().subtract([Ve,-Ve]),z.getTopRight().add([Ve,-Ve]));if(!(isFinite(z.min.x)&&isFinite(z.min.y)&&isFinite(z.max.x)&&isFinite(z.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ht in this._tiles){var Zt=this._tiles[ht].coords;(Zt.z!==this._tileZoom||!Oe.contains(new de(Zt.x,Zt.y)))&&(this._tiles[ht].current=!1)}if(Math.abs(w-this._tileZoom)>1){this._setView(c,w);return}for(var On=z.min.y;On<=z.max.y;On++)for(var ci=z.min.x;ci<=z.max.x;ci++){var ms=new de(ci,On);if(ms.z=this._tileZoom,!!this._isValidTile(ms)){var Pr=this._tiles[this._tileCoordsToKey(ms)];Pr?Pr.current=!0:_e.push(ms)}}if(_e.sort(function(as,dc){return as.distanceTo(ee)-dc.distanceTo(ee)}),_e.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _o=document.createDocumentFragment();for(ci=0;ci<_e.length;ci++)this._addTile(_e[ci],_o);this._level.el.appendChild(_o)}}}},_isValidTile:function(c){var m=this._map.options.crs;if(!m.infinite){var w=this._globalTileRange;if(!m.wrapLng&&(c.x<w.min.x||c.x>w.max.x)||!m.wrapLat&&(c.y<w.min.y||c.y>w.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(c);return Tt(this.options.bounds).overlaps(P)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var m=this._map,w=this.getTileSize(),P=c.scaleBy(w),z=P.add(w),ee=m.unproject(P,c.z),_e=m.unproject(z,c.z);return[ee,_e]},_tileCoordsToBounds:function(c){var m=this._tileCoordsToNwSe(c),w=new xt(m[0],m[1]);return this.options.noWrap||(w=this._map.wrapLatLngBounds(w)),w},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var m=c.split(":"),w=new de(+m[0],+m[1]);return w.z=+m[2],w},_removeTile:function(c){var m=this._tiles[c];m&&(gn(m.el),delete this._tiles[c],this.fire("tileunload",{tile:m.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){Dt(c,"leaflet-tile");var m=this.getTileSize();c.style.width=m.x+"px",c.style.height=m.y+"px",c.onselectstart=h,c.onmousemove=h,on.ielt9&&this.options.opacity<1&&Sr(c,this.options.opacity)},_addTile:function(c,m){var w=this._getTilePos(c),P=this._tileCoordsToKey(c),z=this.createTile(this._wrapCoords(c),r(this._tileReady,this,c));this._initTile(z),this.createTile.length<2&&te(r(this._tileReady,this,c,null,z)),Ii(z,w),this._tiles[P]={el:z,coords:c,current:!0},m.appendChild(z),this.fire("tileloadstart",{tile:z,coords:c})},_tileReady:function(c,m,w){m&&this.fire("tileerror",{error:m,tile:w,coords:c});var P=this._tileCoordsToKey(c);w=this._tiles[P],w&&(w.loaded=+new Date,this._map._fadeAnimated?(Sr(w.el,0),V(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this)):(w.active=!0,this._pruneTiles()),m||(Dt(w.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:w.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),on.ielt9||!this._map._fadeAnimated?te(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var m=new de(this._wrapX?u(c.x,this._wrapX):c.x,this._wrapY?u(c.y,this._wrapY):c.y);return m.z=c.z,m},_pxBoundsToTileRange:function(c){var m=this.getTileSize();return new $e(c.min.unscaleBy(m).floor(),c.max.unscaleBy(m).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function Pm(c){return new Rs(c)}var yo=Rs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,m){this._url=c,m=S(this,m),m.detectRetina&&on.retina&&m.maxZoom>0?(m.tileSize=Math.floor(m.tileSize/2),m.zoomReverse?(m.zoomOffset--,m.minZoom=Math.min(m.maxZoom,m.minZoom+1)):(m.zoomOffset++,m.maxZoom=Math.max(m.minZoom,m.maxZoom-1)),m.minZoom=Math.max(0,m.minZoom)):m.zoomReverse?m.minZoom=Math.min(m.maxZoom,m.minZoom):m.maxZoom=Math.max(m.minZoom,m.maxZoom),typeof m.subdomains=="string"&&(m.subdomains=m.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,m){return this._url===c&&m===void 0&&(m=!0),this._url=c,m||this.redraw(),this},createTile:function(c,m){var w=document.createElement("img");return ti(w,"load",r(this._tileOnLoad,this,m,w)),ti(w,"error",r(this._tileOnError,this,m,w)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(w.referrerPolicy=this.options.referrerPolicy),w.alt="",w.src=this.getTileUrl(c),w},getTileUrl:function(c){var m={r:on.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var w=this._globalTileRange.max.y-c.y;this.options.tms&&(m.y=w),m["-y"]=w}return N(this._url,e(m,this.options))},_tileOnLoad:function(c,m){on.ielt9?setTimeout(r(c,this,null,m),0):c(null,m)},_tileOnError:function(c,m,w){var P=this.options.errorTileUrl;P&&m.getAttribute("src")!==P&&(m.src=P),c(w,m)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,m=this.options.maxZoom,w=this.options.zoomReverse,P=this.options.zoomOffset;return w&&(c=m-c),c+P},_getSubdomain:function(c){var m=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[m]},_abortLoading:function(){var c,m;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(m=this._tiles[c].el,m.onload=h,m.onerror=h,!m.complete)){m.src=Z;var w=this._tiles[c].coords;gn(m),delete this._tiles[c],this.fire("tileabort",{tile:m,coords:w})}},_removeTile:function(c){var m=this._tiles[c];if(m)return m.el.setAttribute("src",Z),Rs.prototype._removeTile.call(this,c)},_tileReady:function(c,m,w){if(!(!this._map||w&&w.getAttribute("src")===Z))return Rs.prototype._tileReady.call(this,c,m,w)}});function Rm(c,m){return new yo(c,m)}var Qu=yo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,m){this._url=c;var w=e({},this.defaultWmsParams);for(var P in m)P in this.options||(w[P]=m[P]);m=S(this,m);var z=m.detectRetina&&on.retina?2:1,ee=this.getTileSize();w.width=ee.x*z,w.height=ee.y*z,this.wmsParams=w},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var m=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[m]=this._crs.code,yo.prototype.onAdd.call(this,c)},getTileUrl:function(c){var m=this._tileCoordsToNwSe(c),w=this._crs,P=tt(w.project(m[0]),w.project(m[1])),z=P.min,ee=P.max,_e=(this._wmsVersion>=1.3&&this._crs===Tm?[z.y,z.x,ee.y,ee.x]:[z.x,z.y,ee.x,ee.y]).join(","),Ve=yo.prototype.getTileUrl.call(this,c);return Ve+D(this.wmsParams,Ve,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+_e},setParams:function(c,m){return e(this.wmsParams,c),m||this.redraw(),this}});function km(c,m){return new Qu(c,m)}yo.WMS=Qu,Rm.wms=km;var $a=lo.extend({options:{padding:.1},initialize:function(c){S(this,c),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Dt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,m){var w=this._map.getZoomScale(m,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),z=this._map.project(this._center,m),ee=P.multiplyBy(-w).add(z).subtract(this._map._getNewPixelOrigin(c,m));on.any3d?Ti(this._container,ee,w):Ii(this._container,ee)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,m=this._map.getSize(),w=this._map.containerPointToLayerPoint(m.multiplyBy(-c)).round();this._bounds=new $e(w,w.add(m.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Bo=$a.extend({options:{tolerance:0},getEvents:function(){var c=$a.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){$a.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");ti(c,"mousemove",this._onMouseMove,this),ti(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ti(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){V(this._redrawRequest),delete this._ctx,gn(this._container),ar(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var m in this._layers)c=this._layers[m],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$a.prototype._update.call(this);var c=this._bounds,m=this._container,w=c.getSize(),P=on.retina?2:1;Ii(m,c.min),m.width=P*w.x,m.height=P*w.y,m.style.width=w.x+"px",m.style.height=w.y+"px",on.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){$a.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[o(c)]=c;var m=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=m),this._drawLast=m,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var m=c._order,w=m.next,P=m.prev;w?w.prev=P:this._drawLast=P,P?P.next=w:this._drawFirst=w,delete c._order,delete this._layers[o(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var m=c.options.dashArray.split(/[, ]+/),w=[],P,z;for(z=0;z<m.length;z++){if(P=Number(m[z]),isNaN(P))return;w.push(P)}c.options._dashArray=w}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||te(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var m=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new $e,this._redrawBounds.extend(c._pxBounds.min.subtract([m,m])),this._redrawBounds.extend(c._pxBounds.max.add([m,m]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var m=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,m.x,m.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,m=this._redrawBounds;if(this._ctx.save(),m){var w=m.getSize();this._ctx.beginPath(),this._ctx.rect(m.min.x,m.min.y,w.x,w.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)c=P.layer,(!m||c._pxBounds&&c._pxBounds.intersects(m))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,m){if(this._drawing){var w,P,z,ee,_e=c._parts,Ve=_e.length,Oe=this._ctx;if(Ve){for(Oe.beginPath(),w=0;w<Ve;w++){for(P=0,z=_e[w].length;P<z;P++)ee=_e[w][P],Oe[P?"lineTo":"moveTo"](ee.x,ee.y);m&&Oe.closePath()}this._fillStroke(Oe,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var m=c._point,w=this._ctx,P=Math.max(Math.round(c._radius),1),z=(Math.max(Math.round(c._radiusY),1)||P)/P;z!==1&&(w.save(),w.scale(1,z)),w.beginPath(),w.arc(m.x,m.y/z,P,0,Math.PI*2,!1),z!==1&&w.restore(),this._fillStroke(w,c)}},_fillStroke:function(c,m){var w=m.options;w.fill&&(c.globalAlpha=w.fillOpacity,c.fillStyle=w.fillColor||w.color,c.fill(w.fillRule||"evenodd")),w.stroke&&w.weight!==0&&(c.setLineDash&&c.setLineDash(m.options&&m.options._dashArray||[]),c.globalAlpha=w.opacity,c.lineWidth=w.weight,c.strokeStyle=w.color,c.lineCap=w.lineCap,c.lineJoin=w.lineJoin,c.stroke())},_onClick:function(c){for(var m=this._map.mouseEventToLayerPoint(c),w,P,z=this._drawFirst;z;z=z.next)w=z.layer,w.options.interactive&&w._containsPoint(m)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(w))&&(P=w);this._fireEvent(P?[P]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var m=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,m)}},_handleMouseOut:function(c){var m=this._hoveredLayer;m&&(ai(this._container,"leaflet-interactive"),this._fireEvent([m],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,m){if(!this._mouseHoverThrottled){for(var w,P,z=this._drawFirst;z;z=z.next)w=z.layer,w.options.interactive&&w._containsPoint(m)&&(P=w);P!==this._hoveredLayer&&(this._handleMouseOut(c),P&&(Dt(this._container,"leaflet-interactive"),this._fireEvent([P],c,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,m,w){this._map._fireDOMEvent(m,w||m.type,c)},_bringToFront:function(c){var m=c._order;if(m){var w=m.next,P=m.prev;if(w)w.prev=P;else return;P?P.next=w:w&&(this._drawFirst=w),m.prev=this._drawLast,this._drawLast.next=m,m.next=null,this._drawLast=m,this._requestRedraw(c)}},_bringToBack:function(c){var m=c._order;if(m){var w=m.next,P=m.prev;if(P)P.next=w;else return;w?w.prev=P:P&&(this._drawLast=P),m.prev=null,m.next=this._drawFirst,this._drawFirst.prev=m,this._drawFirst=m,this._requestRedraw(c)}}});function ks(c){return on.canvas?new Bo(c):null}var qa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),oh={_initContainer:function(){this._container=Pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||($a.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var m=c._container=qa("shape");Dt(m,"leaflet-vml-shape "+(this.options.className||"")),m.coordsize="1 1",c._path=qa("path"),m.appendChild(c._path),this._updateStyle(c),this._layers[o(c)]=c},_addPath:function(c){var m=c._container;this._container.appendChild(m),c.options.interactive&&c.addInteractiveTarget(m)},_removePath:function(c){var m=c._container;gn(m),c.removeInteractiveTarget(m),delete this._layers[o(c)]},_updateStyle:function(c){var m=c._stroke,w=c._fill,P=c.options,z=c._container;z.stroked=!!P.stroke,z.filled=!!P.fill,P.stroke?(m||(m=c._stroke=qa("stroke")),z.appendChild(m),m.weight=P.weight+"px",m.color=P.color,m.opacity=P.opacity,P.dashArray?m.dashStyle=T(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):m.dashStyle="",m.endcap=P.lineCap.replace("butt","flat"),m.joinstyle=P.lineJoin):m&&(z.removeChild(m),c._stroke=null),P.fill?(w||(w=c._fill=qa("fill")),z.appendChild(w),w.color=P.fillColor||P.color,w.opacity=P.fillOpacity):w&&(z.removeChild(w),c._fill=null)},_updateCircle:function(c){var m=c._point.round(),w=Math.round(c._radius),P=Math.round(c._radiusY||w);this._setPath(c,c._empty()?"M0 0":"AL "+m.x+","+m.y+" "+w+","+P+" 0,"+65535*360)},_setPath:function(c,m){c._path.v=m},_bringToFront:function(c){Ki(c._container)},_bringToBack:function(c){Di(c._container)}},vo=on.vml?qa:Bn,bl=$a.extend({_initContainer:function(){this._container=vo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=vo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){gn(this._container),ar(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$a.prototype._update.call(this);var c=this._bounds,m=c.getSize(),w=this._container;(!this._svgSize||!this._svgSize.equals(m))&&(this._svgSize=m,w.setAttribute("width",m.x),w.setAttribute("height",m.y)),Ii(w,c.min),w.setAttribute("viewBox",[c.min.x,c.min.y,m.x,m.y].join(" ")),this.fire("update")}},_initPath:function(c){var m=c._path=vo("path");c.options.className&&Dt(m,c.options.className),c.options.interactive&&Dt(m,"leaflet-interactive"),this._updateStyle(c),this._layers[o(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){gn(c._path),c.removeInteractiveTarget(c._path),delete this._layers[o(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var m=c._path,w=c.options;m&&(w.stroke?(m.setAttribute("stroke",w.color),m.setAttribute("stroke-opacity",w.opacity),m.setAttribute("stroke-width",w.weight),m.setAttribute("stroke-linecap",w.lineCap),m.setAttribute("stroke-linejoin",w.lineJoin),w.dashArray?m.setAttribute("stroke-dasharray",w.dashArray):m.removeAttribute("stroke-dasharray"),w.dashOffset?m.setAttribute("stroke-dashoffset",w.dashOffset):m.removeAttribute("stroke-dashoffset")):m.setAttribute("stroke","none"),w.fill?(m.setAttribute("fill",w.fillColor||w.color),m.setAttribute("fill-opacity",w.fillOpacity),m.setAttribute("fill-rule",w.fillRule||"evenodd")):m.setAttribute("fill","none"))},_updatePoly:function(c,m){this._setPath(c,Me(c._parts,m))},_updateCircle:function(c){var m=c._point,w=Math.max(Math.round(c._radius),1),P=Math.max(Math.round(c._radiusY),1)||w,z="a"+w+","+P+" 0 1,0 ",ee=c._empty()?"M0 0":"M"+(m.x-w)+","+m.y+z+w*2+",0 "+z+-w*2+",0 ";this._setPath(c,ee)},_setPath:function(c,m){c._path.setAttribute("d",m)},_bringToFront:function(c){Ki(c._path)},_bringToBack:function(c){Di(c._path)}});on.vml&&bl.include(oh);function uc(c){return on.svg||on.vml?new bl(c):null}ii.include({getRenderer:function(c){var m=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return m||(m=this._renderer=this._createRenderer()),this.hasLayer(m)||this.addLayer(m),m},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var m=this._paneRenderers[c];return m===void 0&&(m=this._createRenderer({pane:c}),this._paneRenderers[c]=m),m},_createRenderer:function(c){return this.options.preferCanvas&&ks(c)||uc(c)}});var Lm=oc.extend({initialize:function(c,m){oc.prototype.initialize.call(this,this._boundsToLatLngs(c),m)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=Tt(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function Nm(c,m){return new Lm(c,m)}bl.create=vo,bl.pointsToPath=Me,da.geometryToLayer=ih,da.coordsToLatLng=Fo,da.coordsToLatLngs=yl,da.latLngToCoords=ac,da.latLngsToCoords=lc,da.getFeature=Jc,da.asFeature=cc,ii.mergeOptions({boxZoom:!0});var If=oo.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){ti(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ar(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){gn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),cr(),Hu(),this._startPoint=this._map.mouseEventToContainerPoint(c),ti(document,{contextmenu:la,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=Pt("div","leaflet-zoom-box",this._container),Dt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var m=new $e(this._point,this._startPoint),w=m.getSize();Ii(this._box,m.min),this._box.style.width=w.x+"px",this._box.style.height=w.y+"px"},_finish:function(){this._moved&&(gn(this._box),ai(this._container,"leaflet-crosshair")),nr(),Ql(),ar(document,{contextmenu:la,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var m=new xt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(m).fire("boxzoomend",{boxZoomBounds:m})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ii.addInitHook("addHandler","boxZoom",If),ii.mergeOptions({doubleClickZoom:!0});var ah=oo.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var m=this._map,w=m.getZoom(),P=m.options.zoomDelta,z=c.originalEvent.shiftKey?w-P:w+P;m.options.doubleClickZoom==="center"?m.setZoom(z):m.setZoomAround(c.containerPoint,z)}});ii.addInitHook("addHandler","doubleClickZoom",ah),ii.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Mr=oo.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new za(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}Dt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ai(this._map._container,"leaflet-grab"),ai(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var m=Tt(this._map.options.maxBounds);this._offsetLimit=tt(this._map.latLngToContainerPoint(m.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(m.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var m=this._lastTime=+new Date,w=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(w),this._times.push(m),this._prunePositions(m)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),m=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=m.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,m){return c-(c-m)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),m=this._offsetLimit;c.x<m.min.x&&(c.x=this._viscousLimit(c.x,m.min.x)),c.y<m.min.y&&(c.y=this._viscousLimit(c.y,m.min.y)),c.x>m.max.x&&(c.x=this._viscousLimit(c.x,m.max.x)),c.y>m.max.y&&(c.y=this._viscousLimit(c.y,m.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,m=Math.round(c/2),w=this._initialWorldOffset,P=this._draggable._newPos.x,z=(P-m+w)%c+m-w,ee=(P+m+w)%c-m-w,_e=Math.abs(z+w)<Math.abs(ee+w)?z:ee;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=_e},_onDragEnd:function(c){var m=this._map,w=m.options,P=!w.inertia||c.noInertia||this._times.length<2;if(m.fire("dragend",c),P)m.fire("moveend");else{this._prunePositions(+new Date);var z=this._lastPos.subtract(this._positions[0]),ee=(this._lastTime-this._times[0])/1e3,_e=w.easeLinearity,Ve=z.multiplyBy(_e/ee),Oe=Ve.distanceTo([0,0]),ht=Math.min(w.inertiaMaxSpeed,Oe),Zt=Ve.multiplyBy(ht/Oe),On=ht/(w.inertiaDeceleration*_e),ci=Zt.multiplyBy(-On/2).round();!ci.x&&!ci.y?m.fire("moveend"):(ci=m._limitOffset(ci,m.options.maxBounds),te(function(){m.panBy(ci,{duration:On,easeLinearity:_e,noMoveStart:!0,animate:!0})}))}}});ii.addInitHook("addHandler","dragging",Mr),ii.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ir=oo.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),ti(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ar(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,m=document.documentElement,w=c.scrollTop||m.scrollTop,P=c.scrollLeft||m.scrollLeft;this._map._container.focus(),window.scrollTo(P,w)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var m=this._panKeys={},w=this.keyCodes,P,z;for(P=0,z=w.left.length;P<z;P++)m[w.left[P]]=[-1*c,0];for(P=0,z=w.right.length;P<z;P++)m[w.right[P]]=[c,0];for(P=0,z=w.down.length;P<z;P++)m[w.down[P]]=[0,c];for(P=0,z=w.up.length;P<z;P++)m[w.up[P]]=[0,-1*c]},_setZoomDelta:function(c){var m=this._zoomKeys={},w=this.keyCodes,P,z;for(P=0,z=w.zoomIn.length;P<z;P++)m[w.zoomIn[P]]=c;for(P=0,z=w.zoomOut.length;P<z;P++)m[w.zoomOut[P]]=-c},_addHooks:function(){ti(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ar(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var m=c.keyCode,w=this._map,P;if(m in this._panKeys){if(!w._panAnim||!w._panAnim._inProgress)if(P=this._panKeys[m],c.shiftKey&&(P=me(P).multiplyBy(3)),w.options.maxBounds&&(P=w._limitOffset(me(P),w.options.maxBounds)),w.options.worldCopyJump){var z=w.wrapLatLng(w.unproject(w.project(w.getCenter()).add(P)));w.panTo(z)}else w.panBy(P)}else if(m in this._zoomKeys)w.setZoom(w.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[m]);else if(m===27&&w._popup&&w._popup.options.closeOnEscapeKey)w.closePopup();else return;la(c)}}});ii.addInitHook("addHandler","keyboard",ir),ii.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Om=oo.extend({addHooks:function(){ti(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ar(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var m=Xd(c),w=this._map.options.wheelDebounceTime;this._delta+=m,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var P=Math.max(w-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),P),la(c)},_performZoom:function(){var c=this._map,m=c.getZoom(),w=this._map.options.zoomSnap||0;c._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),z=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,ee=w?Math.ceil(z/w)*w:z,_e=c._limitZoom(m+(this._delta>0?ee:-ee))-m;this._delta=0,this._startTime=null,_e&&(c.options.scrollWheelZoom==="center"?c.setZoom(m+_e):c.setZoomAround(this._lastMousePos,m+_e))}});ii.addInitHook("addHandler","scrollWheelZoom",Om);var Fm=600;ii.mergeOptions({tapHold:on.touchNative&&on.safari&&on.mobile,tapTolerance:15});var lh=oo.extend({addHooks:function(){ti(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ar(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var m=c.touches[0];this._startPos=this._newPos=new de(m.clientX,m.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(ti(document,"touchend",$r),ti(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",m))},this),Fm),ti(document,"touchend touchcancel contextmenu",this._cancel,this),ti(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){ar(document,"touchend",$r),ar(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),ar(document,"touchend touchcancel contextmenu",this._cancel,this),ar(document,"touchmove",this._onMove,this)},_onMove:function(c){var m=c.touches[0];this._newPos=new de(m.clientX,m.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,m){var w=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:m.screenX,screenY:m.screenY,clientX:m.clientX,clientY:m.clientY});w._simulated=!0,m.target.dispatchEvent(w)}});ii.addInitHook("addHandler","tapHold",lh),ii.mergeOptions({touchZoom:on.touch,bounceAtZoomLimits:!0});var Ju=oo.extend({addHooks:function(){Dt(this._map._container,"leaflet-touch-zoom"),ti(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ai(this._map._container,"leaflet-touch-zoom"),ar(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var m=this._map;if(!(!c.touches||c.touches.length!==2||m._animatingZoom||this._zooming)){var w=m.mouseEventToContainerPoint(c.touches[0]),P=m.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=m.getSize()._divideBy(2),this._startLatLng=m.containerPointToLatLng(this._centerPoint),m.options.touchZoom!=="center"&&(this._pinchStartLatLng=m.containerPointToLatLng(w.add(P)._divideBy(2))),this._startDist=w.distanceTo(P),this._startZoom=m.getZoom(),this._moved=!1,this._zooming=!0,m._stop(),ti(document,"touchmove",this._onTouchMove,this),ti(document,"touchend touchcancel",this._onTouchEnd,this),$r(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var m=this._map,w=m.mouseEventToContainerPoint(c.touches[0]),P=m.mouseEventToContainerPoint(c.touches[1]),z=w.distanceTo(P)/this._startDist;if(this._zoom=m.getScaleZoom(z,this._startZoom),!m.options.bounceAtZoomLimits&&(this._zoom<m.getMinZoom()&&z<1||this._zoom>m.getMaxZoom()&&z>1)&&(this._zoom=m._limitZoom(this._zoom)),m.options.touchZoom==="center"){if(this._center=this._startLatLng,z===1)return}else{var ee=w._add(P)._divideBy(2)._subtract(this._centerPoint);if(z===1&&ee.x===0&&ee.y===0)return;this._center=m.unproject(m.project(this._pinchStartLatLng,this._zoom).subtract(ee),this._zoom)}this._moved||(m._moveStart(!0,!1),this._moved=!0),V(this._animRequest);var _e=r(m._move,m,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=te(_e,this,!0),$r(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,V(this._animRequest),ar(document,"touchmove",this._onTouchMove,this),ar(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ii.addInitHook("addHandler","touchZoom",Ju),ii.BoxZoom=If,ii.DoubleClickZoom=ah,ii.Drag=Mr,ii.Keyboard=ir,ii.ScrollWheelZoom=Om,ii.TapHold=lh,ii.TouchZoom=Ju,n.Bounds=$e,n.Browser=on,n.CRS=at,n.Canvas=Bo,n.Circle=sc,n.CircleMarker=ja,n.Class=we,n.Control=Ps,n.DivIcon=Ku,n.DivOverlay=os,n.DomEvent=Wu,n.DomUtil=Xc,n.Draggable=za,n.Evented=ze,n.FeatureGroup=Zs,n.GeoJSON=da,n.GridLayer=Rs,n.Handler=oo,n.Icon=rc,n.ImageOverlay=sh,n.LatLng=ut,n.LatLngBounds=xt,n.Layer=lo,n.LayerGroup=ml,n.LineUtil=Ef,n.Map=ii,n.Marker=ua,n.Mixin=Lo,n.Path=Ks,n.Point=de,n.PolyUtil=xf,n.Polygon=oc,n.Polyline=Wa,n.Popup=Zu,n.PosAnimation=ec,n.Projection=qu,n.Rectangle=Lm,n.Renderer=$a,n.SVG=bl,n.SVGOverlay=Im,n.TileLayer=yo,n.Tooltip=tu,n.Transformation=Sn,n.Util=se,n.VideoOverlay=_l,n.bind=r,n.bounds=tt,n.canvas=ks,n.circle=Tf,n.circleMarker=gl,n.control=Gu,n.divIcon=Ga,n.extend=e,n.featureGroup=I0,n.geoJSON=Df,n.geoJson=Dm,n.gridLayer=Pm,n.icon=Xu,n.imageOverlay=vl,n.latLng=Ie,n.latLngBounds=Tt,n.layerGroup=nh,n.map=Zd,n.marker=P0,n.point=me,n.polygon=Oo,n.polyline=R0,n.popup=ha,n.rectangle=Nm,n.setOptions=S,n.stamp=o,n.svg=uc,n.svgOverlay=Yu,n.tileLayer=Rm,n.tooltip=k0,n.transformation=dn,n.version=t,n.videoOverlay=eu;var fr=window.L;n.noConflict=function(){return window.L=fr,this},window.L=n})});var n4=fx((b_,xR)=>{"use strict";(function(n,t){typeof b_=="object"&&typeof xR=="object"?xR.exports=t(n._Highcharts,n._Highcharts.SeriesRegistry,n._Highcharts.Series,n._Highcharts.Series.types.column,n._Highcharts.Templating,n._Highcharts.Point,n._Highcharts.Color,n._Highcharts.Chart,n._Highcharts.SVGElement,n._Highcharts.StackItem):typeof define=="function"&&define.amd?define("highcharts/highcharts-more",["highcharts/highcharts"],function(e){return t(e,e.SeriesRegistry,e.Series,e.Series,["types"],["column"],e.Templating,e.Point,e.Color,e.Chart,e.SVGElement,e.StackItem)}):typeof b_=="object"?b_["highcharts/highcharts-more"]=t(n._Highcharts,n._Highcharts.SeriesRegistry,n._Highcharts.Series,n._Highcharts.Series.types.column,n._Highcharts.Templating,n._Highcharts.Point,n._Highcharts.Color,n._Highcharts.Chart,n._Highcharts.SVGElement,n._Highcharts.StackItem):n.Highcharts=t(n.Highcharts,n.Highcharts.SeriesRegistry,n.Highcharts.Series,n.Highcharts.Series.types.column,n.Highcharts.Templating,n.Highcharts.Point,n.Highcharts.Color,n.Highcharts.Chart,n.Highcharts.SVGElement,n.Highcharts.StackItem)})(typeof window>"u"?b_:window,(n,t,e,i,r,s,o,a,u,h)=>(()=>{"use strict";var p,v,x,S={28:W=>{W.exports=u},184:W=>{W.exports=h},260:W=>{W.exports=s},448:W=>{W.exports=i},512:W=>{W.exports=t},620:W=>{W.exports=o},820:W=>{W.exports=e},944:W=>{W.exports=n},960:W=>{W.exports=a},984:W=>{W.exports=r}},D={};function O(W){var E=D[W];if(E!==void 0)return E.exports;var k=D[W]={exports:{}};return S[W](k,k.exports,O),k.exports}O.n=W=>{var E=W&&W.__esModule?()=>W.default:()=>W;return O.d(E,{a:E}),E},O.d=(W,E)=>{for(var k in E)O.o(E,k)&&!O.o(W,k)&&Object.defineProperty(W,k,{enumerable:!0,get:E[k]})},O.o=(W,E)=>Object.prototype.hasOwnProperty.call(W,E);var N={};O.d(N,{default:()=>KE});var T=O(944),j=O.n(T),Z=O(512),G=O.n(Z),le=O(820),K=O.n(le);let{deg2rad:oe}=j(),{fireEvent:ue,isNumber:te,pick:V,relativeLength:se}=j();(function(W){W.getCenter=function(){let E=this.options,k=this.chart,B=2*(E.slicedOffset||0),Y=k.plotWidth-2*B,ne=k.plotHeight-2*B,Q=E.center,ce=Math.min(Y,ne),ve=E.thickness,Ce,Ee=E.size,be=E.innerSize||0,We,He;typeof Ee=="string"&&(Ee=parseFloat(Ee)),typeof be=="string"&&(be=parseFloat(be));let lt=[V(Q?.[0],"50%"),V(Q?.[1],"50%"),V(Ee&&Ee<0?void 0:E.size,"100%"),V(be&&be<0?void 0:E.innerSize||0,"0%")];for(!k.angular||this instanceof K()||(lt[3]=0),We=0;We<4;++We)He=lt[We],Ce=We<2||We===2&&/%$/.test(He),lt[We]=se(He,[Y,ne,ce,lt[2]][We])+(Ce?B:0);return lt[3]>lt[2]&&(lt[3]=lt[2]),te(ve)&&2*ve<lt[2]&&ve>0&&(lt[3]=lt[2]-2*ve),ue(this,"afterGetCenter",{positions:lt}),lt},W.getStartAndEndRadians=function(E,k){let B=te(E)?E:0,Y=te(k)&&k>B&&k-B<360?k:B+360;return{start:oe*(B+-90),end:oe*(Y+-90)}}})(p||(p={}));let we=p,{addEvent:he,correctFloat:je,defined:ze,pick:de}=j();function Re(W){let E,k=this;return W&&k.pane.forEach(B=>{me(W.chartX-k.plotLeft,W.chartY-k.plotTop,B.center)&&(E=B)}),E}function me(W,E,k,B,Y){let ne=!0,Q=k[0],ce=k[1],ve=Math.sqrt(Math.pow(W-Q,2)+Math.pow(E-ce,2));if(ze(B)&&ze(Y)){let Ce=Math.atan2(je(E-ce,8),je(W-Q,8));Y!==B&&(ne=B>Y?Ce>=B&&Ce<=Math.PI||Ce<=Y&&Ce>=-Math.PI:Ce>=B&&Ce<=je(Y,8))}return ve<=Math.ceil(k[2]/2)&&ne}function $e(W){this.polar&&(W.options.inverted&&([W.x,W.y]=[W.y,W.x]),W.isInsidePlot=this.pane.some(E=>me(W.x,W.y,E.center,E.axis&&E.axis.normalizedStartAngleRad,E.axis&&E.axis.normalizedEndAngleRad)))}function tt(W){let E=this.chart;W.hoverPoint&&W.hoverPoint.plotX&&W.hoverPoint.plotY&&E.hoverPane&&!me(W.hoverPoint.plotX,W.hoverPoint.plotY,E.hoverPane.center)&&(W.hoverPoint=void 0)}function xt(W){let E=this.chart;E.polar?(E.hoverPane=E.getHoverPane(W),W.filter=function(k){return k.visible&&!(!W.shared&&k.directTouch)&&de(k.options.enableMouseTracking,!0)&&(!E.hoverPane||k.xAxis.pane===E.hoverPane)}):E.hoverPane=void 0}let{defaultOptions:Tt}=j(),ut={shape:"circle",borderRadius:0,borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"},Ie={background:ut,center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0};Tt.pane=Ie;let at={pane:Ie,background:ut},{extend:Rt,merge:rt,splat:zt}=j(),Sn=(()=>{class W{constructor(k,B){this.coll="pane",this.init(k,B)}init(k,B){this.chart=B,this.background=[],B.pane.push(this),this.setOptions(k)}setOptions(k){this.options=k=rt(at.pane,{background:this.chart.angular?{}:void 0},k)}render(){let k=this.options,B=this.chart.renderer;this.group||(this.group=B.g("pane-group").attr({zIndex:k.zIndex||0}).add()),this.updateCenter();let Y=this.options.background;if(Y){let ne=Math.max((Y=zt(Y)).length,this.background.length||0);for(let Q=0;Q<ne;Q++)Y[Q]&&this.axis?this.renderBackground(rt(at.background,Y[Q]),Q):this.background[Q]&&(this.background[Q]=this.background[Q].destroy(),this.background.splice(Q,1))}}renderBackground(k,B){let Y={class:"highcharts-pane "+(k.className||"")},ne="animate";this.chart.styledMode||Rt(Y,{fill:k.backgroundColor,stroke:k.borderColor,"stroke-width":k.borderWidth}),this.background[B]||(this.background[B]=this.chart.renderer.path().add(this.group),ne="attr"),this.background[B][ne]({d:this.axis.getPlotBandPath(k.from,k.to,k)}).attr(Y)}updateCenter(k){this.center=(k||this.axis||{}).center=we.getCenter.call(this)}update(k,B){rt(!0,this.options,k),this.setOptions(this.options),this.render(),this.chart.axes.forEach(function(Y){Y.pane===this&&(Y.pane=null,Y.update({},B))},this)}}return W.compose=function(E,k){let B=E.prototype;B.getHoverPane||(B.collectionsWithUpdate.push("pane"),B.getHoverPane=Re,he(E,"afterIsInsidePlot",$e),he(k,"afterGetHoverData",tt),he(k,"beforeGetHoverData",xt))},W})(),{area:{prototype:{pointClass:dn,pointClass:{prototype:Mt}}}}=G().seriesTypes,{defined:Zi,isNumber:Bn}=j(),Me=class extends dn{setState(){let W=this.state,E=this.series,k=E.chart.polar;Zi(this.plotHigh)||(this.plotHigh=E.yAxis.toPixels(this.high,!0)),Zi(this.plotLow)||(this.plotLow=this.plotY=E.yAxis.toPixels(this.low,!0)),E.lowerStateMarkerGraphic=E.stateMarkerGraphic,E.stateMarkerGraphic=E.upperStateMarkerGraphic,this.graphic=this.graphics&&this.graphics[1],this.plotY=this.plotHigh,k&&Bn(this.plotHighX)&&(this.plotX=this.plotHighX),Mt.setState.apply(this,arguments),this.state=W,this.plotY=this.plotLow,this.graphic=this.graphics&&this.graphics[0],k&&Bn(this.plotLowX)&&(this.plotX=this.plotLowX),E.upperStateMarkerGraphic=E.stateMarkerGraphic,E.stateMarkerGraphic=E.lowerStateMarkerGraphic,E.lowerStateMarkerGraphic=void 0;let B=E.modifyMarkerSettings();Mt.setState.apply(this,arguments),E.restoreMarkerSettings(B)}haloPath(){let W=this.series.chart.polar,E=[];return this.plotY=this.plotLow,W&&Bn(this.plotLowX)&&(this.plotX=this.plotLowX),this.isInside&&(E=Mt.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,W&&Bn(this.plotHighX)&&(this.plotX=this.plotHighX),this.isTopInside&&(E=E.concat(Mt.haloPath.apply(this,arguments))),E}isValid(){return Bn(this.low)&&Bn(this.high)}},{noop:hr}=j(),{area:Qn,area:{prototype:fi},column:{prototype:rn}}=G().seriesTypes,{addEvent:ei,defined:hn,extend:Rn,isArray:$i,isNumber:fe,pick:J,merge:Ge}=j();class nt extends Qn{toYData(E){return[E.low,E.high]}highToXY(E){let k=this.chart,B=this.xAxis.postTranslate(E.rectPlotX||0,this.yAxis.len-(E.plotHigh||0));E.plotHighX=B.x-k.plotLeft,E.plotHigh=B.y-k.plotTop,E.plotLowX=E.plotX}getGraphPath(E){let k=[],B=[],Y=fi.getGraphPath,ne=this.options,Q=this.chart.polar,ce=Q&&ne.connectEnds!==!1,ve=ne.connectNulls,Ce,Ee,be,We=ne.step;for(Ce=(E=E||this.points).length;Ce--;){Ee=E[Ce];let Et=Q?{plotX:Ee.rectPlotX,plotY:Ee.yBottom,doCurve:!1}:{plotX:Ee.plotX,plotY:Ee.plotY,doCurve:!1};Ee.isNull||ce||ve||E[Ce+1]&&!E[Ce+1].isNull||B.push(Et),be={polarPlotY:Ee.polarPlotY,rectPlotX:Ee.rectPlotX,yBottom:Ee.yBottom,plotX:J(Ee.plotHighX,Ee.plotX),plotY:Ee.plotHigh,isNull:Ee.isNull},B.push(be),k.push(be),Ee.isNull||ce||ve||E[Ce-1]&&!E[Ce-1].isNull||B.push(Et)}let He=Y.call(this,E);We&&(We===!0&&(We="left"),ne.step={left:"right",center:"center",right:"left"}[We]);let lt=Y.call(this,k),St=Y.call(this,B);ne.step=We;let et=[].concat(He,lt);return!this.chart.polar&&St[0]&&St[0][0]==="M"&&(St[0]=["L",St[0][1],St[0][2]]),this.graphPath=et,this.areaPath=He.concat(St),et.isArea=!0,et.xMap=He.xMap,this.areaPath.xMap=He.xMap,et}drawDataLabels(){let E,k,B,Y,ne,Q=this.points,ce=Q.length,ve=[],Ce=this.options.dataLabels,Ee=this.chart.inverted;if(Ce){if($i(Ce)?(Y=Ce[0]||{enabled:!1},ne=Ce[1]||{enabled:!1}):((Y=Rn({},Ce)).x=Ce.xHigh,Y.y=Ce.yHigh,(ne=Rn({},Ce)).x=Ce.xLow,ne.y=Ce.yLow),Y.enabled||this.hasDataLabels?.()){for(E=ce;E--;)if(k=Q[E]){let{plotHigh:be=0,plotLow:We=0}=k;B=Y.inside?be<We:be>We,k.y=k.high,k._plotY=k.plotY,k.plotY=be,ve[E]=k.dataLabel,k.dataLabel=k.dataLabelUpper,k.below=B,Ee?Y.align||(Y.align=B?"right":"left"):Y.verticalAlign||(Y.verticalAlign=B?"top":"bottom")}for(this.options.dataLabels=Y,fi.drawDataLabels&&fi.drawDataLabels.apply(this,arguments),E=ce;E--;)(k=Q[E])&&(k.dataLabelUpper=k.dataLabel,k.dataLabel=ve[E],delete k.dataLabels,k.y=k.low,k.plotY=k._plotY)}if(ne.enabled||this.hasDataLabels?.()){for(E=ce;E--;)if(k=Q[E]){let{plotHigh:be=0,plotLow:We=0}=k;B=ne.inside?be<We:be>We,k.below=!B,Ee?ne.align||(ne.align=B?"left":"right"):ne.verticalAlign||(ne.verticalAlign=B?"bottom":"top")}this.options.dataLabels=ne,fi.drawDataLabels&&fi.drawDataLabels.apply(this,arguments)}if(Y.enabled)for(E=ce;E--;)(k=Q[E])&&(k.dataLabels=[k.dataLabelUpper,k.dataLabel].filter(function(be){return!!be}));this.options.dataLabels=Ce}}alignDataLabel(){rn.alignDataLabel.apply(this,arguments)}modifyMarkerSettings(){let E={marker:this.options.marker,symbol:this.symbol};if(this.options.lowMarker){let{options:{marker:k,lowMarker:B}}=this;this.options.marker=Ge(k,B),B.symbol&&(this.symbol=B.symbol)}return E}restoreMarkerSettings(E){this.options.marker=E.marker,this.symbol=E.symbol}drawPoints(){let E,k,B=this.points.length,Y=this.modifyMarkerSettings();for(fi.drawPoints.apply(this,arguments),this.restoreMarkerSettings(Y),E=0;E<B;)(k=this.points[E]).graphics=k.graphics||[],k.origProps={plotY:k.plotY,plotX:k.plotX,isInside:k.isInside,negative:k.negative,zone:k.zone,y:k.y},(k.graphic||k.graphics[0])&&(k.graphics[0]=k.graphic),k.graphic=k.graphics[1],k.plotY=k.plotHigh,hn(k.plotHighX)&&(k.plotX=k.plotHighX),k.y=J(k.high,k.origProps.y),k.negative=k.y<(this.options.threshold||0),this.zones.length&&(k.zone=k.getZone()),this.chart.polar||(k.isInside=k.isTopInside=k.plotY!==void 0&&k.plotY>=0&&k.plotY<=this.yAxis.len&&k.plotX>=0&&k.plotX<=this.xAxis.len),E++;for(fi.drawPoints.apply(this,arguments),E=0;E<B;)(k=this.points[E]).graphics=k.graphics||[],(k.graphic||k.graphics[1])&&(k.graphics[1]=k.graphic),k.graphic=k.graphics[0],k.origProps&&(Rn(k,k.origProps),delete k.origProps),E++}hasMarkerChanged(E,k){let B=E.lowMarker,Y=k.lowMarker||{};return B&&(B.enabled===!1||Y.symbol!==B.symbol||Y.height!==B.height||Y.width!==B.width)||super.hasMarkerChanged(E,k)}}nt.defaultOptions=Ge(Qn.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">\u25CF</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),ei(nt,"afterTranslate",function(){this.pointArrayMap.join(",")==="low,high"&&this.points.forEach(W=>{let E=W.high,k=W.plotY;W.isNull?W.plotY=void 0:(W.plotLow=k,W.plotHigh=fe(E)?this.yAxis.translate(this.dataModify?this.dataModify.modifyValue(E):E,!1,!0,void 0,!0):void 0,this.dataModify&&(W.yBottom=W.plotHigh))})},{order:0}),ei(nt,"afterTranslate",function(){this.points.forEach(W=>{if(this.chart.polar)this.highToXY(W),W.plotLow=W.plotY,W.tooltipPos=[((W.plotHighX||0)+(W.plotLowX||0))/2,((W.plotHigh||0)+(W.plotLow||0))/2];else{let E=W.pos(!1,W.plotLow),k=W.pos(!1,W.plotHigh);E&&k&&(E[0]=(E[0]+k[0])/2,E[1]=(E[1]+k[1])/2),W.tooltipPos=E}})},{order:3}),Rn(nt.prototype,{deferTranslatePolar:!0,pointArrayMap:["low","high"],pointClass:Me,pointValKey:"low",setStackedPoints:hr}),G().registerSeriesType("arearange",nt);let dt=nt,{spline:{prototype:Qe}}=G().seriesTypes,{merge:yn,extend:Ht}=j();class kt extends dt{}kt.defaultOptions=yn(dt.defaultOptions),Ht(kt.prototype,{getPointSpline:Qe.getPointSpline}),G().registerSeriesType("areasplinerange",kt);var fn=O(448),vt=O.n(fn);let{noop:Jt}=j(),{crisp:pn,extend:vn,merge:Ft,pick:_n,relativeLength:Pe}=j();class Lt extends vt(){pointAttribs(){return{}}getWhiskerPair(E,k,B,Y,ne){let Q=ne.whiskers.strokeWidth(),ce=(ve,Ce)=>{let Ee=Pe(ve,2*E)/2,be=pn(Ce,Q);return[["M",pn(k-Ee),be],["L",pn(k+Ee),be]]};return[...ce(B,ne.highPlot),...ce(Y,ne.lowPlot)]}translate(){let E=this.yAxis,k=this.pointArrayMap;super.translate.apply(this),this.points.forEach(function(B){k.forEach(function(Y){B[Y]!==null&&(B[Y+"Plot"]=E.translate(B[Y],0,1,0,1))}),B.plotHigh=B.highPlot})}drawPoints(){let E,k,B,Y,ne,Q,ce,ve,Ce,Ee,be,We=this.points,He=this.options,lt=this.chart,St=lt.renderer,et=this.doQuartiles!==!1,Et=this.options.whiskerLength;for(let Ze of We){let Gn=(ve=Ze.graphic)?"animate":"attr",tn=Ze.shapeArgs,bi={},ni={},bn={},xi={},pr=Ze.color||this.color,ft=Ze.options.whiskerLength||Et;if(Ze.plotY!==void 0){let Qt;Ce=tn.width,be=(Ee=tn.x)+Ce,E=et?Ze.q1Plot:Ze.lowPlot,k=et?Ze.q3Plot:Ze.lowPlot,B=Ze.highPlot,Y=Ze.lowPlot,ve||(Ze.graphic=ve=St.g("point").add(this.group),Ze.stem=St.path().addClass("highcharts-boxplot-stem").add(ve),Et&&(Ze.whiskers=St.path().addClass("highcharts-boxplot-whisker").add(ve)),et&&(Ze.box=St.path(ce).addClass("highcharts-boxplot-box").add(ve)),Ze.medianShape=St.path(Q).addClass("highcharts-boxplot-median").add(ve)),lt.styledMode||(ni.stroke=Ze.stemColor||He.stemColor||pr,ni["stroke-width"]=_n(Ze.stemWidth,He.stemWidth,He.lineWidth),ni.dashstyle=Ze.stemDashStyle||He.stemDashStyle||He.dashStyle,Ze.stem.attr(ni),ft&&(bn.stroke=Ze.whiskerColor||He.whiskerColor||pr,bn["stroke-width"]=_n(Ze.whiskerWidth,He.whiskerWidth,He.lineWidth),bn.dashstyle=Ze.whiskerDashStyle||He.whiskerDashStyle||He.dashStyle,Ze.whiskers.attr(bn)),et&&(bi.fill=Ze.fillColor||He.fillColor||pr,bi.stroke=He.lineColor||pr,bi["stroke-width"]=He.lineWidth||0,bi.dashstyle=Ze.boxDashStyle||He.boxDashStyle||He.dashStyle,Ze.box.attr(bi)),xi.stroke=Ze.medianColor||He.medianColor||pr,xi["stroke-width"]=_n(Ze.medianWidth,He.medianWidth,He.lineWidth),xi.dashstyle=Ze.medianDashStyle||He.medianDashStyle||He.dashStyle,Ze.medianShape.attr(xi));let Ot=pn((Ze.plotX||0)+(this.pointXOffset||0)+(this.barW||0)/2,Ze.stem.strokeWidth());if(Qt=[["M",Ot,k],["L",Ot,B],["M",Ot,E],["L",Ot,Y]],Ze.stem[Gn]({d:Qt}),et){let ln=Ze.box.strokeWidth();E=pn(E,ln),k=pn(k,ln),Qt=[["M",Ee=pn(Ee,ln),k],["L",Ee,E],["L",be=pn(be,ln),E],["L",be,k],["L",Ee,k],["Z"]],Ze.box[Gn]({d:Qt})}if(ft){let ln=Ce/2,Jn=this.getWhiskerPair(ln,Ot,Ze.upperWhiskerLength??He.upperWhiskerLength??ft,Ze.lowerWhiskerLength??He.lowerWhiskerLength??ft,Ze);Ze.whiskers[Gn]({d:Jn})}Qt=[["M",Ee,ne=pn(Ze.medianPlot,Ze.medianShape.strokeWidth())],["L",be,ne]],Ze.medianShape[Gn]({d:Qt})}}}toYData(E){return[E.low,E.q1,E.median,E.q3,E.high]}}Lt.defaultOptions=Ft(vt().defaultOptions,{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> <b>{series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}),vn(Lt.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:Jt,setStackedPoints:Jt}),G().registerSeriesType("boxplot",Lt);let Ct=Lt,nn={borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0};var pt=O(984),ct=O.n(pt);let{noop:sn}=j(),{arrayMax:Vn,arrayMin:Dn,isNumber:Oi,merge:rs,pick:ss,stableSort:jd}=j(),Wr=class{constructor(W,E){this.setState=sn,this.init(W,E)}init(W,E){this.options=W,this.visible=!0,this.chart=E.chart,this.legend=E}addToLegend(W){W.splice(this.options.legendIndex,0,this)}drawLegendSymbol(W){let E,k=ss(W.options.itemDistance,20),B=this.legendItem||{},Y=this.options,ne=Y.ranges,Q=Y.connectorDistance;if(!ne||!ne.length||!Oi(ne[0].value)){W.options.bubbleLegend.autoRanges=!0;return}jd(ne,function(Ee,be){return be.value-Ee.value}),this.ranges=ne,this.setOptions(),this.render();let ce=this.getMaxLabelSize(),ve=this.ranges[0].radius,Ce=2*ve;E=(E=Q-ve+ce.width)>0?E:0,this.maxLabel=ce,this.movementX=Y.labels.align==="left"?E:0,B.labelWidth=Ce+E+k,B.labelHeight=Ce+ce.height/2}setOptions(){let W=this.ranges,E=this.options,k=this.chart.series[E.seriesIndex],B=this.legend.baseline,Y={zIndex:E.zIndex,"stroke-width":E.borderWidth},ne={zIndex:E.zIndex,"stroke-width":E.connectorWidth},Q={align:this.legend.options.rtl||E.labels.align==="left"?"right":"left",zIndex:E.zIndex},ce=k.options.marker.fillOpacity,ve=this.chart.styledMode;W.forEach(function(Ce,Ee){ve||(Y.stroke=ss(Ce.borderColor,E.borderColor,k.color),Y.fill=Ce.color||E.color,Y.fill||(Y.fill=k.color,Y["fill-opacity"]=ce??1),ne.stroke=ss(Ce.connectorColor,E.connectorColor,k.color)),W[Ee].radius=this.getRangeRadius(Ce.value),W[Ee]=rs(W[Ee],{center:W[0].radius-W[Ee].radius+B}),ve||rs(!0,W[Ee],{bubbleAttribs:rs(Y),connectorAttribs:rs(ne),labelAttribs:Q})},this)}getRangeRadius(W){let E=this.options,k=this.options.seriesIndex,B=this.chart.series[k],Y=E.ranges[0].value,ne=E.ranges[E.ranges.length-1].value,Q=E.minSize,ce=E.maxSize;return B.getRadius.call(this,ne,Y,Q,ce,W)}render(){let W=this.legendItem||{},E=this.chart.renderer,k=this.options.zThreshold;for(let B of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),W.symbol=E.g("bubble-legend"),W.label=E.g("bubble-legend-item").css(this.legend.itemStyle||{}),W.symbol.translateX=0,W.symbol.translateY=0,W.symbol.add(W.label),W.label.add(W.group),this.ranges))B.value>=k&&this.renderRange(B);this.hideOverlappingLabels()}renderRange(W){let E=this.ranges[0],k=this.legend,B=this.options,Y=B.labels,ne=this.chart,Q=ne.series[B.seriesIndex],ce=ne.renderer,ve=this.symbols,Ce=ve.labels,Ee=W.center,be=Math.abs(W.radius),We=B.connectorDistance||0,He=Y.align,lt=k.options.rtl,St=B.borderWidth,et=B.connectorWidth,Et=E.radius||0,Ze=Ee-be-St/2+et/2,Gn=(Ze%1?1:.5)-(et%2?0:.5),tn=ce.styledMode,bi=lt||He==="left"?-We:We;He==="center"&&(bi=0,B.connectorDistance=0,W.labelAttribs.align="center"),ve.bubbleItems.push(ce.circle(Et,Ee+Gn,be).attr(tn?{}:W.bubbleAttribs).addClass((tn?"highcharts-color-"+Q.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(B.className||"")).add(this.legendItem.symbol)),ve.connectors.push(ce.path(ce.crispLine([["M",Et,Ze],["L",Et+bi,Ze]],B.connectorWidth)).attr(tn?{}:W.connectorAttribs).addClass((tn?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(B.connectorClassName||"")).add(this.legendItem.symbol));let ni=ce.text(this.formatLabel(W)).attr(tn?{}:W.labelAttribs).css(tn?{}:Y.style).addClass("highcharts-bubble-legend-labels "+(B.labels.className||"")).add(this.legendItem.symbol),bn={x:Et+bi+B.labels.x,y:Ze+B.labels.y+.4*ni.getBBox().height};ni.attr(bn),Ce.push(ni),ni.placed=!0,ni.alignAttr=bn}getMaxLabelSize(){let W,E;return this.symbols.labels.forEach(function(k){E=k.getBBox(!0),W=W?E.width>W.width?E:W:E}),W||{}}formatLabel(W){let E=this.options,k=E.labels.formatter,B=E.labels.format,{numberFormatter:Y}=this.chart;return B?ct().format(B,W,this.chart):k?k.call(W):Y(W.value,1)}hideOverlappingLabels(){let W=this.chart,E=this.options.labels.allowOverlap,k=this.symbols;!E&&k&&(W.hideOverlappingLabels(k.labels),k.labels.forEach(function(B,Y){B.newOpacity?B.newOpacity!==B.oldOpacity&&k.connectors[Y].show():k.connectors[Y].hide()}))}getRanges(){let W=this.legend.bubbleLegend,E=W.chart.series,k=W.options.ranges,B,Y,ne=Number.MAX_VALUE,Q=-Number.MAX_VALUE;return E.forEach(function(ce){ce.isBubble&&!ce.ignoreSeries&&(Y=ce.getColumn("z").filter(Oi)).length&&(ne=ss(ce.options.zMin,Math.min(ne,Math.max(Dn(Y),ce.options.displayNegative===!1?ce.options.zThreshold:-Number.MAX_VALUE))),Q=ss(ce.options.zMax,Math.max(Q,Vn(Y))))}),B=ne===Q?[{value:Q}]:[{value:ne},{value:(ne+Q)/2},{value:Q,autoRanges:!0}],k.length&&k[0].radius&&B.reverse(),B.forEach(function(ce,ve){k&&k[ve]&&(B[ve]=rs(k[ve],ce))}),B}predictBubbleSizes(){let W=this.chart,E=W.legend.options,k=E.floating,B=E.layout==="horizontal",Y=B?W.legend.lastLineHeight:0,ne=W.plotSizeX,Q=W.plotSizeY,ce=W.series[this.options.seriesIndex],ve=ce.getPxExtremes(),Ce=Math.ceil(ve.minPxSize),Ee=Math.ceil(ve.maxPxSize),be=Math.min(Q,ne),We,He=ce.options.maxSize;return k||!/%$/.test(He)?We=Ee:(We=(be+Y)*(He=parseFloat(He))/100/(He/100+1),(B&&Q-We>=ne||!B&&ne-We>=Q)&&(We=Ee)),[Ce,Math.ceil(We)]}updateRanges(W,E){let k=this.legend.options.bubbleLegend;k.minSize=W,k.maxSize=E,k.ranges=this.getRanges()}correctSizes(){let W=this.legend,E=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(E.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,E.maxPxSize),W.render())}},{setOptions:on}=j(),{composed:Wc}=j(),{addEvent:Gc,objectEach:Uu,pushUnique:Fa,wrap:Yl}=j();function Zl(W,E,k){let B,Y,ne,Q=this.legend,ce=Po(this)>=0;Q&&Q.options.enabled&&Q.bubbleLegend&&Q.options.bubbleLegend.autoRanges&&ce?(B=Q.bubbleLegend.options,Y=Q.bubbleLegend.predictBubbleSizes(),Q.bubbleLegend.updateRanges(Y[0],Y[1]),B.placed||(Q.group.placed=!1,Q.allItems.forEach(ve=>{(ne=ve.legendItem||{}).group&&(ne.group.translateY=void 0)})),Q.render(),B.placed||(this.getMargins(),this.axes.forEach(ve=>{ve.setScale(),ve.updateNames(),Uu(ve.ticks,function(Ce){Ce.isNew=!0,Ce.isNewLabel=!0})}),this.getMargins()),B.placed=!0,W.call(this,E,k),Q.bubbleLegend.correctSizes(),zu(Q,ul(Q))):(W.call(this,E,k),Q&&Q.options.enabled&&Q.bubbleLegend&&(Q.render(),zu(Q,ul(Q))))}function Po(W){let E=W.series,k=0;for(;k<E.length;){if(E[k]&&E[k].isBubble&&E[k].visible&&E[k].dataTable.rowCount)return k;k++}return-1}function ul(W){let E=W.allItems,k=[],B=E.length,Y,ne,Q,ce=0,ve=0;for(ce=0;ce<B;ce++)if(ne=E[ce].legendItem||{},Q=(E[ce+1]||{}).legendItem||{},ne.labelHeight&&(E[ce].itemHeight=ne.labelHeight),E[ce]===E[B-1]||ne.y!==Q.y){for(k.push({height:0}),Y=k[k.length-1];ve<=ce;ve++)E[ve].itemHeight>Y.height&&(Y.height=E[ve].itemHeight);Y.step=ce}return k}function Wd(W){let E=this.bubbleLegend,k=this.options,B=k.bubbleLegend,Y=Po(this.chart);E&&E.ranges&&E.ranges.length&&(B.ranges.length&&(B.autoRanges=!!B.ranges[0].autoRanges),this.destroyItem(E)),Y>=0&&k.enabled&&B.enabled&&(B.seriesIndex=Y,this.bubbleLegend=new Wr(B,this),this.bubbleLegend.addToLegend(W.allItems))}function Gr(W){let E;if(W.defaultPrevented)return!1;let k=W.legendItem,B=this.chart,Y=k.visible;this&&this.bubbleLegend&&(k.visible=!Y,k.ignoreSeries=Y,E=Po(B)>=0,this.bubbleLegend.visible!==E&&(this.update({bubbleLegend:{enabled:E}}),this.bubbleLegend.visible=E),k.visible=Y)}function zu(W,E){let k=W.allItems,B=W.options.rtl,Y,ne,Q,ce,ve=0;k.forEach((Ce,Ee)=>{(ce=Ce.legendItem||{}).group&&(Y=ce.group.translateX||0,ne=ce.y||0,((Q=Ce.movementX)||B&&Ce.ranges)&&(Q=B?Y-Ce.options.maxSize/2:Y+Q,ce.group.attr({translateX:Q})),Ee>E[ve].step&&ve++,ce.group.attr({translateY:Math.round(ne+E[ve].height/2)}),ce.y=ne+E[ve].height/2)})}let gf={compose:function(W,E){Fa(Wc,"Series.BubbleLegend")&&(on({legend:{bubbleLegend:nn}}),Yl(W.prototype,"drawChartBox",Zl),Gc(E,"afterGetAllItems",Wd),Gc(E,"itemClick",Gr))}};var Gd=O(260),Ba=O.n(Gd);let{seriesTypes:{scatter:{prototype:{pointClass:re}}}}=G(),{extend:Fe}=j();class qe extends re{haloPath(E){let k=(E&&this.marker&&this.marker.radius||0)+E;if(this.series.chart.inverted){let B=this.pos()||[0,0],{xAxis:Y,yAxis:ne,chart:Q}=this.series,ce=2*k;return Q.renderer.symbols.circle((Y?.len||0)-B[1]-k,(ne?.len||0)-B[0]-k,ce,ce)}return Ba().prototype.haloPath.call(this,k)}}Fe(qe.prototype,{ttBelow:!1});let{composed:Xe,noop:Be}=j(),{series:At,seriesTypes:{column:{prototype:Ut},scatter:$t}}=G(),{addEvent:qt,arrayMax:Wt,arrayMin:Tn,clamp:Pt,extend:gn,isNumber:si,merge:Ki,pick:Di,pushUnique:_i}=j();function Dt(){let W=this.len,{coll:E,isXAxis:k,min:B}=this,Y=(this.max||0)-(B||0),ne=0,Q=W,ce=W/Y,ve;(E==="xAxis"||E==="yAxis")&&(this.series.forEach(Ce=>{if(Ce.bubblePadding&&Ce.reserveSpace()){this.allowZoomOutside=!0,ve=!0;let Ee=Ce.getColumn(k?"x":"y");if(k&&((Ce.onPoint||Ce).getRadii(0,0,Ce),Ce.onPoint&&(Ce.radii=Ce.onPoint.radii)),Y>0){let be=Ee.length;for(;be--;)if(si(Ee[be])&&this.dataMin<=Ee[be]&&Ee[be]<=this.max){let We=Ce.radii&&Ce.radii[be]||0;ne=Math.min((Ee[be]-B)*ce-We,ne),Q=Math.max((Ee[be]-B)*ce+We,Q)}}}}),ve&&Y>0&&!this.logarithmic&&(Q-=W,ce*=(W+Math.max(0,ne)-Math.min(Q,W))/W,[["min","userMin",ne],["max","userMax",Q]].forEach(Ce=>{Di(this.options[Ce[0]],this[Ce[1]])===void 0&&(this[Ce[0]]+=Ce[2]/ce)})))}function ai(){let{ticks:W,tickPositions:E,dataMin:k=0,dataMax:B=0,categories:Y}=this,ne=this.options.type;if((Y?.length||ne==="category")&&this.series.find(Q=>Q.bubblePadding)){let Q=E.length;for(;Q--;){let ce=W[E[Q]],ve=ce.pos||0;(ve>B||ve<k)&&ce.label?.hide()}}}class li extends $t{static compose(E,k,B){gf.compose(k,B),_i(Xe,"Series.Bubble")&&(qt(E,"foundExtremes",Dt),qt(E,"afterRender",ai))}animate(E){!E&&this.points.length<this.options.animationLimit&&this.points.forEach(function(k){let{graphic:B,plotX:Y=0,plotY:ne=0}=k;B&&B.width&&(this.hasRendered||B.attr({x:Y,y:ne,width:1,height:1}),B.animate(this.markerAttribs(k),this.options.animation))},this)}getRadii(){let E=this.getColumn("z"),k=this.getColumn("y"),B=[],Y,ne,Q,ce=this.chart.bubbleZExtremes,{minPxSize:ve,maxPxSize:Ce}=this.getPxExtremes();if(!ce){let Ee,be=Number.MAX_VALUE,We=-Number.MAX_VALUE;this.chart.series.forEach(He=>{if(He.bubblePadding&&He.reserveSpace()){let lt=(He.onPoint||He).getZExtremes();lt&&(be=Math.min(Di(be,lt.zMin),lt.zMin),We=Math.max(Di(We,lt.zMax),lt.zMax),Ee=!0)}}),Ee?(ce={zMin:be,zMax:We},this.chart.bubbleZExtremes=ce):ce={zMin:0,zMax:0}}for(ne=0,Y=E.length;ne<Y;ne++)Q=E[ne],B.push(this.getRadius(ce.zMin,ce.zMax,ve,Ce,Q,k&&k[ne]));this.radii=B}getRadius(E,k,B,Y,ne,Q){let ce=this.options,ve=ce.sizeBy!=="width",Ce=ce.zThreshold,Ee=k-E,be=.5;if(Q===null||ne===null)return null;if(si(ne)){if(ce.sizeByAbsoluteValue&&(ne=Math.abs(ne-Ce),k=Ee=Math.max(k-Ce,Math.abs(E-Ce)),E=0),ne<E)return B/2-1;Ee>0&&(be=(ne-E)/Ee)}return ve&&be>=0&&(be=Math.sqrt(be)),Math.ceil(B+be*(Y-B))/2}hasData(){return!!this.dataTable.rowCount}markerAttribs(E,k){let B=super.markerAttribs(E,k),{height:Y=0,width:ne=0}=B;return this.chart.inverted?gn(B,{x:(E.plotX||0)-ne/2,y:(E.plotY||0)-Y/2}):B}pointAttribs(E,k){let B=this.options.marker,Y=B?.fillOpacity,ne=At.prototype.pointAttribs.call(this,E,k);return ne["fill-opacity"]=Y??1,ne}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:E,options:k,radii:B}=this,{minPxSize:Y}=this.getPxExtremes(),ne=E.length;for(;ne--;){let Q=E[ne],ce=B?B[ne]:0;this.zoneAxis==="z"&&(Q.negative=(Q.z||0)<(k.zThreshold||0)),si(ce)&&ce>=Y/2?(Q.marker=gn(Q.marker,{radius:ce,width:2*ce,height:2*ce}),Q.dlBox={x:Q.plotX-ce,y:Q.plotY-ce,width:2*ce,height:2*ce}):(Q.shapeArgs=Q.plotY=Q.dlBox=void 0,Q.isInside=!1)}}getPxExtremes(){let E=Math.min(this.chart.plotWidth,this.chart.plotHeight),k=ne=>{let Q;return typeof ne=="string"&&(Q=/%$/.test(ne),ne=parseInt(ne,10)),Q?E*ne/100:ne},B=k(Di(this.options.minSize,8)),Y=Math.max(k(Di(this.options.maxSize,"20%")),B);return{minPxSize:B,maxPxSize:Y}}getZExtremes(){let E=this.options,k=this.getColumn("z").filter(si);if(k.length){let B=Di(E.zMin,Pt(Tn(k),E.displayNegative===!1?E.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),Y=Di(E.zMax,Wt(k));if(si(B)&&si(Y))return{zMin:B,zMax:Y}}}searchKDTree(E,k,B,Y=Be,ne=Be){return Y=(Q,ce,ve)=>{let Ce=Q[ve]||0,Ee=ce[ve]||0,be,We=!1;return Ce===Ee?be=Q.index>ce.index?Q:ce:Ce<0&&Ee<0?(be=Ce-(Q.marker?.radius||0)>=Ee-(ce.marker?.radius||0)?Q:ce,We=!0):be=Ce<Ee?Q:ce,[be,We]},ne=(Q,ce,ve)=>!ve&&Q>ce||Q<ce,super.searchKDTree(E,k,B,Y,ne)}}li.defaultOptions=Ki($t.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:W}=this.series.chart,{z:E}=this.point;return si(E)?W(E,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),gn(li.prototype,{alignDataLabel:Ut.alignDataLabel,applyZones:Be,bubblePadding:!0,isBubble:!0,keysAffectYAxis:["y"],pointArrayMap:["y","z"],pointClass:qe,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),qt(li,"updatedData",W=>{delete W.target.chart.bubbleZExtremes}),qt(li,"remove",W=>{delete W.target.chart.bubbleZExtremes}),G().registerSeriesType("bubble",li);let{seriesTypes:{column:{prototype:{pointClass:{prototype:hs}}},arearange:{prototype:{pointClass:Sr}}}}=G(),{extend:fs,isNumber:Ro}=j();class Ti extends Sr{isValid(){return Ro(this.low)}}fs(Ti.prototype,{setState:hs.setState});let{noop:Ii}=j(),{seriesTypes:{arearange:Fi,column:cr,column:{prototype:nr}}}=G(),{addEvent:Kl,clamp:Ys,extend:Hu,isNumber:Ql,merge:$c,pick:yf}=j();class dl extends Fi{setOptions(){return $c(!0,arguments[0],{stacking:void 0}),Fi.prototype.setOptions.apply(this,arguments)}translate(){return nr.translate.apply(this)}pointAttribs(){return nr.pointAttribs.apply(this,arguments)}translate3dPoints(){return nr.translate3dPoints.apply(this,arguments)}translate3dShapes(){return nr.translate3dShapes.apply(this,arguments)}afterColumnTranslate(){let E,k,B,Y,ne=this.yAxis,Q=this.xAxis,ce=Q.startAngleRad,ve=this.chart,Ce=this.xAxis.isRadial,Ee=Math.max(ve.chartWidth,ve.chartHeight)+999;this.points.forEach(be=>{let We=be.shapeArgs||{},He=this.options.minPointLength,lt=be.plotY,St=ne.translate(be.high,0,1,0,1);if(Ql(St)&&Ql(lt))if(be.plotHigh=Ys(St,-Ee,Ee),be.plotLow=Ys(lt,-Ee,Ee),Y=be.plotHigh,Math.abs(E=yf(be.rectPlotY,be.plotY)-be.plotHigh)<He?(k=He-E,E+=k,Y-=k/2):E<0&&(E*=-1,Y-=E),Ce&&this.polar)B=be.barX+ce,be.shapeType="arc",be.shapeArgs=this.polar.arc(Y+E,Y,B,B+be.pointWidth);else{We.height=E,We.y=Y;let{x:et=0,width:Et=0}=We;be.shapeArgs=$c(be.shapeArgs,this.crispCol(et,Y,Et,E)),be.tooltipPos=ve.inverted?[ne.len+ne.pos-ve.plotLeft-Y-E/2,Q.len+Q.pos-ve.plotTop-et-Et/2,E]:[Q.left-ve.plotLeft+et+Et/2,ne.pos-ve.plotTop+Y+E/2,E]}})}}dl.defaultOptions=$c(cr.defaultOptions,Fi.defaultOptions,{borderRadius:{where:"all"},pointRange:null,legendSymbol:"rectangle",marker:null,states:{hover:{halo:!1}}}),Kl(dl,"afterColumnTranslate",function(){dl.prototype.afterColumnTranslate.apply(this)},{order:5}),Hu(dl.prototype,{directTouch:!0,pointClass:Ti,trackerGroups:["group","dataLabelsGroup"],adjustForMissingColumns:nr.adjustForMissingColumns,animate:nr.animate,crispCol:nr.crispCol,drawGraph:Ii,drawPoints:nr.drawPoints,getSymbol:Ii,drawTracker:nr.drawTracker,getColumnMetrics:nr.getColumnMetrics}),G().registerSeriesType("columnrange",dl);let{column:qc}=G().seriesTypes,{clamp:Jl,merge:vf,pick:Xc}=j();class ti extends qc{translate(){let E=this.chart,k=this.options,B=this.dense=this.closestPointRange*this.xAxis.transA<2,Y=this.borderWidth=Xc(k.borderWidth,+!B),ne=this.yAxis,Q=k.threshold,ce=Xc(k.minPointLength,5),ve=this.getColumnMetrics(),Ce=ve.width,Ee=this.pointXOffset=ve.offset,be=this.translatedThreshold=ne.getThreshold(Q),We=this.barW=Math.max(Ce,1+2*Y);for(let He of(E.inverted&&(be-=.5),k.pointPadding&&(We=Math.ceil(We)),super.translate(),this.points)){let lt=Xc(He.yBottom,be),St=999+Math.abs(lt),et=Jl(He.plotY,-St,ne.len+St),Et=We/2,Ze=Math.min(et,lt),Gn=Math.max(et,lt)-Ze,tn=He.plotX+Ee,bi,ni,bn,xi,pr,ft,Qt,Ot,ln,Jn,kn;k.centerInCategory&&(tn=this.adjustForMissingColumns(tn,Ce,He,ve)),He.barX=tn,He.pointWidth=Ce,He.tooltipPos=E.inverted?[ne.len+ne.pos-E.plotLeft-et,this.xAxis.len-tn-Et,Gn]:[tn+Et,et+ne.pos-E.plotTop,Gn],bi=Q+(He.total||He.y),k.stacking==="percent"&&(bi=Q+(He.y<0)?-100:100);let Ln=ne.toPixels(bi,!0);bn=(ni=E.plotHeight-Ln-(E.plotHeight-be))?Et*(Ze-Ln)/ni:0,xi=ni?Et*(Ze+Gn-Ln)/ni:0,ft=tn-bn+Et,Qt=tn+bn+Et,Ot=tn+xi+Et,ln=tn-xi+Et,Jn=Ze-ce,kn=Ze+Gn,He.y<0&&(Jn=Ze,kn=Ze+Gn+ce),E.inverted&&(pr=ne.width-Ze,ni=Ln-(ne.width-be),bn=Et*(Ln-pr)/ni,xi=Et*(Ln-(pr-Gn))/ni,Qt=(ft=tn+Et+bn)-2*bn,Ot=tn-xi+Et,ln=tn+xi+Et,Jn=Ze,kn=Ze+Gn-ce,He.y<0&&(kn=Ze+Gn+ce)),He.shapeType="path",He.shapeArgs={x:ft,y:Jn,width:Qt-ft,height:Gn,d:[["M",ft,Jn],["L",Qt,Jn],["L",Ot,kn],["L",ln,kn],["Z"]]}}}}ti.defaultOptions=vf(qc.defaultOptions,{}),G().registerSeriesType("columnpyramid",ti);let{arearange:ko}=G().seriesTypes,{addEvent:ar,merge:$d,extend:_f}=j();class Va extends Ct{getColumnMetrics(){return this.linkedParent&&this.linkedParent.columnMetrics||vt().prototype.getColumnMetrics.call(this)}drawDataLabels(){let E=this.pointValKey;if(ko)for(let k of(ko.prototype.drawDataLabels.call(this),this.points))k.y=k[E]}toYData(E){return[E.low,E.high]}}Va.defaultOptions=$d(Ct.defaultOptions,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}),ar(Va,"afterTranslate",function(){for(let W of this.points)W.plotLow=W.plotY},{order:0}),_f(Va.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),G().registerSeriesType("errorbar",Va);let{series:{prototype:{pointClass:qd}}}=G(),{noop:ps}=j(),{series:Yc,seriesTypes:{column:Ua}}=G(),{clamp:$r,isNumber:la,extend:bf,merge:ju,pick:M0,pInt:Xd,defined:Yd}=j();class Wu extends Yc{translate(){let E=this.yAxis,k=this.options,B=E.center;this.generatePoints(),this.points.forEach(Y=>{let ne=ju(k.dial,Y.dial),Q=Xd(ne.radius)*B[2]/200,ce=Xd(ne.baseLength)*Q/100,ve=Xd(ne.rearLength)*Q/100,Ce=ne.baseWidth,Ee=ne.topWidth,be=k.overshoot,We=E.startAngleRad+E.translate(Y.y,void 0,void 0,void 0,!0);(la(be)||k.wrap===!1)&&(be=la(be)?be/180*Math.PI:0,We=$r(We,E.startAngleRad-be,E.endAngleRad+be)),We=180*We/Math.PI,Y.shapeType="path",Y.shapeArgs={d:ne.path||[["M",-ve,-Ce/2],["L",ce,-Ce/2],["L",Q,-Ee/2],["L",Q,Ee/2],["L",ce,Ce/2],["L",-ve,Ce/2],["Z"]],translateX:B[0],translateY:B[1],rotation:We},Y.plotX=B[0],Y.plotY=B[1],Yd(Y.y)&&E.max-E.min&&(Y.percentage=(Y.y-E.min)/(E.max-E.min)*100)})}drawPoints(){let E=this,k=E.chart,B=E.yAxis.center,Y=E.pivot,ne=E.options,Q=ne.pivot,ce=k.renderer;E.points.forEach(ve=>{let Ce=ve.graphic,Ee=ve.shapeArgs,be=Ee.d,We=ju(ne.dial,ve.dial);Ce?(Ce.animate(Ee),Ee.d=be):ve.graphic=ce[ve.shapeType](Ee).addClass("highcharts-dial").add(E.group),k.styledMode||ve.graphic[Ce?"animate":"attr"]({stroke:We.borderColor,"stroke-width":We.borderWidth,fill:We.backgroundColor})}),Y?Y.animate({translateX:B[0],translateY:B[1]}):Q&&(E.pivot=ce.circle(0,0,Q.radius).attr({zIndex:2}).addClass("highcharts-pivot").translate(B[0],B[1]).add(E.group),k.styledMode||E.pivot.attr({fill:Q.backgroundColor,stroke:Q.borderColor,"stroke-width":Q.borderWidth}))}animate(E){let k=this;E||k.points.forEach(B=>{let Y=B.graphic;Y&&(Y.attr({rotation:180*k.yAxis.startAngleRad/Math.PI}),Y.animate({rotation:B.shapeArgs.rotation},k.options.animation))})}render(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),Yc.prototype.render.call(this),this.group.clip(this.chart.clipRect)}setData(E,k){Yc.prototype.setData.call(this,E,!1),this.processData(),this.generatePoints(),M0(k,!0)&&this.chart.redraw()}hasData(){return!!this.points.length}}Wu.defaultOptions=ju(Yc.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{backgroundColor:"#000000",baseLength:"70%",baseWidth:3,borderColor:"#cccccc",borderWidth:0,radius:"80%",rearLength:"10%",topWidth:1},pivot:{radius:5,borderWidth:0,borderColor:"#cccccc",backgroundColor:"#000000"},tooltip:{headerFormat:""},showInLegend:!1}),bf(Wu.prototype,{angular:!0,directTouch:!0,drawGraph:ps,drawTracker:Ua.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:class extends qd{setState(W){this.state=W}},trackerGroups:["group","dataLabelsGroup"]}),G().registerSeriesType("gauge",Wu);var ec=O(620),ii=O.n(ec);let{composed:Zd}=j(),{addEvent:Ps,pushUnique:Gu}=j();function wm(){let W,E,k,B,Y=this;Y.container&&(W=Ps(Y.container,"mousedown",ne=>{E&&E(),k&&k(),(B=Y.hoverPoint)&&B.series&&B.series.hasDraggableNodes&&B.series.options.draggable&&(B.series.onMouseDown(B,ne),E=Ps(Y.container,"mousemove",Q=>B&&B.series&&B.series.onMouseMove(B,Q)),k=Ps(Y.container.ownerDocument,"mouseup",Q=>(E(),k(),B&&B.series&&B.series.onMouseUp(B,Q))))})),Ps(Y,"destroy",function(){W()})}let Zc={compose:function(W){Gu(Zd,"DragNodes")&&Ps(W,"load",wm)},onMouseDown:function(W,E){let{panKey:k}=this.chart.options.chart;if(k&&E[`${k}Key`])return;let B=this.chart.pointer?.normalize(E)||E;W.fixedPosition={chartX:B.chartX,chartY:B.chartY,plotX:W.plotX,plotY:W.plotY},W.inDragMode=!0},onMouseMove:function(W,E){if(W.fixedPosition&&W.inDragMode){let k,B,Y=this.chart,ne=Y.pointer?.normalize(E)||E,Q=W.fixedPosition.chartX-ne.chartX,ce=W.fixedPosition.chartY-ne.chartY,ve=Y.graphLayoutsLookup;(Math.abs(Q)>5||Math.abs(ce)>5)&&(k=W.fixedPosition.plotX-Q,B=W.fixedPosition.plotY-ce,Y.isInsidePlot(k,B)&&(W.plotX=k,W.plotY=B,W.hasDragged=!0,this.redrawHalo(W),ve.forEach(Ce=>{Ce.restartSimulation()})))}},onMouseUp:function(W){W.fixedPosition&&(W.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),W.inDragMode=W.hasDragged=!1,this.options.fixedDraggable||delete W.fixedPosition)},redrawHalo:function(W){W&&this.halo&&this.halo.attr({d:W.haloPath(this.options.states.hover.halo.size)})}},{setAnimation:Ir}=j(),{composed:ca}=j(),{addEvent:Kc,pushUnique:E0}=j();function Cm(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(W=>{W.updateSimulation()}),this.redraw())}function tc(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(W=>{W.updateSimulation(!1)}),this.redraw())}function T0(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(W=>{W.stop()})}function oo(){let W,E=!1,k=B=>{B.maxIterations--&&isFinite(B.temperature)&&!B.isStable()&&!B.enableSimulation&&(B.beforeStep&&B.beforeStep(),B.step(),W=!1,E=!0)};if(this.graphLayoutsLookup&&!this.pointer?.hasDragged){for(Ir(!1,this),this.graphLayoutsLookup.forEach(B=>B.start());!W;)W=!0,this.graphLayoutsLookup.forEach(k);E&&this.series.forEach(B=>{B&&B.layout&&B.render()})}}let Lo={compose:function(W){E0(ca,"GraphLayout")&&(Kc(W,"afterPrint",Cm),Kc(W,"beforePrint",tc),Kc(W,"predraw",T0),Kc(W,"render",oo))},integrations:{},layouts:{}};var hl=O(960),za=O.n(hl);let{seriesTypes:{bubble:{prototype:{pointClass:Sm}}}}=G(),Qc=class extends Sm{destroy(){return this.series?.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),Ba().prototype.destroy.apply(this,arguments)}firePointEvent(){let W=this.series.options;if(this.isParentNode&&W.parentNode){let E=W.allowPointSelect;W.allowPointSelect=W.parentNode.allowPointSelect,Ba().prototype.firePointEvent.apply(this,arguments),W.allowPointSelect=E}else Ba().prototype.firePointEvent.apply(this,arguments)}select(){let W=this.series.chart;this.isParentNode?(W.getSelectedPoints=W.getSelectedParentNodes,Ba().prototype.select.apply(this,arguments),W.getSelectedPoints=za().prototype.getSelectedPoints):Ba().prototype.select.apply(this,arguments)}setState(W,E){this?.graphic?.parentGroup?.element&&super.setState(W,E)}},{isNumber:Kd}=j(),xf={attractive:function(W,E,k){let B=W.getMass(),Y=-k.x*E*this.diffTemperature,ne=-k.y*E*this.diffTemperature;W.fromNode.fixedPosition||(W.fromNode.plotX-=Y*B.fromNode/W.fromNode.degree,W.fromNode.plotY-=ne*B.fromNode/W.fromNode.degree),W.toNode.fixedPosition||(W.toNode.plotX+=Y*B.toNode/W.toNode.degree,W.toNode.plotY+=ne*B.toNode/W.toNode.degree)},attractiveForceFunction:function(W,E){return(E-W)/W},barycenter:function(){let W=this.options.gravitationalConstant||0,E=(this.barycenter.xFactor-(this.box.left+this.box.width)/2)*W,k=(this.barycenter.yFactor-(this.box.top+this.box.height)/2)*W;this.nodes.forEach(function(B){B.fixedPosition||(B.plotX-=E/B.mass/B.degree,B.plotY-=k/B.mass/B.degree)})},getK:function(W){return Math.pow(W.box.width*W.box.height/W.nodes.length,.5)},integrate:function(W,E){let k=-W.options.friction,B=W.options.maxSpeed,Y=E.prevX,ne=E.prevY,Q=(E.plotX+E.dispX-Y)*k,ce=(E.plotY+E.dispY-ne)*k,ve=Math.abs,Ce=ve(Q)/(Q||1),Ee=ve(ce)/(ce||1),be=Ce*Math.min(B,Math.abs(Q)),We=Ee*Math.min(B,Math.abs(ce));E.prevX=E.plotX+E.dispX,E.prevY=E.plotY+E.dispY,E.plotX+=be,E.plotY+=We,E.temperature=W.vectorLength({x:be,y:We})},repulsive:function(W,E,k){let B=E*this.diffTemperature/W.mass/W.degree;W.fixedPosition||(W.plotX+=k.x*B,W.plotY+=k.y*B)},repulsiveForceFunction:function(W,E){return(E-W)/W*(E>W)}},{noop:Qd}=j(),wf={barycenter:function(){let W,E,k=this.options.gravitationalConstant||0,B=this.box,Y=this.nodes,ne=Math.sqrt(Y.length);for(let Q of Y)if(!Q.fixedPosition){let ce=Q.mass*ne,ve=Q.plotX||0,Ce=Q.plotY||0,Ee=Q.series,be=Ee.parentNode;this.resolveSplitSeries(Q)&&be&&!Q.isParentNode?(W=be.plotX||0,E=be.plotY||0):(W=B.width/2,E=B.height/2),Q.plotX=ve-(ve-W)*k/ce,Q.plotY=Ce-(Ce-E)*k/ce,Ee.chart.hoverPoint===Q&&Ee.redrawHalo&&Ee.halo&&Ee.redrawHalo(Q)}},getK:Qd,integrate:xf.integrate,repulsive:function(W,E,k,B){let Y=E*this.diffTemperature/W.mass/W.degree,ne=k.x*Y,Q=k.y*Y;W.fixedPosition||(W.plotX+=ne,W.plotY+=Q),B.fixedPosition||(B.plotX-=ne,B.plotY-=Q)},repulsiveForceFunction:function(W,E,k,B){return Math.min(W,(k.marker.radius+B.marker.radius)/2)}},Cf={attractive:function(W,E,k,B){let Y=W.getMass(),ne=k.x/B*E,Q=k.y/B*E;W.fromNode.fixedPosition||(W.fromNode.dispX-=ne*Y.fromNode/W.fromNode.degree,W.fromNode.dispY-=Q*Y.fromNode/W.fromNode.degree),W.toNode.fixedPosition||(W.toNode.dispX+=ne*Y.toNode/W.toNode.degree,W.toNode.dispY+=Q*Y.toNode/W.toNode.degree)},attractiveForceFunction:function(W,E){return W*W/E},barycenter:function(){let W=this.options.gravitationalConstant,E=this.barycenter.xFactor,k=this.barycenter.yFactor;this.nodes.forEach(function(B){if(!B.fixedPosition){let Y=B.getDegree(),ne=Y*(1+Y/2);B.dispX+=(E-B.plotX)*W*ne/B.degree,B.dispY+=(k-B.plotY)*W*ne/B.degree}})},getK:function(W){return Math.pow(W.box.width*W.box.height/W.nodes.length,.3)},integrate:function(W,E){E.dispX+=E.dispX*W.options.friction,E.dispY+=E.dispY*W.options.friction;let k=E.temperature=W.vectorLength({x:E.dispX,y:E.dispY});k!==0&&(E.plotX+=E.dispX/k*Math.min(Math.abs(E.dispX),W.temperature),E.plotY+=E.dispY/k*Math.min(Math.abs(E.dispY),W.temperature))},repulsive:function(W,E,k,B){W.dispX+=k.x/B*E/W.degree,W.dispY+=k.y/B*E/W.degree},repulsiveForceFunction:function(W,E){return E*E/W}};class nc{constructor(E){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=E,this.boxSize=Math.min(E.width,E.height)}divideBox(){let E=this.box.width/2,k=this.box.height/2;this.nodes[0]=new nc({left:this.box.left,top:this.box.top,width:E,height:k}),this.nodes[1]=new nc({left:this.box.left+E,top:this.box.top,width:E,height:k}),this.nodes[2]=new nc({left:this.box.left+E,top:this.box.top+k,width:E,height:k}),this.nodes[3]=new nc({left:this.box.left,top:this.box.top+k,width:E,height:k})}getBoxPosition(E){let k=E.plotX<this.box.left+this.box.width/2,B=E.plotY<this.box.top+this.box.height/2;return k?3*!B:B?1:2}insert(E,k){let B;this.isInternal?this.nodes[this.getBoxPosition(E)].insert(E,k-1):(this.isEmpty=!1,this.body?k?(this.isInternal=!0,this.divideBox(),this.body!==!0&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,k-1),this.body=!0),this.nodes[this.getBoxPosition(E)].insert(E,k-1)):((B=new nc({top:E.plotX||NaN,left:E.plotY||NaN,width:.1,height:.1})).body=E,B.isInternal=!1,this.nodes.push(B)):(this.isInternal=!1,this.body=E))}updateMassAndCenter(){let E=0,k=0,B=0;if(this.isInternal){for(let Y of this.nodes)Y.isEmpty||(E+=Y.mass,k+=Y.plotX*Y.mass,B+=Y.plotY*Y.mass);k/=E,B/=E}else this.body&&(E=this.body.mass,k=this.body.plotX,B=this.body.plotY);this.mass=E,this.plotX=k,this.plotY=B}}let Jd=class{constructor(W,E,k,B){this.box={left:W,top:E,width:k,height:B},this.maxDepth=25,this.root=new nc(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(W){W.updateMassAndCenter()})}insertNodes(W){for(let E of W)this.root.insert(E,this.maxDepth)}visitNodeRecursive(W,E,k){let B;if(W||(W=this.root),W===this.root&&E&&(B=E(W)),B!==!1){for(let Y of W.nodes){if(Y.isInternal){if(E&&(B=E(Y)),B===!1)continue;this.visitNodeRecursive(Y,E,k)}else Y.body&&E&&E(Y.body);k&&k(Y)}W===this.root&&k&&k(W)}}},{win:$u}=j(),{clamp:Sf,defined:Mf,isFunction:eh,fireEvent:ic,pick:fl}=j();class Ha{constructor(){this.box={},this.currentStep=0,this.initialRendering=!0,this.links=[],this.nodes=[],this.series=[],this.simulation=!1}static compose(E){Lo.compose(E),Lo.integrations.euler=Cf,Lo.integrations.verlet=xf,Lo.layouts["reingold-fruchterman"]=Ha}init(E){this.options=E,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=Lo.integrations[E.integration],this.enableSimulation=E.enableSimulation,this.attractiveForce=fl(E.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=fl(E.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=E.approximation}updateSimulation(E){this.enableSimulation=fl(E,this.options.enableSimulation)}start(){let E=this.series,k=this.options;this.currentStep=0,this.forces=E[0]&&E[0].forces||[],this.chart=E[0]&&E[0].chart,this.initialRendering&&(this.initPositions(),E.forEach(function(B){B.finishedAnimating=!0,B.render()})),this.setK(),this.resetSimulation(k),this.enableSimulation&&this.step()}step(){let E=this.series;for(let k of(this.currentStep++,this.approximation==="barnes-hut"&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter()),this.forces||[]))this[k+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(let k of E)k.chart&&k.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&$u.cancelAnimationFrame(this.simulation),this.simulation=$u.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(k=>{ic(k,"afterSimulation")}))}}stop(){this.simulation&&$u.cancelAnimationFrame(this.simulation)}setArea(E,k,B,Y){this.box={left:E,top:k,width:B,height:Y}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(E,k){for(let B of E)k.indexOf(B)===-1&&k.push(B)}removeElementFromCollection(E,k){let B=k.indexOf(E);B!==-1&&k.splice(B,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(E){this.maxIterations=fl(E,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(E){this.initialRendering=E}createQuadTree(){this.quadTree=new Jd(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){let E=this.options.initialPositions;if(eh(E))for(let k of(E.call(this),this.nodes))Mf(k.prevX)||(k.prevX=k.plotX),Mf(k.prevY)||(k.prevY=k.plotY),k.dispX=0,k.dispY=0;else E==="circle"?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){let E,k=this.box,B=this.nodes,Y=2*Math.PI/(B.length+1),ne=B.filter(function(Ee){return Ee.linksTo.length===0}),Q={},ce=this.options.initialPositionRadius,ve=Ee=>{for(let be of Ee.linksFrom||[])Q[be.toNode.id]||(Q[be.toNode.id]=!0,Ce.push(be.toNode),ve(be.toNode))},Ce=[];for(let Ee of ne)Ce.push(Ee),ve(Ee);if(Ce.length)for(let Ee of B)Ce.indexOf(Ee)===-1&&Ce.push(Ee);else Ce=B;for(let Ee=0,be=Ce.length;Ee<be;++Ee)(E=Ce[Ee]).plotX=E.prevX=fl(E.plotX,k.width/2+ce*Math.cos(Ee*Y)),E.plotY=E.prevY=fl(E.plotY,k.height/2+ce*Math.sin(Ee*Y)),E.dispX=0,E.dispY=0}setRandomPositions(){let E,k=this.box,B=this.nodes,Y=B.length+1,ne=Q=>{let ce=Q*Q/Math.PI;return ce-Math.floor(ce)};for(let Q=0,ce=B.length;Q<ce;++Q)(E=B[Q]).plotX=E.prevX=fl(E.plotX,k.width*ne(Q)),E.plotY=E.prevY=fl(E.plotY,k.height*ne(Y+Q)),E.dispX=0,E.dispY=0}force(E,...k){this.integration[E].apply(this,k)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let E=0,k=0,B=0;for(let Y of this.nodes)k+=Y.plotX*Y.mass,B+=Y.plotY*Y.mass,E+=Y.mass;return this.barycenter={x:k,y:B,xFactor:k/E,yFactor:B/E},this.barycenter}barnesHutApproximation(E,k){let B,Y,ne=this.getDistXY(E,k),Q=this.vectorLength(ne);return E!==k&&Q!==0&&(k.isInternal?k.boxSize/Q<this.options.theta&&Q!==0?(Y=this.repulsiveForce(Q,this.k),this.force("repulsive",E,Y*k.mass,ne,Q),B=!1):B=!0:(Y=this.repulsiveForce(Q,this.k),this.force("repulsive",E,Y*k.mass,ne,Q))),B}repulsiveForces(){if(this.approximation==="barnes-hut")for(let E of this.nodes)this.quadTree.visitNodeRecursive(null,k=>this.barnesHutApproximation(E,k));else{let E,k,B;for(let Y of this.nodes)for(let ne of this.nodes)Y===ne||Y.fixedPosition||(B=this.getDistXY(Y,ne),(k=this.vectorLength(B))!==0&&(E=this.repulsiveForce(k,this.k),this.force("repulsive",Y,E*ne.mass,B,k)))}}attractiveForces(){let E,k,B;for(let Y of this.links)Y.fromNode&&Y.toNode&&(E=this.getDistXY(Y.fromNode,Y.toNode),(k=this.vectorLength(E))!==0&&(B=this.attractiveForce(k,this.k),this.force("attractive",Y,B,E,k)))}applyLimits(){for(let E of this.nodes)E.fixedPosition||(this.integration.integrate(this,E),this.applyLimitBox(E,this.box),E.dispX=0,E.dispY=0)}applyLimitBox(E,k){let B=E.radius;E.plotX=Sf(E.plotX,k.left+B,k.width-B),E.plotY=Sf(E.plotY,k.top+B,k.height-B)}coolDown(E,k,B){return E-k*B}isStable(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||this.temperature<=0}getSystemTemperature(){let E=0;for(let k of this.nodes)E+=k.temperature;return E}vectorLength(E){return Math.sqrt(E.x*E.x+E.y*E.y)}getDistR(E,k){let B=this.getDistXY(E,k);return this.vectorLength(B)}getDistXY(E,k){let B=E.plotX-k.plotX,Y=E.plotY-k.plotY;return{x:B,y:Y,absX:Math.abs(B),absY:Math.abs(Y)}}}let ao=Ha,{addEvent:Mm,defined:Em,pick:Ef}=j();function pl(){let W=this.series,E=[];return W.forEach(k=>{k.parentNode&&k.parentNode.selected&&E.push(k.parentNode)}),E}function th(){this.allDataPoints&&delete this.allDataPoints}class qu extends ao{constructor(){super(...arguments),this.index=NaN,this.nodes=[],this.series=[]}static compose(E){ao.compose(E),Lo.integrations.packedbubble=wf,Lo.layouts.packedbubble=qu;let k=E.prototype;k.getSelectedParentNodes||(Mm(E,"beforeRedraw",th),k.getSelectedParentNodes=pl),k.allParentNodes||(k.allParentNodes=[])}beforeStep(){this.options.marker&&this.series.forEach(E=>{E&&E.calculateParentRadius()})}isStable(){let E=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&E<1e-5||this.temperature<=0}setCircularPositions(){let E=this.box,k=[...this.nodes,...this?.chart?.allParentNodes||[]],B=2*Math.PI/(k.length+1),Y=this.options.initialPositionRadius,ne,Q,ce=0;for(let ve of k)this.resolveSplitSeries(ve)&&!ve.isParentNode?(ne=ve.series.parentNode.plotX,Q=ve.series.parentNode.plotY):(ne=E.width/2,Q=E.height/2),ve.plotX=ve.prevX=Ef(ve.plotX,ne+Y*Math.cos(ve.index||ce*B)),ve.plotY=ve.prevY=Ef(ve.plotY,Q+Y*Math.sin(ve.index||ce*B)),ve.dispX=0,ve.dispY=0,ce++}repulsiveForces(){let{options:E,k}=this,{bubblePadding:B=0,seriesInteraction:Y}=E,ne=[...this.nodes,...this?.chart?.allParentNodes||[]];for(let Q of ne){let ce=Q.series,ve=Q.fixedPosition,Ce=(Q.marker?.radius||0)+B;for(let Ee of(Q.degree=Q.mass,Q.neighbours=0,ne)){let be=Ee.series;if(Q!==Ee&&!ve&&(Y||ce===be)&&!(ce===be&&(Ee.isParentNode||Q.isParentNode))){let We,He=this.getDistXY(Q,Ee),lt=this.vectorLength(He)-(Ce+(Ee.marker?.radius||0));lt<0&&(Q.degree+=.01,We=this.repulsiveForce(-lt/Math.sqrt(++Q.neighbours),k,Q,Ee)*Ee.mass),this.force("repulsive",Q,We||0,He,Ee,lt)}}}}resolveSplitSeries(E){let k=E.series?.options?.layoutAlgorithm?.splitSeries;return!Em(k)&&E.series.chart?.options?.plotOptions?.packedbubble?.layoutAlgorithm?.splitSeries||k||!1}applyLimitBox(E,k){let B,Y;this.resolveSplitSeries(E)&&!E.isParentNode&&this.options.parentNodeLimit&&(B=this.getDistXY(E,E.series.parentNode),(Y=E.series.parentNodeRadius-E.marker.radius-this.vectorLength(B))<0&&Y>-2*E.marker.radius&&(E.plotX-=.01*B.x,E.plotY-=.01*B.y)),super.applyLimitBox(E,k)}}Lo.layouts.packedbubble=qu;let{merge:A0,syncTimeout:Tm}=j(),{animObject:D0}=j();var lo=O(28),ml=O.n(lo);let{deg2rad:nh}=j(),{addEvent:Zs,merge:I0,uniqueKey:rc,defined:Xu,extend:No}=j();function Am(W,E){E=I0(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},E);let k=this.renderer.url,B=this.text||this,Y=B.textPath,{attributes:ne,enabled:Q}=E;if(W=W||Y&&Y.path,Y&&Y.undo(),W&&Q){let ce=Zs(B,"afterModifyTree",ve=>{if(W&&Q){let Ce=W.attr("id");Ce||W.attr("id",Ce=rc());let Ee={x:0,y:0};Xu(ne.dx)&&(Ee.dx=ne.dx,delete ne.dx),Xu(ne.dy)&&(Ee.dy=ne.dy,delete ne.dy),B.attr(Ee),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());let be=ve.nodes.slice(0);ve.nodes.length=0,ve.nodes[0]={tagName:"textPath",attributes:No(ne,{"text-anchor":ne.textAnchor,href:`${k}#${Ce}`}),children:be}}});B.textPath={path:W,undo:ce}}else B.attr({dx:0,dy:0}),delete B.textPath;return this.added&&(B.textCache="",this.renderer.buildText(B)),this}function ua(W){let E=W.bBox,k=this.element?.querySelector("textPath");if(k){let B=[],{b:Y,h:ne}=this.renderer.fontMetrics(this.element),Q=ne-Y,ce=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),ve=k.innerHTML.replace(ce,"").split(/<tspan class="highcharts-br"[^>]*>/),Ce=ve.length,Ee=(be,We)=>{let{x:He,y:lt}=We,St=(k.getRotationOfChar(be)-90)*nh,et=Math.cos(St),Et=Math.sin(St);return[[He-Q*et,lt-Q*Et],[He+Y*et,lt+Y*Et]]};for(let be=0,We=0;We<Ce;We++){let He=ve[We].length;for(let lt=0;lt<He;lt+=5)try{let St=be+lt+We,[et,Et]=Ee(St,k.getStartPositionOfChar(St));lt===0?(B.push(Et),B.push(et)):(We===0&&B.unshift(Et),We===Ce-1&&B.push(et))}catch{break}be+=He-1;try{let lt=be+We,St=k.getEndPositionOfChar(lt),[et,Et]=Ee(lt,St);B.unshift(Et),B.unshift(et)}catch{break}}B.length&&B.push(B[0].slice()),E.polygon=B}return E}function P0(W){let E=W.labelOptions,k=W.point,B=E[k.formatPrefix+"TextPath"]||E.textPath;B&&!E.useHTML&&(this.setTextPath(k.getDataLabelPath?.(this)||k.graphic,B),k.dataLabelPath&&!B.enabled&&(k.dataLabelPath=k.dataLabelPath.destroy()))}let{parse:Ks}=ii(),{noop:ja}=j(),{series:{prototype:gl},seriesTypes:{bubble:sc}}=G(),{initDataLabels:Tf,initDataLabelsDefer:Wa}={initDataLabels:function(){let W=this.options.dataLabels;if(!this.dataLabelsGroup){let E=this.initDataLabelsGroup();return!this.chart.styledMode&&W?.style&&E.css(W.style),E.attr({opacity:0}),this.visible&&E.show(),E}return this.dataLabelsGroup.attr(A0({opacity:1},this.getPlotBox("data-labels"))),this.dataLabelsGroup},initDataLabelsDefer:function(){let W=this.options.dataLabels;W?.defer&&this.options.layoutAlgorithm?.enableSimulation?Tm(()=>{this.deferDataLabels=!1},W?D0(W.animation).defer:0):this.deferDataLabels=!1}},{addEvent:R0,clamp:oc,defined:Oo,extend:da,fireEvent:ih,isArray:Af,isNumber:Fo,merge:yl,pick:ac}=j();({compose:function(W){Zs(W,"afterGetBBox",ua),Zs(W,"beforeAddingDataLabel",P0);let E=W.prototype;E.setTextPath||(E.setTextPath=Am)}}).compose(ml());class lc extends sc{constructor(){super(...arguments),this.parentNodeMass=0,this.deferDataLabels=!0}static compose(E,k,B){sc.compose(E,k,B),Zc.compose(k),qu.compose(k)}accumulateAllPoints(){let E=this.chart,k=[];for(let B of E.series)if(B.is("packedbubble")&&B.reserveSpace()){let Y=B.getColumn("value");for(let ne=0;ne<Y.length;ne++)k.push([null,null,Y[ne],B.index,ne,{id:ne,marker:{radius:0}}])}return k}addLayout(){let E=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},k=E.type||"packedbubble",B=this.chart.options.chart,Y=this.chart.graphLayoutsStorage,ne=this.chart.graphLayoutsLookup,Q;Y||(this.chart.graphLayoutsStorage=Y={},this.chart.graphLayoutsLookup=ne=[]),(Q=Y[k])||(E.enableSimulation=Oo(B.forExport)?!B.forExport:E.enableSimulation,Y[k]=Q=new Lo.layouts[k],Q.init(E),ne.splice(Q.index,0,Q)),this.layout=Q,this.points.forEach(ce=>{ce.mass=2,ce.degree=1,ce.collisionNmb=1}),Q.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),Q.addElementsToCollection([this],Q.series),Q.addElementsToCollection(this.points,Q.nodes)}addSeriesLayout(){let E=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},k=E.type||"packedbubble",B=this.chart.graphLayoutsStorage,Y=this.chart.graphLayoutsLookup,ne=yl(E,E.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation}),Q=B[k+"-series"];Q||(B[k+"-series"]=Q=new Lo.layouts[k],Q.init(ne),Y.splice(Q.index,0,Q)),this.parentNodeLayout=Q,this.createParentNodes()}calculateParentRadius(){let E=this.seriesBox();this.parentNodeRadius=oc(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,E?Math.max(Math.sqrt(Math.pow(E.width,2)+Math.pow(E.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)}calculateZExtremes(){let E=this.chart.series,k=this.options.zMin,B=this.options.zMax,Y=1/0,ne=-1/0;return k&&B?[k,B]:(E.forEach(Q=>{Q.getColumn("value").forEach(ce=>{Oo(ce)&&(ce>ne&&(ne=ce),ce<Y&&(Y=ce))})}),[k=ac(k,Y),B=ac(B,ne)])}checkOverlap(E,k){let B=E[0]-k[0],Y=E[1]-k[1];return Math.sqrt(B*B+Y*Y)-Math.abs(E[2]+k[2])<-.001}createParentNodes(){let E=this.pointClass,k=this.chart,B=this.parentNodeLayout,Y=this.layout.options,ne,Q=this.parentNode,ce={radius:this.parentNodeRadius,lineColor:this.color,fillColor:Ks(this.color).brighten(.4).get()};Y.parentNodeOptions&&(ce=yl(Y.parentNodeOptions.marker||{},ce)),this.parentNodeMass=0,this.points.forEach(ve=>{this.parentNodeMass+=Math.PI*Math.pow(ve.marker.radius,2)}),this.calculateParentRadius(),B.nodes.forEach(ve=>{ve.seriesIndex===this.index&&(ne=!0)}),B.setArea(0,0,k.plotWidth,k.plotHeight),ne||(Q||(Q=new E(this,{mass:this.parentNodeRadius/2,marker:ce,dataLabels:{inside:!1},states:{normal:{marker:ce},hover:{marker:ce}},dataLabelOnNull:!0,degree:this.parentNodeRadius,isParentNode:!0,seriesIndex:this.index}),this.chart.allParentNodes.push(Q)),this.parentNode&&(Q.plotX=this.parentNode.plotX,Q.plotY=this.parentNode.plotY),this.parentNode=Q,B.addElementsToCollection([this],B.series),B.addElementsToCollection([Q],B.nodes))}deferLayout(){let E=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),E.splitSeries&&this.addSeriesLayout())}destroy(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach(E=>{E.removeElementFromCollection(this,E.series)},this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),gl.destroy.apply(this,arguments)}drawDataLabels(){!this.deferDataLabels&&(gl.drawDataLabels.call(this,this.points),this.parentNode&&(this.parentNode.formatPrefix="parentNode",gl.drawDataLabels.call(this,[this.parentNode])))}drawGraph(){if(!this.layout||!this.layout.options.splitSeries)return;let E=this.chart,k=this.layout.options.parentNodeOptions.marker,B={fill:k.fillColor||Ks(this.color).brighten(.4).get(),opacity:k.fillOpacity,stroke:k.lineColor||this.color,"stroke-width":ac(k.lineWidth,this.options.lineWidth)},Y={};this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,E.seriesGroup),this.group?.attr({zIndex:2}),this.calculateParentRadius(),this.parentNode&&Oo(this.parentNode.plotX)&&Oo(this.parentNode.plotY)&&Oo(this.parentNodeRadius)&&(Y=yl({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},B),this.parentNode.graphic||(this.graph=this.parentNode.graphic=E.renderer.symbol(B.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(Y))}drawTracker(){let E,k=this.parentNode;super.drawTracker(),k&&(E=Af(k.dataLabels)?k.dataLabels:k.dataLabel?[k.dataLabel]:[],k.graphic&&(k.graphic.element.point=k),E.forEach(B=>{(B.div||B.element).point=k}))}getPointRadius(){let E,k,B,Y,ne=this.chart,Q=ne.plotWidth,ce=ne.plotHeight,ve=this.options,Ce=ve.useSimulation,Ee=Math.min(Q,ce),be={},We=[],He=ne.allDataPoints||[],lt=He.length;["minSize","maxSize"].forEach(et=>{let Et=parseInt(ve[et],10),Ze=/%$/.test(ve[et]);be[et]=Ze?Ee*Et/100:Et*Math.sqrt(lt)}),ne.minRadius=E=be.minSize/Math.sqrt(lt),ne.maxRadius=k=be.maxSize/Math.sqrt(lt);let St=Ce?this.calculateZExtremes():[E,k];He.forEach((et,Et)=>{B=Ce?oc(et[2],St[0],St[1]):et[2],(Y=this.getRadius(St[0],St[1],E,k,B))===0&&(Y=null),He[Et][2]=Y,We.push(Y)}),this.radii=We}init(){return gl.init.apply(this,arguments),Wa.call(this),this.eventsToUnbind.push(R0(this,"updatedData",function(){this.chart.series.forEach(E=>{E.type===this.type&&(E.isDirty=!0)},this)})),this}onMouseUp(E){if(E.fixedPosition&&!E.removed){let k,B=this.layout,Y=this.parentNodeLayout;!E.isParentNode&&Y&&B.options.dragBetweenSeries&&Y.nodes.forEach(ne=>{E&&E.marker&&ne!==E.series.parentNode&&(k=B.getDistXY(E,ne),B.vectorLength(k)-ne.marker.radius-E.marker.radius<0&&(ne.series.addPoint(yl(E.options,{plotX:E.plotX,plotY:E.plotY}),!1),B.removeElementFromCollection(E,B.nodes),E.remove()))}),Zc.onMouseUp.apply(this,arguments)}}placeBubbles(E){let k=this.checkOverlap,B=this.positionBubble,Y=[],ne=1,Q=0,ce=0,ve,Ce=[],Ee,be=E.sort((We,He)=>He[2]-We[2]);if(be.length){if(Y.push([[0,0,be[0][2],be[0][3],be[0][4]]]),be.length>1)for(Y.push([[0,0-be[1][2]-be[0][2],be[1][2],be[1][3],be[1][4]]]),Ee=2;Ee<be.length;Ee++)be[Ee][2]=be[Ee][2]||1,k(ve=B(Y[ne][Q],Y[ne-1][ce],be[Ee]),Y[ne][0])?(Y.push([]),ce=0,Y[ne+1].push(B(Y[ne][Q],Y[ne][0],be[Ee])),ne++,Q=0):ne>1&&Y[ne-1][ce+1]&&k(ve,Y[ne-1][ce+1])?(ce++,Y[ne].push(B(Y[ne][Q],Y[ne-1][ce],be[Ee])),Q++):(Q++,Y[ne].push(ve));this.chart.stages=Y,this.chart.rawPositions=[].concat.apply([],Y),this.resizeRadius(),Ce=this.chart.rawPositions}return Ce}pointAttribs(E,k){let B=this.options,Y=E&&E.isParentNode,ne=B.marker;Y&&B.layoutAlgorithm&&B.layoutAlgorithm.parentNodeOptions&&(ne=B.layoutAlgorithm.parentNodeOptions.marker);let Q=ne.fillOpacity,ce=gl.pointAttribs.call(this,E,k);return Q!==1&&(ce["fill-opacity"]=Q),ce}positionBubble(E,k,B){let Y=Math.asin,ne=Math.acos,Q=Math.pow,ce=Math.abs,ve=(0,Math.sqrt)(Q(E[0]-k[0],2)+Q(E[1]-k[1],2)),Ce=ne((Q(ve,2)+Q(B[2]+k[2],2)-Q(B[2]+E[2],2))/(2*(B[2]+k[2])*ve)),Ee=Y(ce(E[0]-k[0])/ve),be=(E[1]-k[1]<0?0:Math.PI)+Ce+Ee*((E[0]-k[0])*(E[1]-k[1])<0?1:-1),We=Math.cos(be),He=Math.sin(be);return[k[0]+(k[2]+B[2])*He,k[1]-(k[2]+B[2])*We,B[2],B[3],B[4]]}render(){let E=[];gl.render.apply(this,arguments),!this.options.dataLabels.allowOverlap&&(this.data.forEach(k=>{Af(k.dataLabels)&&k.dataLabels.forEach(B=>{E.push(B)})}),this.options.useSimulation&&this.chart.hideOverlappingLabels(E))}resizeRadius(){let E,k,B,Y,ne,Q=this.chart,ce=Q.rawPositions,ve=Math.min,Ce=Math.max,Ee=Q.plotLeft,be=Q.plotTop,We=Q.plotHeight,He=Q.plotWidth;for(let Et of(E=B=Number.POSITIVE_INFINITY,k=Y=Number.NEGATIVE_INFINITY,ce))ne=Et[2],E=ve(E,Et[0]-ne),k=Ce(k,Et[0]+ne),B=ve(B,Et[1]-ne),Y=Ce(Y,Et[1]+ne);let lt=[k-E,Y-B],St=[(He-Ee)/lt[0],(We-be)/lt[1]],et=ve.apply([],St);if(Math.abs(et-1)>1e-10){for(let Et of ce)Et[2]*=et;this.placeBubbles(ce)}else Q.diffY=We/2+be-B-(Y-B)/2,Q.diffX=He/2+Ee-E-(k-E)/2}seriesBox(){let E,k=this.chart,B=this.data,Y=Math.max,ne=Math.min,Q=[k.plotLeft,k.plotLeft+k.plotWidth,k.plotTop,k.plotTop+k.plotHeight];return B.forEach(ce=>{Oo(ce.plotX)&&Oo(ce.plotY)&&ce.marker.radius&&(E=ce.marker.radius,Q[0]=ne(Q[0],ce.plotX-E),Q[1]=Y(Q[1],ce.plotX+E),Q[2]=ne(Q[2],ce.plotY-E),Q[3]=Y(Q[3],ce.plotY+E))}),Fo(Q.width/Q.height)?Q:null}setVisible(){let E=this;gl.setVisible.apply(E,arguments),E.parentNodeLayout&&E.graph?E.visible?(E.graph.show(),E.parentNode.dataLabel&&E.parentNode.dataLabel.show()):(E.graph.hide(),E.parentNodeLayout.removeElementFromCollection(E.parentNode,E.parentNodeLayout.nodes),E.parentNode.dataLabel&&E.parentNode.dataLabel.hide()):E.layout&&(E.visible?E.layout.addElementsToCollection(E.points,E.layout.nodes):E.points.forEach(k=>{E.layout.removeElementFromCollection(k,E.layout.nodes)}))}translate(){let E,k,B,Y=this.chart,ne=this.data,Q=this.index,ce=this.options.useSimulation;for(let ve of(this.generatePoints(),Oo(Y.allDataPoints)||(Y.allDataPoints=this.accumulateAllPoints(),this.getPointRadius()),ce?B=Y.allDataPoints:(B=this.placeBubbles(Y.allDataPoints),this.options.draggable=!1),B))ve[3]===Q&&(E=ne[ve[4]],k=ac(ve[2],void 0),ce||(E.plotX=ve[0]-Y.plotLeft+Y.diffX,E.plotY=ve[1]-Y.plotTop+Y.diffY),Fo(k)&&(E.marker=da(E.marker,{radius:k,width:2*k,height:2*k}),E.radius=k));ce&&this.deferLayout(),ih(this,"afterTranslate")}}lc.defaultOptions=yl(sc.defaultOptions,{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){let{numberFormatter:W}=this.series.chart,{value:E}=this.point;return Kd(E)?W(E,-1):""},parentNodeFormatter:function(){return this.name||""},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981},stickyTracking:!1}),da(lc.prototype,{pointClass:Qc,axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["value"],pointValKey:"value",requireSorting:!1,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"],initDataLabels:Tf,alignDataLabel:gl.alignDataLabel,indexateNodes:ja,onMouseDown:Zc.onMouseDown,onMouseMove:Zc.onMouseMove,redrawHalo:Zc.redrawHalo,searchPoint:ja}),G().registerSeriesType("packedbubble",lc);let{noop:Jc}=j(),{area:cc,line:rh,scatter:Df}=G().seriesTypes,{extend:Dm,merge:sh}=j();class vl extends Df{getGraphPath(){let E=rh.prototype.getGraphPath.call(this),k=E.length+1;for(;k--;)(k===E.length||E[k][0]==="M")&&k>0&&E.splice(k,0,["Z"]);return this.areaPath=E,E}drawGraph(){this.options.fillColor=this.color,cc.prototype.drawGraph.call(this)}}vl.defaultOptions=sh(Df.defaultOptions,{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0,legendSymbol:"rectangle"}),Dm(vl.prototype,{type:"polygon",drawTracker:rh.prototype.drawTracker,setStackedPoints:Jc}),G().registerSeriesType("polygon",vl);let _l={circular:{gridLineWidth:1,labels:{align:void 0,x:0,y:void 0},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},radial:{gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",padding:5,x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},radialGauge:{endOnTick:!1,gridLineWidth:0,labels:{align:"center",distance:-25,x:0,y:void 0},lineWidth:1,minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickPosition:"inside",tickWidth:2,title:{rotation:0,text:""},zIndex:2}},{defaultOptions:eu}=j(),{composed:Im,noop:Yu}=j(),{addEvent:os,correctFloat:Zu,defined:ha,extend:tu,fireEvent:k0,isObject:Ku,merge:Ga,pick:Rs,pushUnique:Pm,relativeLength:yo,splat:Rm,wrap:Qu}=j();(function(W){function E(){this.autoConnect=this.isCircular&&Rs(this.userMax,this.options.max)===void 0&&Zu(this.endAngleRad-this.startAngleRad)===Zu(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)}function k(){return()=>{if(this.isRadial&&this.tickPositions&&this.options.labels&&this.options.labels.allowOverlap!==!0)return this.tickPositions.map(ft=>this.ticks[ft]?.label).filter(ft=>!!ft)}}function B(){return Yu}function Y(ft,Qt,Ot){let ln=this.pane.center,Jn=ft.value,kn,Ln,qi;return this.isCircular?(ha(Jn)?ft.point&&(ft.point.shapeArgs||{}).start&&(Jn=this.chart.inverted?this.translate(ft.point.rectPlotY,!0):ft.point.x):(Ln=ft.chartX||0,qi=ft.chartY||0,Jn=this.translate(Math.atan2(qi-Ot,Ln-Qt)-this.startAngleRad,!0)),Ln=(kn=this.getPosition(Jn)).x,qi=kn.y):(ha(Jn)||(Ln=ft.chartX,qi=ft.chartY),ha(Ln)&&ha(qi)&&(Ot=ln[1]+this.chart.plotTop,Jn=this.translate(Math.min(Math.sqrt(Math.pow(Ln-Qt,2)+Math.pow(qi-Ot,2)),ln[2]/2)-ln[3]/2,!0))),[Jn,Ln||0,qi||0]}function ne(ft,Qt,Ot){let ln=this.pane.center,Jn=this.chart,kn=this.left||0,Ln=this.top||0,qi,Er=Rs(Qt,ln[2]/2-this.offset),br;return Ot===void 0&&(Ot=this.horiz?0:this.center&&-this.center[3]/2),Ot&&(Er+=Ot),this.isCircular||Qt!==void 0?((br=this.chart.renderer.symbols.arc(kn+ln[0],Ln+ln[1],Er,Er,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[kn+ln[0]],br.yBounds=[Ln+ln[1]-Er]):(qi=this.postTranslate(this.angleRad,Er),br=[["M",this.center[0]+Jn.plotLeft,this.center[1]+Jn.plotTop],["L",qi.x,qi.y]]),br}function Q(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function ce(ft,Qt,Ot){let ln=this.chart,Jn=Xa=>{if(typeof Xa=="string"){let fa=parseInt(Xa,10);return ls.test(Xa)&&(fa=fa*qi/100),fa}return Xa},kn=this.center,Ln=this.startAngleRad,qi=kn[2]/2,Er=Math.min(this.offset,0),br=this.left||0,bo=this.top||0,ls=/%$/,ys=this.isCircular,Qi,Ui,es,Uo,nu,Qs,vs=Rs(Jn(Ot.outerRadius),qi),iu=Jn(Ot.innerRadius),zo=Rs(Jn(Ot.thickness),10);if(this.options.gridLineInterpolation==="polygon")Qs=this.getPlotLinePath({value:ft}).concat(this.getPlotLinePath({value:Qt,reverse:!0}));else{ft=Math.max(ft,this.min),Qt=Math.min(Qt,this.max);let Xa=this.translate(ft),fa=this.translate(Qt);ys||(vs=Xa||0,iu=fa||0),Ot.shape!=="circle"&&ys?(Qi=Ln+(Xa||0),Ui=Ln+(fa||0)):(Qi=-Math.PI/2,Ui=1.5*Math.PI,nu=!0),vs-=Er,zo-=Er,Qs=ln.renderer.symbols.arc(br+kn[0],bo+kn[1],vs,vs,{start:Math.min(Qi,Ui),end:Math.max(Qi,Ui),innerR:Rs(iu,vs-zo),open:nu,borderRadius:Ot.borderRadius}),ys&&(es=(Ui+Qi)/2,Uo=br+kn[0]+kn[2]/2*Math.cos(es),Qs.xBounds=es>-Math.PI/2&&es<Math.PI/2?[Uo,ln.plotWidth]:[0,Uo],Qs.yBounds=[bo+kn[1]+kn[2]/2*Math.sin(es)],Qs.yBounds[0]+=es>-Math.PI&&es<0||es>Math.PI?-10:10)}return Qs}function ve(ft){let Qt=this.pane.center,Ot=this.chart,ln=Ot.inverted,Jn=ft.reverse,kn=this.pane.options.background,Ln=kn?Rm(kn)[0]:{},qi=Ln.innerRadius||"0%",Er=Ln.outerRadius||"100%",br=Qt[0]+Ot.plotLeft,bo=Qt[1]+Ot.plotTop,ls=this.height,ys=ft.isCrosshair,Qi=Qt[3]/2,Ui=ft.value,es,Uo,nu,Qs,vs,iu,zo,Xa,fa,Ho=this.getPosition(Ui),kf=Ho.x,id=Ho.y;if(ys&&(Ui=(Xa=this.getCrosshairPosition(ft,br,bo))[0],kf=Xa[1],id=Xa[2]),this.isCircular)Uo=Math.sqrt(Math.pow(kf-br,2)+Math.pow(id-bo,2)),nu=typeof qi=="string"?yo(qi,1):qi/Uo,Qs=typeof Er=="string"?yo(Er,1):Er/Uo,Qt&&Qi&&(nu<(es=Qi/Uo)&&(nu=es),Qs<es&&(Qs=es)),fa=[["M",br+nu*(kf-br),bo-nu*(bo-id)],["L",kf-(1-Qs)*(kf-br),id+(1-Qs)*(bo-id)]];else if((Ui=this.translate(Ui))&&(Ui<0||Ui>ls)&&(Ui=0),this.options.gridLineInterpolation==="circle")fa=this.getLinePath(0,Ui,Qi);else if(fa=[],Ot[ln?"yAxis":"xAxis"].forEach(hc=>{hc.pane===this.pane&&(vs=hc)}),vs){zo=vs.tickPositions,vs.autoConnect&&(zo=zo.concat([zo[0]])),Jn&&(zo=zo.slice().reverse()),Ui&&(Ui+=Qi);for(let hc=0;hc<zo.length;hc++)iu=vs.getPosition(zo[hc],Ui),fa.push(hc?["L",iu.x,iu.y]:["M",iu.x,iu.y])}return fa}function Ce(ft,Qt){let Ot=this.translate(ft);return this.postTranslate(this.isCircular?Ot:this.angleRad,Rs(this.isCircular?Qt:Ot<0?0:Ot,this.center[2]/2)-this.offset)}function Ee(){let ft=this.center,Qt=this.chart,Ot=this.options.title;return{x:Qt.plotLeft+ft[0]+(Ot.x||0),y:Qt.plotTop+ft[1]-{high:.5,middle:.25,low:0}[Ot.align]*ft[2]+(Ot.y||0)}}function be(ft){ft.beforeSetTickPositions=E,ft.createLabelCollector=k,ft.getCrosshairPosition=Y,ft.getLinePath=ne,ft.getOffset=Q,ft.getPlotBandPath=ce,ft.getPlotLinePath=ve,ft.getPosition=Ce,ft.getTitlePosition=Ee,ft.postTranslate=tn,ft.setAxisSize=ni,ft.setAxisTranslation=bn,ft.setOptions=xi}function We(){let ft=this.chart,Qt=this.options,Ot=ft.angular&&this.isXAxis,ln=this.pane,Jn=ln?.options;if(!Ot&&ln&&(ft.angular||ft.polar)){let kn=2*Math.PI,Ln=(Rs(Jn.startAngle,0)-90)*Math.PI/180,qi=(Rs(Jn.endAngle,Rs(Jn.startAngle,0)+360)-90)*Math.PI/180;this.angleRad=(Qt.angle||0)*Math.PI/180,this.startAngleRad=Ln,this.endAngleRad=qi,this.offset=Qt.offset||0;let Er=(Ln%kn+kn)%kn,br=(qi%kn+kn)%kn;Er>Math.PI&&(Er-=kn),br>Math.PI&&(br-=kn),this.normalizedStartAngleRad=Er,this.normalizedEndAngleRad=br}}function He(ft){this.isRadial&&(ft.align=void 0,ft.preventDefault())}function lt(){if(this.chart?.labelCollectors){let ft=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;ft>=0&&this.chart.labelCollectors.splice(ft,1)}}function St(ft){let Qt,Ot=this.chart,ln=Ot.angular,Jn=Ot.polar,kn=this.isXAxis,Ln=this.coll,qi=ft.userOptions.pane||0,Er=this.pane=Ot.pane&&Ot.pane[qi];if(Ln==="colorAxis"){this.isRadial=!1;return}ln?(ln&&kn?(this.isHidden=!0,this.createLabelCollector=B,this.getOffset=Yu,this.redraw=bi,this.render=bi,this.setScale=Yu,this.setCategories=Yu,this.setTitle=Yu):be(this),Qt=!kn):Jn&&(be(this),Qt=this.horiz),ln||Jn?(this.isRadial=!0,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&Ot.labelCollectors.push(this.labelCollector)):this.isRadial=!1,Er&&Qt&&(Er.axis=this),this.isCircular=Qt}function et(){this.isRadial&&this.beforeSetTickPositions()}function Et(ft){let Qt=this.label;if(!Qt)return;let Ot=this.axis,ln=Qt.getBBox(),Jn=Ot.options.labels,kn=(Ot.translate(this.pos)+Ot.startAngleRad+Math.PI/2)/Math.PI*180%360,Ln=Math.round(kn),qi=ha(Jn.y)?0:-(.3*ln.height),Er=Jn.y,br,bo=20,ls=Jn.align,ys="end",Qi=Ln<0?Ln+360:Ln,Ui=Qi,es=0,Uo=0;Ot.isRadial&&(br=Ot.getPosition(this.pos,Ot.center[2]/2+yo(Rs(Jn.distance,-25),Ot.center[2]/2,-Ot.center[2]/2)),Jn.rotation==="auto"?Qt.attr({rotation:kn}):ha(Er)||(Er=Ot.chart.renderer.fontMetrics(Qt).b-ln.height/2),ha(ls)||(Ot.isCircular?(ln.width>Ot.len*Ot.tickInterval/(Ot.max-Ot.min)&&(bo=0),ls=kn>bo&&kn<180-bo?"left":kn>180+bo&&kn<360-bo?"right":"center"):ls="center",Qt.attr({align:ls})),ls==="auto"&&Ot.tickPositions.length===2&&Ot.isCircular&&(Qi>90&&Qi<180?Qi=180-Qi:Qi>270&&Qi<=360&&(Qi=540-Qi),Ui>180&&Ui<=360&&(Ui=360-Ui),(Ot.pane.options.startAngle===Ln||Ot.pane.options.startAngle===Ln+360||Ot.pane.options.startAngle===Ln-360)&&(ys="start"),ls=Ln>=-90&&Ln<=90||Ln>=-360&&Ln<=-270||Ln>=270&&Ln<=360?ys==="start"?"right":"left":ys==="start"?"left":"right",Ui>70&&Ui<110&&(ls="center"),Qi<15||Qi>=180&&Qi<195?es=.3*ln.height:Qi>=15&&Qi<=35?es=ys==="start"?0:.75*ln.height:Qi>=195&&Qi<=215?es=ys==="start"?.75*ln.height:0:Qi>35&&Qi<=90?es=ys==="start"?-(.25*ln.height):ln.height:Qi>215&&Qi<=270&&(es=ys==="start"?ln.height:-(.25*ln.height)),Ui<15?Uo=ys==="start"?-(.15*ln.height):.15*ln.height:Ui>165&&Ui<=180&&(Uo=ys==="start"?.15*ln.height:-(.15*ln.height)),Qt.attr({align:ls}),Qt.translate(Uo,es+qi)),ft.pos.x=br.x+(Jn.x||0),ft.pos.y=br.y+(Er||0))}function Ze(ft){this.axis.getPosition&&tu(ft.pos,this.axis.getPosition(this.pos))}function Gn({options:ft}){ft.xAxis&&Ga(!0,W.radialDefaultOptions.circular,ft.xAxis),ft.yAxis&&Ga(!0,W.radialDefaultOptions.radialGauge,ft.yAxis)}function tn(ft,Qt){let Ot=this.chart,ln=this.center;return ft=this.startAngleRad+ft,{x:Ot.plotLeft+ln[0]+Math.cos(ft)*Qt,y:Ot.plotTop+ln[1]+Math.sin(ft)*Qt}}function bi(){this.isDirty=!1}function ni(){let ft,Qt;this.constructor.prototype.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),ft=this.center=this.pane.center.slice(),this.isCircular?this.sector=this.endAngleRad-this.startAngleRad:(Qt=this.postTranslate(this.angleRad,ft[3]/2),ft[0]=Qt.x-this.chart.plotLeft,ft[1]=Qt.y-this.chart.plotTop),this.len=this.width=this.height=(ft[2]-ft[3])*Rs(this.sector,1)/2)}function bn(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)}function xi(ft){let{coll:Qt}=this,{angular:Ot,inverted:ln,polar:Jn}=this.chart,kn={};Ot?this.isXAxis||(kn=Ga(eu.yAxis,W.radialDefaultOptions.radialGauge)):Jn&&(kn=this.horiz?Ga(eu.xAxis,W.radialDefaultOptions.circular):Ga(Qt==="xAxis"?eu.xAxis:eu.yAxis,W.radialDefaultOptions.radial)),ln&&Qt==="yAxis"&&(kn.stackLabels=Ku(eu.yAxis,!0)?eu.yAxis.stackLabels:{},kn.reversedStacks=!0);let Ln=this.options=Ga(kn,ft);Ln.plotBands||(Ln.plotBands=[]),k0(this,"afterSetOptions")}function pr(ft,Qt,Ot,ln,Jn,kn,Ln){let qi,Er,br=this.axis;return br.isRadial?["M",Qt,Ot,"L",(qi=br.getPosition(this.pos,br.center[2]/2+ln)).x,qi.y]:ft.call(this,Qt,Ot,ln,Jn,kn,Ln)}W.radialDefaultOptions=Ga(_l),W.compose=function(ft,Qt){return Pm(Im,"Axis.Radial")&&(os(ft,"afterInit",We),os(ft,"autoLabelAlign",He),os(ft,"destroy",lt),os(ft,"init",St),os(ft,"initialAxisTranslation",et),os(Qt,"afterGetLabelPosition",Et),os(Qt,"afterGetPosition",Ze),os(j(),"setOptions",Gn),Qu(Qt.prototype,"getMarkPath",pr)),ft}})(v||(v={}));let km=v,{animObject:$a}=j(),{composed:Bo}=j(),{addEvent:ks,defined:qa,find:oh,isNumber:vo,merge:bl,pick:uc,pushUnique:Lm,relativeLength:Nm,splat:If,uniqueKey:ah,wrap:Mr}=j();function ir(){(this.pane||[]).forEach(W=>{W.render()})}function Om(W){let E=W.args[0].xAxis,k=W.args[0].yAxis,B=W.args[0].chart;E&&k&&(k.gridLineInterpolation==="polygon"?(E.startOnTick=!0,E.endOnTick=!0):E.gridLineInterpolation==="polygon"&&B.inverted&&(k.startOnTick=!0,k.endOnTick=!0))}function Fm(){this.pane||(this.pane=[]),this.options.pane=If(this.options.pane||{}),If(this.userOptions.pane||{}).forEach(W=>{new Sn(W,this)},this)}function lh(W){let E=W.args.marker,k=this.chart.xAxis[0],B=this.chart.yAxis[0],Y=this.chart.inverted,ne=Y?B:k,Q=Y?k:B;if(this.chart.polar){W.preventDefault();let ce=(E.attr?E.attr("start"):E.start)-ne.startAngleRad,ve=E.attr?E.attr("r"):E.r,Ce=(E.attr?E.attr("end"):E.end)-ne.startAngleRad,Ee=E.attr?E.attr("innerR"):E.innerR;W.result.x=ce+ne.pos,W.result.width=Ce-ce,W.result.y=Q.len+Q.pos-ve,W.result.height=ve-Ee}}function Ju(W){let E=this.chart;if(E.polar&&E.hoverPane&&E.hoverPane.axis){W.preventDefault();let k=E.hoverPane.center,B=E.mouseDownX||0,Y=E.mouseDownY||0,ne=W.args.chartY,Q=W.args.chartX,ce=2*Math.PI,ve=E.hoverPane.axis.startAngleRad,Ce=E.hoverPane.axis.endAngleRad,Ee=E.inverted?E.xAxis[0]:E.yAxis[0],be={},We="arc";if(be.x=k[0]+E.plotLeft,be.y=k[1]+E.plotTop,this.zoomHor){let He=ve>0?Ce-ve:Math.abs(ve)+Math.abs(Ce),lt=Math.atan2(Y-E.plotTop-k[1],B-E.plotLeft-k[0])-ve,St=Math.atan2(ne-E.plotTop-k[1],Q-E.plotLeft-k[0])-ve;be.r=k[2]/2,be.innerR=k[3]/2,lt<=0&&(lt+=ce),St<=0&&(St+=ce),St<lt&&(St=[lt,lt=St][0]),He<ce&&ve+St>Ce+(ce-He)/2&&(St=lt,lt=ve<=0?ve:0);let et=be.start=Math.max(lt+ve,ve),Et=be.end=Math.min(St+ve,Ce);if(Ee.options.gridLineInterpolation==="polygon"){let Ze=E.hoverPane.axis,Gn=et-Ze.startAngleRad+Ze.pos,tn=Ee.getPlotLinePath({value:Ee.max}),bi=Ze.toValue(Gn),ni=Ze.toValue(Gn+(Et-et));if(bi<Ze.getExtremes().min){let{min:bn,max:xi}=Ze.getExtremes();bi=xi-(bn-bi)}if(ni<Ze.getExtremes().min){let{min:bn,max:xi}=Ze.getExtremes();ni=xi-(bn-ni)}ni<bi&&(ni=[bi,bi=ni][0]),(tn=w(tn,bi,ni,Ze)).push(["L",k[0]+E.plotLeft,E.plotTop+k[1]]),be.d=tn,We="path"}}if(this.zoomVert){let He=E.inverted?E.xAxis[0]:E.yAxis[0],lt=Math.sqrt(Math.pow(B-E.plotLeft-k[0],2)+Math.pow(Y-E.plotTop-k[1],2)),St=Math.sqrt(Math.pow(Q-E.plotLeft-k[0],2)+Math.pow(ne-E.plotTop-k[1],2));if(St<lt&&(lt=[St,St=lt][0]),St>k[2]/2&&(St=k[2]/2),lt<k[3]/2&&(lt=k[3]/2),this.zoomHor||(be.start=ve,be.end=Ce),be.r=St,be.innerR=lt,He.options.gridLineInterpolation==="polygon"){let et=He.toValue(He.len+He.pos-lt),Et=He.toValue(He.len+He.pos-St);be.d=He.getPlotLinePath({value:Et}).concat(He.getPlotLinePath({value:et,reverse:!0})),We="path"}}if(this.zoomHor&&this.zoomVert&&Ee.options.gridLineInterpolation==="polygon"){let He=E.hoverPane.axis,lt=be.start||0,St=be.end||0,et=lt-He.startAngleRad+He.pos,Et=He.toValue(et),Ze=He.toValue(et+(St-lt));if(be.d instanceof Array){let Gn=be.d.slice(0,be.d.length/2),tn=be.d.slice(be.d.length/2,be.d.length);tn=[...tn].reverse();let bi=E.hoverPane.axis;Gn=w(Gn,Et,Ze,bi),(tn=w(tn,Et,Ze,bi))&&(tn[0][0]="L"),tn=[...tn].reverse(),be.d=Gn.concat(tn),We="path"}}W.attrs=be,W.shapeType=We}}function fr(){let W=this.chart;W.polar&&(this.polar=new ci(this),W.inverted&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0)))}function c(){if(this.chart.polar&&this.xAxis){let{xAxis:W,yAxis:E}=this,k=this.chart;this.kdByAngle=k.tooltip&&k.tooltip.shared,this.kdByAngle||k.inverted?this.searchPoint=m:this.options.findNearestPointBy="xy";let B=this.points,Y=B.length;for(;Y--;)this.is("column")||this.is("columnrange")||this.polar.toXY(B[Y]),k.hasParallelCoordinates||this.yAxis.reversed||(uc(B[Y].y,Number.MIN_VALUE)<E.min||B[Y].x<W.min||B[Y].x>W.max?(B[Y].isNull=!0,B[Y].plotY=NaN):B[Y].isNull=B[Y].isValid&&!B[Y].isValid());this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(ks(this,"afterRender",function(){let ne;k.polar&&this.options.clip!==!1&&(ne=this.yAxis.pane.center,this.clipCircle?this.clipCircle.animate({x:ne[0],y:ne[1],r:ne[2]/2,innerR:ne[3]/2}):this.clipCircle=function(Q,ce,ve,Ce,Ee){let be=ah(),We=Q.createElement("clipPath").attr({id:be}).add(Q.defs),He=Ee?Q.arc(ce,ve,Ce,Ee,0,2*Math.PI).add(We):Q.circle(ce,ve,Ce).add(We);return He.id=be,He.clipPath=We,He}(k.renderer,ne[0],ne[1],ne[2]/2,ne[3]/2),this.group.clip(this.clipCircle),this.setClip=j().noop)})))}}function m(W){let E=this.chart,k=this.xAxis,B=this.yAxis,Y=k.pane&&k.pane.center,ne=W.chartX-(Y&&Y[0]||0)-E.plotLeft,Q=W.chartY-(Y&&Y[1]||0)-E.plotTop,ce=E.inverted?{clientX:W.chartX-B.pos,plotY:W.chartY-k.pos}:{clientX:180+-180/Math.PI*Math.atan2(ne,Q)};return this.searchKDTree(ce)}function w(W,E,k,B){let Y=B.tickInterval,ne=B.tickPositions,Q=oh(ne,ve=>ve>=k),ce=oh([...ne].reverse(),ve=>ve<=E);return qa(Q)||(Q=ne[ne.length-1]),qa(ce)||(ce=ne[0],Q+=Y,W[0][0]="L",W.unshift(W[W.length-3])),(W=W.slice(ne.indexOf(ce),ne.indexOf(Q)+1))[0][0]="M",W}function P(W,E){return oh(this.pane||[],k=>k.options.id===E)||W.call(this,E)}function z(W,E,k,B,Y,ne){let Q,ce,ve,Ce=this.chart,Ee=uc(B.inside,!!this.options.stacking);if(Ce.polar){if(Q=E.rectPlotX/Math.PI*180,Ce.inverted)this.forceDL=Ce.isInsidePlot(E.plotX,E.plotY),Ee&&E.shapeArgs?(ce=E.shapeArgs,Y=bl(Y,{x:(ve=this.yAxis.postTranslate(((ce.start||0)+(ce.end||0))/2-this.xAxis.startAngleRad,E.barX+E.pointWidth/2)).x-Ce.plotLeft,y:ve.y-Ce.plotTop})):E.tooltipPos&&(Y=bl(Y,{x:E.tooltipPos[0],y:E.tooltipPos[1]})),B.align=uc(B.align,"center"),B.verticalAlign=uc(B.verticalAlign,"middle");else{var be;(be=B).align===null&&(be.align=Q>20&&Q<160?"left":Q>200&&Q<340?"right":"center"),be.verticalAlign===null&&(be.verticalAlign=Q<45||Q>315?"bottom":Q>135&&Q<225?"top":"middle"),B=be}K().prototype.alignDataLabel.call(this,E,k,B,Y,ne),this.isRadialBar&&E.shapeArgs&&E.shapeArgs.start===E.shapeArgs.end?k.hide():k.show()}else W.call(this,E,k,B,Y,ne)}function ee(){let W=this.options,E=W.stacking,k=this.chart,B=this.xAxis,Y=this.yAxis,ne=Y.reversed,Q=Y.center,ce=B.startAngleRad,ve=B.endAngleRad-ce,Ce=W.threshold,Ee=0,be,We,He,lt,St,et=0,Et=0,Ze,Gn,tn,bi,ni,bn,xi,pr;if(B.isRadial)for(He=(be=this.points).length,lt=Y.translate(Y.min),St=Y.translate(Y.max),Ce=W.threshold||0,k.inverted&&vo(Ce)&&qa(Ee=Y.translate(Ce))&&(Ee<0?Ee=0:Ee>ve&&(Ee=ve),this.translatedThreshold=Ee+ce);He--;){if(bn=(We=be[He]).barX,Gn=We.x,tn=We.y,We.shapeType="arc",k.inverted){We.plotY=Y.translate(tn),E&&Y.stacking?(ni=Y.stacking.stacks[(tn<0?"-":"")+this.stackKey],this.visible&&ni&&ni[Gn]&&!We.isNull&&(bi=ni[Gn].points[this.getStackIndicator(void 0,Gn,this.index).key],et=Y.translate(bi[0]),Et=Y.translate(bi[1]),qa(et)&&(et=j().clamp(et,0,ve)))):(et=Ee,Et=We.plotY),et>Et&&(Et=[et,et=Et][0]),ne?Et>lt?Et=lt:et<St?et=St:(et>lt||Et<St)&&(et=Et=ve):et<lt?et=lt:Et>St?Et=St:(Et<lt||et>St)&&(et=Et=0),Y.min>Y.max&&(et=Et=ne?ve:0),et+=ce,Et+=ce,Q&&(We.barX=bn+=Q[3]/2),xi=Math.max(bn,0),pr=Math.max(bn+We.pointWidth,0);let ft=W.borderRadius,Qt=Nm((typeof ft=="object"?ft.radius:ft)||0,pr-xi);We.shapeArgs={x:Q[0],y:Q[1],r:pr,innerR:xi,start:et,end:Et,borderRadius:Qt},We.opacity=et===Et?0:void 0,We.plotY=(qa(this.translatedThreshold)&&(et<this.translatedThreshold?et:Et))-ce}else et=bn+ce,We.shapeArgs=this.polar.arc(We.yBottom,We.plotY,et,et+We.pointWidth),We.shapeArgs.borderRadius=0;this.polar.toXY(We),k.inverted?(Ze=Y.postTranslate(We.rectPlotY,bn+We.pointWidth/2),We.tooltipPos=[Ze.x-k.plotLeft,Ze.y-k.plotTop]):We.tooltipPos=[We.plotX,We.plotY],Q&&(We.ttBelow=We.plotY>Q[1])}}function _e(W,E){let k,B,Y=this;if(this.chart.polar){E=E||this.points;for(let Q=0;Q<E.length;Q++)if(!E[Q].isNull){k=Q;break}this.options.connectEnds!==!1&&k!==void 0&&(this.connectEnds=!0,E.splice(E.length,0,E[k]),B=!0),E.forEach(Q=>{Q.polarPlotY===void 0&&Y.polar.toXY(Q)})}let ne=W.apply(this,[].slice.call(arguments,1));return B&&E.pop(),ne}function Ve(W,E){let k=this.chart,B={xAxis:[],yAxis:[]};return k.polar?k.axes.forEach(Y=>{if(Y.coll==="colorAxis")return;let ne=Y.isXAxis,Q=Y.center,ce=E.chartX-Q[0]-k.plotLeft,ve=E.chartY-Q[1]-k.plotTop;B[ne?"xAxis":"yAxis"].push({axis:Y,value:Y.translate(ne?Math.PI-Math.atan2(ce,ve):Math.sqrt(Math.pow(ce,2)+Math.pow(ve,2)),!0)})}):B=W.call(this,E),B}function Oe(W,E){this.chart.polar||W.call(this,E)}function ht(W,E){let k=this,B=this.chart,Y=this.group,ne=this.markerGroup,Q=this.xAxis&&this.xAxis.center,ce=B.plotLeft,ve=B.plotTop,Ce=this.options.animation,Ee,be,We,He,lt,St;B.polar?k.isRadialBar?E||(k.startAngleRad=uc(k.translatedThreshold,k.xAxis.startAngleRad),j().seriesTypes.pie.prototype.animate.call(k,E)):(Ce=$a(Ce),k.is("column")?E||(be=Q[3]/2,k.points.forEach(et=>{We=et.graphic,lt=(He=et.shapeArgs)&&He.r,St=He&&He.innerR,We&&He&&(We.attr({r:be,innerR:be}),We.animate({r:lt,innerR:St},k.options.animation))})):E?(Ee={translateX:Q[0]+ce,translateY:Q[1]+ve,scaleX:.001,scaleY:.001},Y.attr(Ee),ne&&ne.attr(Ee)):(Ee={translateX:ce,translateY:ve,scaleX:1,scaleY:1},Y.animate(Ee,Ce),ne&&ne.animate(Ee,Ce))):W.call(this,E)}function Zt(W,E,k,B){let Y,ne;if(this.chart.polar)if(B){let Q=(ne=function ve(Ce,Ee,be,We){let He,lt,St,et,Et,Ze,Gn=+!!We,tn=(He=Ee>=0&&Ee<=Ce.length-1?Ee:Ee<0?Ce.length-1+Ee:0)-1<0?Ce.length-(1+Gn):He-1,bi=He+1>Ce.length-1?Gn:He+1,ni=Ce[tn],bn=Ce[bi],xi=ni.plotX,pr=ni.plotY,ft=bn.plotX,Qt=bn.plotY,Ot=Ce[He].plotX,ln=Ce[He].plotY;lt=(1.5*Ot+xi)/2.5,St=(1.5*ln+pr)/2.5,et=(1.5*Ot+ft)/2.5,Et=(1.5*ln+Qt)/2.5;let Jn=Math.sqrt(Math.pow(lt-Ot,2)+Math.pow(St-ln,2)),kn=Math.sqrt(Math.pow(et-Ot,2)+Math.pow(Et-ln,2)),Ln=Math.atan2(St-ln,lt-Ot);Ze=Math.PI/2+(Ln+Math.atan2(Et-ln,et-Ot))/2,Math.abs(Ln-Ze)>Math.PI/2&&(Ze-=Math.PI),lt=Ot+Math.cos(Ze)*Jn,St=ln+Math.sin(Ze)*Jn;let qi={rightContX:et=Ot+Math.cos(Math.PI+Ze)*kn,rightContY:Et=ln+Math.sin(Math.PI+Ze)*kn,leftContX:lt,leftContY:St,plotX:Ot,plotY:ln};return be&&(qi.prevPointCont=ve(Ce,tn,!1,We)),qi}(E,B,!0,this.connectEnds)).prevPointCont&&ne.prevPointCont.rightContX,ce=ne.prevPointCont&&ne.prevPointCont.rightContY;Y=["C",vo(Q)?Q:ne.plotX,vo(ce)?ce:ne.plotY,vo(ne.leftContX)?ne.leftContX:ne.plotX,vo(ne.leftContY)?ne.leftContY:ne.plotY,ne.plotX,ne.plotY]}else Y=["M",k.plotX,k.plotY];else Y=W.call(this,E,k,B);return Y}function On(W,E,k=this.plotY){if(!this.destroyed){let{plotX:B,series:Y}=this,{chart:ne}=Y;return ne.polar&&vo(B)&&vo(k)?[B+(E?ne.plotLeft:0),k+(E?ne.plotTop:0)]:W.call(this,E,k)}}class ci{static compose(E,k,B,Y,ne,Q,ce,ve,Ce,Ee){if(Sn.compose(k,B),km.compose(E,ne),Lm(Bo,"Polar")){let be=k.prototype,We=Q.prototype,He=B.prototype,lt=Y.prototype;if(ks(k,"afterDrawChartBox",ir),ks(k,"createAxes",Fm),ks(k,"init",Om),Mr(be,"get",P),Mr(He,"getCoordinates",Ve),Mr(He,"pinch",Oe),ks(B,"getSelectionMarkerAttrs",Ju),ks(B,"getSelectionBox",lh),ks(Y,"afterInit",fr),ks(Y,"afterTranslate",c,{order:2}),ks(Y,"afterColumnTranslate",ee,{order:4}),Mr(lt,"animate",ht),Mr(We,"pos",On),ve){let St=ve.prototype;Mr(St,"alignDataLabel",z),Mr(St,"animate",ht)}if(Ce&&Mr(Ce.prototype,"getGraphPath",_e),Ee){let St=Ee.prototype;Mr(St,"getPointSpline",Zt),ce&&(ce.prototype.getPointSpline=St.getPointSpline)}}}constructor(E){this.series=E}arc(E,k,B,Y){let ne=this.series,Q=ne.xAxis.center,ce=ne.yAxis.len,ve=Q[3]/2,Ce=ce-k+ve,Ee=ce-uc(E,ce)+ve;return ne.yAxis.reversed&&(Ce<0&&(Ce=ve),Ee<0&&(Ee=ve)),{x:Q[0],y:Q[1],r:Ce,innerR:Ee,start:B,end:Y}}toXY(E){let k=this.series,B=k.chart,Y=k.xAxis,ne=k.yAxis,Q=E.plotX,ce=B.inverted,ve=E.y,Ce=E.plotY,Ee=ce?Q:ne.len-Ce,be;if(ce&&k&&!k.isRadialBar&&(E.plotY=Ce=vo(ve)?ne.translate(ve):0),E.rectPlotX=Q,E.rectPlotY=Ce,ne.center&&(Ee+=ne.center[3]/2),vo(Ce)){let We=ce?ne.postTranslate(Ce,Ee):Y.postTranslate(Q,Ee);E.plotX=E.polarPlotX=We.x-B.plotLeft,E.plotY=E.polarPlotY=We.y-B.plotTop}k.kdByAngle?((be=(Q/Math.PI*180+Y.pane.options.startAngle)%360)<0&&(be+=360),E.clientX=be):E.clientX=E.plotX}}var ms=O(184),Pr=O.n(ms);let{composed:_o}=j(),{addEvent:as,objectEach:dc,pushUnique:ch}=j();(function(W){function E(){let Q=this.waterfall?.stacks;Q&&(Q.changed=!1,delete Q.alreadyChanged)}function k(){this.options.stackLabels?.enabled&&this.waterfall?.stacks&&this.waterfall.renderStackTotals()}function B(){this.waterfall||(this.waterfall=new ne(this))}function Y(){let Q=this.axes;for(let ce of this.series)if(ce.options.stacking){for(let ve of Q)!ve.isXAxis&&ve.waterfall&&(ve.waterfall.stacks.changed=!0);break}}W.compose=function(Q,ce){ch(_o,"Axis.Waterfall")&&(as(Q,"init",B),as(Q,"afterBuildStacks",E),as(Q,"afterRender",k),as(ce,"beforeRedraw",Y))};class ne{constructor(ce){this.axis=ce,this.stacks={changed:!1}}renderStackTotals(){let ce=this.axis,ve=ce.waterfall?.stacks,Ce=ce.stacking?.stackTotalGroup,Ee=new(Pr())(ce,ce.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=Ee,Ce&&dc(ve,be=>{dc(be,(We,He)=>{Ee.total=We.stackTotal,Ee.x=+He,We.label&&(Ee.label=We.label),Pr().prototype.render.call(Ee,Ce),We.label=Ee.label,delete Ee.label})}),Ee.total=null}}W.Composition=ne})(x||(x={}));let L0=x,{isNumber:Bm}=j();class Vm extends vt().prototype.pointClass{getClassName(){let E=Ba().prototype.getClassName.call(this);return this.isSum?E+=" highcharts-sum":this.isIntermediateSum&&(E+=" highcharts-intermediate-sum"),E}isValid(){return Bm(this.y)||this.isSum||!!this.isIntermediateSum}}let{column:uh,line:Um}=G().seriesTypes,{addEvent:Nr,arrayMax:ed,arrayMin:Pf,correctFloat:Rf,crisp:dh,extend:td,isNumber:xl,merge:Vo,objectEach:Wb,pick:ZE}=j();function zm(W,E){return Object.hasOwnProperty.call(W,E)}class nd extends uh{generatePoints(){uh.prototype.generatePoints.apply(this);let E=this.getColumn("y",!0);for(let k=0,B=this.points.length;k<B;k++){let Y=this.points[k],ne=E[k];xl(ne)&&(Y.isIntermediateSum||Y.isSum)&&(Y.y=Rf(ne))}}processData(E){let k,B,Y,ne,Q,ce,ve=this.options,Ce=this.getColumn("y"),Ee=ve.data,be=Ce.length,We=ve.threshold||0;Y=B=ne=Q=0;for(let He=0;He<be;He++)ce=Ce[He],k=Ee?.[He]||{},ce==="sum"||k.isSum?Ce[He]=Rf(Y):ce==="intermediateSum"||k.isIntermediateSum?(Ce[He]=Rf(B),B=0):(Y+=ce,B+=ce),ne=Math.min(Y,ne),Q=Math.max(Y,Q);super.processData.call(this,E),ve.stacking||(this.dataMin=ne+We,this.dataMax=Q)}toYData(E){return E.isSum?"sum":E.isIntermediateSum?"intermediateSum":E.y}pointAttribs(E,k){let B=this.options.upColor;B&&!E.options.color&&xl(E.y)&&(E.color=E.y>0?B:void 0);let Y=uh.prototype.pointAttribs.call(this,E,k);return delete Y.dashstyle,Y}getGraphPath(){return[["M",0,0]]}getCrispPath(){let E=this.data.filter(Ce=>xl(Ce.y)),k=this.yAxis,B=E.length,Y=this.graph?.strokeWidth()||0,ne=this.xAxis.reversed,Q=this.yAxis.reversed,ce=this.options.stacking,ve=[];for(let Ce=1;Ce<B;Ce++){if(!(this.options.connectNulls||xl(this.data[E[Ce].index-1].y)))continue;let Ee=E[Ce].box,be=E[Ce-1],We=be.y||0,He=E[Ce-1].box;if(!Ee||!He)continue;let lt=k.waterfall?.stacks[this.stackKey],St=We>0?-He.height:0;if(lt&&He&&Ee){let et,Et=lt[Ce-1];if(ce){let Ze=Et.connectorThreshold;et=dh(k.translate(Ze,!1,!0,!1,!0)+(Q?St:0),Y)}else et=dh(He.y+(be.minPointLengthOffset||0),Y);ve.push(["M",(He.x||0)+(ne?0:He.width||0),et],["L",(Ee.x||0)+(ne&&Ee.width||0),et])}if(He&&ve.length&&(!ce&&We<0&&!Q||We>0&&Q)){let et=ve[ve.length-2];et&&typeof et[2]=="number"&&(et[2]+=He.height||0);let Et=ve[ve.length-1];Et&&typeof Et[2]=="number"&&(Et[2]+=He.height||0)}}return ve}drawGraph(){Um.prototype.drawGraph.call(this),this.graph&&this.graph.attr({d:this.getCrispPath()})}setStackedPoints(E){let k=this.options,B=E.waterfall?.stacks,Y=k.threshold||0,ne=this.stackKey,Q=this.getColumn("x"),ce=this.getColumn("y"),ve=Q.length,Ce=Y,Ee=Ce,be,We=0,He=0,lt=0,St,et,Et,Ze,Gn,tn,bi,ni,bn=(xi,pr,ft,Qt)=>{if(be){if(St)for(;ft<St;ft++)be.stackState[ft]+=Qt;else be.stackState[0]=xi,St=be.stackState.length;be.stackState.push(be.stackState[St-1]+pr)}};if(E.stacking&&B&&this.reserveSpace()){ni=B.changed,(bi=B.alreadyChanged)&&0>bi.indexOf(ne)&&(ni=!0),B[ne]||(B[ne]={});let xi=B[ne];if(xi)for(let pr=0;pr<ve;pr++)(!xi[tn=Q[pr]]||ni)&&(xi[tn]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:ni&&xi[tn]?xi[tn].label:void 0}),be=xi[tn],(Gn=ce[pr])>=0?be.posTotal+=Gn:be.negTotal+=Gn,Ze=k.data[pr],et=be.absolutePos=be.posTotal,Et=be.absoluteNeg=be.negTotal,be.stackTotal=et+Et,St=be.stackState.length,Ze?.isIntermediateSum?(bn(lt,He,0,lt),lt=He,He=Y,Ce^=Ee,Ee^=Ce,Ce^=Ee):Ze?.isSum?(bn(Y,We,St,0),Ce=Y):(bn(Ce,Gn,0,We),Ze&&(We+=Gn,He+=Gn)),be.stateIndex++,be.threshold=Ce,Ce+=be.stackTotal;B.changed=!1,B.alreadyChanged||(B.alreadyChanged=[]),B.alreadyChanged.push(ne)}}getExtremes(){let E,k,B=this.options.stacking,Y=this.yAxis,ne=Y.waterfall?.stacks;return B&&ne?(E=this.stackedYNeg=[],k=this.stackedYPos=[],B==="overlap"?Wb(ne[this.stackKey],function(Q){E.push(Pf(Q.stackState)),k.push(ed(Q.stackState))}):Wb(ne[this.stackKey],function(Q){E.push(Q.negTotal+Q.threshold),k.push(Q.posTotal+Q.threshold)}),{dataMin:Pf(E),dataMax:ed(k)}):{dataMin:this.dataMin,dataMax:this.dataMax}}}nd.defaultOptions=Vo(uh.defaultOptions,{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}),nd.compose=L0.compose,td(nd.prototype,{pointValKey:"y",showLine:!0,pointClass:Vm}),Nr(nd,"afterColumnTranslate",function(){let{options:W,points:E,yAxis:k}=this,B=ZE(W.minPointLength,5),Y=B/2,ne=W.threshold||0,Q=W.stacking,ce=k.waterfall?.stacks[this.stackKey],ve=this.getColumn("y",!0),Ce=ne,Ee=ne,be,We,He,lt;for(let St=0;St<E.length;St++){let et=E[St],Et=ve[St],Ze=td({x:0,y:0,width:0,height:0},et.shapeArgs||{});et.box=Ze;let Gn=[0,Et],tn=et.y||0;if(Q){if(ce){let bn=ce[St];Q==="overlap"?(We=bn.stackState[bn.stateIndex--],be=tn>=0?We:We-tn,zm(bn,"absolutePos")&&delete bn.absolutePos,zm(bn,"absoluteNeg")&&delete bn.absoluteNeg):(tn>=0?(We=bn.threshold+bn.posTotal,bn.posTotal-=tn,be=We):(We=bn.threshold+bn.negTotal,bn.negTotal-=tn,be=We-tn),!bn.posTotal&&xl(bn.absolutePos)&&zm(bn,"absolutePos")&&(bn.posTotal=bn.absolutePos,delete bn.absolutePos),!bn.negTotal&&xl(bn.absoluteNeg)&&zm(bn,"absoluteNeg")&&(bn.negTotal=bn.absoluteNeg,delete bn.absoluteNeg)),et.isSum||(bn.connectorThreshold=bn.threshold+bn.stackTotal),k.reversed?(He=tn>=0?be-tn:be+tn,lt=be):(He=be,lt=be-tn),et.below=He<=ne,Ze.y=k.translate(He,!1,!0,!1,!0),Ze.height=Math.abs(Ze.y-k.translate(lt,!1,!0,!1,!0));let xi=k.waterfall?.dummyStackItem;xi&&(xi.x=St,xi.label=ce[St].label,xi.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[St],this.stackedYPos[St],void 0,this.xAxis))}}else be=Math.max(Ee,Ee+tn)+Gn[0],Ze.y=k.translate(be,!1,!0,!1,!0),et.isSum?(Ze.y=k.translate(Gn[1],!1,!0,!1,!0),Ze.height=Math.min(k.translate(Gn[0],!1,!0,!1,!0),k.len)-Ze.y,et.below=Gn[1]<=ne):et.isIntermediateSum?(tn>=0?(He=Gn[1]+Ce,lt=Ce):(He=Ce,lt=Gn[1]+Ce),k.reversed&&(He^=lt,lt^=He,He^=lt),Ze.y=k.translate(He,!1,!0,!1,!0),Ze.height=Math.abs(Ze.y-Math.min(k.translate(lt,!1,!0,!1,!0),k.len)),Ce+=Gn[1],et.below=He<=ne):(Ze.height=Et>0?k.translate(Ee,!1,!0,!1,!0)-Ze.y:k.translate(Ee,!1,!0,!1,!0)-k.translate(Ee-Et,!1,!0,!1,!0),et.below=(Ee+=Et)<ne),Ze.height<0&&(Ze.y+=Ze.height,Ze.height*=-1);et.plotY=Ze.y,et.yBottom=Ze.y+Ze.height,Ze.height<=B&&!et.isNull?(Ze.height=B,Ze.y-=Y,et.yBottom=Ze.y+Ze.height,et.plotY=Ze.y,tn<0?et.minPointLengthOffset=-Y:et.minPointLengthOffset=Y):(et.isNull&&(Ze.width=0),et.minPointLengthOffset=0);let bi=et.plotY+(et.negative?Ze.height:0);et.below&&(et.plotY+=Ze.height),et.tooltipPos&&(this.chart.inverted?et.tooltipPos[0]=k.len-bi:et.tooltipPos[1]=bi),et.isInside=this.isPointInside(et);let ni=dh(et.yBottom,this.borderWidth);Ze.y=dh(Ze.y,this.borderWidth),Ze.height=ni-Ze.y,Vo(!0,et.shapeArgs,Ze)}},{order:2}),G().registerSeriesType("waterfall",nd);let gs=j();gs.RadialAxis=km,li.compose(gs.Axis,gs.Chart,gs.Legend),lc.compose(gs.Axis,gs.Chart,gs.Legend),Sn.compose(gs.Chart,gs.Pointer),ci.compose(gs.Axis,gs.Chart,gs.Pointer,gs.Series,gs.Tick,gs.Point,G().seriesTypes.areasplinerange,G().seriesTypes.column,G().seriesTypes.line,G().seriesTypes.spline),nd.compose(gs.Axis,gs.Chart);let KE=gs;return N.default})())});function OT(n,t){return Object.is(n,t)}var Os=null,mx=!1,FT=1,Za=Symbol("SIGNAL");function pi(n){let t=Os;return Os=n,t}function BT(){return Os}var qm={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xm(n){if(mx)throw new Error("");if(Os===null)return;Os.consumerOnSignalRead(n);let t=Os.nextProducerIndex++;if(bx(Os),t<Os.producerNode.length&&Os.producerNode[t]!==n&&q0(Os)){let e=Os.producerNode[t];_x(e,Os.producerIndexOfThis[t])}Os.producerNode[t]!==n&&(Os.producerNode[t]=n,Os.producerIndexOfThis[t]=q0(Os)?SO(n,Os,t):0),Os.producerLastReadVersion[t]=n.version}function CO(){FT++}function VT(n){if(!(q0(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===FT)){if(!n.producerMustRecompute(n)&&!vx(n)){NT(n);return}n.producerRecomputeValue(n),NT(n)}}function UT(n){if(n.liveConsumerNode===void 0)return;let t=mx;mx=!0;try{for(let e of n.liveConsumerNode)e.dirty||WG(e)}finally{mx=t}}function zT(){return Os?.consumerAllowSignalWrites!==!1}function WG(n){n.dirty=!0,UT(n),n.consumerMarkedDirty?.(n)}function NT(n){n.dirty=!1,n.lastCleanEpoch=FT}function X0(n){return n&&(n.nextProducerIndex=0),pi(n)}function yx(n,t){if(pi(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(q0(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)_x(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function vx(n){bx(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(VT(e),i!==e.version))return!0}return!1}function Y0(n){if(bx(n),q0(n))for(let t=0;t<n.producerNode.length;t++)_x(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function SO(n,t,e){if(MO(n),n.liveConsumerNode.length===0&&EO(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=SO(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function _x(n,t){if(MO(n),n.liveConsumerNode.length===1&&EO(n))for(let i=0;i<n.producerNode.length;i++)_x(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];bx(r),r.producerIndexOfThis[i]=t}}function q0(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function bx(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function MO(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function EO(n){return n.producerNode!==void 0}function HT(n,t){let e=Object.create(GG);e.computation=n,t!==void 0&&(e.equal=t);let i=()=>{if(VT(e),Xm(e),e.value===gx)throw e.error;return e.value};return i[Za]=e,i}var kT=Symbol("UNSET"),LT=Symbol("COMPUTING"),gx=Symbol("ERRORED"),GG=Mn(Ke({},qm),{value:kT,dirty:!0,error:null,equal:OT,kind:"computed",producerMustRecompute(n){return n.value===kT||n.value===LT},producerRecomputeValue(n){if(n.value===LT)throw new Error("Detected cycle in computations.");let t=n.value;n.value=LT;let e=X0(n),i,r=!1;try{i=n.computation(),pi(null),r=t!==kT&&t!==gx&&i!==gx&&n.equal(t,i)}catch(s){i=gx,n.error=s}finally{yx(n,e)}if(r){n.value=t;return}n.value=i,n.version++}});function $G(){throw new Error}var TO=$G;function AO(n){TO(n)}function jT(n){TO=n}var qG=null;function WT(n,t){let e=Object.create(xx);e.value=n,t!==void 0&&(e.equal=t);let i=()=>(Xm(e),e.value);return i[Za]=e,i}function Ym(n,t){zT()||AO(n),n.equal(n.value,t)||(n.value=t,XG(n))}function GT(n,t){zT()||AO(n),Ym(n,t(n.value))}var xx=Mn(Ke({},qm),{equal:OT,value:void 0,kind:"signal"});function XG(n){n.version++,CO(),UT(n),qG?.()}function $T(n){let t=pi(null);try{return n()}finally{pi(t)}}var qT;function Z0(){return qT}function sd(n){let t=qT;return qT=n,t}var wx=Symbol("NotFound");function zn(n){return typeof n=="function"}function Zm(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Cx=Zm(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Vf(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var ts=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let s of e)s.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(zn(i))try{i()}catch(s){t=s instanceof Cx?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{DO(s)}catch(o){t=t??[],o instanceof Cx?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Cx(t)}}add(t){var e;if(t&&t!==this)if(this.closed)DO(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Vf(e,t)}remove(t){let{_finalizers:e}=this;e&&Vf(e,t),t instanceof n&&t._removeParent(this)}};ts.EMPTY=(()=>{let n=new ts;return n.closed=!0,n})();var XT=ts.EMPTY;function Sx(n){return n instanceof ts||n&&"closed"in n&&zn(n.remove)&&zn(n.add)&&zn(n.unsubscribe)}function DO(n){zn(n)?n():n.unsubscribe()}var yc={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Km={setTimeout(n,t,...e){let{delegate:i}=Km;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=Km;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Mx(n){Km.setTimeout(()=>{let{onUnhandledError:t}=yc;if(t)t(n);else throw n})}function Uf(){}var IO=YT("C",void 0,void 0);function PO(n){return YT("E",void 0,n)}function RO(n){return YT("N",n,void 0)}function YT(n,t,e){return{kind:n,value:t,error:e}}var zf=null;function Qm(n){if(yc.useDeprecatedSynchronousErrorHandling){let t=!zf;if(t&&(zf={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=zf;if(zf=null,e)throw i}}else n()}function kO(n){yc.useDeprecatedSynchronousErrorHandling&&zf&&(zf.errorThrown=!0,zf.error=n)}var Hf=class extends ts{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Sx(t)&&t.add(this)):this.destination=e7}static create(t,e,i){return new Jm(t,e,i)}next(t){this.isStopped?KT(RO(t),this):this._next(t)}error(t){this.isStopped?KT(PO(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?KT(IO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},QG=Function.prototype.bind;function ZT(n,t){return QG.call(n,t)}var QT=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){Ex(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){Ex(i)}else Ex(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Ex(e)}}},Jm=class extends Hf{constructor(t,e,i){super();let r;if(zn(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&yc.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&ZT(t.next,s),error:t.error&&ZT(t.error,s),complete:t.complete&&ZT(t.complete,s)}):r=t}this.destination=new QT(r)}};function Ex(n){yc.useDeprecatedSynchronousErrorHandling?kO(n):Mx(n)}function JG(n){throw n}function KT(n,t){let{onStoppedNotification:e}=yc;e&&Km.setTimeout(()=>e(n,t))}var e7={closed:!0,next:Uf,error:JG,complete:Uf};var eg=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ka(n){return n}function JT(...n){return eA(n)}function eA(n){return n.length===0?Ka:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var tr=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let s=n7(e)?e:new Jm(e,i,r);return Qm(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=LO(i),new i((r,s)=>{let o=new Jm({next:a=>{try{e(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[eg](){return this}pipe(...e){return eA(e)(this)}toPromise(e){return e=LO(e),new e((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=t=>new n(t),n})();function LO(n){var t;return(t=n??yc.Promise)!==null&&t!==void 0?t:Promise}function t7(n){return n&&zn(n.next)&&zn(n.error)&&zn(n.complete)}function n7(n){return n&&n instanceof Hf||t7(n)&&Sx(n)}function tA(n){return zn(n?.lift)}function Hi(n){return t=>{if(tA(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Li(n,t,e,i,r){return new nA(n,t,e,i,r)}var nA=class extends Hf{constructor(t,e,i,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(u){t.error(u)}}:super._next,this._error=r?function(a){try{r(a)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function tg(){return Hi((n,t)=>{let e=null;n._refCount++;let i=Li(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var ng=class extends tr{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,tA(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ts;let e=this.getSubject();t.add(this.source.subscribe(Li(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ts.EMPTY)}return t}refCount(){return tg()(this)}};var NO=Zm(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Xr=(()=>{class n extends tr{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new Tx(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new NO}next(e){Qm(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Qm(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Qm(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:s}=this;return i||r?XT:(this.currentObservers=null,s.push(e),new ts(()=>{this.currentObservers=null,Vf(s,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){let e=new tr;return e.source=this,e}}return n.create=(t,e)=>new Tx(t,e),n})(),Tx=class extends Xr{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:XT}};var bs=class extends Xr{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var iA={now(){return(iA.delegate||Date).now()},delegate:void 0};var Ax=class extends ts{constructor(t,e){super()}schedule(t,e=0){return this}};var K0={setInterval(n,t,...e){let{delegate:i}=K0;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=K0;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var Dx=class extends Ax{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,i=0){return K0.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&K0.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Vf(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var ig=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};ig.now=iA.now;var Ix=class extends ig{constructor(t,e=ig.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var Q0=new Ix(Dx),OO=Q0;var ma=new tr(n=>n.complete());function Px(n){return n&&zn(n.schedule)}function FO(n){return n[n.length-1]}function Rx(n){return zn(FO(n))?n.pop():void 0}function bh(n){return Px(FO(n))?n.pop():void 0}function VO(n,t,e,i){var r=arguments.length,s=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(t,e,s):o(t,e))||s);return r>3&&s&&Object.defineProperty(t,e,s),s}function UO(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(p){try{h(i.next(p))}catch(v){o(v)}}function u(p){try{h(i.throw(p))}catch(v){o(v)}}function h(p){p.done?s(p.value):r(p.value).then(a,u)}h((i=i.apply(n,t||[])).next())})}function BO(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function jf(n){return this instanceof jf?(this.v=n,this):new jf(n)}function zO(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(S){return function(D){return Promise.resolve(D).then(S,v)}}function a(S,D){i[S]&&(r[S]=function(O){return new Promise(function(N,T){s.push([S,O,N,T])>1||u(S,O)})},D&&(r[S]=D(r[S])))}function u(S,D){try{h(i[S](D))}catch(O){x(s[0][3],O)}}function h(S){S.value instanceof jf?Promise.resolve(S.value.v).then(p,v):x(s[0][2],S)}function p(S){u("next",S)}function v(S){u("throw",S)}function x(S,D){S(D),s.shift(),s.length&&u(s[0][0],s[0][1])}}function HO(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof BO=="function"?BO(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),r(a,u,o.done,o.value)})}}function r(s,o,a,u){Promise.resolve(u).then(function(h){s({value:h,done:a})},o)}}var rg=n=>n&&typeof n.length=="number"&&typeof n!="function";function kx(n){return zn(n?.then)}function Lx(n){return zn(n[eg])}function Nx(n){return Symbol.asyncIterator&&zn(n?.[Symbol.asyncIterator])}function Ox(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function i7(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fx=i7();function Bx(n){return zn(n?.[Fx])}function Vx(n){return zO(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield jf(e.read());if(r)return yield jf(void 0);yield yield jf(i)}}finally{e.releaseLock()}})}function Ux(n){return zn(n?.getReader)}function Vr(n){if(n instanceof tr)return n;if(n!=null){if(Lx(n))return r7(n);if(rg(n))return s7(n);if(kx(n))return o7(n);if(Nx(n))return jO(n);if(Bx(n))return a7(n);if(Ux(n))return l7(n)}throw Ox(n)}function r7(n){return new tr(t=>{let e=n[eg]();if(zn(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function s7(n){return new tr(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function o7(n){return new tr(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Mx)})}function a7(n){return new tr(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function jO(n){return new tr(t=>{c7(n,t).catch(e=>t.error(e))})}function l7(n){return jO(Vx(n))}function c7(n,t){var e,i,r,s;return UO(this,void 0,void 0,function*(){try{for(e=HO(n);i=yield e.next(),!i.done;){let o=i.value;if(t.next(o),t.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})}function ga(n,t,e,i=0,r=!1){let s=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function zx(n,t=0){return Hi((e,i)=>{e.subscribe(Li(i,r=>ga(i,n,()=>i.next(r),t),()=>ga(i,n,()=>i.complete(),t),r=>ga(i,n,()=>i.error(r),t)))})}function Hx(n,t=0){return Hi((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function WO(n,t){return Vr(n).pipe(Hx(t),zx(t))}function GO(n,t){return Vr(n).pipe(Hx(t),zx(t))}function $O(n,t){return new tr(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function qO(n,t){return new tr(e=>{let i;return ga(e,t,()=>{i=n[Fx](),ga(e,t,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){e.error(o);return}s?e.complete():e.next(r)},0,!0)}),()=>zn(i?.return)&&i.return()})}function jx(n,t){if(!n)throw new Error("Iterable cannot be null");return new tr(e=>{ga(e,t,()=>{let i=n[Symbol.asyncIterator]();ga(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function XO(n,t){return jx(Vx(n),t)}function YO(n,t){if(n!=null){if(Lx(n))return WO(n,t);if(rg(n))return $O(n,t);if(kx(n))return GO(n,t);if(Nx(n))return jx(n,t);if(Bx(n))return qO(n,t);if(Ux(n))return XO(n,t)}throw Ox(n)}function Ur(n,t){return t?YO(n,t):Vr(n)}function Pn(...n){let t=bh(n);return Ur(n,t)}function sg(n,t){let e=zn(n)?n:()=>n,i=r=>r.error(e());return new tr(t?r=>t.schedule(i,0,r):i)}function rA(n){return!!n&&(n instanceof tr||zn(n.lift)&&zn(n.subscribe))}var od=Zm(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ZO(n){return n instanceof Date&&!isNaN(n)}function ui(n,t){return Hi((e,i)=>{let r=0;e.subscribe(Li(i,s=>{i.next(n.call(t,s,r++))}))})}var{isArray:u7}=Array;function d7(n,t){return u7(t)?n(...t):n(t)}function og(n){return ui(t=>d7(n,t))}var{isArray:h7}=Array,{getPrototypeOf:f7,prototype:p7,keys:m7}=Object;function Wx(n){if(n.length===1){let t=n[0];if(h7(t))return{args:t,keys:null};if(g7(t)){let e=m7(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function g7(n){return n&&typeof n=="object"&&f7(n)===p7}function Gx(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function J0(...n){let t=bh(n),e=Rx(n),{args:i,keys:r}=Wx(n);if(i.length===0)return Ur([],t);let s=new tr(y7(i,t,r?o=>Gx(r,o):Ka));return e?s.pipe(og(e)):s}function y7(n,t,e=Ka){return i=>{KO(t,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let u=0;u<r;u++)KO(t,()=>{let h=Ur(n[u],t),p=!1;h.subscribe(Li(i,v=>{s[u]=v,p||(p=!0,a--),a||i.next(e(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function KO(n,t,e){n?ga(e,n,t):t()}function QO(n,t,e,i,r,s,o,a){let u=[],h=0,p=0,v=!1,x=()=>{v&&!u.length&&!h&&t.complete()},S=O=>h<i?D(O):u.push(O),D=O=>{s&&t.next(O),h++;let N=!1;Vr(e(O,p++)).subscribe(Li(t,T=>{r?.(T),s?S(T):t.next(T)},()=>{N=!0},void 0,()=>{if(N)try{for(h--;u.length&&h<i;){let T=u.shift();o?ga(t,o,()=>D(T)):D(T)}x()}catch(T){t.error(T)}}))};return n.subscribe(Li(t,S,()=>{v=!0,x()})),()=>{a?.()}}function Rr(n,t,e=1/0){return zn(t)?Rr((i,r)=>ui((s,o)=>t(i,s,r,o))(Vr(n(i,r))),e):(typeof t=="number"&&(e=t),Hi((i,r)=>QO(i,r,n,e)))}function ag(n=1/0){return Rr(Ka,n)}function JO(){return ag(1)}function xh(...n){return JO()(Ur(n,bh(n)))}function $x(n){return new tr(t=>{Vr(n()).subscribe(t)})}function sA(...n){let t=Rx(n),{args:e,keys:i}=Wx(n),r=new tr(s=>{let{length:o}=e;if(!o){s.complete();return}let a=new Array(o),u=o,h=o;for(let p=0;p<o;p++){let v=!1;Vr(e[p]).subscribe(Li(s,x=>{v||(v=!0,h--),a[p]=x},()=>u--,void 0,()=>{(!u||!v)&&(h||s.next(i?Gx(i,a):a),s.complete())}))}});return t?r.pipe(og(t)):r}var v7=["addListener","removeListener"],_7=["addEventListener","removeEventListener"],b7=["on","off"];function au(n,t,e,i){if(zn(e)&&(i=e,e=void 0),i)return au(n,t,e).pipe(og(i));let[r,s]=C7(n)?_7.map(o=>a=>n[o](t,a,e)):x7(n)?v7.map(eF(n,t)):w7(n)?b7.map(eF(n,t)):[];if(!r&&rg(n))return Rr(o=>au(o,t,e))(Vr(n));if(!r)throw new TypeError("Invalid event target");return new tr(o=>{let a=(...u)=>o.next(1<u.length?u:u[0]);return r(a),()=>s(a)})}function eF(n,t){return e=>i=>n[e](t,i)}function x7(n){return zn(n.addListener)&&zn(n.removeListener)}function w7(n){return zn(n.on)&&zn(n.off)}function C7(n){return zn(n.addEventListener)&&zn(n.removeEventListener)}function qx(n=0,t,e=OO){let i=-1;return t!=null&&(Px(t)?e=t:i=t),new tr(r=>{let s=ZO(n)?+n-e.now():n;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function Wf(n=0,t=Q0){return n<0&&(n=0),qx(n,n,t)}function Qa(n,t){return Hi((e,i)=>{let r=0;e.subscribe(Li(i,s=>n.call(t,s,r++)&&i.next(s)))})}function ad(n){return Hi((t,e)=>{let i=null,r=!1,s;i=t.subscribe(Li(e,void 0,void 0,o=>{s=Vr(n(o,ad(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function tF(n,t,e,i,r){return(s,o)=>{let a=e,u=t,h=0;s.subscribe(Li(o,p=>{let v=h++;u=a?n(u,p,v):(a=!0,p),i&&o.next(u)},r&&(()=>{a&&o.next(u),o.complete()})))}}function wh(n,t){return zn(t)?Rr(n,t,1):Rr(n,1)}function Ch(n){return Hi((t,e)=>{let i=!1;t.subscribe(Li(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Cl(n){return n<=0?()=>ma:Hi((t,e)=>{let i=0;t.subscribe(Li(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function nF(){return Hi((n,t)=>{n.subscribe(Li(t,Uf))})}function iF(n){return ui(()=>n)}function oA(n,t){return t?e=>xh(t.pipe(Cl(1),nF()),e.pipe(oA(n))):Rr((e,i)=>Vr(n(e,i)).pipe(Cl(1),iF(e)))}function Gf(n,t=Q0){let e=qx(n,t);return oA(()=>e)}function Xx(n=S7){return Hi((t,e)=>{let i=!1;t.subscribe(Li(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function S7(){return new od}function ev(n){return Hi((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function ld(n,t){let e=arguments.length>=2;return i=>i.pipe(n?Qa((r,s)=>n(r,s,i)):Ka,Cl(1),e?Ch(t):Xx(()=>new od))}function lg(n){return n<=0?()=>ma:Hi((t,e)=>{let i=[];t.subscribe(Li(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function aA(n,t){let e=arguments.length>=2;return i=>i.pipe(n?Qa((r,s)=>n(r,s,i)):Ka,lg(1),e?Ch(t):Xx(()=>new od))}function lA(n,t){return Hi(tF(n,t,arguments.length>=2,!0))}function cA(...n){let t=bh(n);return Hi((e,i)=>{(t?xh(n,e,t):xh(n,e)).subscribe(i)})}function Sl(n,t){return Hi((e,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();e.subscribe(Li(i,u=>{r?.unsubscribe();let h=0,p=s++;Vr(n(u,p)).subscribe(r=Li(i,v=>i.next(t?t(u,v,p,h++):v),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function $f(n){return Hi((t,e)=>{Vr(n).subscribe(Li(e,()=>e.complete(),Uf)),!e.closed&&t.subscribe(e)})}function uo(n,t,e){let i=zn(n)||t||e?{next:n,error:t,complete:e}:n;return i?Hi((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(Li(s,u=>{var h;(h=i.next)===null||h===void 0||h.call(i,u),s.next(u)},()=>{var u;a=!1,(u=i.complete)===null||u===void 0||u.call(i),s.complete()},u=>{var h;a=!1,(h=i.error)===null||h===void 0||h.call(i,u),s.error(u)},()=>{var u,h;a&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(h=i.finalize)===null||h===void 0||h.call(i)}))}):Ka}var QF="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",wt=class extends Error{code;constructor(t,e){super(PD(t,e)),this.code=t}};function M7(n){return`NG0${Math.abs(n)}`}function PD(n,t){return`${M7(n)}${t?": "+t:""}`}var Nw=Symbol("InputSignalNode#UNSET"),JF=Mn(Ke({},xx),{transformFn:void 0,applyValueToInputSignal(n,t){Ym(n,t)}});function e3(n,t){let e=Object.create(JF);e.value=n,e.transformFn=t?.transform;function i(){if(Xm(e),e.value===Nw){let r=null;throw new wt(-950,r)}return e.value}return i[Za]=e,i}function pv(n){return{toString:n}.toString()}var Yx="__parameters__";function E7(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function t3(n,t,e){return pv(()=>{let i=E7(t);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(u,h,p){let v=u.hasOwnProperty(Yx)?u[Yx]:Object.defineProperty(u,Yx,{value:[]})[Yx];for(;v.length<=p;)v.push(null);return(v[p]=v[p]||[]).push(o),u}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var cd=globalThis;function wr(n){for(let t in n)if(n[t]===wr)return t;throw Error("Could not find renamed property on target object.")}function T7(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function _a(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(_a).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function MA(n,t){return n?t?`${n} ${t}`:n:t||""}var A7=wr({__forward_ref__:wr});function pu(n){return n.__forward_ref__=pu,n.toString=function(){return _a(this())},n}function $o(n){return n3(n)?n():n}function n3(n){return typeof n=="function"&&n.hasOwnProperty(A7)&&n.__forward_ref__===pu}function Vt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Xo(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ow(n){return rF(n,r3)||rF(n,s3)}function i3(n){return Ow(n)!==null}function rF(n,t){return n.hasOwnProperty(t)?n[t]:null}function D7(n){let t=n&&(n[r3]||n[s3]);return t||null}function sF(n){return n&&(n.hasOwnProperty(oF)||n.hasOwnProperty(I7))?n[oF]:null}var r3=wr({\u0275prov:wr}),oF=wr({\u0275inj:wr}),s3=wr({ngInjectableDef:wr}),I7=wr({ngInjectorDef:wr}),wn=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=Vt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function o3(n){return n&&!!n.\u0275providers}var P7=wr({\u0275cmp:wr}),R7=wr({\u0275dir:wr}),k7=wr({\u0275pipe:wr}),L7=wr({\u0275mod:wr}),ow=wr({\u0275fac:wr}),rv=wr({__NG_ELEMENT_ID__:wr}),aF=wr({__NG_ENV_ID__:wr});function Zf(n){return typeof n=="string"?n:n==null?"":String(n)}function N7(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Zf(n)}function a3(n,t){throw new wt(-200,n)}function RD(n,t){throw new wt(-201,!1)}var Ci=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ci||{}),EA;function l3(){return EA}function ya(n){let t=EA;return EA=n,t}function c3(n,t,e){let i=Ow(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&Ci.Optional)return null;if(t!==void 0)return t;RD(n,"Injector")}var O7={},Xf=O7,TA="__NG_DI_FLAG__",aw=class{injector;constructor(t){this.injector=t}retrieve(t,e){let i=e;return this.injector.get(t,i.optional?wx:Xf,i)}},lw="ngTempTokenPath",F7="ngTokenPath",B7=/\n/gm,V7="\u0275",lF="__source";function U7(n,t=Ci.Default){if(Z0()===void 0)throw new wt(-203,!1);if(Z0()===null)return c3(n,void 0,t);{let e=Z0(),i;return e instanceof aw?i=e.injector:i=e,i.get(n,t&Ci.Optional?null:void 0,t)}}function qn(n,t=Ci.Default){return(l3()||U7)($o(n),t)}function Ue(n,t=Ci.Default){return qn(n,Fw(t))}function Fw(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function AA(n){let t=[];for(let e=0;e<n.length;e++){let i=$o(n[e]);if(Array.isArray(i)){if(i.length===0)throw new wt(900,!1);let r,s=Ci.Default;for(let o=0;o<i.length;o++){let a=i[o],u=z7(a);typeof u=="number"?u===-1?r=a.token:s|=u:r=a}t.push(qn(r,s))}else t.push(qn(i))}return t}function u3(n,t){return n[TA]=t,n.prototype[TA]=t,n}function z7(n){return n[TA]}function H7(n,t,e,i){let r=n[lw];throw t[lF]&&r.unshift(t[lF]),n.message=j7(`
`+n.message,r,e,i),n[F7]=r,n[lw]=null,n}function j7(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==V7?n.slice(2):n;let r=_a(t);if(Array.isArray(t))r=t.map(_a).join(" -> ");else if(typeof t=="object"){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):_a(a)))}r=`{${s.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(B7,`
  `)}`}var d3=u3(t3("Optional"),8);var h3=u3(t3("SkipSelf"),4);function Kf(n,t){let e=n.hasOwnProperty(ow);return e?n[ow]:null}function W7(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=t[i];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}function G7(n){return n.flat(Number.POSITIVE_INFINITY)}function kD(n,t){n.forEach(e=>Array.isArray(e)?kD(e,t):t(e))}function f3(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function cw(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function $7(n,t){let e=[];for(let i=0;i<n;i++)e.push(t);return e}function q7(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let s=r-2;n[r]=n[s],r--}n[t]=e,n[t+1]=i}}function mv(n,t,e){let i=gv(n,t);return i>=0?n[i|1]=e:(i=~i,q7(n,i,t,e)),i}function uA(n,t){let e=gv(n,t);if(e>=0)return n[e|1]}function gv(n,t){return X7(n,t,1)}function X7(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<e];if(t===o)return s<<e;o>t?r=s:i=s+1}return~(r<<e)}var Qf={},va=[],sv=new wn(""),p3=new wn("",-1),m3=new wn(""),uw=class{get(t,e=Xf){if(e===Xf){let i=new Error(`NullInjectorError: No provider for ${_a(t)}!`);throw i.name="NullInjectorError",i}return e}};function g3(n,t){let e=n[L7]||null;if(!e&&t===!0)throw new Error(`Type ${_a(n)} does not have '\u0275mod' property.`);return e}function Jf(n){return n[P7]||null}function Y7(n){return n[R7]||null}function Z7(n){return n[k7]||null}function Bw(n){return{\u0275providers:n}}function K7(...n){return{\u0275providers:y3(!0,n),\u0275fromNgModule:!0}}function y3(n,...t){let e=[],i=new Set,r,s=o=>{e.push(o)};return kD(t,o=>{let a=o;DA(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&v3(r,s),e}function v3(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];LD(r,s=>{t(s,i)})}}function DA(n,t,e,i){if(n=$o(n),!n)return!1;let r=null,s=sF(n),o=!s&&Jf(n);if(!s&&!o){let u=n.ngModule;if(s=sF(u),s)r=u;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let h of u)DA(h,t,e,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let h;try{kD(s.imports,p=>{DA(p,t,e,i)&&(h||=[],h.push(p))})}finally{}h!==void 0&&v3(h,t)}if(!a){let h=Kf(r)||(()=>new r);t({provide:r,useFactory:h,deps:va},r),t({provide:m3,useValue:r,multi:!0},r),t({provide:sv,useValue:()=>qn(r),multi:!0},r)}let u=s.providers;if(u!=null&&!a){let h=n;LD(u,p=>{t(p,h)})}}else return!1;return r!==n&&n.providers!==void 0}function LD(n,t){for(let e of n)o3(e)&&(e=e.\u0275providers),Array.isArray(e)?LD(e,t):t(e)}var Q7=wr({provide:String,useValue:wr});function _3(n){return n!==null&&typeof n=="object"&&Q7 in n}function J7(n){return!!(n&&n.useExisting)}function e$(n){return!!(n&&n.useFactory)}function mg(n){return typeof n=="function"}function t$(n){return!!n.useClass}var Vw=new wn(""),ew={},cF={},dA;function ND(){return dA===void 0&&(dA=new uw),dA}var ba=class{},ov=class extends ba{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,PA(t,o=>this.processProvider(o)),this.records.set(p3,cg(void 0,this)),r.has("environment")&&this.records.set(ba,cg(void 0,this));let s=this.records.get(Vw);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(m3,va,Ci.Self))}retrieve(t,e){let i=e;return this.get(t,i.optional?wx:Xf,i)}destroy(){nv(this),this._destroyed=!0;let t=pi(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),pi(t)}}onDestroy(t){return nv(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){nv(this);let e=sd(this),i=ya(void 0),r;try{return t()}finally{sd(e),ya(i)}}get(t,e=Xf,i=Ci.Default){if(nv(this),t.hasOwnProperty(aF))return t[aF](this);i=Fw(i);let r,s=sd(this),o=ya(void 0);try{if(!(i&Ci.SkipSelf)){let u=this.records.get(t);if(u===void 0){let h=o$(t)&&Ow(t);h&&this.injectableDefInScope(h)?u=cg(IA(t),ew):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u,i)}let a=i&Ci.Self?ND():this.parent;return e=i&Ci.Optional&&e===Xf?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[lw]=a[lw]||[]).unshift(_a(t)),s)throw a;return H7(a,t,"R3InjectorError",this.source)}else throw a}finally{ya(o),sd(s)}}resolveInjectorInitializers(){let t=pi(null),e=sd(this),i=ya(void 0),r;try{let s=this.get(sv,va,Ci.Self);for(let o of s)o()}finally{sd(e),ya(i),pi(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(_a(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=$o(t);let e=mg(t)?t:$o(t&&t.provide),i=i$(t);if(!mg(t)&&t.multi===!0){let r=this.records.get(e);r||(r=cg(void 0,ew,!0),r.factory=()=>AA(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e,i){let r=pi(null);try{return e.value===cF?a3(_a(t)):e.value===ew&&(e.value=cF,e.value=e.factory(void 0,i)),typeof e.value=="object"&&e.value&&s$(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{pi(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=$o(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function IA(n){let t=Ow(n),e=t!==null?t.factory:Kf(n);if(e!==null)return e;if(n instanceof wn)throw new wt(204,!1);if(n instanceof Function)return n$(n);throw new wt(204,!1)}function n$(n){if(n.length>0)throw new wt(204,!1);let e=D7(n);return e!==null?()=>e.factory(n):()=>new n}function i$(n){if(_3(n))return cg(void 0,n.useValue);{let t=b3(n);return cg(t,ew)}}function b3(n,t,e){let i;if(mg(n)){let r=$o(n);return Kf(r)||IA(r)}else if(_3(n))i=()=>$o(n.useValue);else if(e$(n))i=()=>n.useFactory(...AA(n.deps||[]));else if(J7(n))i=(r,s)=>qn($o(n.useExisting),s!==void 0&&s&Ci.Optional?Ci.Optional:void 0);else{let r=$o(n&&(n.useClass||n.provide));if(r$(n))i=()=>new r(...AA(n.deps));else return Kf(r)||IA(r)}return i}function nv(n){if(n.destroyed)throw new wt(205,!1)}function cg(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function r$(n){return!!n.deps}function s$(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function o$(n){return typeof n=="function"||typeof n=="object"&&n instanceof wn}function PA(n,t){for(let e of n)Array.isArray(e)?PA(e,t):e&&o3(e)?PA(e.\u0275providers,t):t(e)}function El(n,t){let e;n instanceof ov?(nv(n),e=n):e=new aw(n);let i,r=sd(e),s=ya(void 0);try{return t()}finally{sd(r),ya(s)}}function x3(){return l3()!==void 0||Z0()!=null}function yv(n){if(!x3())throw new wt(-203,!1)}function a$(n){return typeof n=="function"}var hd=0,di=1,ri=2,wo=3,_c=4,wa=5,gg=6,dw=7,xs=8,yg=9,ud=10,Yr=11,av=12,uF=13,Mg=14,xa=15,ep=16,ug=17,dd=18,Uw=19,w3=20,Sh=21,hA=22,tp=23,Ml=24,fg=25,Bs=26,C3=1;var np=7,hw=8,vg=9,xo=10;function Mh(n){return Array.isArray(n)&&typeof n[C3]=="object"}function fd(n){return Array.isArray(n)&&n[C3]===!0}function OD(n){return(n.flags&4)!==0}function Eg(n){return n.componentOffset>-1}function zw(n){return(n.flags&1)===1}function cu(n){return!!n.template}function fw(n){return(n[ri]&512)!==0}function Tg(n){return(n[ri]&256)===256}var RA=class{previousValue;currentValue;firstChange;constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function S3(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}var zs=(()=>{let n=()=>M3;return n.ngInherit=!0,n})();function M3(n){return n.type.prototype.ngOnChanges&&(n.setInput=c$),l$}function l$(){let n=T3(this),t=n?.current;if(t){let e=n.previous;if(e===Qf)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function c$(n,t,e,i,r){let s=this.declaredInputs[i],o=T3(n)||u$(n,{previous:Qf,current:null}),a=o.current||(o.current={}),u=o.previous,h=u[s];a[s]=new RA(h&&h.currentValue,e,u===Qf),S3(n,t,r,e)}var E3="__ngSimpleChanges__";function T3(n){return n[E3]||null}function u$(n,t){return n[E3]=t}var dF=null;var yr=function(n,t=null,e){dF?.(n,t,e)},A3="svg",d$="math";function uu(n){for(;Array.isArray(n);)n=n[hd];return n}function D3(n,t){return uu(t[n])}function mu(n,t){return uu(t[n.index])}function FD(n,t){return n.data[t]}function BD(n,t){return n[t]}function h$(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function du(n,t){let e=t[n];return Mh(e)?e:e[hd]}function f$(n){return(n[ri]&4)===4}function VD(n){return(n[ri]&128)===128}function p$(n){return fd(n[wo])}function Eh(n,t){return t==null?null:n[t]}function I3(n){n[ug]=0}function P3(n){n[ri]&1024||(n[ri]|=1024,VD(n)&&Ag(n))}function m$(n,t){for(;n>0;)t=t[Mg],n--;return t}function Hw(n){return!!(n[ri]&9216||n[Ml]?.dirty)}function kA(n){n[ud].changeDetectionScheduler?.notify(8),n[ri]&64&&(n[ri]|=1024),Hw(n)&&Ag(n)}function Ag(n){n[ud].changeDetectionScheduler?.notify(0);let t=ip(n);for(;t!==null&&!(t[ri]&8192||(t[ri]|=8192,!VD(t)));)t=ip(t)}function R3(n,t){if(Tg(n))throw new wt(911,!1);n[Sh]===null&&(n[Sh]=[]),n[Sh].push(t)}function g$(n,t){if(n[Sh]===null)return;let e=n[Sh].indexOf(t);e!==-1&&n[Sh].splice(e,1)}function ip(n){let t=n[wo];return fd(t)?t[wo]:t}function UD(n){return n[dw]??=[]}function zD(n){return n.cleanup??=[]}function y$(n,t,e,i){let r=UD(t);r.push(e),n.firstCreatePass&&zD(n).push(i,r.length-1)}var mi={lFrame:V3(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var LA=!1;function v$(){return mi.lFrame.elementDepthCount}function _$(){mi.lFrame.elementDepthCount++}function b$(){mi.lFrame.elementDepthCount--}function HD(){return mi.bindingsEnabled}function k3(){return mi.skipHydrationRootTNode!==null}function x$(n){return mi.skipHydrationRootTNode===n}function w$(){mi.skipHydrationRootTNode=null}function Hn(){return mi.lFrame.lView}function Zr(){return mi.lFrame.tView}function mt(n){return mi.lFrame.contextLView=n,n[xs]}function gt(n){return mi.lFrame.contextLView=null,n}function Co(){let n=L3();for(;n!==null&&n.type===64;)n=n.parent;return n}function L3(){return mi.lFrame.currentTNode}function C$(){let n=mi.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function up(n,t){let e=mi.lFrame;e.currentTNode=n,e.isParent=t}function jD(){return mi.lFrame.isParent}function WD(){mi.lFrame.isParent=!1}function S$(){return mi.lFrame.contextLView}function N3(){return LA}function pw(n){let t=LA;return LA=n,t}function pd(){let n=mi.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function M$(){return mi.lFrame.bindingIndex}function E$(n){return mi.lFrame.bindingIndex=n}function dp(){return mi.lFrame.bindingIndex++}function GD(n){let t=mi.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function T$(){return mi.lFrame.inI18n}function A$(n,t){let e=mi.lFrame;e.bindingIndex=e.bindingRootIndex=n,NA(t)}function D$(){return mi.lFrame.currentDirectiveIndex}function NA(n){mi.lFrame.currentDirectiveIndex=n}function I$(n){let t=mi.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function O3(){return mi.lFrame.currentQueryIndex}function $D(n){mi.lFrame.currentQueryIndex=n}function P$(n){let t=n[di];return t.type===2?t.declTNode:t.type===1?n[wa]:null}function F3(n,t,e){if(e&Ci.SkipSelf){let r=t,s=n;for(;r=r.parent,r===null&&!(e&Ci.Host);)if(r=P$(s),r===null||(s=s[Mg],r.type&10))break;if(r===null)return!1;t=r,n=s}let i=mi.lFrame=B3();return i.currentTNode=t,i.lView=n,!0}function qD(n){let t=B3(),e=n[di];mi.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function B3(){let n=mi.lFrame,t=n===null?null:n.child;return t===null?V3(n):t}function V3(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function U3(){let n=mi.lFrame;return mi.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var z3=U3;function XD(){let n=U3();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function R$(n){return(mi.lFrame.contextLView=m$(n,mi.lFrame.contextLView))[xs]}function md(){return mi.lFrame.selectedIndex}function rp(n){mi.lFrame.selectedIndex=n}function jw(){let n=mi.lFrame;return FD(n.tView,n.selectedIndex)}function So(){mi.lFrame.currentNamespace=A3}function gu(){k$()}function k$(){mi.lFrame.currentNamespace=null}function L$(){return mi.lFrame.currentNamespace}var H3=!0;function Ww(){return H3}function Gw(n){H3=n}function N$(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){let o=M3(t);(e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o)}r&&(e.preOrderHooks??=[]).push(0-n,r),s&&((e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s))}function YD(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let s=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:h,ngOnDestroy:p}=s;o&&(n.contentHooks??=[]).push(-e,o),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),u&&(n.viewHooks??=[]).push(-e,u),h&&((n.viewHooks??=[]).push(e,h),(n.viewCheckHooks??=[]).push(e,h)),p!=null&&(n.destroyHooks??=[]).push(e,p)}}function tw(n,t,e){j3(n,t,3,e)}function nw(n,t,e,i){(n[ri]&3)===e&&j3(n,t,e,i)}function fA(n,t){let e=n[ri];(e&3)===t&&(e&=16383,e+=1,n[ri]=e)}function j3(n,t,e,i){let r=i!==void 0?n[ug]&65535:0,s=i??-1,o=t.length-1,a=0;for(let u=r;u<o;u++)if(typeof t[u+1]=="number"){if(a=t[u],i!=null&&a>=i)break}else t[u]<0&&(n[ug]+=65536),(a<s||s==-1)&&(O$(n,e,t,u),n[ug]=(n[ug]&4294901760)+u+2),u++}function hF(n,t){yr(4,n,t);let e=pi(null);try{t.call(n)}finally{pi(e),yr(5,n,t)}}function O$(n,t,e,i){let r=e[i]<0,s=e[i+1],o=r?-e[i]:e[i],a=n[o];r?n[ri]>>14<n[ug]>>16&&(n[ri]&3)===t&&(n[ri]+=16384,hF(a,s)):hF(a,s)}var pg=-1,sp=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,i){this.factory=t,this.canSeeViewProviders=e,this.injectImpl=i}};function F$(n){return(n.flags&8)!==0}function B$(n){return(n.flags&16)!==0}function V$(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let s=e[i++],o=e[i++],a=e[i++];n.setAttribute(t,o,a,s)}else{let s=r,o=e[++i];U$(s)?n.setProperty(t,s,o):n.setAttribute(t,s,o),i++}}return i}function W3(n){return n===3||n===4||n===6}function U$(n){return n.charCodeAt(0)===64}function _g(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?fF(n,e,r,null,t[++i]):fF(n,e,r,null,null))}}return n}function fF(n,t,e,i,r){let s=0,o=n.length;if(t===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===e){r!==null&&(n[s+1]=r);return}s++,r!==null&&s++}o!==-1&&(n.splice(o,0,t),s=o+1),n.splice(s++,0,e),r!==null&&n.splice(s++,0,r)}function G3(n){return n!==pg}function mw(n){return n&32767}function z$(n){return n>>16}function gw(n,t){let e=z$(n),i=t;for(;e>0;)i=i[Mg],e--;return i}var OA=!0;function yw(n){let t=OA;return OA=n,t}var H$=256,$3=H$-1,q3=5,j$=0,lu={};function W$(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(rv)&&(i=e[rv]),i==null&&(i=e[rv]=j$++);let r=i&$3,s=1<<r;t.data[n+(r>>q3)]|=s}function vw(n,t){let e=X3(n,t);if(e!==-1)return e;let i=t[di];i.firstCreatePass&&(n.injectorIndex=t.length,pA(i.data,n),pA(t,null),pA(i.blueprint,null));let r=ZD(n,t),s=n.injectorIndex;if(G3(r)){let o=mw(r),a=gw(r,t),u=a[di].data;for(let h=0;h<8;h++)t[s+h]=a[o+h]|u[o+h]}return t[s+8]=r,s}function pA(n,t){n.push(0,0,0,0,0,0,0,0,t)}function X3(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function ZD(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=J3(r),i===null)return pg;if(e++,r=r[Mg],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return pg}function FA(n,t,e){W$(n,t,e)}function G$(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let i=e.length,r=0;for(;r<i;){let s=e[r];if(W3(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(s===t)return e[r+1];r=r+2}}}return null}function Y3(n,t,e){if(e&Ci.Optional||n!==void 0)return n;RD(t,"NodeInjector")}function Z3(n,t,e,i){if(e&Ci.Optional&&i===void 0&&(i=null),(e&(Ci.Self|Ci.Host))===0){let r=n[yg],s=ya(void 0);try{return r?r.get(t,i,e&Ci.Optional):c3(t,i,e&Ci.Optional)}finally{ya(s)}}return Y3(i,t,e)}function K3(n,t,e,i=Ci.Default,r){if(n!==null){if(t[ri]&2048&&!(i&Ci.Self)){let o=Y$(n,t,e,i,lu);if(o!==lu)return o}let s=Q3(n,t,e,i,lu);if(s!==lu)return s}return Z3(t,e,i,r)}function Q3(n,t,e,i,r){let s=q$(e);if(typeof s=="function"){if(!F3(t,n,i))return i&Ci.Host?Y3(r,e,i):Z3(t,e,i,r);try{let o;if(o=s(i),o==null&&!(i&Ci.Optional))RD(e);else return o}finally{z3()}}else if(typeof s=="number"){let o=null,a=X3(n,t),u=pg,h=i&Ci.Host?t[xa][wa]:null;for((a===-1||i&Ci.SkipSelf)&&(u=a===-1?ZD(n,t):t[a+8],u===pg||!mF(i,!1)?a=-1:(o=t[di],a=mw(u),t=gw(u,t)));a!==-1;){let p=t[di];if(pF(s,a,p.data)){let v=$$(a,t,e,o,i,h);if(v!==lu)return v}u=t[a+8],u!==pg&&mF(i,t[di].data[a+8]===h)&&pF(s,a,t)?(o=p,a=mw(u),t=gw(u,t)):a=-1}}return r}function $$(n,t,e,i,r,s){let o=t[di],a=o.data[n+8],u=i==null?Eg(a)&&OA:i!=o&&(a.type&3)!==0,h=r&Ci.Host&&s===a,p=iw(a,o,e,u,h);return p!==null?lv(t,o,p,a,r):lu}function iw(n,t,e,i,r){let s=n.providerIndexes,o=t.data,a=s&1048575,u=n.directiveStart,h=n.directiveEnd,p=s>>20,v=i?a:a+p,x=r?a+p:h;for(let S=v;S<x;S++){let D=o[S];if(S<u&&e===D||S>=u&&D.type===e)return S}if(r){let S=o[u];if(S&&cu(S)&&S.type===e)return u}return null}function lv(n,t,e,i,r){let s=n[e],o=t.data;if(s instanceof sp){let a=s;a.resolving&&a3(N7(o[e]));let u=yw(a.canSeeViewProviders);a.resolving=!0;let h,p=a.injectImpl?ya(a.injectImpl):null,v=F3(n,i,Ci.Default);try{s=n[e]=a.factory(void 0,r,o,n,i),t.firstCreatePass&&e>=i.directiveStart&&N$(e,o[e],t)}finally{p!==null&&ya(p),yw(u),a.resolving=!1,z3()}}return s}function q$(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(rv)?n[rv]:void 0;return typeof t=="number"?t>=0?t&$3:X$:t}function pF(n,t,e){let i=1<<n;return!!(e[t+(n>>q3)]&i)}function mF(n,t){return!(n&Ci.Self)&&!(n&Ci.Host&&t)}var Yf=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return K3(this._tNode,this._lView,t,Fw(i),e)}};function X$(){return new Yf(Co(),Hn())}function Si(n){return pv(()=>{let t=n.prototype.constructor,e=t[ow]||BA(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[ow]||BA(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function BA(n){return n3(n)?()=>{let t=BA($o(n));return t&&t()}:Kf(n)}function Y$(n,t,e,i,r){let s=n,o=t;for(;s!==null&&o!==null&&o[ri]&2048&&!fw(o);){let a=Q3(s,o,e,i|Ci.Self,lu);if(a!==lu)return a;let u=s.parent;if(!u){let h=o[w3];if(h){let p=h.get(e,lu,i);if(p!==lu)return p}u=J3(o),o=o[Mg]}s=u}return r}function J3(n){let t=n[di],e=t.type;return e===2?t.declTNode:e===1?n[wa]:null}function KD(n){return G$(Co(),n)}function gF(n,t=null,e=null,i){let r=eB(n,t,e,i);return r.resolveInjectorInitializers(),r}function eB(n,t=null,e=null,i,r=new Set){let s=[e||va,K7(n)];return i=i||(typeof n=="object"?void 0:_a(n)),new ov(s,t||ND(),i||null,r)}var Vs=class n{static THROW_IF_NOT_FOUND=Xf;static NULL=new uw;static create(t,e){if(Array.isArray(t))return gF({name:""},e,t,"");{let i=t.name??"";return gF({name:i},t.parent,t.providers,i)}}static \u0275prov=Vt({token:n,providedIn:"any",factory:()=>qn(p3)});static __NG_ELEMENT_ID__=-1};var Z$=new wn("");Z$.__NG_ELEMENT_ID__=n=>{let t=Co();if(t===null)throw new wt(204,!1);if(t.type&2)return t.value;if(n&Ci.Optional)return null;throw new wt(204,!1)};var tB=!1,Tl=(()=>{class n{static __NG_ELEMENT_ID__=K$;static __NG_ENV_ID__=e=>e}return n})(),_w=class extends Tl{_lView;constructor(t){super(),this._lView=t}onDestroy(t){let e=this._lView;return Tg(e)?(t(),()=>{}):(R3(e,t),()=>g$(e,t))}};function K$(){return new _w(Hn())}var op=class{},QD=new wn("",{providedIn:"root",factory:()=>!1});var nB=new wn(""),iB=new wn(""),Dg=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new bs(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Vt({token:n,providedIn:"root",factory:()=>new n})}return n})();var VA=class extends Xr{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,x3()&&(this.destroyRef=Ue(Tl,{optional:!0})??void 0,this.pendingTasks=Ue(Dg,{optional:!0})??void 0)}emit(t){let e=pi(null);try{super.next(t)}finally{pi(e)}}subscribe(t,e,i){let r=t,s=e||(()=>null),o=i;if(t&&typeof t=="object"){let u=t;r=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return t instanceof ts&&t.add(a),a}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},en=VA;function cv(...n){}function rB(n){let t,e;function i(){n=cv;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function yF(n){return queueMicrotask(()=>n()),()=>{n=cv}}var JD="isAngularZone",bw=JD+"_ID",Q$=0,xr=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new en(!1);onMicrotaskEmpty=new en(!1);onStable=new en(!1);onError=new en(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=tB}=t;if(typeof Zone>"u")throw new wt(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,tq(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(JD)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new wt(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new wt(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,J$,cv,cv);try{return s.runTask(o,e,i)}finally{s.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},J$={};function eI(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function eq(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){rB(()=>{n.callbackScheduled=!1,UA(n),n.isCheckStableRunning=!0,eI(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),UA(n)}function tq(n){let t=()=>{eq(n)},e=Q$++;n._inner=n._inner.fork({name:"angular",properties:{[JD]:!0,[bw]:e,[bw+e]:!0},onInvokeTask:(i,r,s,o,a,u)=>{if(nq(u))return i.invokeTask(s,o,a,u);try{return vF(n),i.invokeTask(s,o,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),_F(n)}},onInvoke:(i,r,s,o,a,u,h)=>{try{return vF(n),i.invoke(s,o,a,u,h)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!iq(u)&&t(),_F(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,UA(n),eI(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function UA(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function vF(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function _F(n){n._nesting--,eI(n)}var zA=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new en;onMicrotaskEmpty=new en;onStable=new en;onError=new en;run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function nq(n){return sB(n,"__ignore_ng_zone__")}function iq(n){return sB(n,"__scheduler_tick__")}function sB(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var bc=class{_console=console;handleError(t){this._console.error("ERROR",t)}},rq=new wn("",{providedIn:"root",factory:()=>{let n=Ue(xr),t=Ue(bc);return e=>n.runOutsideAngular(()=>t.handleError(e))}}),xw=class{destroyed=!1;listeners=null;errorHandler=Ue(bc,{optional:!0});destroyRef=Ue(Tl);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(t){if(this.destroyed)throw new wt(953,!1);return(this.listeners??=[]).push(t),{unsubscribe:()=>{let e=this.listeners?.indexOf(t);e!==void 0&&e!==-1&&this.listeners?.splice(e,1)}}}emit(t){if(this.destroyed){console.warn(PD(953,!1));return}if(this.listeners===null)return;let e=pi(null);try{for(let i of this.listeners)try{i(t)}catch(r){this.errorHandler?.handleError(r)}}finally{pi(e)}}};function ji(n){return new xw}function bF(n,t){return e3(n,t)}function sq(n){return e3(Nw,n)}var _t=(bF.required=sq,bF);function oq(){return Ig(Co(),Hn())}function Ig(n,t){return new Ar(mu(n,t))}var Ar=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=oq}return n})();function aq(n){return n instanceof Ar?n.nativeElement:n}function tI(n){return typeof n=="function"&&n[Za]!==void 0}function mn(n,t){let e=WT(n,t?.equal),i=e[Za];return e.set=r=>Ym(i,r),e.update=r=>GT(i,r),e.asReadonly=oB.bind(e),e}function oB(){let n=this[Za];if(n.readonlyFn===void 0){let t=()=>this();t[Za]=n,n.readonlyFn=t}return n.readonlyFn}function aB(n){return tI(n)&&typeof n.set=="function"}function lq(){return this._results[Symbol.iterator]()}var HA=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Xr}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=G7(t);(this._changesDetected=!W7(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=lq};function lB(n){return(n.flags&128)===128}var cB=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(cB||{}),uB=new Map,cq=0;function uq(){return cq++}function dq(n){uB.set(n[Uw],n)}function jA(n){uB.delete(n[Uw])}var xF="__ngContext__";function Pg(n,t){Mh(t)?(n[xF]=t[Uw],dq(t)):n[xF]=t}function dB(n){return fB(n[av])}function hB(n){return fB(n[_c])}function fB(n){for(;n!==null&&!fd(n);)n=n[_c];return n}var WA;function pB(n){WA=n}function mB(){if(WA!==void 0)return WA;if(typeof document<"u")return document;throw new wt(210,!1)}var nI=new wn("",{providedIn:"root",factory:()=>hq}),hq="ng",iI=new wn(""),Rg=new wn("",{providedIn:"platform",factory:()=>"unknown"});var rI=new wn(""),sI=new wn("",{providedIn:"root",factory:()=>mB().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var fq="h",pq="b";var gB=!1,mq=new wn("",{providedIn:"root",factory:()=>gB});var oI=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(oI||{}),kg=new wn(""),wF=new Set;function yu(n){wF.has(n)||(wF.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var aI=(()=>{class n{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=gq}return n})();function gq(){return new aI(Hn(),Co())}var dg=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(dg||{}),yB=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Vt({token:n,providedIn:"root",factory:()=>new n})}return n})(),yq=[dg.EarlyRead,dg.Write,dg.MixedReadWrite,dg.Read],vq=(()=>{class n{ngZone=Ue(xr);scheduler=Ue(op);errorHandler=Ue(bc,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Ue(kg,{optional:!0})}execute(){let e=this.sequences.size>0;e&&yr(16),this.executing=!0;for(let i of yq)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=r.hooks[i];return s(r.pipelinedValue)},r.snapshot))}catch(s){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&yr(17)}register(e){let{view:i}=e;i!==void 0?((i[fg]??=[]).push(e),Ag(i),i[ri]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(oI.AFTER_NEXT_RENDER,e):e()}static \u0275prov=Vt({token:n,providedIn:"root",factory:()=>new n})}return n})(),GA=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,i,r,s,o=null){this.impl=t,this.hooks=e,this.view=i,this.once=r,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[fg];t&&(this.view[fg]=t.filter(e=>e!==this))}};function lI(n,t){!t?.injector&&yv(lI);let e=t?.injector??Ue(Vs);return yu("NgAfterNextRender"),bq(n,e,t,!0)}function _q(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function bq(n,t,e,i){let r=t.get(yB);r.impl??=t.get(vq);let s=t.get(kg,null,{optional:!0}),o=e?.phase??dg.MixedReadWrite,a=e?.manualCleanup!==!0?t.get(Tl):null,u=t.get(aI,null,{optional:!0}),h=new GA(r.impl,_q(n,o),u?.view,i,a,s?.snapshot(null));return r.impl.register(h),h}var xq=(n,t,e,i)=>{};function wq(n,t,e,i){xq(n,t,e,i)}var Cq=()=>null;function vB(n,t,e=!1){return Cq(n,t,e)}function _B(n,t){let e=n.contentQueries;if(e!==null){let i=pi(null);try{for(let r=0;r<e.length;r+=2){let s=e[r],o=e[r+1];if(o!==-1){let a=n.data[o];$D(s),a.contentQueries(2,t[o],o)}}}finally{pi(i)}}}function $A(n,t,e){$D(0);let i=pi(null);try{t(n,e)}finally{pi(i)}}function cI(n,t,e){if(OD(t)){let i=pi(null);try{let r=t.directiveStart,s=t.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let u=e[o];a.contentQueries(1,u,o)}}}finally{pi(i)}}}var hu=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(hu||{}),Zx;function Sq(){if(Zx===void 0&&(Zx=null,cd.trustedTypes))try{Zx=cd.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zx}function $w(n){return Sq()?.createHTML(n)||n}var Kx;function bB(){if(Kx===void 0&&(Kx=null,cd.trustedTypes))try{Kx=cd.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Kx}function CF(n){return bB()?.createHTML(n)||n}function SF(n){return bB()?.createScriptURL(n)||n}var ww=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${QF})`}};function hp(n){return n instanceof ww?n.changingThisBreaksApplicationSecurity:n}function uI(n,t){let e=Mq(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${QF})`)}return e===t}function Mq(n){return n instanceof ww&&n.getTypeName()||null}function Eq(n){let t=new XA(n);return Tq()?new qA(t):t}var qA=class{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString($w(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},XA=class{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=$w(t),e}};function Tq(){try{return!!new window.DOMParser().parseFromString($w(""),"text/html")}catch{return!1}}var Aq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function xB(n){return n=String(n),n.match(Aq)?n:"unsafe:"+n}function gd(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function vv(...n){let t={};for(let e of n)for(let i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}var wB=gd("area,br,col,hr,img,wbr"),CB=gd("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),SB=gd("rp,rt"),Dq=vv(SB,CB),Iq=vv(CB,gd("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pq=vv(SB,gd("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),MF=vv(wB,Iq,Pq,Dq),MB=gd("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Rq=gd("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),kq=gd("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Lq=vv(MB,Rq,kq),Nq=gd("script,style,template"),YA=class{sanitizedSomething=!1;buf=[];sanitizeChildren(t){let e=t.firstChild,i=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild){r.push(e),e=Bq(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let s=Fq(e);if(s){e=s;break}e=r.pop()}}return this.buf.join("")}startElement(t){let e=EF(t).toLowerCase();if(!MF.hasOwnProperty(e))return this.sanitizedSomething=!0,!Nq.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let i=t.attributes;for(let r=0;r<i.length;r++){let s=i.item(r),o=s.name,a=o.toLowerCase();if(!Lq.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;MB[a]&&(u=xB(u)),this.buf.push(" ",o,'="',TF(u),'"')}return this.buf.push(">"),!0}endElement(t){let e=EF(t).toLowerCase();MF.hasOwnProperty(e)&&!wB.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(TF(t))}};function Oq(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Fq(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw EB(t);return t}function Bq(n){let t=n.firstChild;if(t&&Oq(n,t))throw EB(t);return t}function EF(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function EB(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var Vq=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Uq=/([^\#-~ |!])/g;function TF(n){return n.replace(/&/g,"&amp;").replace(Vq,function(t){let e=t.charCodeAt(0),i=t.charCodeAt(1);return"&#"+((e-55296)*1024+(i-56320)+65536)+";"}).replace(Uq,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Qx;function zq(n,t){let e=null;try{Qx=Qx||Eq(n);let i=t?String(t):"";e=Qx.getInertBodyElement(i);let r=5,s=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=e.innerHTML,e=Qx.getInertBodyElement(i)}while(i!==s);let a=new YA().sanitizeChildren(AF(e)||e);return $w(a)}finally{if(e){let i=AF(e)||e;for(;i.firstChild;)i.firstChild.remove()}}}function AF(n){return"content"in n&&Hq(n)?n.content:null}function Hq(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var qw=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(qw||{});function dI(n){let t=hI();return t?CF(t.sanitize(qw.HTML,n)||""):uI(n,"HTML")?CF(hp(n)):zq(mB(),Zf(n))}function jq(n){let t=hI();return t?t.sanitize(qw.URL,n)||"":uI(n,"URL")?hp(n):xB(Zf(n))}function Wq(n){let t=hI();if(t)return SF(t.sanitize(qw.RESOURCE_URL,n)||"");if(uI(n,"ResourceURL"))return SF(hp(n));throw new wt(904,!1)}function Gq(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?Wq:jq}function TB(n,t,e){return Gq(t,e)(n)}function hI(){let n=Hn();return n&&n[ud].sanitizer}var $q=/^>|^->|<!--|-->|--!>|<!-$/g,qq=/(<|>)/g,Xq="\u200B$1\u200B";function Yq(n){return n.replace($q,t=>t.replace(qq,Xq))}function Xw(n){return n.ownerDocument.defaultView}function AB(n){return n instanceof Function?n():n}function Zq(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=t.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}e=r+1}}var DB="ng-template";function Kq(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&Zq(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(fI(n))return!1;if(r=t.indexOf(1,r),r>-1){let s;for(;++r<t.length&&typeof(s=t[r])=="string";)if(s.toLowerCase()===e)return!0}return!1}function fI(n){return n.type===4&&n.value!==DB}function Qq(n,t,e){let i=n.type===4&&!e?DB:n.value;return t===i}function Jq(n,t,e){let i=4,r=n.attrs,s=r!==null?nX(r):0,o=!1;for(let a=0;a<t.length;a++){let u=t[a];if(typeof u=="number"){if(!o&&!vc(i)&&!vc(u))return!1;if(o&&vc(u))continue;o=!1,i=u|i&1;continue}if(!o)if(i&4){if(i=2|i&1,u!==""&&!Qq(n,u,e)||u===""&&t.length===1){if(vc(i))return!1;o=!0}}else if(i&8){if(r===null||!Kq(n,r,u,e)){if(vc(i))return!1;o=!0}}else{let h=t[++a],p=eX(u,r,fI(n),e);if(p===-1){if(vc(i))return!1;o=!0;continue}if(h!==""){let v;if(p>s?v="":v=r[p+1].toLowerCase(),i&2&&h!==v){if(vc(i))return!1;o=!0}}}}return vc(i)||o}function vc(n){return(n&1)===0}function eX(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let s=!1;for(;r<t.length;){let o=t[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return iX(t,n)}function IB(n,t,e=!1){for(let i=0;i<t.length;i++)if(Jq(n,t[i],e))return!0;return!1}function tX(n){let t=n.attrs;if(t!=null){let e=t.indexOf(5);if((e&1)===0)return t[e+1]}return null}function nX(n){for(let t=0;t<n.length;t++){let e=n[t];if(W3(e))return t}return n.length}function iX(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function rX(n,t){e:for(let e=0;e<t.length;e++){let i=t[e];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function DF(n,t){return n?":not("+t.trim()+")":t}function sX(n){let t=n[0],e=1,i=2,r="",s=!1;for(;e<n.length;){let o=n[e];if(typeof o=="string")if(i&2){let a=n[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!vc(o)&&(t+=DF(s,r),r=""),i=o,s=s||!vc(i);e++}return r!==""&&(t+=DF(s,r)),t}function oX(n){return n.map(sX).join(",")}function aX(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&t.push(s,n[++i]):r===8&&e.push(s);else{if(!vc(r))break;r=s}i++}return e.length&&t.push(1,...e),t}var Ja={};function lX(n,t){return n.createText(t)}function cX(n,t,e){n.setValue(t,e)}function uX(n,t){return n.createComment(Yq(t))}function PB(n,t,e){return n.createElement(t,e)}function Cw(n,t,e,i,r){n.insertBefore(t,e,i,r)}function RB(n,t,e){n.appendChild(t,e)}function IF(n,t,e,i,r){i!==null?Cw(n,t,e,i,r):RB(n,t,e)}function dX(n,t,e){n.removeChild(null,t,e)}function hX(n,t,e){n.setAttribute(t,"style",e)}function fX(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function kB(n,t,e){let{mergedAttrs:i,classes:r,styles:s}=e;i!==null&&V$(n,t,i),r!==null&&fX(n,t,r),s!==null&&hX(n,t,s)}function pI(n,t,e,i,r,s,o,a,u,h,p){let v=Bs+i,x=v+r,S=pX(v,x),D=typeof h=="function"?h():h;return S[di]={type:n,blueprint:S,template:e,queries:null,viewQuery:a,declTNode:t,data:S.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:p}}function pX(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:Ja);return e}function mX(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=pI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function mI(n,t,e,i,r,s,o,a,u,h,p){let v=t.blueprint.slice();return v[hd]=r,v[ri]=i|4|128|8|64|1024,(h!==null||n&&n[ri]&2048)&&(v[ri]|=2048),I3(v),v[wo]=v[Mg]=n,v[xs]=e,v[ud]=o||n&&n[ud],v[Yr]=a||n&&n[Yr],v[yg]=u||n&&n[yg]||null,v[wa]=s,v[Uw]=uq(),v[gg]=p,v[w3]=h,v[xa]=t.type==2?n[xa]:v,v}function gX(n,t,e){let i=mu(t,n),r=mX(e),s=n[ud].rendererFactory,o=gI(n,mI(n,r,null,LB(e),i,t,null,s.createRenderer(i,e),null,null,null));return n[t.index]=o}function LB(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function NB(n,t,e,i){if(e===0)return-1;let r=t.length;for(let s=0;s<e;s++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function gI(n,t){return n[av]?n[uF][_c]=t:n[av]=t,n[uF]=t,t}function xe(n=1){OB(Zr(),Hn(),md()+n,!1)}function OB(n,t,e,i){if(!i)if((t[ri]&3)===3){let s=n.preOrderCheckHooks;s!==null&&tw(t,s,e)}else{let s=n.preOrderHooks;s!==null&&nw(t,s,0,e)}rp(e)}var Yw=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Yw||{});function ZA(n,t,e,i){let r=pi(null);try{let[s,o,a]=n.inputs[e],u=null;(o&Yw.SignalBased)!==0&&(u=t[s][Za]),u!==null&&u.transformFn!==void 0?i=u.transformFn(i):a!==null&&(i=a.call(t,i)),n.setInput!==null?n.setInput(t,u,i,e,s):S3(t,u,s,i)}finally{pi(r)}}function FB(n,t,e,i,r){let s=md(),o=i&2;try{rp(-1),o&&t.length>Bs&&OB(n,t,Bs,!1),yr(o?2:0,r),e(i,r)}finally{rp(s),yr(o?3:1,r)}}function Zw(n,t,e){wX(n,t,e),(e.flags&64)===64&&CX(n,t,e)}function yI(n,t,e=mu){let i=t.localNames;if(i!==null){let r=t.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?e(t,n):n[o];n[r++]=a}}}function yX(n,t,e,i){let s=i.get(mq,gB)||e===hu.ShadowDom,o=n.selectRootElement(t,s);return vX(o),o}function vX(n){_X(n)}var _X=()=>null;function bX(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function vI(n,t,e,i,r,s,o,a){if(!a&&bI(t,n,e,i,r)){Eg(t)&&xX(e,t.index);return}if(t.type&3){let u=mu(t,e);i=bX(i),r=o!=null?o(r,t.value||"",i):r,s.setProperty(u,i,r)}else t.type&12}function xX(n,t){let e=du(t,n);e[ri]&16||(e[ri]|=64)}function wX(n,t,e){let i=e.directiveStart,r=e.directiveEnd;Eg(e)&&gX(t,e,n.data[i+e.componentOffset]),n.firstCreatePass||vw(e,t);let s=e.initialInputs;for(let o=i;o<r;o++){let a=n.data[o],u=lv(t,n,o,e);if(Pg(u,t),s!==null&&TX(t,o-i,u,a,e,s),cu(a)){let h=du(e.index,t);h[xs]=lv(t,n,o,e)}}}function CX(n,t,e){let i=e.directiveStart,r=e.directiveEnd,s=e.index,o=D$();try{rp(s);for(let a=i;a<r;a++){let u=n.data[a],h=t[a];NA(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&SX(u,h)}}finally{rp(-1),NA(o)}}function SX(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function _I(n,t){let e=n.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let s=e[r];IB(t,s.selectors,!1)&&(i??=[],cu(s)?i.unshift(s):i.push(s))}return i}function MX(n,t,e,i,r,s){let o=mu(n,t);EX(t[Yr],o,s,n.value,e,i,r)}function EX(n,t,e,i,r,s,o){if(s==null)n.removeAttribute(t,r,e);else{let a=o==null?Zf(s):o(s,i||"",r);n.setAttribute(t,r,a,e)}}function TX(n,t,e,i,r,s){let o=s[t];if(o!==null)for(let a=0;a<o.length;a+=2){let u=o[a],h=o[a+1];ZA(i,e,u,h)}}function AX(n,t){let e=n[yg],i=e?e.get(bc,null):null;i&&i.handleError(t)}function bI(n,t,e,i,r){let s=n.inputs?.[i],o=n.hostDirectiveInputs?.[i],a=!1;if(o)for(let u=0;u<o.length;u+=2){let h=o[u],p=o[u+1],v=t.data[h];ZA(v,e[h],p,r),a=!0}if(s)for(let u of s){let h=e[u],p=t.data[u];ZA(p,h,i,r),a=!0}return a}function DX(n,t){let e=du(t,n),i=e[di];IX(i,e);let r=e[hd];r!==null&&e[gg]===null&&(e[gg]=vB(r,e[yg])),yr(18),xI(i,e,e[xs]),yr(19,e[xs])}function IX(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function xI(n,t,e){qD(t);try{let i=n.viewQuery;i!==null&&$A(1,i,e);let r=n.template;r!==null&&FB(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[dd]?.finishViewCreation(n),n.staticContentQueries&&_B(n,t),n.staticViewQueries&&$A(2,n.viewQuery,e);let s=n.components;s!==null&&PX(t,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[ri]&=-5,XD()}}function PX(n,t){for(let e=0;e<t.length;e++)DX(n,t[e])}function _v(n,t,e,i){let r=pi(null);try{let s=t.tView,a=n[ri]&4096?4096:16,u=mI(n,s,e,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),h=n[t.index];u[ep]=h;let p=n[dd];return p!==null&&(u[dd]=p.createEmbeddedView(s)),xI(s,u,e),u}finally{pi(r)}}function bg(n,t){return!t||t.firstChild===null||lB(n)}var RX;function wI(n,t){return RX(n,t)}var fu=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(fu||{});function CI(n){return(n.flags&32)===32}function hg(n,t,e,i,r){if(i!=null){let s,o=!1;fd(i)?s=i:Mh(i)&&(o=!0,i=i[hd]);let a=uu(i);n===0&&e!==null?r==null?RB(t,e,a):Cw(t,e,a,r||null,!0):n===1&&e!==null?Cw(t,e,a,r||null,!0):n===2?dX(t,a,o):n===3&&t.destroyNode(a),s!=null&&HX(t,n,s,e,r)}}function kX(n,t){BB(n,t),t[hd]=null,t[wa]=null}function LX(n,t,e,i,r,s){i[hd]=r,i[wa]=t,Jw(n,i,e,1,r,s)}function BB(n,t){t[ud].changeDetectionScheduler?.notify(9),Jw(n,t,t[Yr],2,null,null)}function NX(n){let t=n[av];if(!t)return mA(n[di],n);for(;t;){let e=null;if(Mh(t))e=t[av];else{let i=t[xo];i&&(e=i)}if(!e){for(;t&&!t[_c]&&t!==n;)Mh(t)&&mA(t[di],t),t=t[wo];t===null&&(t=n),Mh(t)&&mA(t[di],t),e=t&&t[_c]}t=e}}function SI(n,t){let e=n[vg],i=e.indexOf(t);e.splice(i,1)}function Kw(n,t){if(Tg(t))return;let e=t[Yr];e.destroyNode&&Jw(n,t,e,3,null,null),NX(t)}function mA(n,t){if(Tg(t))return;let e=pi(null);try{t[ri]&=-129,t[ri]|=256,t[Ml]&&Y0(t[Ml]),FX(n,t),OX(n,t),t[di].type===1&&t[Yr].destroy();let i=t[ep];if(i!==null&&fd(t[wo])){i!==t[wo]&&SI(i,t);let r=t[dd];r!==null&&r.detachView(n)}jA(t)}finally{pi(e)}}function OX(n,t){let e=n.cleanup,i=t[dw];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let a=e[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[e[o+1]];e[o].call(a)}i!==null&&(t[dw]=null);let r=t[Sh];if(r!==null){t[Sh]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}let s=t[tp];if(s!==null){t[tp]=null;for(let o of s)o.destroy()}}function FX(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof sp)){let s=e[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],u=s[o+1];yr(4,a,u);try{u.call(a)}finally{yr(5,a,u)}}else{yr(4,r,s);try{s.call(r)}finally{yr(5,r,s)}}}}}function VB(n,t,e){return BX(n,t.parent,e)}function BX(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[hd];if(Eg(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===hu.None||r===hu.Emulated)return null}return mu(i,e)}function UB(n,t,e){return UX(n,t,e)}function VX(n,t,e){return n.type&40?mu(n,e):null}var UX=VX,PF;function Qw(n,t,e,i){let r=VB(n,i,t),s=t[Yr],o=i.parent||t[wa],a=UB(o,i,t);if(r!=null)if(Array.isArray(e))for(let u=0;u<e.length;u++)IF(s,r,e[u],a,!1);else IF(s,r,e,a,!1);PF!==void 0&&PF(s,i,t,e,r)}function iv(n,t){if(t!==null){let e=t.type;if(e&3)return mu(t,n);if(e&4)return KA(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return iv(n,i);{let r=n[t.index];return fd(r)?KA(-1,r):uu(r)}}else{if(e&128)return iv(n,t.next);if(e&32)return wI(t,n)()||uu(n[t.index]);{let i=zB(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=ip(n[xa]);return iv(r,i)}else return iv(n,t.next)}}}return null}function zB(n,t){if(t!==null){let i=n[xa][wa],r=t.projection;return i.projection[r]}return null}function KA(n,t){let e=xo+n+1;if(e<t.length){let i=t[e],r=i[di].firstChild;if(r!==null)return iv(i,r)}return t[np]}function MI(n,t,e,i,r,s,o){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=i[e.index],u=e.type;if(o&&t===0&&(a&&Pg(uu(a),i),e.flags|=2),!CI(e))if(u&8)MI(n,t,e.child,i,r,s,!1),hg(t,n,r,a,s);else if(u&32){let h=wI(e,i),p;for(;p=h();)hg(t,n,r,p,s);hg(t,n,r,a,s)}else u&16?HB(n,t,i,e,r,s):hg(t,n,r,a,s);e=o?e.projectionNext:e.next}}function Jw(n,t,e,i,r,s){MI(e,i,n.firstChild,t,r,s,!1)}function zX(n,t,e){let i=t[Yr],r=VB(n,e,t),s=e.parent||t[wa],o=UB(s,e,t);HB(i,0,t,e,r,o)}function HB(n,t,e,i,r,s){let o=e[xa],u=o[wa].projection[i.projection];if(Array.isArray(u))for(let h=0;h<u.length;h++){let p=u[h];hg(t,n,r,p,s)}else{let h=u,p=o[wo];lB(i)&&(h.flags|=128),MI(n,t,h,p,r,s,!0)}}function HX(n,t,e,i,r){let s=e[np],o=uu(e);s!==o&&hg(t,n,i,s,r);for(let a=xo;a<e.length;a++){let u=e[a];Jw(u[di],u,n,t,i,s)}}function jX(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let s=i.indexOf("-")===-1?void 0:fu.DashCase;r==null?n.removeStyle(e,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=fu.Important),n.setStyle(e,i,r,s))}}function Sw(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let s=t[e.index];s!==null&&i.push(uu(s)),fd(s)&&WX(s,i);let o=e.type;if(o&8)Sw(n,t,e.child,i);else if(o&32){let a=wI(e,t),u;for(;u=a();)i.push(u)}else if(o&16){let a=zB(t,e);if(Array.isArray(a))i.push(...a);else{let u=ip(t[xa]);Sw(u[di],u,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function WX(n,t){for(let e=xo;e<n.length;e++){let i=n[e],r=i[di].firstChild;r!==null&&Sw(i[di],i,r,t)}n[np]!==n[hd]&&t.push(n[np])}function jB(n){if(n[fg]!==null){for(let t of n[fg])t.impl.addSequence(t);n[fg].length=0}}var WB=[];function GX(n){return n[Ml]??$X(n)}function $X(n){let t=WB.pop()??Object.create(XX);return t.lView=n,t}function qX(n){n.lView[Ml]!==n&&(n.lView=null,WB.push(n))}var XX=Mn(Ke({},qm),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ag(n.lView)},consumerOnSignalRead(){this.lView[Ml]=this}});function YX(n){let t=n[Ml]??Object.create(ZX);return t.lView=n,t}var ZX=Mn(Ke({},qm),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=ip(n.lView);for(;t&&!GB(t[di]);)t=ip(t);t&&P3(t)},consumerOnSignalRead(){this.lView[Ml]=this}});function GB(n){return n.type!==2}function $B(n){if(n[tp]===null)return;let t=!0;for(;t;){let e=!1;for(let i of n[tp])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=e&&!!(n[ri]&8192)}}var KX=100;function qB(n,t=!0,e=0){let r=n[ud].rendererFactory,s=!1;s||r.begin?.();try{QX(n,e)}catch(o){throw t&&AX(n,o),o}finally{s||r.end?.()}}function QX(n,t){let e=N3();try{pw(!0),QA(n,t);let i=0;for(;Hw(n);){if(i===KX)throw new wt(103,!1);i++,QA(n,1)}}finally{pw(e)}}function JX(n,t,e,i){if(Tg(t))return;let r=t[ri],s=!1,o=!1;qD(t);let a=!0,u=null,h=null;s||(GB(n)?(h=GX(t),u=X0(h)):BT()===null?(a=!1,h=YX(t),u=X0(h)):t[Ml]&&(Y0(t[Ml]),t[Ml]=null));try{I3(t),E$(n.bindingStartIndex),e!==null&&FB(n,t,e,2,i);let p=(r&3)===3;if(!s)if(p){let S=n.preOrderCheckHooks;S!==null&&tw(t,S,null)}else{let S=n.preOrderHooks;S!==null&&nw(t,S,0,null),fA(t,0)}if(o||eY(t),$B(t),XB(t,0),n.contentQueries!==null&&_B(n,t),!s)if(p){let S=n.contentCheckHooks;S!==null&&tw(t,S)}else{let S=n.contentHooks;S!==null&&nw(t,S,1),fA(t,1)}nY(n,t);let v=n.components;v!==null&&ZB(t,v,0);let x=n.viewQuery;if(x!==null&&$A(2,x,i),!s)if(p){let S=n.viewCheckHooks;S!==null&&tw(t,S)}else{let S=n.viewHooks;S!==null&&nw(t,S,2),fA(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[hA]){for(let S of t[hA])S();t[hA]=null}s||(jB(t),t[ri]&=-73)}catch(p){throw s||Ag(t),p}finally{h!==null&&(yx(h,u),a&&qX(h)),XD()}}function XB(n,t){for(let e=dB(n);e!==null;e=hB(e))for(let i=xo;i<e.length;i++){let r=e[i];YB(r,t)}}function eY(n){for(let t=dB(n);t!==null;t=hB(t)){if(!(t[ri]&2))continue;let e=t[vg];for(let i=0;i<e.length;i++){let r=e[i];P3(r)}}}function tY(n,t,e){yr(18);let i=du(t,n);YB(i,e),yr(19,i[xs])}function YB(n,t){VD(n)&&QA(n,t)}function QA(n,t){let i=n[di],r=n[ri],s=n[Ml],o=!!(t===0&&r&16);if(o||=!!(r&64&&t===0),o||=!!(r&1024),o||=!!(s?.dirty&&vx(s)),o||=!1,s&&(s.dirty=!1),n[ri]&=-9217,o)JX(i,n,i.template,n[xs]);else if(r&8192){$B(n),XB(n,1);let a=i.components;a!==null&&ZB(n,a,1),jB(n)}}function ZB(n,t,e){for(let i=0;i<t.length;i++)tY(n,t[i],e)}function nY(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)rp(~r);else{let s=r,o=e[++i],a=e[++i];A$(o,s);let u=t[s];yr(24,u),a(2,u),yr(25,u)}}}finally{rp(-1)}}function EI(n,t){let e=N3()?64:1088;for(n[ud].changeDetectionScheduler?.notify(t);n;){n[ri]|=e;let i=ip(n);if(fw(n)&&!i)return n;n=i}return null}function KB(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function QB(n,t){let e=xo+t;if(e<n.length)return n[e]}function bv(n,t,e,i=!0){let r=t[di];if(iY(r,t,n,e),i){let o=KA(e,n),a=t[Yr],u=a.parentNode(n[np]);u!==null&&LX(r,n[wa],a,t,u,o)}let s=t[gg];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function JB(n,t){let e=uv(n,t);return e!==void 0&&Kw(e[di],e),e}function uv(n,t){if(n.length<=xo)return;let e=xo+t,i=n[e];if(i){let r=i[ep];r!==null&&r!==n&&SI(r,i),t>0&&(n[e-1][_c]=i[_c]);let s=cw(n,xo+t);kX(i[di],i);let o=s[dd];o!==null&&o.detachView(s[di]),i[wo]=null,i[_c]=null,i[ri]&=-129}return i}function iY(n,t,e,i){let r=xo+i,s=e.length;i>0&&(e[r-1][_c]=t),i<s-xo?(t[_c]=e[r],f3(e,xo+i,t)):(e.push(t),t[_c]=null),t[wo]=e;let o=t[ep];o!==null&&e!==o&&eV(o,t);let a=t[dd];a!==null&&a.insertView(n),kA(t),t[ri]|=128}function eV(n,t){let e=n[vg],i=t[wo];if(Mh(i))n[ri]|=2;else{let r=i[wo][xa];t[xa]!==r&&(n[ri]|=2)}e===null?n[vg]=[t]:e.push(t)}var dv=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,e=t[di];return Sw(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i}get context(){return this._lView[xs]}set context(t){this._lView[xs]=t}get destroyed(){return Tg(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[wo];if(fd(t)){let e=t[hw],i=e?e.indexOf(this):-1;i>-1&&(uv(t,i),cw(e,i))}this._attachedToViewContainer=!1}Kw(this._lView[di],this._lView)}onDestroy(t){R3(this._lView,t)}markForCheck(){EI(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ri]&=-129}reattach(){kA(this._lView),this._lView[ri]|=128}detectChanges(){this._lView[ri]|=1024,qB(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new wt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=fw(this._lView),e=this._lView[ep];e!==null&&!t&&SI(e,this._lView),BB(this._lView[di],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new wt(902,!1);this._appRef=t;let e=fw(this._lView),i=this._lView[ep];i!==null&&!e&&eV(i,this._lView),kA(this._lView)}};var Us=(()=>{class n{static __NG_ELEMENT_ID__=oY}return n})(),rY=Us,sY=class extends rY{_declarationLView;_declarationTContainer;elementRef;constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=_v(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new dv(r)}};function oY(){return eC(Co(),Hn())}function eC(n,t){return n.type&4?new sY(t,n,Ig(n,t)):null}function xv(n,t,e,i,r){let s=n.data[t];if(s===null)s=aY(n,t,e,i,r),T$()&&(s.flags|=32);else if(s.type&64){s.type=e,s.value=i,s.attrs=r;let o=C$();s.injectorIndex=o===null?-1:o.injectorIndex}return up(s,!0),s}function aY(n,t,e,i,r){let s=L3(),o=jD(),a=o?s:s&&s.parent,u=n.data[t]=cY(n,a,e,t,i,r);return lY(n,u,s,o),u}function lY(n,t,e,i){n.firstChild===null&&(n.firstChild=t),e!==null&&(i?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function cY(n,t,e,i,r,s){let o=t?t.injectorIndex:-1,a=0;return k3()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Ibe=new RegExp(`^(\\d+)*(${pq}|${fq})*(.*)`);var uY=()=>null;function xg(n,t){return uY(n,t)}var dY=class{},tV=class{},JA=class{resolveComponentFactory(t){throw Error(`No component factory found for ${_a(t)}.`)}},tC=class{static NULL=new JA},Th=class{},Ca=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>hY()}return n})();function hY(){let n=Hn(),t=Co(),e=du(t.index,n);return(Mh(e)?e:n)[Yr]}var fY=(()=>{class n{static \u0275prov=Vt({token:n,providedIn:"root",factory:()=>null})}return n})();var gA={},eD=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=Fw(i);let r=this.injector.get(t,gA,i);return r!==gA||e===gA?r:this.parentInjector.get(t,e,i)}};function tD(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,s=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")s=a;else if(s==1)r=MA(r,a);else if(s==2){let u=a,h=t[++o];i=MA(i,u+": "+h+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function En(n,t=Ci.Default){let e=Hn();if(e===null)return qn(n,t);let i=Co();return K3(i,e,$o(n),t)}function nV(){let n="invalid";throw new Error(n)}function TI(n,t,e,i,r){let s=i===null?null:{"":-1},o=r(n,e);if(o!==null){let a,u=null,h=null,p=mY(o);p===null?a=o:[a,u,h]=p,vY(n,t,e,a,s,u,h)}s!==null&&i!==null&&pY(e,i,s)}function pY(n,t,e){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let s=e[t[r+1]];if(s==null)throw new wt(-301,!1);i.push(t[r],s)}}function mY(n){let t=null,e=!1;for(let o=0;o<n.length;o++){let a=n[o];if(o===0&&cu(a)&&(t=a),a.findHostDirectiveDefs!==null){e=!0;break}}if(!e)return null;let i=null,r=null,s=null;for(let o of n)o.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,s??=new Map,gY(o,i,s,r)),o===t&&(i??=[],i.push(o));return i!==null?(i.push(...t===null?n:n.slice(1)),[i,r,s]):null}function gY(n,t,e,i){let r=t.length;n.findHostDirectiveDefs(n,t,i),e.set(n,[r,t.length-1])}function yY(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function vY(n,t,e,i,r,s,o){let a=i.length,u=!1;for(let x=0;x<a;x++){let S=i[x];!u&&cu(S)&&(u=!0,yY(n,e,x)),FA(vw(e,t),n,S.type)}SY(e,n.data.length,a);for(let x=0;x<a;x++){let S=i[x];S.providersResolver&&S.providersResolver(S)}let h=!1,p=!1,v=NB(n,t,a,null);a>0&&(e.directiveToIndex=new Map);for(let x=0;x<a;x++){let S=i[x];if(e.mergedAttrs=_g(e.mergedAttrs,S.hostAttrs),bY(n,e,t,v,S),CY(v,S,r),o!==null&&o.has(S)){let[O,N]=o.get(S);e.directiveToIndex.set(S.type,[v,O+e.directiveStart,N+e.directiveStart])}else(s===null||!s.has(S))&&e.directiveToIndex.set(S.type,v);S.contentQueries!==null&&(e.flags|=4),(S.hostBindings!==null||S.hostAttrs!==null||S.hostVars!==0)&&(e.flags|=64);let D=S.type.prototype;!h&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),h=!0),!p&&(D.ngOnChanges||D.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),p=!0),v++}_Y(n,e,s)}function _Y(n,t,e){for(let i=t.directiveStart;i<t.directiveEnd;i++){let r=n.data[i];if(e===null||!e.has(r))RF(0,t,r,i),RF(1,t,r,i),LF(t,i,!1);else{let s=e.get(r);kF(0,t,s,i),kF(1,t,s,i),LF(t,i,!0)}}}function RF(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o;n===0?o=t.inputs??={}:o=t.outputs??={},o[s]??=[],o[s].push(i),iV(t,s)}}function kF(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o=r[s],a;n===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[o]??=[],a[o].push(i,s),iV(t,o)}}function iV(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function LF(n,t,e){let{attrs:i,inputs:r,hostDirectiveInputs:s}=n;if(i===null||!e&&r===null||e&&s===null||fI(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<i.length;){let u=i[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!e&&r.hasOwnProperty(u)){let h=r[u];for(let p of h)if(p===t){o??=[],o.push(u,i[a+1]);break}}else if(e&&s.hasOwnProperty(u)){let h=s[u];for(let p=0;p<h.length;p+=2)if(h[p]===t){o??=[],o.push(h[p+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function bY(n,t,e,i,r){n.data[i]=r;let s=r.factory||(r.factory=Kf(r.type,!0)),o=new sp(s,cu(r),En);n.blueprint[i]=o,e[i]=o,xY(n,t,i,NB(n,e,r.hostVars,Ja),r)}function xY(n,t,e,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~t.index;wY(o)!=a&&o.push(a),o.push(e,i,s)}}function wY(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function CY(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;cu(t)&&(e[""]=n)}}function SY(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function rV(n,t,e,i,r,s,o,a){let u=t.consts,h=Eh(u,o),p=xv(t,n,2,i,h);return s&&TI(t,e,p,Eh(u,a),r),p.mergedAttrs=_g(p.mergedAttrs,p.attrs),p.attrs!==null&&tD(p,p.attrs,!1),p.mergedAttrs!==null&&tD(p,p.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,p),p}function sV(n,t){YD(n,t),OD(t)&&n.queries.elementEnd(t)}var Mw=class extends tC{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=Jf(t);return new wg(e,this.ngModule)}};function MY(n){return Object.keys(n).map(t=>{let[e,i,r]=n[t],s={propName:e,templateName:t,isSignal:(i&Yw.SignalBased)!==0};return r&&(s.transform=r),s})}function EY(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function TY(n,t,e){let i=t instanceof ba?t:t?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new eD(e,i):e}function AY(n){let t=n.get(Th,null);if(t===null)throw new wt(407,!1);let e=n.get(fY,null),i=n.get(op,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:i}}function DY(n,t){let e=(n.selectors[0][0]||"div").toLowerCase();return PB(t,e,e==="svg"?A3:e==="math"?d$:null)}var wg=class extends tV{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=MY(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=EY(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=oX(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,i,r){yr(22);let s=pi(null);try{let o=this.componentDef,a=i?["ng-version","19.2.14"]:aX(this.componentDef.selectors[0]),u=pI(0,null,null,1,0,null,null,null,null,[a],null),h=TY(o,r||this.ngModule,t),p=AY(h),v=p.rendererFactory.createRenderer(null,o),x=i?yX(v,i,o.encapsulation,h):DY(o,v),S=mI(null,u,null,512|LB(o),null,null,p,v,h,null,vB(x,h,!0));S[Bs]=x,qD(S);let D=null;try{let O=rV(Bs,u,S,"#host",()=>[this.componentDef],!0,0);x&&(kB(v,x,O),Pg(x,S)),Zw(u,S,O),cI(u,O,S),sV(u,O),e!==void 0&&IY(O,this.ngContentSelectors,e),D=du(O.index,S),S[xs]=D[xs],xI(u,S,null)}catch(O){throw D!==null&&jA(D),jA(S),O}finally{yr(23),XD()}return new nD(this.componentType,S)}finally{pi(s)}}},nD=class extends dY{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e){super(),this._rootLView=e,this._tNode=FD(e[di],Bs),this.location=Ig(this._tNode,e),this.instance=du(this._tNode.index,e)[xs],this.hostView=this.changeDetectorRef=new dv(e,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let r=this._rootLView,s=bI(i,r[di],r,t,e);this.previousInputValues.set(t,e);let o=du(i.index,r);EI(o,1)}get injector(){return new Yf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function IY(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let s=e[r];i.push(s!=null&&s.length?Array.from(s):null)}}var Cr=(()=>{class n{static __NG_ELEMENT_ID__=PY}return n})();function PY(){let n=Co();return aV(n,Hn())}var RY=Cr,oV=class extends RY{_lContainer;_hostTNode;_hostLView;constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Ig(this._hostTNode,this._hostLView)}get injector(){return new Yf(this._hostTNode,this._hostLView)}get parentInjector(){let t=ZD(this._hostTNode,this._hostLView);if(G3(t)){let e=gw(t,this._hostLView),i=mw(t),r=e[di].data[i+8];return new Yf(r,e)}else return new Yf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=NF(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-xo}createEmbeddedView(t,e,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=xg(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},s,o);return this.insertImpl(a,r,bg(this._hostTNode,o)),a}createComponent(t,e,i,r,s){let o=t&&!a$(t),a;if(o)a=e;else{let D=e||{};a=D.index,i=D.injector,r=D.projectableNodes,s=D.environmentInjector||D.ngModuleRef}let u=o?t:new wg(Jf(t)),h=i||this.parentInjector;if(!s&&u.ngModule==null){let O=(o?h:this.parentInjector).get(ba,null);O&&(s=O)}let p=Jf(u.componentType??{}),v=xg(this._lContainer,p?.id??null),x=v?.firstChild??null,S=u.create(h,r,x,s);return this.insertImpl(S.hostView,a,bg(this._hostTNode,v)),S}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(p$(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let u=r[wo],h=new oV(u,u[wa],u[wo]);h.detach(h.indexOf(t))}}let s=this._adjustIndex(e),o=this._lContainer;return bv(o,r,s,i),t.attachToViewContainerRef(),f3(yA(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=NF(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=uv(this._lContainer,e);i&&(cw(yA(this._lContainer),e),Kw(i[di],i))}detach(t){let e=this._adjustIndex(t,-1),i=uv(this._lContainer,e);return i&&cw(yA(this._lContainer),e)!=null?new dv(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function NF(n){return n[hw]}function yA(n){return n[hw]||(n[hw]=[])}function aV(n,t){let e,i=t[n.index];return fd(i)?e=i:(e=KB(i,t,null,n),t[n.index]=e,gI(t,e)),LY(e,t,n,i),new oV(e,n,t)}function kY(n,t){let e=n[Yr],i=e.createComment(""),r=mu(t,n),s=e.parentNode(r);return Cw(e,s,i,e.nextSibling(r),!1),i}var LY=FY,NY=()=>!1;function OY(n,t,e){return NY(n,t,e)}function FY(n,t,e,i){if(n[np])return;let r;e.type&8?r=uu(i):r=kY(t,e),n[np]=r}var iD=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},rD=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let s=0;s<i;s++){let o=e.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)AI(t,e).matches!==null&&this.queries[e].setDirty()}},Ew=class{flags;read;predicate;constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=GY(t):this.predicate=t}},sD=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,s=this.getByIndex(i).embeddedTView(t,r);s&&(s.indexInDeclarationView=i,e!==null?e.push(s):e=[s])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},oD=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(t,e,BY(e,s)),this.matchTNodeWithReadOption(t,e,iw(e,t,s,!1,!1))}else i===Us?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,iw(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Ar||r===Cr||r===Us&&e.type&4)this.addMatch(e.index,-2);else{let s=iw(e,t,r,!1,!1);s!==null&&this.addMatch(e.index,s)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function BY(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function VY(n,t){return n.type&11?Ig(n,t):n.type&4?eC(n,t):null}function UY(n,t,e,i){return e===-1?VY(t,n):e===-2?zY(n,t,i):lv(n,n[di],e,t)}function zY(n,t,e){if(e===Ar)return Ig(t,n);if(e===Us)return eC(t,n);if(e===Cr)return aV(t,n)}function lV(n,t,e,i){let r=t[dd].queries[i];if(r.matches===null){let s=n.data,o=e.matches,a=[];for(let u=0;o!==null&&u<o.length;u+=2){let h=o[u];if(h<0)a.push(null);else{let p=s[h];a.push(UY(t,p,o[u+1],e.metadata.read))}}r.matches=a}return r.matches}function aD(n,t,e,i){let r=n.queries.getByIndex(e),s=r.matches;if(s!==null){let o=lV(n,t,r,e);for(let a=0;a<s.length;a+=2){let u=s[a];if(u>0)i.push(o[a/2]);else{let h=s[a+1],p=t[-u];for(let v=xo;v<p.length;v++){let x=p[v];x[ep]===x[wo]&&aD(x[di],x,h,i)}if(p[vg]!==null){let v=p[vg];for(let x=0;x<v.length;x++){let S=v[x];aD(S[di],S,h,i)}}}}}return i}function HY(n,t){return n[dd].queries[t].queryList}function cV(n,t,e){let i=new HA((e&4)===4);return y$(n,t,i,i.destroy),(t[dd]??=new rD).queries.push(new iD(i))-1}function jY(n,t,e){let i=Zr();return i.firstCreatePass&&(uV(i,new Ew(n,t,e),-1),(t&2)===2&&(i.staticViewQueries=!0)),cV(i,Hn(),t)}function WY(n,t,e,i){let r=Zr();if(r.firstCreatePass){let s=Co();uV(r,new Ew(t,e,i),s.index),$Y(r,n),(e&2)===2&&(r.staticContentQueries=!0)}return cV(r,Hn(),e)}function GY(n){return n.split(",").map(t=>t.trim())}function uV(n,t,e){n.queries===null&&(n.queries=new sD),n.queries.track(new oD(t,e))}function $Y(n,t){let e=n.contentQueries||(n.contentQueries=[]),i=e.length?e[e.length-1]:-1;t!==i&&e.push(n.queries.length-1,t)}function AI(n,t){return n.queries.getByIndex(t)}function qY(n,t){let e=n[di],i=AI(e,t);return i.crossesNgTemplate?aD(e,n,t,[]):lV(e,n,i,t)}function dV(n,t){let e=Object.create(JF),i=new xw;e.value=n;function r(){return Xm(e),OF(e.value),e.value}return r[Za]=e,r.asReadonly=oB.bind(r),r.set=s=>{e.equal(e.value,s)||(Ym(e,s),i.emit(s))},r.update=s=>{OF(e.value),r.set(s(e.value))},r.subscribe=i.subscribe.bind(i),r.destroyRef=i.destroyRef,r}function OF(n){if(n===Nw)throw new wt(952,!1)}function FF(n,t){return dV(n,t)}function XY(n){return dV(Nw,n)}var hV=(FF.required=XY,FF);var ap=class{},DI=class{};function fV(n,t){return new Tw(n,t??null,[])}var Tw=class extends ap{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Mw(this);constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e;let s=g3(t);this._bootstrapComponents=AB(s.bootstrap),this._r3Injector=eB(t,e,[{provide:ap,useValue:this},{provide:tC,useValue:this.componentFactoryResolver},...i],_a(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},lD=class extends DI{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Tw(this.moduleType,t,[])}};var Aw=class extends ap{injector;componentFactoryResolver=new Mw(this);instance=null;constructor(t){super();let e=new ov([...t.providers,{provide:ap,useValue:this},{provide:tC,useValue:this.componentFactoryResolver}],t.parent||ND(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function wv(n,t,e=null){return new Aw({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var YY=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=y3(!1,e.type),r=i.length>0?wv([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Vt({token:n,providedIn:"environment",factory:()=>new n(qn(ba))})}return n})();function bt(n){return pv(()=>{let t=pV(n),e=Mn(Ke({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===cB.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(YY).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||hu.Emulated,styles:n.styles||va,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&yu("NgStandalone"),mV(e);let i=n.dependencies;return e.directiveDefs=BF(i,!1),e.pipeDefs=BF(i,!0),e.id=eZ(e),e})}function ZY(n){return Jf(n)||Y7(n)}function KY(n){return n!==null}function Yo(n){return pv(()=>({type:n.type,bootstrap:n.bootstrap||va,declarations:n.declarations||va,imports:n.imports||va,exports:n.exports||va,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function QY(n,t){if(n==null)return Qf;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a,u;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s,u=r[3]||null):(s=r,o=r,a=Yw.None,u=null),e[s]=[i,a,u],t[s]=o}return e}function JY(n){if(n==null)return Qf;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function Xn(n){return pv(()=>{let t=pV(n);return mV(t),t})}function II(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function pV(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||Qf,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||va,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:QY(n.inputs,t),outputs:JY(n.outputs),debugInfo:null}}function mV(n){n.features?.forEach(t=>t(n))}function BF(n,t){if(!n)return null;let e=t?Z7:ZY;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter(KY)}function eZ(n){let t=0,e=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of i.join("|"))t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function tZ(n){return Object.getPrototypeOf(n.prototype).constructor}function oi(n){let t=tZ(n.type),e=!0,i=[n];for(;t;){let r;if(cu(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new wt(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let o=n;o.inputs=vA(n.inputs),o.declaredInputs=vA(n.declaredInputs),o.outputs=vA(n.outputs);let a=r.hostBindings;a&&oZ(n,a);let u=r.viewQuery,h=r.contentQueries;if(u&&rZ(n,u),h&&sZ(n,h),nZ(n,r),T7(n.outputs,r.outputs),cu(r)&&r.data.animation){let p=n.data;p.animation=(p.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===oi&&(e=!1)}}t=Object.getPrototypeOf(t)}iZ(i)}function nZ(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e])}}function iZ(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=_g(r.hostAttrs,e=_g(e,r.hostAttrs))}}function vA(n){return n===Qf?{}:n===va?[]:n}function rZ(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function sZ(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,s)=>{t(i,r,s),e(i,r,s)}:n.contentQueries=t}function oZ(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function gV(n){return PI(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function aZ(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function PI(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function fp(n,t,e){return n[t]=e}function yV(n,t){return n[t]}function qo(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function hv(n,t,e,i){let r=qo(n,t,e);return qo(n,t+1,i)||r}function lZ(n,t,e,i,r){let s=hv(n,t,e,i);return qo(n,t+2,r)||s}function vV(n,t,e,i,r,s){let o=hv(n,t,e,i);return hv(n,t+2,r,s)||o}function cZ(n,t,e,i,r,s,o,a,u){let h=t.consts,p=xv(t,n,4,o||null,a||null);HD()&&TI(t,e,p,Eh(h,u),_I),p.mergedAttrs=_g(p.mergedAttrs,p.attrs),YD(t,p);let v=p.tView=pI(2,p,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,h,null);return t.queries!==null&&(t.queries.template(t,p),v.queries=t.queries.embeddedTView(p)),p}function Dw(n,t,e,i,r,s,o,a,u,h){let p=e+Bs,v=t.firstCreatePass?cZ(p,t,n,i,r,s,o,a,u):t.data[p];up(v,!1);let x=uZ(t,n,v,e);Ww()&&Qw(t,n,x,v),Pg(x,n);let S=KB(x,n,x,v);return n[p]=S,gI(n,S),OY(S,v,n),zw(v)&&Zw(t,n,v),u!=null&&yI(n,v,h),v}function It(n,t,e,i,r,s,o,a){let u=Hn(),h=Zr(),p=Eh(h.consts,s);return Dw(u,h,n,t,e,i,r,p,o,a),It}var uZ=dZ;function dZ(n,t,e,i){return Gw(!0),t[Yr].createComment("")}var _V=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var bV=new wn("");var xV=(()=>{class n{static \u0275prov=Vt({token:n,providedIn:"root",factory:()=>new cD})}return n})(),cD=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let e=t.zone,i=this.queues.get(e);i.has(t)&&(i.delete(t),this.queuedEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(t)||(this.queuedEffectCount++,i.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}};function Ah(n){return!!n&&typeof n.then=="function"}function RI(n){return!!n&&typeof n.subscribe=="function"}var wV=new wn("");function kI(n){return Bw([{provide:wV,multi:!0,useValue:n}])}var CV=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=Ue(wV,{optional:!0})??[];injector=Ue(Vs);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let s=El(this.injector,r);if(Ah(s))e.push(s);else if(RI(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});e.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nC=new wn("");function hZ(){jT(()=>{throw new wt(600,!1)})}function fZ(n){return n.isBoundToModule}var pZ=10;var lp=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Ue(rq);afterRenderManager=Ue(yB);zonelessEnabled=Ue(QD);rootEffectScheduler=Ue(xV);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Xr;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=Ue(Dg).hasPendingTasks.pipe(ui(e=>!e));constructor(){Ue(kg,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=Ue(ba);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){return this.bootstrapImpl(e,i)}bootstrapImpl(e,i,r=Vs.NULL){yr(10);let s=e instanceof tV;if(!this._injector.get(CV).done){let S="";throw new wt(405,S)}let a;s?a=e:a=this._injector.get(tC).resolveComponentFactory(e),this.componentTypes.push(a.componentType);let u=fZ(a)?void 0:this._injector.get(ap),h=i||a.selector,p=a.create(r,[],h,u),v=p.location.nativeElement,x=p.injector.get(bV,null);return x?.registerApplication(v),p.onDestroy(()=>{this.detachView(p.hostView),rw(this.components,p),x?.unregisterApplication(v)}),this._loadComponent(p),yr(11,p),p}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){yr(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(oI.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new wt(101,!1);let e=pi(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,pi(e),this.afterTick.next(),yr(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Th,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<pZ;)yr(14),this.synchronizeOnce(),yr(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)mZ(i,r,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Hw(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;rw(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(nC,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>rw(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new wt(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rw(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function mZ(n,t,e,i){if(!e&&!Hw(n))return;qB(n,t,e&&!i?0:1)}function Zo(n,t,e,i){let r=Hn(),s=dp();if(qo(r,s,t)){let o=Zr(),a=jw();MX(a,r,n,t,e,i)}return Zo}function SV(n,t,e,i){return qo(n,dp(),e)?t+Zf(e)+i:Ja}function gZ(n,t,e,i,r,s){let o=M$(),a=hv(n,o,e,r);return GD(2),a?t+Zf(e)+i+Zf(r)+s:Ja}function Jx(n,t){return n<<17|t<<2}function cp(n){return n>>17&32767}function yZ(n){return(n&2)==2}function vZ(n,t){return n&131071|t<<17}function uD(n){return n|2}function Cg(n){return(n&131068)>>2}function _A(n,t){return n&-131069|t<<2}function _Z(n){return(n&1)===1}function dD(n){return n|1}function bZ(n,t,e,i,r,s){let o=s?t.classBindings:t.styleBindings,a=cp(o),u=Cg(o);n[i]=e;let h=!1,p;if(Array.isArray(e)){let v=e;p=v[1],(p===null||gv(v,p)>0)&&(h=!0)}else p=e;if(r)if(u!==0){let x=cp(n[a+1]);n[i+1]=Jx(x,a),x!==0&&(n[x+1]=_A(n[x+1],i)),n[a+1]=vZ(n[a+1],i)}else n[i+1]=Jx(a,0),a!==0&&(n[a+1]=_A(n[a+1],i)),a=i;else n[i+1]=Jx(u,0),a===0?a=i:n[u+1]=_A(n[u+1],i),u=i;h&&(n[i+1]=uD(n[i+1])),VF(n,p,i,!0),VF(n,p,i,!1),xZ(t,p,n,i,s),o=Jx(a,u),s?t.classBindings=o:t.styleBindings=o}function xZ(n,t,e,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof t=="string"&&gv(s,t)>=0&&(e[i+1]=dD(e[i+1]))}function VF(n,t,e,i){let r=n[e+1],s=t===null,o=i?cp(r):Cg(r),a=!1;for(;o!==0&&(a===!1||s);){let u=n[o],h=n[o+1];wZ(u,t)&&(a=!0,n[o+1]=i?dD(h):uD(h)),o=i?cp(h):Cg(h)}a&&(n[e+1]=i?uD(r):dD(r))}function wZ(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?gv(n,t)>=0:!1}var Fs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function MV(n){return n.substring(Fs.key,Fs.keyEnd)}function CZ(n){return n.substring(Fs.value,Fs.valueEnd)}function SZ(n){return AV(n),EV(n,Sg(n,0,Fs.textEnd))}function EV(n,t){let e=Fs.textEnd;return e===t?-1:(t=Fs.keyEnd=EZ(n,Fs.key=t,e),Sg(n,t,e))}function MZ(n){return AV(n),TV(n,Sg(n,0,Fs.textEnd))}function TV(n,t){let e=Fs.textEnd,i=Fs.key=Sg(n,t,e);return e===i?-1:(i=Fs.keyEnd=TZ(n,i,e),i=UF(n,i,e,58),i=Fs.value=Sg(n,i,e),i=Fs.valueEnd=AZ(n,i,e),UF(n,i,e,59))}function AV(n){Fs.key=0,Fs.keyEnd=0,Fs.value=0,Fs.valueEnd=0,Fs.textEnd=n.length}function Sg(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function EZ(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function TZ(n,t,e){let i;for(;t<e&&((i=n.charCodeAt(t))===45||i===95||(i&-33)>=65&&(i&-33)<=90||i>=48&&i<=57);)t++;return t}function UF(n,t,e,i){return t=Sg(n,t,e),t<e&&t++,t}function AZ(n,t,e){let i=-1,r=-1,s=-1,o=t,a=o;for(;o<e;){let u=n.charCodeAt(o++);if(u===59)return a;u===34||u===39?a=o=zF(n,u,o,e):t===o-4&&s===85&&r===82&&i===76&&u===40?a=o=zF(n,41,o,e):u>32&&(a=o),s=r,r=i,i=u&-33}return a}function zF(n,t,e,i){let r=-1,s=e;for(;s<i;){let o=n.charCodeAt(s++);if(o==t&&r!==92)return s;o==92&&r===92?r=0:r=o}throw new Error}function Le(n,t,e){let i=Hn(),r=dp();if(qo(i,r,t)){let s=Zr(),o=jw();vI(s,o,i,n,t,i[Yr],e,!1)}return Le}function hD(n,t,e,i,r){bI(t,n,e,r?"class":"style",i)}function kr(n,t,e){return PV(n,t,e,!1),kr}function Mi(n,t){return PV(n,t,null,!0),Mi}function DV(n){LI(LV,DZ,n,!1)}function DZ(n,t){for(let e=MZ(t);e>=0;e=TV(t,e))LV(n,MV(t),CZ(t))}function vu(n){LI(NZ,IV,n,!0)}function IV(n,t){for(let e=SZ(t);e>=0;e=EV(t,e))mv(n,MV(t),!0)}function PV(n,t,e,i){let r=Hn(),s=Zr(),o=GD(2);if(s.firstUpdatePass&&kV(s,n,o,i),t!==Ja&&qo(r,o,t)){let a=s.data[md()];NV(s,a,r,r[Yr],n,r[o+1]=FZ(t,e),i,o)}}function LI(n,t,e,i){let r=Zr(),s=GD(2);r.firstUpdatePass&&kV(r,null,s,i);let o=Hn();if(e!==Ja&&qo(o,s,e)){let a=r.data[md()];if(OV(a,i)&&!RV(r,s)){let u=i?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(e=MA(u,e||"")),hD(r,a,o,e,i)}else OZ(r,a,o,o[Yr],o[s+1],o[s+1]=LZ(n,t,e),i,s)}}function RV(n,t){return t>=n.expandoStartIndex}function kV(n,t,e,i){let r=n.data;if(r[e+1]===null){let s=r[md()],o=RV(n,e);OV(s,i)&&t===null&&!o&&(t=!1),t=IZ(r,s,t,i),bZ(r,s,t,e,o,i)}}function IZ(n,t,e,i){let r=I$(n),s=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=bA(null,n,t,e,i),e=fv(e,t.attrs,i),s=null);else{let o=t.directiveStylingLast;if(o===-1||n[o]!==r)if(e=bA(r,n,t,e,i),s===null){let u=PZ(n,t,i);u!==void 0&&Array.isArray(u)&&(u=bA(null,n,t,u[1],i),u=fv(u,t.attrs,i),RZ(n,t,i,u))}else s=kZ(n,t,i)}return s!==void 0&&(i?t.residualClasses=s:t.residualStyles=s),e}function PZ(n,t,e){let i=e?t.classBindings:t.styleBindings;if(Cg(i)!==0)return n[cp(i)]}function RZ(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[cp(r)]=i}function kZ(n,t,e){let i,r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=fv(i,o,e)}return fv(i,t.attrs,e)}function bA(n,t,e,i,r){let s=null,o=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<o&&(s=t[a],i=fv(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(e.directiveStylingLast=a),i}function fv(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let s=0;s<t.length;s++){let o=t[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),mv(n,o,e?!0:t[++s]))}return n===void 0?null:n}function LZ(n,t,e){if(e==null||e==="")return va;let i=[],r=hp(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else typeof r=="string"&&t(i,r);return i}function LV(n,t,e){mv(n,t,hp(e))}function NZ(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&mv(n,i,e)}function OZ(n,t,e,i,r,s,o,a){r===Ja&&(r=va);let u=0,h=0,p=0<r.length?r[0]:null,v=0<s.length?s[0]:null;for(;p!==null||v!==null;){let x=u<r.length?r[u+1]:void 0,S=h<s.length?s[h+1]:void 0,D=null,O;p===v?(u+=2,h+=2,x!==S&&(D=v,O=S)):v===null||p!==null&&p<v?(u+=2,D=p):(h+=2,D=v,O=S),D!==null&&NV(n,t,e,i,D,O,o,a),p=u<r.length?r[u]:null,v=h<s.length?s[h]:null}}function NV(n,t,e,i,r,s,o,a){if(!(t.type&3))return;let u=n.data,h=u[a+1],p=_Z(h)?HF(u,t,e,r,Cg(h),o):void 0;if(!Iw(p)){Iw(s)||yZ(h)&&(s=HF(u,null,e,r,a,o));let v=D3(md(),e);jX(i,o,v,r,s)}}function HF(n,t,e,i,r,s){let o=t===null,a;for(;r>0;){let u=n[r],h=Array.isArray(u),p=h?u[1]:u,v=p===null,x=e[r+1];x===Ja&&(x=v?va:void 0);let S=v?uA(x,i):p===i?x:void 0;if(h&&!Iw(S)&&(S=uA(u,i)),Iw(S)&&(a=S,o))return a;let D=n[r+1];r=o?cp(D):Cg(D)}if(t!==null){let u=s?t.residualClasses:t.residualStyles;u!=null&&(a=uA(u,i))}return a}function Iw(n){return n!==void 0}function FZ(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=_a(hp(n)))),n}function OV(n,t){return(n.flags&(t?8:16))!==0}function FV(n,t,e){let i=Hn(),r=SV(i,n,t,e);LI(mv,IV,r,!0)}function NI(){return Hn()[xa][xs]}var fD=class{destroy(t){}updateValue(t,e){}swap(t,e){let i=Math.min(t,e),r=Math.max(t,e),s=this.detach(r);if(r-i>1){let o=this.detach(i);this.attach(i,s),this.attach(r,o)}else this.attach(i,s)}move(t,e){this.attach(e,this.detach(t))}};function xA(n,t,e,i,r){return n===e&&Object.is(t,i)?1:Object.is(r(n,t),r(e,i))?-1:0}function BZ(n,t,e){let i,r,s=0,o=n.length-1,a=void 0;if(Array.isArray(t)){let u=t.length-1;for(;s<=o&&s<=u;){let h=n.at(s),p=t[s],v=xA(s,h,s,p,e);if(v!==0){v<0&&n.updateValue(s,p),s++;continue}let x=n.at(o),S=t[u],D=xA(o,x,u,S,e);if(D!==0){D<0&&n.updateValue(o,S),o--,u--;continue}let O=e(s,h),N=e(o,x),T=e(s,p);if(Object.is(T,N)){let j=e(u,S);Object.is(j,O)?(n.swap(s,o),n.updateValue(o,S),u--,o--):n.move(o,s),n.updateValue(s,p),s++;continue}if(i??=new Pw,r??=WF(n,s,o,e),pD(n,i,s,T))n.updateValue(s,p),s++,o++;else if(r.has(T))i.set(O,n.detach(s)),o--;else{let j=n.create(s,t[s]);n.attach(s,j),s++,o++}}for(;s<=u;)jF(n,i,e,s,t[s]),s++}else if(t!=null){let u=t[Symbol.iterator](),h=u.next();for(;!h.done&&s<=o;){let p=n.at(s),v=h.value,x=xA(s,p,s,v,e);if(x!==0)x<0&&n.updateValue(s,v),s++,h=u.next();else{i??=new Pw,r??=WF(n,s,o,e);let S=e(s,v);if(pD(n,i,s,S))n.updateValue(s,v),s++,o++,h=u.next();else if(!r.has(S))n.attach(s,n.create(s,v)),s++,o++,h=u.next();else{let D=e(s,p);i.set(D,n.detach(s)),o--}}}for(;!h.done;)jF(n,i,e,n.length,h.value),h=u.next()}for(;s<=o;)n.destroy(n.detach(o--));i?.forEach(u=>{n.destroy(u)})}function pD(n,t,e,i){return t!==void 0&&t.has(i)?(n.attach(e,t.get(i)),t.delete(i),!0):!1}function jF(n,t,e,i,r){if(pD(n,t,i,e(i,r)))n.updateValue(i,r);else{let s=n.create(i,r);n.attach(i,s)}}function WF(n,t,e,i){let r=new Set;for(let s=t;s<=e;s++)r.add(i(s,n.at(s)));return r}var Pw=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let e=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let i=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,i]of this.kvMap)if(t(i,e),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),t(i,e)}}};function Kt(n,t){yu("NgControlFlow");let e=Hn(),i=dp(),r=e[i]!==Ja?e[i]:-1,s=r!==-1?Rw(e,Bs+r):void 0,o=0;if(qo(e,i,n)){let a=pi(null);try{if(s!==void 0&&JB(s,o),n!==-1){let u=Bs+n,h=Rw(e,u),p=vD(e[di],u),v=xg(h,p.tView.ssrId),x=_v(e,p,t,{dehydratedView:v});bv(h,x,o,bg(p,v))}}finally{pi(a)}}else if(s!==void 0){let a=QB(s,o);a!==void 0&&(a[xs]=t)}}var mD=class{lContainer;$implicit;$index;constructor(t,e,i){this.lContainer=t,this.$implicit=e,this.$index=i}get $count(){return this.lContainer.length-xo}};function BV(n){return n}function Cv(n,t){return t}var gD=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,e,i){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=i}};function ws(n,t,e,i,r,s,o,a,u,h,p,v,x){yu("NgControlFlow");let S=Hn(),D=Zr(),O=u!==void 0,N=Hn(),T=a?o.bind(N[xa][xs]):o,j=new gD(O,T);N[Bs+n]=j,Dw(S,D,n+1,t,e,i,r,Eh(D.consts,s)),O&&Dw(S,D,n+2,u,h,p,v,Eh(D.consts,x))}var yD=class extends fD{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,e,i){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=i}get length(){return this.lContainer.length-xo}at(t){return this.getLView(t)[xs].$implicit}attach(t,e){let i=e[gg];this.needsIndexUpdate||=t!==this.length,bv(this.lContainer,e,t,bg(this.templateTNode,i))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,VZ(this.lContainer,t)}create(t,e){let i=xg(this.lContainer,this.templateTNode.tView.ssrId),r=_v(this.hostLView,this.templateTNode,new mD(this.lContainer,e,t),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(t){Kw(t[di],t),this.operationsCounter?.recordDestroy()}updateValue(t,e){this.getLView(t)[xs].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[xs].$index=t}getLView(t){return UZ(this.lContainer,t)}};function Cs(n){let t=pi(null),e=md();try{let i=Hn(),r=i[di],s=i[e],o=e+1,a=Rw(i,o);if(s.liveCollection===void 0){let h=vD(r,o);s.liveCollection=new yD(a,i,h)}else s.liveCollection.reset();let u=s.liveCollection;if(BZ(u,n,s.trackByFn),u.updateIndexes(),s.hasEmptyBlock){let h=dp(),p=u.length===0;if(qo(i,h,p)){let v=e+2,x=Rw(i,v);if(p){let S=vD(r,v),D=xg(x,S.tView.ssrId),O=_v(i,S,void 0,{dehydratedView:D});bv(x,O,0,bg(S,D))}else JB(x,0)}}}finally{pi(t)}}function Rw(n,t){return n[t]}function VZ(n,t){return uv(n,t)}function UZ(n,t){return QB(n,t)}function vD(n,t){return FD(n,t)}function ge(n,t,e,i){let r=Hn(),s=Zr(),o=Bs+n,a=r[Yr],u=s.firstCreatePass?rV(o,s,r,t,_I,HD(),e,i):s.data[o],h=zZ(s,r,u,a,t,n);r[o]=h;let p=zw(u);return up(u,!0),kB(a,h,u),!CI(u)&&Ww()&&Qw(s,r,h,u),(v$()===0||p)&&Pg(h,r),_$(),p&&(Zw(s,r,u),cI(s,u,r)),i!==null&&yI(r,u),ge}function ye(){let n=Co();jD()?WD():(n=n.parent,up(n,!1));let t=n;x$(t)&&w$(),b$();let e=Zr();return e.firstCreatePass&&sV(e,t),t.classesWithoutHost!=null&&F$(t)&&hD(e,t,Hn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&B$(t)&&hD(e,t,Hn(),t.stylesWithoutHost,!1),ye}function it(n,t,e,i){return ge(n,t,e,i),ye(),it}var zZ=(n,t,e,i,r,s)=>(Gw(!0),PB(i,r,L$()));function HZ(n,t,e,i,r){let s=t.consts,o=Eh(s,i),a=xv(t,n,8,"ng-container",o);o!==null&&tD(a,o,!0);let u=Eh(s,r);return HD()&&TI(t,e,a,u,_I),a.mergedAttrs=_g(a.mergedAttrs,a.attrs),t.queries!==null&&t.queries.elementStart(t,a),a}function Ko(n,t,e){let i=Hn(),r=Zr(),s=n+Bs,o=r.firstCreatePass?HZ(s,r,i,t,e):r.data[s];up(o,!0);let a=jZ(r,i,o,n);return i[s]=a,Ww()&&Qw(r,i,a,o),Pg(a,i),zw(o)&&(Zw(r,i,o),cI(r,o,i)),e!=null&&yI(i,o),Ko}function Qo(){let n=Co(),t=Zr();return jD()?WD():(n=n.parent,up(n,!1)),t.firstCreatePass&&(YD(t,n),OD(n)&&t.queries.elementEnd(n)),Qo}function Jo(n,t,e){return Ko(n,t,e),Qo(),Jo}var jZ=(n,t,e,i)=>(Gw(!0),uX(t[Yr],""));function An(){return Hn()}function OI(n,t,e){let i=Hn(),r=dp();if(qo(i,r,t)){let s=Zr(),o=jw();vI(s,o,i,n,t,i[Yr],e,!0)}return OI}var qf=void 0;function WZ(n){let t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&e===0?1:5}var GZ=["en",[["a","p"],["AM","PM"],qf],[["AM","PM"],qf,qf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qf,"{1} 'at' {0}",qf],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",WZ],wA={};function Al(n){let t=$Z(n),e=GF(t);if(e)return e;let i=t.split("-")[0];if(e=GF(i),e)return e;if(i==="en")return GZ;throw new wt(701,!1)}function GF(n){return n in wA||(wA[n]=cd.ng&&cd.ng.common&&cd.ng.common.locales&&cd.ng.common.locales[n]),wA[n]}var cs=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(cs||{});function $Z(n){return n.toLowerCase().replace(/_/g,"-")}var kw="en-US";var qZ=kw;function XZ(n){typeof n=="string"&&(qZ=n.toLowerCase().replace(/_/g,"-"))}function $F(n,t,e){return function i(r){if(r===Function)return e;let s=Eg(n)?du(n.index,t):t;EI(s,5);let o=t[xs],a=qF(t,o,e,r),u=i.__ngNextListenerFn__;for(;u;)a=qF(t,o,u,r)&&a,u=u.__ngNextListenerFn__;return a}}function qF(n,t,e,i){let r=pi(null);try{return yr(6,t,e),e(i)!==!1}catch(s){return YZ(n,s),!1}finally{yr(7,t,e),pi(r)}}function YZ(n,t){let e=n[yg],i=e?e.get(bc,null):null;i&&i.handleError(t)}function XF(n,t,e,i,r,s){let o=t[e],a=t[di],h=a.data[e].outputs[i],p=o[h],v=a.firstCreatePass?zD(a):null,x=UD(t),S=p.subscribe(s),D=x.length;x.push(s,S),v&&v.push(r,n.index,D,-(D+1))}function yt(n,t,e,i){let r=Hn(),s=Zr(),o=Co();return VV(s,r,r[Yr],o,n,t,i),yt}function ZZ(n,t,e,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===e&&r[s+1]===i){let a=t[dw],u=r[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function VV(n,t,e,i,r,s,o){let a=zw(i),h=n.firstCreatePass?zD(n):null,p=UD(t),v=!0;if(i.type&3||o){let x=mu(i,t),S=o?o(x):x,D=p.length,O=o?T=>o(uu(T[i.index])):i.index,N=null;if(!o&&a&&(N=ZZ(n,t,r,i.index)),N!==null){let T=N.__ngLastListenerFn__||N;T.__ngNextListenerFn__=s,N.__ngLastListenerFn__=s,v=!1}else{s=$F(i,t,s),wq(t,S,r,s);let T=e.listen(S,r,s);p.push(s,T),h&&h.push(r,O,D,D+1)}}else s=$F(i,t,s);if(v){let x=i.outputs?.[r],S=i.hostDirectiveOutputs?.[r];if(S&&S.length)for(let D=0;D<S.length;D+=2){let O=S[D],N=S[D+1];XF(i,t,O,N,r,s)}if(x&&x.length)for(let D of x)XF(i,t,D,r,r,s)}}function Ae(n=1){return R$(n)}function KZ(n,t){let e=null,i=tX(n);for(let r=0;r<t.length;r++){let s=t[r];if(s==="*"){e=r;continue}if(i===null?IB(n,s,!0):rX(i,s))return r}return e}function _u(n){let t=Hn()[xa][wa];if(!t.projection){let e=n?n.length:1,i=t.projection=$7(e,null),r=i.slice(),s=t.child;for(;s!==null;){if(s.type!==128){let o=n?KZ(s,n):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s)}s=s.next}}}function Dl(n,t=0,e,i,r,s){let o=Hn(),a=Zr(),u=i?n+1:null;u!==null&&Dw(o,a,u,i,r,s,null,e);let h=xv(a,Bs+n,16,null,e||null);h.projection===null&&(h.projection=t),WD();let v=!o[gg]||k3();o[xa][wa].projection[h.projection]===null&&u!==null?QZ(o,a,u):v&&!CI(h)&&zX(a,o,h)}function QZ(n,t,e){let i=Bs+e,r=t.data[i],s=n[i],o=xg(s,r.tView.ssrId),a=_v(n,r,void 0,{dehydratedView:o});bv(s,a,0,bg(r,o))}function ea(n,t,e,i){WY(n,t,e,i)}function Bi(n,t,e){jY(n,t,e)}function jn(n){let t=Hn(),e=Zr(),i=O3();$D(i+1);let r=AI(e,i);if(n.dirty&&f$(t)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let s=qY(t,i);n.reset(s,aq),n.notifyOnChanges()}return!0}return!1}function Wn(){return HY(Hn(),O3())}function zr(n){let t=S$();return BD(t,Bs+n)}function ot(n,t=""){let e=Hn(),i=Zr(),r=n+Bs,s=i.firstCreatePass?xv(i,r,1,t,null):i.data[r],o=JZ(i,e,s,t,n);e[r]=o,Ww()&&Qw(i,e,o,s),up(s,!1)}var JZ=(n,t,e,i,r)=>(Gw(!0),lX(t[Yr],i));function Kr(n){return Ei("",n,""),Kr}function Ei(n,t,e){let i=Hn(),r=SV(i,n,t,e);return r!==Ja&&UV(i,md(),r),Ei}function iC(n,t,e,i,r){let s=Hn(),o=gZ(s,n,t,e,i,r);return o!==Ja&&UV(s,md(),o),iC}function UV(n,t,e){let i=D3(t,n);cX(n[Yr],i,e)}function Sv(n,t,e){aB(t)&&(t=t());let i=Hn(),r=dp();if(qo(i,r,t)){let s=Zr(),o=jw();vI(s,o,i,n,t,i[Yr],e,!1)}return Sv}function rC(n,t){let e=aB(n);return e&&n.set(t),e}function Mv(n,t){let e=Hn(),i=Zr(),r=Co();return VV(i,e,e[Yr],r,n,t),Mv}function eK(n,t,e){let i=Zr();if(i.firstCreatePass){let r=cu(n);_D(e,i.data,i.blueprint,r,!0),_D(t,i.data,i.blueprint,r,!1)}}function _D(n,t,e,i,r){if(n=$o(n),Array.isArray(n))for(let s=0;s<n.length;s++)_D(n[s],t,e,i,r);else{let s=Zr(),o=Hn(),a=Co(),u=mg(n)?n:$o(n.provide),h=b3(n),p=a.providerIndexes&1048575,v=a.directiveStart,x=a.providerIndexes>>20;if(mg(n)||!n.multi){let S=new sp(h,r,En),D=SA(u,t,r?p:p+x,v);D===-1?(FA(vw(a,o),s,u),CA(s,n,t.length),t.push(u),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(S),o.push(S)):(e[D]=S,o[D]=S)}else{let S=SA(u,t,p+x,v),D=SA(u,t,p,p+x),O=S>=0&&e[S],N=D>=0&&e[D];if(r&&!N||!r&&!O){FA(vw(a,o),s,u);let T=iK(r?nK:tK,e.length,r,i,h);!r&&N&&(e[D].providerFactory=T),CA(s,n,t.length,0),t.push(u),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(T),o.push(T)}else{let T=zV(e[r?D:S],h,!r&&i);CA(s,n,S>-1?S:D,T)}!r&&i&&N&&e[D].componentProviders++}}}function CA(n,t,e,i){let r=mg(t),s=t$(t);if(r||s){let u=(s?$o(t.useClass):t).prototype.ngOnDestroy;if(u){let h=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let p=h.indexOf(e);p===-1?h.push(e,[i,u]):h[p+1].push(i,u)}else h.push(e,u)}}}function zV(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function SA(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function tK(n,t,e,i,r){return bD(this.multi,[])}function nK(n,t,e,i,r){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=lv(i,i[di],this.providerFactory.index,r);o=u.slice(0,a),bD(s,o);for(let h=a;h<u.length;h++)o.push(u[h])}else o=[],bD(s,o);return o}function bD(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function iK(n,t,e,i,r){let s=new sp(n,e,En);return s.multi=[],s.index=t,s.componentProviders=0,zV(s,r,i&&!e),s}function Mo(n,t=[]){return e=>{e.providersResolver=(i,r)=>eK(i,r?r(n):n,t)}}function sC(n,t,e){let i=pd()+n,r=Hn();return r[i]===Ja?fp(r,i,e?t.call(e):t()):yV(r,i)}function oC(n,t,e,i){return WV(Hn(),pd(),n,t,e,i)}function aC(n,t,e,i,r){return GV(Hn(),pd(),n,t,e,i,r)}function Lg(n,t,e,i,r,s){return rK(Hn(),pd(),n,t,e,i,r,s)}function Dh(n,t,e,i,r,s,o){return sK(Hn(),pd(),n,t,e,i,r,s,o)}function HV(n,t,e,i,r,s,o,a){let u=pd()+n,h=Hn(),p=vV(h,u,e,i,r,s);return qo(h,u+4,o)||p?fp(h,u+5,a?t.call(a,e,i,r,s,o):t(e,i,r,s,o)):yV(h,u+5)}function jV(n,t,e,i){return oK(Hn(),pd(),n,t,e,i)}function Ev(n,t){let e=n[t];return e===Ja?void 0:e}function WV(n,t,e,i,r,s){let o=t+e;return qo(n,o,r)?fp(n,o+1,s?i.call(s,r):i(r)):Ev(n,o+1)}function GV(n,t,e,i,r,s,o){let a=t+e;return hv(n,a,r,s)?fp(n,a+2,o?i.call(o,r,s):i(r,s)):Ev(n,a+2)}function rK(n,t,e,i,r,s,o,a){let u=t+e;return lZ(n,u,r,s,o)?fp(n,u+3,a?i.call(a,r,s,o):i(r,s,o)):Ev(n,u+3)}function sK(n,t,e,i,r,s,o,a,u){let h=t+e;return vV(n,h,r,s,o,a)?fp(n,h+4,u?i.call(u,r,s,o,a):i(r,s,o,a)):Ev(n,h+4)}function oK(n,t,e,i,r,s){let o=t+e,a=!1;for(let u=0;u<r.length;u++)qo(n,o++,r[u])&&(a=!0);return a?fp(n,o,i.apply(s,r)):Ev(n,o)}function Il(n,t){let e=Zr(),i,r=n+Bs;e.firstCreatePass?(i=aK(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let s=i.factory||(i.factory=Kf(i.type,!0)),o,a=ya(En);try{let u=yw(!1),h=s();return yw(u),h$(e,Hn(),r,h),h}finally{ya(a)}}function aK(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function Tv(n,t,e){let i=n+Bs,r=Hn(),s=BD(r,i);return $V(r,i)?WV(r,pd(),t,s.transform,e,s):s.transform(e)}function pp(n,t,e,i){let r=n+Bs,s=Hn(),o=BD(s,r);return $V(s,r)?GV(s,pd(),t,o.transform,e,i,o):o.transform(e,i)}function $V(n,t){return n[di].data[t].pure}function FI(n,t){return eC(n,t)}var xD=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},qV=(()=>{class n{compileModuleSync(e){return new lD(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=g3(e),s=AB(r.declarations).reduce((o,a)=>{let u=Jf(a);return u&&o.push(new wg(u)),o},[]);return new xD(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lK=(()=>{class n{zone=Ue(xr);changeDetectionScheduler=Ue(op);applicationRef=Ue(lp);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cK=new wn("",{factory:()=>!1});function XV({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new xr(Mn(Ke({},ZV()),{scheduleInRootZone:e})),[{provide:xr,useFactory:n},{provide:sv,multi:!0,useFactory:()=>{let i=Ue(lK,{optional:!0});return()=>i.initialize()}},{provide:sv,multi:!0,useFactory:()=>{let i=Ue(uK);return()=>{i.initialize()}}},t===!0?{provide:nB,useValue:!0}:[],{provide:iB,useValue:e??tB}]}function YV(n){let t=n?.ignoreChangesOutsideZone,e=n?.scheduleInRootZone,i=XV({ngZoneFactory:()=>{let r=ZV(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&yu("NgZone_CoalesceEvent"),new xr(r)},ignoreChangesOutsideZone:t,scheduleInRootZone:e});return Bw([{provide:cK,useValue:!0},{provide:QD,useValue:!1},i])}function ZV(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var uK=(()=>{class n{subscription=new ts;initialized=!1;zone=Ue(xr);pendingTasks=Ue(Dg);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xr.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xr.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dK=(()=>{class n{appRef=Ue(lp);taskService=Ue(Dg);ngZone=Ue(xr);zonelessEnabled=Ue(QD);tracing=Ue(kg,{optional:!0});disableScheduling=Ue(nB,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ts;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(bw):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Ue(iB,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof zA||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let i=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?yF:rB;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(bw+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,yF(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hK(){return typeof $localize<"u"&&$localize.locale||kw}var lC=new wn("",{providedIn:"root",factory:()=>Ue(lC,Ci.Optional|Ci.SkipSelf)||hK()});var wD=new wn(""),fK=new wn("");function tv(n){return!n.moduleRef}function pK(n){let t=tv(n)?n.r3Injector:n.moduleRef.injector,e=t.get(xr);return e.run(()=>{tv(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(bc,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:s=>{i.handleError(s)}})}),tv(n)){let s=()=>t.destroy(),o=n.platformInjector.get(wD);o.add(s),t.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(wD);o.add(s),n.moduleRef.onDestroy(()=>{rw(n.allPlatformModules,n.moduleRef),r.unsubscribe(),o.delete(s)})}return gK(i,e,()=>{let s=t.get(CV);return s.runInitializers(),s.donePromise.then(()=>{let o=t.get(lC,kw);if(XZ(o||kw),!t.get(fK,!0))return tv(n)?t.get(lp):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(tv(n)){let u=t.get(lp);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return mK(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function mK(n,t){let e=n.injector.get(lp);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new wt(-403,!1);t.push(n)}function gK(n,t,e){try{let i=e();return Ah(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}var sw=null;function yK(n=[],t){return Vs.create({name:t,providers:[{provide:Vw,useValue:"platform"},{provide:wD,useValue:new Set([()=>sw=null])},...n]})}function vK(n=[]){if(sw)return sw;let t=yK(n);return sw=t,hZ(),_K(t),t}function _K(n){let t=n.get(iI,null);El(n,()=>{t?.forEach(e=>e())})}var Ss=(()=>{class n{static __NG_ELEMENT_ID__=bK}return n})();function bK(n){return xK(Co(),Hn(),(n&16)===16)}function xK(n,t,e){if(Eg(n)&&!e){let i=du(n.index,t);return new dv(i,i)}else if(n.type&175){let i=t[xa];return new dv(i,t)}return null}var CD=class{constructor(){}supports(t){return gV(t)}create(t){return new SD(t)}},wK=(n,t)=>t,SD=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||wK}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){let o=!i||e&&e.currentIndex<YF(i,r,s)?e:i,a=YF(o,r,s),u=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(e=e._next,o.previousIndex==null)r++;else{s||(s=[]);let h=a-r,p=u-r;if(h!=p){for(let x=0;x<h;x++){let S=x<s.length?s[x]:s[x]=0,D=S+x;p<=D&&D<h&&(s[x]=S+1)}let v=o.previousIndex;s[v]=p-h}}a!==u&&t(o,a,u)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!gV(t))throw new wt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,s,o;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,s,o,a),i=!0):(i&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next}else r=0,aZ(t,a=>{o=this._trackByFn(r,a),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,a,o,r),i=!0):(i&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new MD(e,i),s,r)),t}_verifyReinsertion(t,e,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,s=t._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Lw),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Lw),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},MD=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},ED=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},Lw=class{map=new Map;put(t){let e=t.trackById,i=this.map.get(e);i||(i=new ED,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function YF(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}var TD=class{constructor(){}supports(t){return t instanceof Map||PI(t)}create(){return new AD}},AD=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||PI(t)))throw new wt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{let s=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let r=this._records.get(t);this._maybeAddToChanges(r,e);let s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}let i=new DD(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}},DD=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(t){this.key=t}};function ZF(){return new cC([new CD])}var cC=(()=>{class n{factories;static \u0275prov=Vt({token:n,providedIn:"root",factory:ZF});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||ZF()),deps:[[n,new h3,new d3]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new wt(901,!1)}}return n})();function KF(){return new Ih([new TD])}var Ih=(()=>{class n{static \u0275prov=Vt({token:n,providedIn:"root",factory:KF});factories;constructor(e){this.factories=e}static create(e,i){if(i){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||KF()),deps:[[n,new h3,new d3]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i)return i;throw new wt(901,!1)}}return n})();function KV(n){yr(8);try{let{rootComponent:t,appProviders:e,platformProviders:i}=n,r=vK(i),s=[XV({}),{provide:op,useExisting:dK},...e||[]],o=new Aw({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return pK({r3Injector:o.injector,platformInjector:r,rootComponent:t})}catch(t){return Promise.reject(t)}finally{yr(9)}}function Pi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Js(n,t=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):t}function ho(n){return $T(n)}function an(n,t){return HT(n,t?.equal)}var ID=class{[Za];constructor(t){this[Za]=t}destroy(){this[Za].destroy()}};function Wi(n,t){!t?.injector&&yv(Wi);let e=t?.injector??Ue(Vs),i=t?.manualCleanup!==!0?e.get(Tl):null,r,s=e.get(aI,null,{optional:!0}),o=e.get(op);return s!==null&&!t?.forceRoot?(r=MK(s.view,o,n),i instanceof _w&&i._lView===s.view&&(i=null)):r=EK(n,e.get(xV),o),r.injector=e,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new ID(r)}var QV=Mn(Ke({},qm),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:cv,run(){if(this.dirty=!1,this.hasRun&&!vx(this))return;this.hasRun=!0;let n=i=>(this.cleanupFns??=[]).push(i),t=X0(this),e=pw(!1);try{this.maybeCleanup(),this.fn(n)}finally{pw(e),yx(this,t)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),CK=Mn(Ke({},QV),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Y0(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),SK=Mn(Ke({},QV),{consumerMarkedDirty(){this.view[ri]|=8192,Ag(this.view),this.notifier.notify(13)},destroy(){Y0(this),this.onDestroyFn(),this.maybeCleanup(),this.view[tp]?.delete(this)}});function MK(n,t,e){let i=Object.create(SK);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=t,i.fn=e,n[tp]??=new Set,n[tp].add(i),i.consumerMarkedDirty(i),i}function EK(n,t,e){let i=Object.create(CK);return i.fn=n,i.scheduler=t,i.notifier=e,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.schedule(i),i.notifier.notify(12),i}function JV(n){let t=Jf(n);if(!t)return null;let e=new wg(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var Qr=new wn("");var nU=null;function Pl(){return nU}function BI(n){nU??=n}var Av=class{},Dv=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>Ue(iU),providedIn:"platform"})}return n})(),VI=new wn(""),iU=(()=>{class n extends Dv{_location;_history;_doc=Ue(Qr);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pl().getBaseHref(this._doc)}onPopState(e){let i=Pl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=Pl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function uC(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function eU(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function xc(n){return n&&n[0]!=="?"?`?${n}`:n}var Rl=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>Ue(hC),providedIn:"root"})}return n})(),dC=new wn(""),hC=(()=>{class n extends Rl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ue(Qr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return uC(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+xc(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){let o=this.prepareExternalUrl(r+xc(s));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){let o=this.prepareExternalUrl(r+xc(s));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(qn(Dv),qn(dC,8))};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bu=(()=>{class n{_subject=new Xr;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=DK(eU(tU(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+xc(i))}normalize(e){return n.stripTrailingSlash(AK(this._basePath,tU(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+xc(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+xc(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=xc;static joinWithSlash=uC;static stripTrailingSlash=eU;static \u0275fac=function(i){return new(i||n)(qn(Rl))};static \u0275prov=Vt({token:n,factory:()=>TK(),providedIn:"root"})}return n})();function TK(){return new bu(qn(Rl))}function AK(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function tU(n){return n.replace(/\/index.html$/,"")}function DK(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var xC=(()=>{class n extends Rl{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=uC(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let o=this.prepareExternalUrl(r+xc(s))||this._platformLocation.pathname;this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){let o=this.prepareExternalUrl(r+xc(s))||this._platformLocation.pathname;this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(qn(Dv),qn(dC,8))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();var Eo=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Eo||{}),vr=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(vr||{}),Sa=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Sa||{}),vd={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function lU(n){return Al(n)[cs.LocaleId]}function cU(n,t,e){let i=Al(n),r=[i[cs.DayPeriodsFormat],i[cs.DayPeriodsStandalone]],s=kl(r,t);return kl(s,e)}function uU(n,t,e){let i=Al(n),r=[i[cs.DaysFormat],i[cs.DaysStandalone]],s=kl(r,t);return kl(s,e)}function dU(n,t,e){let i=Al(n),r=[i[cs.MonthsFormat],i[cs.MonthsStandalone]],s=kl(r,t);return kl(s,e)}function hU(n,t){let i=Al(n)[cs.Eras];return kl(i,t)}function Iv(n,t){let e=Al(n);return kl(e[cs.DateFormat],t)}function Pv(n,t){let e=Al(n);return kl(e[cs.TimeFormat],t)}function Rv(n,t){let i=Al(n)[cs.DateTimeFormat];return kl(i,t)}function kv(n,t){let e=Al(n),i=e[cs.NumberSymbols][t];if(typeof i>"u"){if(t===vd.CurrencyDecimal)return e[cs.NumberSymbols][vd.Decimal];if(t===vd.CurrencyGroup)return e[cs.NumberSymbols][vd.Group]}return i}function fU(n){if(!n[cs.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[cs.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function pU(n){let t=Al(n);return fU(t),(t[cs.ExtraData][2]||[]).map(i=>typeof i=="string"?UI(i):[UI(i[0]),UI(i[1])])}function mU(n,t,e){let i=Al(n);fU(i);let r=[i[cs.ExtraData][0],i[cs.ExtraData][1]],s=kl(r,t)||[];return kl(s,e)||[]}function kl(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function UI(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var IK=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,fC={},PK=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function gU(n,t,e,i){let r=UK(n);t=yd(e,t)||t;let o=[],a;for(;t;)if(a=PK.exec(t),a){o=o.concat(a.slice(1));let p=o.pop();if(!p)break;t=p}else{o.push(t);break}let u=r.getTimezoneOffset();i&&(u=vU(i,u),r=VK(r,i));let h="";return o.forEach(p=>{let v=FK(p);h+=v?v(r,e,u):p==="''"?"'":p.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}function vC(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function yd(n,t){let e=lU(n);if(fC[e]??={},fC[e][t])return fC[e][t];let i="";switch(t){case"shortDate":i=Iv(n,Sa.Short);break;case"mediumDate":i=Iv(n,Sa.Medium);break;case"longDate":i=Iv(n,Sa.Long);break;case"fullDate":i=Iv(n,Sa.Full);break;case"shortTime":i=Pv(n,Sa.Short);break;case"mediumTime":i=Pv(n,Sa.Medium);break;case"longTime":i=Pv(n,Sa.Long);break;case"fullTime":i=Pv(n,Sa.Full);break;case"short":let r=yd(n,"shortTime"),s=yd(n,"shortDate");i=pC(Rv(n,Sa.Short),[r,s]);break;case"medium":let o=yd(n,"mediumTime"),a=yd(n,"mediumDate");i=pC(Rv(n,Sa.Medium),[o,a]);break;case"long":let u=yd(n,"longTime"),h=yd(n,"longDate");i=pC(Rv(n,Sa.Long),[u,h]);break;case"full":let p=yd(n,"fullTime"),v=yd(n,"fullDate");i=pC(Rv(n,Sa.Full),[p,v]);break}return i&&(fC[e][t]=i),i}function pC(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function wc(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,s=e));let o=String(n);for(;o.length<t;)o="0"+o;return i&&(o=o.slice(o.length-t)),s+o}function RK(n,t){return wc(n,3).substring(0,t)}function Ms(n,t,e=0,i=!1,r=!1){return function(s,o){let a=kK(n,s);if((e>0||a>-e)&&(a+=e),n===3)a===0&&e===-12&&(a=12);else if(n===6)return RK(a,t);let u=kv(o,vd.MinusSign);return wc(a,t,u,i,r)}}function kK(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Dr(n,t,e=Eo.Format,i=!1){return function(r,s){return LK(r,s,n,t,e,i)}}function LK(n,t,e,i,r,s){switch(e){case 2:return dU(t,r,i)[n.getMonth()];case 1:return uU(t,r,i)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let h=pU(t),p=mU(t,r,i),v=h.findIndex(x=>{if(Array.isArray(x)){let[S,D]=x,O=o>=S.hours&&a>=S.minutes,N=o<D.hours||o===D.hours&&a<D.minutes;if(S.hours<D.hours){if(O&&N)return!0}else if(O||N)return!0}else if(x.hours===o&&x.minutes===a)return!0;return!1});if(v!==-1)return p[v]}return cU(t,r,i)[o<12?0:1];case 3:return hU(t,i)[n.getFullYear()<=0?0:1];default:let u=e;throw new Error(`unexpected translation type ${u}`)}}function mC(n){return function(t,e,i){let r=-1*i,s=kv(e,vd.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+wc(o,2,s)+wc(Math.abs(r%60),2,s);case 1:return"GMT"+(r>=0?"+":"")+wc(o,1,s);case 2:return"GMT"+(r>=0?"+":"")+wc(o,2,s)+":"+wc(Math.abs(r%60),2,s);case 3:return i===0?"Z":(r>=0?"+":"")+wc(o,2,s)+":"+wc(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var NK=0,yC=4;function OK(n){let t=vC(n,NK,1).getDay();return vC(n,0,1+(t<=yC?yC:yC+7)-t)}function yU(n){let t=n.getDay(),e=t===0?-3:yC-t;return vC(n.getFullYear(),n.getMonth(),n.getDate()+e)}function zI(n,t=!1){return function(e,i){let r;if(t){let s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();r=1+Math.floor((o+s)/7)}else{let s=yU(e),o=OK(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return wc(r,n,kv(i,vd.MinusSign))}}function gC(n,t=!1){return function(e,i){let s=yU(e).getFullYear();return wc(s,n,kv(i,vd.MinusSign),t)}}var HI={};function FK(n){if(HI[n])return HI[n];let t;switch(n){case"G":case"GG":case"GGG":t=Dr(3,vr.Abbreviated);break;case"GGGG":t=Dr(3,vr.Wide);break;case"GGGGG":t=Dr(3,vr.Narrow);break;case"y":t=Ms(0,1,0,!1,!0);break;case"yy":t=Ms(0,2,0,!0,!0);break;case"yyy":t=Ms(0,3,0,!1,!0);break;case"yyyy":t=Ms(0,4,0,!1,!0);break;case"Y":t=gC(1);break;case"YY":t=gC(2,!0);break;case"YYY":t=gC(3);break;case"YYYY":t=gC(4);break;case"M":case"L":t=Ms(1,1,1);break;case"MM":case"LL":t=Ms(1,2,1);break;case"MMM":t=Dr(2,vr.Abbreviated);break;case"MMMM":t=Dr(2,vr.Wide);break;case"MMMMM":t=Dr(2,vr.Narrow);break;case"LLL":t=Dr(2,vr.Abbreviated,Eo.Standalone);break;case"LLLL":t=Dr(2,vr.Wide,Eo.Standalone);break;case"LLLLL":t=Dr(2,vr.Narrow,Eo.Standalone);break;case"w":t=zI(1);break;case"ww":t=zI(2);break;case"W":t=zI(1,!0);break;case"d":t=Ms(2,1);break;case"dd":t=Ms(2,2);break;case"c":case"cc":t=Ms(7,1);break;case"ccc":t=Dr(1,vr.Abbreviated,Eo.Standalone);break;case"cccc":t=Dr(1,vr.Wide,Eo.Standalone);break;case"ccccc":t=Dr(1,vr.Narrow,Eo.Standalone);break;case"cccccc":t=Dr(1,vr.Short,Eo.Standalone);break;case"E":case"EE":case"EEE":t=Dr(1,vr.Abbreviated);break;case"EEEE":t=Dr(1,vr.Wide);break;case"EEEEE":t=Dr(1,vr.Narrow);break;case"EEEEEE":t=Dr(1,vr.Short);break;case"a":case"aa":case"aaa":t=Dr(0,vr.Abbreviated);break;case"aaaa":t=Dr(0,vr.Wide);break;case"aaaaa":t=Dr(0,vr.Narrow);break;case"b":case"bb":case"bbb":t=Dr(0,vr.Abbreviated,Eo.Standalone,!0);break;case"bbbb":t=Dr(0,vr.Wide,Eo.Standalone,!0);break;case"bbbbb":t=Dr(0,vr.Narrow,Eo.Standalone,!0);break;case"B":case"BB":case"BBB":t=Dr(0,vr.Abbreviated,Eo.Format,!0);break;case"BBBB":t=Dr(0,vr.Wide,Eo.Format,!0);break;case"BBBBB":t=Dr(0,vr.Narrow,Eo.Format,!0);break;case"h":t=Ms(3,1,-12);break;case"hh":t=Ms(3,2,-12);break;case"H":t=Ms(3,1);break;case"HH":t=Ms(3,2);break;case"m":t=Ms(4,1);break;case"mm":t=Ms(4,2);break;case"s":t=Ms(5,1);break;case"ss":t=Ms(5,2);break;case"S":t=Ms(6,1);break;case"SS":t=Ms(6,2);break;case"SSS":t=Ms(6,3);break;case"Z":case"ZZ":case"ZZZ":t=mC(0);break;case"ZZZZZ":t=mC(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=mC(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=mC(2);break;default:return null}return HI[n]=t,t}function vU(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function BK(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function VK(n,t,e){let r=n.getTimezoneOffset(),s=vU(t,r);return BK(n,-1*(s-r))}function UK(n){if(rU(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,s=1,o=1]=n.split("-").map(a=>+a);return vC(r,s-1,o)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(IK))return zK(i)}let t=new Date(n);if(!rU(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function zK(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-e,a=Number(n[5]||0)-i,u=Number(n[6]||0),h=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(t,o,a,u,h),t}function rU(n){return n instanceof Date&&!isNaN(n.valueOf())}var jI=/\s+/,sU=[],us=(()=>{class n{_ngEl;_renderer;initialClasses=sU;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(jI):sU}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(jI):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(jI).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(En(Ar),En(Ca))};static \u0275dir=Xn({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})(),$I=(()=>{class n{_viewContainerRef;ngComponentOutlet=null;ngComponentOutletInputs;ngComponentOutletInjector;ngComponentOutletContent;ngComponentOutletNgModule;ngComponentOutletNgModuleFactory;_componentRef;_moduleRef;_inputsUsed=new Map;get componentInstance(){return this._componentRef?.instance??null}constructor(e){this._viewContainerRef=e}_needToReCreateNgModuleInstance(e){return e.ngComponentOutletNgModule!==void 0||e.ngComponentOutletNgModuleFactory!==void 0}_needToReCreateComponentInstance(e){return e.ngComponentOutlet!==void 0||e.ngComponentOutletContent!==void 0||e.ngComponentOutletInjector!==void 0||this._needToReCreateNgModuleInstance(e)}ngOnChanges(e){if(this._needToReCreateComponentInstance(e)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){let i=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(e)&&(this._moduleRef?.destroy(),this.ngComponentOutletNgModule?this._moduleRef=fV(this.ngComponentOutletNgModule,oU(i)):this.ngComponentOutletNgModuleFactory?this._moduleRef=this.ngComponentOutletNgModuleFactory.create(oU(i)):this._moduleRef=void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:i,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(let e of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(e,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(e){for(let[i,r]of this._inputsUsed)r?(e.setInput(i,this.ngComponentOutletInputs[i]),this._inputsUsed.set(i,!1)):(e.setInput(i,void 0),this._inputsUsed.delete(i))}static \u0275fac=function(i){return new(i||n)(En(Cr))};static \u0275dir=Xn({type:n,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},exportAs:["ngComponentOutlet"],features:[zs]})}return n})();function oU(n){return n.get(ap).injector}var el=(()=>{class n{_viewContainer;_context=new _C;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){aU(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){aU(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(En(Cr),En(Us))};static \u0275dir=Xn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),_C=class{$implicit=null;ngIf=null};function aU(n,t){if(n&&!n.createEmbeddedView)throw new wt(2020,!1)}var bC=class{_viewContainerRef;_templateRef;_created=!1;constructor(t,e){this._viewContainerRef=t,this._templateRef=e}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}},Lv=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(e){this._ngSwitch=e,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){let i=e===this._ngSwitch;return this._lastCasesMatched||=i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(let i of this._defaultViews)i.enforceState(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xn({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),qI=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new bC(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(i){return new(i||n)(En(Cr),En(Us),En(Lv,9))};static \u0275dir=Xn({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})(),XI=(()=>{class n{constructor(e,i,r){r._addDefault(new bC(e,i))}static \u0275fac=function(i){return new(i||n)(En(Cr),En(Us),En(Lv,9))};static \u0275dir=Xn({type:n,selectors:[["","ngSwitchDefault",""]]})}return n})();var Ng=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){let[r,s]=e.split("."),o=r.indexOf("-")===-1?void 0:fu.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static \u0275fac=function(i){return new(i||n)(En(Ar),En(Ih),En(Ca))};static \u0275dir=Xn({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})(),mp=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(e){this._viewContainerRef=e}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(En(Cr))};static \u0275dir=Xn({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[zs]})}return n})();function _U(n,t){return new wt(2100,!1)}var WI=class{createSubscription(t,e){return ho(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){ho(()=>t.unsubscribe())}},GI=class{createSubscription(t,e){return t.then(i=>e?.(i),i=>{throw i}),{unsubscribe:()=>{e=null}}}dispose(t){t.unsubscribe()}},HK=new GI,jK=new WI,Nv=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(e){this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(Ah(e))return HK;if(RI(e))return jK;throw _U(n,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(En(Ss,16))};static \u0275pipe=II({name:"async",type:n,pure:!1})}return n})();var WK="mediumDate",bU=new wn(""),xU=new wn(""),Ov=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,s){if(e==null||e===""||e!==e)return null;try{let o=i??this.defaultOptions?.dateFormat??WK,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return gU(e,o,s||this.locale,a)}catch(o){throw _U(n,o.message)}}static \u0275fac=function(i){return new(i||n)(En(lC,16),En(bU,24),En(xU,24))};static \u0275pipe=II({name:"date",type:n,pure:!0})}return n})();var Nt=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Yo({type:n});static \u0275inj=Xo({})}return n})();function YI(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,s]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}var ZI="browser",wU="server";function wC(n){return n===wU}var Fv=class{};var CU=(()=>{class n{static \u0275prov=Vt({token:n,providedIn:"root",factory:()=>new KI(Ue(Qr),window)})}return n})(),KI=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=qK(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}};function qK(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let s=r.shadowRoot;if(s){let o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=i.nextNode()}}return null}var MC=new wn(""),tP=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r,s){return this._findPluginFor(i).addEventListener(e,i,r,s)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new wt(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)(qn(MC),qn(xr))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),Bv=class{_doc;constructor(t){this._doc=t}manager},CC="ng-app-id";function SU(n){for(let t of n)t.remove()}function MU(n,t){let e=t.createElement("style");return e.textContent=n,e}function XK(n,t,e,i){let r=n.head?.querySelectorAll(`style[${CC}="${t}"],link[${CC}="${t}"]`);if(r)for(let s of r)s.removeAttribute(CC),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function JI(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var nP=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,this.isServer=wC(s),XK(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,MU);i?.forEach(r=>this.addUsage(r,this.external,JI))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let s=i.get(e);s?s.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(SU(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])SU(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,MU(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,JI(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(CC,this.appId),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)(qn(Qr),qn(nI),qn(sI,8),qn(Rg))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),QI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},iP=/%COMP%/g;var TU="%COMP%",YK=`_nghost-${TU}`,ZK=`_ngcontent-${TU}`,KK=!0,QK=new wn("",{providedIn:"root",factory:()=>KK});function JK(n){return ZK.replace(iP,n)}function eQ(n){return YK.replace(iP,n)}function AU(n,t){return t.map(e=>e.replace(iP,n))}var zv=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,s,o,a,u,h=null,p=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=h,this.tracingService=p,this.platformIsServer=wC(a),this.defaultRenderer=new Vv(e,o,u,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===hu.ShadowDom&&(i=Mn(Ke({},i),{encapsulation:hu.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof SC?r.applyToHost(e):r instanceof Uv&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,v=this.platformIsServer,x=this.tracingService;switch(i.encapsulation){case hu.Emulated:s=new SC(u,h,i,this.appId,p,o,a,v,x);break;case hu.ShadowDom:return new eP(u,h,e,i,o,a,this.nonce,v,x);default:s=new Uv(u,h,i,p,o,a,v,x);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||n)(qn(tP),qn(nP),qn(nI),qn(QK),qn(Qr),qn(Rg),qn(xr),qn(sI),qn(kg,8))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),Vv=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,r,s){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=s}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(QI[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(EU(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(EU(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new wt(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=QI[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=QI[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(fu.DashCase|fu.Important)?t.style.setProperty(e,i,r&fu.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&fu.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i,r){if(typeof t=="string"&&(t=Pl().getGlobalEventTarget(this.doc,t),!t))throw new wt(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(t,e,s)),this.eventManager.addEventListener(t,e,s,r)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function EU(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var eP=class extends Vv{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,i,r,s,o,a,u,h){super(t,s,o,u,h),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=r.styles;p=AU(r.id,p);for(let x of p){let S=document.createElement("style");a&&S.setAttribute("nonce",a),S.textContent=x,this.shadowRoot.appendChild(S)}let v=r.getExternalStyles?.();if(v)for(let x of v){let S=JI(x,s);a&&S.setAttribute("nonce",a),this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Uv=class extends Vv{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,r,s,o,a,u,h){super(t,s,o,a,u),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let p=i.styles;this.styles=h?AU(h,p):p,this.styleUrls=i.getExternalStyles?.(h)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},SC=class extends Uv{contentAttr;hostAttr;constructor(t,e,i,r,s,o,a,u,h){let p=r+"-"+i.id;super(t,e,i,s,o,a,u,h,p),this.contentAttr=JK(p),this.hostAttr=eQ(p)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}};var EC=class n extends Av{supportsDOMEvents=!0;static makeCurrent(){BI(new n)}onAndCancel(t,e,i,r){return t.addEventListener(e,i,r),()=>{t.removeEventListener(e,i,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=tQ();return e==null?null:nQ(e)}resetBaseElement(){Hv=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return YI(document.cookie,t)}},Hv=null;function tQ(){return Hv=Hv||document.head.querySelector("base"),Hv?Hv.getAttribute("href"):null}function nQ(n){return new URL(n,document.baseURI).pathname}var iQ=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),IU=(()=>{class n extends Bv{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,s){return e.addEventListener(i,r,s),()=>this.removeEventListener(e,i,r,s)}removeEventListener(e,i,r,s){return e.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||n)(qn(Qr))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),DU=["alt","control","meta","shift"],rQ={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sQ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},PU=(()=>{class n extends Bv{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r,s){let o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pl().onAndCancel(e,o.domEventName,a,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),DU.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),o+=h+".")}),o+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=r,u.fullKey=o,u}static matchEventFullKeyCode(e,i){let r=rQ[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),DU.forEach(o=>{if(o!==r){let a=sQ[o];a(e)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)(qn(Qr))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();function rP(n,t){return KV(Ke({rootComponent:n},oQ(t)))}function oQ(n){return{appProviders:[...dQ,...n?.providers??[]],platformProviders:uQ}}function aQ(){EC.makeCurrent()}function lQ(){return new bc}function cQ(){return pB(document),document}var uQ=[{provide:Rg,useValue:ZI},{provide:iI,useValue:aQ,multi:!0},{provide:Qr,useFactory:cQ}];var dQ=[{provide:Vw,useValue:"root"},{provide:bc,useFactory:lQ},{provide:MC,useClass:IU,multi:!0,deps:[Qr]},{provide:MC,useClass:PU,multi:!0,deps:[Qr]},zv,nP,tP,{provide:Th,useExisting:zv},{provide:Fv,useClass:iQ},[]];var RU=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)(qn(Qr))};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gi="primary",t_=Symbol("RouteTitle"),cP=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function vp(n){return new cP(n)}function UU(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function fQ(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!xu(n[e],t[e]))return!1;return!0}function xu(n,t){let e=n?uP(n):void 0,i=t?uP(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!zU(n[r],t[r]))return!1;return!0}function uP(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function zU(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function HU(n){return n.length>0?n[n.length-1]:null}function Nh(n){return rA(n)?n:Ah(n)?Ur(Promise.resolve(n)):Pn(n)}var pQ={exact:WU,subset:GU},jU={exact:mQ,subset:gQ,ignored:()=>!0};function kU(n,t,e){return pQ[e.paths](n.root,t.root,e.matrixParams)&&jU[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function mQ(n,t){return xu(n,t)}function WU(n,t,e){if(!gp(n.segments,t.segments)||!DC(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!WU(n.children[i],t.children[i],e))return!1;return!0}function gQ(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>zU(n[e],t[e]))}function GU(n,t,e){return $U(n,t,t.segments,e)}function $U(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!gp(r,e)||t.hasChildren()||!DC(r,e,i))}else if(n.segments.length===e.length){if(!gp(n.segments,e)||!DC(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!GU(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!gp(n.segments,r)||!DC(n.segments,r,i)||!n.children[gi]?!1:$U(n.children[gi],t,s,i)}}function DC(n,t,e){return t.every((i,r)=>jU[e](n[r].parameters,i.parameters))}var Cu=class{root;queryParams;fragment;_queryParamMap;constructor(t=new or([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=vp(this.queryParams),this._queryParamMap}toString(){return _Q.serialize(this)}},or=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return IC(this)}},Ph=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=vp(this.parameters),this._parameterMap}toString(){return XU(this)}};function yQ(n,t){return gp(n,t)&&n.every((e,i)=>xu(e.parameters,t[i].parameters))}function gp(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function vQ(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===gi&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==gi&&(e=e.concat(t(r,i)))}),e}var _p=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>new Rh,providedIn:"root"})}return n})(),Rh=class{parse(t){let e=new hP(t);return new Cu(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${jv(t.root,!0)}`,i=wQ(t.queryParams),r=typeof t.fragment=="string"?`#${bQ(t.fragment)}`:"";return`${e}${i}${r}`}},_Q=new Rh;function IC(n){return n.segments.map(t=>XU(t)).join("/")}function jv(n,t){if(!n.hasChildren())return IC(n);if(t){let e=n.children[gi]?jv(n.children[gi],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==gi&&i.push(`${r}:${jv(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=vQ(n,(i,r)=>r===gi?[jv(n.children[gi],!1)]:[`${r}:${jv(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[gi]!=null?`${IC(n)}/${e[0]}`:`${IC(n)}/(${e.join("//")})`}}function qU(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function TC(n){return qU(n).replace(/%3B/gi,";")}function bQ(n){return encodeURI(n)}function dP(n){return qU(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function PC(n){return decodeURIComponent(n)}function LU(n){return PC(n.replace(/\+/g,"%20"))}function XU(n){return`${dP(n.path)}${xQ(n.parameters)}`}function xQ(n){return Object.entries(n).map(([t,e])=>`;${dP(t)}=${dP(e)}`).join("")}function wQ(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${TC(e)}=${TC(r)}`).join("&"):`${TC(e)}=${TC(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var CQ=/^[^\/()?;#]+/;function sP(n){let t=n.match(CQ);return t?t[0]:""}var SQ=/^[^\/()?;=#]+/;function MQ(n){let t=n.match(SQ);return t?t[0]:""}var EQ=/^[^=?&#]+/;function TQ(n){let t=n.match(EQ);return t?t[0]:""}var AQ=/^[^&#]+/;function DQ(n){let t=n.match(AQ);return t?t[0]:""}var hP=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new or([],{}):new or([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[gi]=new or(t,e)),i}parseSegment(){let t=sP(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new wt(4009,!1);return this.capture(t),new Ph(PC(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=MQ(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=sP(this.remaining);r&&(i=r,this.capture(i))}t[PC(e)]=PC(i)}parseQueryParam(t){let e=TQ(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=DQ(this.remaining);o&&(i=o,this.capture(i))}let r=LU(e),s=LU(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=sP(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new wt(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=gi);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[gi]:new or([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new wt(4011,!1)}};function YU(n){return n.segments.length>0?new or([],{[gi]:n}):n}function ZU(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=ZU(r);if(i===gi&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new or(n.segments,t);return IQ(e)}function IQ(n){if(n.numberOfChildren===1&&n.children[gi]){let t=n.children[gi];return new or(n.segments.concat(t.segments),t.children)}return n}function kh(n){return n instanceof Cu}function KU(n,t,e=null,i=null){let r=QU(n);return JU(r,t,e,i)}function QU(n){let t;function e(s){let o={};for(let u of s.children){let h=e(u);o[u.outlet]=h}let a=new or(s.url,o);return s===n&&(t=a),a}let i=e(n.root),r=YU(i);return t??r}function JU(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return oP(r,r,r,e,i);let s=PQ(t);if(s.toRoot())return oP(r,r,new or([],{}),e,i);let o=RQ(s,r,n),a=o.processChildren?Gv(o.segmentGroup,o.index,s.commands):tz(o.segmentGroup,o.index,s.commands);return oP(r,o.segmentGroup,a,e,i)}function kC(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function qv(n){return typeof n=="object"&&n!=null&&n.outlets}function oP(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([u,h])=>{s[u]=Array.isArray(h)?h.map(p=>`${p}`):`${h}`});let o;n===t?o=e:o=ez(n,t,e);let a=YU(ZU(o));return new Cu(a,s,r)}function ez(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=ez(s,t,e)}),new or(n.segments,i)}var LC=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&kC(i[0]))throw new wt(4003,!1);let r=i.find(qv);if(r&&r!==HU(i))throw new wt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function PQ(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new LC(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,h])=>{a[u]=typeof h=="string"?h.split("/"):h}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new LC(e,t,i)}var Bg=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function RQ(n,t,e){if(n.isAbsolute)return new Bg(t,!0,0);if(!e)return new Bg(t,!1,NaN);if(e.parent===null)return new Bg(e,!0,0);let i=kC(n.commands[0])?0:1,r=e.segments.length-1+i;return kQ(e,r,n.numberOfDoubleDots)}function kQ(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new wt(4005,!1);r=i.segments.length}return new Bg(i,!1,r-s)}function LQ(n){return qv(n[0])?n[0].outlets:{[gi]:n}}function tz(n,t,e){if(n??=new or([],{}),n.segments.length===0&&n.hasChildren())return Gv(n,t,e);let i=NQ(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new or(n.segments.slice(0,i.pathIndex),{});return s.children[gi]=new or(n.segments.slice(i.pathIndex),n.children),Gv(s,0,r)}else return i.match&&r.length===0?new or(n.segments,{}):i.match&&!n.hasChildren()?fP(n,t,e):i.match?Gv(n,0,r):fP(n,t,e)}function Gv(n,t,e){if(e.length===0)return new or(n.segments,{});{let i=LQ(e),r={};if(Object.keys(i).some(s=>s!==gi)&&n.children[gi]&&n.numberOfChildren===1&&n.children[gi].segments.length===0){let s=Gv(n.children[gi],t,e);return new or(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=tz(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new or(n.segments,r)}}function NQ(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let o=n.segments[r],a=e[i];if(qv(a))break;let u=`${a}`,h=i<e.length-1?e[i+1]:null;if(r>0&&u===void 0)break;if(u&&h&&typeof h=="object"&&h.outlets===void 0){if(!OU(u,h,o))return s;i+=2}else{if(!OU(u,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function fP(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(qv(s)){let u=OQ(s.outlets);return new or(i,u)}if(r===0&&kC(e[0])){let u=n.segments[t];i.push(new Ph(u.path,NU(e[0]))),r++;continue}let o=qv(s)?s.outlets[gi]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&kC(a)?(i.push(new Ph(o,NU(a))),r+=2):(i.push(new Ph(o,{})),r++)}return new or(i,{})}function OQ(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=fP(new or([],{}),0,i))}),t}function NU(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function OU(n,t,e){return n==e.path&&xu(t,e.parameters)}var RC="imperative",Hs=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Hs||{}),nl=class{id;url;constructor(t,e){this.id=t,this.url=e}},Lh=class extends nl{type=Hs.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ta=class extends nl{urlAfterRedirects;type=Hs.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ea=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ea||{}),Ug=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ug||{}),wu=class extends nl{reason;code;type=Hs.NavigationCancel;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Su=class extends nl{reason;code;type=Hs.NavigationSkipped;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}},zg=class extends nl{error;target;type=Hs.NavigationError;constructor(t,e,i,r){super(t,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Xv=class extends nl{urlAfterRedirects;state;type=Hs.RoutesRecognized;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},NC=class extends nl{urlAfterRedirects;state;type=Hs.GuardsCheckStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},OC=class extends nl{urlAfterRedirects;state;shouldActivate;type=Hs.GuardsCheckEnd;constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},FC=class extends nl{urlAfterRedirects;state;type=Hs.ResolveStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},BC=class extends nl{urlAfterRedirects;state;type=Hs.ResolveEnd;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},VC=class{route;type=Hs.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},UC=class{route;type=Hs.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zC=class{snapshot;type=Hs.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},HC=class{snapshot;type=Hs.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jC=class{snapshot;type=Hs.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},WC=class{snapshot;type=Hs.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hg=class{routerEvent;position;anchor;type=Hs.Scroll;constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Yv=class{},jg=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function FQ(n,t){return n.providers&&!n._injector&&(n._injector=wv(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Cc(n){return n.outlet||gi}function BQ(n,t){let e=n.filter(i=>Cc(i)===t);return e.push(...n.filter(i=>Cc(i)!==t)),e}function n_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var GC=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return n_(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new bp(this.rootInjector)}},bp=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new GC(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(qn(ba))};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$C=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=pP(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=pP(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=mP(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return mP(t,this._root).map(e=>e.value)}};function pP(n,t){if(n===t.value)return t;for(let e of t.children){let i=pP(n,e);if(i)return i}return null}function mP(n,t){if(n===t.value)return[t];for(let e of t.children){let i=mP(n,e);if(i.length)return i.unshift(t),i}return[]}var tl=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Fg(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Zv=class extends $C{snapshot;constructor(t,e){super(t),this.snapshot=e,CP(this,t)}toString(){return this.snapshot.toString()}};function nz(n){let t=VQ(n),e=new bs([new Ph("",{})]),i=new bs({}),r=new bs({}),s=new bs({}),o=new bs(""),a=new eo(e,i,s,o,r,gi,n,t.root);return a.snapshot=t.root,new Zv(new tl(a,[]),t)}function VQ(n){let t={},e={},i={},r="",s=new yp([],t,i,r,e,gi,n,null,{});return new Kv("",new tl(s,[]))}var eo=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,r,s,o,a,u){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ui(h=>h[t_]))??Pn(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ui(t=>vp(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ui(t=>vp(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qC(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:Ke(Ke({},t.params),n.params),data:Ke(Ke({},t.data),n.data),resolve:Ke(Ke(Ke(Ke({},n.data),t.data),r?.data),n._resolvedData)}:i={params:Ke({},n.params),data:Ke({},n.data),resolve:Ke(Ke({},n.data),n._resolvedData??{})},r&&rz(r)&&(i.resolve[t_]=r.title),i}var yp=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[t_]}constructor(t,e,i,r,s,o,a,u,h){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=vp(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=vp(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Kv=class extends $C{url;constructor(t,e){super(e),this.url=t,CP(this,e)}toString(){return iz(this._root)}};function CP(n,t){t.value._routerState=n,t.children.forEach(e=>CP(n,e))}function iz(n){let t=n.children.length>0?` { ${n.children.map(iz).join(", ")} } `:"";return`${n.value}${t}`}function aP(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,xu(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),xu(t.params,e.params)||n.paramsSubject.next(e.params),fQ(t.url,e.url)||n.urlSubject.next(e.url),xu(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function gP(n,t){let e=xu(n.params,t.params)&&yQ(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||gP(n.parent,t.parent))}function rz(n){return typeof n.title=="string"||n.title===null}var sz=new wn(""),xp=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=gi;activateEvents=new en;deactivateEvents=new en;attachEvents=new en;detachEvents=new en;routerOutletData=_t(void 0);parentContexts=Ue(bp);location=Ue(Cr);changeDetector=Ue(Ss);inputBinder=Ue(i_,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new wt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new wt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new wt(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new wt(4013,!1);this._activatedRoute=e;let r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new yP(e,a,r.injector,this.routerOutletData);this.activated=r.createComponent(o,{index:r.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xn({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[zs]})}return n})(),yP=class{route;childContexts;parent;outletData;constructor(t,e,i,r){this.route=t,this.childContexts=e,this.parent=i,this.outletData=r}get(t,e){return t===eo?this.route:t===bp?this.childContexts:t===sz?this.outletData:this.parent.get(t,e)}},i_=new wn(""),SP=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=J0([i.queryParams,i.params,i.data]).pipe(Sl(([s,o,a],u)=>(a=Ke(Ke(Ke({},s),o),a),u===0?Pn(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let o=JV(i.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),MP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&it(0,"router-outlet")},dependencies:[xp],encapsulation:2})}return n})();function EP(n){let t=n.children&&n.children.map(EP),e=t?Mn(Ke({},n),{children:t}):Ke({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==gi&&(e.component=MP),e}function UQ(n,t,e){let i=Qv(n,t._root,e?e._root:void 0);return new Zv(i,t)}function Qv(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=zQ(n,t,e);return new tl(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Qv(n,a)),o}}let i=HQ(t.value),r=t.children.map(s=>Qv(n,s));return new tl(i,r)}}function zQ(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Qv(n,i,r);return Qv(n,i)})}function HQ(n){return new eo(new bs(n.url),new bs(n.params),new bs(n.queryParams),new bs(n.fragment),new bs(n.data),n.outlet,n.component,n)}var Wg=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},oz="ngNavigationCancelingError";function XC(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=kh(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=az(!1,Ea.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function az(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[oz]=!0,e.cancellationCode=t,e}function jQ(n){return lz(n)&&kh(n.url)}function lz(n){return!!n&&n[oz]}var WQ=(n,t,e,i)=>ui(r=>(new vP(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),vP=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),aP(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=Fg(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Fg(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Fg(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=Fg(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new WC(s.value.snapshot))}),t.children.length&&this.forwardEvent(new HC(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(aP(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),aP(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,i)}},YC=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Vg=class{component;route;constructor(t,e){this.component=t,this.route=e}};function GQ(n,t,e){let i=n._root,r=t?t._root:null;return Wv(i,r,e,[i.value])}function $Q(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function $g(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!i3(n)?n:t.get(n):i}function Wv(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Fg(t);return n.children.forEach(o=>{qQ(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>$v(a,e.getContext(o),r)),r}function qQ(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=XQ(o,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new YC(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Wv(n,t,a?a.children:null,i,r):Wv(n,t,e,i,r),u&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Vg(a.outlet.component,o))}else o&&$v(t,a,r),r.canActivateChecks.push(new YC(i)),s.component?Wv(n,null,a?a.children:null,i,r):Wv(n,null,e,i,r);return r}function XQ(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!gp(n.url,t.url);case"pathParamsOrQueryParamsChange":return!gp(n.url,t.url)||!xu(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gP(n,t)||!xu(n.queryParams,t.queryParams);case"paramsChange":default:return!gP(n,t)}}function $v(n,t,e){let i=Fg(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?t?$v(o,t.children.getContext(s),e):$v(o,null,e):$v(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Vg(t.outlet.component,r)):e.canDeactivateChecks.push(new Vg(null,r)):e.canDeactivateChecks.push(new Vg(null,r))}function r_(n){return typeof n=="function"}function YQ(n){return typeof n=="boolean"}function ZQ(n){return n&&r_(n.canLoad)}function KQ(n){return n&&r_(n.canActivate)}function QQ(n){return n&&r_(n.canActivateChild)}function JQ(n){return n&&r_(n.canDeactivate)}function eJ(n){return n&&r_(n.canMatch)}function cz(n){return n instanceof od||n?.name==="EmptyError"}var AC=Symbol("INITIAL_VALUE");function Gg(){return Sl(n=>J0(n.map(t=>t.pipe(Cl(1),cA(AC)))).pipe(ui(t=>{for(let e of t)if(e!==!0){if(e===AC)return AC;if(e===!1||tJ(e))return e}return!0}),Qa(t=>t!==AC),Cl(1)))}function tJ(n){return kh(n)||n instanceof Wg}function nJ(n,t){return Rr(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?Pn(Mn(Ke({},e),{guardsResult:!0})):iJ(o,i,r,n).pipe(Rr(a=>a&&YQ(a)?rJ(i,s,n,t):Pn(a)),ui(a=>Mn(Ke({},e),{guardsResult:a})))})}function iJ(n,t,e,i){return Ur(n).pipe(Rr(r=>cJ(r.component,r.route,e,t,i)),ld(r=>r!==!0,!0))}function rJ(n,t,e,i){return Ur(t).pipe(wh(r=>xh(oJ(r.route.parent,i),sJ(r.route,i),lJ(n,r.path,e),aJ(n,r.route,e))),ld(r=>r!==!0,!0))}function sJ(n,t){return n!==null&&t&&t(new jC(n)),Pn(!0)}function oJ(n,t){return n!==null&&t&&t(new zC(n)),Pn(!0)}function aJ(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return Pn(!0);let r=i.map(s=>$x(()=>{let o=n_(t)??e,a=$g(s,o),u=KQ(a)?a.canActivate(t,n):El(o,()=>a(t,n));return Nh(u).pipe(ld())}));return Pn(r).pipe(Gg())}function lJ(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>$Q(o)).filter(o=>o!==null).map(o=>$x(()=>{let a=o.guards.map(u=>{let h=n_(o.node)??e,p=$g(u,h),v=QQ(p)?p.canActivateChild(i,n):El(h,()=>p(i,n));return Nh(v).pipe(ld())});return Pn(a).pipe(Gg())}));return Pn(s).pipe(Gg())}function cJ(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return Pn(!0);let o=s.map(a=>{let u=n_(t)??r,h=$g(a,u),p=JQ(h)?h.canDeactivate(n,t,e,i):El(u,()=>h(n,t,e,i));return Nh(p).pipe(ld())});return Pn(o).pipe(Gg())}function uJ(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return Pn(!0);let s=r.map(o=>{let a=$g(o,n),u=ZQ(a)?a.canLoad(t,e):El(n,()=>a(t,e));return Nh(u)});return Pn(s).pipe(Gg(),uz(i))}function uz(n){return JT(uo(t=>{if(typeof t!="boolean")throw XC(n,t)}),ui(t=>t===!0))}function dJ(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return Pn(!0);let s=r.map(o=>{let a=$g(o,n),u=eJ(a)?a.canMatch(t,e):El(n,()=>a(t,e));return Nh(u)});return Pn(s).pipe(Gg(),uz(i))}var Jv=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},e_=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Og(n){return sg(new Jv(n))}function hJ(n){return sg(new wt(4e3,!1))}function fJ(n){return sg(az(!1,Ea.GuardRejected))}var _P=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Pn(i);if(r.numberOfChildren>1||!r.children[gi])return hJ(`${t.redirectTo}`);r=r.children[gi]}}applyRedirectCommands(t,e,i,r,s){if(typeof e!="string"){let a=e,{queryParams:u,fragment:h,routeConfig:p,url:v,outlet:x,params:S,data:D,title:O}=r,N=El(s,()=>a({params:S,data:D,queryParams:u,fragment:h,routeConfig:p,url:v,outlet:x,title:O}));if(N instanceof Cu)throw new e_(N);e=N}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new e_(o);return o}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new Cu(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=e[a]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),o={};return Object.entries(e.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(t,u,i,r)}),new or(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new wt(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},bP={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pJ(n,t,e,i,r){let s=dz(n,t,e);return s.matched?(i=FQ(t,i),dJ(i,t,e,r).pipe(ui(o=>o===!0?s:Ke({},bP)))):Pn(s)}function dz(n,t,e){if(t.path==="**")return mJ(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?Ke({},bP):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||UU)(e,n,t);if(!r)return Ke({},bP);let s={};Object.entries(r.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=r.consumed.length>0?Ke(Ke({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function mJ(n){return{matched:!0,parameters:n.length>0?HU(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function FU(n,t,e,i){return e.length>0&&vJ(n,e,i)?{segmentGroup:new or(t,yJ(i,new or(e,n.children))),slicedSegments:[]}:e.length===0&&_J(n,e,i)?{segmentGroup:new or(n.segments,gJ(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new or(n.segments,n.children),slicedSegments:e}}function gJ(n,t,e,i){let r={};for(let s of e)if(KC(n,t,s)&&!i[Cc(s)]){let o=new or([],{});r[Cc(s)]=o}return Ke(Ke({},i),r)}function yJ(n,t){let e={};e[gi]=t;for(let i of n)if(i.path===""&&Cc(i)!==gi){let r=new or([],{});e[Cc(i)]=r}return e}function vJ(n,t,e){return e.some(i=>KC(n,t,i)&&Cc(i)!==gi)}function _J(n,t,e){return e.some(i=>KC(n,t,i))}function KC(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function bJ(n,t,e){return t.length===0&&!n.children[e]}var xP=class{};function xJ(n,t,e,i,r,s,o="emptyOnly"){return new wP(n,t,e,i,r,o,s).recognize()}var wJ=31,wP=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new _P(this.urlSerializer,this.urlTree)}noMatchError(t){return new wt(4002,`'${t.segmentGroup}'`)}recognize(){let t=FU(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ui(({children:e,rootSnapshot:i})=>{let r=new tl(i,e),s=new Kv("",r),o=KU(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new yp([],Object.freeze({}),Object.freeze(Ke({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),gi,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,gi,e).pipe(ui(i=>({children:i,rootSnapshot:e})),ad(i=>{if(i instanceof e_)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Jv?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,s):this.processSegment(t,e,i,i.segments,r,!0,s).pipe(ui(o=>o instanceof tl?[o]:[]))}processChildren(t,e,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return Ur(s).pipe(wh(o=>{let a=i.children[o],u=BQ(e,o);return this.processSegmentGroup(t,u,a,o,r)}),lA((o,a)=>(o.push(...a),o)),Ch(null),aA(),Rr(o=>{if(o===null)return Og(i);let a=hz(o);return CJ(a),Pn(a)}))}processSegment(t,e,i,r,s,o,a){return Ur(e).pipe(wh(u=>this.processSegmentAgainstRoute(u._injector??t,e,u,i,r,s,o,a).pipe(ad(h=>{if(h instanceof Jv)return Pn(null);throw h}))),ld(u=>!!u),ad(u=>{if(cz(u))return bJ(i,r,s)?Pn(new xP):Og(i);throw u}))}processSegmentAgainstRoute(t,e,i,r,s,o,a,u){return Cc(i)!==o&&(o===gi||!KC(r,s,i))?Og(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o,u):Og(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o,a){let{matched:u,parameters:h,consumedSegments:p,positionalParamSegments:v,remainingSegments:x}=dz(e,r,s);if(!u)return Og(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wJ&&(this.allowRedirects=!1));let S=new yp(s,h,Object.freeze(Ke({},this.urlTree.queryParams)),this.urlTree.fragment,BU(r),Cc(r),r.component??r._loadedComponent??null,r,VU(r)),D=qC(S,a,this.paramsInheritanceStrategy);S.params=Object.freeze(D.params),S.data=Object.freeze(D.data);let O=this.applyRedirects.applyRedirectCommands(p,r.redirectTo,v,S,t);return this.applyRedirects.lineralizeSegments(r,O).pipe(Rr(N=>this.processSegment(t,i,e,N.concat(x),o,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,s,o){let a=pJ(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(Sl(u=>u.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(Sl(({routes:h})=>{let p=i._loadedInjector??t,{parameters:v,consumedSegments:x,remainingSegments:S}=u,D=new yp(x,v,Object.freeze(Ke({},this.urlTree.queryParams)),this.urlTree.fragment,BU(i),Cc(i),i.component??i._loadedComponent??null,i,VU(i)),O=qC(D,o,this.paramsInheritanceStrategy);D.params=Object.freeze(O.params),D.data=Object.freeze(O.data);let{segmentGroup:N,slicedSegments:T}=FU(e,x,S,h);if(T.length===0&&N.hasChildren())return this.processChildren(p,h,N,D).pipe(ui(Z=>new tl(D,Z)));if(h.length===0&&T.length===0)return Pn(new tl(D,[]));let j=Cc(i)===s;return this.processSegment(p,h,N,T,j?gi:s,!0,D).pipe(ui(Z=>new tl(D,Z instanceof tl?[Z]:[])))}))):Og(e)))}getChildConfig(t,e,i){return e.children?Pn({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?Pn({routes:e._loadedRoutes,injector:e._loadedInjector}):uJ(t,e,i,this.urlSerializer).pipe(Rr(r=>r?this.configLoader.loadChildren(t,e).pipe(uo(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):fJ(e))):Pn({routes:[],injector:t})}};function CJ(n){n.sort((t,e)=>t.value.outlet===gi?-1:e.value.outlet===gi?1:t.value.outlet.localeCompare(e.value.outlet))}function SJ(n){let t=n.value.routeConfig;return t&&t.path===""}function hz(n){let t=[],e=new Set;for(let i of n){if(!SJ(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=hz(i.children);t.push(new tl(i.value,r))}return t.filter(i=>!e.has(i))}function BU(n){return n.data||{}}function VU(n){return n.resolve||{}}function MJ(n,t,e,i,r,s){return Rr(o=>xJ(n,t,e,i,o.extractedUrl,r,s).pipe(ui(({state:a,tree:u})=>Mn(Ke({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function EJ(n,t){return Rr(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Pn(e);let s=new Set(r.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let h of fz(u))o.add(h);let a=0;return Ur(o).pipe(wh(u=>s.has(u)?TJ(u,i,n,t):(u.data=qC(u,u.parent,n).resolve,Pn(void 0))),uo(()=>a++),lg(1),Rr(u=>a===o.size?Pn(e):ma))})}function fz(n){let t=n.children.map(e=>fz(e)).flat();return[n,...t]}function TJ(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!rz(r)&&(s[t_]=r.title),AJ(s,n,t,i).pipe(ui(o=>(n._resolvedData=o,n.data=qC(n,n.parent,e).resolve,null)))}function AJ(n,t,e,i){let r=uP(n);if(r.length===0)return Pn({});let s={};return Ur(r).pipe(Rr(o=>DJ(n[o],t,e,i).pipe(ld(),uo(a=>{if(a instanceof Wg)throw XC(new Rh,a);s[o]=a}))),lg(1),ui(()=>s),ad(o=>cz(o)?ma:sg(o)))}function DJ(n,t,e,i){let r=n_(t)??i,s=$g(n,r),o=s.resolve?s.resolve(t,e):El(r,()=>s(t,e));return Nh(o)}function lP(n){return Sl(t=>{let e=n(t);return e?Ur(e).pipe(ui(()=>t)):Pn(t)})}var TP=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===gi);return i}getResolvedTitleForRoute(e){return e.data[t_]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>Ue(pz),providedIn:"root"})}return n})(),pz=(()=>{class n extends TP{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(qn(RU))};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wp=new wn("",{providedIn:"root",factory:()=>({})}),Cp=new wn(""),QC=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Ue(qV);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Pn(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=Nh(e.loadComponent()).pipe(ui(gz),uo(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),ev(()=>{this.componentLoaders.delete(e)})),r=new ng(i,()=>new Xr).pipe(tg());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Pn({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=mz(i,this.compiler,e,this.onLoadEndListener).pipe(ev(()=>{this.childrenLoaders.delete(i)})),o=new ng(s,()=>new Xr).pipe(tg());return this.childrenLoaders.set(i,o),o}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mz(n,t,e,i){return Nh(n.loadChildren()).pipe(ui(gz),Rr(r=>r instanceof DI||Array.isArray(r)?Pn(r):Ur(t.compileModuleAsync(r))),ui(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(e).injector,o=s.get(Cp,[],{optional:!0,self:!0}).flat()),{routes:o.map(EP),injector:s}}))}function IJ(n){return n&&typeof n=="object"&&"default"in n}function gz(n){return IJ(n)?n.default:n}var JC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>Ue(PJ),providedIn:"root"})}return n})(),PJ=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),AP=new wn(""),DP=new wn("");function yz(n,t,e){let i=n.get(DP),r=n.get(Qr);return n.get(xr).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(h=>setTimeout(h));let s,o=new Promise(h=>{s=h}),a=r.startViewTransition(()=>(s(),RJ(n))),{onViewTransitionCreated:u}=i;return u&&El(n,()=>u({transition:a,from:t,to:e})),o})}function RJ(n){return new Promise(t=>{lI({read:()=>setTimeout(t)},{injector:n})})}var IP=new wn(""),eS=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Xr;transitionAbortSubject=new Xr;configLoader=Ue(QC);environmentInjector=Ue(ba);destroyRef=Ue(Tl);urlSerializer=Ue(_p);rootContexts=Ue(bp);location=Ue(bu);inputBindingEnabled=Ue(i_,{optional:!0})!==null;titleStrategy=Ue(TP);options=Ue(wp,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Ue(JC);createViewTransition=Ue(AP,{optional:!0});navigationErrorHandler=Ue(IP,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Pn(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new VC(r)),i=r=>this.events.next(new UC(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(Mn(Ke({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(e){return this.transitions=new bs(null),this.transitions.pipe(Qa(i=>i!==null),Sl(i=>{let r=!1,s=!1;return Pn(i).pipe(Sl(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Ea.SupersededByNewNavigation),ma;this.currentTransition=i,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Mn(Ke({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=o.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&u!=="reload"){let h="";return this.events.next(new Su(o.id,this.urlSerializer.serialize(o.rawUrl),h,Ug.IgnoredSameUrlNavigation)),o.resolve(!1),ma}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Pn(o).pipe(Sl(h=>(this.events.next(new Lh(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?ma:Promise.resolve(h))),MJ(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),uo(h=>{i.targetSnapshot=h.targetSnapshot,i.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=Mn(Ke({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let p=new Xv(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:h,extractedUrl:p,source:v,restoredState:x,extras:S}=o,D=new Lh(h,this.urlSerializer.serialize(p),v,x);this.events.next(D);let O=nz(this.rootComponentType).snapshot;return this.currentTransition=i=Mn(Ke({},o),{targetSnapshot:O,urlAfterRedirects:p,extras:Mn(Ke({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,Pn(i)}else{let h="";return this.events.next(new Su(o.id,this.urlSerializer.serialize(o.extractedUrl),h,Ug.IgnoredByUrlHandlingStrategy)),o.resolve(!1),ma}}),uo(o=>{let a=new NC(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ui(o=>(this.currentTransition=i=Mn(Ke({},o),{guards:GQ(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),nJ(this.environmentInjector,o=>this.events.next(o)),uo(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw XC(this.urlSerializer,o.guardsResult);let a=new OC(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Qa(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Ea.GuardRejected),!1)),lP(o=>{if(o.guards.canActivateChecks.length!==0)return Pn(o).pipe(uo(a=>{let u=new FC(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Sl(a=>{let u=!1;return Pn(a).pipe(EJ(this.paramsInheritanceStrategy,this.environmentInjector),uo({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Ea.NoDataFromResolver)}}))}),uo(a=>{let u=new BC(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),lP(o=>{let a=u=>{let h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(uo(p=>{u.component=p}),ui(()=>{})));for(let p of u.children)h.push(...a(p));return h};return J0(a(o.targetSnapshot.root)).pipe(Ch(null),Cl(1))}),lP(()=>this.afterPreactivation()),Sl(()=>{let{currentSnapshot:o,targetSnapshot:a}=i,u=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return u?Ur(u).pipe(ui(()=>i)):Pn(i)}),ui(o=>{let a=UQ(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=Mn(Ke({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),uo(()=>{this.events.next(new Yv)}),WQ(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Cl(1),uo({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ta(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),$f(this.transitionAbortSubject.pipe(uo(o=>{throw o}))),ev(()=>{!r&&!s&&this.cancelNavigationTransition(i,"",Ea.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),ad(o=>{if(this.destroyed)return i.resolve(!1),ma;if(s=!0,lz(o))this.events.next(new wu(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),jQ(o)?this.events.next(new jg(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let a=new zg(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let u=El(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Wg){let{message:h,cancellationCode:p}=XC(this.urlSerializer,u);this.events.next(new wu(i.id,this.urlSerializer.serialize(i.extractedUrl),h,p)),this.events.next(new jg(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(u){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(u)}}return ma}))}))}cancelNavigationTransition(e,i,r){let s=new wu(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kJ(n){return n!==RC}var vz=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>Ue(LJ),providedIn:"root"})}return n})(),ZC=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},LJ=(()=>{class n extends ZC{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_z=(()=>{class n{urlSerializer=Ue(_p);options=Ue(wp,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Ue(bu);urlHandlingStrategy=Ue(JC);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Cu;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let s=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,o=r??s;return o instanceof Cu?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=nz(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>Ue(NJ),providedIn:"root"})}return n})(),NJ=(()=>{class n extends _z{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof Lh?this.updateStateMemento():e instanceof Su?this.commitTransition(i):e instanceof Xv?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Yv?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof wu&&(e.code===Ea.GuardRejected||e.code===Ea.NoDataFromResolver)?this.restoreHistory(i):e instanceof zg?this.restoreHistory(i,!0):e instanceof Ta&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:s,state:o}=i;if(this.location.isCurrentPathEqualTo(e)||s){let a=this.browserPageId,u=Ke(Ke({},o),this.generateNgRouterState(r,a));this.location.replaceState(e,"",u)}else{let a=Ke(Ke({},o),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===e.finalUrl&&s===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tS(n,t){n.events.pipe(Qa(e=>e instanceof Ta||e instanceof wu||e instanceof zg||e instanceof Su),ui(e=>e instanceof Ta||e instanceof Su?0:(e instanceof wu?e.code===Ea.Redirect||e.code===Ea.SupersededByNewNavigation:!1)?2:1),Qa(e=>e!==2),Cl(1)).subscribe(()=>{t()})}var OJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},to=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Ue(_V);stateManager=Ue(_z);options=Ue(wp,{optional:!0})||{};pendingTasks=Ue(Dg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Ue(eS);urlSerializer=Ue(_p);location=Ue(bu);urlHandlingStrategy=Ue(JC);_events=new Xr;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Ue(vz);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Ue(Cp,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Ue(i_,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ts;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof wu&&i.code!==Ea.Redirect&&i.code!==Ea.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ta)this.navigated=!0;else if(i instanceof jg){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u=Ke({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||kJ(r.source)},o);this.scheduleNavigation(a,RC,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}VJ(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),RC,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let u=Ke({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(EP),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=i,h=u?this.currentUrlTree.fragment:o,p=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":p=Ke(Ke({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let v;try{let x=r?r.snapshot:this.routerState.snapshot.root;v=QU(x)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),v=this.currentUrlTree.root}return JU(v,e,p,h??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=kh(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,RC,null,i)}navigate(e,i={skipLocationChange:!1}){return BJ(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=Ke({},OJ):i===!1?r=Ke({},FJ):r=i,kh(e))return kU(this.currentUrlTree,e,r);let s=this.parseUrl(e);return kU(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(e,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,h;o?(a=o.resolve,u=o.reject,h=o.promise):h=new Promise((v,x)=>{a=v,u=x});let p=this.pendingTasks.add();return tS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(v=>Promise.reject(v))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function BJ(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new wt(4008,!1)}function VJ(n){return!(n instanceof Yv)&&!(n instanceof jg)}var qg=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Xr;constructor(e,i,r,s,o,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a;let u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=e.events.subscribe(h=>{h instanceof Ta&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(kh(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||i||r||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let i=this.href===null?null:TB(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){let r=this.renderer,s=this.el.nativeElement;i!==null?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:kh(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(En(to),En(eo),KD("tabindex"),En(Ca),En(Ar),En(Rl))};static \u0275dir=Xn({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&yt("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),i&2&&Zo("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Pi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Pi],replaceUrl:[2,"replaceUrl","replaceUrl",Pi],routerLink:"routerLink"},features:[zs]})}return n})();var s_=class{};var bz=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,i,r,s){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Qa(e=>e instanceof Ta),wh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=wv(s.providers,e,`Route: ${s.path}`));let o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ur(r).pipe(ag())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=Pn(null);let s=r.pipe(Rr(o=>o===null?Pn(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(i.loadComponent&&!i._loadedComponent){let o=this.loader.loadComponent(i);return Ur([s,o]).pipe(ag())}else return s})}static \u0275fac=function(i){return new(i||n)(qn(to),qn(ba),qn(s_),qn(QC))};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xz=new wn(""),UJ=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,i,r,s,o={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Lh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ta?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Su&&e.code===Ug.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Hg&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Hg(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){nV()};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();function RP(n,...t){return Bw([{provide:Cp,multi:!0,useValue:n},[],{provide:eo,useFactory:wz,deps:[to]},{provide:nC,multi:!0,useFactory:Cz},t.map(e=>e.\u0275providers)])}function wz(n){return n.routerState.root}function Xg(n,t){return{\u0275kind:n,\u0275providers:t}}function Cz(){let n=Ue(Vs);return t=>{let e=n.get(lp);if(t!==e.components[0])return;let i=n.get(to),r=n.get(Sz);n.get(kP)===1&&i.initialNavigation(),n.get(Tz,null,Ci.Optional)?.setUpPreloading(),n.get(xz,null,Ci.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Sz=new wn("",{factory:()=>new Xr}),kP=new wn("",{providedIn:"root",factory:()=>1});function Mz(){let n=[{provide:kP,useValue:0},kI(()=>{let t=Ue(Vs);return t.get(VI,Promise.resolve()).then(()=>new Promise(i=>{let r=t.get(to),s=t.get(Sz);tS(r,()=>{i(!0)}),t.get(eS).afterPreactivation=()=>(i(!0),s.closed?Pn(void 0):s),r.initialNavigation()}))})];return Xg(2,n)}function Ez(){let n=[kI(()=>{Ue(to).setUpLocationChangeListener()}),{provide:kP,useValue:2}];return Xg(3,n)}var Tz=new wn("");function Az(n){return Xg(0,[{provide:Tz,useExisting:bz},{provide:s_,useExisting:n}])}function LP(){return Xg(6,[{provide:Rl,useClass:xC}])}function Dz(){return Xg(8,[SP,{provide:i_,useExisting:SP}])}function Iz(n){yu("NgRouterViewTransitions");let t=[{provide:AP,useValue:yz},{provide:DP,useValue:Ke({skipNextTransition:!!n?.skipInitialTransition},n)}];return Xg(9,t)}var Pz=[bu,{provide:_p,useClass:Rh},to,bp,{provide:eo,useFactory:wz,deps:[to]},QC,[]],o_=(()=>{class n{constructor(){}static forRoot(e,i){return{ngModule:n,providers:[Pz,[],{provide:Cp,multi:!0,useValue:e},[],i?.errorHandler?{provide:IP,useValue:i.errorHandler}:[],{provide:wp,useValue:i||{}},i?.useHash?HJ():jJ(),zJ(),i?.preloadingStrategy?Az(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?WJ(i):[],i?.bindToComponentInputs?Dz().\u0275providers:[],i?.enableViewTransitions?Iz().\u0275providers:[],GJ()]}}static forChild(e){return{ngModule:n,providers:[{provide:Cp,multi:!0,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Yo({type:n});static \u0275inj=Xo({})}return n})();function zJ(){return{provide:xz,useFactory:()=>{let n=Ue(CU),t=Ue(xr),e=Ue(wp),i=Ue(eS),r=Ue(_p);return e.scrollOffset&&n.setOffset(e.scrollOffset),new UJ(r,i,n,t,e)}}}function HJ(){return{provide:Rl,useClass:xC}}function jJ(){return{provide:Rl,useClass:hC}}function WJ(n){return[n.initialNavigation==="disabled"?Ez().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Mz().\u0275providers:[]]}var PP=new wn("");function GJ(){return[{provide:PP,useFactory:Cz},{provide:nC,multi:!0,useExisting:PP}]}var $J=["iconHost"],qJ=(n,t,e,i,r,s,o,a,u,h)=>({"text-healthy":n,"text-warn":t,"text-critical":e,"text-secondary":i,"bg-healthy":r,"bg-warn":s,"bg-critical":o,"bg-secondary":a,"bg-white":u,"text-white":h}),Oh=(()=>{class n{color=_t.required();iconComponent=_t();text=_t();inverted=_t(!1);isContentEmpty=an(()=>this.text()===void 0||this.text()==="");iconHost;ngAfterViewInit(){this.initIcon(this.iconComponent())}initIcon(e){if(this.iconHost.remove(),!e)return;let i=this.iconHost.createComponent(e);i.setInput("size","small"),this.inverted()?i.setInput("color",this.color()):i.setInput("color","white"),i.changeDetectorRef.detectChanges()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-badge"]],viewQuery:function(i,r){if(i&1&&Bi($J,5,Cr),i&2){let s;jn(s=Wn())&&(r.iconHost=s.first)}},inputs:{color:[1,"color"],iconComponent:[1,"iconComponent"],text:[1,"text"],inverted:[1,"inverted"]},decls:4,vars:15,consts:[["iconHost",""],[1,"badge","gap-1","font-medium","inline-flex","justify-center","items-center","rounded-lg","border","border-white",3,"ngClass"]],template:function(i,r){i&1&&(ge(0,"span",1),Jo(1,null,0),ot(3),ye()),i&2&&(Mi("empty-text",r.isContentEmpty()),Le("ngClass",jV(4,qJ,[r.inverted()&&r.color()==="healthy",r.inverted()&&r.color()==="warn",r.inverted()&&r.color()==="critical",r.inverted()&&r.color()==="secondary",!r.inverted()&&r.color()==="healthy",!r.inverted()&&r.color()==="warn",!r.inverted()&&r.color()==="critical",!r.inverted()&&r.color()==="secondary",r.inverted(),!r.inverted()])),xe(3),Ei(" ",r.text(),`
`))},dependencies:[Nt,us],styles:[".badge[_ngcontent-%COMP%]{width:max(fit-content,8rem);padding:.25rem .5rem}.badge.empty-text[_ngcontent-%COMP%]{aspect-ratio:1;padding:.25rem}"],changeDetection:0})}return n})();var XJ=["leftIconHost"],YJ=["rightIconHost"],ZJ=["centerIconHost"],KJ=["*"],QJ=(n,t,e,i)=>({"bg-primary":n,"bg-critical hover:hover:bg-red-700":t,"bg-warn hover:hover:bg-warn-dark":e,"bg-secondary hover:hover:bg-gray-500":i});function JJ(n,t){n&1&&(Ko(0),Jo(1,null,0),Qo())}function eee(n,t){if(n&1&&(Ko(0),ge(1,"span",6),Dl(2),ye(),Qo()),n&2){let e=Ae();xe(),Mi("ms-2",e.iconComponent()&&e.position()==="left")("me-2",e.iconComponent()&&e.position()==="right")}}function tee(n,t){n&1&&(Ko(0),Jo(1,null,1),Qo())}function nee(n,t){n&1&&(Ko(0),Jo(1,null,2),Qo())}var Ll=(()=>{class n{iconComponent=_t(void 0);position=_t("left");type=_t("primary");fullWidth=_t(!1);clicked=ji();leftIconHost;rightIconHost;centerIconHost;ngAfterViewInit(){this.iconComponent()&&this.position()==="left"&&this.initIcon(this.iconComponent(),this.leftIconHost),this.iconComponent()&&this.position()==="right"&&this.initIcon(this.iconComponent(),this.rightIconHost),this.iconComponent()&&this.position()==="center"&&this.initIcon(this.iconComponent(),this.centerIconHost)}initIcon(e,i){if(!e)return;let r=i.createComponent(e);r.setInput("size","small"),r.setInput("color","white"),r.changeDetectorRef.detectChanges()}onClicked(){this.clicked.emit()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-button"]],viewQuery:function(i,r){if(i&1&&(Bi(XJ,5,Cr),Bi(YJ,5,Cr),Bi(ZJ,5,Cr)),i&2){let s;jn(s=Wn())&&(r.leftIconHost=s.first),jn(s=Wn())&&(r.rightIconHost=s.first),jn(s=Wn())&&(r.centerIconHost=s.first)}},inputs:{iconComponent:[1,"iconComponent"],position:[1,"position"],type:[1,"type"],fullWidth:[1,"fullWidth"]},outputs:{clicked:"clicked"},ngContentSelectors:KJ,decls:7,vars:16,consts:[["leftIconHost",""],["rightIconHost",""],["centerIconHost",""],["type","button",1,"text-white","transition-colors","cursor-pointer","transition-all","hover:bg-gray-900","focus:ring-0","font-medium","rounded-lg","text-sm","py-2","inline-flex","items-center","justify-center",3,"click","ngClass"],[4,"ngIf"],[1,"sr-only"],[1,"button-text"]],template:function(i,r){i&1&&(_u(),ge(0,"button",3),yt("click",function(){return r.onClicked()}),It(1,JJ,3,0,"ng-container",4)(2,eee,3,4,"ng-container",4)(3,tee,3,0,"ng-container",4)(4,nee,3,0,"ng-container",4),ge(5,"span",5),ot(6,"Icon label"),ye()()),i&2&&(Mi("px-4",r.position()!=="center")("px-2",r.position()==="center")("w-full",r.fullWidth()),Le("ngClass",Dh(11,QJ,r.type()==="primary",r.type()==="critical",r.type()==="warn",r.type()==="secondary")),xe(),Le("ngIf",r.iconComponent()&&r.position()==="left"),xe(),Le("ngIf",r.position()!=="center"),xe(),Le("ngIf",r.iconComponent()&&r.position()==="right"),xe(),Le("ngIf",r.iconComponent()&&r.position()==="center"))},dependencies:[Nt,us,el],styles:[".no-spacing[_ngcontent-%COMP%]:not(:empty){padding:0!important;margin:0!important}.button-text[_ngcontent-%COMP%]{min-height:1.25em}"]})}return n})();var iee=["leftIconHost"],ree=["middleIconHost"],see=["rightIconHost"],NP=(n,t,e,i)=>({"text-white":n,"bg-primary":t,"bg-white":e,"text-primary":i});function oee(n,t){n&1&&Jo(0,null,0)}function aee(n,t){if(n&1){let e=An();ge(0,"button",7),yt("click",function(){mt(e);let r=Ae();return gt(r.onLeftClicked())}),It(1,oee,2,0,"ng-container",8),ot(2),ye()}if(n&2){let e=Ae();Le("ngClass",Dh(3,NP,e.activeButton()==="left",e.activeButton()==="left",e.activeButton()!=="left",e.activeButton()!=="left")),xe(),Le("ngIf",e.iconLeftComponent()),xe(),Ei(" ",e.labelLeft()," ")}}function lee(n,t){n&1&&Jo(0,null,1)}function cee(n,t){if(n&1){let e=An();ge(0,"button",9),yt("click",function(){mt(e);let r=Ae();return gt(r.onMiddleClicked())}),It(1,lee,2,0,"ng-container",8),ot(2),ye()}if(n&2){let e=Ae();Le("ngClass",Dh(3,NP,e.activeButton()==="middle",e.activeButton()==="middle",e.activeButton()!=="middle",e.activeButton()!=="middle")),xe(),Le("ngIf",e.iconMiddleComponent()),xe(),Ei(" ",e.labelMiddle()," ")}}function uee(n,t){n&1&&Jo(0,null,2)}function dee(n,t){if(n&1){let e=An();ge(0,"button",10),yt("click",function(){mt(e);let r=Ae();return gt(r.onRightClicked())}),It(1,uee,2,0,"ng-container",8),ot(2),ye()}if(n&2){let e=Ae();Le("ngClass",Dh(3,NP,e.activeButton()==="right",e.activeButton()==="right",e.activeButton()!=="right",e.activeButton()!=="right")),xe(),Le("ngIf",e.iconRightComponent()),xe(),Ei(" ",e.labelRight()," ")}}var kz=(()=>{class n{labelLeft=_t();labelMiddle=_t();labelRight=_t();iconLeftComponent=_t();iconMiddleComponent=_t();iconRightComponent=_t();activeButton=hV("left");leftClicked=ji();middleClicked=ji();rightClicked=ji();leftIconHost;middleIconHost;rightIconHost;ngAfterViewInit(){this.iconLeftComponent()&&this.initIcon(this.iconLeftComponent(),this.leftIconHost),this.iconMiddleComponent()&&this.initIcon(this.iconMiddleComponent(),this.middleIconHost),this.iconRightComponent()&&this.initIcon(this.iconRightComponent(),this.rightIconHost)}onLeftClicked(){this.activeButton.set("left"),this.leftClicked.emit(null)}onMiddleClicked(){this.activeButton.set("middle"),this.middleClicked.emit(null)}onRightClicked(){this.activeButton.set("right"),this.rightClicked.emit(null)}initIcon(e,i){if(!e)return;let r=i.createComponent(e);r.setInput("size","small"),r.changeDetectorRef.detectChanges()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-button-group"]],viewQuery:function(i,r){if(i&1&&(Bi(iee,5,Cr),Bi(ree,5,Cr),Bi(see,5,Cr)),i&2){let s;jn(s=Wn())&&(r.leftIconHost=s.first),jn(s=Wn())&&(r.middleIconHost=s.first),jn(s=Wn())&&(r.rightIconHost=s.first)}},inputs:{labelLeft:[1,"labelLeft"],labelMiddle:[1,"labelMiddle"],labelRight:[1,"labelRight"],iconLeftComponent:[1,"iconLeftComponent"],iconMiddleComponent:[1,"iconMiddleComponent"],iconRightComponent:[1,"iconRightComponent"],activeButton:[1,"activeButton"]},outputs:{activeButton:"activeButtonChange",leftClicked:"leftClicked",middleClicked:"middleClicked",rightClicked:"rightClicked"},decls:4,vars:3,consts:[["leftIconHost",""],["middleIconHost",""],["rightIconHost",""],["role","group",1,"inline-flex","rounded-md","shadow-xs"],["type","button","class","cursor-pointer inline-flex gap-1 items-center text-sm px-5 py-2.5 font-medium border border-primary rounded-s-lg hover:bg-gray-900 hover:text-white focus:ring-2 focus:ring-secondary",3,"ngClass","click",4,"ngIf"],["type","button","class","cursor-pointer inline-flex gap-1 items-center text-sm px-5 py-2.5 font-medium border-t border-b border-primary hover:bg-gray-900 hover:text-white focus:ring-2 focus:ring-secondary",3,"ngClass","click",4,"ngIf"],["type","button","class","cursor-pointer inline-flex gap-1 items-center text-sm px-5 py-2.5 font-medium border border-primary rounded-e-lg hover:bg-gray-900 hover:text-white focus:ring-2 focus:ring-secondary",3,"ngClass","click",4,"ngIf"],["type","button",1,"cursor-pointer","inline-flex","gap-1","items-center","text-sm","px-5","py-2.5","font-medium","border","border-primary","rounded-s-lg","hover:bg-gray-900","hover:text-white","focus:ring-2","focus:ring-secondary",3,"click","ngClass"],[4,"ngIf"],["type","button",1,"cursor-pointer","inline-flex","gap-1","items-center","text-sm","px-5","py-2.5","font-medium","border-t","border-b","border-primary","hover:bg-gray-900","hover:text-white","focus:ring-2","focus:ring-secondary",3,"click","ngClass"],["type","button",1,"cursor-pointer","inline-flex","gap-1","items-center","text-sm","px-5","py-2.5","font-medium","border","border-primary","rounded-e-lg","hover:bg-gray-900","hover:text-white","focus:ring-2","focus:ring-secondary",3,"click","ngClass"]],template:function(i,r){i&1&&(ge(0,"div",3),It(1,aee,3,8,"button",4)(2,cee,3,8,"button",5)(3,dee,3,8,"button",6),ye()),i&2&&(xe(),Le("ngIf",r.iconLeftComponent()||r.labelLeft()),xe(),Le("ngIf",r.iconMiddleComponent()||r.labelMiddle()),xe(),Le("ngIf",r.iconRightComponent()||r.labelRight()))},dependencies:[Nt,us,el],encapsulation:2,changeDetection:0})}return n})();var jz=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(En(Ca),En(Ar))};static \u0275dir=Xn({type:n})}return n})(),cS=(()=>{class n extends jz{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275dir=Xn({type:n,features:[oi]})}return n})(),f_=new wn(""),hee={provide:f_,useExisting:pu(()=>VP),multi:!0},VP=(()=>{class n extends cS{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275dir=Xn({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&yt("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Mo([hee]),oi]})}return n})(),fee={provide:f_,useExisting:pu(()=>Bh),multi:!0};function pee(){let n=Pl()?Pl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var mee=new wn(""),Bh=(()=>{class n extends jz{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!pee())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(En(Ca),En(Ar),En(mee,8))};static \u0275dir=Xn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&yt("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},standalone:!1,features:[Mo([fee]),oi]})}return n})();function gee(n){return n==null||yee(n)===0}function yee(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var UP=new wn(""),Wz=new wn("");function vee(n){return gee(n.value)?{required:!0}:null}function Lz(n){return null}function Gz(n){return n!=null}function $z(n){return Ah(n)?Ur(n):n}function qz(n){let t={};return n.forEach(e=>{t=e!=null?Ke(Ke({},t),e):t}),Object.keys(t).length===0?null:t}function Xz(n,t){return t.map(e=>e(n))}function _ee(n){return!n.validate}function Yz(n){return n.map(t=>_ee(t)?t:e=>t.validate(e))}function bee(n){if(!n)return null;let t=n.filter(Gz);return t.length==0?null:function(e){return qz(Xz(e,t))}}function zP(n){return n!=null?bee(Yz(n)):null}function xee(n){if(!n)return null;let t=n.filter(Gz);return t.length==0?null:function(e){let i=Xz(e,t).map($z);return sA(i).pipe(ui(qz))}}function HP(n){return n!=null?xee(Yz(n)):null}function Nz(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function wee(n){return n._rawValidators}function Cee(n){return n._rawAsyncValidators}function OP(n){return n?Array.isArray(n)?n:[n]:[]}function iS(n,t){return Array.isArray(n)?n.includes(t):n===t}function Oz(n,t){let e=OP(t);return OP(n).forEach(r=>{iS(e,r)||e.push(r)}),e}function Fz(n,t){return OP(t).filter(e=>!iS(n,e))}var rS=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=zP(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=HP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Kg=class extends rS{name;get formDirective(){return null}get path(){return null}},h_=class extends rS{_parent=null;name=null;valueAccessor=null},sS=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},See={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},QCe=Mn(Ke({},See),{"[class.ng-submitted]":"isSubmitted"}),Qg=(()=>{class n extends sS{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(En(h_,2))};static \u0275dir=Xn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Mi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[oi]})}return n})(),uS=(()=>{class n extends sS{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(En(Kg,10))};static \u0275dir=Xn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Mi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[oi]})}return n})();var a_="VALID",nS="INVALID",Yg="PENDING",l_="DISABLED",Fh=class{},oS=class extends Fh{value;source;constructor(t,e){super(),this.value=t,this.source=e}},u_=class extends Fh{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},d_=class extends Fh{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Zg=class extends Fh{status;source;constructor(t,e){super(),this.status=t,this.source=e}},FP=class extends Fh{source;constructor(t){super(),this.source=t}},BP=class extends Fh{source;constructor(t){super(),this.source=t}};function Zz(n){return(dS(n)?n.validators:n)||null}function Mee(n){return Array.isArray(n)?zP(n):n||null}function Kz(n,t){return(dS(t)?t.asyncValidators:n)||null}function Eee(n){return Array.isArray(n)?HP(n):n||null}function dS(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Tee(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new wt(1e3,"");if(!i[e])throw new wt(1001,"")}function Aee(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new wt(1002,"")})}var aS=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return ho(this.statusReactive)}set status(t){ho(()=>this.statusReactive.set(t))}_status=an(()=>this.statusReactive());statusReactive=mn(void 0);get valid(){return this.status===a_}get invalid(){return this.status===nS}get pending(){return this.status==Yg}get disabled(){return this.status===l_}get enabled(){return this.status!==l_}errors;get pristine(){return ho(this.pristineReactive)}set pristine(t){ho(()=>this.pristineReactive.set(t))}_pristine=an(()=>this.pristineReactive());pristineReactive=mn(!0);get dirty(){return!this.pristine}get touched(){return ho(this.touchedReactive)}set touched(t){ho(()=>this.touchedReactive.set(t))}_touched=an(()=>this.touchedReactive());touchedReactive=mn(!1);get untouched(){return!this.touched}_events=new Xr;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Oz(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Oz(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Fz(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Fz(t,this._rawAsyncValidators))}hasValidator(t){return iS(this._rawValidators,t)}hasAsyncValidator(t){return iS(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Mn(Ke({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new d_(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new d_(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Mn(Ke({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new u_(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new u_(!0,i))}markAsPending(t={}){this.status=Yg;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Zg(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Mn(Ke({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=l_,this.errors=null,this._forEachChild(r=>{r.disable(Mn(Ke({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new oS(this.value,i)),this._events.next(new Zg(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Mn(Ke({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=a_,this._forEachChild(i=>{i.enable(Mn(Ke({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Mn(Ke({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===a_||this.status===Yg)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new oS(this.value,e)),this._events.next(new Zg(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Mn(Ke({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?l_:a_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Yg,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=$z(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Zg(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new en,this.statusChanges=new en}_calculateStatus(){return this._allControlsDisabled()?l_:this.errors?nS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yg)?Yg:this._anyControlsHaveStatus(nS)?nS:a_}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new u_(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new d_(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){dS(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Mee(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Eee(this._rawAsyncValidators)}},lS=class extends aS{constructor(t,e,i){super(Zz(e),Kz(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Aee(this,!0,t),Object.keys(t).forEach(i=>{Tee(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var hS=new wn("",{providedIn:"root",factory:()=>fS}),fS="always";function Dee(n,t){return[...t.path,n]}function Qz(n,t,e=fS){Jz(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),Pee(n,t),kee(n,t),Ree(n,t),Iee(n,t)}function Bz(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Iee(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Jz(n,t){let e=wee(n);t.validator!==null?n.setValidators(Nz(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=Cee(n);t.asyncValidator!==null?n.setAsyncValidators(Nz(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Bz(t._rawValidators,r),Bz(t._rawAsyncValidators,r)}function Pee(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&eH(n,t)})}function Ree(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&eH(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function eH(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kee(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Lee(n,t){n==null,Jz(n,t)}function Nee(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Oee(n){return Object.getPrototypeOf(n.constructor)===cS}function Fee(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Bee(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===Bh?e=s:Oee(s)?i=s:r=s}),r||i||e||null}var Vee={provide:Kg,useExisting:pu(()=>p_)},c_=Promise.resolve(),p_=(()=>{class n extends Kg{callSetDisabledState;get submitted(){return ho(this.submittedReactive)}_submitted=an(()=>this.submittedReactive());submittedReactive=mn(!1);_directives=new Set;form;ngSubmit=new en;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new lS({},zP(e),HP(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){c_.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Qz(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){c_.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){c_.then(()=>{let i=this._findContainer(e.path),r=new lS({});Lee(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){c_.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){c_.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Fee(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new FP(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1),this.form._events.next(new BP(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(En(UP,10),En(Wz,10),En(hS,8))};static \u0275dir=Xn({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&yt("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Mo([Vee]),oi]})}return n})();function Vz(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Uz(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Uee=class extends aS{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(Zz(e),Kz(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),dS(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Uz(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Vz(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Vz(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Uz(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var zee={provide:h_,useExisting:pu(()=>Sp)},zz=Promise.resolve(),Sp=(()=>{class n extends h_{_changeDetectorRef;callSetDisabledState;control=new Uee;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new en;constructor(e,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Bee(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Nee(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Qz(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){zz.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&Pi(i);zz.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Dee(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(En(Kg,9),En(UP,10),En(Wz,10),En(f_,10),En(Ss,8),En(hS,8))};static \u0275dir=Xn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Mo([zee]),oi,zs]})}return n})();var pS=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var Hee=new wn("");var jee={provide:f_,useExisting:pu(()=>mS),multi:!0};function tH(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function Wee(n){return n.split(":")[0]}var mS=(()=>{class n extends cS{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i=this._getOptionId(e),r=tH(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=Wee(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275dir=Xn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&yt("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Mo([jee]),oi]})}return n})(),nH=(()=>{class n{_element;_renderer;_select;id;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(tH(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(En(Ar),En(Ca),En(mS,9))};static \u0275dir=Xn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Gee={provide:f_,useExisting:pu(()=>iH),multi:!0};function Hz(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function $ee(n){return n.split(":")[0]}var iH=(()=>{class n extends cS{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let u=o[a],h=this._getOptionValue(u.value);r.push(h)}}else{let o=i.options;for(let a=0;a<o.length;a++){let u=o[a];if(u.selected){let h=this._getOptionValue(u.value);r.push(h)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=$ee(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275dir=Xn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&yt("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Mo([Gee]),oi]})}return n})(),rH=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(Hz(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Hz(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(En(Ar),En(Ca),En(iH,9))};static \u0275dir=Xn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var qee=(()=>{class n{_validator=Lz;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Lz,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xn({type:n,features:[zs]})}return n})();var Xee={provide:UP,useExisting:pu(()=>jP),multi:!0};var jP=(()=>{class n extends qee{required;inputName="required";normalizeInput=Pi;createValidator=e=>vee;enabled(e){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275dir=Xn({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Zo("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Mo([Xee]),oi]})}return n})();var sH=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Yo({type:n});static \u0275inj=Xo({})}return n})();var Mu=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:hS,useValue:e.callSetDisabledState??fS}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Yo({type:n});static \u0275inj=Xo({imports:[sH]})}return n})(),oH=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Hee,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:hS,useValue:e.callSetDisabledState??fS}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Yo({type:n});static \u0275inj=Xo({imports:[sH]})}return n})();var Mp={id:"-1",name:"All Assets"};var rr=(()=>{class n{size=_t("medium");hover=_t();color=_t();static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xn({type:n,inputs:{size:[1,"size"],hover:[1,"hover"],color:[1,"color"]}})}return n})();var Yee=(n,t,e)=>[n,t,e],lr=(()=>{class n extends rr{path=_t.required();isStroke=_t(!1);isFill=_t(!0);static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-icon"]],inputs:{path:[1,"path"],isStroke:[1,"isStroke"],isFill:[1,"isFill"]},features:[oi],decls:2,vars:8,consts:[["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",1,"transition","duration-75",3,"ngClass"],["fill-rule","evenodd","clip-rule","evenodd","stroke-width","2","stroke-linecap","round"]],template:function(i,r){i&1&&(So(),ge(0,"svg",0),it(1,"path",1),ye()),i&2&&(Le("ngClass",Lg(4,Yee,"text-"+r.color(),r.hover()?"group-hover:text-"+r.hover():"",r.size()==="small"?"w-5 h-5":r.size()==="medium"?"w-7 h-7":r.size()==="large"?"w-10 h-10":"")),Zo("fill",r.isFill()?"currentColor":"none")("stroke",r.isStroke()?"currentColor":"none"),xe(),Zo("d",r.path()))},dependencies:[Nt,us],encapsulation:2,changeDetection:0})}return n})();var Nl=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-alarm-icon"]],features:[oi],decls:1,vars:4,consts:[[3,"color","hover","size","path"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("hover",r.hover())("size",r.size())("path","M17.133 12.632v-1.8a5.407 5.407 0 0 0-4.154-5.262.955.955 0 0 0 .021-.106V3.1a1 1 0 0 0-2 0v2.364a.933.933 0 0 0 .021.106 5.406 5.406 0 0 0-4.154 5.262v1.8C6.867 15.018 5 15.614 5 16.807 5 17.4 5 18 5.538 18h12.924C19 18 19 17.4 19 16.807c0-1.193-1.867-1.789-1.867-4.175Zm-13.267-.8a1 1 0 0 1-1-1 9.424 9.424 0 0 1 2.517-6.391A1.001 1.001 0 1 1 6.854 5.8a7.43 7.43 0 0 0-1.988 5.037 1 1 0 0 1-1 .995Zm16.268 0a1 1 0 0 1-1-1A7.431 7.431 0 0 0 17.146 5.8a1 1 0 0 1 1.471-1.354 9.424 9.424 0 0 1 2.517 6.391 1 1 0 0 1-1 .995ZM8.823 19a3.453 3.453 0 0 0 6.354 0H8.823Z")},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var gS=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-clock-icon"]],features:[oi],decls:1,vars:4,consts:[[3,"color","hover","size","path"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("hover",r.hover())("size",r.size())("path","M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm11-4a1 1 0 1 0-2 0v4a1 1 0 0 0 .293.707l3 3a1 1 0 0 0 1.414-1.414L13 11.586V8Z")},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var m_=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-globe-icon"]],features:[oi],decls:1,vars:4,consts:[[3,"color","size","hover","path"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("size",r.size())("hover",r.hover())("path","M8.64 4.737A7.97 7.97 0 0 1 12 4a7.997 7.997 0 0 1 6.933 4.006h-.738c-.65 0-1.177.25-1.177.9 0 .33 0 2.04-2.026 2.008-1.972 0-1.972-1.732-1.972-2.008 0-1.429-.787-1.65-1.752-1.923-.374-.105-.774-.218-1.166-.411-1.004-.497-1.347-1.183-1.461-1.835ZM6 4a10.06 10.06 0 0 0-2.812 3.27A9.956 9.956 0 0 0 2 12c0 5.289 4.106 9.619 9.304 9.976l.054.004a10.12 10.12 0 0 0 1.155.007h.002a10.024 10.024 0 0 0 1.5-.19 9.925 9.925 0 0 0 2.259-.754 10.041 10.041 0 0 0 4.987-5.263A9.917 9.917 0 0 0 22 12a10.025 10.025 0 0 0-.315-2.5A10.001 10.001 0 0 0 12 2a9.964 9.964 0 0 0-6 2Zm13.372 11.113a2.575 2.575 0 0 0-.75-.112h-.217A3.405 3.405 0 0 0 15 18.405v1.014a8.027 8.027 0 0 0 4.372-4.307ZM12.114 20H12A8 8 0 0 1 5.1 7.95c.95.541 1.421 1.537 1.835 2.415.209.441.403.853.637 1.162.54.712 1.063 1.019 1.591 1.328.52.305 1.047.613 1.6 1.316 1.44 1.825 1.419 4.366 1.35 5.828Z")},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var aH=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-house-icon"]],features:[oi],decls:1,vars:4,consts:[[3,"color","size","hover","path"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("size",r.size())("hover",r.hover())("path","M21.7189 11.2929L19.7165 9.29286L12.7079 2.29279C12.5201 2.10532 12.2655 2 12 2C11.7345 2 11.4799 2.10532 11.2921 2.29279L4.28352 9.29286L2.28106 11.2929C2.09867 11.4815 1.99776 11.7341 2.00004 11.9963C2.00232 12.2585 2.10762 12.5093 2.29325 12.6947C2.47889 12.8801 2.73001 12.9853 2.99253 12.9876C3.25505 12.9899 3.50796 12.8891 3.6968 12.7069L3.99016 12.4139V20C3.99016 20.5304 4.20113 21.0391 4.57666 21.4142C4.9522 21.7893 5.46153 22 5.99262 22H8.99631C9.26185 22 9.51652 21.8946 9.70429 21.7071C9.89205 21.5196 9.99754 21.2652 9.99754 21V16.9999C9.99754 16.7347 10.103 16.4804 10.2908 16.2928C10.4786 16.1053 10.7332 15.9999 10.9988 15.9999H13.0012C13.2668 15.9999 13.5214 16.1053 13.7092 16.2928C13.897 16.4804 14.0025 16.7347 14.0025 16.9999V21C14.0025 21.2652 14.1079 21.5196 14.2957 21.7071C14.4835 21.8946 14.7381 22 15.0037 22H18.0074C18.5385 22 19.0478 21.7893 19.4233 21.4142C19.7989 21.0391 20.0098 20.5304 20.0098 20V12.4139L20.3032 12.7069C20.492 12.8891 20.7449 12.9899 21.0075 12.9876C21.27 12.9853 21.5211 12.8801 21.7067 12.6947C21.8924 12.5093 21.9977 12.2585 22 11.9963C22.0022 11.7341 21.9013 11.4815 21.7189 11.2929Z")},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var yS=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-bridge-icon"]],features:[oi],decls:1,vars:4,consts:[[3,"color","hover","size","path"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("hover",r.hover())("size",r.size())("path","M6.3335 5C6.70156 5.00009 6.99991 5.31337 7 5.69983C7 6.1885 7.29055 7.34656 8.25244 7.84033C9.20464 8.32906 10.565 8.60938 12 8.60938C13.435 8.60938 14.7954 8.32906 15.7476 7.84033C16.7094 7.34656 17 6.02713 17 5.53846V5.69983C17.0001 5.31337 17.2984 5.00009 17.6665 5H18.8335C19.2016 5.00009 19.4999 5.31337 19.5 5.69983V5.53846C19.5 6.12943 19.725 7.28312 20.1877 7.93091C20.6273 8.54636 22 8.02885 22 8.9375C22 9.84615 22 13.9252 22 13.9252C21.9999 14.3116 21.7016 14.6249 21.3335 14.625H19.5V16.375H19.6668C20.0349 16.3751 20.3332 16.6884 20.3333 17.0748V18.3002C20.3332 18.6866 20.0349 18.9999 19.6668 19H16.8332C16.4651 18.9999 16.1668 18.6866 16.1667 18.3002V17.0748C16.1668 16.6884 16.4651 16.3751 16.8332 16.375H17V14.625H7V16.375H7.16683C7.53489 16.3751 7.83325 16.6884 7.83333 17.0748V18.3002C7.83325 18.6866 7.53489 18.9999 7.16683 19H4.33317C3.96511 18.9999 3.66675 18.6866 3.66667 18.3002V17.0748C3.66675 16.6884 3.96511 16.3751 4.33317 16.375H4.5V14.625H2.6665C2.29844 14.6249 2.00009 14.3116 2 13.9252C2 13.9252 2 9.84615 2 8.9375C2 8.02885 3.37273 8.54636 3.81234 7.93091C4.27499 7.28312 4.5 6.2908 4.5 5.69983C4.50009 5.31337 4.79844 5.00009 5.1665 5H6.3335Z")},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var lH=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-sensor-icon"]],features:[oi],decls:1,vars:4,consts:[[3,"color","size","hover","path"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("size",r.size())("hover",r.hover())("path","M13 3a1 1 0 1 0-2 0v2a1 1 0 1 0 2 0V3ZM6.343 4.929A1 1 0 0 0 4.93 6.343l1.414 1.414a1 1 0 0 0 1.414-1.414L6.343 4.929Zm12.728 1.414a1 1 0 0 0-1.414-1.414l-1.414 1.414a1 1 0 0 0 1.414 1.414l1.414-1.414ZM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10Zm-9 4a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2H3Zm16 0a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2h-2ZM7.757 17.657a1 1 0 1 0-1.414-1.414l-1.414 1.414a1 1 0 1 0 1.414 1.414l1.414-1.414Zm9.9-1.414a1 1 0 0 0-1.414 1.414l1.414 1.414a1 1 0 0 0 1.414-1.414l-1.414-1.414ZM13 19a1 1 0 1 0-2 0v2a1 1 0 1 0 2 0v-2Z")},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var vS=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-plus-icon"]],features:[oi],decls:1,vars:5,consts:[[3,"color","size","hover","isStroke","path"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("size",r.size())("hover",r.hover())("isStroke",!0)("path","M12 5V12M12 12V19M12 12H19M12 12H5")},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var cH=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-minus-icon"]],features:[oi],decls:1,vars:5,consts:[[3,"color","size","hover","isStroke","path"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("size",r.size())("hover",r.hover())("isStroke",!0)("path","M19 12L5 12")},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var uH=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-reset-icon"]],features:[oi],decls:1,vars:4,consts:[[3,"color","size","hover","path"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("size",r.size())("hover",r.hover())("path","M20 11C19.447 11 19 11.448 19 12C19 15.86 15.859 19 12 19C10.152 19 8.403 18.26 7.111 17H10C10.553 17 11 16.552 11 16C11 15.448 10.553 15 10 15H5.253C5.055 14.959 4.848 14.983 4.651 15.07C4.633 15.077 4.614 15.08 4.596 15.088C4.583 15.095 4.569 15.094 4.556 15.101C4.529 15.117 4.514 15.143 4.488 15.16C4.201 15.337 4 15.639 4 16V21C4 21.552 4.447 22 5 22C5.553 22 6 21.552 6 21V18.68C7.63 20.141 9.755 21 12 21C16.963 21 21 16.962 21 12C21 11.448 20.553 11 20 11Z M5 12C5 8.14 8.141 5 12 5C13.848 5 15.597 5.74 16.889 7H14C13.447 7 13 7.448 13 8C13 8.552 13.447 9 14 9H18.745C18.944 9.042 19.153 9.017 19.35 8.929C19.368 8.922 19.387 8.919 19.405 8.911C19.418 8.904 19.432 8.905 19.445 8.898C19.472 8.882 19.487 8.856 19.513 8.839C19.799 8.663 20 8.361 20 8V3C20 2.448 19.553 2 19 2C18.447 2 18 2.448 18 3V5.32C16.37 3.859 14.245 3 12 3C7.037 3 3 7.038 3 12C3 12.552 3.447 13 4 13C4.553 13 5 12.552 5 12Z")},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var dH=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-location-icon"]],features:[oi],decls:1,vars:4,consts:[[3,"color","hover","size","path"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("hover",r.hover())("size",r.size())("path","M11.906 1.994a8.002 8.002 0 0 1 8.09 8.421 7.996 7.996 0 0 1-1.297 3.957.996.996 0 0 1-.133.204l-.108.129c-.178.243-.37.477-.573.699l-5.112 6.224a1 1 0 0 1-1.545 0L5.982 15.26l-.002-.002a18.146 18.146 0 0 1-.309-.38l-.133-.163a.999.999 0 0 1-.13-.202 7.995 7.995 0 0 1 6.498-12.518ZM15 9.997a3 3 0 1 1-5.999 0 3 3 0 0 1 5.999 0Z")},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var _S=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-right-arrow-icon"]],features:[oi],decls:1,vars:5,consts:[[3,"color","hover","size","isStroke","path"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("hover",r.hover())("size",r.size())("isStroke",!0)("path","M19 12H5m14 0-4 4m4-4-4-4")},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var Jg=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-angle-down-icon"]],features:[oi],decls:1,vars:6,consts:[[3,"color","hover","size","path","isStroke","isFill"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("hover",r.hover())("size",r.size())("path","m19 9-7 7-7-7")("isStroke",!0)("isFill",!1)},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var bS=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-close-icon"]],features:[oi],decls:1,vars:5,consts:[["path","M6 18 17.94 6M18 18 6.06 6",3,"color","size","hover","isStroke","isFill"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("size",r.size())("hover",r.hover())("isStroke",!0)("isFill",!1)},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var xS=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-envelope-icon"]],features:[oi],decls:1,vars:5,consts:[["path","m3.5 5.5 7.893 6.036a1 1 0 0 0 1.214 0L20.5 5.5M4 19h16a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Z",3,"color","size","hover","isStroke","isFill"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("size",r.size())("hover",r.hover())("isStroke",!0)("isFill",!1)},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var hH=(()=>{class n extends rr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Si(n)))(r||n)}})();static \u0275cmp=bt({type:n,selectors:[["lib-info-icon"]],features:[oi],decls:1,vars:4,consts:[[3,"color","size","hover","path"]],template:function(i,r){i&1&&it(0,"lib-icon",0),i&2&&Le("color",r.color())("size",r.size())("hover",r.hover())("path","M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm9.408-5.5a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2h-.01ZM10 10a1 1 0 1 0 0 2h1v3h-1a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2h-1v-4a1 1 0 0 0-1-1h-2Z")},dependencies:[Nt,lr],encapsulation:2,changeDetection:0})}return n})();var Zee=["selectorMenu"],Kee=(n,t)=>t.id;function Qee(n,t){if(n&1){let e=An();ge(0,"li")(1,"button",5),yt("click",function(){let r=mt(e).$implicit,s=Ae();return gt(s.onSelectAsset(r))}),ot(2),ye()()}if(n&2){let e=t.$implicit;xe(2),Ei(" ",e.name," ")}}var fH=(()=>{class n{selectorMenuRef;ALL_ASSETS_ELEMENT=Mp;MAX_SELECTOR_HEIGHT=300;availableAssets=_t([]);allowAllAssets=_t(!1);preSelectedAsset=_t(void 0);onAssetSelection=_t();selectAssetEffect=ji();searchTerm=mn("");selectedAsset=mn(void 0);selectorHeight=mn("0px");selectorCollapsed=mn(!0);selectorContentScrollable=mn(!1);selectableAssets=an(()=>{let e=this.availableAssets(),i=this.selectedAsset();return this.allowAllAssets()&&(e=[Mp,...e]),i?e.filter(r=>r.id!==i.id):e});filteredAssets=an(()=>this.selectableAssets().filter(e=>e.name.toLowerCase().includes(this.searchTerm().toLowerCase())));constructor(){Wi(()=>{let e=this.onAssetSelection();if(!e)return;let i=e(),r=this.availableAssets().find(s=>s.id===i);r&&this.selectedAsset.set(r)})}ngOnInit(){let e=this.preSelectedAsset();e?this.selectedAsset.set(e):this.allowAllAssets()?this.selectedAsset.set(Mp):this.selectedAsset.set(this.selectableAssets()[0])}expandSelectorMenu(){this.selectorCollapsed.set(!1),this.setSelectorMenuHeight()}collapseSelectorMenu(){this.selectorCollapsed.set(!0),this.setSelectorMenuHeight()}onFocusOut(){setTimeout(()=>{this.collapseSelectorMenu(),this.searchTerm.set("")},50)}onSelectAsset(e){this.selectAssetEffect.emit(e),this.selectedAsset.set(e)}setSelectorMenuHeight(){let e=this.selectorMenuRef.nativeElement;if(this.selectorCollapsed()){this.selectorHeight.set("0px");return}let i=e.scrollHeight;i>this.MAX_SELECTOR_HEIGHT?(this.selectorHeight.set(`${this.MAX_SELECTOR_HEIGHT}px`),this.selectorContentScrollable.set(!0)):(this.selectorHeight.set(`${i}px`),this.selectorContentScrollable.set(!1))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-breadcrumb-asset-selector"]],viewQuery:function(i,r){if(i&1&&Bi(Zee,5),i&2){let s;jn(s=Wn())&&(r.selectorMenuRef=s.first)}},inputs:{availableAssets:[1,"availableAssets"],allowAllAssets:[1,"allowAllAssets"],preSelectedAsset:[1,"preSelectedAsset"],onAssetSelection:[1,"onAssetSelection"]},outputs:{selectAssetEffect:"selectAssetEffect"},decls:7,vars:12,consts:[["selectorMenu",""],[1,"flex","items-center"],["type","text",1,"filter","block","w-full","cursor-pointer","rounded-lg","placeholder-dark","focus:placeholder-gray-300","text-sm","font-medium","border-none","shadow-none","focus:outline-none","focus:ring-0","px-2","py-1.5",3,"ngModelChange","focusin","focusout","ngModel"],["size","small",1,"selector-angle","z-10","-ml-6"],[1,"selector","absolute","z-10","bg-white","border","shadow-none","border-gray-300","w-full","rounded-lg","shadow"],[1,"block","text-sm","font-medium","w-full","text-left","px-3","py-1.5","hover:bg-gray-100","cursor-pointer",3,"click"]],template:function(i,r){if(i&1){let s=An();ge(0,"div",1)(1,"input",2),yt("ngModelChange",function(a){return mt(s),gt(r.searchTerm.set(a))})("focusin",function(){return mt(s),gt(r.expandSelectorMenu())})("focusout",function(){return mt(s),gt(r.onFocusOut())}),ye(),it(2,"lib-angle-down-icon",3),ye(),ge(3,"ul",4,0),ws(5,Qee,3,1,"li",null,Kee),ye()}if(i&2){let s;xe(),Le("ngModel",r.searchTerm()),Zo("placeholder",(s=(s=r.selectedAsset())==null?null:s.name)!==null&&s!==void 0?s:r.ALL_ASSETS_ELEMENT.name),xe(),Mi("rotated",!r.selectorCollapsed()),xe(),kr("max-height",r.selectorHeight()),Mi("border-transparent",r.selectorCollapsed())("overflow-hidden",r.selectorCollapsed()||!r.selectorContentScrollable())("overflow-auto",!r.selectorCollapsed()&&r.selectorContentScrollable()),xe(2),Cs(r.filteredAssets())}},dependencies:[Nt,Mu,Bh,Qg,Sp,Jg],styles:[".selector[_ngcontent-%COMP%]{transition:all .5s ease}.selector-angle[_ngcontent-%COMP%]{transition:all .5s ease;pointer-events:none}.selector-angle.rotated[_ngcontent-%COMP%]{transform:rotate(-180deg)}"],changeDetection:0})}return n})();var Jee=()=>({size:"small"});function ete(n,t){n&1&&(So(),ge(0,"svg",3),it(1,"path",5),ye())}function tte(n,t){n&1&&Jo(0)}function nte(n,t){if(n&1&&It(0,tte,1,0,"ng-container",6),n&2){let e=Ae(2).$implicit;Le("ngComponentOutlet",e.icon)("ngComponentOutletInputs",sC(2,Jee))}}function ite(n,t){if(n&1&&(ge(0,"li")(1,"div",2),It(2,ete,2,0,":svg:svg",3),ge(3,"a",4),It(4,nte,1,3,"ng-container"),ot(5),ye()()()),n&2){let e,i=Ae(),r=i.$implicit,s=i.$index;xe(2),Kt(s!==0?2:-1),xe(),Mi("ms-1",s!==0)("md:ms-2",s!==0),Le("routerLink",(e=r.href)!==null&&e!==void 0?e:null),xe(),Kt(r.icon?4:-1),xe(),Ei(" ",r.text," ")}}function rte(n,t){if(n&1){let e=An();ge(0,"li")(1,"div",2),So(),ge(2,"svg",3),it(3,"path",5),ye(),gu(),ge(4,"div",7)(5,"lib-breadcrumb-asset-selector",8),yt("selectAssetEffect",function(r){mt(e);let s=Ae(2);return gt(s.onSelectAsset(r))}),ye()()()()}if(n&2){let e=Ae().$implicit,i=Ae();xe(5),Le("availableAssets",i.availableAssets())("preSelectedAsset",e.initialValue)("allowAllAssets",e.allowAllAssets)("onAssetSelection",i.onAssetSelection())}}function ste(n,t){if(n&1&&It(0,ite,6,8,"li")(1,rte,6,4,"li"),n&2){let e=t.$implicit,i=Ae();Kt(i.isSimple(e)?0:-1),xe(),Kt(i.isAssetSelector(e)?1:-1)}}var wS=(()=>{class n{crumbs=_t.required();availableAssets=_t.required();onAssetSelection=_t();selectAssetEffect=ji();isSimple(e){return e.type==="SIMPLE_BREADCRUMB"}isAssetSelector(e){return e.type==="ASSET_SELECTOR_BREADCRUMB"}onSelectAsset(e){this.selectAssetEffect.emit(e)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-breadcrumb"]],inputs:{crumbs:[1,"crumbs"],availableAssets:[1,"availableAssets"],onAssetSelection:[1,"onAssetSelection"]},outputs:{selectAssetEffect:"selectAssetEffect"},decls:4,vars:0,consts:[["aria-label","Breadcrumb",1,"flex"],[1,"inline-flex","h-full","items-center","space-x-1","md:space-x-3","rtl:space-x-reverse","p-1","text-dark"],[1,"flex","items-center"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 6 10",1,"w-3","h-3","text-gray-400","mx-1","rtl:rotate-180"],[1,"inline-flex","items-center","text-sm","font-medium","gap-2",3,"routerLink"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 9 4-4-4-4"],[4,"ngComponentOutlet","ngComponentOutletInputs"],[1,"relative","ms-1","md:ms-2"],[3,"selectAssetEffect","availableAssets","preSelectedAsset","allowAllAssets","onAssetSelection"]],template:function(i,r){i&1&&(ge(0,"nav",0)(1,"ol",1),ws(2,ste,2,2,null,null,BV),ye()()),i&2&&(xe(2),Cs(r.crumbs()))},dependencies:[Nt,$I,Mu,fH,qg],encapsulation:2,changeDetection:0})}return n})();var pH=(()=>{class n{text=_t.required();input=_t;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-indicator"]],inputs:{text:[1,"text"]},decls:2,vars:1,consts:[[1,"indicator","text-2xs","aspect-square","rounded-full","flex","w-5","overflow-hidden","justify-center","items-center"]],template:function(i,r){i&1&&(ge(0,"span",0),ot(1),ye()),i&2&&(xe(),Ei(" ",r.text(),`
`))},dependencies:[Nt],styles:[".indicator[_ngcontent-%COMP%]{-webkit-backdrop-filter:brightness(1.3);backdrop-filter:brightness(1.3);background-color:#fff3}"],changeDetection:0})}return n})();var ote=["*"],ate=(n,t,e)=>({"text-primary border-purple-300 bg-purple-50":n,"text-critical border-red-300 bg-red-50":t,"text-warn-dark border-yellow-300 bg-yellow-50":e});function lte(n,t){if(n&1&&(ge(0,"div",4),ot(1),ye()),n&2){let e=Ae();xe(),Ei(" ",e.description()," ")}}var CS=(()=>{class n{title=_t.required();description=_t("");type=_t("info");static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-info-box"]],inputs:{title:[1,"title"],description:[1,"description"],type:[1,"type"]},ngContentSelectors:ote,decls:7,vars:7,consts:[["id","alert-additional-content-2","role","alert",1,"p-4","border","border-red-300","rounded-lg","bg-red-50",3,"ngClass"],[1,"flex","items-center"],["size","small"],[1,"text-lg","font-medium","ml-2"],[1,"mt-2","mb-4","text-sm"]],template:function(i,r){i&1&&(_u(),ge(0,"div",0)(1,"div",1),it(2,"lib-info-icon",2),ge(3,"h3",3),ot(4),ye()(),It(5,lte,2,1,"div",4),Dl(6,0,[1,"block"]),ye()),i&2&&(Le("ngClass",Lg(3,ate,r.type()==="info",r.type()==="critical",r.type()==="warn")),xe(4),Kr(r.title()),xe(),Kt(r.description()?5:-1))},dependencies:[Nt,us,hH],encapsulation:2,changeDetection:0})}return n})();var SS=n=>!0;var cte=["selectorMenu"],ute=["filterMenu"];function dte(n,t){if(n&1&&it(0,"lib-indicator",6),n&2){let e=Ae();Le("text",e.numberOfActiveFilters())}}function hte(n,t){if(n&1){let e=An();ge(0,"div",24)(1,"lib-close-icon",32),yt("click",function(){mt(e);let r=Ae();return gt(r.resetSearch())}),ye()()}}function fte(n,t){if(n&1){let e=An();ge(0,"li",33),yt("click",function(){let r=mt(e).$implicit,s=Ae();return gt(s.onSelectAsset(r))})("keydown.enter",function(){let r=mt(e).$implicit,s=Ae();return gt(s.onSelectAsset(r))}),ge(1,"button",34),ot(2),ye()()}if(n&2){let e=t.$implicit;xe(2),Ei(" ",e," ")}}function pte(n,t){n&1&&(ge(0,"li",28)(1,"span",35),ot(2," No available assets "),ye()())}var mH=(()=>{class n{selectorMenuRef;filterMenuRef;MAX_SELECTOR_HEIGHT=300;filter=ji();searchString=mn("");searchStringFilter=mn(void 0);availableAssetNames=_t([]);selectorHeight=mn("0px");selectorExpanded=mn(!1);filterHeight=mn("0px");filterExpanded=mn(!1);selectorContentScrollable=mn(!1);filteredAssets=an(()=>{let e=this.searchString()?.toLowerCase().trim()??"";return this.availableAssetNames().filter(i=>i.toLowerCase().includes(e))});healthyFilter=mn(!0);warningFilter=mn(!0);criticalFilter=mn(!0);currentStringFilter=an(()=>this.filterAssetsByFilterString());numberOfActiveFilters=an(()=>[this.healthyFilter(),this.warningFilter(),this.criticalFilter()].filter(e=>!e).length);filterAssetsByFilterString(){let e=this.searchStringFilter()?.toLowerCase();return e?i=>[i.asset.name,i.asset.description,i.asset.locationName,i.asset.material,i.asset.constructionYear?.toString()].find(r=>r!==void 0&&r.toLowerCase().includes(e))!==void 0:SS}filterMenuFilter=an(()=>e=>this.healthyFilter()&&e.healthStatus==="healthy"||this.warningFilter()&&e.healthStatus==="warn"||this.criticalFilter()&&e.healthStatus==="critical");combinedFilter=an(()=>{let e=this.currentStringFilter(),i=this.filterMenuFilter();return r=>e(r)&&i(r)});changeDetectorRef=Ue(Ss);constructor(){Wi(()=>{this.filteredAssets(),this.selectorExpanded(),this.setSelectorMenuHeight()}),Wi(()=>{this.filterExpanded(),this.setFilterMenuHeight()}),Wi(()=>{this.filter.emit(this.combinedFilter())})}ngAfterViewInit(){this.setFilterMenuHeight()}onSelectAsset=e=>{this.searchString.set(e),this.updateSearchStringFilter()};setSelectorMenuHeight(){this.changeDetectorRef.detectChanges();let e=this.selectorMenuRef?.nativeElement;if(e){if(!this.selectorExpanded()){this.selectorHeight.set("0px");return}if(this.MAX_SELECTOR_HEIGHT<e.scrollHeight){this.selectorHeight.set(this.MAX_SELECTOR_HEIGHT+"px"),this.selectorContentScrollable.set(!0);return}this.selectorContentScrollable.set(!1),this.selectorHeight.set(e.scrollHeight+"px")}}setFilterMenuHeight(){let e=this.filterMenuRef?.nativeElement;if(e){if(!this.filterExpanded()){this.filterHeight.set("0px");return}this.filterHeight.set(e.scrollHeight+"px")}}updateSearchStringFilter(){this.searchStringFilter.set(this.searchString())}resetSearch(){this.searchString.set(""),this.updateSearchStringFilter()}expandSelector(){this.filterExpanded.set(!1),this.selectorExpanded.set(!0)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-asset-filter"]],viewQuery:function(i,r){if(i&1&&(Bi(cte,5),Bi(ute,5)),i&2){let s;jn(s=Wn())&&(r.selectorMenuRef=s.first),jn(s=Wn())&&(r.filterMenuRef=s.first)}},inputs:{availableAssetNames:[1,"availableAssetNames"]},outputs:{filter:"filter"},decls:45,vars:21,consts:[["filterMenu",""],["selectorMenu",""],["id","asset-search-bar",1,"w-full"],[1,"flex"],[1,"relative","w-fit"],["id","dropdown-button","type","button",1,"shrink-0","z-10","inline-flex","items-center","py-2.5","ps-4","pe-2","text-sm","font-medium","text-center","text-light","bg-secondary","rounded-s-lg","hover:bg-gray-500","transition-all","cursor-pointer","focus:outline-none","gap-1",3,"click"],[3,"text"],["size","small",1,"transition-all","duration-300"],[1,"absolute","top-full","w-full","bg-red","overflow-y-clip","overflow-x-visible","transition-all","duration-300"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 16.45 7.27","width","16.45","height","10","fill","currentColor",1,"mx-auto","text-light","block","pointer-events-none"],["fill-rule","evenodd","d","M1.1 6.55c-.94 1.14-.1 2.72 1.27 2.72h11.7c1.37 0 2.21-1.58 1.27-2.72L9.46.62a1.6 1.6 0 0 0-2.47 0L1.1 6.55Z","clip-rule","evenodd"],[1,"z-10","bg-white","rounded-lg","shadow-sm","w-44"],["id","filter-menu",1,"p-4","rounded-xl","shadow","bg-white","overflow-clip"],[1,"text-sm","font-medium","text-gray-900","mb-2"],[1,"flex","items-center","gap-4","w-full","flex-wrap"],[1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","name","healthyFilter","value","","checked","",1,"sr-only","peer",3,"ngModelChange","ngModel"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","rounded-full","peer","after:absolute","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-primary"],[1,"ms-3","text-sm","font-light","text-dark","text-nowrap"],["type","checkbox","name","warningFilter","value","","checked","",1,"sr-only","peer",3,"ngModelChange","ngModel"],["type","checkbox","name","criticalFilter","value","","checked","",1,"sr-only","peer",3,"ngModelChange","ngModel"],[1,"relative","w-full"],[1,"flex","items-center"],["type","text","id","filter-input","name","filter-input","autocomplete","off","placeholder","Search an Asset","required","",1,"inline-block","p-2.5","w-full","z-20","text-sm","text-gray-900","bg-white","rounded-e-none","rounded-s-gray-100","rounded-s-2","border-0","focus:outline-none","focus:ring-0",3,"ngModelChange","keydown.enter","focusin","focusout","ngModel"],[1,"absolute","h-full","top-0","end-0","z-20","flex","items-center","p-2","text-dark"],[1,"absolute","w-full","overflow-hidden","top-full","left-0","bg-white","z-40","divide-y","divide-gray-100","rounded-b-lg","shadow-sm","w-44"],["aria-labelledby","dropdown-button",1,"text-sm","text-gray-700","border-t","shadow-none","border-gray-300","transition-all","duration-300"],["tabindex","0","role","listitem",1,"cursor-pointer","hover:bg-elevated-background"],[1,"cursor-pointer"],["type","button",1,"p-2.5","text-sm","font-medium","text-white","bg-primary","rounded-e-lg","hover:bg-gray-900","focus:outline-none","cursor-pointer","transition-all",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["color","gray-500","size","small",1,"relative","rounded-full","hover:bg-gray-300","p-1","cursor-pointer",3,"click"],["tabindex","0","role","listitem",1,"cursor-pointer","hover:bg-elevated-background",3,"click","keydown.enter"],[1,"block","px-4","py-2","pointer-events-none"],[1,"block","px-4","py-2","cursor-pointer"]],template:function(i,r){if(i&1){let s=An();ge(0,"form",2)(1,"div",3)(2,"div",4)(3,"button",5),yt("click",function(){return mt(s),gt(r.filterExpanded.set(!r.filterExpanded()))}),ge(4,"span"),ot(5,"Filter"),ye(),It(6,dte,1,1,"lib-indicator",6),it(7,"lib-angle-down-icon",7),ye(),ge(8,"div",8,0),So(),ge(10,"svg",9),it(11,"path",10),ye(),gu(),ge(12,"div",11)(13,"div",12)(14,"h3",13),ot(15,"Severity"),ye(),ge(16,"div",14)(17,"label",15)(18,"input",16),yt("ngModelChange",function(a){return mt(s),gt(r.healthyFilter.set(a))}),ye(),it(19,"div",17),ge(20,"span",18),ot(21,"Healthy"),ye()(),ge(22,"label",15)(23,"input",19),yt("ngModelChange",function(a){return mt(s),gt(r.warningFilter.set(a))}),ye(),it(24,"div",17),ge(25,"span",18),ot(26,"Warning"),ye()(),ge(27,"label",15)(28,"input",20),yt("ngModelChange",function(a){return mt(s),gt(r.criticalFilter.set(a))}),ye(),it(29,"div",17),ge(30,"span",18),ot(31,"Critical"),ye()()()()()()(),ge(32,"div",21)(33,"div",22)(34,"input",23),yt("ngModelChange",function(a){return mt(s),gt(r.searchString.set(a))})("keydown.enter",function(){return mt(s),gt(r.updateSearchStringFilter())})("focusin",function(){return mt(s),gt(r.expandSelector())})("focusout",function(){return mt(s),gt(r.selectorExpanded.set(!1))}),ye(),It(35,hte,2,0,"div",24),ye(),ge(36,"div",25)(37,"ul",26,1),ws(39,fte,3,1,"li",27,Cv,!1,pte,3,0,"li",28),ye()()(),ge(42,"button",29),yt("click",function(){return mt(s),gt(r.updateSearchStringFilter())}),So(),ge(43,"svg",30),it(44,"path",31),ye()()()()}i&2&&(xe(6),Kt(r.numberOfActiveFilters()>0?6:-1),xe(),Mi("rotated",r.filterExpanded()),xe(),kr("max-height",r.filterHeight()),Mi("border-transparent",!r.filterExpanded()),xe(10),Le("ngModel",r.healthyFilter()),xe(5),Le("ngModel",r.warningFilter()),xe(5),Le("ngModel",r.criticalFilter()),xe(6),Le("ngModel",r.searchString()),xe(),Kt(r.searchString()?35:-1),xe(2),kr("max-height",r.selectorHeight()),Mi("border-transparent",!r.selectorExpanded())("overflow-hidden",!r.selectorExpanded()||!r.selectorContentScrollable())("overflow-auto",r.selectorExpanded()&&r.selectorContentScrollable()),xe(2),Cs(r.filteredAssets()))},dependencies:[Nt,Mu,pS,Bh,VP,Qg,uS,jP,Sp,p_,bS,Jg,pH],styles:["#asset-search-bar[_ngcontent-%COMP%]{height:2.5rem}.rotated[_ngcontent-%COMP%]{transform:rotate(-180deg)}#filter-menu[_ngcontent-%COMP%]{max-width:min(100vw - 1rem,24rem);width:100vw}"],changeDetection:0})}return n})();var QP=["*"],mte=()=>[];function gte(n,t){if(n&1&&it(0,"div",5),n&2){let e=Ae().$implicit;kr("width",(e==null?null:e.width)+"px")}}function yte(n,t){}function vte(n,t){if(n&1&&It(0,yte,0,0,"ng-template",4),n&2){let e=Ae().$implicit;Le("ngTemplateOutlet",e.ghostCellTemplate)}}function _te(n,t){if(n&1&&It(0,gte,1,2,"div",3)(1,vte,1,1,null,4),n&2){let e=t.$implicit;Kt(e.ghostCellTemplate?1:0)}}function bte(n,t){if(n&1&&(ge(0,"div",2),ws(1,_te,2,1,null,null,Cv),ye()),n&2){let e=Ae();kr("height",e.rowHeight+"px"),xe(),Cs(e.columns)}}var xte=["cellTemplate"],wte=["ghostLoaderTemplate"],Cte=n=>({cellContext:n}),Ste=n=>[n];function Mte(n,t){if(n&1){let e=An();ge(0,"label",3)(1,"input",5),Il(2,"async"),yt("click",function(r){mt(e);let s=Ae(2);return gt(s.onCheckboxChange(r))}),ye()()}if(n&2){let e=Ae(2);xe(),Le("disabled",Tv(2,2,e.disable$))("checked",e.isSelected)}}function Ete(n,t){n&1&&it(0,"i",8)}function Tte(n,t){n&1&&it(0,"i",9)}function Ate(n,t){n&1&&it(0,"i",10)}function Dte(n,t){if(n&1){let e=An();ge(0,"button",7),yt("click",function(){mt(e);let r=Ae(3);return gt(r.onTreeAction())}),ge(1,"span"),It(2,Ete,1,0,"i",8)(3,Tte,1,0,"i",9)(4,Ate,1,0,"i",10),ye()()}if(n&2){let e=Ae(3);Le("disabled",e.treeStatus==="disabled"),Zo("aria-label",e.treeStatus),xe(2),Kt(e.treeStatus==="loading"?2:-1),xe(),Kt(e.treeStatus==="collapsed"?3:-1),xe(),Kt(e.treeStatus==="expanded"||e.treeStatus==="disabled"?4:-1)}}function Ite(n,t){}function Pte(n,t){if(n&1&&It(0,Ite,0,0,"ng-template",4),n&2){let e=Ae(3);Le("ngTemplateOutlet",e.column.treeToggleTemplate)("ngTemplateOutletContext",oC(2,Cte,e.cellContext))}}function Rte(n,t){if(n&1&&It(0,Dte,5,5,"button",6)(1,Pte,1,4,null,4),n&2){let e=Ae(2);Kt(e.column.treeToggleTemplate?1:0)}}function kte(n,t){if(n&1&&it(0,"span",11),n&2){let e=Ae(3);Le("title",e.sanitizedValue)("innerHTML",e.value,dI)}}function Lte(n,t){if(n&1&&(ge(0,"span",12),ot(1),ye()),n&2){let e=Ae(3);Le("title",e.sanitizedValue),xe(),Kr(e.value)}}function Nte(n,t){if(n&1&&It(0,kte,1,2,"span",11)(1,Lte,2,2,"span",12),n&2){let e=Ae(2);Kt(e.column.bindAsUnsafeHtml?0:1)}}function Ote(n,t){}function Fte(n,t){if(n&1&&It(0,Ote,0,0,"ng-template",4,0,FI),n&2){let e=Ae(2);Le("ngTemplateOutlet",e.column.cellTemplate)("ngTemplateOutletContext",e.cellContext)}}function Bte(n,t){if(n&1&&(ge(0,"div",2),It(1,Mte,3,4,"label",3)(2,Rte,2,1)(3,Nte,2,1)(4,Fte,2,2,null,4),ye()),n&2){let e=Ae();kr("margin-left",e.calcLeftMargin(e.column,e.row),"px"),xe(),Kt(e.column.checkboxable&&(!e.displayCheck||e.displayCheck(e.row,e.column,e.value))?1:-1),xe(),Kt(e.column.isTreeColumn?2:-1),xe(),Kt(e.column.cellTemplate?4:3)}}function Vte(n,t){if(n&1&&it(0,"ghost-loader",13),n&2){let e=Ae(2);Le("columns",oC(2,Ste,e.column))("pageSize",1)}}function Ute(n,t){if(n&1&&It(0,Vte,1,4,"ghost-loader",13),n&2){let e=Ae();Kt(e.ghostLoadingIndicator?0:-1)}}var bH=(n,t)=>t.type,xH=(n,t)=>t.$$id;function zte(n,t){if(n&1){let e=An();ge(0,"datatable-body-cell",2),yt("activate",function(r){let s=mt(e).$index,o=Ae(2);return gt(o.onActivate(r,s))})("treeAction",function(){mt(e);let r=Ae(2);return gt(r.onTreeAction())}),ye()}if(n&2){let e=t.$implicit,i=Ae(2);Le("row",i.row)("group",i.group)("expanded",i.expanded)("isSelected",i.isSelected)("rowIndex",i.rowIndex)("column",e)("rowHeight",i.rowHeight)("displayCheck",i.displayCheck)("disable$",i.disable$)("treeStatus",i.treeStatus)("ghostLoadingIndicator",i.ghostLoadingIndicator)}}function Hte(n,t){if(n&1&&(ge(0,"div"),Il(1,"async"),ws(2,zte,1,11,"datatable-body-cell",1,xH),ye()),n&2){let e=t.$implicit,i=Ae();FV("datatable-row-",e.type," datatable-row-group"),kr("width",i._columnGroupWidths[e.type],"px"),Mi("row-disabled",i.disable$?Tv(1,7,i.disable$):!1),xe(2),Cs(e.columns)}}var jte=["select"];function Wte(n,t){if(n&1){let e=An();ge(0,"div")(1,"label",6)(2,"input",7,0),yt("change",function(){mt(e);let r=zr(3),s=Ae(2);return gt(s.onCheckboxChange(r.checked))}),ye()()()}if(n&2){let e=Ae(2);xe(2),Le("checked",e.selectedGroupRows().length===e.group().value.length)}}function Gte(n,t){}function $te(n,t){if(n&1&&(ge(0,"div",3)(1,"div",4),It(2,Wte,4,1,"div")(3,Gte,0,0,"ng-template",5),ye()()),n&2){let e=Ae();kr("height",e.groupHeaderRowHeight,"px")("width",e.innerWidth,"px"),xe(2),Kt(e.groupHeader.checkboxable?2:-1),xe(),Le("ngTemplateOutlet",e.groupHeader.template)("ngTemplateOutletContext",e.groupContext)}}function qte(n,t){n&1&&Dl(0)}function Xte(n,t){}function Yte(n,t){if(n&1&&(ge(0,"div",8),It(1,Xte,0,0,"ng-template",5),ye()),n&2){let e=Ae();kr("height",e.detailRowHeight,"px"),xe(),Le("ngTemplateOutlet",e.rowDetail.template)("ngTemplateOutletContext",e.rowContext)}}function Zte(n,t){if(n&1&&it(0,"datatable-body-row",0),n&2){let e=Ae();Le("innerWidth",e.innerWidth)("offsetX",e.offsetX)("columns",e._internalColumns)("rowHeight",e.rowHeight)("row",e.summaryRow)("rowIndex",-1)}}var wH=[[["","loading-indicator",""]],[["","empty-content",""]]],CH=["[loading-indicator]","[empty-content]"],Kte=(n,t,e,i)=>({template:n,rowTemplate:t,row:e,index:i});function Qte(n,t){n&1&&(ge(0,"div",4)(1,"div",9),Dl(2),ye()())}function Jte(n,t){if(n&1&&it(0,"ghost-loader",5),n&2){let e=Ae();Le("columns",e.columns)("pageSize",e.pageSize)("rowHeight",e.rowHeight)("ghostBodyHeight",e.bodyHeight)}}function ene(n,t){if(n&1&&it(0,"datatable-summary-row",11),n&2){let e=Ae(2);Le("rowHeight",e.summaryHeight)("offsetX",e.offsetX)("innerWidth",e.innerWidth)("rows",e.rows)("columns",e.columns)}}function tne(n,t){n&1&&Jo(0)}function nne(n,t){if(n&1&&It(0,tne,1,0,"ng-container",15),n&2){let e=Ae(),i=e.$implicit,r=e.$index,s=zr(5),o=Ae(2);Le("rowDefInternal",Dh(1,Kte,o.rowDefTemplate,s,i,r))}}function ine(n,t){if(n&1){let e=An();ge(0,"datatable-body-row",17,3),yt("treeAction",function(){mt(e);let r=Ae(2).$implicit,s=Ae(2);return gt(s.onTreeAction(r))})("activate",function(r){mt(e);let s=Ae(2).$index,o=Ae(2),a=zr(3);return gt(a.onActivate(r,o.indexes().first+s))})("drop",function(r){mt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return gt(a.drop(r,o,s))})("dragover",function(r){mt(e);let s=Ae(2).$implicit,o=Ae(2);return gt(o.dragOver(r,s))})("dragenter",function(r){mt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return gt(a.dragEnter(r,o,s))})("dragleave",function(r){mt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return gt(a.dragLeave(r,o,s))})("dragstart",function(r){mt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return gt(a.drag(r,o,s))})("dragend",function(r){mt(e);let s=Ae(2).$implicit,o=Ae(2);return gt(o.dragEnd(r,s))}),ye()}if(n&2){let e=Ae(2).$implicit,i=zr(1),r=Ae(2),s=zr(3);Le("disable$",i.disable$)("isSelected",s.getRowSelected(e))("innerWidth",r.innerWidth)("offsetX",r.offsetX)("columns",r.columns)("rowHeight",r.getRowHeight(e))("row",e)("rowIndex",r.getRowIndex(e))("expanded",r.getRowExpanded(e))("rowClass",r.rowClass)("displayCheck",r.displayCheck)("treeStatus",e==null?null:e.treeStatus)("ghostLoadingIndicator",r.ghostLoadingIndicator)("draggable",r.rowDraggable)("verticalScrollVisible",r.verticalScrollVisible)}}function rne(n,t){if(n&1&&It(0,ine,2,15,"datatable-body-row",16),n&2){let e=Ae().$implicit,i=Ae(2);Kt(i.isRow(e)?0:-1)}}function sne(n,t){if(n&1){let e=An();ge(0,"datatable-body-row",17,3),yt("treeAction",function(){mt(e);let r=Ae(2).$implicit,s=Ae(2);return gt(s.onTreeAction(r))})("activate",function(r){mt(e);let s=Ae(2).$index,o=Ae(2),a=zr(3);return gt(a.onActivate(r,o.indexes().first+s))})("drop",function(r){mt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return gt(a.drop(r,o,s))})("dragover",function(r){mt(e);let s=Ae(2).$implicit,o=Ae(2);return gt(o.dragOver(r,s))})("dragenter",function(r){mt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return gt(a.dragEnter(r,o,s))})("dragleave",function(r){mt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return gt(a.dragLeave(r,o,s))})("dragstart",function(r){mt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return gt(a.drag(r,o,s))})("dragend",function(r){mt(e);let s=Ae(2).$implicit,o=Ae(2);return gt(o.dragEnd(r,s))}),ye()}if(n&2){let e=Ae(2).$implicit,i=zr(1),r=Ae(2),s=zr(3);Le("disable$",i.disable$)("isSelected",s.getRowSelected(e))("innerWidth",r.innerWidth)("offsetX",r.offsetX)("columns",r.columns)("rowHeight",r.getRowHeight(e))("row",e)("rowIndex",r.getRowIndex(e))("expanded",r.getRowExpanded(e))("rowClass",r.rowClass)("displayCheck",r.displayCheck)("treeStatus",e==null?null:e.treeStatus)("ghostLoadingIndicator",r.ghostLoadingIndicator)("draggable",r.rowDraggable)("verticalScrollVisible",r.verticalScrollVisible)}}function one(n,t){if(n&1&&It(0,sne,2,15,"datatable-body-row",16),n&2){let e=Ae().$implicit,i=Ae(2);Kt(i.isRow(e)?0:-1)}}function ane(n,t){if(n&1){let e=An();ge(0,"datatable-body-row",19,3),yt("activate",function(r){let s=mt(e).$index;Ae(4);let o=zr(3);return gt(o.onActivate(r,s))})("drop",function(r){let s=mt(e).$implicit,o=zr(1),a=Ae(4);return gt(a.drop(r,s,o))})("dragover",function(r){let s=mt(e).$implicit,o=Ae(4);return gt(o.dragOver(r,s))})("dragenter",function(r){let s=mt(e).$implicit,o=zr(1),a=Ae(4);return gt(a.dragEnter(r,s,o))})("dragleave",function(r){let s=mt(e).$implicit,o=zr(1),a=Ae(4);return gt(a.dragLeave(r,s,o))})("dragstart",function(r){let s=mt(e).$implicit,o=zr(1),a=Ae(4);return gt(a.drag(r,s,o))})("dragend",function(r){let s=mt(e).$implicit,o=Ae(4);return gt(o.dragEnd(r,s))}),ye()}if(n&2){let e=t.$implicit,i=Ae(2).$implicit,r=zr(1),s=Ae(2),o=zr(3);Le("disable$",r.disable$)("isSelected",o.getRowSelected(e))("innerWidth",s.innerWidth)("offsetX",s.offsetX)("columns",s.columns)("rowHeight",s.getRowHeight(e))("row",e)("group",i.value)("rowIndex",s.getRowIndex(e))("expanded",s.getRowExpanded(e))("rowClass",s.rowClass)("ghostLoadingIndicator",s.ghostLoadingIndicator)("draggable",s.rowDraggable)("verticalScrollVisible",s.verticalScrollVisible)}}function lne(n,t){if(n&1&&ws(0,ane,2,14,"datatable-body-row",18,NI().rowTrackingFn,!0),n&2){let e=Ae().$implicit;Cs(e.value)}}function cne(n,t){if(n&1){let e=An();ge(0,"datatable-row-wrapper",14,1),yt("rowContextmenu",function(r){mt(e);let s=Ae(2);return gt(s.rowContextmenu.emit(r))}),It(2,nne,1,6,"ng-container")(3,rne,1,1)(4,one,1,1,"ng-template",null,2,FI)(6,lne,2,0),ye()}if(n&2){let e=t.$implicit,i=t.$index,r=Ae(2);Le("groupedRows",r.groupedRows)("innerWidth",r.innerWidth)("ngStyle",r.rowsStyles()[i])("rowDetail",r.rowDetail)("groupHeader",r.groupHeader)("offsetX",r.offsetX)("detailRowHeight",r.getDetailRowHeight(e&&e[i],i))("groupHeaderRowHeight",r.getGroupHeaderRowHeight(e&&e[i],i))("row",e)("disableCheck",r.disableRowCheck)("expanded",r.getRowExpanded(e))("rowIndex",r.getRowIndex(e&&e[i]))("selected",r.selected),Zo("hidden",r.ghostLoadingIndicator&&(!r.rowCount||!r.virtualization||!r.scrollbarV)?!0:null),xe(2),Kt(r.rowDefTemplate?2:3),xe(4),Kt(r.isGroup(e)?6:-1)}}function une(n,t){if(n&1&&it(0,"datatable-summary-row",13),n&2){let e=Ae(2);Le("ngStyle",e.bottomSummaryRowsStyles())("rowHeight",e.summaryHeight)("offsetX",e.offsetX)("innerWidth",e.innerWidth)("rows",e.rows)("columns",e.columns)}}function dne(n,t){if(n&1){let e=An();ge(0,"datatable-scroller",10),yt("scroll",function(r){mt(e);let s=Ae();return gt(s.onBodyScroll(r))}),It(1,ene,1,5,"datatable-summary-row",11),ws(2,cne,7,16,"datatable-row-wrapper",12,NI().rowTrackingFn,!0),It(4,une,1,6,"datatable-summary-row",13),ye()}if(n&2){let e=Ae();Le("scrollbarV",e.scrollbarV)("scrollbarH",e.scrollbarH)("scrollHeight",e.scrollHeight())("scrollWidth",e.columnGroupWidths==null?null:e.columnGroupWidths.total),xe(),Kt(e.summaryRow&&e.summaryPosition==="top"?1:-1),xe(),Cs(e.rowsToRender()),xe(2),Kt(e.summaryRow&&e.summaryPosition==="bottom"?4:-1)}}function hne(n,t){if(n&1){let e=An();ge(0,"datatable-scroller",20),yt("scroll",function(r){mt(e);let s=Ae();return gt(s.onBodyScroll(r))}),Dl(1,1),ye()}if(n&2){let e=Ae();kr("width",e.scrollbarH?(e.columnGroupWidths==null?null:e.columnGroupWidths.total)+"px":"100%"),Le("scrollbarV",e.scrollbarV)("scrollbarH",e.scrollbarH)("scrollHeight",e.scrollHeight())}}function fne(n,t){}function pne(n,t){if(n&1&&It(0,fne,0,0,"ng-template",1),n&2){let e=Ae();Le("ngTemplateOutlet",e.targetMarkerTemplate)("ngTemplateOutletContext",e.targetMarkerContext)}}function mne(n,t){if(n&1){let e=An();ge(0,"label",2)(1,"input",5),yt("change",function(){mt(e);let r=Ae();return gt(r.select.emit())}),ye()()}if(n&2){let e=Ae();xe(),Le("checked",e.allRowsSelected)}}function gne(n,t){}function yne(n,t){if(n&1&&It(0,gne,0,0,"ng-template",1),n&2){let e=Ae();Le("ngTemplateOutlet",e.column.headerTemplate)("ngTemplateOutletContext",e.cellContext)}}function vne(n,t){if(n&1){let e=An();ge(0,"span",3)(1,"span",6),yt("click",function(){mt(e);let r=Ae();return gt(r.onSort())}),ot(2),ye()()}if(n&2){let e=Ae();xe(2),Ei(" ",e.name," ")}}function _ne(n,t){if(n&1){let e=An();ge(0,"datatable-header-cell",4),yt("resize",function(r){let s=mt(e).$implicit,o=Ae(2);return gt(o.onColumnResized(r,s))})("resizing",function(r){let s=mt(e).$implicit,o=Ae(2);return gt(o.onColumnResizing(r,s))})("longPressStart",function(r){mt(e);let s=Ae(2);return gt(s.onLongPressStart(r))})("longPressEnd",function(r){mt(e);let s=Ae(2);return gt(s.onLongPressEnd(r))})("sort",function(r){mt(e);let s=Ae(2);return gt(s.onSort(r))})("select",function(r){mt(e);let s=Ae(2);return gt(s.select.emit(r))})("columnContextmenu",function(r){mt(e);let s=Ae(2);return gt(s.columnContextmenu.emit(r))}),ye()}if(n&2){let e=t.$implicit,i=Ae(2);Le("resizeEnabled",e.resizeable)("pressModel",e)("pressEnabled",i.reorderable&&e.draggable)("dragX",i.reorderable&&e.draggable&&e.dragging)("dragY",!1)("dragModel",e)("dragEventTarget",i.dragEventTarget)("headerHeight",i.headerHeight)("isTarget",e.isTarget)("targetMarkerTemplate",i.targetMarkerTemplate)("targetMarkerContext",e.targetMarkerContext)("column",e)("sortType",i.sortType)("sorts",i.sorts)("selectionType",i.selectionType)("sortAscendingIcon",i.sortAscendingIcon)("sortDescendingIcon",i.sortDescendingIcon)("sortUnsetIcon",i.sortUnsetIcon)("allRowsSelected",i.allRowsSelected)("enableClearingSortState",i.enableClearingSortState)}}function bne(n,t){if(n&1&&(ge(0,"div",2),ws(1,_ne,1,20,"datatable-header-cell",3,xH),ye()),n&2){let e=t.$implicit,i=Ae();vu("datatable-row-"+e.type),Le("ngStyle",i._styleByGroup[e.type]),xe(),Cs(e.columns)}}var xne=(n,t)=>t.number;function wne(n,t){if(n&1){let e=An();ge(0,"li",6)(1,"a",7),yt("click",function(){let r=mt(e).$implicit,s=Ae();return gt(s.selectPage(r.number))}),ot(2),ye()()}if(n&2){let e=t.$implicit,i=Ae();Mi("active",e.number===i.page),Zo("aria-label","page "+e.number),xe(2),Ei(" ",e.text," ")}}var Cne=n=>({"selected-count":n}),Sne=(n,t,e,i,r)=>({rowCount:n,pageSize:t,selectedCount:e,curPage:i,offset:r});function Mne(n,t){}function Ene(n,t){if(n&1&&It(0,Mne,0,0,"ng-template",1),n&2){let e=Ae();Le("ngTemplateOutlet",e.footerTemplate.template)("ngTemplateOutletContext",HV(2,Sne,e.rowCount,e.pageSize,e.selectedCount,e.curPage,e.offset))}}function Tne(n,t){if(n&1&&(ge(0,"span"),ot(1),ye()),n&2){let e=Ae(2);xe(),iC(" ",e.selectedCount==null?null:e.selectedCount.toLocaleString()," ",e.selectedMessage," / ")}}function Ane(n,t){if(n&1){let e=An();ge(0,"div",2),It(1,Tne,2,2,"span"),ot(2),ye(),ge(3,"datatable-pager",3),yt("change",function(r){mt(e);let s=Ae();return gt(s.page.emit(r))}),ye()}if(n&2){let e=Ae();xe(),Kt(e.selectedMessage?1:-1),xe(),iC(" ",e.rowCount==null?null:e.rowCount.toLocaleString()," ",e.totalMessage," "),xe(),Le("pagerLeftArrowIcon",e.pagerLeftArrowIcon)("pagerRightArrowIcon",e.pagerRightArrowIcon)("pagerPreviousIcon",e.pagerPreviousIcon)("pagerNextIcon",e.pagerNextIcon)("page",e.curPage)("size",e.pageSize)("count",e.rowCount)("hidden",!e.isVisible)}}function Dne(n,t){if(n&1){let e=An();ge(0,"datatable-header",5),Il(1,"async"),yt("sort",function(r){mt(e);let s=Ae();return gt(s.onColumnSort(r))})("resize",function(r){mt(e);let s=Ae();return gt(s.onColumnResize(r))})("resizing",function(r){mt(e);let s=Ae();return gt(s.onColumnResizing(r))})("reorder",function(r){mt(e);let s=Ae();return gt(s.onColumnReorder(r))})("select",function(){mt(e);let r=Ae();return gt(r.onHeaderSelect())})("columnContextmenu",function(r){mt(e);let s=Ae();return gt(s.onColumnContextmenu(r))}),ye()}if(n&2){let e=Ae();Le("sorts",e.sorts)("sortType",e.sortType)("scrollbarH",e.scrollbarH)("innerWidth",e._innerWidth)("offsetX",Tv(1,17,e._offsetX))("dealsWithGroup",e.groupedRows!==void 0)("columns",e._internalColumns)("headerHeight",e.headerHeight)("reorderable",e.reorderable)("targetMarkerTemplate",e.targetMarkerTemplate)("sortAscendingIcon",e.cssClasses.sortAscending)("sortDescendingIcon",e.cssClasses.sortDescending)("sortUnsetIcon",e.cssClasses.sortUnset)("allRowsSelected",e.allRowsSelected)("selectionType",e.selectionType)("verticalScrollVisible",e.verticalScrollVisible)("enableClearingSortState",e.enableClearingSortState)}}function Ine(n,t){n&1&&it(0,"datatable-progress")}function Pne(n,t){if(n&1&&it(0,"div",6),n&2){let e=Ae();Le("innerHTML",e.messages.emptyMessage,dI)}}function Rne(n,t){if(n&1){let e=An();ge(0,"datatable-footer",7),yt("page",function(r){mt(e);let s=Ae();return gt(s.onFooterPage(r))}),ye()}if(n&2){let e=Ae();Le("rowCount",e.groupedRows!==void 0?e._internalRows.length:e.rowCount)("pageSize",e.pageSize)("offset",e.offset)("footerHeight",e.footerHeight)("footerTemplate",e.footer)("totalMessage",e.messages.totalMessage)("pagerLeftArrowIcon",e.cssClasses.pagerLeftArrow)("pagerRightArrowIcon",e.cssClasses.pagerRightArrow)("pagerPreviousIcon",e.cssClasses.pagerPrevious)("selectedCount",e.selected.length)("selectedMessage",!!e.selectionType&&e.messages.selectedMessage)("pagerNextIcon",e.cssClasses.pagerNext)}}var kne=(()=>{class n{static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","ngx-datatable-footer-template",""]]})}}return n})(),Lne=(()=>{class n{static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","ngx-datatable-group-header-template",""]]})}}return n})(),Nne=(()=>{class n{constructor(){this.rowHeight=0,this.checkboxable=!1,this.toggle=new en}get template(){return this._templateInput||this._templateQuery}toggleExpandGroup(e){this.toggle.emit({type:"group",value:e})}expandAllGroups(){this.toggle.emit({type:"all",value:!0})}collapseAllGroups(){this.toggle.emit({type:"all",value:!1})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["ngx-datatable-group-header"]],contentQueries:function(i,r,s){if(i&1&&ea(s,Lne,7,Us),i&2){let o;jn(o=Wn())&&(r._templateQuery=o.first)}},inputs:{rowHeight:"rowHeight",checkboxable:"checkboxable",_templateInput:[0,"template","_templateInput"]},outputs:{toggle:"toggle"}})}}return n})();function One(){return""}function JP(n){return n==null?One:typeof n=="number"?Fne:n.indexOf(".")!==-1?Vne:Bne}function Fne(n,t){if(n==null)return"";if(!n||t==null)return n;let e=n[t];return e??""}function Bne(n,t){if(n==null)return"";if(!n||!t)return n;let e=n[t];return e??""}function Vne(n,t){if(n==null)return"";if(!n||!t)return n;let e=n[t];if(e!==void 0)return e;e=n;let i=t.split(".");if(i.length){for(let r=0;r<i.length;r++)if(e=e[i[r]],e==null)return""}return e}function ey(n){return n&&(t=>JP(n)(t,n))}function GP(n,t,e){if(t&&e){let i={},r=n.length,s=null;i[0]=new TS;let o=n.reduce((u,h)=>{let p=e(h);return u.indexOf(p)===-1&&u.push(p),u},[]);for(let u=0;u<r;u++)i[e(n[u])]=new TS(n[u]);for(let u=0;u<r;u++){s=i[e(n[u])];let h=0,p=t(s.row);p&&o.indexOf(p)>-1&&(h=p),s.parent=i[h],s.row.level=s.parent.row.level+1,s.parent.children.push(s)}let a=[];return i[0].flatten(function(){a=[...a,this.row]},!0),a}else return n}var TS=class{constructor(t=null){t||(t={level:-1,treeStatus:"expanded"}),this.row=t,this.parent=null,this.children=[]}flatten(t,e){if(this.row.treeStatus==="expanded")for(let i=0,r=this.children.length;i<r;i++){let s=this.children[i];t.apply(s,Array.prototype.slice.call(arguments,2)),e&&s.flatten.apply(s,arguments)}}};function Une(n){return n=n.replace(/[^a-zA-Z0-9 ]/g," "),n=n.replace(/([a-z](?=[A-Z]))/g,"$1 "),n=n.replace(/([^a-zA-Z0-9 ])|^[0-9]+/g,"").trim().toLowerCase(),n=n.replace(/([ 0-9]+)([a-zA-Z])/g,function(t,e,i){return e.trim()+i.toUpperCase()}),n}function zne(n){return n.replace(/([A-Z])/g,t=>` ${t}`).replace(/^./,t=>t.toUpperCase())}function Hne(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}function gH(n,t=150){if(!n)return;let e=!1;for(let i of n)i.$$id||(i.$$id=Hne()),g_(i.prop)&&i.name&&(i.prop=Une(i.name)),i.$$valueGetter||(i.$$valueGetter=JP(i.prop)),!g_(i.prop)&&g_(i.name)&&(i.name=zne(String(i.prop))),g_(i.prop)&&g_(i.name)&&(i.name=""),"resizeable"in i||(i.resizeable=!0),"sortable"in i||(i.sortable=!0),"draggable"in i||(i.draggable=!0),"canAutoResize"in i||(i.canAutoResize=!0),"width"in i||(i.width=t),"isTreeColumn"in i&&i.isTreeColumn&&!e?e=!0:i.isTreeColumn=!1}function g_(n){return n==null}function jne(n){let t=[];for(let e of n){let i={},r=Object.getOwnPropertyNames(e);for(let s of r)i[s]=e[s];e.headerTemplate&&(i.headerTemplate=e.headerTemplate),e.cellTemplate&&(i.cellTemplate=e.cellTemplate),e.ghostCellTemplate&&(i.ghostCellTemplate=e.ghostCellTemplate),e.summaryFunc&&(i.summaryFunc=e.summaryFunc),e.summaryTemplate&&(i.summaryTemplate=e.summaryTemplate),t.push(i)}return t}var Wne=(()=>{class n{static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","ngx-datatable-header-template",""]]})}}return n})(),eR=(()=>{class n{constructor(){this.template=Ue(Us)}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","ngx-datatable-cell-template",""]]})}}return n})(),Gne=(()=>{class n{constructor(){this.template=Ue(Us)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","ngx-datatable-tree-toggle",""]]})}}return n})(),XP=(()=>{class n{constructor(){this.columnInputChanges=new Xr}get columnInputChanges$(){return this.columnInputChanges.asObservable()}onInputChange(){this.columnInputChanges.next(void 0)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Vt({token:n,factory:n.\u0275fac})}}return n})(),$ne=(()=>{class n{static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","ngx-datatable-ghost-cell-template",""]]})}}return n})(),tR=(()=>{class n{constructor(){this.columnChangesService=Ue(XP),this.isFirstChange=!0}get cellTemplate(){return this._cellTemplateInput||this._cellTemplateQuery}get headerTemplate(){return this._headerTemplateInput||this._headerTemplateQuery}get treeToggleTemplate(){return this._treeToggleTemplateInput||this._treeToggleTemplateQuery}get ghostCellTemplate(){return this._ghostCellTemplateInput||this._ghostCellTemplateQuery}ngOnChanges(){this.isFirstChange?this.isFirstChange=!1:this.columnChangesService.onInputChange()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["ngx-datatable-column"]],contentQueries:function(i,r,s){if(i&1&&(ea(s,eR,7,Us),ea(s,Wne,7,Us),ea(s,Gne,7,Us),ea(s,$ne,7,Us)),i&2){let o;jn(o=Wn())&&(r._cellTemplateQuery=o.first),jn(o=Wn())&&(r._headerTemplateQuery=o.first),jn(o=Wn())&&(r._treeToggleTemplateQuery=o.first),jn(o=Wn())&&(r._ghostCellTemplateQuery=o.first)}},inputs:{name:"name",prop:"prop",bindAsUnsafeHtml:[2,"bindAsUnsafeHtml","bindAsUnsafeHtml",Pi],frozenLeft:[2,"frozenLeft","frozenLeft",Pi],frozenRight:[2,"frozenRight","frozenRight",Pi],flexGrow:[2,"flexGrow","flexGrow",Js],resizeable:[2,"resizeable","resizeable",Pi],comparator:"comparator",pipe:"pipe",sortable:[2,"sortable","sortable",Pi],draggable:[2,"draggable","draggable",Pi],canAutoResize:[2,"canAutoResize","canAutoResize",Pi],minWidth:[2,"minWidth","minWidth",Js],width:[2,"width","width",Js],maxWidth:[2,"maxWidth","maxWidth",Js],checkboxable:[2,"checkboxable","checkboxable",Pi],headerCheckboxable:[2,"headerCheckboxable","headerCheckboxable",Pi],headerClass:"headerClass",cellClass:"cellClass",isTreeColumn:[2,"isTreeColumn","isTreeColumn",Pi],treeLevelIndent:"treeLevelIndent",summaryFunc:"summaryFunc",summaryTemplate:"summaryTemplate",_cellTemplateInput:[0,"cellTemplate","_cellTemplateInput"],_headerTemplateInput:[0,"headerTemplate","_headerTemplateInput"],_treeToggleTemplateInput:[0,"treeToggleTemplate","_treeToggleTemplateInput"],_ghostCellTemplateInput:[0,"ghostCellTemplate","_ghostCellTemplateInput"]},features:[zs]})}}return n})(),qne=(()=>{class n{static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","ngx-datatable-row-detail-template",""]]})}}return n})(),Xne=(()=>{class n{constructor(){this.rowHeight=0,this.toggle=new en}get template(){return this._templateInput||this._templateQuery}toggleExpandRow(e){this.toggle.emit({type:"row",value:e})}expandAllRows(){this.toggle.emit({type:"all",value:!0})}collapseAllRows(){this.toggle.emit({type:"all",value:!1})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["ngx-datatable-row-detail"]],contentQueries:function(i,r,s){if(i&1&&ea(s,qne,7,Us),i&2){let o;jn(o=Wn())&&(r._templateQuery=o.first)}},inputs:{rowHeight:"rowHeight",_templateInput:[0,"template","_templateInput"]},outputs:{toggle:"toggle"}})}}return n})(),Yne=(()=>{class n{get template(){return this._templateInput||this._templateQuery}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["ngx-datatable-footer"]],contentQueries:function(i,r,s){if(i&1&&ea(s,kne,5,Us),i&2){let o;jn(o=Wn())&&(r._templateQuery=o.first)}},inputs:{footerHeight:[2,"footerHeight","footerHeight",Js],totalMessage:"totalMessage",selectedMessage:"selectedMessage",pagerLeftArrowIcon:"pagerLeftArrowIcon",pagerRightArrowIcon:"pagerRightArrowIcon",pagerPreviousIcon:"pagerPreviousIcon",pagerNextIcon:"pagerNextIcon",_templateInput:[0,"template","_templateInput"]}})}}return n})(),yH=(()=>{class n{constructor(){this.renderer=Ue(Ca),this.scrollbarV=!1,this.scrollbarH=!1,this.scroll=new en,this.scrollYPos=0,this.scrollXPos=0,this.prevScrollYPos=0,this.prevScrollXPos=0,this.element=Ue(Ar).nativeElement,this._scrollEventListener=null}ngOnInit(){if(this.scrollbarV||this.scrollbarH){let e=this.renderer;this.parentElement=e.parentNode(e.parentNode(this.element)),this._scrollEventListener=this.onScrolled.bind(this),this.parentElement.addEventListener("scroll",this._scrollEventListener)}}ngOnDestroy(){this._scrollEventListener&&(this.parentElement.removeEventListener("scroll",this._scrollEventListener),this._scrollEventListener=null)}setOffset(e){this.parentElement&&(this.parentElement.scrollTop=e)}onScrolled(e){let i=e.currentTarget;requestAnimationFrame(()=>{this.scrollYPos=i.scrollTop,this.scrollXPos=i.scrollLeft,this.updateOffset()})}updateOffset(){let e;this.scrollYPos<this.prevScrollYPos?e="down":this.scrollYPos>this.prevScrollYPos&&(e="up"),this.scroll.emit({direction:e,scrollYPos:this.scrollYPos,scrollXPos:this.scrollXPos}),this.prevScrollYPos=this.scrollYPos,this.prevScrollXPos=this.scrollXPos}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["datatable-scroller"]],hostAttrs:[1,"datatable-scroll"],hostVars:4,hostBindings:function(i,r){i&2&&kr("height",r.scrollHeight,"px")("width",r.scrollWidth,"px")},inputs:{scrollbarV:"scrollbarV",scrollbarH:"scrollbarH",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth"},outputs:{scroll:"scroll"},ngContentSelectors:QP,decls:1,vars:0,template:function(i,r){i&1&&(_u(),Dl(0))},encapsulation:2,changeDetection:0})}}return n})();function Ep(n){let t={left:[],center:[],right:[]};if(n)for(let e of n)e.frozenLeft?t.left.push(e):e.frozenRight?t.right.push(e):t.center.push(e);return t}function y_(n,t){return{left:MS(n.left),center:MS(n.center),right:MS(n.right),total:Math.floor(MS(t))}}function MS(n,t){let e=0;if(n)for(let i of n){let s=t&&i[t]?i[t]:i.width;e=e+parseFloat(s)}return e}function Zne(n,t){let e=0;for(let i of n){let r=t&&i[t];e=e+(r?i[t]:i.width)}return e}function SH(n){let t=Ep(n);return[{type:"left",columns:t.left},{type:"center",columns:t.center},{type:"right",columns:t.right}]}var YP=class{constructor(){this.treeArray=[]}clearCache(){this.treeArray=[]}initCache(t){let{rows:e,rowHeight:i,detailRowHeight:r,externalVirtual:s,rowCount:o,rowIndexes:a,rowExpansions:u}=t,h=typeof i=="function",p=typeof r=="function";if(!h&&isNaN(i))throw new Error(`Row Height cache initialization failed. Please ensure that 'rowHeight' is a
        valid number or function value: (${i}) when 'scrollbarV' is enabled.`);if(!p&&isNaN(r))throw new Error(`Row Height cache initialization failed. Please ensure that 'detailRowHeight' is a
        valid number or function value: (${r}) when 'scrollbarV' is enabled.`);let v=s?o:e.length;this.treeArray=new Array(v);for(let x=0;x<v;++x)this.treeArray[x]=0;for(let x=0;x<v;++x){let S=e[x],D=i;h&&(D=i(S));let O=u.has(S);if(S&&O)if(p){let N=a.get(S);D+=r(S,N)}else D+=r;this.update(x,D)}}getRowIndex(t){return t===0?0:this.calcRowIndex(t)}update(t,e){if(!this.treeArray.length)throw new Error(`Update at index ${t} with value ${e} failed:
        Row Height cache not initialized.`);let i=this.treeArray.length;for(t|=0;t<i;)this.treeArray[t]+=e,t|=t+1}query(t){if(!this.treeArray.length)throw new Error(`query at index ${t} failed: Fenwick tree array not initialized.`);let e=0;for(t|=0;t>=0;)e+=this.treeArray[t],t=(t&t+1)-1;return e}queryBetween(t,e){return this.query(e)-this.query(t-1)}calcRowIndex(t){if(!this.treeArray.length)return 0;let e=-1,i=this.treeArray.length,r=Math.pow(2,i.toString(2).length-1);for(let s=r;s!==0;s>>=1){let o=e+s;o<i&&t>=this.treeArray[o]&&(t-=this.treeArray[o],e=o)}return e+1}},ns=function(n){return n.up="ArrowUp",n.down="ArrowDown",n.return="Enter",n.escape="Escape",n.left="ArrowLeft",n.right="ArrowRight",n}(ns||{}),il=function(n){return n.asc="asc",n.desc="desc",n}(il||{}),AS=function(n){return n.single="single",n.multi="multi",n}(AS||{}),ES=function(n){return n.standard="standard",n.flex="flex",n.force="force",n}(ES||{}),ZP=function(n){return n.header="header",n.body="body",n}(ZP||{}),Sc=function(n){return n.single="single",n.multi="multi",n.multiClick="multiClick",n.cell="cell",n.checkbox="checkbox",n}(Sc||{}),MH=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["ghost-loader"]],inputs:{columns:"columns",pageSize:[2,"pageSize","pageSize",Js],rowHeight:"rowHeight",ghostBodyHeight:[2,"ghostBodyHeight","ghostBodyHeight",Js]},decls:3,vars:3,consts:[[1,"ghost-loader","ghost-cell-container"],[1,"ghost-element",3,"height"],[1,"ghost-element"],[1,"line","ghost-cell-strip",3,"width"],[3,"ngTemplateOutlet"],[1,"line","ghost-cell-strip"]],template:function(i,r){i&1&&(ge(0,"div",0),ws(1,bte,3,2,"div",1,Cv),ye()),i&2&&(kr("height",r.ghostBodyHeight+"px"),xe(),Cs(sC(2,mte).constructor(r.pageSize)))},dependencies:[mp],styles:["@keyframes _ngcontent-%COMP%_ghost{0%{background-position:0vw 0}to{background-position:100vw 0}}.ghost-loader[_ngcontent-%COMP%]{overflow:hidden}.ghost-loader[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{width:100%;height:12px;animation-name:_ngcontent-%COMP%_ghost;animation-iteration-count:infinite;animation-timing-function:linear}.ghost-loader[_ngcontent-%COMP%]   .ghost-element[_ngcontent-%COMP%]{display:flex}.ghost-overlay[_nghost-%COMP%]{position:sticky;top:20px}.ghost-overlay[_nghost-%COMP%]   .ghost-loader[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{margin:.9rem 1.2rem}"],changeDetection:0})}}return n})(),Kne=(()=>{class n{set disable$(e){this._disable$=e,this.cellContext.disable$=e}get disable$(){return this._disable$}set group(e){this._group=e,this.cellContext.group=e,this.checkValueUpdates(),this.cd.markForCheck()}get group(){return this._group}set rowHeight(e){this._rowHeight=e,this.cellContext.rowHeight=e,this.checkValueUpdates(),this.cd.markForCheck()}get rowHeight(){return this._rowHeight}set isSelected(e){this._isSelected=e,this.cellContext.isSelected=e,this.cd.markForCheck()}get isSelected(){return this._isSelected}set expanded(e){this._expanded=e,this.cellContext.expanded=e,this.cd.markForCheck()}get expanded(){return this._expanded}set rowIndex(e){this._rowIndex=e,this.cellContext.rowIndex=e,this.checkValueUpdates(),this.cd.markForCheck()}get rowIndex(){return this._rowIndex}set column(e){this._column=e,this.cellContext.column=e,this.checkValueUpdates(),this.cd.markForCheck()}get column(){return this._column}set row(e){this._row=e,this.cellContext.row=e,this.checkValueUpdates(),this.cd.markForCheck()}get row(){return this._row}set sorts(e){this._sorts=e,this.sortDir=this.calcSortDir(e)}get sorts(){return this._sorts}set treeStatus(e){e!=="collapsed"&&e!=="expanded"&&e!=="loading"&&e!=="disabled"?this._treeStatus="collapsed":this._treeStatus=e,this.cellContext.treeStatus=this._treeStatus,this.checkValueUpdates(),this.cd.markForCheck()}get treeStatus(){return this._treeStatus}get columnCssClasses(){let e="datatable-body-cell";if(this.column.cellClass){if(typeof this.column.cellClass=="string")e+=" "+this.column.cellClass;else if(typeof this.column.cellClass=="function"){let i=this.column.cellClass({row:this.row,group:this.group,column:this.column,value:this.value,rowHeight:this.rowHeight});if(typeof i=="string")e+=" "+i;else if(typeof i=="object"){let r=Object.keys(i);for(let s of r)i[s]===!0&&(e+=` ${s}`)}}}return this.sortDir||(e+=" sort-active"),this.isFocused&&!this.disable$?.value&&(e+=" active"),this.sortDir===il.asc&&(e+=" sort-asc"),this.sortDir===il.desc&&(e+=" sort-desc"),this.disable$?.value&&(e+=" row-disabled"),e}get width(){return this.column.width}get minWidth(){return this.column.minWidth}get maxWidth(){return this.column.maxWidth}get height(){let e=this.rowHeight;return isNaN(e)?e:e+"px"}constructor(){this.cd=Ue(Ss),this.ghostLoadingIndicator=!1,this.activate=new en,this.treeAction=new en,this.isFocused=!1,this._element=Ue(Ar).nativeElement,this.cellContext={onCheckboxChangeFn:e=>this.onCheckboxChange(e),activateFn:e=>this.activate.emit(e),row:this.row,group:this.group,value:this.value,column:this.column,rowHeight:this.rowHeight,isSelected:this.isSelected,rowIndex:this.rowIndex,treeStatus:this.treeStatus,disable$:this.disable$,onTreeAction:()=>this.onTreeAction()}}ngDoCheck(){this.checkValueUpdates()}ngOnDestroy(){this.cellTemplate&&this.cellTemplate.clear(),this.ghostLoaderTemplate&&this.ghostLoaderTemplate.clear()}checkValueUpdates(){let e="";if(!this.row||!this.column)e="";else{let i=this.column.$$valueGetter(this.row,this.column.prop),r=this.column.pipe;r?e=r.transform(i):e!==void 0&&(e=i)}this.value!==e&&(this.value=e,this.cellContext.value=e,this.cellContext.disable$=this.disable$,this.sanitizedValue=e!=null?this.stripHtml(e):e,this.cd.markForCheck())}onFocus(){this.isFocused=!0}onBlur(){this.isFocused=!1}onClick(e){this.activate.emit({type:"click",event:e,row:this.row,group:this.group,rowHeight:this.rowHeight,column:this.column,value:this.value,cellElement:this._element})}onDblClick(e){this.activate.emit({type:"dblclick",event:e,row:this.row,group:this.group,rowHeight:this.rowHeight,column:this.column,value:this.value,cellElement:this._element})}onKeyDown(e){let i=e.key,r=e.target===this._element;(i===ns.return||i===ns.down||i===ns.up||i===ns.left||i===ns.right)&&r&&(e.preventDefault(),e.stopPropagation(),this.activate.emit({type:"keydown",event:e,row:this.row,group:this.group,rowHeight:this.rowHeight,column:this.column,value:this.value,cellElement:this._element}))}onCheckboxChange(e){this.activate.emit({type:"checkbox",event:e,row:this.row,group:this.group,rowHeight:this.rowHeight,column:this.column,value:this.value,cellElement:this._element,treeStatus:"collapsed"})}calcSortDir(e){if(!e)return;let i=e.find(r=>r.prop===this.column.prop);if(i)return i.dir}stripHtml(e){return e.replace?e.replace(/<\/?[^>]+(>|$)/g,""):e}onTreeAction(){this.treeAction.emit(this.row)}calcLeftMargin(e,i){let r=e.treeLevelIndent!=null?e.treeLevelIndent:50;return e.isTreeColumn?i.level*r:0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["datatable-body-cell"]],viewQuery:function(i,r){if(i&1&&(Bi(xte,7,Cr),Bi(wte,7,Cr)),i&2){let s;jn(s=Wn())&&(r.cellTemplate=s.first),jn(s=Wn())&&(r.ghostLoaderTemplate=s.first)}},hostVars:10,hostBindings:function(i,r){i&1&&yt("focus",function(){return r.onFocus()})("blur",function(){return r.onBlur()})("click",function(o){return r.onClick(o)})("dblclick",function(o){return r.onDblClick(o)})("keydown",function(o){return r.onKeyDown(o)}),i&2&&(vu(r.columnCssClasses),kr("width",r.width,"px")("min-width",r.minWidth,"px")("max-width",r.maxWidth,"px")("height",r.height))},inputs:{displayCheck:"displayCheck",disable$:"disable$",group:"group",rowHeight:"rowHeight",isSelected:"isSelected",expanded:"expanded",rowIndex:"rowIndex",column:"column",row:"row",sorts:"sorts",treeStatus:"treeStatus",ghostLoadingIndicator:"ghostLoadingIndicator"},outputs:{activate:"activate",treeAction:"treeAction"},decls:2,vars:1,consts:[["cellTemplate",""],[1,"datatable-body-cell-label",3,"margin-left"],[1,"datatable-body-cell-label"],[1,"datatable-checkbox"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["type","checkbox",3,"click","disabled","checked"],[1,"datatable-tree-button",3,"disabled"],[1,"datatable-tree-button",3,"click","disabled"],[1,"icon","datatable-icon-collapse"],[1,"icon","datatable-icon-up"],[1,"icon","datatable-icon-down"],[3,"title","innerHTML"],[3,"title"],[3,"columns","pageSize"]],template:function(i,r){i&1&&It(0,Bte,5,5,"div",1)(1,Ute,1,1),i&2&&Kt(r.row?0:1)},dependencies:[mp,MH,Nv],encapsulation:2,changeDetection:0})}}return n})(),EH=(()=>{class n{constructor(){this.cd=Ue(Ss),this.treeStatus="collapsed",this.ghostLoadingIndicator=!1,this.verticalScrollVisible=!1,this.activate=new en,this.treeAction=new en,this._element=Ue(Ar).nativeElement,this._rowDiffer=Ue(Ih).find({}).create()}set columns(e){this._columns=e,this.recalculateColumns(e)}get columns(){return this._columns}set innerWidth(e){if(this._columns){let i=Ep(this._columns);this._columnGroupWidths=y_(i,this._columns)}this._innerWidth=e,this.recalculateColumns()}get innerWidth(){return this._innerWidth}set offsetX(e){this._offsetX=e}get offsetX(){return this._offsetX}get cssClass(){let e="datatable-body-row";if(this.isSelected&&(e+=" active"),this.rowIndex%2!==0&&(e+=" datatable-row-odd"),this.rowIndex%2===0&&(e+=" datatable-row-even"),this.disable$&&this.disable$.value&&(e+=" row-disabled"),this.rowClass){let i=this.rowClass(this.row);if(typeof i=="string")e+=` ${i}`;else if(typeof i=="object"){let r=Object.keys(i);for(let s of r)i[s]===!0&&(e+=` ${s}`)}}return e}get columnsTotalWidths(){return this._columnGroupWidths.total}ngOnChanges(e){e.verticalScrollVisible&&this.recalculateColumns()}ngDoCheck(){this._rowDiffer.diff(this.row)&&this.cd.markForCheck()}onActivate(e,i){e.cellIndex=i,e.rowElement=this._element,this.activate.emit(e)}onKeyDown(e){let i=e.key,r=e.target===this._element,s=i===ns.return||i===ns.down||i===ns.up||i===ns.left||i===ns.right,o=e.key==="a"&&(e.ctrlKey||e.metaKey);(s&&r||o)&&(e.preventDefault(),e.stopPropagation(),this.activate.emit({type:"keydown",event:e,row:this.row,rowElement:this._element}))}onMouseenter(e){this.activate.emit({type:"mouseenter",event:e,row:this.row,rowElement:this._element})}recalculateColumns(e=this.columns){this._columns=e;let i=Ep(this._columns);this._columnsByPin=SH(this._columns),this._columnGroupWidths=y_(i,this._columns)}onTreeAction(){this.treeAction.emit()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["datatable-body-row"]],hostVars:6,hostBindings:function(i,r){i&1&&yt("keydown",function(o){return r.onKeyDown(o)})("mouseenter",function(o){return r.onMouseenter(o)}),i&2&&(vu(r.cssClass),kr("height",r.rowHeight,"px")("width",r.columnsTotalWidths,"px"))},inputs:{columns:"columns",innerWidth:"innerWidth",expanded:"expanded",rowClass:"rowClass",row:"row",group:"group",isSelected:"isSelected",rowIndex:"rowIndex",displayCheck:"displayCheck",treeStatus:"treeStatus",ghostLoadingIndicator:"ghostLoadingIndicator",verticalScrollVisible:"verticalScrollVisible",disable$:"disable$",offsetX:"offsetX",rowHeight:"rowHeight"},outputs:{activate:"activate",treeAction:"treeAction"},features:[zs],decls:2,vars:0,consts:[[3,"class","width","row-disabled"],["role","cell","tabindex","-1",3,"row","group","expanded","isSelected","rowIndex","column","rowHeight","displayCheck","disable$","treeStatus","ghostLoadingIndicator"],["role","cell","tabindex","-1",3,"activate","treeAction","row","group","expanded","isSelected","rowIndex","column","rowHeight","displayCheck","disable$","treeStatus","ghostLoadingIndicator"]],template:function(i,r){i&1&&ws(0,Hte,4,9,"div",0,bH),i&2&&Cs(r._columnsByPin)},dependencies:[Kne,Nv],encapsulation:2,changeDetection:0})}}return n})(),nR=(()=>{class n{constructor(){this.dragX=!0,this.dragY=!0,this.dragStart=new en,this.dragging=new en,this.dragEnd=new en,this.element=Ue(Ar).nativeElement,this.isDragging=!1}ngOnChanges(e){e.dragEventTarget&&e.dragEventTarget.currentValue&&this.dragModel.dragging&&this.onMousedown(e.dragEventTarget.currentValue)}ngOnDestroy(){this._destroySubscription()}onMouseup(e){this.isDragging&&(this.isDragging=!1,this.element.classList.remove("dragging"),this.subscription&&(this._destroySubscription(),this.dragEnd.emit({event:e,element:this.element,model:this.dragModel})))}onMousedown(e){if(e.target.classList.contains("draggable")&&(this.dragX||this.dragY)){e.preventDefault(),this.isDragging=!0;let r={x:e.clientX,y:e.clientY},s=au(document,"mouseup");this.subscription=s.subscribe(a=>this.onMouseup(a));let o=au(document,"mousemove").pipe($f(s)).subscribe(a=>this.move(a,r));this.subscription.add(o),this.dragStart.emit({event:e,element:this.element,model:this.dragModel})}}move(e,i){if(!this.isDragging)return;let r=e.clientX-i.x,s=e.clientY-i.y;this.dragX&&(this.element.style.left=`${r}px`),this.dragY&&(this.element.style.top=`${s}px`),this.element.classList.add("dragging"),this.dragging.emit({event:e,element:this.element,model:this.dragModel})}_destroySubscription(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","draggable",""]],inputs:{dragEventTarget:"dragEventTarget",dragModel:"dragModel",dragX:[2,"dragX","dragX",Pi],dragY:[2,"dragY","dragY",Pi]},outputs:{dragStart:"dragStart",dragging:"dragging",dragEnd:"dragEnd"},features:[zs]})}}return n})();var Qne=(()=>{class n{static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","rowDef",""]]})}}return n})(),Jne=(()=>{class n{constructor(){this.vc=Ue(Cr)}ngOnInit(){this.vc.createEmbeddedView(this.rowDefInternal.template,Ke({},this.rowDefInternal),{injector:Vs.create({providers:[{provide:eie,useValue:this}]})})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","rowDefInternal",""]],inputs:{rowDefInternal:"rowDefInternal"}})}}return n})(),eie=new wn("RowDef"),TH=new wn("DatatableComponentToken"),tie=(()=>{class n{constructor(){this.rowContextmenu=new en(!1),this.selectedGroupRows=mn([]),this.expanded=!1,this.rowDiffer=Ue(Ih).find({}).create(),this.iterableDiffers=Ue(cC),this.tableComponent=Ue(TH),this.cd=Ue(Ss),this.group=an(()=>{if(typeof this.row=="object"&&"value"in this.row)return this.row})}ngOnInit(){if(this.disableCheck){let e=this.disableCheck(this.row);this.disable$=new bs(e),this.rowContext.disableRow$=this.disable$}this.selectedRowsDiffer=this.iterableDiffers.find(this.selected??[]).create()}ngOnChanges(e){e.row&&(this.isGroup(this.row)?this.groupContext={group:this.row,expanded:this.expanded,rowIndex:this.rowIndex}:this.rowContext={row:this.row,expanded:this.expanded,rowIndex:this.rowIndex,disableRow$:this.disable$}),e.rowIndex&&((this.rowContext??this.groupContext).rowIndex=this.rowIndex),e.expanded&&((this.groupContext??this.rowContext).expanded=this.expanded,this.rowContext&&(this.rowContext.expanded=this.expanded))}ngDoCheck(){if(this.disableCheck){let e=this.disableCheck(this.row);e!==this.disable$.value&&(this.disable$.next(e),this.cd.markForCheck())}if(this.rowDiffer.diff(this.row)&&(this.isGroup(this.row)?this.groupContext.group=this.row:this.rowContext.row=this.row,this.cd.markForCheck()),this.groupHeader?.checkboxable&&this.selectedRowsDiffer.diff(this.selected)){let e=this.selected.filter(i=>this.group()?.value.find(r=>r===i));this.checkBoxInput&&(e.length&&e.length!==this.group()?.value.length?this.checkBoxInput.nativeElement.indeterminate=!0:this.checkBoxInput.nativeElement.indeterminate=!1),this.selectedGroupRows.set(e)}}onContextmenu(e){this.rowContextmenu.emit({event:e,row:this.row})}onCheckboxChange(e){this.selected=[...this.selected.filter(i=>!this.group().value.find(r=>r===i))],e&&(this.selected=[...this.selected,...this.group().value]),this.tableComponent.selected=[...this.selected],this.tableComponent.onBodySelect({selected:this.selected})}isGroup(e){return!!this.groupHeader}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["datatable-row-wrapper"]],viewQuery:function(i,r){if(i&1&&Bi(jte,5),i&2){let s;jn(s=Wn())&&(r.checkBoxInput=s.first)}},hostAttrs:[1,"datatable-row-wrapper"],hostBindings:function(i,r){i&1&&yt("contextmenu",function(o){return r.onContextmenu(o)})},inputs:{innerWidth:"innerWidth",rowDetail:"rowDetail",groupHeader:"groupHeader",offsetX:"offsetX",detailRowHeight:"detailRowHeight",groupHeaderRowHeight:"groupHeaderRowHeight",row:"row",groupedRows:"groupedRows",disableCheck:"disableCheck",selected:"selected",rowIndex:"rowIndex",expanded:[2,"expanded","expanded",Pi]},outputs:{rowContextmenu:"rowContextmenu"},features:[zs],ngContentSelectors:QP,decls:3,vars:3,consts:[["select",""],[1,"datatable-group-header",3,"height","width"],[1,"datatable-row-detail",3,"height"],[1,"datatable-group-header"],[1,"datatable-group-cell"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"datatable-checkbox"],["type","checkbox",3,"change","checked"],[1,"datatable-row-detail"]],template:function(i,r){i&1&&(_u(),It(0,$te,4,7,"div",1)(1,qte,1,0)(2,Yte,2,4,"div",2)),i&2&&(Kt(r.groupHeader!=null&&r.groupHeader.template?0:-1),xe(),Kt(r.groupHeader!=null&&r.groupHeader.template&&r.expanded||!r.groupHeader||!r.groupHeader.template?1:-1),xe(),Kt(r.rowDetail!=null&&r.rowDetail.template&&r.expanded?2:-1))},dependencies:[mp],encapsulation:2,changeDetection:0})}}return n})();function nie(n){let t=n.filter(e=>!!e);return!t.length||t.some(e=>typeof e!="number")?null:t.reduce((e,i)=>e+i)}function iie(n){return null}var rie=(()=>{class n{constructor(){this.summaryRow={}}ngOnChanges(){!this.columns||!this.rows||(this.updateInternalColumns(),this.updateValues())}updateInternalColumns(){this._internalColumns=this.columns.map(e=>Mn(Ke({},e),{cellTemplate:e.summaryTemplate}))}updateValues(){this.summaryRow={},this.columns.filter(e=>!e.summaryTemplate).forEach(e=>{let i=this.rows.map(s=>s[e.prop]),r=this.getSummaryFunction(e);this.summaryRow[e.prop]=e.pipe?e.pipe.transform(r(i)):r(i)})}getSummaryFunction(e){return e.summaryFunc===void 0?nie:e.summaryFunc===null?iie:e.summaryFunc}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["datatable-summary-row"]],hostAttrs:[1,"datatable-summary-row"],inputs:{rows:"rows",columns:"columns",rowHeight:"rowHeight",offsetX:"offsetX",innerWidth:"innerWidth"},features:[zs],decls:1,vars:1,consts:[["tabindex","-1",3,"innerWidth","offsetX","columns","rowHeight","row","rowIndex"]],template:function(i,r){i&1&&It(0,Zte,1,6,"datatable-body-row",0),i&2&&Kt(r.summaryRow&&r._internalColumns?0:-1)},dependencies:[EH],encapsulation:2})}}return n})();function $P(n,t,e){let i=e(t,n);return i>-1?n.splice(i,1):n.push(t),n}function sie(n,t,e,i){let r=e<i;for(let s=0;s<t.length;s++){let o=t[s],a=s>=i&&s<=e,u=s<=i&&s>=e,h={start:0,end:0};r?h={start:e,end:i}:h={start:i,end:e+1},(r&&u||!r&&a)&&s>=h.start&&s<=h.end&&n.push(o)}return n}var oie=(()=>{class n{constructor(){this.activate=new en,this.select=new en}selectRow(e,i,r){if(!this.selectEnabled)return;let s=this.selectionType===Sc.checkbox,o=this.selectionType===Sc.multi,a=this.selectionType===Sc.multiClick,u=[];o||s||a?e.shiftKey?u=sie([],this.rows,i,this.prevIndex):e.key==="a"&&(e.ctrlKey||e.metaKey)?u=this.rows.filter(h=>!!h):e.ctrlKey||e.metaKey||a||s?u=$P([...this.selected],r,this.getRowSelectedIdx.bind(this)):u=$P([],r,this.getRowSelectedIdx.bind(this)):u=$P([],r,this.getRowSelectedIdx.bind(this)),typeof this.selectCheck=="function"&&(u=u.filter(this.selectCheck.bind(this))),typeof this.disableCheck=="function"&&(u=u.filter(h=>!this.disableCheck(h))),this.selected.splice(0,this.selected.length),this.selected.push(...u),this.prevIndex=i,this.select.emit({selected:u})}onActivate(e,i){let{type:r,event:s,row:o}=e,a=this.selectionType===Sc.checkbox;!a&&(r==="click"||r==="dblclick")||a&&r==="checkbox"?this.selectRow(s,i,o):r==="keydown"&&(s.key===ns.return?this.selectRow(s,i,o):s.key==="a"&&(s.ctrlKey||s.metaKey)?this.selectRow(s,0,this.rows[this.rows.length-1]):this.onKeyboardFocus(e)),this.activate.emit(e)}onKeyboardFocus(e){let{key:i}=e.event;if(i===ns.up||i===ns.down||i===ns.right||i===ns.left){let s=this.selectionType===Sc.cell;if(typeof this.disableCheck=="function"&&this.disableCheck(e.row))return;!e.cellElement||!s?this.focusRow(e.rowElement,i):s&&this.focusCell(e.cellElement,e.rowElement,i,e.cellIndex)}}focusRow(e,i){let r=this.getPrevNextRow(e,i);r&&r.focus()}getPrevNextRow(e,i){let r=e.parentElement;if(r){let s;if(i===ns.up?s=r.previousElementSibling:i===ns.down&&(s=r.nextElementSibling),s&&s.children.length)return s.children[0]}}focusCell(e,i,r,s){let o;if(r===ns.left)o=e.previousElementSibling;else if(r===ns.right)o=e.nextElementSibling;else if(r===ns.up||r===ns.down){let a=this.getPrevNextRow(i,r);if(a){let u=a.getElementsByClassName("datatable-body-cell");u.length&&(o=u[s])}}o&&"focus"in o&&typeof o.focus=="function"&&o.focus()}getRowSelected(e){return this.getRowSelectedIdx(e,this.selected)>-1}getRowSelectedIdx(e,i){if(!i||!i.length)return-1;let r=this.rowIdentity(e);return i.findIndex(s=>this.rowIdentity(s)===r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["datatable-selection"]],inputs:{rows:"rows",selected:"selected",selectEnabled:"selectEnabled",selectionType:"selectionType",rowIdentity:"rowIdentity",selectCheck:"selectCheck",disableCheck:"disableCheck"},outputs:{activate:"activate",select:"select"},ngContentSelectors:QP,decls:1,vars:0,template:function(i,r){i&1&&(_u(),Dl(0))},encapsulation:2,changeDetection:0})}}return n})(),qP=(()=>{class n{set pageSize(e){e!==this._pageSize&&(this._pageSize=e,this.recalcLayout(),this._offsetEvent=-1,this.updatePage("up"),this.updatePage("down"))}get pageSize(){return this._pageSize}set rows(e){e!==this._rows&&(this._rows=e,this.recalcLayout())}get rows(){return this._rows}set columns(e){e!==this._columns&&(this._columns=e,this.updateColumnGroupWidths())}get columns(){return this._columns}set offset(e){e!==this._offset&&(this._offset=e,(!this.scrollbarV||this.scrollbarV&&!this.virtualization)&&(!isNaN(this._offset)&&this.ghostLoadingIndicator&&(this.rows=[]),this.recalcLayout()))}get offset(){return this._offset}set rowCount(e){e!==this._rowCount&&(this._rowCount=e,this.recalcLayout())}get rowCount(){return this._rowCount}get bodyWidth(){return this.scrollbarH?this.innerWidth+"px":"100%"}set bodyHeight(e){this.scrollbarV?this._bodyHeight=e+"px":this._bodyHeight="auto",this.recalcLayout()}get bodyHeight(){return this._bodyHeight}get selectEnabled(){return!!this.selectionType}constructor(){this.cd=Ue(Ss),this.selected=[],this.verticalScrollVisible=!1,this.scroll=new en,this.page=new en,this.activate=new en,this.select=new en,this.detailToggle=new en,this.rowContextmenu=new en(!1),this.treeAction=new en,this.scrollHeight=an(()=>{if(this.rowHeightsCache()&&this.scrollbarV&&this.virtualization&&this.rowCount)return this.rowHeightsCache().query(this.rowCount-1)}),this.rowsToRender=an(()=>this.updateRows()),this.rowHeightsCache=mn(new YP),this.offsetY=0,this.indexes=mn({first:0,last:0}),this.rowIndexes=new WeakMap,this.rowExpansions=[],this._offsetEvent=-1,this.getDetailRowHeight=(e,i)=>{if(!this.rowDetail)return 0;let r=this.rowDetail.rowHeight;return typeof r=="function"?r(e,i):r},this.getGroupHeaderRowHeight=(e,i)=>{if(!this.groupHeader)return 0;let r=this.groupHeader?.rowHeight===0?this.rowHeight:this.groupHeader?.rowHeight;return typeof r=="function"?r(e,i):r},this.rowsStyles=an(()=>{let e=[];return this.rowsToRender().forEach((i,r)=>{let s={};if(this.groupedRows&&(s.width=this.columnGroupWidths.total),this.scrollbarV&&this.virtualization){let o=0;if(Array.isArray(i)){let a=i[i.length-1];o=a?this.getRowIndex(a):0}else i?o=this.getRowIndex(i):o=this.indexes().first+r;s.transform=`translateY(${this.rowHeightsCache().query(o-1)}px)`}e.push(s)}),e}),this.bottomSummaryRowsStyles=an(()=>!this.scrollbarV||!this.rows||!this.rows.length||!this.rowsToRender()?null:{transform:`translateY(${this.rowHeightsCache().query(this.rows.length-1)}px)`,position:"absolute"}),this.rowTrackingFn=(e,i)=>this.ghostLoadingIndicator?e:this.trackByProp?i[this.trackByProp]:this.getRowIndex(i)}ngOnInit(){this.rowDetail&&(this.listener=this.rowDetail.toggle.subscribe(({type:e,value:i})=>this.toggleStateChange(e,i))),this.groupHeader&&(this.listener=this.groupHeader.toggle.subscribe(({type:e,value:i})=>{this.groupExpansionDefault=!1,this.toggleStateChange(e,i)}))}toggleStateChange(e,i){(e==="group"||e==="row")&&this.toggleRowExpansion(i),e==="all"&&this.toggleAllRows(i),this.updateIndexes(),this.cd.markForCheck()}ngOnDestroy(){(this.rowDetail||this.groupHeader)&&this.listener.unsubscribe()}updateOffsetY(e){if(this.scroller){if(this.scrollbarV&&this.virtualization&&e){let i=this.pageSize*e;e=this.rowHeightsCache().query(i-1)}else this.scrollbarV&&!this.virtualization&&(e=0);this.scroller.setOffset(e||0)}}onBodyScroll(e){let i=e.scrollYPos,r=e.scrollXPos;(this.offsetY!==i||this.offsetX!==r)&&this.scroll.emit({offsetY:i,offsetX:r}),this.offsetY=i,this.offsetX=r,this.updateIndexes(),this.updatePage(e.direction),this.cd.detectChanges()}updatePage(e){let i=this.indexes().first/this.pageSize,r=!Number.isInteger(i);e==="up"?i=Math.ceil(i):e==="down"&&(i=Math.floor(i)),e!==void 0&&!isNaN(i)&&i!==this._offsetEvent&&(this._offsetEvent=i,r&&this.scrollbarV&&this.virtualization&&this.externalPaging&&(!this.rows[this.indexes().first-1]&&e==="up"&&this.page.emit(i-1),!this.rows[this.indexes().first+this.pageSize]&&e==="down"&&this.page.emit(i+1)),this.page.emit(i))}updateRows(){let{first:e,last:i}=this.indexes(),r=e,s=0,o=[];if(this.groupedRows)for(;r<i&&r<this.groupedRows.length;){let a=this.groupedRows[r];this.rowIndexes.set(a,r),a.value&&a.value.forEach((u,h)=>{let p=`${r}-${h}`;this.rowIndexes.set(u,p)}),o[s]=a,s++,r++}else for(;r<i&&r<this.rowCount;){let a=this.rows[r];a?(this.rowIndexes.set(a,r),o[s]=a):this.ghostLoadingIndicator&&this.virtualization&&(o[s]=void 0),s++,r++}return o}getRowHeight(e){return typeof this.rowHeight=="function"?this.rowHeight(e):this.rowHeight}getGroupHeight(e){let i=0;if(e.value)for(let r=0;r<e.value.length;r++)i+=this.getRowAndDetailHeight(e.value[r]);return i}getRowAndDetailHeight(e){let i=this.getRowHeight(e);return this.getRowExpanded(e)&&(i+=this.getDetailRowHeight(e)),i}updateIndexes(){let e=0,i=0;if(this.scrollbarV)if(this.virtualization){let r=parseInt(this._bodyHeight,10);e=this.rowHeightsCache().getRowIndex(this.offsetY),i=this.rowHeightsCache().getRowIndex(r+this.offsetY)+1}else e=0,i=this.rowCount;else this.externalPaging||(e=Math.max(this.offset*this.pageSize,0)),i=Math.min(e+this.pageSize,this.rowCount);this.indexes.set({first:e,last:i})}refreshRowHeightCache(){if(!(!this.scrollbarV||this.scrollbarV&&!this.virtualization)&&(this.rowHeightsCache().clearCache(),this.rows&&this.rows.length)){let e=new Set;if(this.rowDetail)for(let i of this.rows)this.getRowExpanded(i)&&e.add(i);this.rowHeightsCache().initCache({rows:this.rows,rowHeight:this.rowHeight,detailRowHeight:this.getDetailRowHeight,externalVirtual:this.scrollbarV&&this.externalPaging,rowCount:this.rowCount,rowIndexes:this.rowIndexes,rowExpansions:e}),this.rowHeightsCache.set(Object.create(this.rowHeightsCache()))}}getAdjustedViewPortIndex(){let e=this.indexes().first;return this.scrollbarV&&this.virtualization&&this.rowHeightsCache().query(e-1)<=this.offsetY?e-1:e}toggleRowExpansion(e){let i=this.getAdjustedViewPortIndex(),r=this.getRowExpandedIdx(e,this.rowExpansions),s=r>-1;if(this.scrollbarV&&this.virtualization){let o=this.getDetailRowHeight(e)*(s?-1:1),a=this.getRowIndex(e);this.rowHeightsCache().update(a,o)}s?this.rowExpansions.splice(r,1):this.rowExpansions.push(e),this.detailToggle.emit({rows:[e],currentIndex:i})}toggleAllRows(e){this.rowExpansions=[];let i=this.getAdjustedViewPortIndex(),r=this.groupedRows??this.rows;if(e)for(let s of r)this.rowExpansions.push(s);this.scrollbarV&&this.recalcLayout(),this.detailToggle.emit({rows:r,currentIndex:i})}recalcLayout(){this.refreshRowHeightCache(),this.updateIndexes()}getRowExpanded(e){if(this.rowExpansions.length===0&&this.groupExpansionDefault)for(let i of this.groupedRows)this.rowExpansions.push(i);return this.getRowExpandedIdx(e,this.rowExpansions)>-1}getRowExpandedIdx(e,i){if(!i||!i.length)return-1;let r=this.rowIdentity(e);return i.findIndex(s=>this.rowIdentity(s)===r)}getRowIndex(e){return this.rowIndexes.get(e)||0}onTreeAction(e){this.treeAction.emit({row:e})}dragOver(e,i){e.preventDefault(),this.rowDragEvents.emit({event:e,srcElement:this._draggedRowElement,eventType:"dragover",dragRow:this._draggedRow,dropRow:i})}drag(e,i,r){this._draggedRow=i,this._draggedRowElement=r._element,this.rowDragEvents.emit({event:e,srcElement:this._draggedRowElement,eventType:"dragstart",dragRow:i})}drop(e,i,r){e.preventDefault(),this.rowDragEvents.emit({event:e,srcElement:this._draggedRowElement,targetElement:r._element,eventType:"drop",dragRow:this._draggedRow,dropRow:i})}dragEnter(e,i,r){e.preventDefault(),this.rowDragEvents.emit({event:e,srcElement:this._draggedRowElement,targetElement:r._element,eventType:"dragenter",dragRow:this._draggedRow,dropRow:i})}dragLeave(e,i,r){e.preventDefault(),this.rowDragEvents.emit({event:e,srcElement:this._draggedRowElement,targetElement:r._element,eventType:"dragleave",dragRow:this._draggedRow,dropRow:i})}dragEnd(e,i){e.preventDefault(),this.rowDragEvents.emit({event:e,srcElement:this._draggedRowElement,eventType:"dragend",dragRow:i}),this._draggedRow=void 0,this._draggedRowElement=void 0}updateColumnGroupWidths(){let e=Ep(this._columns);this.columnGroupWidths=y_(e,this._columns)}isGroup(e){return!!this.groupedRows}isRow(e){return!this.groupedRows}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["datatable-body"]],viewQuery:function(i,r){if(i&1&&Bi(yH,5),i&2){let s;jn(s=Wn())&&(r.scroller=s.first)}},hostAttrs:[1,"datatable-body"],hostVars:4,hostBindings:function(i,r){i&2&&kr("width",r.bodyWidth)("height",r.bodyHeight)},inputs:{rowDefTemplate:"rowDefTemplate",scrollbarV:"scrollbarV",scrollbarH:"scrollbarH",loadingIndicator:"loadingIndicator",ghostLoadingIndicator:"ghostLoadingIndicator",externalPaging:"externalPaging",rowHeight:"rowHeight",offsetX:"offsetX",selectionType:"selectionType",selected:"selected",rowIdentity:"rowIdentity",rowDetail:"rowDetail",groupHeader:"groupHeader",selectCheck:"selectCheck",displayCheck:"displayCheck",trackByProp:"trackByProp",rowClass:"rowClass",groupedRows:"groupedRows",groupExpansionDefault:"groupExpansionDefault",innerWidth:"innerWidth",groupRowsBy:"groupRowsBy",virtualization:"virtualization",summaryRow:"summaryRow",summaryPosition:"summaryPosition",summaryHeight:"summaryHeight",rowDraggable:"rowDraggable",rowDragEvents:"rowDragEvents",disableRowCheck:"disableRowCheck",pageSize:"pageSize",rows:"rows",columns:"columns",offset:"offset",rowCount:"rowCount",bodyHeight:"bodyHeight",verticalScrollVisible:"verticalScrollVisible"},outputs:{scroll:"scroll",page:"page",activate:"activate",select:"select",detailToggle:"detailToggle",rowContextmenu:"rowContextmenu",treeAction:"treeAction"},ngContentSelectors:CH,decls:6,vars:11,consts:[["selector",""],["rowWrapper",""],["bodyRow",""],["rowElement",""],[1,"custom-loading-indicator-wrapper"],[1,"ghost-overlay",3,"columns","pageSize","rowHeight","ghostBodyHeight"],[3,"select","activate","selected","rows","selectCheck","disableCheck","selectEnabled","selectionType","rowIdentity"],[3,"scrollbarV","scrollbarH","scrollHeight","scrollWidth"],[3,"scrollbarV","scrollbarH","scrollHeight","width"],[1,"custom-loading-content"],[3,"scroll","scrollbarV","scrollbarH","scrollHeight","scrollWidth"],[3,"rowHeight","offsetX","innerWidth","rows","columns"],[3,"groupedRows","innerWidth","ngStyle","rowDetail","groupHeader","offsetX","detailRowHeight","groupHeaderRowHeight","row","disableCheck","expanded","rowIndex","selected"],["role","row",3,"ngStyle","rowHeight","offsetX","innerWidth","rows","columns"],[3,"rowContextmenu","groupedRows","innerWidth","ngStyle","rowDetail","groupHeader","offsetX","detailRowHeight","groupHeaderRowHeight","row","disableCheck","expanded","rowIndex","selected"],[4,"rowDefInternal"],["role","row","tabindex","-1",3,"disable$","isSelected","innerWidth","offsetX","columns","rowHeight","row","rowIndex","expanded","rowClass","displayCheck","treeStatus","ghostLoadingIndicator","draggable","verticalScrollVisible"],["role","row","tabindex","-1",3,"treeAction","activate","drop","dragover","dragenter","dragleave","dragstart","dragend","disable$","isSelected","innerWidth","offsetX","columns","rowHeight","row","rowIndex","expanded","rowClass","displayCheck","treeStatus","ghostLoadingIndicator","draggable","verticalScrollVisible"],["role","row","tabindex","-1",3,"disable$","isSelected","innerWidth","offsetX","columns","rowHeight","row","group","rowIndex","expanded","rowClass","ghostLoadingIndicator","draggable","verticalScrollVisible"],["role","row","tabindex","-1",3,"activate","drop","dragover","dragenter","dragleave","dragstart","dragend","disable$","isSelected","innerWidth","offsetX","columns","rowHeight","row","group","rowIndex","expanded","rowClass","ghostLoadingIndicator","draggable","verticalScrollVisible"],[3,"scroll","scrollbarV","scrollbarH","scrollHeight"]],template:function(i,r){if(i&1){let s=An();_u(wH),It(0,Qte,3,0,"div",4)(1,Jte,1,4,"ghost-loader",5),ge(2,"datatable-selection",6,0),yt("select",function(a){return mt(s),gt(r.select.emit(a))})("activate",function(a){return mt(s),gt(r.activate.emit(a))}),It(4,dne,5,6,"datatable-scroller",7)(5,hne,2,5,"datatable-scroller",8),ye()}i&2&&(Kt(r.loadingIndicator?0:-1),xe(),Kt(r.ghostLoadingIndicator&&(!r.rowCount||!r.virtualization||!r.scrollbarV)?1:-1),xe(),Le("selected",r.selected)("rows",r.rows)("selectCheck",r.selectCheck)("disableCheck",r.disableRowCheck)("selectEnabled",r.selectEnabled)("selectionType",r.selectionType)("rowIdentity",r.rowIdentity),xe(2),Kt(r.rows!=null&&r.rows.length?4:-1),xe(),Kt(!(r.rows!=null&&r.rows.length)&&!r.loadingIndicator&&!r.ghostLoadingIndicator?5:-1))},dependencies:[MH,oie,yH,rie,tie,Ng,Jne,EH,nR],encapsulation:2,changeDetection:0})}}return n})(),AH=(()=>{class n{constructor(){this.document=Ue(Qr),this.width=this.getWidth()}getWidth(){let e=this.document.createElement("div");e.style.visibility="hidden",e.style.width="100px",this.document.body.appendChild(e);let i=e.offsetWidth;e.style.overflow="scroll";let r=this.document.createElement("div");r.style.width="100%",e.appendChild(r);let s=r.offsetWidth;return e.parentNode.removeChild(e),i-s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),aie=(()=>{class n{constructor(){this.pressEnabled=!0,this.duration=500,this.longPressStart=new en,this.longPressing=new en,this.longPressEnd=new en,this.mouseX=0,this.mouseY=0}get press(){return this.pressing}get isLongPress(){return this.isLongPressing}onMouseDown(e){if(e.which!==1||!this.pressEnabled||e.target.classList.contains("resize-handle"))return;this.mouseX=e.clientX,this.mouseY=e.clientY,this.pressing=!0,this.isLongPressing=!1;let r=au(document,"mouseup");this.subscription=r.subscribe(s=>this.onMouseup()),this.timeout=setTimeout(()=>{this.isLongPressing=!0,this.longPressStart.emit({event:e,model:this.pressModel}),this.subscription.add(au(document,"mousemove").pipe($f(r)).subscribe(s=>this.onMouseMove(s))),this.loop(e)},this.duration),this.loop(e)}onMouseMove(e){if(this.pressing&&!this.isLongPressing){let i=Math.abs(e.clientX-this.mouseX)>10,r=Math.abs(e.clientY-this.mouseY)>10;(i||r)&&this.endPress()}}loop(e){this.isLongPressing&&(this.timeout=setTimeout(()=>{this.longPressing.emit({event:e,model:this.pressModel}),this.loop(e)},50))}endPress(){clearTimeout(this.timeout),this.isLongPressing=!1,this.pressing=!1,this._destroySubscription(),this.longPressEnd.emit({model:this.pressModel})}onMouseup(){this.endPress()}ngOnDestroy(){clearTimeout(this.timeout),this._destroySubscription()}_destroySubscription(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","long-press",""]],hostVars:4,hostBindings:function(i,r){i&1&&yt("mousedown",function(o){return r.onMouseDown(o)}),i&2&&Mi("press",r.press)("longpress",r.isLongPress)},inputs:{pressEnabled:[2,"pressEnabled","pressEnabled",Pi],pressModel:"pressModel",duration:[2,"duration","duration",Js]},outputs:{longPressStart:"longPressStart",longPressing:"longPressing",longPressEnd:"longPressEnd"}})}}return n})(),lie=(()=>{class n{constructor(){this.renderer=Ue(Ca),this.resizeEnabled=!0,this.resize=new en,this.resizing=new en,this.element=Ue(Ar).nativeElement}ngAfterViewInit(){let e=this.renderer;this.resizeHandle=e.createElement("span"),this.resizeEnabled?e.addClass(this.resizeHandle,"resize-handle"):e.addClass(this.resizeHandle,"resize-handle--not-resizable"),e.appendChild(this.element,this.resizeHandle)}ngOnDestroy(){this._destroySubscription(),this.renderer.destroyNode?this.renderer.destroyNode(this.resizeHandle):this.resizeHandle&&this.renderer.removeChild(this.renderer.parentNode(this.resizeHandle),this.resizeHandle)}onMouseup(){this.subscription&&!this.subscription.closed&&(this._destroySubscription(),this.resize.emit(this.element.clientWidth))}onMousedown(e){let i=e.target.classList.contains("resize-handle"),r=this.element.clientWidth,s=e.screenX;if(i){e.stopPropagation();let o=au(document,"mouseup");this.subscription=o.subscribe(u=>this.onMouseup());let a=au(document,"mousemove").pipe($f(o)).subscribe(u=>this.move(u,r,s));this.subscription.add(a)}}move(e,i,r){let s=e.screenX-r,o=i+s;this.resizing.emit(o)}_destroySubscription(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","resizeable",""]],hostVars:2,hostBindings:function(i,r){i&1&&yt("mousedown",function(o){return r.onMousedown(o)}),i&2&&Mi("resizeable",r.resizeEnabled)},inputs:{resizeEnabled:[2,"resizeEnabled","resizeEnabled",Pi],minWidth:[2,"minWidth","minWidth",Js],maxWidth:[2,"maxWidth","maxWidth",Js]},outputs:{resize:"resize",resizing:"resizing"}})}}return n})();function cie(n,t){if(n===AS.single)return t===il.asc?il.desc:il.asc;if(t){if(t===il.asc)return il.desc;if(t===il.desc)return}else return il.asc}function uie(n,t){if((n===null||typeof n>"u")&&(n=0),(t===null||typeof t>"u")&&(t=0),n instanceof Date&&t instanceof Date){if(n<t)return-1;if(n>t)return 1}else if(isNaN(parseFloat(n))||!isFinite(n)||isNaN(parseFloat(t))||!isFinite(t)){if(n=String(n),t=String(t),n.toLowerCase()<t.toLowerCase())return-1;if(n.toLowerCase()>t.toLowerCase())return 1}else{if(parseFloat(n)<parseFloat(t))return-1;if(parseFloat(n)>parseFloat(t))return 1}return 0}function KP(n,t,e){if(!n)return[];if(!e||!e.length||!t)return[...n];let i=new Map;n.forEach((a,u)=>i.set(a,u));let r=[...n],s=t.reduce((a,u)=>(u.comparator&&typeof u.comparator=="function"&&(a[u.prop]=u.comparator),a),{}),o=e.map(a=>{let u=a.prop;return{prop:u,dir:a.dir,valueGetter:JP(u),compareFn:s[u]||uie}});return r.sort(function(a,u){for(let h of o){let{prop:p,valueGetter:v}=h,x=v(a,p),S=v(u,p),D=h.dir!==il.desc?h.compareFn(x,S,a,u,h.dir):-h.compareFn(x,S,a,u,h.dir);if(D!==0)return D}return i.has(a)&&i.has(u)?i.get(a)<i.get(u)?-1:1:0})}function die(n,t,e,i){return i&&(n=KP(n,t,[{dir:i.dir,prop:"key"}])),n.map(r=>Mn(Ke({},r),{value:KP(r.value,t,e)}))}var hie=(()=>{class n{set allRowsSelected(e){this._allRowsSelected=e,this.cellContext.allRowsSelected=e}get allRowsSelected(){return this._allRowsSelected}set column(e){this._column=e,this.cellContext.column=e,this.cd.markForCheck()}get column(){return this._column}set sorts(e){this._sorts=e,this.sortDir=this.calcSortDir(e),this.cellContext.sortDir=this.sortDir,this.sortClass=this.calcSortClass(this.sortDir),this.cd.markForCheck()}get sorts(){return this._sorts}get columnCssClasses(){let e="datatable-header-cell";if(this.column.sortable&&(e+=" sortable"),this.column.resizeable&&(e+=" resizeable"),this.column.headerClass){if(typeof this.column.headerClass=="string")e+=" "+this.column.headerClass;else if(typeof this.column.headerClass=="function"){let r=this.column.headerClass({column:this.column});if(typeof r=="string")e+=" "+r;else if(typeof r=="object"){let s=Object.keys(r);for(let o of s)r[o]===!0&&(e+=` ${o}`)}}}let i=this.sortDir;return i&&(e+=` sort-active sort-${i}`),e}get name(){return this.column.headerTemplate===void 0?this.column.name:void 0}get minWidth(){return this.column.minWidth}get maxWidth(){return this.column.maxWidth}get width(){return this.column.width}get tabindex(){return this.column.sortable?0:-1}get isCheckboxable(){return this.column.headerCheckboxable}constructor(){this.cd=Ue(Ss),this.enableClearingSortState=!1,this.sort=new en,this.select=new en,this.columnContextmenu=new en(!1),this.totalSortStatesApplied=0,this.cellContext={column:this.column,sortDir:this.sortDir,sortFn:()=>this.onSort(),allRowsSelected:this.allRowsSelected,selectFn:()=>this.select.emit()}}onContextmenu(e){this.columnContextmenu.emit({event:e,column:this.column})}enter(){this.onSort()}ngOnInit(){this.sortClass=this.calcSortClass(this.sortDir),this.sortDir&&(this.totalSortStatesApplied=1)}calcSortDir(e){if(e&&this.column){let i=e.find(r=>r.prop===this.column.prop);if(i)return i.dir}}onSort(){if(!this.column.sortable)return;this.totalSortStatesApplied++;let e=cie(this.sortType,this.sortDir);this.enableClearingSortState&&this.totalSortStatesApplied===3&&(e=void 0,this.totalSortStatesApplied=0),this.sort.emit({column:this.column,prevValue:this.sortDir,newValue:e})}calcSortClass(e){if(this.cellContext.column.sortable)return e===il.asc?`sort-btn sort-asc ${this.sortAscendingIcon}`:e===il.desc?`sort-btn sort-desc ${this.sortDescendingIcon}`:`sort-btn ${this.sortUnsetIcon}`}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["datatable-header-cell"]],hostAttrs:[1,"datatable-header-cell"],hostVars:12,hostBindings:function(i,r){i&1&&yt("contextmenu",function(o){return r.onContextmenu(o)})("keydown.enter",function(){return r.enter()}),i&2&&(OI("tabindex",r.tabindex),Zo("title",r.name),vu(r.columnCssClasses),kr("height",r.headerHeight,"px")("min-width",r.minWidth,"px")("max-width",r.maxWidth,"px")("width",r.width,"px"))},inputs:{sortType:"sortType",sortAscendingIcon:"sortAscendingIcon",sortDescendingIcon:"sortDescendingIcon",sortUnsetIcon:"sortUnsetIcon",isTarget:"isTarget",targetMarkerTemplate:"targetMarkerTemplate",targetMarkerContext:"targetMarkerContext",enableClearingSortState:"enableClearingSortState",allRowsSelected:"allRowsSelected",selectionType:"selectionType",column:"column",headerHeight:"headerHeight",sorts:"sorts"},outputs:{sort:"sort",select:"select",columnContextmenu:"columnContextmenu"},decls:6,vars:5,consts:[[1,"datatable-header-cell-template-wrap"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"datatable-checkbox"],[1,"datatable-header-cell-wrapper"],[3,"click"],["type","checkbox",3,"change","checked"],[1,"datatable-header-cell-label","draggable",3,"click"]],template:function(i,r){i&1&&(ge(0,"div",0),It(1,pne,1,2,null,1)(2,mne,2,1,"label",2)(3,yne,1,2,null,1)(4,vne,3,1,"span",3),ge(5,"span",4),yt("click",function(){return r.onSort()}),ye()()),i&2&&(xe(),Kt(r.isTarget?1:-1),xe(),Kt(r.isCheckboxable?2:-1),xe(),Kt(r.column.headerTemplate?3:4),xe(2),vu(r.sortClass))},dependencies:[mp],encapsulation:2,changeDetection:0})}}return n})(),fie=(()=>{class n{constructor(){this.document=Ue(Qr),this.reorder=new en,this.targetChanged=new en,this.differ=Ue(Ih).find({}).create()}ngAfterContentInit(){this.updateSubscriptions(),this.draggables.changes.subscribe(this.updateSubscriptions.bind(this))}ngOnDestroy(){this.draggables.forEach(e=>{e.dragStart.unsubscribe(),e.dragging.unsubscribe(),e.dragEnd.unsubscribe()})}updateSubscriptions(){let e=this.differ.diff(this.createMapDiffs());if(e){let i=s=>{r(s);let{currentValue:o}=s;o&&(o.dragStart.subscribe(this.onDragStart.bind(this)),o.dragging.subscribe(this.onDragging.bind(this)),o.dragEnd.subscribe(this.onDragEnd.bind(this)))},r=({previousValue:s})=>{s&&(s.dragStart.unsubscribe(),s.dragging.unsubscribe(),s.dragEnd.unsubscribe())};e.forEachAddedItem(i),e.forEachRemovedItem(r)}}onDragStart(){this.positions={};let e=0;for(let i of this.draggables.toArray()){let r=i.element,s=parseInt(r.offsetLeft.toString(),0);this.positions[i.dragModel.$$id]={left:s,right:s+parseInt(r.offsetWidth.toString(),0),index:e++,element:r}}}onDragging({element:e,model:i,event:r}){let s=this.positions[i.$$id],o=this.isTarget(i,r);o?this.lastDraggingIndex!==o.i&&(this.targetChanged.emit({prevIndex:this.lastDraggingIndex,newIndex:o.i,initialIndex:s.index}),this.lastDraggingIndex=o.i):this.lastDraggingIndex!==s.index&&(this.targetChanged.emit({prevIndex:this.lastDraggingIndex,initialIndex:s.index}),this.lastDraggingIndex=s.index)}onDragEnd({element:e,model:i,event:r}){let s=this.positions[i.$$id],o=this.isTarget(i,r);o&&this.reorder.emit({prevIndex:s.index,newIndex:o.i,model:i}),this.lastDraggingIndex=void 0,e.style.left="auto"}isTarget(e,i){let r=0,s=i.x||i.clientX,o=i.y||i.clientY,a=this.document.elementsFromPoint(s,o);for(let u in this.positions){let h=this.positions[u];if(e.$$id!==u&&a.find(p=>p===h.element))return{pos:h,i:r};r++}}createMapDiffs(){return this.draggables.toArray().reduce((e,i)=>(e[i.dragModel.$$id]=i,e),{})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","orderable",""]],contentQueries:function(i,r,s){if(i&1&&ea(s,nR,5),i&2){let o;jn(o=Wn())&&(r.draggables=o)}},outputs:{reorder:"reorder",targetChanged:"targetChanged"}})}}return n})(),vH=(()=>{class n{constructor(){this.cd=Ue(Ss),this.scrollbarHelper=Ue(AH),this.enableClearingSortState=!1,this.verticalScrollVisible=!1,this.sort=new en,this.reorder=new en,this.resize=new en,this.resizing=new en,this.select=new en,this.columnContextmenu=new en(!1),this._columnGroupWidths={total:100},this._styleByGroup={left:{},center:{},right:{}},this.destroyed=!1}set innerWidth(e){this._innerWidth=e,setTimeout(()=>{if(this._columns){let i=Ep(this._columns);this._columnGroupWidths=y_(i,this._columns),this.setStylesByGroup()}})}get innerWidth(){return this._innerWidth}set headerHeight(e){e!=="auto"?this._headerHeight=`${e}px`:this._headerHeight=e}get headerHeight(){return this._headerHeight}set columns(e){this._columns=e;let i=Ep(e);this._columnsByPin=SH(e),setTimeout(()=>{this._columnGroupWidths=y_(i,e),this.setStylesByGroup()})}get columns(){return this._columns}set offsetX(e){this._offsetX=e,this.setStylesByGroup()}get offsetX(){return this._offsetX}ngOnChanges(e){e.verticalScrollVisible&&(this._styleByGroup.right=this.calcStylesByGroup("right"),this.destroyed||this.cd.detectChanges())}ngOnDestroy(){this.destroyed=!0}onLongPressStart({event:e,model:i}){i.dragging=!0,this.dragEventTarget=e}onLongPressEnd({model:e}){this.dragEventTarget=void 0,setTimeout(()=>{let i=this._columns.find(r=>r.$$id===e.$$id);i&&"dragging"in i&&(i.dragging=!1)},5)}get headerWidth(){return this.scrollbarH?(this.verticalScrollVisible?this.innerWidth-this.scrollbarHelper.width:this.innerWidth)+"px":"100%"}onColumnResized(e,i){this.resize.emit(this.makeResizeEvent(e,i))}onColumnResizing(e,i){this.resizing.emit(this.makeResizeEvent(e,i))}makeResizeEvent(e,i){return e<=i.minWidth?e=i.minWidth:e>=i.maxWidth&&(e=i.maxWidth),{column:i,prevValue:i.width,newValue:e}}onColumnReordered({prevIndex:e,newIndex:i,model:r}){let s=this.getColumn(i);s.isTarget=!1,s.targetMarkerContext=void 0,this.reorder.emit({column:r,prevValue:e,newValue:i})}onTargetChanged({prevIndex:e,newIndex:i,initialIndex:r}){if(e||e===0){let s=this.getColumn(e);s.isTarget=!1,s.targetMarkerContext=void 0}if(i||i===0){let s=this.getColumn(i);s.isTarget=!0,r!==i&&(s.targetMarkerContext={class:"targetMarker ".concat(r>i?"dragFromRight":"dragFromLeft")})}}getColumn(e){let i=this._columnsByPin[0].columns.length;if(e<i)return this._columnsByPin[0].columns[e];let r=this._columnsByPin[1].columns.length;return e<i+r?this._columnsByPin[1].columns[e-i]:this._columnsByPin[2].columns[e-i-r]}onSort({column:e,prevValue:i,newValue:r}){if(e.dragging)return;let s=this.calcNewSorts(e,i,r);this.sort.emit({sorts:s,column:e,prevValue:i,newValue:r})}calcNewSorts(e,i,r){let s=0;this.sorts||(this.sorts=[]);let o=this.sorts.map((a,u)=>(a=Ke({},a),a.prop===e.prop&&(s=u),a));return r===void 0?o.splice(s,1):i?o[s].dir=r:(this.sortType===AS.single&&o.splice(0,this.sorts.length),o.push({dir:r,prop:e.prop})),o}setStylesByGroup(){this._styleByGroup.left=this.calcStylesByGroup("left"),this._styleByGroup.center=this.calcStylesByGroup("center"),this._styleByGroup.right=this.calcStylesByGroup("right"),this.destroyed||this.cd.detectChanges()}calcStylesByGroup(e){let i=this._columnGroupWidths;return e==="center"?{transform:`translateX(${this.offsetX*-1}px)`,width:`${i[e]}px`,willChange:"transform"}:{width:`${i[e]}px`}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["datatable-header"]],hostAttrs:[1,"datatable-header"],hostVars:4,hostBindings:function(i,r){i&2&&kr("height",r.headerHeight)("width",r.headerWidth)},inputs:{sortAscendingIcon:"sortAscendingIcon",sortDescendingIcon:"sortDescendingIcon",sortUnsetIcon:"sortUnsetIcon",scrollbarH:"scrollbarH",dealsWithGroup:"dealsWithGroup",targetMarkerTemplate:"targetMarkerTemplate",enableClearingSortState:"enableClearingSortState",innerWidth:"innerWidth",sorts:"sorts",sortType:"sortType",allRowsSelected:"allRowsSelected",selectionType:"selectionType",reorderable:"reorderable",verticalScrollVisible:"verticalScrollVisible",headerHeight:"headerHeight",columns:"columns",offsetX:"offsetX"},outputs:{sort:"sort",reorder:"reorder",resize:"resize",resizing:"resizing",select:"select",columnContextmenu:"columnContextmenu"},features:[zs],decls:3,vars:2,consts:[["role","row","orderable","",1,"datatable-header-inner",3,"reorder","targetChanged"],[3,"class","ngStyle"],[3,"ngStyle"],["role","columnheader","resizeable","","long-press","","draggable","",3,"resizeEnabled","pressModel","pressEnabled","dragX","dragY","dragModel","dragEventTarget","headerHeight","isTarget","targetMarkerTemplate","targetMarkerContext","column","sortType","sorts","selectionType","sortAscendingIcon","sortDescendingIcon","sortUnsetIcon","allRowsSelected","enableClearingSortState"],["role","columnheader","resizeable","","long-press","","draggable","",3,"resize","resizing","longPressStart","longPressEnd","sort","select","columnContextmenu","resizeEnabled","pressModel","pressEnabled","dragX","dragY","dragModel","dragEventTarget","headerHeight","isTarget","targetMarkerTemplate","targetMarkerContext","column","sortType","sorts","selectionType","sortAscendingIcon","sortDescendingIcon","sortUnsetIcon","allRowsSelected","enableClearingSortState"]],template:function(i,r){i&1&&(ge(0,"div",0),yt("reorder",function(o){return r.onColumnReordered(o)})("targetChanged",function(o){return r.onTargetChanged(o)}),ws(1,bne,3,3,"div",1,bH),ye()),i&2&&(kr("width",r._columnGroupWidths.total,"px"),xe(),Cs(r._columnsByPin))},dependencies:[fie,Ng,hie,lie,aie,nR],encapsulation:2,changeDetection:0})}}return n})();function pie(n,t,e){e=e||{};let i,r,s,o=null,a=0;function u(){a=e.leading===!1?0:+new Date,o=null,s=n.apply(i,r)}return function(){let h=+new Date;!a&&e.leading===!1&&(a=h);let p=t-(h-a);return i=this,r=arguments,p<=0?(clearTimeout(o),o=null,a=h,s=n.apply(i,r)):!o&&e.trailing!==!1&&(o=setTimeout(u,p)),s}}function mie(n,t){return function(i,r,s){return{configurable:!0,enumerable:s.enumerable,get:function(){return Object.defineProperty(this,r,{configurable:!0,enumerable:s.enumerable,value:pie(s.value,n,t)}),this[r]}}}}function gie(n){let t=0;for(let e of n)t+=e.flexGrow||0;return t}function yie(n,t){let e=Zne(n),i=gie(n),r=Ep(n);e!==t&&vie(r,t,i)}function vie(n,t,e){for(let u in n)if(u in n)for(let h of n[u])h.$$oldWidth&&(h.canAutoResize=!1),h.canAutoResize?h.width=0:(t-=h.width,e-=h.flexGrow?h.flexGrow:0);let i={},r=t;do{let u=r/e;r=0;for(let h in n)if(h in n){for(let p of n[h])if(p.canAutoResize&&!i[p.prop]){let v=p.width+p.flexGrow*u;p.minWidth!==void 0&&v<p.minWidth?(r+=v-p.minWidth,p.width=p.minWidth,i[p.prop]=!0):p.width=v}}}while(r!==0);let s=Object.values(n).reduce((u,h)=>u.concat(h),[]),o=s.reduce((u,h)=>u+h.width,0),a=t-o;if(a!==0){for(let u of s.filter(h=>h.canAutoResize).sort((h,p)=>h.width-p.width))if(a>0&&(!u.maxWidth||u.width+a<=u.maxWidth)||a<0&&(!u.minWidth||u.width+a>=u.minWidth)){u.width+=a;break}}}function _ie(n,t,e,i,r=150,s=0){let o=n.slice(e+1,n.length).filter(D=>D.canAutoResize!==!1);for(let D of o)D.$$oldWidth||(D.$$oldWidth=D.width);let a=0,u=!1,h=_H(n,r),p=t-h,v=p,x=[],S=1;do{a=p/o.length,u=h>=t;for(let D of o){if(u&&i&&v!==-1*s)D.width=D.$$oldWidth||D.width||r;else{let O=(D.width||r)+a;D.minWidth&&O<D.minWidth?(D.width=D.minWidth,x.push(D)):D.maxWidth&&O>D.maxWidth?(D.width=D.maxWidth,x.push(D)):D.width=O}D.width=Math.max(0,D.width)}h=_H(n,r),p=t-h,bie(o,x)}while(p>S&&o.length!==0);for(let D of o)D.$$oldWidth=0}function bie(n,t){for(let e of t){let i=n.indexOf(e);n.splice(i,1)}}function _H(n,t=150){let e=0;for(let i of n)e+=i.width||t;return e}var xie=(()=>{class n{constructor(){this.change=new en,this._count=0,this._page=1,this._size=0}set size(e){this._size=e,this.pages=this.calcPages()}get size(){return this._size}set count(e){this._count=e,this.pages=this.calcPages()}get count(){return this._count}set page(e){this._page=e,this.pages=this.calcPages()}get page(){return this._page}get totalPages(){let e=this.size<1?1:Math.ceil(this.count/this.size);return Math.max(e||0,1)}canPrevious(){return this.page>1}canNext(){return this.page<this.totalPages}prevPage(){this.selectPage(this.page-1)}nextPage(){this.selectPage(this.page+1)}selectPage(e){e>0&&e<=this.totalPages&&e!==this.page&&(this.page=e,this.change.emit({page:e}))}calcPages(e){let i=[],r=1,s=this.totalPages,o=5,a=o<this.totalPages;e=e||this.page,a&&(r=e-Math.floor(o/2),s=e+Math.floor(o/2),r<1?(r=1,s=Math.min(r+o-1,this.totalPages)):s>this.totalPages&&(r=Math.max(this.totalPages-o+1,1),s=this.totalPages));for(let u=r;u<=s;u++)i.push({number:u,text:u});return i}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["datatable-pager"]],hostAttrs:[1,"datatable-pager"],inputs:{pagerLeftArrowIcon:"pagerLeftArrowIcon",pagerRightArrowIcon:"pagerRightArrowIcon",pagerPreviousIcon:"pagerPreviousIcon",pagerNextIcon:"pagerNextIcon",size:"size",count:"count",page:"page"},outputs:{change:"change"},decls:15,vars:20,consts:[[1,"pager"],["role","button","aria-label","go to first page",3,"click"],["role","button","aria-label","go to previous page",3,"click"],["role","button",1,"pages",3,"active"],["role","button","aria-label","go to next page",3,"click"],["role","button","aria-label","go to last page",3,"click"],["role","button",1,"pages"],[3,"click"]],template:function(i,r){i&1&&(ge(0,"ul",0)(1,"li")(2,"a",1),yt("click",function(){return r.selectPage(1)}),it(3,"i"),ye()(),ge(4,"li")(5,"a",2),yt("click",function(){return r.prevPage()}),it(6,"i"),ye()(),ws(7,wne,3,4,"li",3,xne),ge(9,"li")(10,"a",4),yt("click",function(){return r.nextPage()}),it(11,"i"),ye()(),ge(12,"li")(13,"a",5),yt("click",function(){return r.selectPage(r.totalPages)}),it(14,"i"),ye()()()),i&2&&(xe(),Mi("disabled",!r.canPrevious()),xe(2),vu(r.pagerPreviousIcon),xe(),Mi("disabled",!r.canPrevious()),xe(2),vu(r.pagerLeftArrowIcon),xe(),Cs(r.pages),xe(2),Mi("disabled",!r.canNext()),xe(2),vu(r.pagerRightArrowIcon),xe(),Mi("disabled",!r.canNext()),xe(2),vu(r.pagerNextIcon))},encapsulation:2,changeDetection:0})}}return n})(),wie=(()=>{class n{constructor(){this.selectedCount=0,this.page=new en}get isVisible(){return this.rowCount/this.pageSize>1}get curPage(){return this.offset+1}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["datatable-footer"]],hostAttrs:[1,"datatable-footer"],inputs:{footerHeight:"footerHeight",rowCount:"rowCount",pageSize:"pageSize",offset:"offset",pagerLeftArrowIcon:"pagerLeftArrowIcon",pagerRightArrowIcon:"pagerRightArrowIcon",pagerPreviousIcon:"pagerPreviousIcon",pagerNextIcon:"pagerNextIcon",totalMessage:"totalMessage",footerTemplate:"footerTemplate",selectedCount:"selectedCount",selectedMessage:"selectedMessage"},outputs:{page:"page"},decls:3,vars:6,consts:[[1,"datatable-footer-inner",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"page-count"],[3,"change","pagerLeftArrowIcon","pagerRightArrowIcon","pagerPreviousIcon","pagerNextIcon","page","size","count","hidden"]],template:function(i,r){i&1&&(ge(0,"div",0),It(1,Ene,1,8,null,1)(2,Ane,4,11),ye()),i&2&&(kr("height",r.footerHeight,"px"),Le("ngClass",oC(4,Cne,r.selectedMessage)),xe(),Kt(r.footerTemplate?1:2))},dependencies:[us,mp,xie],encapsulation:2,changeDetection:0})}}return n})(),Cie=(()=>{class n{constructor(){this.element=Ue(Ar),this.zone=Ue(xr),this.isVisible=!1,this.visible=new en}ngOnInit(){this.runCheck()}ngOnDestroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){let e=()=>{let{offsetHeight:i,offsetWidth:r}=this.element.nativeElement;i&&r?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e(),50)}))};this.timeout=setTimeout(()=>e())}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","visibilityObserver",""]],hostVars:2,hostBindings:function(i,r){i&2&&Mi("visible",r.isVisible)},outputs:{visible:"visible"}})}}return n})(),Sie=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["datatable-progress"]],decls:3,vars:0,consts:[["role","progressbar",1,"progress-linear"],[1,"container"],[1,"bar"]],template:function(i,r){i&1&&(ge(0,"div",0)(1,"div",1),it(2,"div",2),ye()())},encapsulation:2,changeDetection:0})}}return n})(),DH=(()=>{class n{set rows(e){this._rows=e,this.rowDiffer.diff([]),e&&(this._internalRows=[...e])}get rows(){return this._rows}set groupRowsBy(e){e&&(this._groupRowsBy=e,this._rows&&this._groupRowsBy&&(this.groupedRows=this.groupArrayBy(this._rows,this._groupRowsBy)))}get groupRowsBy(){return this._groupRowsBy}set columns(e){e&&(this._internalColumns=[...e],gH(this._internalColumns,this._defaultColumnWidth),this.recalculateColumns()),this._columns=e}get columns(){return this._columns}set limit(e){this._limit=e,this.recalculate()}get limit(){return this._limit}set count(e){this._count=e,this.recalculate()}get count(){return this._count}set offset(e){this._offset=e}get offset(){return Math.max(Math.min(this._offset,Math.ceil(this.rowCount/this.pageSize)-1),0)}set ghostLoadingIndicator(e){this._ghostLoadingIndicator=e,e&&this.scrollbarV&&!this.externalPaging&&(this.rows=[...this.rows??[],void 0])}get ghostLoadingIndicator(){return this._ghostLoadingIndicator}get isFixedHeader(){let e=this.headerHeight;return typeof e=="string"?e!=="auto":!0}get isFixedRow(){return this.rowHeight!=="auto"}get isVertScroll(){return this.scrollbarV}get isVirtualized(){return this.virtualization}get isHorScroll(){return this.scrollbarH}get isSelectable(){return this.selectionType!==void 0}get isCheckboxSelection(){return this.selectionType===Sc.checkbox}get isCellSelection(){return this.selectionType===Sc.cell}get isSingleSelection(){return this.selectionType===Sc.single}get isMultiSelection(){return this.selectionType===Sc.multi}get isMultiClickSelection(){return this.selectionType===Sc.multiClick}get allRowsSelected(){let e=this.rows&&this.selected&&this.selected.length===this.rows.length;if(this.bodyComponent&&this.selectAllRowsOnPage){let i=this.bodyComponent.indexes,r=i().last-i().first;e=this.selected.length===r}return this.selected&&this.rows&&this.rows.length!==0&&e}constructor(){this.scrollbarHelper=Ue(AH),this.cd=Ue(Ss),this.columnChangesService=Ue(XP),this.configuration=Ue("configuration",{optional:!0}),this.selected=[],this.scrollbarV=!1,this.scrollbarVDynamic=!1,this.scrollbarH=!1,this.rowHeight=30,this.columnMode=ES.standard,this.headerHeight=30,this.footerHeight=0,this.externalPaging=!1,this.externalSorting=!1,this.loadingIndicator=!1,this.reorderable=!0,this.swapColumns=!0,this.sortType=AS.single,this.sorts=[],this.cssClasses={sortAscending:"datatable-icon-up",sortDescending:"datatable-icon-down",sortUnset:"datatable-icon-sort-unset",pagerLeftArrow:"datatable-icon-left",pagerRightArrow:"datatable-icon-right",pagerPrevious:"datatable-icon-prev",pagerNext:"datatable-icon-skip"},this.messages={emptyMessage:"No data to display",totalMessage:"total",selectedMessage:"selected"},this.groupExpansionDefault=!1,this.selectAllRowsOnPage=!1,this.virtualization=!0,this.summaryRow=!1,this.summaryHeight=30,this.summaryPosition="top",this.rowDraggable=!1,this.enableClearingSortState=!1,this.scroll=new en,this.activate=new en,this.select=new en,this.sort=new en,this.page=new en,this.reorder=new en,this.resize=new en,this.tableContextmenu=new en(!1),this.treeAction=new en,this.rowDragEvents=new en,this.element=Ue(Ar).nativeElement,this.rowDiffer=Ue(Ih).find([]).create(),this.rowCount=0,this._offsetX=new bs(0),this._count=0,this._offset=0,this._subscriptions=[],this._ghostLoadingIndicator=!1,this.verticalScrollVisible=!1,this._rowInitDone=mn(!1),this.rowIdentity=e=>this._groupRowsBy?e.key??e:e,this.configuration&&(this.configuration.messages&&(this.messages=Ke({},this.configuration.messages)),this.configuration.cssClasses&&(this.cssClasses=Ke({},this.configuration.cssClasses)),this.headerHeight=this.configuration.headerHeight??this.headerHeight,this.footerHeight=this.configuration.footerHeight??this.footerHeight,this.rowHeight=this.configuration.rowHeight??this.rowHeight,this._defaultColumnWidth=this.configuration.defaultColumnWidth??150)}ngOnInit(){this.recalculate()}ngAfterViewInit(){typeof requestAnimationFrame>"u"||requestAnimationFrame(()=>{this.recalculate(),this.externalPaging&&this.scrollbarV&&this.page.emit({count:this.count,pageSize:this.pageSize,limit:this.limit,offset:0})})}ngAfterContentInit(){this.columnTemplates.length&&this.translateColumns(this.columnTemplates),this._subscriptions.push(this.columnTemplates.changes.subscribe(e=>this.translateColumns(e))),this.listenForColumnInputChanges()}translateColumns(e){if(e){let i=e.toArray();i.length&&(this._internalColumns=jne(i),gH(this._internalColumns,this._defaultColumnWidth),this.recalculateColumns(),!this.externalSorting&&this.rows?.length&&this.sortInternalRows(),this.cd.markForCheck())}}groupArrayBy(e,i){let r=new Map,s=0;e.forEach(a=>{let u=a[i];r.has(u)?r.get(u).push(a):r.set(u,[a]),s++});let o=(a,u)=>({key:a,value:u});return Array.from(r,a=>o(a[0],a[1]))}ngDoCheck(){let e=this.rowDiffer.diff(this.rows);(e||this.disableRowCheck)&&(!this.ghostLoadingIndicator&&!this.externalSorting&&this._internalColumns?this.sortInternalRows():this._internalRows=[...this.rows],this._internalRows=GP(this._internalRows,ey(this.treeFromRelation),ey(this.treeToRelation)),this._rows&&this._groupRowsBy&&(this.groupedRows=this.groupArrayBy(this._rows,this._groupRowsBy)),e&&queueMicrotask(()=>{this._rowInitDone.set(!0),this.recalculate(),this.cd.markForCheck()}),this.recalculatePages(),this.cd.markForCheck())}recalculate(){this.recalculateDims(),this.recalculateColumns(),this.cd.markForCheck()}onWindowResize(){this.recalculate()}recalculateColumns(e=this._internalColumns,i=-1,r=this.scrollbarH){let s=this._innerWidth;if(!e||!s)return;let o=this.bodyElement?.nativeElement;return this.verticalScrollVisible=o?.scrollHeight>o?.clientHeight,(this.scrollbarV||this.scrollbarVDynamic)&&(s=s-(this.verticalScrollVisible||!this._rowInitDone()?this.scrollbarHelper.width:0)),this.columnMode===ES.force?_ie(e,s,i,r,this._defaultColumnWidth,this.scrollbarHelper.width):this.columnMode===ES.flex&&yie(e,s),this.bodyComponent&&this.bodyComponent.columnGroupWidths.total!==s&&(this.bodyComponent.columns=[...this._internalColumns],this.bodyComponent.cd.markForCheck()),this.headerComponent&&this.headerComponent._columnGroupWidths.total!==s&&(this.headerComponent.columns=[...this._internalColumns]),e}recalculateDims(){let e=this.element.getBoundingClientRect();if(this._innerWidth=Math.floor(e.width),this.scrollbarV){let i=e.height;this.headerHeight&&(i=i-this.headerHeight),this.footerHeight&&(i=i-this.footerHeight),this.bodyHeight=i}this.recalculatePages()}recalculatePages(){this.pageSize=this.calcPageSize(),this.rowCount=this.calcRowCount()}onBodyPage(e){this.externalPaging&&!this.virtualization||(this.offset=e,isNaN(this.offset)||this.page.emit({count:this.count,pageSize:this.pageSize,limit:this.limit,offset:this.offset}))}onBodyScroll(e){this._offsetX.next(e.offsetX),this.scroll.emit(e),this.cd.detectChanges()}onFooterPage(e){this.offset=e.page-1,this.bodyComponent.updateOffsetY(this.offset),this.page.emit({count:this.count,pageSize:this.pageSize,limit:this.limit,offset:this.offset}),this.selectAllRowsOnPage&&(this.selected=[],this.select.emit({selected:this.selected}))}calcPageSize(){if(this.scrollbarV&&this.virtualization){let e=Math.ceil(this.bodyHeight/this.rowHeight);return Math.max(e,0)}return this.limit!==void 0?this.limit:this.rows?this.rows.length:0}calcRowCount(){return this.externalPaging?this.count:this.rows?this.groupedRows?this.groupedRows.length:this.treeFromRelation!=null&&this.treeToRelation!=null?this._internalRows.length:this.rows.length:0}onColumnContextmenu({event:e,column:i}){this.tableContextmenu.emit({event:e,type:ZP.header,content:i})}onRowContextmenu({event:e,row:i}){this.tableContextmenu.emit({event:e,type:ZP.body,content:i})}onColumnResize({column:e,newValue:i,prevValue:r}){if(e===void 0)return;let s,o=this._internalColumns.map((a,u)=>(a=Ke({},a),a.$$id===e.$$id&&(s=u,a.width=i,a.$$oldWidth=i),a));this.recalculateColumns(o,s),this._internalColumns=o,this.resize.emit({column:e,newValue:i,prevValue:r})}onColumnResizing({column:e,newValue:i}){if(e===void 0)return;e.width=i,e.$$oldWidth=i;let r=this._internalColumns.indexOf(e);this.recalculateColumns(this._internalColumns,r)}onColumnReorder({column:e,newValue:i,prevValue:r}){let s=this._internalColumns.map(o=>Ke({},o));if(this.swapColumns){let o=s[i];s[i]=e,s[r]=o}else if(i>r){let o=s[r];for(let a=r;a<i;a++)s[a]=s[a+1];s[i]=o}else{let o=s[r];for(let a=r;a>i;a--)s[a]=s[a-1];s[i]=o}this._internalColumns=s,this.reorder.emit({column:e,newValue:i,prevValue:r})}onColumnSort(e){this.selectAllRowsOnPage&&(this.selected=[],this.select.emit({selected:this.selected})),this.sorts=e.sorts,this.externalSorting===!1&&this.sortInternalRows(),this._internalRows=GP(this._internalRows,ey(this.treeFromRelation),ey(this.treeToRelation)),this.offset=0,this.bodyComponent.updateOffsetY(this.offset),this.page.emit({count:this.count,pageSize:this.pageSize,limit:this.limit,offset:this.offset}),this.sort.emit(e)}onHeaderSelect(){if(this.bodyComponent&&this.selectAllRowsOnPage){let e=this.bodyComponent.indexes().first,i=this.bodyComponent.indexes().last,r=this.selected.length===i-e;this.selected=[],r||this.selected.push(...this._internalRows.slice(e,i))}else{let e;this.disableRowCheck?e=this.rows.filter(r=>!this.disableRowCheck(r)):e=this.rows;let i=this.selected.length===e.length;this.selected=[],i||this.selected.push(...e)}this.select.emit({selected:this.selected})}onBodySelect(e){this.select.emit(e)}onTreeAction(e){let i=e.row,r=this._rows.findIndex(s=>s[this.treeToRelation]===e.row[this.treeToRelation]);this.treeAction.emit({row:i,rowIndex:r})}ngOnDestroy(){this._subscriptions.forEach(e=>e.unsubscribe())}listenForColumnInputChanges(){this._subscriptions.push(this.columnChangesService.columnInputChanges$.subscribe(()=>{this.columnTemplates&&this.columnTemplates.notifyOnChanges()}))}sortInternalRows(){if((!this.sorts||!this.sorts?.length)&&(this._internalRows=this._rows,this.treeFromRelation&&this.treeToRelation&&(this._internalRows=GP(this._internalRows,ey(this.treeFromRelation),ey(this.treeToRelation)))),this.groupedRows&&this.groupedRows.length){let e=this.sorts?.find(i=>i.prop===this._groupRowsBy);this.groupedRows=this.groupArrayBy(this._rows,this._groupRowsBy),this.groupedRows=die(this.groupedRows,this._internalColumns,this.sorts,e),this._internalRows=[...this._internalRows]}else this._internalRows=KP(this._internalRows,this._internalColumns,this.sorts)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=bt({type:n,selectors:[["ngx-datatable"]],contentQueries:function(i,r,s){if(i&1&&(ea(s,Xne,5),ea(s,Nne,5),ea(s,Yne,5),ea(s,Qne,5,Us),ea(s,tR,4)),i&2){let o;jn(o=Wn())&&(r.rowDetail=o.first),jn(o=Wn())&&(r.groupHeader=o.first),jn(o=Wn())&&(r.footer=o.first),jn(o=Wn())&&(r.rowDefTemplate=o.first),jn(o=Wn())&&(r.columnTemplates=o)}},viewQuery:function(i,r){if(i&1&&(Bi(qP,5),Bi(vH,5),Bi(qP,5,Ar)),i&2){let s;jn(s=Wn())&&(r.bodyComponent=s.first),jn(s=Wn())&&(r.headerComponent=s.first),jn(s=Wn())&&(r.bodyElement=s.first)}},hostAttrs:[1,"ngx-datatable"],hostVars:22,hostBindings:function(i,r){i&1&&yt("resize",function(){return r.onWindowResize()},!1,Xw),i&2&&Mi("fixed-header",r.isFixedHeader)("fixed-row",r.isFixedRow)("scroll-vertical",r.isVertScroll)("virtualized",r.isVirtualized)("scroll-horz",r.isHorScroll)("selectable",r.isSelectable)("checkbox-selection",r.isCheckboxSelection)("cell-selection",r.isCellSelection)("single-selection",r.isSingleSelection)("multi-selection",r.isMultiSelection)("multi-click-selection",r.isMultiClickSelection)},inputs:{targetMarkerTemplate:"targetMarkerTemplate",rows:"rows",groupRowsBy:"groupRowsBy",groupedRows:"groupedRows",columns:"columns",selected:"selected",scrollbarV:[2,"scrollbarV","scrollbarV",Pi],scrollbarVDynamic:[2,"scrollbarVDynamic","scrollbarVDynamic",Pi],scrollbarH:[2,"scrollbarH","scrollbarH",Pi],rowHeight:"rowHeight",columnMode:"columnMode",headerHeight:[2,"headerHeight","headerHeight",Js],footerHeight:[2,"footerHeight","footerHeight",Js],externalPaging:[2,"externalPaging","externalPaging",Pi],externalSorting:[2,"externalSorting","externalSorting",Pi],limit:[2,"limit","limit",Js],count:[2,"count","count",Js],offset:[2,"offset","offset",Js],loadingIndicator:[2,"loadingIndicator","loadingIndicator",Pi],ghostLoadingIndicator:[2,"ghostLoadingIndicator","ghostLoadingIndicator",Pi],selectionType:"selectionType",reorderable:[2,"reorderable","reorderable",Pi],swapColumns:[2,"swapColumns","swapColumns",Pi],sortType:"sortType",sorts:"sorts",cssClasses:"cssClasses",messages:"messages",rowClass:"rowClass",selectCheck:"selectCheck",displayCheck:"displayCheck",groupExpansionDefault:[2,"groupExpansionDefault","groupExpansionDefault",Pi],trackByProp:"trackByProp",selectAllRowsOnPage:[2,"selectAllRowsOnPage","selectAllRowsOnPage",Pi],virtualization:[2,"virtualization","virtualization",Pi],treeFromRelation:"treeFromRelation",treeToRelation:"treeToRelation",summaryRow:[2,"summaryRow","summaryRow",Pi],summaryHeight:[2,"summaryHeight","summaryHeight",Js],summaryPosition:"summaryPosition",disableRowCheck:"disableRowCheck",rowDraggable:[2,"rowDraggable","rowDraggable",Pi],enableClearingSortState:[2,"enableClearingSortState","enableClearingSortState",Pi],rowIdentity:"rowIdentity"},outputs:{scroll:"scroll",activate:"activate",select:"select",sort:"sort",page:"page",reorder:"reorder",resize:"resize",tableContextmenu:"tableContextmenu",treeAction:"treeAction",rowDragEvents:"rowDragEvents"},features:[Mo([{provide:TH,useExisting:n},XP])],ngContentSelectors:CH,decls:10,vars:39,consts:[["visibilityObserver","",3,"visible"],["role","table"],["role","rowgroup",3,"sorts","sortType","scrollbarH","innerWidth","offsetX","dealsWithGroup","columns","headerHeight","reorderable","targetMarkerTemplate","sortAscendingIcon","sortDescendingIcon","sortUnsetIcon","allRowsSelected","selectionType","verticalScrollVisible","enableClearingSortState"],["tabindex","0","role","rowgroup",3,"page","activate","rowContextmenu","select","scroll","treeAction","groupRowsBy","groupedRows","rows","groupExpansionDefault","scrollbarV","scrollbarH","virtualization","loadingIndicator","ghostLoadingIndicator","externalPaging","rowHeight","rowCount","offset","trackByProp","columns","pageSize","offsetX","rowDetail","groupHeader","selected","innerWidth","bodyHeight","selectionType","rowIdentity","rowClass","selectCheck","displayCheck","summaryRow","summaryHeight","summaryPosition","verticalScrollVisible","disableRowCheck","rowDraggable","rowDragEvents","rowDefTemplate"],[3,"rowCount","pageSize","offset","footerHeight","footerTemplate","totalMessage","pagerLeftArrowIcon","pagerRightArrowIcon","pagerPreviousIcon","selectedCount","selectedMessage","pagerNextIcon"],["role","rowgroup",3,"sort","resize","resizing","reorder","select","columnContextmenu","sorts","sortType","scrollbarH","innerWidth","offsetX","dealsWithGroup","columns","headerHeight","reorderable","targetMarkerTemplate","sortAscendingIcon","sortDescendingIcon","sortUnsetIcon","allRowsSelected","selectionType","verticalScrollVisible","enableClearingSortState"],[1,"empty-row",3,"innerHTML"],[3,"page","rowCount","pageSize","offset","footerHeight","footerTemplate","totalMessage","pagerLeftArrowIcon","pagerRightArrowIcon","pagerPreviousIcon","selectedCount","selectedMessage","pagerNextIcon"]],template:function(i,r){i&1&&(_u(wH),ge(0,"div",0),yt("visible",function(){return r.recalculate()}),ge(1,"div",1),It(2,Dne,2,19,"datatable-header",2),ge(3,"datatable-body",3),Il(4,"async"),yt("page",function(o){return r.onBodyPage(o)})("activate",function(o){return r.activate.emit(o)})("rowContextmenu",function(o){return r.onRowContextmenu(o)})("select",function(o){return r.onBodySelect(o)})("scroll",function(o){return r.onBodyScroll(o)})("treeAction",function(o){return r.onTreeAction(o)}),Dl(5,0,["ngProjectAs","[loading-indicator]",5,["","loading-indicator",""]],Ine,1,0),Dl(7,1,["ngProjectAs","[empty-content]",5,["","empty-content",""]],Pne,1,1),ye()(),It(9,Rne,1,12,"datatable-footer",4),ye()),i&2&&(xe(2),Kt(r.headerHeight?2:-1),xe(),Le("groupRowsBy",r.groupRowsBy)("groupedRows",r.groupedRows)("rows",r._internalRows)("groupExpansionDefault",r.groupExpansionDefault)("scrollbarV",r.scrollbarV)("scrollbarH",r.scrollbarH)("virtualization",r.virtualization)("loadingIndicator",r.loadingIndicator)("ghostLoadingIndicator",r.ghostLoadingIndicator)("externalPaging",r.externalPaging)("rowHeight",r.rowHeight)("rowCount",r.rowCount)("offset",r.offset)("trackByProp",r.trackByProp)("columns",r._internalColumns)("pageSize",r.pageSize)("offsetX",Tv(4,37,r._offsetX))("rowDetail",r.rowDetail)("groupHeader",r.groupHeader)("selected",r.selected)("innerWidth",r._innerWidth)("bodyHeight",r.bodyHeight)("selectionType",r.selectionType)("rowIdentity",r.rowIdentity)("rowClass",r.rowClass)("selectCheck",r.selectCheck)("displayCheck",r.displayCheck)("summaryRow",r.summaryRow)("summaryHeight",r.summaryHeight)("summaryPosition",r.summaryPosition)("verticalScrollVisible",r.verticalScrollVisible)("disableRowCheck",r.disableRowCheck)("rowDraggable",r.rowDraggable)("rowDragEvents",r.rowDragEvents)("rowDefTemplate",r.rowDefTemplate),xe(6),Kt(r.footerHeight?9:-1))},dependencies:[Cie,vH,qP,wie,Nv,Sie],styles:[`.ngx-datatable{display:block;overflow:hidden;justify-content:center;position:relative;transform:translateZ(0)}.ngx-datatable [hidden]{display:none!important}.ngx-datatable *,.ngx-datatable *:before,.ngx-datatable *:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.ngx-datatable.scroll-vertical .datatable-body{overflow-y:auto}.ngx-datatable.scroll-vertical.virtualized .datatable-body .datatable-row-wrapper{position:absolute}.ngx-datatable.scroll-horz .datatable-body{overflow-x:auto;-webkit-overflow-scrolling:touch}.ngx-datatable.fixed-header .datatable-header .datatable-header-inner{white-space:nowrap}.ngx-datatable.fixed-header .datatable-header .datatable-header-inner .datatable-header-cell{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ngx-datatable.fixed-row .datatable-scroll,.ngx-datatable.fixed-row .datatable-scroll .datatable-body-row{white-space:nowrap}.ngx-datatable.fixed-row .datatable-scroll .datatable-body-row .datatable-body-cell,.ngx-datatable.fixed-row .datatable-scroll .datatable-body-row .datatable-body-group-cell{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.ngx-datatable .datatable-body-row,.ngx-datatable .datatable-row-center,.ngx-datatable .datatable-header-inner{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;flex-direction:row;-webkit-flex-flow:row;-moz-flex-flow:row;-ms-flex-flow:row;-o-flex-flow:row;flex-flow:row}.ngx-datatable .datatable-body-cell,.ngx-datatable .datatable-header-cell{overflow-x:hidden;vertical-align:top;display:inline-block;line-height:1.625}.ngx-datatable .datatable-body-cell:focus,.ngx-datatable .datatable-header-cell:focus{outline:none}.ngx-datatable .datatable-row-left,.ngx-datatable .datatable-row-right,.ngx-datatable .datatable-group-header{z-index:9;position:sticky!important}.ngx-datatable .datatable-row-left,.ngx-datatable .datatable-group-header{left:0}.ngx-datatable .datatable-row-right{right:0}.ngx-datatable .datatable-row-center,.ngx-datatable .datatable-row-group{position:relative}.ngx-datatable .datatable-header{display:block;overflow:hidden}.ngx-datatable .datatable-header .datatable-header-inner{align-items:stretch;-webkit-align-items:stretch}.ngx-datatable .datatable-header .datatable-header-cell{position:relative;display:inline-block}.ngx-datatable .datatable-header .datatable-header-cell.sortable .datatable-header-cell-wrapper{cursor:pointer}.ngx-datatable .datatable-header .datatable-header-cell.longpress .datatable-header-cell-wrapper{cursor:move}.ngx-datatable .datatable-header .datatable-header-cell .sort-btn{line-height:100%;vertical-align:middle;display:inline-block;cursor:pointer}.ngx-datatable .datatable-header .datatable-header-cell .resize-handle,.ngx-datatable .datatable-header .datatable-header-cell .resize-handle--not-resizable{display:inline-block;position:absolute;right:0;top:0;bottom:0;width:5px;padding:0 4px;visibility:hidden}.ngx-datatable .datatable-header .datatable-header-cell .resize-handle{cursor:ew-resize}.ngx-datatable .datatable-header .datatable-header-cell.resizeable:hover .resize-handle,.ngx-datatable .datatable-header .datatable-header-cell:hover .resize-handle--not-resizable{visibility:visible}.ngx-datatable .datatable-header .datatable-header-cell .targetMarker{position:absolute;top:0;bottom:0}.ngx-datatable .datatable-header .datatable-header-cell .targetMarker.dragFromLeft{right:0}.ngx-datatable .datatable-header .datatable-header-cell .targetMarker.dragFromRight{left:0}.ngx-datatable .datatable-header .datatable-header-cell .datatable-header-cell-template-wrap{height:inherit}.ngx-datatable .datatable-body{position:relative;z-index:10;display:block;overflow:hidden}.ngx-datatable .datatable-body .datatable-scroll{display:inline-block}.ngx-datatable .datatable-body .datatable-row-detail{overflow-y:hidden}.ngx-datatable .datatable-body .datatable-row-wrapper{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.ngx-datatable .datatable-body .datatable-body-row{outline:none}.ngx-datatable .datatable-body .datatable-body-row>div{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex}.ngx-datatable .datatable-footer{display:block;width:100%;overflow:auto}.ngx-datatable .datatable-footer .datatable-footer-inner{display:flex;align-items:center;width:100%}.ngx-datatable .datatable-footer .selected-count .page-count{flex:1 1 40%}.ngx-datatable .datatable-footer .selected-count .datatable-pager{flex:1 1 60%}.ngx-datatable .datatable-footer .page-count{flex:1 1 20%}.ngx-datatable .datatable-footer .datatable-pager{flex:1 1 80%;text-align:right}.ngx-datatable .datatable-footer .datatable-pager .pager,.ngx-datatable .datatable-footer .datatable-pager .pager li{padding:0;margin:0;display:inline-block;list-style:none}.ngx-datatable .datatable-footer .datatable-pager .pager li,.ngx-datatable .datatable-footer .datatable-pager .pager li a{outline:none}.ngx-datatable .datatable-footer .datatable-pager .pager li a{cursor:pointer;display:inline-block}.ngx-datatable .datatable-footer .datatable-pager .pager li.disabled a{cursor:not-allowed}
`],encapsulation:2,changeDetection:0})}}return VO([mie(5)],n.prototype,"onWindowResize",null),n})();var IH=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[{provide:"configuration",useValue:e}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Yo({type:n})}static{this.\u0275inj=Xo({})}}return n})();var Eie=(n,t)=>[n,t];function Tie(n,t){if(n&1&&(Ko(0),ge(1,"b"),ot(2),ye(),it(3,"br"),Qo()),n&2){let e=Ae();xe(2),Kr(e.notification().asset)}}function Aie(n,t){if(n&1&&(Ko(0),ge(1,"b"),ot(2),ye(),Qo()),n&2){let e=Ae();xe(2),Kr(e.notification().affectedElement)}}function Die(n,t){if(n&1){let e=An();Ko(0),ge(1,"button",7),yt("click",function(){mt(e);let r=Ae();return gt(r.onNotificationClick())}),So(),ge(2,"svg",8),it(3,"path",9),ye(),gu(),ge(4,"span",10),ot(5,"Inspect Notification"),ye()(),Qo()}}var PH=(()=>{class n{AlarmIconComponent=Nl;notification=_t.required();isNotificationClickable=_t(!0);displayAssetInformation=_t(!0);displayElementInformation=_t(!0);clickAction=ji();onNotificationClick(){this.isNotificationClickable()&&this.clickAction.emit(this.notification())}getColorForNotificationStatus(e){return this.statusColorMap[e.status]}statusColorMap={healthy:"healthy",warn:"warn",critical:"critical"};static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-notification"]],inputs:{notification:[1,"notification"],isNotificationClickable:[1,"isNotificationClickable"],displayAssetInformation:[1,"displayAssetInformation"],displayElementInformation:[1,"displayElementInformation"]},outputs:{clickAction:"clickAction"},decls:12,vars:17,consts:[[1,"notification-wrapper"],["role","button","tabindex","0",1,"notification","text-dark","border-1","border-gray-500","rounded-lg","mb-2","transition-all","duration-300","ease-in",3,"click","keydown.enter","ngClass"],[1,"notification-base-information",3,"ngClass"],[1,"notification-status-badge",3,"color","iconComponent","inverted","text"],[4,"ngIf"],[1,"notification-text-button-wrapper","flex","items-center","justify-between"],[1,"notification-text"],["type","button",1,"bg-transparent","p-1","font-medium","rounded-full","text-sm","text-center","inline-flex","items-center","me-2",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m9 5 7 7-7 7"],[1,"sr-only"]],template:function(i,r){i&1&&(ge(0,"div",0)(1,"div",1),yt("click",function(){return r.onNotificationClick()})("keydown.enter",function(){return r.onNotificationClick()}),ge(2,"div",2),it(3,"lib-badge",3),It(4,Tie,4,1,"ng-container",4),ot(5),Il(6,"date"),ye(),ge(7,"div",5)(8,"div",6),It(9,Aie,3,1,"ng-container",4),ot(10),ye(),It(11,Die,6,0,"ng-container",4),ye()()()),i&2&&(xe(),Le("ngClass",aC(14,Eie,r.notification().status.toLowerCase(),r.isNotificationClickable()?"hover:bg-elevated-background cursor-pointer focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"")),xe(),Le("ngClass",r.notification().status.toLowerCase()),xe(),Le("color",r.getColorForNotificationStatus(r.notification()))("iconComponent",r.AlarmIconComponent)("inverted",!0)("text",r.notification().status),xe(),Le("ngIf",r.displayAssetInformation()),xe(),Ei(" ",pp(6,11,r.notification().dateTime,"dd.MM.yyyy")," "),xe(4),Le("ngIf",r.displayElementInformation()),xe(),Ei(" ",r.notification().notification," "),xe(),Le("ngIf",r.isNotificationClickable()))},dependencies:[Nt,us,el,Ov,Oh],styles:[".notification-wrapper[_ngcontent-%COMP%]{container-type:inline-size;container-name:notification-wrapper}.notification[_ngcontent-%COMP%]{border:#F2F2F2 solid 1px;display:flex;gap:1rem;overflow:hidden;border-radius:.5rem}.notification-text-button-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}.notification-text[_ngcontent-%COMP%]{flex-grow:1;padding:.5rem;display:grid;align-content:center}.notification-base-information[_ngcontent-%COMP%]{text-align:center;padding:.5rem;color:#fff;width:120px;min-width:120px;max-width:120px;display:flex;flex-direction:column;align-items:center;justify-content:center}.notification-base-information.healthy[_ngcontent-%COMP%]{background-color:#76996e}.notification-base-information.warn[_ngcontent-%COMP%]{background-color:#f4ac32}.notification-base-information.critical[_ngcontent-%COMP%]{background-color:#c42021}.notification-status-badge[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}@container notification-wrapper (max-width: 430px){.notification[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.notification-base-information[_ngcontent-%COMP%]{width:100%;max-width:100%;min-width:unset;flex-direction:column;align-items:center}.notification-status-badge[_ngcontent-%COMP%]{margin-bottom:.5rem}}"],changeDetection:0})}return n})();var Iie=["dataTableWrapper"],Pie=(n,t)=>t.id;function Rie(n,t){if(n&1){let e=An();ge(0,"div",12)(1,"label",14),ot(2,"Search"),ye(),ge(3,"div",15)(4,"input",16),Mv("ngModelChange",function(r){mt(e);let s=Ae(2);return rC(s.searchTermValue,r)||(s.searchTermValue=r),gt(r)}),yt("input",function(){mt(e);let r=Ae(2);return gt(r.searchTerm.set(r.searchTermValue))}),ye(),ge(5,"div",17),So(),ge(6,"svg",18),it(7,"path",19),ye()()()()}if(n&2){let e=Ae(2);xe(4),Sv("ngModel",e.searchTermValue)}}function kie(n,t){if(n&1){let e=An();ge(0,"div",13)(1,"label",14),ot(2,"Search"),ye(),ge(3,"div",15)(4,"input",20),Mv("ngModelChange",function(r){mt(e);let s=Ae(2);return rC(s.searchTermValue,r)||(s.searchTermValue=r),gt(r)}),yt("input",function(){mt(e);let r=Ae(2);return gt(r.searchTerm.set(r.searchTermValue))}),ye(),ge(5,"div",17),So(),ge(6,"svg",18),it(7,"path",19),ye()()()()}if(n&2){let e=Ae(2);xe(4),Sv("ngModel",e.searchTermValue)}}function Lie(n,t){if(n&1){let e=An();ge(0,"div",3)(1,"form",4)(2,"div",5),it(3,"lib-clock-icon",6),ye(),ge(4,"select",7),Mv("ngModelChange",function(r){mt(e);let s=Ae();return rC(s.rangeSelectorValue,r)||(s.rangeSelectorValue=r),gt(r)}),yt("change",function(){mt(e);let r=Ae();return gt(r.onRangeChange())}),ge(5,"option",8),ot(6,"Last Hour"),ye(),ge(7,"option",9),ot(8,"Today"),ye(),ge(9,"option",10),ot(10,"Last Week"),ye(),ge(11,"option",11),ot(12,"Last 30 Days"),ye()()(),It(13,Rie,8,1,"div",12),ye(),It(14,kie,8,1,"div",13)}if(n&2){let e=Ae();xe(3),Le("color","gray-500")("size","small"),xe(),Sv("ngModel",e.rangeSelectorValue),xe(9),Kt(e.mobileView()?-1:13),xe(),Kt(e.mobileView()?14:-1)}}function Nie(n,t){if(n&1&&it(0,"lib-badge",28),n&2){let e=t.row,i=Ae(2);Le("color",i.getColorForNotificationStatus(e))("iconComponent",i.AlarmIconComponent)("text",e.status)}}function Oie(n,t){n&1&&it(0,"br")}function Fie(n,t){n&1&&ot(0," \xA0 ")}function Bie(n,t){if(n&1&&(ge(0,"b"),ot(1),ye(),it(2,"br"),ot(3),Il(4,"date"),It(5,Oie,1,0,"br")(6,Fie,1,0),ot(7),Il(8,"date")),n&2){let e=t.row,i=Ae(3);xe(),Kr(e.asset),xe(2),Ei(" ",pp(4,4,e.dateTime,"dd.MM.yyyy")," "),xe(2),Kt(i.compactView()?5:6),xe(2),Ei(" ",pp(8,7,e.dateTime,"HH:mm:ss")," ")}}function Vie(n,t){n&1&&(ge(0,"ngx-datatable-column",24),It(1,Bie,9,10,"ng-template",23),ye())}function Uie(n,t){n&1&&it(0,"br")}function zie(n,t){n&1&&ot(0," \xA0 ")}function Hie(n,t){if(n&1&&(ot(0),Il(1,"date"),It(2,Uie,1,0,"br")(3,zie,1,0),ot(4),Il(5,"date")),n&2){let e=t.row,i=Ae(3);Ei(" ",pp(1,3,e.dateTime,"dd.MM.yyyy")," "),xe(2),Kt(i.compactView()?2:3),xe(2),Ei(" ",pp(5,6,e.dateTime,"HH:mm:ss")," ")}}function jie(n,t){n&1&&(ge(0,"ngx-datatable-column",25),It(1,Hie,6,9,"ng-template",23),ye())}function Wie(n,t){if(n&1&&(ge(0,"b"),ot(1),ye(),it(2,"br")),n&2){let e=Ae().row;xe(),Kr(e.affectedElement)}}function Gie(n,t){if(n&1&&(It(0,Wie,3,1),ot(1)),n&2){let e=t.row,i=Ae(3);Kt(i.hideElementInfo()?-1:0),xe(),Ei(" ",e.notification," ")}}function $ie(n,t){n&1&&(ge(0,"ngx-datatable-column",26),It(1,Gie,2,2,"ng-template",23),ye())}function qie(n,t){if(n&1&&(ge(0,"b"),ot(1),ye()),n&2){let e=t.row;xe(),Kr(e.affectedElement)}}function Xie(n,t){if(n&1&&ot(0),n&2){let e=t.row;Ei(" ",e.notification," ")}}function Yie(n,t){n&1&&(Ko(0),ge(1,"ngx-datatable-column",31),It(2,qie,2,1,"ng-template",23),ye(),ge(3,"ngx-datatable-column",26),It(4,Xie,1,1,"ng-template",23),ye(),Qo())}function Zie(n,t){if(n&1&&ot(0),n&2){let e=t.row;Ei(" ",e.notification," ")}}function Kie(n,t){n&1&&(ge(0,"ngx-datatable-column",26),It(1,Zie,1,1,"ng-template",23),ye())}function Qie(n,t){if(n&1&&It(0,Yie,5,0,"ng-container",29)(1,Kie,2,0,"ngx-datatable-column",30),n&2){let e=Ae(2);Le("ngIf",!e.hideElementInfo()),xe(),Le("ngIf",e.hideElementInfo())}}function Jie(n,t){n&1&&(ge(0,"button",33),So(),ge(1,"svg",34),it(2,"path",35),ye(),gu(),ge(3,"span",36),ot(4,"Inspect Notification Button"),ye()())}function ere(n,t){n&1&&(ge(0,"ngx-datatable-column",32),It(1,Jie,5,0,"ng-template",23),ye())}function tre(n,t){if(n&1){let e=An();ge(0,"div")(1,"ngx-datatable",21),yt("activate",function(r){mt(e);let s=Ae();return gt(s.onRowActivate(r))}),ge(2,"ngx-datatable-column",22),It(3,Nie,1,3,"ng-template",23),ye(),It(4,Vie,2,0,"ngx-datatable-column",24)(5,jie,2,0,"ngx-datatable-column",25)(6,$ie,2,0,"ngx-datatable-column",26)(7,Qie,2,2)(8,ere,2,0,"ngx-datatable-column",27),ye()()}if(n&2){let e=Ae();xe(),Le("rows",e.filteredNotifications()),xe(3),Kt(e.hideAssetInfo()?5:4),xe(2),Kt(e.compactView()?6:7),xe(2),Le("ngIf",e.isClickable())}}function nre(n,t){if(n&1){let e=An();ge(0,"lib-notification",39),yt("clickAction",function(r){mt(e);let s=Ae(2);return gt(s.notificationClickAction.emit(r))}),ye()}if(n&2){let e=t.$implicit,i=Ae(2);Le("notification",e)("isNotificationClickable",i.isClickable())("displayAssetInformation",!i.hideAssetInfo())("displayElementInformation",!i.hideElementInfo())}}function ire(n,t){n&1&&(ge(0,"div",38),ot(1,"No notifications available"),ye())}function rre(n,t){if(n&1&&(ge(0,"div"),ws(1,nre,1,4,"lib-notification",37,Pie,!1,ire,2,0,"div",38),ye()),n&2){let e=Ae();xe(),Cs(e.filteredNotifications())}}function sre(n,t){if(n&1){let e=An();ge(0,"div",40)(1,"lib-button",41),yt("clicked",function(){mt(e);let r=Ae();return gt(r.onLoadMore())}),ot(2," Load More "),ye()()}if(n&2){let e=Ae();xe(),Le("type","primary")("iconComponent",e.PlusIconComponent)("position","left")}}var DS=(()=>{class n{dataTableWrapper;notifications=_t([]);disableControls=_t(!1);hideAssetInfo=_t(!1);hideElementInfo=_t(!1);isClickable=_t(!0);defaultDateRange=_t("today");notificationClickAction=ji();loadMore=ji();dateRangeChanged=ji();compactView=mn(!1);mobileView=mn(!1);searchTerm=mn("");selectedRange=mn("today");searchTermValue="";rangeSelectorValue="today";AlarmIconComponent=Nl;PlusIconComponent=vS;ngOnInit(){let e=this.defaultDateRange();this.selectedRange.set(e),this.rangeSelectorValue=e}ngAfterViewInit(){new ResizeObserver(([i])=>{let r=i.contentRect.width;this.compactView.set(r<1e3&&r>=650),this.mobileView.set(r<650)}).observe(this.dataTableWrapper.nativeElement)}onRangeChange(){let e=this.rangeSelectorValue;this.selectedRange.set(e),this.dateRangeChanged.emit(e)}onLoadMore(){this.loadMore.emit()}onRowActivate(e){e.type==="click"&&this.navigateToNotificationElement(e.row)}navigateToNotificationElement(e){this.notificationClickAction.emit(e)}filteredNotifications=an(()=>{let e=Date.now(),i=e;switch(this.selectedRange()){case"lastHour":i=e-60*60*1e3;break;case"today":i=new Date().setHours(0,0,0,0);break;case"lastWeek":i=e-7*24*60*60*1e3;break;case"last30days":i=e-30*24*60*60*1e3;break}return this.notifications().filter(r=>new Date(r.dateTime).getTime()>=i).filter(r=>this.filterBySearchTerm(r,this.searchTerm()))});filterBySearchTerm=(e,i)=>i?Object.values(e).some(r=>r.toString().toLowerCase().includes(i.toLowerCase())):!0;getColorForNotificationStatus(e){return this.statusColorMap[e.status]}statusColorMap={healthy:"healthy",warn:"warn",critical:"critical"};static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-notification-table"]],viewQuery:function(i,r){if(i&1&&Bi(Iie,5),i&2){let s;jn(s=Wn())&&(r.dataTableWrapper=s.first)}},inputs:{notifications:[1,"notifications"],disableControls:[1,"disableControls"],hideAssetInfo:[1,"hideAssetInfo"],hideElementInfo:[1,"hideElementInfo"],isClickable:[1,"isClickable"],defaultDateRange:[1,"defaultDateRange"]},outputs:{notificationClickAction:"notificationClickAction",loadMore:"loadMore",dateRangeChanged:"dateRangeChanged"},decls:6,vars:3,consts:[["dataTableWrapper",""],["id","datatable-wrapper"],["class","mt-2 w-full flex justify-center",4,"ngIf"],["id","notification-overview-toolbar",1,"flex","content-between","h-10","mb-2"],[1,"h-full","relative"],[1,"absolute","inset-y-0","start-0","flex","items-center","ps-3.5","pointer-events-none"],[3,"color","size"],["id","timeRange","name","timeRange",1,"block","cursor-pointer","w-full","p-2.5","bg-gray-50","w-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","change","ngModel"],["value","lastHour"],["value","today"],["value","lastWeek"],["value","last30days"],[1,"h-full","w-100"],[1,"h-10","w-full","block","mb-2"],["for","search",1,"mb-2","text-sm","font-medium","text-gray-900","sr-only"],[1,"relative","h-full"],["type","search","id","search","placeholder","Search",1,"h-full","block","w-full","px-4","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","ngModel"],[1,"absolute","inset-y-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","search","placeholder","Search",1,"h-full","block","w-full","px-4","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","ngModel"],["rowHeight","auto","columnMode","force",3,"activate","rows"],["name","Condition","minWidth","150","canAutoResize","false"],["ngx-datatable-cell-template",""],["name","Asset & Time","width","1"],["name","Time","width","1"],["name","Notification"],["resizeable","false","width","50","canAutoResize","false",4,"ngIf"],[3,"color","iconComponent","text"],[4,"ngIf"],["name","Notification",4,"ngIf"],["name","Affected Element"],["resizeable","false","width","50","canAutoResize","false"],["type","button",1,"text-primary","bg-transparent","p-1","hover:text-gray-400","cursor-pointer","font-medium","rounded-full","text-sm","text-center","inline-flex","items-center","me-2"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m9 5 7 7-7 7"],[1,"sr-only"],[3,"notification","isNotificationClickable","displayAssetInformation","displayElementInformation"],[1,"empty-table-message"],[3,"clickAction","notification","isNotificationClickable","displayAssetInformation","displayElementInformation"],[1,"mt-2","w-full","flex","justify-center"],[1,"justify-between",3,"clicked","type","iconComponent","position"]],template:function(i,r){i&1&&(It(0,Lie,15,5),ge(1,"div",1,0),It(3,tre,9,4,"div")(4,rre,4,1,"div")(5,sre,3,3,"div",2),ye()),i&2&&(Kt(r.disableControls()?-1:0),xe(3),Kt(r.mobileView()?4:3),xe(2),Le("ngIf",!r.disableControls()&&r.filteredNotifications().length>0))},dependencies:[Nt,el,Ov,Mu,pS,nH,rH,Bh,mS,Qg,uS,Sp,p_,oH,IH,DH,tR,eR,Oh,PH,gS,Ll],styles:["#notification-overview-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between}  ngx-datatable   .ngx-datatable .datatable-body-row:hover{background-color:#f5f5f5;cursor:pointer}  ngx-datatable .datatable-header{background-color:#f2f2f2;border-bottom:solid .25rem white}  ngx-datatable .datatable-body-row{border-bottom:#F2F2F2 2px solid;padding:0 1rem;cursor:pointer;transition:all .3s ease}  ngx-datatable .datatable-body-row:hover{background-color:#f2f2f2}  ngx-datatable .datatable-body-cell{padding:1rem 0}  ngx-datatable .datatable-header-cell,   ngx-datatable .datatable-body-cell{vertical-align:middle;align-content:center}  ngx-datatable .datatable-header{height:auto!important}  ngx-datatable .datatable-header-cell{padding:1rem}  ngx-datatable .empty-row{text-align:center;margin-top:.5rem}#timeRange[_ngcontent-%COMP%]{padding-left:2.5rem;padding-right:1.75rem}.empty-table-message[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0})}return n})();var vR=$m(rR());var IS=(()=>{class n{constructor(e,i){this.el=e,this._zone=i,this.updateChange=new en(!0),this.chartInstance=new en}ngOnChanges(e){let i=e.update?.currentValue;(e.options||i)&&(this.wrappedUpdateOrCreateChart(),i&&this.updateChange.emit(!1))}wrappedUpdateOrCreateChart(){this.runOutsideAngular?this._zone.runOutsideAngular(()=>{this.updateOrCreateChart()}):this.updateOrCreateChart()}updateOrCreateChart(){this.chart?.update?this.chart.update(this.options,!0,this.oneToOne||!1):(this.chart=this.Highcharts[this.constructorType||"chart"](this.el.nativeElement,this.options,this.callbackFunction||null),this.chartInstance.emit(this.chart))}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=null,this.chartInstance.emit(this.chart))}static{this.\u0275fac=function(i){return new(i||n)(En(Ar),En(xr))}}static{this.\u0275cmp=bt({type:n,selectors:[["highcharts-chart"]],inputs:{Highcharts:"Highcharts",constructorType:"constructorType",callbackFunction:"callbackFunction",oneToOne:"oneToOne",runOutsideAngular:"runOutsideAngular",options:"options",update:"update"},outputs:{updateChange:"updateChange",chartInstance:"chartInstance"},standalone:!1,features:[zs],decls:0,vars:0,template:function(i,r){},encapsulation:2})}}return n})(),PS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Yo({type:n})}static{this.\u0275inj=Xo({})}}return n})();var yi=$m($H(),1);var gR=yi.Matrix;var yR=yi.MatrixTransposeView;var cEe=yi.default.Matrix?yi.default.Matrix:yi.Matrix;var qH=yi.solve;Tp();Tp();function HS(n,t){if(!rl(n)||!rl(t))throw new TypeError("x and y must be arrays");if(n.length!==t.length)throw new RangeError("x and y arrays must have the same length")}var jS=class n{constructor(){if(new.target===n)throw new Error("BaseRegression must be subclassed")}predict(t){if(typeof t=="number")return this._predict(t);if(rl(t)){let e=[];for(let i of t)e.push(this._predict(i));return e}else throw new TypeError("x must be a number or array")}_predict(t){throw new Error("_predict must be implemented")}train(){}toString(t){return""}toLaTeX(t){return""}score(t,e){HS(t,e);let i=t.length,r=new Array(i);for(let S=0;S<i;S++)r[S]=this._predict(t[S]);let s=0,o=0,a=0,u=0,h=0,p=0,v=0;for(let S=0;S<i;S++)s+=r[S],o+=e[S],h+=r[S]*r[S],p+=e[S]*e[S],v+=r[S]*e[S],e[S]!==0&&(a+=(e[S]-r[S])*(e[S]-r[S])/e[S]),u+=(e[S]-r[S])*(e[S]-r[S]);let x=(i*v-s*o)/Math.sqrt((i*h-s*s)*(i*p-o*o));return{r:x,r2:x*x,chi2:a,rmsd:Math.sqrt(u/i)}}};function WS(n,t){return n<0?(n=0-n,typeof t=="number"?`- ${n.toPrecision(t)}`:`- ${n.toString()}`):typeof t=="number"?n.toPrecision(t):n.toString()}var GS=class n extends jS{constructor(t,e,i,r={}){if(super(),t===!0)this.degree=e.degree,this.powers=e.powers,this.coefficients=e.coefficients;else{HS(t,e);let s=jre(t,e,i,r);this.degree=s.degree,this.powers=s.powers,this.coefficients=s.coefficients}}_predict(t){let e=0;for(let i=0;i<this.powers.length;i++)e+=this.coefficients[i]*t**this.powers[i];return e}toJSON(){return{name:"polynomialRegression",degree:this.degree,powers:this.powers,coefficients:this.coefficients}}toString(t){return this._toFormula(t,!1)}toLaTeX(t){return this._toFormula(t,!0)}_toFormula(t,e){let i="^",r="",s=" * ";e&&(i="^{",r="}",s="");let o="",a="";for(let u=0;u<this.coefficients.length;u++)a="",this.coefficients[u]!==0&&(this.powers[u]===0?a=WS(this.coefficients[u],t):this.powers[u]===1?a=`${WS(this.coefficients[u],t)+s}x`:a=`${WS(this.coefficients[u],t)+s}x${i}${this.powers[u]}${r}`,this.coefficients[u]>0&&u!==this.coefficients.length-1?a=` + ${a}`:u!==this.coefficients.length-1&&(a=` ${a}`)),o=a+o;return o.startsWith("+")&&(o=o.slice(1)),`f(x) = ${o}`}static load(t){if(t.name!=="polynomialRegression")throw new TypeError("not a polynomial regression model");return new n(!0,t)}};function jre(n,t,e,i={}){let r=n.length,{interceptAtZero:s=!1}=i,o=[];if(Array.isArray(e))o=e,s=!1;else if(typeof e=="number")if(s){o=new Array(e);for(let S=0;S<e;S++)o[S]=S+1}else{o=new Array(e+1);for(let S=0;S<=e;S++)o[S]=S}let a=o.length,u=new gR(r,a),h=new gR([t]);for(let S=0;S<a;S++)for(let D=0;D<r;D++)o[S]===0?u.set(D,S,1):u.set(D,S,n[D]**o[S]);let p=new yR(u),v=p.mmul(u),x=p.mmul(new yR(h));return{coefficients:qH(v,x).to1DArray(),degree:Math.max(...o),powers:o}}function $S(n,t,e){if(n.length!==t.length||n.length===0)return console.warn("Polynomial regression: Invalid input lengths.",{x:n,y:t}),[];try{let i=new GS(n,t,e);return i.coefficients.every(r=>Number.isFinite(r))?i.coefficients:(console.warn("Polynomial regression: Non-finite coefficients returned.",i.coefficients),[])}catch(i){return console.warn("Polynomial regression failed:",i),[]}}function XH(n,t,e=24){if(n.length!==t.length)throw new Error("x and y must be same length");let i=n.length;if(i===0)return{lower:[],upper:[],all:[]};let r=Math.min(...n),o=(Math.max(...n)-r)/e,a=Array(e).fill(null).map(()=>({}));for(let u=0;u<i;u++){let h=n[u],p=t[u],v=Math.min(Math.floor((h-r)/o),e-1),x=a[v];(!x.lower||p<x.lower[1])&&(x.lower=[h,p]),(!x.upper||p>x.upper[1])&&(x.upper=[h,p])}return{lower:a.flatMap(u=>u.lower?[u.lower]:[]),upper:a.flatMap(u=>u.upper?[u.upper]:[]),all:n.map((u,h)=>[u,t[h]])}}function YH(n,t){return n.map((e,i)=>[e[0],e[1],t[i][1]])}function qS(n,t,e,i=100){let r=[];for(let s=0;s<=i;s++){let o=t+s/i*(e-t),a=n.reduce((u,h,p)=>u+h*o**p,0);r.push([o,a])}return r}function Wre(n,t){if(n&1&&it(0,"highcharts-chart",0),n&2){let e=Ae();Le("Highcharts",e.Highcharts)("options",e.chartOptionsSignal())}}function Gre(n,t){n&1&&(ge(0,"div",1),ot(1,"No measurements available"),ye())}var ZH=(()=>{class n{Highcharts=vR;measurements=_t([]);warningThreshold=_t(50);criticalThreshold=_t(80);labelX=_t("Time");labelY=_t("Stiffness Change");chartTitle=_t("");regressionEnabled=_t(!0);regressionDegree=_t(3);chartOptionsSignal=an(()=>this.buildChartOptions());buildChartOptions(){let e=this.measurements(),i=this.regressionEnabled(),r=this.groupByThresholds(e),s=this.getMinTimestamp(e),o=this.getMaxTimestamp(e),a=(o-s)*.3,u=o+a,h=Date.now(),p=this.computeYMax(e),v=this.createScatterSeries(r);return i&&e.length>1&&this.addRegressionSeries(v,e,s,o,u),{chart:{type:"scatter",zooming:{type:"xy"},height:"fit-content",events:{load:function(){if(!i)return;let x=Date.now();this.renderer.text("Forecast \u2192",this.plotLeft+this.xAxis[0].toPixels(x,!0)+5,this.plotTop+15).css({color:"#2B3057",fontSize:"12px",fontWeight:"bold"}).add()}}},exporting:{enabled:!0,buttons:{contextButton:{verticalAlign:"bottom",align:"left"}}},title:{text:this.chartTitle()},xAxis:{type:"datetime",title:{text:this.labelX()},max:u,plotLines:[this.createTodayPlotLine(h)]},yAxis:{min:0,max:p,title:{text:this.labelY()},plotLines:this.createThresholdPlotLines()},tooltip:{formatter(){let x=this.x?vR.dateFormat("%e. %b %Y",this.x):"N/A",S=typeof this.y=="number"?this.y.toFixed(2):"N/A";return this.series?.type==="arearange"?!1:`Date: <b>${x}</b><br/>Value: <b>${S}</b>`}},legend:{enabled:!0},plotOptions:{scatter:{marker:{radius:5,symbol:"circle",states:{hover:{enabled:!0}}}}},series:v}}groupByThresholds(e){let i=this.warningThreshold(),r=this.criticalThreshold(),s={healthy:[],warning:[],critical:[]};for(let{timestamp:o,value:a}of e){let h={x:new Date(o).getTime(),y:a};a<=i?s.healthy.push(h):a<=r?s.warning.push(h):s.critical.push(h)}return s}getMinTimestamp(e){return Math.min(...e.map(i=>new Date(i.timestamp).getTime()))}getMaxTimestamp(e){return Math.max(...e.map(i=>new Date(i.timestamp).getTime()))}computeYMax(e){let i=Math.max(...e.map(s=>s.value)),r=i*.2;return Math.max(120,Math.ceil((i+r)/10)*10)}createScatterSeries(e){return[{name:"Healthy",type:"scatter",data:e.healthy,color:"#76996E"},{name:"Warning",type:"scatter",data:e.warning,color:"#F4AC32"},{name:"Critical",type:"scatter",data:e.critical,color:"#C42021"}]}addRegressionSeries(e,i,r,s,o){let a=i.map(Z=>new Date(Z.timestamp).getTime()),u=i.map(Z=>Z.value),{lower:h,upper:p,all:v}=XH(a,u,Math.min(a.length,24)),x=this.regressionDegree(),S=$S(v.map(Z=>Z[0]),v.map(Z=>Z[1]),x),D=$S(p.map(Z=>Z[0]),p.map(Z=>Z[1]),x),O=$S(h.map(Z=>Z[0]),h.map(Z=>Z[1]),x);e.push({type:"spline",name:"Trendline",data:qS(S,r,o,50),color:"#2B3057",dashStyle:"ShortDash",marker:{enabled:!1},enableMouseTracking:!1,states:{hover:{lineWidth:0}}});let N=qS(O,s,o,50),T=qS(D,s,o,50),j=YH(N,T);e.push({type:"arearange",name:"Confidence Interval",data:j,color:"#6B9AC4",fillOpacity:.3,lineWidth:0,enableMouseTracking:!1,marker:{enabled:!1}})}createTodayPlotLine(e){return{color:"#2B3057",width:2,value:e,zIndex:20,dashStyle:"Dash",label:{text:"Today",rotation:0,align:"right",x:-5,y:15,style:{color:"#2B3057",fontWeight:"bold"}}}}createThresholdPlotLines(){return[{color:"#F4AC32",width:2,value:this.warningThreshold(),dashStyle:"Dash",label:{text:"Warning",align:"right",style:{color:"#F4AC32"}}},{color:"#C42021",width:2,value:this.criticalThreshold(),dashStyle:"Dash",label:{text:"Critical",align:"right",style:{color:"#C42021"}}}]}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-health-scatter-plot"]],inputs:{measurements:[1,"measurements"],warningThreshold:[1,"warningThreshold"],criticalThreshold:[1,"criticalThreshold"],labelX:[1,"labelX"],labelY:[1,"labelY"],chartTitle:[1,"chartTitle"],regressionEnabled:[1,"regressionEnabled"],regressionDegree:[1,"regressionDegree"]},decls:2,vars:1,consts:[[1,"w-full","block",3,"Highcharts","options"],[1,"text-center"]],template:function(i,r){i&1&&It(0,Wre,1,2,"highcharts-chart",0)(1,Gre,2,0,"div",1),i&2&&Kt(r.measurements().length>0?0:1)},dependencies:[Nt,PS,IS],encapsulation:2,changeDetection:0})}return n})();function $re(n,t){if(n&1&&(ge(0,"lib-info-box",5)(1,"a",12)(2,"lib-button",13),ot(3," Contact Engineer "),ye()()()),n&2){let e=Ae();Le("description",e.getWarnDescriptionForType(e.type())),xe(2),Le("iconComponent",e.EnvelopeIconComponent)("position","left")("type","warn")("fullWidth",!0)}}function qre(n,t){if(n&1&&(ge(0,"lib-info-box",6)(1,"a",12)(2,"lib-button",13),ot(3," Contact Engineer "),ye()()()),n&2){let e=Ae();Le("description",e.getCriticalDescriptionForType(e.type())),xe(2),Le("iconComponent",e.EnvelopeIconComponent)("position","left")("type","critical")("fullWidth",!0)}}var KH=(()=>{class n{type=_t();id=_t();detail=_t(null);notifications=_t([]);measurements=_t([]);closeSidebar=ji();close(){this.closeSidebar.emit()}AlarmIconComponent=Nl;EnvelopeIconComponent=xS;CloseIconComponent=bS;getCriticalDescriptionForType(e){return e===void 0?"":"Recent measurements indicate potential structural damage in "+(e==="sensor"?"the elements monitored by this sensor":"this bridge section")+". It is strongly recommended to arrange an assessment by a structural engineering office as soon as possible."}getWarnDescriptionForType(e){return e===void 0?"":`Measurements indicate slight deterioration for ${e==="sensor"?"the elements monitored by this sensor":"this bridge section"}. This could be due to temporary factors like humidity, temperature changes, or unusual traffic. If the status remains unchanged over a longer period (several months), a closer inspection might be advisable to rule out potential issues.`}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-asset-health-detail-sidebar"]],inputs:{type:[1,"type"],id:[1,"id"],detail:[1,"detail"],notifications:[1,"notifications"],measurements:[1,"measurements"]},outputs:{closeSidebar:"closeSidebar"},decls:17,vars:15,consts:[[1,"absolute","right-0","top-0","z-50","p-4","h-full","bg-white","shadow-xl","w-[500px]","transition-all","translate-x-full","duration-300","max-w-full","overflow-y-auto"],[1,"flex","justify-between","flex-nowrap","gap-4"],[1,"text-2xl","font-bold"],[1,"text-xl","mb-4","text-gray-500"],[3,"click","iconComponent","position"],["title","Unusual Condition","type","warn",1,"mb-4",3,"description"],["title","Critical Condition","type","critical",1,"mb-4",3,"description"],[1,"my-6"],[1,"text-base","font-semibold","mb-3"],[3,"notifications","disableControls","isClickable","hideAssetInfo","defaultDateRange"],[1,"h-[400px]"],[3,"measurements"],["href","mailto:civil-engineering-office@irmos.com"],[3,"iconComponent","position","type","fullWidth"]],template:function(i,r){if(i&1&&(ge(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),ot(4),ye(),ge(5,"h2",3),ot(6),ye()(),ge(7,"lib-button",4),yt("click",function(){return r.close()}),ye()(),It(8,$re,4,5,"lib-info-box",5)(9,qre,4,5,"lib-info-box",6),it(10,"hr",7),ge(11,"h4",8),ot(12),ye(),it(13,"lib-notification-table",9)(14,"hr",7),ge(15,"div",10),it(16,"lib-health-scatter-plot",11),ye()()),i&2){let s,o,a;Mi("show-sidebar",r.detail()),xe(4),Ei(" ",r.type()==="sensor"?"Sensor Details":"Section Details"," "),xe(2),Ei(" ",(s=r.detail())==null?null:s.name," "),xe(),Le("iconComponent",r.CloseIconComponent)("position","center"),xe(),Kt(((o=r.detail())==null?null:o.healthStatus)==="warn"?8:-1),xe(),Kt(((a=r.detail())==null?null:a.healthStatus)==="critical"?9:-1),xe(3),Ei(" ",r.type()==="sensor"?"Latest notifications of sensor":"Latest sensor notifications of bridge section"," "),xe(),Le("notifications",r.notifications())("disableControls",!0)("isClickable",!1)("hideAssetInfo",!0)("defaultDateRange","lastWeek"),xe(3),Le("measurements",r.measurements())}},dependencies:[Nt,Ll,DS,ZH,CS],styles:["div.show-sidebar[_ngcontent-%COMP%]{transform:translate(-100%)}.notification-base-information[_ngcontent-%COMP%]{min-width:120px;max-width:120px;width:120px}"]})}return n})();var Jr=$m(_R()),bR=$m(_R());function Xre(n,t){if(n&1){let e=An();ge(0,"div",0)(1,"h3",2),ot(2),ye(),ge(3,"div",3)(4,"b",4),ot(5,"Summary"),ye(),ge(6,"div",5)(7,"div",6)(8,"span"),ot(9,"Health"),ye(),ge(10,"span"),ot(11,"Traffic"),ye()(),ge(12,"div",7)(13,"span"),ot(14),ye(),ge(15,"span"),ot(16,"\u2013"),ye()()()(),ge(17,"lib-button",8),yt("click",function(){mt(e);let r=Ae();return gt(r.navigateToDetailViewForId())}),ot(18," Inspect "),ye()()}if(n&2){let e=Ae();Le("ngClass",e.location().state),xe(2),Kr(e.location().name),xe(12),Kr(e.location().healthPercentage+"%"),xe(3),Le("iconComponent",e.RightArrowIconComponent)("position","right")("fullWidth",!0)}}function Yre(n,t){if(n&1){let e=An();ge(0,"div",1)(1,"div",9)(2,"div")(3,"h3",2),ot(4),ye(),ge(5,"span",10),ot(6),ye()(),ge(7,"i",11),it(8,"lib-clock-icon",12),ot(9," 3 min ago "),ye()(),it(10,"hr"),ge(11,"div",13)(12,"div",14)(13,"b",15),ot(14,"Structural"),ye(),it(15,"lib-badge",16),ye(),ge(16,"div",14)(17,"b",15),ot(18,"Traffic"),ye(),it(19,"lib-badge",17),ye()(),it(20,"hr"),ge(21,"div",18)(22,"b",4),ot(23,"Summary"),ye(),ge(24,"div",5)(25,"div",19)(26,"span"),ot(27,"Health Score"),ye(),ge(28,"span"),ot(29,"Vibration"),ye(),ge(30,"span"),ot(31,"Traffic Score"),ye()(),ge(32,"div",20)(33,"span"),ot(34),ye(),ge(35,"span"),ot(36,"Normal"),ye(),ge(37,"span"),ot(38,"\u2013"),ye()()()(),it(39,"hr"),ge(40,"div",21)(41,"div",22)(42,"b",15),ot(43,"Recent anomaly"),ye(),ge(44,"div"),ot(45,"Stress peak exceeded on north span"),ye()(),ge(46,"div")(47,"b",15),ot(48,"Traffic Forecast"),ye(),ge(49,"div"),ot(50,"Delays \u2265 5 min between 08:00 \u2013 10:00"),ye()()(),ge(51,"div",23)(52,"lib-button",24),yt("click",function(){mt(e);let r=Ae();return gt(r.navigateToDetailViewForId())}),ot(53," Inspect "),ye()()()}if(n&2){let e=Ae();Le("ngClass",e.location().state),xe(4),Kr(e.location().name),xe(2),Kr(e.location().description),xe(2),Le("size","small")("color","primary"),xe(7),Le("color",e.location().state)("text",e.location().state),xe(4),Le("color",e.location().state),xe(15),Kr(e.location().healthPercentage+"%"),xe(18),Le("iconComponent",e.RightArrowIconComponent)("position","right")}}var JH=(()=>{class n{location=_t.required();mobileView=_t(!0);router=Ue(to);popoverClosed=ji();RightArrowIconComponent=_S;navigateToDetailViewForId(){this.router.navigate(["assets",this.location()?.id])}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-map-popover"]],inputs:{location:[1,"location"],mobileView:[1,"mobileView"]},outputs:{popoverClosed:"popoverClosed"},decls:2,vars:1,consts:[[1,"popover","p-2",3,"ngClass"],[1,"popover","min-w-[30rem]","rounded-lg","border-l-4","bg-white","p-4","shadow-xl","text-sm","space-y-3",3,"ngClass"],[1,"text-lg","font-bold","leading-tight"],[1,"flex","flex-col","items-center"],[1,"whitespace-nowrap"],[1,"flex-1"],[1,"grid","grid-cols-2","gap-4","text-xs","text-gray-500","font-medium","text-center","py-1","border-b"],[1,"grid","grid-cols-2","text-sm","font-semibold","text-center","py-1"],[3,"click","iconComponent","position","fullWidth"],[1,"flex","justify-between","items-start"],[1,"text-dark"],[1,"text-xs","text-dark","flex","items-center","gap-1"],[3,"size","color"],[1,"space-y-1"],[1,"flex","justify-between","items-center"],[1,"font-semibold"],[3,"color","text"],["text","Congested",3,"color"],[1,"flex","gap-4","items-center"],[1,"grid","grid-cols-3","text-xs","text-gray-500","font-medium","text-center","py-1","border-b"],[1,"grid","grid-cols-3","text-sm","font-semibold","text-center","py-1"],[1,"space-y-1","text-sm"],[1,"mb-2"],[1,"pt-2","flex","justify-end"],[3,"click","iconComponent","position"]],template:function(i,r){i&1&&It(0,Xre,19,6,"div",0)(1,Yre,54,11,"div",1),i&2&&Kt(r.mobileView()?0:1)},dependencies:[Nt,us,Oh,Ll,gS],styles:[".popover.healthy[_ngcontent-%COMP%]{border-color:#76996e}.popover.warn[_ngcontent-%COMP%]{border-color:#f4ac32}.popover.critical[_ngcontent-%COMP%]{border-color:#c42021}"]})}return n})();var Zre=(n,t,e)=>[n,t,e];function Kre(n,t){if(n&1&&(ge(0,"span"),it(1,"lib-bridge-icon",7),ye()),n&2){let e=Ae();xe(),Le("color","white")("size",e.size())}}function Qre(n,t){if(n&1&&(ge(0,"span"),it(1,"lib-house-icon",7),ye()),n&2){let e=Ae();xe(),Le("color","white")("size",e.size())}}function Jre(n,t){n&1&&(ge(0,"span"),ot(1,"\u2753"),ye())}var e4=(()=>{class n{type=_t("building");state=_t("healthy");size=_t("medium");static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-map-marker"]],inputs:{type:[1,"type"],state:[1,"state"],size:[1,"size"]},decls:8,vars:8,consts:[[1,"marker-wrapper",3,"ngClass"],[1,"marker-background"],[1,"pulse-circle"],[1,"marker-icon"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"color","size"]],template:function(i,r){i&1&&(ge(0,"div",0),it(1,"div",1)(2,"div",2),ge(3,"div",3),Ko(4,4),It(5,Kre,2,2,"span",5)(6,Qre,2,2,"span",5)(7,Jre,2,0,"span",6),Qo(),ye()()),i&2&&(Le("ngClass",Lg(4,Zre,r.type(),r.state(),r.size())),xe(4),Le("ngSwitch",r.type()),xe(),Le("ngSwitchCase","bridge"),xe(),Le("ngSwitchCase","building"))},dependencies:[Nt,us,Lv,qI,XI,yS,aH],styles:["@keyframes _ngcontent-%COMP%_ping{0%{transform:scale(1);opacity:1}75%,to{transform:scale(2);opacity:0}}.marker-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;border-radius:50%;color:#22c55e}.marker-wrapper.small[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;font-size:.9rem}.marker-wrapper.medium[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;font-size:1.2rem}.marker-wrapper.large[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem;font-size:1.6rem}.marker-wrapper.healthy[_ngcontent-%COMP%]{color:#76996e}.marker-wrapper.warn[_ngcontent-%COMP%]{color:#f4ac32}.marker-wrapper.critical[_ngcontent-%COMP%]{color:#c42021}.marker-background[_ngcontent-%COMP%]{position:absolute;inset:0;border-radius:9999px;background-color:currentColor;opacity:.8;z-index:0}.pulse-circle[_ngcontent-%COMP%]{position:absolute;inset:0;border-radius:9999px;background-color:currentColor;opacity:.6;animation:_ngcontent-%COMP%_ping 1.6s cubic-bezier(0,0,.2,1) infinite;z-index:0}.marker-icon[_ngcontent-%COMP%]{z-index:1}"],changeDetection:0})}return n})();var ese=["mapRef"],t4=(()=>{class n{ZOOM_CONTROL_MIN_WIDTH=750;locations=_t.required();currentLocation=_t();setCurrentLocation=ji();mapReady=mn(!1);mapWidth=mn(0);mapHeight=mn(0);popoverMobileView=an(()=>this.mapWidth()<=900||this.mapHeight()<=900);hasZoom=!1;resizeObserver;mapRefEl;map;center=an(()=>{let e=this.locations()[0];return e?Jr.latLng(e.lat,e.lng):Jr.latLng(46.8,8.3)});markerLayerGroup=null;viewContainerRef=Ue(Cr);injector=Ue(Vs);zoomControl=Jr.control.zoom({position:"topleft"});popoverRef;constructor(){Wi(()=>{let e=this.currentLocation();e!==void 0&&this.navigateToLocation(e)}),Wi(()=>{this.locations(),this.mapReady()&&(this.clearMarkers(),this.renderMarkers())}),Wi(()=>{this.mapWidth()>=this.ZOOM_CONTROL_MIN_WIDTH?this.addZoom():this.removeZoom()}),Wi(()=>{let e=this.popoverMobileView();this.popoverRef?.setInput("mobileView",e),this.popoverRef?.changeDetectorRef.detectChanges()})}addZoom(){this.hasZoom||(this.zoomControl.addTo(this.map),this.hasZoom=!0)}removeZoom(){this.zoomControl.remove(),this.hasZoom=!1}ngAfterViewInit(){this.initMap(),this.mapReady.set(!0),this.mapWidth.set(this.mapRefEl.nativeElement.offsetWidth),this.mapHeight.set(this.mapRefEl.nativeElement.offsetHeight),this.resizeObserver=new ResizeObserver(e=>{for(let i of e)this.mapWidth.set(i.contentRect.width),this.mapHeight.set(i.contentRect.height)}),this.resizeObserver.observe(this.mapRefEl.nativeElement)}navigateToLocation(e){if(this.isMapAtLocation(e)){this.openPopover(e,new bR.LatLng(e.lat,e.lng));return}this.map?.setView([e.lat,e.lng],this.map.getZoom(),{animate:!0,duration:.8,easeLinearity:.25}),setTimeout(()=>this.openPopover(e,new bR.LatLng(e.lat,e.lng)),800)}isMapAtLocation(e){let i=new Jr.LatLng(e.lat,e.lng),r=this.map?.getCenter();if(!r)return!1;let s=.1;return Math.abs(r.lat-i.lat)<s&&Math.abs(r.lng-i.lng)<s}initMap(){this.map=Jr.map(this.mapRefEl.nativeElement,{center:this.center(),zoom:8,zoomControl:!1}),Jr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map)}clearMarkers(){this.markerLayerGroup&&(this.markerLayerGroup.clearLayers(),this.map.removeLayer(this.markerLayerGroup))}renderMarkers(){let e=Jr.layerGroup();for(let i of this.locations()){let r=this.viewContainerRef.createComponent(e4);r.setInput("state",i.state),r.setInput("type",i.type),r.setInput("size","medium"),r.changeDetectorRef.detectChanges();let s=Jr.divIcon({html:r.location.nativeElement,className:"",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]}),o=Jr.marker([i.lat,i.lng],{icon:s});o.on("click",()=>this.openPopover(i,o.getLatLng())),e.addLayer(o)}e.addTo(this.map),this.markerLayerGroup=e}openPopover(e,i){this.popoverRef=this.viewContainerRef.createComponent(JH,{injector:this.injector}),this.popoverRef.setInput("location",e),this.popoverRef.setInput("mobileView",this.popoverMobileView()),this.popoverRef.changeDetectorRef.detectChanges();let r=this.popoverRef.location.nativeElement,s=Jr.popup({autoClose:!0,closeButton:!1,offset:Jr.point(0,-20),autoPan:!0,autoPanPaddingTopLeft:Jr.point(0,60),autoPanPaddingBottomRight:Jr.point(0,400),className:"leaflet-custom-popup"}).setLatLng(i).setContent(r).openOn(this.map);setTimeout(()=>{s.update()}),s.on("remove",()=>this.closePopOver(s)),this.popoverRef.instance.popoverClosed.subscribe(()=>{this.closePopOver(s)})}closePopOver(e){this.setCurrentLocation.emit(void 0),this.map.closePopup(e),this.popoverRef?.destroy()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-asset-map"]],viewQuery:function(i,r){if(i&1&&Bi(ese,7),i&2){let s;jn(s=Wn())&&(r.mapRefEl=s.first)}},inputs:{locations:[1,"locations"],currentLocation:[1,"currentLocation"]},outputs:{setCurrentLocation:"setCurrentLocation"},decls:3,vars:0,consts:[["mapRef",""],[1,"map-container","h-full"],[1,"leaflet-container","z-0","h-full","w-full"]],template:function(i,r){i&1&&(ge(0,"div",1),it(1,"div",2,0),ye())},dependencies:[Nt],styles:[".map-container[_ngcontent-%COMP%]{position:relative}  .leaflet-custom-popup .leaflet-popup-content-wrapper{border-radius:.75rem;box-shadow:none;background-color:#fff;padding:0;animation:none!important;transition:none!important}  .leaflet-custom-popup .leaflet-popup-content{width:max-content!important;margin:0;padding:0}"]})}return n})();var tse=$m(rR()),mTe=$m(n4());var YS=(()=>{class n{Highcharts=tse;healthPercentage=_t();labelFormat=_t("Health: {y}%");chartOptionsSignal=an(()=>{let e=this.healthPercentage()??0;return{chart:{type:"gauge",backgroundColor:"transparent",plotBorderWidth:0,plotShadow:!1,spacing:[0,0,0,0],margin:[10,0,15,0]},title:{text:""},tooltip:{enabled:!1},pane:{startAngle:-90,endAngle:89.9,center:["50%","65%"],background:[{backgroundColor:"transparent",borderWidth:0,shape:"arc",innerRadius:"60%",outerRadius:"100%"}],size:"100%"},yAxis:{min:0,max:100,tickInterval:25,tickPositions:[25,50,75],minorTicks:!1,tickPosition:"inside",tickColor:"#FFFFFF",tickLength:20,tickWidth:3,labels:{distance:15,style:{fontSize:"14px",fontWeight:"400"}},lineWidth:0,plotBands:[{from:75,to:100,color:"#76996E",thickness:20},{from:40,to:75,color:"#F4AC32",thickness:20},{from:0,to:40,color:"#C42021",thickness:20}]},series:[{name:"Health",type:"gauge",data:[e],dataLabels:{format:this.labelFormat(),useHTML:!0,backgroundColor:"transparent",borderWidth:0,y:25,style:{fontSize:"14px",fontWeight:"300",color:"#333"}},dial:{radius:"80%",backgroundColor:"#2B3057",baseWidth:10,baseLength:"0%",rearLength:"0%",topWidth:3},pivot:{backgroundColor:"#2B3057",radius:5}}],credits:{enabled:!1}}});static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-gauge-chart"]],inputs:{healthPercentage:[1,"healthPercentage"],labelFormat:[1,"labelFormat"]},decls:1,vars:2,consts:[[1,"w-full","h-full","block",3,"Highcharts","options"]],template:function(i,r){i&1&&it(0,"highcharts-chart",0),i&2&&Le("Highcharts",r.Highcharts)("options",r.chartOptionsSignal())},dependencies:[Nt,PS,IS],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;margin-bottom:-1rem}  highcharts-chart{width:100%;height:100%;display:block}"],changeDetection:0})}return n})();var nse=["card"];function ise(n,t){if(n&1&&(ge(0,"p",4),ot(1),ye()),n&2){let e=Ae();xe(),Ei(" ",e.assetHealthData().description,"")}}function rse(n,t){if(n&1){let e=An();ge(0,"lib-button",8),yt("click",function(){mt(e);let r=Ae();return gt(r.navigateTo.emit())}),ye()}if(n&2){let e=Ae();Le("type","secondary")("iconComponent",e.LocationIconComponent)("position","center")}}function sse(n,t){if(n&1){let e=An();ge(0,"lib-button",8),yt("click",function(){mt(e);let r=Ae();return gt(r.navigateTo.emit())}),ot(1,"Navigate To "),ye()}if(n&2){let e=Ae();Le("type","secondary")("iconComponent",e.LocationIconComponent)("position","right")}}var i4=(()=>{class n{card;assetHealthData=_t.required();navigateTo=ji();accessAssetDetailView=ji();mobileView=mn(!1);ngAfterViewInit(){new ResizeObserver(i=>{for(let r of i){let s=r.contentRect.width;this.mobileView.set(s<270)}}).observe(this.card.nativeElement)}LocationIconComponent=dH;RightArrowIconComponent=_S;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-asset-health-card"]],viewQuery:function(i,r){if(i&1&&Bi(nse,5),i&2){let s;jn(s=Wn())&&(r.card=s.first)}},inputs:{assetHealthData:[1,"assetHealthData"]},outputs:{navigateTo:"navigateTo",accessAssetDetailView:"accessAssetDetailView"},decls:12,vars:15,consts:[["card",""],[1,"card","pointer-events-auto","bg-white","border","border-gray-200","rounded-lg","shadow-sm","transition","px-2","pb-2","pt-1"],[1,"w-full","aspect-[2/1]","-mb-2",3,"healthPercentage","labelFormat"],[1,"title","overflow-hidden","overflow-ellipsis","whitespace-nowrap","mb-2","text-xl","font-bold","tracking-tight","text-gray-900"],[1,"description","mb-3","font-normal","text-gray-700","whitespace-nowrap","overflow-hidden","overflow-ellipsis"],[1,"card-actions","flex","justify-between","items-center"],[3,"type","iconComponent","position"],[3,"click","iconComponent","position"],[3,"click","type","iconComponent","position"]],template:function(i,r){if(i&1){let s=An();ge(0,"div",1,0),it(2,"lib-gauge-chart",2),ge(3,"div")(4,"h5",3),ot(5),ye(),It(6,ise,2,1,"p",4),ge(7,"div",5),It(8,rse,1,3,"lib-button",6)(9,sse,2,3,"lib-button",6),ge(10,"lib-button",7),yt("click",function(){return mt(s),gt(r.accessAssetDetailView.emit())}),ot(11,"Inspect "),ye()()()()}i&2&&(xe(2),Le("healthPercentage",r.assetHealthData().healthPercentage)("labelFormat","Health: {y}%"),xe(),Mi("px-3",!r.mobileView())("px-2",r.mobileView()),xe(),Mi("text-xl",!r.mobileView())("text-l",r.mobileView()),xe(),Ei(" ",r.assetHealthData().name,""),xe(),Kt(r.mobileView()?-1:6),xe(2),Kt(r.mobileView()?8:9),xe(2),Le("iconComponent",r.RightArrowIconComponent)("position","right"))},dependencies:[Ll,YS],styles:[".card[_ngcontent-%COMP%]{overflow:hidden;width:19rem}.card[_ngcontent-%COMP%]:hover   .description[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%]{max-height:10rem;white-space:normal}@media (max-width: 900px){.card[_ngcontent-%COMP%]{width:12rem}lib-button[_ngcontent-%COMP%]{width:100%}}.description[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{transition:all 1s ease}.title[_ngcontent-%COMP%]{max-height:1.75rem}.description[_ngcontent-%COMP%]{max-height:1.5rem}"],changeDetection:0})}return n})();var ose=(n,t)=>t.id;function ase(n,t){if(n&1){let e=An();ge(0,"lib-asset-health-card",2),yt("navigateTo",function(){let r=mt(e).$implicit,s=Ae();return gt(s.navigateToAssetOfId.emit(r.id))})("accessAssetDetailView",function(){let r=mt(e).$implicit,s=Ae();return gt(s.accessAssetDetailViewForId.emit(r.id))}),ye()}if(n&2){let e=t.$implicit;Le("assetHealthData",e)}}var r4=(()=>{class n{navigateToAssetOfId=ji();accessAssetDetailViewForId=ji();assetHealthData=_t.required();static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-asset-health-card-carousel"]],inputs:{assetHealthData:[1,"assetHealthData"]},outputs:{navigateToAssetOfId:"navigateToAssetOfId",accessAssetDetailViewForId:"accessAssetDetailViewForId"},decls:3,vars:0,consts:[[1,"map-carousel","max-w-full","absolute","bottom-0","px-8","pb-8","overflow-auto","flex","flex-nowrap","gap-4"],[1,"inline-block",3,"assetHealthData"],[1,"inline-block",3,"navigateTo","accessAssetDetailView","assetHealthData"]],template:function(i,r){i&1&&(ge(0,"div",0),ws(1,ase,1,1,"lib-asset-health-card",1,ose),ye()),i&2&&(xe(),Cs(r.assetHealthData()))},dependencies:[Nt,i4],styles:[".map-carousel[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{align-self:flex-end}"],changeDetection:0})}return n})();function lse(n,t){if(n&1&&(ge(0,"div",9)(1,"a",20)(2,"lib-button",21),ot(3," Contact Engineer "),ye()()()),n&2){let e=Ae();xe(2),Le("iconComponent",e.EnvelopeIconComponent)("position","left")("type",e.contactEngineerButtonTypeFromStatus(e.assetInformation().healthStatus))("fullWidth",!0)}}var s4=(()=>{class n{assetInformation=_t.required();collapseInputTrigger=_t();assetInformationExpanded=ji();pageExpanded=mn(!1);constructor(){Wi(()=>{this.collapseInputTrigger(),this.pageExpanded.set(!1)}),Wi(()=>{this.pageExpanded()&&this.assetInformationExpanded.emit()})}bridgeRecommendationForStatus(e){switch(e){case"healthy":return"All monitored data points to a stable and healthy bridge structure. No immediate action is required, but continued regular monitoring is recommended.";case"warn":return"Certain indicators suggest a decline in structural condition. It is recommended to consult with a structural engineering office to further evaluate the situation.";case"critical":return"Critical anomalies have been detected in the structural integrity of the bridge. Immediate coordination with a structural engineering office is strongly advised to assess potential safety risks."}}getInfoTypeFromHealthStatus(e){return e==="healthy"?"info":e}healthStatusRecommendsContactEngineer(e){return e==="critical"||e==="warn"}contactEngineerButtonTypeFromStatus(e){return e==="healthy"?"warn":e}AlarmIconComponent=Nl;EnvelopeIconComponent=xS;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-asset-information-page"]],inputs:{assetInformation:[1,"assetInformation"],collapseInputTrigger:[1,"collapseInputTrigger"]},outputs:{assetInformationExpanded:"assetInformationExpanded"},decls:32,vars:14,consts:[["assetInformationPage",""],[1,"asset-information-page"],[1,"asset-information-page-container","bg-white","shadow-2xl","pointer-events-auto","rounded-lg"],["tabindex","0","role","navigation",1,"asset-information-page-header","bg-primary","w-full","cursor-pointer","flex","justify-center","items-center","gap-2",3,"click","keydown.enter"],[1,"mx-2",3,"color","iconComponent"],[1,"text-xl","font-bold","inline","content-center"],["size","medium",1,"content-center","transition-all","duration-300"],[1,"pt-4","px-4"],[3,"title","description","type"],[1,"flex","justify-center"],[1,"flex","gap-4","flex-wrap","items-start","p-4"],[1,"health-information","p-5","rounded-lg","bg-elevated-background","flex","flex-col","gap-0","items-center","w-fit","grow"],[1,"text-xl"],[1,"w-full","max-h-[170px]","aspect-[1.5/1]",3,"healthPercentage","labelFormat"],[1,"asset-information","p-5","rounded-lg","bg-elevated-background","flex","flex-col","gap-4","items-center","w-fit","grow"],[1,"asset-information-grid","grid","grid-cols-2","gap-2"],["color","secondary","text","Location"],["color","secondary","text","Construction Year"],["color","secondary","text","Material"],["color","secondary","text","Length"],["href","mailto:civil-engineering-office@irmos.com",1,"w-80","block"],[3,"iconComponent","position","type","fullWidth"]],template:function(i,r){if(i&1){let s=An();ge(0,"div",1,0)(2,"div",2)(3,"div",3),yt("click",function(){return mt(s),gt(r.pageExpanded.set(!r.pageExpanded()))})("keydown.enter",function(){return mt(s),gt(r.pageExpanded.set(!r.pageExpanded()))}),it(4,"lib-badge",4),ge(5,"h3",5),ot(6,"Bridge Information"),ye(),it(7,"lib-angle-down-icon",6),ye(),ge(8,"div",7)(9,"lib-info-box",8),It(10,lse,4,4,"div",9),ye()(),ge(11,"div",10)(12,"div",11)(13,"h5",12),ot(14,"Health Overview"),ye(),it(15,"lib-gauge-chart",13),ye(),ge(16,"div",14)(17,"h5",12),ot(18,"Asset Information"),ye(),ge(19,"div",15),it(20,"lib-badge",16),ge(21,"span"),ot(22),ye(),it(23,"lib-badge",17),ge(24,"span"),ot(25),ye(),it(26,"lib-badge",18),ge(27,"span"),ot(28),ye(),it(29,"lib-badge",19),ge(30,"span"),ot(31),ye()()()()()()}i&2&&(Mi("expanded",r.pageExpanded()),xe(4),Le("color",r.assetInformation().healthStatus)("iconComponent",r.AlarmIconComponent),xe(5),Le("title","Recommended Action")("description",r.bridgeRecommendationForStatus(r.assetInformation().healthStatus))("type",r.getInfoTypeFromHealthStatus(r.assetInformation().healthStatus)),xe(),Kt(r.healthStatusRecommendsContactEngineer(r.assetInformation().healthStatus)?10:-1),xe(5),Le("healthPercentage",r.assetInformation().healthPercentage)("labelFormat","Overall Health: {y}%"),xe(7),Kr(r.assetInformation().location),xe(3),Kr(r.assetInformation().constructionYear),xe(3),Kr(r.assetInformation().material),xe(3),Kr(r.assetInformation().length))},dependencies:[Nt,Jg,Oh,CS,Ll,YS],styles:[".asset-information-page[_ngcontent-%COMP%]{width:100%;transition:all .3s ease;position:absolute;bottom:0;padding:1rem;z-index:10;display:flex;justify-content:center;max-height:100%}.asset-information-page[_ngcontent-%COMP%]   lib-angle-down-icon[_ngcontent-%COMP%]{transform:rotate(-180deg)}.asset-information-page.expanded[_ngcontent-%COMP%]   lib-angle-down-icon[_ngcontent-%COMP%]{transform:rotate(0)}.asset-information-page.expanded[_ngcontent-%COMP%]   .asset-information-page-container[_ngcontent-%COMP%]{overflow-y:scroll}.asset-information-page[_ngcontent-%COMP%]:not(.expanded){padding:0 1rem;max-height:2.5rem;overflow:hidden}.asset-information-page-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;max-width:65rem;-ms-overflow-style:none;scrollbar-width:none}.asset-information-page-header[_ngcontent-%COMP%]{color:#fff;height:2.5rem}.asset-information-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(odd){background-color:#6b9ac4;color:#fff;padding:.25rem}"],changeDetection:0})}return n})();var UM="177",Ul={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Nc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},W4=0,lk=1,G4=2;var ck=1,zM=2,Nu=3,Rc=0,oa=1,zl=2,Rd=0,Lp=1,uk=2,dk=3,hk=4,$4=5,qh=100,q4=101,X4=102,Y4=103,Z4=104,K4=200,Q4=201,J4=202,e5=203,xM=204,wM=205,t5=206,n5=207,i5=208,r5=209,s5=210,o5=211,a5=212,l5=213,c5=214,HM=0,jM=1,WM=2,Np=3,GM=4,$M=5,qM=6,XM=7,fk=0,u5=1,d5=2,kd=0,h5=1,f5=2,p5=3,m5=4,g5=5,y5=6,v5=7,YR="attached",_5="detached",ZR=300,Wp=301,Gp=302,YM=303,ZM=304,rb=306,Xh=1e3,Eu=1001,by=1002,fo=1003,KM=1004;var $p=1005;var ia=1006,Ny=1007;var Oc=1008;var Fc=1009,pk=1010,mk=1011,Oy=1012,QM=1013,Qh=1014,Hl=1015,Fy=1016,JM=1017,e1=1018,By=1020,gk=35902,yk=1021,vk=1022,al=1023,xy=1026,Vy=1027,t1=1028,n1=1029,_k=1030,i1=1031;var r1=1033,sb=33776,ob=33777,ab=33778,lb=33779,s1=35840,o1=35841,a1=35842,l1=35843,c1=36196,u1=37492,d1=37496,h1=37808,f1=37809,p1=37810,m1=37811,g1=37812,y1=37813,v1=37814,_1=37815,b1=37816,x1=37817,w1=37818,C1=37819,S1=37820,M1=37821,cb=36492,E1=36494,T1=36495,bk=36283,A1=36284,D1=36285,I1=36286;var Op=2300,Fp=2301,bM=2302,KR=2400,QR=2401,JR=2402,b5=2500;var xk=0,ub=1,Uy=2,x5=3200,w5=3201;var wk=0,C5=1,Ld="",js="srgb",po="srgb-linear",P_="linear",dr="srgb";var kp=7680;var ek=519,S5=512,M5=513,E5=514,Ck=515,T5=516,A5=517,D5=518,I5=519,CM=35044;var Sk="300 es",Tu=2e3,R_=2001;var Au=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){let i=this._listeners;return i===void 0?!1:i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){let i=this._listeners;if(i===void 0)return;let r=i[t];if(r!==void 0){let s=r.indexOf(e);s!==-1&&r.splice(s,1)}}dispatchEvent(t){let e=this._listeners;if(e===void 0)return;let i=e[t.type];if(i!==void 0){t.target=this;let r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}},To=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],o4=1234567,D_=Math.PI/180,Bp=180/Math.PI;function Pc(){let n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(To[n&255]+To[n>>8&255]+To[n>>16&255]+To[n>>24&255]+"-"+To[t&255]+To[t>>8&255]+"-"+To[t>>16&15|64]+To[t>>24&255]+"-"+To[e&63|128]+To[e>>8&255]+"-"+To[e>>16&255]+To[e>>24&255]+To[i&255]+To[i>>8&255]+To[i>>16&255]+To[i>>24&255]).toLowerCase()}function Ri(n,t,e){return Math.max(t,Math.min(e,n))}function Mk(n,t){return(n%t+t)%t}function cse(n,t,e,i,r){return i+(n-t)*(r-i)/(e-t)}function use(n,t,e){return n!==t?(e-n)/(t-n):0}function I_(n,t,e){return(1-e)*n+e*t}function dse(n,t,e,i){return I_(n,t,1-Math.exp(-e*i))}function hse(n,t=1){return t-Math.abs(Mk(n,t*2)-t)}function fse(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function pse(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function mse(n,t){return n+Math.floor(Math.random()*(t-n+1))}function gse(n,t){return n+Math.random()*(t-n)}function yse(n){return n*(.5-Math.random())}function vse(n){n!==void 0&&(o4=n);let t=o4+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function _se(n){return n*D_}function bse(n){return n*Bp}function xse(n){return(n&n-1)===0&&n!==0}function wse(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Cse(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Sse(n,t,e,i,r){let s=Math.cos,o=Math.sin,a=s(e/2),u=o(e/2),h=s((t+i)/2),p=o((t+i)/2),v=s((t-i)/2),x=o((t-i)/2),S=s((i-t)/2),D=o((i-t)/2);switch(r){case"XYX":n.set(a*p,u*v,u*x,a*h);break;case"YZY":n.set(u*x,a*p,u*v,a*h);break;case"ZXZ":n.set(u*v,u*x,a*p,a*h);break;case"XZX":n.set(a*p,u*D,u*S,a*h);break;case"YXY":n.set(u*S,a*p,u*D,a*h);break;case"ZYZ":n.set(u*D,u*S,a*p,a*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Dc(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ur(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var db={DEG2RAD:D_,RAD2DEG:Bp,generateUUID:Pc,clamp:Ri,euclideanModulo:Mk,mapLinear:cse,inverseLerp:use,lerp:I_,damp:dse,pingpong:hse,smoothstep:fse,smootherstep:pse,randInt:mse,randFloat:gse,randFloatSpread:yse,seededRandom:vse,degToRad:_se,radToDeg:bse,isPowerOfTwo:xse,ceilPowerOfTwo:wse,floorPowerOfTwo:Cse,setQuaternionFromProperEuler:Sse,normalize:ur,denormalize:Dc},Yn=class n{constructor(t=0,e=0){n.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Ri(this.x,t.x,e.x),this.y=Ri(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=Ri(this.x,t,e),this.y=Ri(this.y,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Ri(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(Ri(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let i=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*i-o*r+t.x,this.y=s*r+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},ra=class{constructor(t=0,e=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=r}static slerpFlat(t,e,i,r,s,o,a){let u=i[r+0],h=i[r+1],p=i[r+2],v=i[r+3],x=s[o+0],S=s[o+1],D=s[o+2],O=s[o+3];if(a===0){t[e+0]=u,t[e+1]=h,t[e+2]=p,t[e+3]=v;return}if(a===1){t[e+0]=x,t[e+1]=S,t[e+2]=D,t[e+3]=O;return}if(v!==O||u!==x||h!==S||p!==D){let N=1-a,T=u*x+h*S+p*D+v*O,j=T>=0?1:-1,Z=1-T*T;if(Z>Number.EPSILON){let le=Math.sqrt(Z),K=Math.atan2(le,T*j);N=Math.sin(N*K)/le,a=Math.sin(a*K)/le}let G=a*j;if(u=u*N+x*G,h=h*N+S*G,p=p*N+D*G,v=v*N+O*G,N===1-a){let le=1/Math.sqrt(u*u+h*h+p*p+v*v);u*=le,h*=le,p*=le,v*=le}}t[e]=u,t[e+1]=h,t[e+2]=p,t[e+3]=v}static multiplyQuaternionsFlat(t,e,i,r,s,o){let a=i[r],u=i[r+1],h=i[r+2],p=i[r+3],v=s[o],x=s[o+1],S=s[o+2],D=s[o+3];return t[e]=a*D+p*v+u*S-h*x,t[e+1]=u*D+p*x+h*v-a*S,t[e+2]=h*D+p*S+a*x-u*v,t[e+3]=p*D-a*v-u*x-h*S,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){let i=t._x,r=t._y,s=t._z,o=t._order,a=Math.cos,u=Math.sin,h=a(i/2),p=a(r/2),v=a(s/2),x=u(i/2),S=u(r/2),D=u(s/2);switch(o){case"XYZ":this._x=x*p*v+h*S*D,this._y=h*S*v-x*p*D,this._z=h*p*D+x*S*v,this._w=h*p*v-x*S*D;break;case"YXZ":this._x=x*p*v+h*S*D,this._y=h*S*v-x*p*D,this._z=h*p*D-x*S*v,this._w=h*p*v+x*S*D;break;case"ZXY":this._x=x*p*v-h*S*D,this._y=h*S*v+x*p*D,this._z=h*p*D+x*S*v,this._w=h*p*v-x*S*D;break;case"ZYX":this._x=x*p*v-h*S*D,this._y=h*S*v+x*p*D,this._z=h*p*D-x*S*v,this._w=h*p*v+x*S*D;break;case"YZX":this._x=x*p*v+h*S*D,this._y=h*S*v+x*p*D,this._z=h*p*D-x*S*v,this._w=h*p*v-x*S*D;break;case"XZY":this._x=x*p*v-h*S*D,this._y=h*S*v-x*p*D,this._z=h*p*D+x*S*v,this._w=h*p*v+x*S*D;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,i=e[0],r=e[4],s=e[8],o=e[1],a=e[5],u=e[9],h=e[2],p=e[6],v=e[10],x=i+a+v;if(x>0){let S=.5/Math.sqrt(x+1);this._w=.25/S,this._x=(p-u)*S,this._y=(s-h)*S,this._z=(o-r)*S}else if(i>a&&i>v){let S=2*Math.sqrt(1+i-a-v);this._w=(p-u)/S,this._x=.25*S,this._y=(r+o)/S,this._z=(s+h)/S}else if(a>v){let S=2*Math.sqrt(1+a-i-v);this._w=(s-h)/S,this._x=(r+o)/S,this._y=.25*S,this._z=(u+p)/S}else{let S=2*Math.sqrt(1+v-i-a);this._w=(o-r)/S,this._x=(s+h)/S,this._y=(u+p)/S,this._z=.25*S}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ri(this.dot(t),-1,1)))}rotateTowards(t,e){let i=this.angleTo(t);if(i===0)return this;let r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let i=t._x,r=t._y,s=t._z,o=t._w,a=e._x,u=e._y,h=e._z,p=e._w;return this._x=i*p+o*a+r*h-s*u,this._y=r*p+o*u+s*a-i*h,this._z=s*p+o*h+i*u-r*a,this._w=o*p-i*a-r*u-s*h,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);let i=this._x,r=this._y,s=this._z,o=this._w,a=o*t._w+i*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;let u=1-a*a;if(u<=Number.EPSILON){let S=1-e;return this._w=S*o+e*this._w,this._x=S*i+e*this._x,this._y=S*r+e*this._y,this._z=S*s+e*this._z,this.normalize(),this}let h=Math.sqrt(u),p=Math.atan2(h,a),v=Math.sin((1-e)*p)/h,x=Math.sin(e*p)/h;return this._w=o*v+this._w*x,this._x=i*v+this._x*x,this._y=r*v+this._y*x,this._z=s*v+this._z*x,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){let t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(t),r*Math.cos(t),s*Math.sin(e),s*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},Ne=class n{constructor(t=0,e=0,i=0){n.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(a4.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(a4.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*r,this.y=s[1]*e+s[4]*i+s[7]*r,this.z=s[2]*e+s[5]*i+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(t){let e=this.x,i=this.y,r=this.z,s=t.x,o=t.y,a=t.z,u=t.w,h=2*(o*r-a*i),p=2*(a*e-s*r),v=2*(s*i-o*e);return this.x=e+u*h+o*v-a*p,this.y=i+u*p+a*h-s*v,this.z=r+u*v+s*p-o*h,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r,this.y=s[1]*e+s[5]*i+s[9]*r,this.z=s[2]*e+s[6]*i+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Ri(this.x,t.x,e.x),this.y=Ri(this.y,t.y,e.y),this.z=Ri(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=Ri(this.x,t,e),this.y=Ri(this.y,t,e),this.z=Ri(this.z,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Ri(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let i=t.x,r=t.y,s=t.z,o=e.x,a=e.y,u=e.z;return this.x=r*u-s*a,this.y=s*o-i*u,this.z=i*a-r*o,this}projectOnVector(t){let e=t.lengthSq();if(e===0)return this.set(0,0,0);let i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return wR.copy(this).projectOnVector(t),this.sub(wR)}reflect(t){return this.sub(wR.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(Ri(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){let r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},wR=new Ne,a4=new ra,vi=class n{constructor(t,e,i,r,s,o,a,u,h){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,r,s,o,a,u,h)}set(t,e,i,r,s,o,a,u,h){let p=this.elements;return p[0]=t,p[1]=r,p[2]=a,p[3]=e,p[4]=s,p[5]=u,p[6]=i,p[7]=o,p[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,s=this.elements,o=i[0],a=i[3],u=i[6],h=i[1],p=i[4],v=i[7],x=i[2],S=i[5],D=i[8],O=r[0],N=r[3],T=r[6],j=r[1],Z=r[4],G=r[7],le=r[2],K=r[5],oe=r[8];return s[0]=o*O+a*j+u*le,s[3]=o*N+a*Z+u*K,s[6]=o*T+a*G+u*oe,s[1]=h*O+p*j+v*le,s[4]=h*N+p*Z+v*K,s[7]=h*T+p*G+v*oe,s[2]=x*O+S*j+D*le,s[5]=x*N+S*Z+D*K,s[8]=x*T+S*G+D*oe,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],h=t[7],p=t[8];return e*o*p-e*a*h-i*s*p+i*a*u+r*s*h-r*o*u}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],h=t[7],p=t[8],v=p*o-a*h,x=a*u-p*s,S=h*s-o*u,D=e*v+i*x+r*S;if(D===0)return this.set(0,0,0,0,0,0,0,0,0);let O=1/D;return t[0]=v*O,t[1]=(r*h-p*i)*O,t[2]=(a*i-r*o)*O,t[3]=x*O,t[4]=(p*e-r*u)*O,t[5]=(r*s-a*e)*O,t[6]=S*O,t[7]=(i*u-h*e)*O,t[8]=(o*e-i*s)*O,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,s,o,a){let u=Math.cos(s),h=Math.sin(s);return this.set(i*u,i*h,-i*(u*o+h*a)+o+t,-r*h,r*u,-r*(-h*o+u*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(CR.makeScale(t,e)),this}rotate(t){return this.premultiply(CR.makeRotation(-t)),this}translate(t,e){return this.premultiply(CR.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}},CR=new vi;function Ek(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function wy(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function P5(){let n=wy("canvas");return n.style.display="block",n}var l4={};function Vp(n){n in l4||(l4[n]=!0,console.warn(n))}function R5(n,t,e){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,e);break;default:i()}}setTimeout(s,e)})}function k5(n){let t=n.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function L5(n){let t=n.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}var c4=new vi().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),u4=new vi().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Mse(){let n={enabled:!0,workingColorSpace:po,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===dr&&(r.r=Td(r.r),r.g=Td(r.g),r.b=Td(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===dr&&(r.r=_y(r.r),r.g=_y(r.g),r.b=_y(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Ld?P_:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return Vp("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return Vp("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,s)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[po]:{primaries:t,whitePoint:i,transfer:P_,toXYZ:c4,fromXYZ:u4,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:js},outputColorSpaceConfig:{drawingBufferColorSpace:js}},[js]:{primaries:t,whitePoint:i,transfer:dr,toXYZ:c4,fromXYZ:u4,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:js}}}),n}var Gi=Mse();function Td(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function _y(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var oy,SM=class{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{oy===void 0&&(oy=wy("canvas")),oy.width=t.width,oy.height=t.height;let r=oy.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),i=oy}return i.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=wy("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);let r=i.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Td(s[o]/255)*255;return i.putImageData(r,0,0),e}else if(t.data){let e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(Td(e[i]/255)*255):e[i]=Td(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},Ese=0,Cy=class{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Ese++}),this.uuid=Pc(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){let e=this.data;return e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(SR(r[o].image)):s.push(SR(r[o]))}else s=SR(r);i.url=s}return e||(t.images[this.uuid]=i),i}};function SR(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?SM.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Tse=0,MR=new Ne,ll=(()=>{class n extends Au{constructor(e=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Eu,s=Eu,o=ia,a=Oc,u=al,h=Fc,p=n.DEFAULT_ANISOTROPY,v=Ld){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Tse++}),this.uuid=Pc(),this.name="",this.source=new Cy(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=h,this.offset=new Yn(0,0),this.repeat=new Yn(1,1),this.center=new Yn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=v,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(MR).x}get height(){return this.source.getSize(MR).y}get depth(){return this.source.getSize(MR).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,i){this.updateRanges.push({start:e,count:i})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(let i in e){let r=e[i];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${i}' has value of undefined.`);continue}let s=this[i];if(s===void 0){console.warn(`THREE.Texture.setValues(): property '${i}' does not exist.`);continue}s&&r&&s.isVector2&&r.isVector2||s&&r&&s.isVector3&&r.isVector3||s&&r&&s.isMatrix3&&r.isMatrix3?s.copy(r):this[i]=r}}toJSON(e){let i=e===void 0||typeof e=="string";if(!i&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ZR)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Xh:e.x=e.x-Math.floor(e.x);break;case Eu:e.x=e.x<0?0:1;break;case by:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Xh:e.y=e.y-Math.floor(e.y);break;case Eu:e.y=e.y<0?0:1;break;case by:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=ZR,n.DEFAULT_ANISOTROPY=1,n})(),sr=class n{constructor(t=0,e=0,i=0,r=1){n.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*i+o[11]*r+o[15]*s,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,s,u=t.elements,h=u[0],p=u[4],v=u[8],x=u[1],S=u[5],D=u[9],O=u[2],N=u[6],T=u[10];if(Math.abs(p-x)<.01&&Math.abs(v-O)<.01&&Math.abs(D-N)<.01){if(Math.abs(p+x)<.1&&Math.abs(v+O)<.1&&Math.abs(D+N)<.1&&Math.abs(h+S+T-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;let Z=(h+1)/2,G=(S+1)/2,le=(T+1)/2,K=(p+x)/4,oe=(v+O)/4,ue=(D+N)/4;return Z>G&&Z>le?Z<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(Z),r=K/i,s=oe/i):G>le?G<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(G),i=K/r,s=ue/r):le<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(le),i=oe/s,r=ue/s),this.set(i,r,s,e),this}let j=Math.sqrt((N-D)*(N-D)+(v-O)*(v-O)+(x-p)*(x-p));return Math.abs(j)<.001&&(j=1),this.x=(N-D)/j,this.y=(v-O)/j,this.z=(x-p)/j,this.w=Math.acos((h+S+T-1)/2),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Ri(this.x,t.x,e.x),this.y=Ri(this.y,t.y,e.y),this.z=Ri(this.z,t.z,e.z),this.w=Ri(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=Ri(this.x,t,e),this.y=Ri(this.y,t,e),this.z=Ri(this.z,t,e),this.w=Ri(this.w,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Ri(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},MM=class extends Au{constructor(t=1,e=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ia,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=i.depth,this.scissor=new sr(0,0,t,e),this.scissorTest=!1,this.viewport=new sr(0,0,t,e);let r={width:t,height:e,depth:i.depth},s=new ll(r);this.textures=[];let o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(t={}){let e={minFilter:ia,generateMipmaps:!1,flipY:!1,internalFormat:null};t.mapping!==void 0&&(e.mapping=t.mapping),t.wrapS!==void 0&&(e.wrapS=t.wrapS),t.wrapT!==void 0&&(e.wrapT=t.wrapT),t.wrapR!==void 0&&(e.wrapR=t.wrapR),t.magFilter!==void 0&&(e.magFilter=t.magFilter),t.minFilter!==void 0&&(e.minFilter=t.minFilter),t.format!==void 0&&(e.format=t.format),t.type!==void 0&&(e.type=t.type),t.anisotropy!==void 0&&(e.anisotropy=t.anisotropy),t.colorSpace!==void 0&&(e.colorSpace=t.colorSpace),t.flipY!==void 0&&(e.flipY=t.flipY),t.generateMipmaps!==void 0&&(e.generateMipmaps=t.generateMipmaps),t.internalFormat!==void 0&&(e.internalFormat=t.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(e)}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=i,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,i=t.textures.length;e<i;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;let r=Object.assign({},t.textures[e].image);this.textures[e].source=new Cy(r)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Du=class extends MM{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}},k_=class extends ll{constructor(t=null,e=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=fo,this.minFilter=fo,this.wrapR=Eu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}};var EM=class extends ll{constructor(t=null,e=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=fo,this.minFilter=fo,this.wrapR=Eu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var sa=class{constructor(t=new Ne(1/0,1/0,1/0),e=new Ne(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(Ec.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(Ec.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=Ec.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let i=t.geometry;if(i!==void 0){let s=i.getAttribute("position");if(e===!0&&s!==void 0&&t.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)t.isMesh===!0?t.getVertexPosition(o,Ec):Ec.fromBufferAttribute(s,o),Ec.applyMatrix4(t.matrixWorld),this.expandByPoint(Ec);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),ZS.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),ZS.copy(i.boundingBox)),ZS.applyMatrix4(t.matrixWorld),this.union(ZS)}let r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Ec),Ec.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(x_),KS.subVectors(this.max,x_),ay.subVectors(t.a,x_),ly.subVectors(t.b,x_),cy.subVectors(t.c,x_),Uh.subVectors(ly,ay),zh.subVectors(cy,ly),Dp.subVectors(ay,cy);let e=[0,-Uh.z,Uh.y,0,-zh.z,zh.y,0,-Dp.z,Dp.y,Uh.z,0,-Uh.x,zh.z,0,-zh.x,Dp.z,0,-Dp.x,-Uh.y,Uh.x,0,-zh.y,zh.x,0,-Dp.y,Dp.x,0];return!ER(e,ay,ly,cy,KS)||(e=[1,0,0,0,1,0,0,0,1],!ER(e,ay,ly,cy,KS))?!1:(QS.crossVectors(Uh,zh),e=[QS.x,QS.y,QS.z],ER(e,ay,ly,cy,KS))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Ec).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Ec).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(bd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),bd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),bd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),bd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),bd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),bd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),bd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),bd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(bd),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}},bd=[new Ne,new Ne,new Ne,new Ne,new Ne,new Ne,new Ne,new Ne],Ec=new Ne,ZS=new sa,ay=new Ne,ly=new Ne,cy=new Ne,Uh=new Ne,zh=new Ne,Dp=new Ne,x_=new Ne,KS=new Ne,QS=new Ne,Ip=new Ne;function ER(n,t,e,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Ip.fromArray(n,s);let a=r.x*Math.abs(Ip.x)+r.y*Math.abs(Ip.y)+r.z*Math.abs(Ip.z),u=t.dot(Ip),h=e.dot(Ip),p=i.dot(Ip);if(Math.max(-Math.max(u,h,p),Math.min(u,h,p))>a)return!1}return!0}var Ase=new sa,w_=new Ne,TR=new Ne,Da=class{constructor(t=new Ne,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let i=this.center;e!==void 0?i.copy(e):Ase.setFromPoints(t).getCenter(i);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;w_.subVectors(t,this.center);let e=w_.lengthSq();if(e>this.radius*this.radius){let i=Math.sqrt(e),r=(i-this.radius)*.5;this.center.addScaledVector(w_,r/i),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(TR.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(w_.copy(t.center).add(TR)),this.expandByPoint(w_.copy(t.center).sub(TR))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}},xd=new Ne,AR=new Ne,JS=new Ne,Hh=new Ne,DR=new Ne,eM=new Ne,IR=new Ne,Iu=class{constructor(t=new Ne,e=new Ne(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,xd)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=xd.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(xd.copy(this.origin).addScaledVector(this.direction,e),xd.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){AR.copy(t).add(e).multiplyScalar(.5),JS.copy(e).sub(t).normalize(),Hh.copy(this.origin).sub(AR);let s=t.distanceTo(e)*.5,o=-this.direction.dot(JS),a=Hh.dot(this.direction),u=-Hh.dot(JS),h=Hh.lengthSq(),p=Math.abs(1-o*o),v,x,S,D;if(p>0)if(v=o*u-a,x=o*a-u,D=s*p,v>=0)if(x>=-D)if(x<=D){let O=1/p;v*=O,x*=O,S=v*(v+o*x+2*a)+x*(o*v+x+2*u)+h}else x=s,v=Math.max(0,-(o*x+a)),S=-v*v+x*(x+2*u)+h;else x=-s,v=Math.max(0,-(o*x+a)),S=-v*v+x*(x+2*u)+h;else x<=-D?(v=Math.max(0,-(-o*s+a)),x=v>0?-s:Math.min(Math.max(-s,-u),s),S=-v*v+x*(x+2*u)+h):x<=D?(v=0,x=Math.min(Math.max(-s,-u),s),S=x*(x+2*u)+h):(v=Math.max(0,-(o*s+a)),x=v>0?s:Math.min(Math.max(-s,-u),s),S=-v*v+x*(x+2*u)+h);else x=o>0?-s:s,v=Math.max(0,-(o*x+a)),S=-v*v+x*(x+2*u)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,v),r&&r.copy(AR).addScaledVector(JS,x),S}intersectSphere(t,e){xd.subVectors(t.center,this.origin);let i=xd.dot(this.direction),r=xd.dot(xd)-i*i,s=t.radius*t.radius;if(r>s)return null;let o=Math.sqrt(s-r),a=i-o,u=i+o;return u<0?null:a<0?this.at(u,e):this.at(a,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){let i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,s,o,a,u,h=1/this.direction.x,p=1/this.direction.y,v=1/this.direction.z,x=this.origin;return h>=0?(i=(t.min.x-x.x)*h,r=(t.max.x-x.x)*h):(i=(t.max.x-x.x)*h,r=(t.min.x-x.x)*h),p>=0?(s=(t.min.y-x.y)*p,o=(t.max.y-x.y)*p):(s=(t.max.y-x.y)*p,o=(t.min.y-x.y)*p),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),v>=0?(a=(t.min.z-x.z)*v,u=(t.max.z-x.z)*v):(a=(t.max.z-x.z)*v,u=(t.min.z-x.z)*v),i>u||a>r)||((a>i||i!==i)&&(i=a),(u<r||r!==r)&&(r=u),r<0)?null:this.at(i>=0?i:r,e)}intersectsBox(t){return this.intersectBox(t,xd)!==null}intersectTriangle(t,e,i,r,s){DR.subVectors(e,t),eM.subVectors(i,t),IR.crossVectors(DR,eM);let o=this.direction.dot(IR),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Hh.subVectors(this.origin,t);let u=a*this.direction.dot(eM.crossVectors(Hh,eM));if(u<0)return null;let h=a*this.direction.dot(DR.cross(Hh));if(h<0||u+h>o)return null;let p=-a*Hh.dot(IR);return p<0?null:this.at(p/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},hi=class n{constructor(t,e,i,r,s,o,a,u,h,p,v,x,S,D,O,N){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,r,s,o,a,u,h,p,v,x,S,D,O,N)}set(t,e,i,r,s,o,a,u,h,p,v,x,S,D,O,N){let T=this.elements;return T[0]=t,T[4]=e,T[8]=i,T[12]=r,T[1]=s,T[5]=o,T[9]=a,T[13]=u,T[2]=h,T[6]=p,T[10]=v,T[14]=x,T[3]=S,T[7]=D,T[11]=O,T[15]=N,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){let e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){let e=this.elements,i=t.elements,r=1/uy.setFromMatrixColumn(t,0).length(),s=1/uy.setFromMatrixColumn(t,1).length(),o=1/uy.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[7]=0,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,i=t.x,r=t.y,s=t.z,o=Math.cos(i),a=Math.sin(i),u=Math.cos(r),h=Math.sin(r),p=Math.cos(s),v=Math.sin(s);if(t.order==="XYZ"){let x=o*p,S=o*v,D=a*p,O=a*v;e[0]=u*p,e[4]=-u*v,e[8]=h,e[1]=S+D*h,e[5]=x-O*h,e[9]=-a*u,e[2]=O-x*h,e[6]=D+S*h,e[10]=o*u}else if(t.order==="YXZ"){let x=u*p,S=u*v,D=h*p,O=h*v;e[0]=x+O*a,e[4]=D*a-S,e[8]=o*h,e[1]=o*v,e[5]=o*p,e[9]=-a,e[2]=S*a-D,e[6]=O+x*a,e[10]=o*u}else if(t.order==="ZXY"){let x=u*p,S=u*v,D=h*p,O=h*v;e[0]=x-O*a,e[4]=-o*v,e[8]=D+S*a,e[1]=S+D*a,e[5]=o*p,e[9]=O-x*a,e[2]=-o*h,e[6]=a,e[10]=o*u}else if(t.order==="ZYX"){let x=o*p,S=o*v,D=a*p,O=a*v;e[0]=u*p,e[4]=D*h-S,e[8]=x*h+O,e[1]=u*v,e[5]=O*h+x,e[9]=S*h-D,e[2]=-h,e[6]=a*u,e[10]=o*u}else if(t.order==="YZX"){let x=o*u,S=o*h,D=a*u,O=a*h;e[0]=u*p,e[4]=O-x*v,e[8]=D*v+S,e[1]=v,e[5]=o*p,e[9]=-a*p,e[2]=-h*p,e[6]=S*v+D,e[10]=x-O*v}else if(t.order==="XZY"){let x=o*u,S=o*h,D=a*u,O=a*h;e[0]=u*p,e[4]=-v,e[8]=h*p,e[1]=x*v+O,e[5]=o*p,e[9]=S*v-D,e[2]=D*v-S,e[6]=a*p,e[10]=O*v+x}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Dse,t,Ise)}lookAt(t,e,i){let r=this.elements;return sl.subVectors(t,e),sl.lengthSq()===0&&(sl.z=1),sl.normalize(),jh.crossVectors(i,sl),jh.lengthSq()===0&&(Math.abs(i.z)===1?sl.x+=1e-4:sl.z+=1e-4,sl.normalize(),jh.crossVectors(i,sl)),jh.normalize(),tM.crossVectors(sl,jh),r[0]=jh.x,r[4]=tM.x,r[8]=sl.x,r[1]=jh.y,r[5]=tM.y,r[9]=sl.y,r[2]=jh.z,r[6]=tM.z,r[10]=sl.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,s=this.elements,o=i[0],a=i[4],u=i[8],h=i[12],p=i[1],v=i[5],x=i[9],S=i[13],D=i[2],O=i[6],N=i[10],T=i[14],j=i[3],Z=i[7],G=i[11],le=i[15],K=r[0],oe=r[4],ue=r[8],te=r[12],V=r[1],se=r[5],we=r[9],he=r[13],je=r[2],ze=r[6],de=r[10],Re=r[14],me=r[3],$e=r[7],tt=r[11],xt=r[15];return s[0]=o*K+a*V+u*je+h*me,s[4]=o*oe+a*se+u*ze+h*$e,s[8]=o*ue+a*we+u*de+h*tt,s[12]=o*te+a*he+u*Re+h*xt,s[1]=p*K+v*V+x*je+S*me,s[5]=p*oe+v*se+x*ze+S*$e,s[9]=p*ue+v*we+x*de+S*tt,s[13]=p*te+v*he+x*Re+S*xt,s[2]=D*K+O*V+N*je+T*me,s[6]=D*oe+O*se+N*ze+T*$e,s[10]=D*ue+O*we+N*de+T*tt,s[14]=D*te+O*he+N*Re+T*xt,s[3]=j*K+Z*V+G*je+le*me,s[7]=j*oe+Z*se+G*ze+le*$e,s[11]=j*ue+Z*we+G*de+le*tt,s[15]=j*te+Z*he+G*Re+le*xt,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[4],r=t[8],s=t[12],o=t[1],a=t[5],u=t[9],h=t[13],p=t[2],v=t[6],x=t[10],S=t[14],D=t[3],O=t[7],N=t[11],T=t[15];return D*(+s*u*v-r*h*v-s*a*x+i*h*x+r*a*S-i*u*S)+O*(+e*u*S-e*h*x+s*o*x-r*o*S+r*h*p-s*u*p)+N*(+e*h*v-e*a*S-s*o*v+i*o*S+s*a*p-i*h*p)+T*(-r*a*p-e*u*v+e*a*x+r*o*v-i*o*x+i*u*p)}transpose(){let t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){let r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],h=t[7],p=t[8],v=t[9],x=t[10],S=t[11],D=t[12],O=t[13],N=t[14],T=t[15],j=v*N*h-O*x*h+O*u*S-a*N*S-v*u*T+a*x*T,Z=D*x*h-p*N*h-D*u*S+o*N*S+p*u*T-o*x*T,G=p*O*h-D*v*h+D*a*S-o*O*S-p*a*T+o*v*T,le=D*v*u-p*O*u-D*a*x+o*O*x+p*a*N-o*v*N,K=e*j+i*Z+r*G+s*le;if(K===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let oe=1/K;return t[0]=j*oe,t[1]=(O*x*s-v*N*s-O*r*S+i*N*S+v*r*T-i*x*T)*oe,t[2]=(a*N*s-O*u*s+O*r*h-i*N*h-a*r*T+i*u*T)*oe,t[3]=(v*u*s-a*x*s-v*r*h+i*x*h+a*r*S-i*u*S)*oe,t[4]=Z*oe,t[5]=(p*N*s-D*x*s+D*r*S-e*N*S-p*r*T+e*x*T)*oe,t[6]=(D*u*s-o*N*s-D*r*h+e*N*h+o*r*T-e*u*T)*oe,t[7]=(o*x*s-p*u*s+p*r*h-e*x*h-o*r*S+e*u*S)*oe,t[8]=G*oe,t[9]=(D*v*s-p*O*s-D*i*S+e*O*S+p*i*T-e*v*T)*oe,t[10]=(o*O*s-D*a*s+D*i*h-e*O*h-o*i*T+e*a*T)*oe,t[11]=(p*a*s-o*v*s-p*i*h+e*v*h+o*i*S-e*a*S)*oe,t[12]=le*oe,t[13]=(p*O*r-D*v*r+D*i*x-e*O*x-p*i*N+e*v*N)*oe,t[14]=(D*a*r-o*O*r-D*i*u+e*O*u+o*i*N-e*a*N)*oe,t[15]=(o*v*r-p*a*r+p*i*u-e*v*u-o*i*x+e*a*x)*oe,this}scale(t){let e=this.elements,i=t.x,r=t.y,s=t.z;return e[0]*=i,e[4]*=r,e[8]*=s,e[1]*=i,e[5]*=r,e[9]*=s,e[2]*=i,e[6]*=r,e[10]*=s,e[3]*=i,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let i=Math.cos(e),r=Math.sin(e),s=1-i,o=t.x,a=t.y,u=t.z,h=s*o,p=s*a;return this.set(h*o+i,h*a-r*u,h*u+r*a,0,h*a+r*u,p*a+i,p*u-r*o,0,h*u-r*a,p*u+r*o,s*u*u+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,s,o){return this.set(1,i,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){let r=this.elements,s=e._x,o=e._y,a=e._z,u=e._w,h=s+s,p=o+o,v=a+a,x=s*h,S=s*p,D=s*v,O=o*p,N=o*v,T=a*v,j=u*h,Z=u*p,G=u*v,le=i.x,K=i.y,oe=i.z;return r[0]=(1-(O+T))*le,r[1]=(S+G)*le,r[2]=(D-Z)*le,r[3]=0,r[4]=(S-G)*K,r[5]=(1-(x+T))*K,r[6]=(N+j)*K,r[7]=0,r[8]=(D+Z)*oe,r[9]=(N-j)*oe,r[10]=(1-(x+O))*oe,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){let r=this.elements,s=uy.set(r[0],r[1],r[2]).length(),o=uy.set(r[4],r[5],r[6]).length(),a=uy.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],Tc.copy(this);let h=1/s,p=1/o,v=1/a;return Tc.elements[0]*=h,Tc.elements[1]*=h,Tc.elements[2]*=h,Tc.elements[4]*=p,Tc.elements[5]*=p,Tc.elements[6]*=p,Tc.elements[8]*=v,Tc.elements[9]*=v,Tc.elements[10]*=v,e.setFromRotationMatrix(Tc),i.x=s,i.y=o,i.z=a,this}makePerspective(t,e,i,r,s,o,a=Tu){let u=this.elements,h=2*s/(e-t),p=2*s/(i-r),v=(e+t)/(e-t),x=(i+r)/(i-r),S,D;if(a===Tu)S=-(o+s)/(o-s),D=-2*o*s/(o-s);else if(a===R_)S=-o/(o-s),D=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return u[0]=h,u[4]=0,u[8]=v,u[12]=0,u[1]=0,u[5]=p,u[9]=x,u[13]=0,u[2]=0,u[6]=0,u[10]=S,u[14]=D,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(t,e,i,r,s,o,a=Tu){let u=this.elements,h=1/(e-t),p=1/(i-r),v=1/(o-s),x=(e+t)*h,S=(i+r)*p,D,O;if(a===Tu)D=(o+s)*v,O=-2*v;else if(a===R_)D=s*v,O=-1*v;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-x,u[1]=0,u[5]=2*p,u[9]=0,u[13]=-S,u[2]=0,u[6]=0,u[10]=O,u[14]=-D,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},uy=new Ne,Tc=new hi,Dse=new Ne(0,0,0),Ise=new Ne(1,1,1),jh=new Ne,tM=new Ne,sl=new Ne,d4=new hi,h4=new ra,Yh=(()=>{class n{constructor(e=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,r,s=this._order){return this._x=e,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,r=!0){let s=e.elements,o=s[0],a=s[4],u=s[8],h=s[1],p=s[5],v=s[9],x=s[2],S=s[6],D=s[10];switch(i){case"XYZ":this._y=Math.asin(Ri(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-v,D),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(S,p),this._z=0);break;case"YXZ":this._x=Math.asin(-Ri(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(u,D),this._z=Math.atan2(h,p)):(this._y=Math.atan2(-x,o),this._z=0);break;case"ZXY":this._x=Math.asin(Ri(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(-x,D),this._z=Math.atan2(-a,p)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-Ri(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(S,D),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-a,p));break;case"YZX":this._z=Math.asin(Ri(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-v,p),this._y=Math.atan2(-x,o)):(this._x=0,this._y=Math.atan2(u,D));break;case"XZY":this._z=Math.asin(-Ri(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(S,p),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-v,D),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,i,r){return d4.makeRotationFromQuaternion(e),this.setFromRotationMatrix(d4,i,r)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return h4.setFromEuler(this),this.setFromQuaternion(h4,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),Sy=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},Pse=0,f4=new Ne,dy=new ra,wd=new hi,nM=new Ne,C_=new Ne,Rse=new Ne,kse=new ra,p4=new Ne(1,0,0),m4=new Ne(0,1,0),g4=new Ne(0,0,1),y4={type:"added"},Lse={type:"removed"},hy={type:"childadded",child:null},PR={type:"childremoved",child:null},io=(()=>{class n extends Au{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Pse++}),this.uuid=Pc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let e=new Ne,i=new Yh,r=new ra,s=new Ne(1,1,1);function o(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new hi},normalMatrix:{value:new vi}}),this.matrix=new hi,this.matrixWorld=new hi,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Sy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return dy.setFromAxisAngle(e,i),this.quaternion.multiply(dy),this}rotateOnWorldAxis(e,i){return dy.setFromAxisAngle(e,i),this.quaternion.premultiply(dy),this}rotateX(e){return this.rotateOnAxis(p4,e)}rotateY(e){return this.rotateOnAxis(m4,e)}rotateZ(e){return this.rotateOnAxis(g4,e)}translateOnAxis(e,i){return f4.copy(e).applyQuaternion(this.quaternion),this.position.add(f4.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(p4,e)}translateY(e){return this.translateOnAxis(m4,e)}translateZ(e){return this.translateOnAxis(g4,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(wd.copy(this.matrixWorld).invert())}lookAt(e,i,r){e.isVector3?nM.copy(e):nM.set(e,i,r);let s=this.parent;this.updateWorldMatrix(!0,!1),C_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?wd.lookAt(C_,nM,this.up):wd.lookAt(nM,C_,this.up),this.quaternion.setFromRotationMatrix(wd),s&&(wd.extractRotation(s.matrixWorld),dy.setFromRotationMatrix(wd),this.quaternion.premultiply(dy.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(y4),hy.child=e,this.dispatchEvent(hy),hy.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(e);return i!==-1&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(Lse),PR.child=e,this.dispatchEvent(PR),PR.child=null),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),wd.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),wd.multiply(e.parent.matrixWorld)),e.applyMatrix4(wd),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(y4),hy.child=e,this.dispatchEvent(hy),hy.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let r=0,s=this.children.length;r<s;r++){let a=this.children[r].getObjectByProperty(e,i);if(a!==void 0)return a}}getObjectsByProperty(e,i,r=[]){this[e]===i&&r.push(this);let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(e,i,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(C_,e,Rse),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(C_,kse,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(e)}traverseAncestors(e){let i=this.parent;i!==null&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(e)}updateWorldMatrix(e,i){let r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(e){let i=e===void 0||typeof e=="string",r={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});let s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(u=>Mn(Ke({},u),{boundingBox:u.boundingBox?u.boundingBox.toJSON():void 0,boundingSphere:u.boundingSphere?u.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(u=>Ke({},u)),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(e),s.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function o(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);let u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){let h=u.shapes;if(Array.isArray(h))for(let p=0,v=h.length;p<v;p++){let x=h[p];o(e.shapes,x)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let u=[];for(let h=0,p=this.material.length;h<p;h++)u.push(o(e.materials,this.material[h]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){let h=this.animations[u];s.animations.push(o(e.animations,h))}}if(i){let u=a(e.geometries),h=a(e.materials),p=a(e.textures),v=a(e.images),x=a(e.shapes),S=a(e.skeletons),D=a(e.animations),O=a(e.nodes);u.length>0&&(r.geometries=u),h.length>0&&(r.materials=h),p.length>0&&(r.textures=p),v.length>0&&(r.images=v),x.length>0&&(r.shapes=x),S.length>0&&(r.skeletons=S),D.length>0&&(r.animations=D),O.length>0&&(r.nodes=O)}return r.object=s,r;function a(u){let h=[];for(let p in u){let v=u[p];delete v.metadata,h.push(v)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),i===!0)for(let r=0;r<e.children.length;r++){let s=e.children[r];this.add(s.clone())}return this}}return n.DEFAULT_UP=new Ne(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),Ac=new Ne,Cd=new Ne,RR=new Ne,Sd=new Ne,fy=new Ne,py=new Ne,v4=new Ne,kR=new Ne,LR=new Ne,NR=new Ne,OR=new sr,FR=new sr,BR=new sr,$h=class n{constructor(t=new Ne,e=new Ne,i=new Ne){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),Ac.subVectors(t,e),r.cross(Ac);let s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,i,r,s){Ac.subVectors(r,e),Cd.subVectors(i,e),RR.subVectors(t,e);let o=Ac.dot(Ac),a=Ac.dot(Cd),u=Ac.dot(RR),h=Cd.dot(Cd),p=Cd.dot(RR),v=o*h-a*a;if(v===0)return s.set(0,0,0),null;let x=1/v,S=(h*u-a*p)*x,D=(o*p-a*u)*x;return s.set(1-S-D,D,S)}static containsPoint(t,e,i,r){return this.getBarycoord(t,e,i,r,Sd)===null?!1:Sd.x>=0&&Sd.y>=0&&Sd.x+Sd.y<=1}static getInterpolation(t,e,i,r,s,o,a,u){return this.getBarycoord(t,e,i,r,Sd)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,Sd.x),u.addScaledVector(o,Sd.y),u.addScaledVector(a,Sd.z),u)}static getInterpolatedAttribute(t,e,i,r,s,o){return OR.setScalar(0),FR.setScalar(0),BR.setScalar(0),OR.fromBufferAttribute(t,e),FR.fromBufferAttribute(t,i),BR.fromBufferAttribute(t,r),o.setScalar(0),o.addScaledVector(OR,s.x),o.addScaledVector(FR,s.y),o.addScaledVector(BR,s.z),o}static isFrontFacing(t,e,i,r){return Ac.subVectors(i,e),Cd.subVectors(t,e),Ac.cross(Cd).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Ac.subVectors(this.c,this.b),Cd.subVectors(this.a,this.b),Ac.cross(Cd).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return n.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return n.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,r,s){return n.getInterpolation(t,this.a,this.b,this.c,e,i,r,s)}containsPoint(t){return n.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return n.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let i=this.a,r=this.b,s=this.c,o,a;fy.subVectors(r,i),py.subVectors(s,i),kR.subVectors(t,i);let u=fy.dot(kR),h=py.dot(kR);if(u<=0&&h<=0)return e.copy(i);LR.subVectors(t,r);let p=fy.dot(LR),v=py.dot(LR);if(p>=0&&v<=p)return e.copy(r);let x=u*v-p*h;if(x<=0&&u>=0&&p<=0)return o=u/(u-p),e.copy(i).addScaledVector(fy,o);NR.subVectors(t,s);let S=fy.dot(NR),D=py.dot(NR);if(D>=0&&S<=D)return e.copy(s);let O=S*h-u*D;if(O<=0&&h>=0&&D<=0)return a=h/(h-D),e.copy(i).addScaledVector(py,a);let N=p*D-S*v;if(N<=0&&v-p>=0&&S-D>=0)return v4.subVectors(s,r),a=(v-p)/(v-p+(S-D)),e.copy(r).addScaledVector(v4,a);let T=1/(N+O+x);return o=O*T,a=x*T,e.copy(i).addScaledVector(fy,o).addScaledVector(py,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},N5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wh={h:0,s:0,l:0},iM={h:0,s:0,l:0};function VR(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}var Nn=class{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){let r=t;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=js){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Gi.colorSpaceToWorking(this,e),this}setRGB(t,e,i,r=Gi.workingColorSpace){return this.r=t,this.g=e,this.b=i,Gi.colorSpaceToWorking(this,r),this}setHSL(t,e,i,r=Gi.workingColorSpace){if(t=Mk(t,1),e=Ri(e,0,1),i=Ri(i,0,1),e===0)this.r=this.g=this.b=i;else{let s=i<=.5?i*(1+e):i+e-i*e,o=2*i-s;this.r=VR(o,s,t+1/3),this.g=VR(o,s,t),this.b=VR(o,s,t-1/3)}return Gi.colorSpaceToWorking(this,r),this}setStyle(t,e=js){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let s,o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,e);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,e);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){let s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,e);if(o===6)return this.setHex(parseInt(s,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=js){let i=N5[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Td(t.r),this.g=Td(t.g),this.b=Td(t.b),this}copyLinearToSRGB(t){return this.r=_y(t.r),this.g=_y(t.g),this.b=_y(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=js){return Gi.workingToColorSpace(Ao.copy(this),t),Math.round(Ri(Ao.r*255,0,255))*65536+Math.round(Ri(Ao.g*255,0,255))*256+Math.round(Ri(Ao.b*255,0,255))}getHexString(t=js){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Gi.workingColorSpace){Gi.workingToColorSpace(Ao.copy(this),e);let i=Ao.r,r=Ao.g,s=Ao.b,o=Math.max(i,r,s),a=Math.min(i,r,s),u,h,p=(a+o)/2;if(a===o)u=0,h=0;else{let v=o-a;switch(h=p<=.5?v/(o+a):v/(2-o-a),o){case i:u=(r-s)/v+(r<s?6:0);break;case r:u=(s-i)/v+2;break;case s:u=(i-r)/v+4;break}u/=6}return t.h=u,t.s=h,t.l=p,t}getRGB(t,e=Gi.workingColorSpace){return Gi.workingToColorSpace(Ao.copy(this),e),t.r=Ao.r,t.g=Ao.g,t.b=Ao.b,t}getStyle(t=js){Gi.workingToColorSpace(Ao.copy(this),t);let e=Ao.r,i=Ao.g,r=Ao.b;return t!==js?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(t,e,i){return this.getHSL(Wh),this.setHSL(Wh.h+t,Wh.s+e,Wh.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Wh),t.getHSL(iM);let i=I_(Wh.h,iM.h,e),r=I_(Wh.s,iM.s,e),s=I_(Wh.l,iM.l,e);return this.setHSL(i,r,s),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let e=this.r,i=this.g,r=this.b,s=t.elements;return this.r=s[0]*e+s[3]*i+s[6]*r,this.g=s[1]*e+s[4]*i+s[7]*r,this.b=s[2]*e+s[5]*i+s[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Ao=new Nn;Nn.NAMES=N5;var Nse=0,Ia=class extends Au{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Nse++}),this.uuid=Pc(),this.name="",this.type="Material",this.blending=Lp,this.side=Rc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=xM,this.blendDst=wM,this.blendEquation=qh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Nn(0,0,0),this.blendAlpha=0,this.depthFunc=Np,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ek,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=kp,this.stencilZFail=kp,this.stencilZPass=kp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}let r=this[e];if(r===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Lp&&(i.blending=this.blending),this.side!==Rc&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==xM&&(i.blendSrc=this.blendSrc),this.blendDst!==wM&&(i.blendDst=this.blendDst),this.blendEquation!==qh&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Np&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ek&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==kp&&(i.stencilFail=this.stencilFail),this.stencilZFail!==kp&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==kp&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){let o=[];for(let a in s){let u=s[a];delete u.metadata,o.push(u)}return o}if(e){let s=r(t.textures),o=r(t.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,i=null;if(e!==null){let r=e.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=e[s].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}},kc=class extends Ia{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Nn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Yh,this.combine=fk,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}};var Es=new Ne,rM=new Yn,Ose=0,As=class{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Ose++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=CM,this.updateRanges=[],this.gpuType=Hl,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)rM.fromBufferAttribute(this,e),rM.applyMatrix3(t),this.setXY(e,rM.x,rM.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)Es.fromBufferAttribute(this,e),Es.applyMatrix3(t),this.setXYZ(e,Es.x,Es.y,Es.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)Es.fromBufferAttribute(this,e),Es.applyMatrix4(t),this.setXYZ(e,Es.x,Es.y,Es.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Es.fromBufferAttribute(this,e),Es.applyNormalMatrix(t),this.setXYZ(e,Es.x,Es.y,Es.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Es.fromBufferAttribute(this,e),Es.transformDirection(t),this.setXYZ(e,Es.x,Es.y,Es.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=Dc(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=ur(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Dc(e,this.array)),e}setX(t,e){return this.normalized&&(e=ur(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Dc(e,this.array)),e}setY(t,e){return this.normalized&&(e=ur(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Dc(e,this.array)),e}setZ(t,e){return this.normalized&&(e=ur(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Dc(e,this.array)),e}setW(t,e){return this.normalized&&(e=ur(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=ur(e,this.array),i=ur(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=ur(e,this.array),i=ur(i,this.array),r=ur(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,s){return t*=this.itemSize,this.normalized&&(e=ur(e,this.array),i=ur(i,this.array),r=ur(r,this.array),s=ur(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==CM&&(t.usage=this.usage),t}};var L_=class extends As{constructor(t,e,i){super(new Uint16Array(t),e,i)}};var N_=class extends As{constructor(t,e,i){super(new Uint32Array(t),e,i)}};var Do=class extends As{constructor(t,e,i){super(new Float32Array(t),e,i)}},Fse=0,Bl=new hi,UR=new io,my=new Ne,ol=new sa,S_=new sa,no=new Ne,Pa=class n extends Au{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Fse++}),this.uuid=Pc(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Ek(t)?N_:L_)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let s=new vi().getNormalMatrix(t);i.applyNormalMatrix(s),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Bl.makeRotationFromQuaternion(t),this.applyMatrix4(Bl),this}rotateX(t){return Bl.makeRotationX(t),this.applyMatrix4(Bl),this}rotateY(t){return Bl.makeRotationY(t),this.applyMatrix4(Bl),this}rotateZ(t){return Bl.makeRotationZ(t),this.applyMatrix4(Bl),this}translate(t,e,i){return Bl.makeTranslation(t,e,i),this.applyMatrix4(Bl),this}scale(t,e,i){return Bl.makeScale(t,e,i),this.applyMatrix4(Bl),this}lookAt(t){return UR.lookAt(t),UR.updateMatrix(),this.applyMatrix4(UR.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(my).negate(),this.translate(my.x,my.y,my.z),this}setFromPoints(t){let e=this.getAttribute("position");if(e===void 0){let i=[];for(let r=0,s=t.length;r<s;r++){let o=t[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Do(i,3))}else{let i=Math.min(t.length,e.count);for(let r=0;r<i;r++){let s=t[r];e.setXYZ(r,s.x,s.y,s.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new sa);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Ne(-1/0,-1/0,-1/0),new Ne(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,r=e.length;i<r;i++){let s=e[i];ol.setFromBufferAttribute(s),this.morphTargetsRelative?(no.addVectors(this.boundingBox.min,ol.min),this.boundingBox.expandByPoint(no),no.addVectors(this.boundingBox.max,ol.max),this.boundingBox.expandByPoint(no)):(this.boundingBox.expandByPoint(ol.min),this.boundingBox.expandByPoint(ol.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Da);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Ne,1/0);return}if(t){let i=this.boundingSphere.center;if(ol.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++){let a=e[s];S_.setFromBufferAttribute(a),this.morphTargetsRelative?(no.addVectors(ol.min,S_.min),ol.expandByPoint(no),no.addVectors(ol.max,S_.max),ol.expandByPoint(no)):(ol.expandByPoint(S_.min),ol.expandByPoint(S_.max))}ol.getCenter(i);let r=0;for(let s=0,o=t.count;s<o;s++)no.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(no));if(e)for(let s=0,o=e.length;s<o;s++){let a=e[s],u=this.morphTargetsRelative;for(let h=0,p=a.count;h<p;h++)no.fromBufferAttribute(a,h),u&&(my.fromBufferAttribute(t,h),no.add(my)),r=Math.max(r,i.distanceToSquared(no))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.position,r=e.normal,s=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new As(new Float32Array(4*i.count),4));let o=this.getAttribute("tangent"),a=[],u=[];for(let ue=0;ue<i.count;ue++)a[ue]=new Ne,u[ue]=new Ne;let h=new Ne,p=new Ne,v=new Ne,x=new Yn,S=new Yn,D=new Yn,O=new Ne,N=new Ne;function T(ue,te,V){h.fromBufferAttribute(i,ue),p.fromBufferAttribute(i,te),v.fromBufferAttribute(i,V),x.fromBufferAttribute(s,ue),S.fromBufferAttribute(s,te),D.fromBufferAttribute(s,V),p.sub(h),v.sub(h),S.sub(x),D.sub(x);let se=1/(S.x*D.y-D.x*S.y);isFinite(se)&&(O.copy(p).multiplyScalar(D.y).addScaledVector(v,-S.y).multiplyScalar(se),N.copy(v).multiplyScalar(S.x).addScaledVector(p,-D.x).multiplyScalar(se),a[ue].add(O),a[te].add(O),a[V].add(O),u[ue].add(N),u[te].add(N),u[V].add(N))}let j=this.groups;j.length===0&&(j=[{start:0,count:t.count}]);for(let ue=0,te=j.length;ue<te;++ue){let V=j[ue],se=V.start,we=V.count;for(let he=se,je=se+we;he<je;he+=3)T(t.getX(he+0),t.getX(he+1),t.getX(he+2))}let Z=new Ne,G=new Ne,le=new Ne,K=new Ne;function oe(ue){le.fromBufferAttribute(r,ue),K.copy(le);let te=a[ue];Z.copy(te),Z.sub(le.multiplyScalar(le.dot(te))).normalize(),G.crossVectors(K,te);let se=G.dot(u[ue])<0?-1:1;o.setXYZW(ue,Z.x,Z.y,Z.z,se)}for(let ue=0,te=j.length;ue<te;++ue){let V=j[ue],se=V.start,we=V.count;for(let he=se,je=se+we;he<je;he+=3)oe(t.getX(he+0)),oe(t.getX(he+1)),oe(t.getX(he+2))}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new As(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let x=0,S=i.count;x<S;x++)i.setXYZ(x,0,0,0);let r=new Ne,s=new Ne,o=new Ne,a=new Ne,u=new Ne,h=new Ne,p=new Ne,v=new Ne;if(t)for(let x=0,S=t.count;x<S;x+=3){let D=t.getX(x+0),O=t.getX(x+1),N=t.getX(x+2);r.fromBufferAttribute(e,D),s.fromBufferAttribute(e,O),o.fromBufferAttribute(e,N),p.subVectors(o,s),v.subVectors(r,s),p.cross(v),a.fromBufferAttribute(i,D),u.fromBufferAttribute(i,O),h.fromBufferAttribute(i,N),a.add(p),u.add(p),h.add(p),i.setXYZ(D,a.x,a.y,a.z),i.setXYZ(O,u.x,u.y,u.z),i.setXYZ(N,h.x,h.y,h.z)}else for(let x=0,S=e.count;x<S;x+=3)r.fromBufferAttribute(e,x+0),s.fromBufferAttribute(e,x+1),o.fromBufferAttribute(e,x+2),p.subVectors(o,s),v.subVectors(r,s),p.cross(v),i.setXYZ(x+0,p.x,p.y,p.z),i.setXYZ(x+1,p.x,p.y,p.z),i.setXYZ(x+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)no.fromBufferAttribute(t,e),no.normalize(),t.setXYZ(e,no.x,no.y,no.z)}toNonIndexed(){function t(a,u){let h=a.array,p=a.itemSize,v=a.normalized,x=new h.constructor(u.length*p),S=0,D=0;for(let O=0,N=u.length;O<N;O++){a.isInterleavedBufferAttribute?S=u[O]*a.data.stride+a.offset:S=u[O]*p;for(let T=0;T<p;T++)x[D++]=h[S++]}return new As(x,p,v)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let e=new n,i=this.index.array,r=this.attributes;for(let a in r){let u=r[a],h=t(u,i);e.setAttribute(a,h)}let s=this.morphAttributes;for(let a in s){let u=[],h=s[a];for(let p=0,v=h.length;p<v;p++){let x=h[p],S=t(x,i);u.push(S)}e.morphAttributes[a]=u}e.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let a=0,u=o.length;a<u;a++){let h=o[a];e.addGroup(h.start,h.count,h.materialIndex)}return e}toJSON(){let t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){let u=this.parameters;for(let h in u)u[h]!==void 0&&(t[h]=u[h]);return t}t.data={attributes:{}};let e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let i=this.attributes;for(let u in i){let h=i[u];t.data.attributes[u]=h.toJSON(t.data)}let r={},s=!1;for(let u in this.morphAttributes){let h=this.morphAttributes[u],p=[];for(let v=0,x=h.length;v<x;v++){let S=h[v];p.push(S.toJSON(t.data))}p.length>0&&(r[u]=p,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return a!==null&&(t.data.boundingSphere=a.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let i=t.index;i!==null&&this.setIndex(i.clone());let r=t.attributes;for(let h in r){let p=r[h];this.setAttribute(h,p.clone(e))}let s=t.morphAttributes;for(let h in s){let p=[],v=s[h];for(let x=0,S=v.length;x<S;x++)p.push(v[x].clone(e));this.morphAttributes[h]=p}this.morphTargetsRelative=t.morphTargetsRelative;let o=t.groups;for(let h=0,p=o.length;h<p;h++){let v=o[h];this.addGroup(v.start,v.count,v.materialIndex)}let a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());let u=t.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},_4=new hi,Pp=new Iu,sM=new Da,b4=new Ne,oM=new Ne,aM=new Ne,lM=new Ne,zR=new Ne,cM=new Ne,x4=new Ne,uM=new Ne,Ds=class extends io{constructor(t=new Pa,e=new kc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(t,e){let i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;e.fromBufferAttribute(r,t);let a=this.morphTargetInfluences;if(s&&a){cM.set(0,0,0);for(let u=0,h=s.length;u<h;u++){let p=a[u],v=s[u];p!==0&&(zR.fromBufferAttribute(v,t),o?cM.addScaledVector(zR,p):cM.addScaledVector(zR.sub(e),p))}e.add(cM)}return e}raycast(t,e){let i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),sM.copy(i.boundingSphere),sM.applyMatrix4(s),Pp.copy(t.ray).recast(t.near),!(sM.containsPoint(Pp.origin)===!1&&(Pp.intersectSphere(sM,b4)===null||Pp.origin.distanceToSquared(b4)>(t.far-t.near)**2))&&(_4.copy(s).invert(),Pp.copy(t.ray).applyMatrix4(_4),!(i.boundingBox!==null&&Pp.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,Pp)))}_computeIntersections(t,e,i){let r,s=this.geometry,o=this.material,a=s.index,u=s.attributes.position,h=s.attributes.uv,p=s.attributes.uv1,v=s.attributes.normal,x=s.groups,S=s.drawRange;if(a!==null)if(Array.isArray(o))for(let D=0,O=x.length;D<O;D++){let N=x[D],T=o[N.materialIndex],j=Math.max(N.start,S.start),Z=Math.min(a.count,Math.min(N.start+N.count,S.start+S.count));for(let G=j,le=Z;G<le;G+=3){let K=a.getX(G),oe=a.getX(G+1),ue=a.getX(G+2);r=dM(this,T,t,i,h,p,v,K,oe,ue),r&&(r.faceIndex=Math.floor(G/3),r.face.materialIndex=N.materialIndex,e.push(r))}}else{let D=Math.max(0,S.start),O=Math.min(a.count,S.start+S.count);for(let N=D,T=O;N<T;N+=3){let j=a.getX(N),Z=a.getX(N+1),G=a.getX(N+2);r=dM(this,o,t,i,h,p,v,j,Z,G),r&&(r.faceIndex=Math.floor(N/3),e.push(r))}}else if(u!==void 0)if(Array.isArray(o))for(let D=0,O=x.length;D<O;D++){let N=x[D],T=o[N.materialIndex],j=Math.max(N.start,S.start),Z=Math.min(u.count,Math.min(N.start+N.count,S.start+S.count));for(let G=j,le=Z;G<le;G+=3){let K=G,oe=G+1,ue=G+2;r=dM(this,T,t,i,h,p,v,K,oe,ue),r&&(r.faceIndex=Math.floor(G/3),r.face.materialIndex=N.materialIndex,e.push(r))}}else{let D=Math.max(0,S.start),O=Math.min(u.count,S.start+S.count);for(let N=D,T=O;N<T;N+=3){let j=N,Z=N+1,G=N+2;r=dM(this,o,t,i,h,p,v,j,Z,G),r&&(r.faceIndex=Math.floor(N/3),e.push(r))}}}};function Bse(n,t,e,i,r,s,o,a){let u;if(t.side===oa?u=i.intersectTriangle(o,s,r,!0,a):u=i.intersectTriangle(r,s,o,t.side===Rc,a),u===null)return null;uM.copy(a),uM.applyMatrix4(n.matrixWorld);let h=e.ray.origin.distanceTo(uM);return h<e.near||h>e.far?null:{distance:h,point:uM.clone(),object:n}}function dM(n,t,e,i,r,s,o,a,u,h){n.getVertexPosition(a,oM),n.getVertexPosition(u,aM),n.getVertexPosition(h,lM);let p=Bse(n,t,e,i,oM,aM,lM,x4);if(p){let v=new Ne;$h.getBarycoord(x4,oM,aM,lM,v),r&&(p.uv=$h.getInterpolatedAttribute(r,a,u,h,v,new Yn)),s&&(p.uv1=$h.getInterpolatedAttribute(s,a,u,h,v,new Yn)),o&&(p.normal=$h.getInterpolatedAttribute(o,a,u,h,v,new Ne),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));let x={a,b:u,c:h,normal:new Ne,materialIndex:0};$h.getNormal(oM,aM,lM,x.normal),p.face=x,p.barycoord=v}return p}var Zh=class n extends Pa{constructor(t=1,e=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};let a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);let u=[],h=[],p=[],v=[],x=0,S=0;D("z","y","x",-1,-1,i,e,t,o,s,0),D("z","y","x",1,-1,i,e,-t,o,s,1),D("x","z","y",1,1,t,i,e,r,o,2),D("x","z","y",1,-1,t,i,-e,r,o,3),D("x","y","z",1,-1,t,e,i,r,s,4),D("x","y","z",-1,-1,t,e,-i,r,s,5),this.setIndex(u),this.setAttribute("position",new Do(h,3)),this.setAttribute("normal",new Do(p,3)),this.setAttribute("uv",new Do(v,2));function D(O,N,T,j,Z,G,le,K,oe,ue,te){let V=G/oe,se=le/ue,we=G/2,he=le/2,je=K/2,ze=oe+1,de=ue+1,Re=0,me=0,$e=new Ne;for(let tt=0;tt<de;tt++){let xt=tt*se-he;for(let Tt=0;Tt<ze;Tt++){let ut=Tt*V-we;$e[O]=ut*j,$e[N]=xt*Z,$e[T]=je,h.push($e.x,$e.y,$e.z),$e[O]=0,$e[N]=0,$e[T]=K>0?1:-1,p.push($e.x,$e.y,$e.z),v.push(Tt/oe),v.push(1-tt/ue),Re+=1}}for(let tt=0;tt<ue;tt++)for(let xt=0;xt<oe;xt++){let Tt=x+xt+ze*tt,ut=x+xt+ze*(tt+1),Ie=x+(xt+1)+ze*(tt+1),at=x+(xt+1)+ze*tt;u.push(Tt,ut,at),u.push(ut,Ie,at),me+=6}a.addGroup(S,me,te),S+=me,x+=Re}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function qp(n){let t={};for(let e in n){t[e]={};for(let i in n[e]){let r=n[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=r.clone():Array.isArray(r)?t[e][i]=r.slice():t[e][i]=r}}return t}function Io(n){let t={};for(let e=0;e<n.length;e++){let i=qp(n[e]);for(let r in i)t[r]=i[r]}return t}function Vse(n){let t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function Tk(n){let t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Gi.workingColorSpace}var O5={clone:qp,merge:Io},Use=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,zse=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Lc=class extends Ia{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Use,this.fragmentShader=zse,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=qp(t.uniforms),this.uniformsGroups=Vse(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let r in this.uniforms){let o=this.uniforms[r].value;o&&o.isTexture?e.uniforms[r]={type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?e.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?e.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?e.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?e.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?e.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?e.uniforms[r]={type:"m4",value:o.toArray()}:e.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}},O_=class extends io{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new hi,this.projectionMatrix=new hi,this.projectionMatrixInverse=new hi,this.coordinateSystem=Tu}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Gh=new Ne,w4=new Yn,C4=new Yn,Ts=class extends O_{constructor(t=50,e=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=Bp*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(D_*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Bp*2*Math.atan(Math.tan(D_*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){Gh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Gh.x,Gh.y).multiplyScalar(-t/Gh.z),Gh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Gh.x,Gh.y).multiplyScalar(-t/Gh.z)}getViewSize(t,e){return this.getViewBounds(t,w4,C4),e.subVectors(C4,w4)}setViewOffset(t,e,i,r,s,o){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(D_*.5*this.fov)/this.zoom,i=2*e,r=this.aspect*i,s=-.5*r,o=this.view;if(this.view!==null&&this.view.enabled){let u=o.fullWidth,h=o.fullHeight;s+=o.offsetX*r/u,e-=o.offsetY*i/h,r*=o.width/u,i*=o.height/h}let a=this.filmOffset;a!==0&&(s+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},gy=-90,yy=1,TM=class extends io{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Ts(gy,yy,t,e);r.layers=this.layers,this.add(r);let s=new Ts(gy,yy,t,e);s.layers=this.layers,this.add(s);let o=new Ts(gy,yy,t,e);o.layers=this.layers,this.add(o);let a=new Ts(gy,yy,t,e);a.layers=this.layers,this.add(a);let u=new Ts(gy,yy,t,e);u.layers=this.layers,this.add(u);let h=new Ts(gy,yy,t,e);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){let t=this.coordinateSystem,e=this.children.concat(),[i,r,s,o,a,u]=e;for(let h of e)this.remove(h);if(t===Tu)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(t===R_)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(let h of e)this.add(h),h.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());let[s,o,a,u,h,p]=this.children,v=t.getRenderTarget(),x=t.getActiveCubeFace(),S=t.getActiveMipmapLevel(),D=t.xr.enabled;t.xr.enabled=!1;let O=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,r),t.render(e,s),t.setRenderTarget(i,1,r),t.render(e,o),t.setRenderTarget(i,2,r),t.render(e,a),t.setRenderTarget(i,3,r),t.render(e,u),t.setRenderTarget(i,4,r),t.render(e,h),i.texture.generateMipmaps=O,t.setRenderTarget(i,5,r),t.render(e,p),t.setRenderTarget(v,x,S),t.xr.enabled=D,i.texture.needsPMREMUpdate=!0}},F_=class extends ll{constructor(t=[],e=Wp,i,r,s,o,a,u,h,p){super(t,e,i,r,s,o,a,u,h,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},AM=class extends Du{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let i={width:t,height:t,depth:1},r=[i,i,i,i,i,i];this.texture=new F_(r),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Zh(5,5,5),s=new Lc({name:"CubemapFromEquirect",uniforms:qp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:oa,blending:Rd});s.uniforms.tEquirect.value=e;let o=new Ds(r,s),a=e.minFilter;return e.minFilter===Oc&&(e.minFilter=ia),new TM(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e=!0,i=!0,r=!0){let s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,i,r);t.setRenderTarget(s)}},Ic=class extends io{constructor(){super(),this.isGroup=!0,this.type="Group"}},Hse={type:"move"},My=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ic,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ic,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ne,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ne),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ic,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ne,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ne),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let r=null,s=null,o=null,a=this._targetRay,u=this._grip,h=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(h&&t.hand){o=!0;for(let O of t.hand.values()){let N=e.getJointPose(O,i),T=this._getHandJoint(h,O);N!==null&&(T.matrix.fromArray(N.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,T.jointRadius=N.radius),T.visible=N!==null}let p=h.joints["index-finger-tip"],v=h.joints["thumb-tip"],x=p.position.distanceTo(v.position),S=.02,D=.005;h.inputState.pinching&&x>S+D?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!h.inputState.pinching&&x<=S-D&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else u!==null&&t.gripSpace&&(s=e.getPose(t.gripSpace,i),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));a!==null&&(r=e.getPose(t.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Hse)))}return a!==null&&(a.visible=r!==null),u!==null&&(u.visible=s!==null),h!==null&&(h.visible=o!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let i=new Ic;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}};var Ey=class extends io{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Yh,this.environmentIntensity=1,this.environmentRotation=new Yh,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}},Ty=class{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=CM,this.updateRanges=[],this.version=0,this.uuid=Pc()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let r=0,s=this.stride;r<s;r++)this.array[t+r]=e.array[i+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Pc()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Pc()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},na=new Ne,Ay=class n{constructor(t,e,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)na.fromBufferAttribute(this,e),na.applyMatrix4(t),this.setXYZ(e,na.x,na.y,na.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)na.fromBufferAttribute(this,e),na.applyNormalMatrix(t),this.setXYZ(e,na.x,na.y,na.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)na.fromBufferAttribute(this,e),na.transformDirection(t),this.setXYZ(e,na.x,na.y,na.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=Dc(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=ur(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=ur(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=ur(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=ur(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=ur(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Dc(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Dc(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Dc(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Dc(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=ur(e,this.array),i=ur(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=ur(e,this.array),i=ur(i,this.array),r=ur(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this}setXYZW(t,e,i,r,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=ur(e,this.array),i=ur(i,this.array),r=ur(r,this.array),s=ur(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this.data.array[t+3]=s,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return new As(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new n(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var S4=new Ne,M4=new sr,E4=new sr,jse=new Ne,T4=new hi,hM=new Ne,HR=new Da,A4=new hi,jR=new Iu,B_=class extends Ds{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=YR,this.bindMatrix=new hi,this.bindMatrixInverse=new hi,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let t=this.geometry;this.boundingBox===null&&(this.boundingBox=new sa),this.boundingBox.makeEmpty();let e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,hM),this.boundingBox.expandByPoint(hM)}computeBoundingSphere(){let t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Da),this.boundingSphere.makeEmpty();let e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,hM),this.boundingSphere.expandByPoint(hM)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),HR.copy(this.boundingSphere),HR.applyMatrix4(r),t.ray.intersectsSphere(HR)!==!1&&(A4.copy(r).invert(),jR.copy(t.ray).applyMatrix4(A4),!(this.boundingBox!==null&&jR.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,jR)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let t=new sr,e=this.geometry.attributes.skinWeight;for(let i=0,r=e.count;i<r;i++){t.fromBufferAttribute(e,i);let s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===YR?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===_5?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){let i=this.skeleton,r=this.geometry;M4.fromBufferAttribute(r.attributes.skinIndex,t),E4.fromBufferAttribute(r.attributes.skinWeight,t),S4.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){let o=E4.getComponent(s);if(o!==0){let a=M4.getComponent(s);T4.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),e.addScaledVector(jse.copy(S4).applyMatrix4(T4),o)}}return e.applyMatrix4(this.bindMatrixInverse)}},Dy=class extends io{constructor(){super(),this.isBone=!0,this.type="Bone"}},V_=class extends ll{constructor(t=null,e=1,i=1,r,s,o,a,u,h=fo,p=fo,v,x){super(null,o,a,u,h,p,r,s,v,x),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},D4=new hi,Wse=new hi,U_=class n{constructor(t=[],e=[]){this.uuid=Pc(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new hi)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){let i=new hi;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){let i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){let i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let t=this.bones,e=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=t.length;s<o;s++){let a=t[s]?t[s].matrixWorld:Wse;D4.multiplyMatrices(a,e[s]),D4.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);let e=new Float32Array(t*t*4);e.set(this.boneMatrices);let i=new V_(e,t,t,al,Hl);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){let r=this.bones[e];if(r.name===t)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,r=t.bones.length;i<r;i++){let s=t.bones[i],o=e[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Dy),this.bones.push(o),this.boneInverses.push(new hi().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){let t={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;let e=this.bones,i=this.boneInverses;for(let r=0,s=e.length;r<s;r++){let o=e[r];t.bones.push(o.uuid);let a=i[r];t.boneInverses.push(a.toArray())}return t}},Kh=class extends As{constructor(t,e,i,r=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}},vy=new hi,I4=new hi,fM=[],P4=new sa,Gse=new hi,M_=new Ds,E_=new Da,z_=class extends Ds{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Kh(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Gse)}computeBoundingBox(){let t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new sa),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,vy),P4.copy(t.boundingBox).applyMatrix4(vy),this.boundingBox.union(P4)}computeBoundingSphere(){let t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new Da),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,vy),E_.copy(t.boundingSphere).applyMatrix4(vy),this.boundingSphere.union(E_)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){let i=e.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=t*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(t,e){let i=this.matrixWorld,r=this.count;if(M_.geometry=this.geometry,M_.material=this.material,M_.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),E_.copy(this.boundingSphere),E_.applyMatrix4(i),t.ray.intersectsSphere(E_)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,vy),I4.multiplyMatrices(i,vy),M_.matrixWorld=I4,M_.raycast(t,fM);for(let o=0,a=fM.length;o<a;o++){let u=fM[o];u.instanceId=s,u.object=this,e.push(u)}fM.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Kh(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){let i=e.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new V_(new Float32Array(r*this.count),r,this.count,t1,Hl));let s=this.morphTexture.source.data.data,o=0;for(let h=0;h<i.length;h++)o+=i[h];let a=this.geometry.morphTargetsRelative?1:1-o,u=r*t;s[u]=a,s.set(i,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}},WR=new Ne,$se=new Ne,qse=new vi,Vl=class{constructor(t=new Ne(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){let r=WR.subVectors(i,e).cross($se.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){let i=t.delta(WR),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(t.start).addScaledVector(i,s)}intersectsLine(t){let e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let i=e||qse.getNormalMatrix(t),r=this.coplanarPoint(WR).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},Rp=new Da,pM=new Ne,Iy=class{constructor(t=new Vl,e=new Vl,i=new Vl,r=new Vl,s=new Vl,o=new Vl){this.planes=[t,e,i,r,s,o]}set(t,e,i,r,s,o){let a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(t){let e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=Tu){let i=this.planes,r=t.elements,s=r[0],o=r[1],a=r[2],u=r[3],h=r[4],p=r[5],v=r[6],x=r[7],S=r[8],D=r[9],O=r[10],N=r[11],T=r[12],j=r[13],Z=r[14],G=r[15];if(i[0].setComponents(u-s,x-h,N-S,G-T).normalize(),i[1].setComponents(u+s,x+h,N+S,G+T).normalize(),i[2].setComponents(u+o,x+p,N+D,G+j).normalize(),i[3].setComponents(u-o,x-p,N-D,G-j).normalize(),i[4].setComponents(u-a,x-v,N-O,G-Z).normalize(),e===Tu)i[5].setComponents(u+a,x+v,N+O,G+Z).normalize();else if(e===R_)i[5].setComponents(a,v,O,Z).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Rp.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Rp.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Rp)}intersectsSprite(t){return Rp.center.set(0,0,0),Rp.radius=.7071067811865476,Rp.applyMatrix4(t.matrixWorld),this.intersectsSphere(Rp)}intersectsSphere(t){let e=this.planes,i=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){let e=this.planes;for(let i=0;i<6;i++){let r=e[i];if(pM.x=r.normal.x>0?t.max.x:t.min.x,pM.y=r.normal.y>0?t.max.y:t.min.y,pM.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(pM)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var Py=class extends Ia{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Nn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}},DM=new Ne,IM=new Ne,R4=new hi,T_=new Iu,mM=new Da,GR=new Ne,k4=new Ne,Up=class extends io{constructor(t=new Pa,e=new Py){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[0];for(let r=1,s=e.count;r<s;r++)DM.fromBufferAttribute(e,r-1),IM.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=DM.distanceTo(IM);t.setAttribute("lineDistance",new Do(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),mM.copy(i.boundingSphere),mM.applyMatrix4(r),mM.radius+=s,t.ray.intersectsSphere(mM)===!1)return;R4.copy(r).invert(),T_.copy(t.ray).applyMatrix4(R4);let a=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a,h=this.isLineSegments?2:1,p=i.index,x=i.attributes.position;if(p!==null){let S=Math.max(0,o.start),D=Math.min(p.count,o.start+o.count);for(let O=S,N=D-1;O<N;O+=h){let T=p.getX(O),j=p.getX(O+1),Z=gM(this,t,T_,u,T,j,O);Z&&e.push(Z)}if(this.isLineLoop){let O=p.getX(D-1),N=p.getX(S),T=gM(this,t,T_,u,O,N,D-1);T&&e.push(T)}}else{let S=Math.max(0,o.start),D=Math.min(x.count,o.start+o.count);for(let O=S,N=D-1;O<N;O+=h){let T=gM(this,t,T_,u,O,O+1,O);T&&e.push(T)}if(this.isLineLoop){let O=gM(this,t,T_,u,D-1,S,D-1);O&&e.push(O)}}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function gM(n,t,e,i,r,s,o){let a=n.geometry.attributes.position;if(DM.fromBufferAttribute(a,r),IM.fromBufferAttribute(a,s),e.distanceSqToSegment(DM,IM,GR,k4)>i)return;GR.applyMatrix4(n.matrixWorld);let h=t.ray.origin.distanceTo(GR);if(!(h<t.near||h>t.far))return{distance:h,point:k4.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}var L4=new Ne,N4=new Ne,H_=class extends Up{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[];for(let r=0,s=e.count;r<s;r+=2)L4.fromBufferAttribute(e,r),N4.fromBufferAttribute(e,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+L4.distanceTo(N4);t.setAttribute("lineDistance",new Do(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},j_=class extends Up{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}},Ry=class extends Ia{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Nn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}},O4=new hi,tk=new Iu,yM=new Da,vM=new Ne,W_=class extends io{constructor(t=new Pa,e=new Ry){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,s=t.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),yM.copy(i.boundingSphere),yM.applyMatrix4(r),yM.radius+=s,t.ray.intersectsSphere(yM)===!1)return;O4.copy(r).invert(),tk.copy(t.ray).applyMatrix4(O4);let a=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a,h=i.index,v=i.attributes.position;if(h!==null){let x=Math.max(0,o.start),S=Math.min(h.count,o.start+o.count);for(let D=x,O=S;D<O;D++){let N=h.getX(D);vM.fromBufferAttribute(v,N),F4(vM,N,u,r,t,e,this)}}else{let x=Math.max(0,o.start),S=Math.min(v.count,o.start+o.count);for(let D=x,O=S;D<O;D++)vM.fromBufferAttribute(v,D),F4(vM,D,u,r,t,e,this)}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function F4(n,t,e,i,r,s,o){let a=tk.distanceSqToPoint(n);if(a<e){let u=new Ne;tk.closestPointToPoint(n,u),u.applyMatrix4(i);let h=r.ray.origin.distanceTo(u);if(h<r.near||h>r.far)return;s.push({distance:h,distanceToRay:Math.sqrt(a),point:u,index:t,face:null,faceIndex:null,barycoord:null,object:o})}}var G_=class extends ll{constructor(t,e,i=Qh,r,s,o,a=fo,u=fo,h,p=xy,v=1){if(p!==xy&&p!==Vy)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");let x={width:t,height:e,depth:v};super(x,r,s,o,a,u,p,i,h),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Cy(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){let e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}};var $_=class n extends Pa{constructor(t=1,e=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};let s=t/2,o=e/2,a=Math.floor(i),u=Math.floor(r),h=a+1,p=u+1,v=t/a,x=e/u,S=[],D=[],O=[],N=[];for(let T=0;T<p;T++){let j=T*x-o;for(let Z=0;Z<h;Z++){let G=Z*v-s;D.push(G,-j,0),O.push(0,0,1),N.push(Z/a),N.push(1-T/u)}}for(let T=0;T<u;T++)for(let j=0;j<a;j++){let Z=j+h*T,G=j+h*(T+1),le=j+1+h*(T+1),K=j+1+h*T;S.push(Z,G,K),S.push(G,le,K)}this.setIndex(S),this.setAttribute("position",new Do(D,3)),this.setAttribute("normal",new Do(O,3)),this.setAttribute("uv",new Do(N,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}};var q_=class n extends Pa{constructor(t=1,e=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));let u=Math.min(o+a,Math.PI),h=0,p=[],v=new Ne,x=new Ne,S=[],D=[],O=[],N=[];for(let T=0;T<=i;T++){let j=[],Z=T/i,G=0;T===0&&o===0?G=.5/e:T===i&&u===Math.PI&&(G=-.5/e);for(let le=0;le<=e;le++){let K=le/e;v.x=-t*Math.cos(r+K*s)*Math.sin(o+Z*a),v.y=t*Math.cos(o+Z*a),v.z=t*Math.sin(r+K*s)*Math.sin(o+Z*a),D.push(v.x,v.y,v.z),x.copy(v).normalize(),O.push(x.x,x.y,x.z),N.push(K+G,1-Z),j.push(h++)}p.push(j)}for(let T=0;T<i;T++)for(let j=0;j<e;j++){let Z=p[T][j+1],G=p[T][j],le=p[T+1][j],K=p[T+1][j+1];(T!==0||o>0)&&S.push(Z,G,K),(T!==i-1||u<Math.PI)&&S.push(G,le,K)}this.setIndex(S),this.setAttribute("position",new Do(D,3)),this.setAttribute("normal",new Do(O,3)),this.setAttribute("uv",new Do(N,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}};var Pu=class extends Ia{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Nn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wk,this.normalScale=new Yn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Yh,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}},Ra=class extends Pu{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Yn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ri(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Nn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Nn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Nn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}};var PM=class extends Ia{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=x5,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},RM=class extends Ia{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}};function _M(n,t){return!n||n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}function Xse(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Yse(n){function t(r,s){return n[r]-n[s]}let e=n.length,i=new Array(e);for(let r=0;r!==e;++r)i[r]=r;return i.sort(t),i}function B4(n,t,e){let i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){let a=e[s]*t;for(let u=0;u!==t;++u)r[o++]=n[a+u]}return r}function F5(n,t,e,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(t.push(s.time),e.push(...o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(t.push(s.time),o.toArray(e,e.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(t.push(s.time),e.push(o)),s=n[r++];while(s!==void 0)}var Ad=class{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){let e=this.parameterPositions,i=this._cachedIndex,r=e[i],s=e[i-1];e:{t:{let o;n:{i:if(!(t<r)){for(let a=i+2;;){if(r===void 0){if(t<s)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=e[++i],t<r)break t}o=e.length;break n}if(!(t>=s)){let a=e[1];t<a&&(i=2,s=a);for(let u=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=s,s=e[--i-1],t>=s)break t}o=i,i=0;break n}break e}for(;i<o;){let a=i+o>>>1;t<e[a]?o=a:i=a+1}if(r=e[i],s=e[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=i[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},kM=class extends Ad{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:KR,endingEnd:KR}}intervalChanged_(t,e,i){let r=this.parameterPositions,s=t-2,o=t+1,a=r[s],u=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case QR:s=t,a=2*e-i;break;case JR:s=r.length-2,a=e+r[s]-r[s+1];break;default:s=t,a=i}if(u===void 0)switch(this.getSettings_().endingEnd){case QR:o=t,u=2*i-e;break;case JR:o=1,u=i+r[1]-r[0];break;default:o=t-1,u=e}let h=(i-e)*.5,p=this.valueSize;this._weightPrev=h/(e-a),this._weightNext=h/(u-i),this._offsetPrev=s*p,this._offsetNext=o*p}interpolate_(t,e,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=t*a,h=u-a,p=this._offsetPrev,v=this._offsetNext,x=this._weightPrev,S=this._weightNext,D=(i-e)/(r-e),O=D*D,N=O*D,T=-x*N+2*x*O-x*D,j=(1+x)*N+(-1.5-2*x)*O+(-.5+x)*D+1,Z=(-1-S)*N+(1.5+S)*O+.5*D,G=S*N-S*O;for(let le=0;le!==a;++le)s[le]=T*o[p+le]+j*o[h+le]+Z*o[u+le]+G*o[v+le];return s}},LM=class extends Ad{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=t*a,h=u-a,p=(i-e)/(r-e),v=1-p;for(let x=0;x!==a;++x)s[x]=o[h+x]*v+o[u+x]*p;return s}},NM=class extends Ad{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}},ka=class{constructor(t,e,i,r){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=_M(e,this.TimeBufferType),this.values=_M(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){let e=t.constructor,i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:_M(t.times,Array),values:_M(t.values,Array)};let r=t.getInterpolation();r!==t.DefaultInterpolation&&(i.interpolation=r)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new NM(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new LM(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new kM(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Op:e=this.InterpolantFactoryMethodDiscrete;break;case Fp:e=this.InterpolantFactoryMethodLinear;break;case bM:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Op;case this.InterpolantFactoryMethodLinear:return Fp;case this.InterpolantFactoryMethodSmooth:return bM}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(t!==1){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){let i=this.times,r=i.length,s=0,o=r-1;for(;s!==r&&i[s]<t;)++s;for(;o!==-1&&i[o]>e;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);let a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);let i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==s;a++){let u=i[a];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,u),t=!1;break}if(o!==null&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,u,o),t=!1;break}o=u}if(r!==void 0&&Xse(r))for(let a=0,u=r.length;a!==u;++a){let h=r[a];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,h),t=!1;break}}return t}optimize(){let t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===bM,s=t.length-1,o=1;for(let a=1;a<s;++a){let u=!1,h=t[a],p=t[a+1];if(h!==p&&(a!==1||h!==t[0]))if(r)u=!0;else{let v=a*i,x=v-i,S=v+i;for(let D=0;D!==i;++D){let O=e[v+D];if(O!==e[x+D]||O!==e[S+D]){u=!0;break}}}if(u){if(a!==o){t[o]=t[a];let v=a*i,x=o*i;for(let S=0;S!==i;++S)e[x+S]=e[v+S]}++o}}if(s>0){t[o]=t[s];for(let a=s*i,u=o*i,h=0;h!==i;++h)e[u+h]=e[a+h];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=e.slice(0,o*i)):(this.times=t,this.values=e),this}clone(){let t=this.times.slice(),e=this.values.slice(),i=this.constructor,r=new i(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}};ka.prototype.ValueTypeName="";ka.prototype.TimeBufferType=Float32Array;ka.prototype.ValueBufferType=Float32Array;ka.prototype.DefaultInterpolation=Fp;var Dd=class extends ka{constructor(t,e,i){super(t,e,i)}};Dd.prototype.ValueTypeName="bool";Dd.prototype.ValueBufferType=Array;Dd.prototype.DefaultInterpolation=Op;Dd.prototype.InterpolantFactoryMethodLinear=void 0;Dd.prototype.InterpolantFactoryMethodSmooth=void 0;var X_=class extends ka{constructor(t,e,i,r){super(t,e,i,r)}};X_.prototype.ValueTypeName="color";var Ru=class extends ka{constructor(t,e,i,r){super(t,e,i,r)}};Ru.prototype.ValueTypeName="number";var OM=class extends Ad{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=(i-e)/(r-e),h=t*a;for(let p=h+a;h!==p;h+=4)ra.slerpFlat(s,0,o,h-a,o,h,u);return s}},ku=class extends ka{constructor(t,e,i,r){super(t,e,i,r)}InterpolantFactoryMethodLinear(t){return new OM(this.times,this.values,this.getValueSize(),t)}};ku.prototype.ValueTypeName="quaternion";ku.prototype.InterpolantFactoryMethodSmooth=void 0;var Id=class extends ka{constructor(t,e,i){super(t,e,i)}};Id.prototype.ValueTypeName="string";Id.prototype.ValueBufferType=Array;Id.prototype.DefaultInterpolation=Op;Id.prototype.InterpolantFactoryMethodLinear=void 0;Id.prototype.InterpolantFactoryMethodSmooth=void 0;var Lu=class extends ka{constructor(t,e,i,r){super(t,e,i,r)}};Lu.prototype.ValueTypeName="vector";var Y_=class{constructor(t="",e=-1,i=[],r=b5){this.name=t,this.tracks=i,this.duration=e,this.blendMode=r,this.uuid=Pc(),this.duration<0&&this.resetDuration()}static parse(t){let e=[],i=t.tracks,r=1/(t.fps||1);for(let o=0,a=i.length;o!==a;++o)e.push(Kse(i[o]).scale(r));let s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){let e=[],i=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,o=i.length;s!==o;++s)e.push(ka.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(t,e,i,r){let s=e.length,o=[];for(let a=0;a<s;a++){let u=[],h=[];u.push((a+s-1)%s,a,(a+1)%s),h.push(0,1,0);let p=Yse(u);u=B4(u,1,p),h=B4(h,1,p),!r&&u[0]===0&&(u.push(s),h.push(h[0])),o.push(new Ru(".morphTargetInfluences["+e[a].name+"]",u,h).scale(1/i))}return new this(t,-1,o)}static findByName(t,e){let i=t;if(!Array.isArray(t)){let r=t;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null}static CreateClipsFromMorphTargetSequences(t,e,i){let r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,u=t.length;a<u;a++){let h=t[a],p=h.name.match(s);if(p&&p.length>1){let v=p[1],x=r[v];x||(r[v]=x=[]),x.push(h)}}let o=[];for(let a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],e,i));return o}static parseAnimation(t,e){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(v,x,S,D,O){if(S.length!==0){let N=[],T=[];F5(S,N,T,D),N.length!==0&&O.push(new v(x,N,T))}},r=[],s=t.name||"default",o=t.fps||30,a=t.blendMode,u=t.length||-1,h=t.hierarchy||[];for(let v=0;v<h.length;v++){let x=h[v].keys;if(!(!x||x.length===0))if(x[0].morphTargets){let S={},D;for(D=0;D<x.length;D++)if(x[D].morphTargets)for(let O=0;O<x[D].morphTargets.length;O++)S[x[D].morphTargets[O]]=-1;for(let O in S){let N=[],T=[];for(let j=0;j!==x[D].morphTargets.length;++j){let Z=x[D];N.push(Z.time),T.push(Z.morphTarget===O?1:0)}r.push(new Ru(".morphTargetInfluence["+O+"]",N,T))}u=S.length*o}else{let S=".bones["+e[v].name+"]";i(Lu,S+".position",x,"pos",r),i(ku,S+".quaternion",x,"rot",r),i(Lu,S+".scale",x,"scl",r)}}return r.length===0?null:new this(s,u,r,a)}resetDuration(){let t=this.tracks,e=0;for(let i=0,r=t.length;i!==r;++i){let s=this.tracks[i];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){let t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function Zse(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ru;case"vector":case"vector2":case"vector3":case"vector4":return Lu;case"color":return X_;case"quaternion":return ku;case"bool":case"boolean":return Dd;case"string":return Id}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Kse(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=Zse(n.type);if(n.times===void 0){let e=[],i=[];F5(n.keys,e,i,"value"),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}var Ed={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},FM=class{constructor(t,e,i){let r=this,s=!1,o=0,a=0,u,h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(p){a++,s===!1&&r.onStart!==void 0&&r.onStart(p,o,a),s=!0},this.itemEnd=function(p){o++,r.onProgress!==void 0&&r.onProgress(p,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return u?u(p):p},this.setURLModifier=function(p){return u=p,this},this.addHandler=function(p,v){return h.push(p,v),this},this.removeHandler=function(p){let v=h.indexOf(p);return v!==-1&&h.splice(v,2),this},this.getHandler=function(p){for(let v=0,x=h.length;v<x;v+=2){let S=h[v],D=h[v+1];if(S.global&&(S.lastIndex=0),S.test(p))return D}return null}}},B5=new FM,Xp=(()=>{class n{constructor(e){this.manager=e!==void 0?e:B5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,i){let r=this;return new Promise(function(s,o){r.load(e,s,i,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),Md={},nk=class extends Error{constructor(t,e){super(t),this.response=e}},ky=class extends Xp{constructor(t){super(t),this.mimeType="",this.responseType=""}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let s=Ed.get(t);if(s!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(Md[t]!==void 0){Md[t].push({onLoad:e,onProgress:i,onError:r});return}Md[t]=[],Md[t].push({onLoad:e,onProgress:i,onError:r});let o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,u=this.responseType;fetch(o).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;let p=Md[t],v=h.body.getReader(),x=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),S=x?parseInt(x):0,D=S!==0,O=0,N=new ReadableStream({start(T){j();function j(){v.read().then(({done:Z,value:G})=>{if(Z)T.close();else{O+=G.byteLength;let le=new ProgressEvent("progress",{lengthComputable:D,loaded:O,total:S});for(let K=0,oe=p.length;K<oe;K++){let ue=p[K];ue.onProgress&&ue.onProgress(le)}T.enqueue(G),j()}},Z=>{T.error(Z)})}}});return new Response(N)}else throw new nk(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(u){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(p=>new DOMParser().parseFromString(p,a));case"json":return h.json();default:if(a==="")return h.text();{let v=/charset="?([^;"\s]*)"?/i.exec(a),x=v&&v[1]?v[1].toLowerCase():void 0,S=new TextDecoder(x);return h.arrayBuffer().then(D=>S.decode(D))}}}).then(h=>{Ed.add(t,h);let p=Md[t];delete Md[t];for(let v=0,x=p.length;v<x;v++){let S=p[v];S.onLoad&&S.onLoad(h)}}).catch(h=>{let p=Md[t];if(p===void 0)throw this.manager.itemError(t),h;delete Md[t];for(let v=0,x=p.length;v<x;v++){let S=p[v];S.onError&&S.onError(h)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}};var BM=class extends Xp{constructor(t){super(t)}load(t,e,i,r){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let s=this,o=Ed.get(t);if(o!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;let a=wy("img");function u(){p(),Ed.add(t,this),e&&e(this),s.manager.itemEnd(t)}function h(v){p(),r&&r(v),s.manager.itemError(t),s.manager.itemEnd(t)}function p(){a.removeEventListener("load",u,!1),a.removeEventListener("error",h,!1)}return a.addEventListener("load",u,!1),a.addEventListener("error",h,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(t),a.src=t,a}};var Z_=class extends Xp{constructor(t){super(t)}load(t,e,i,r){let s=new ll,o=new BM(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(a){s.image=a,s.needsUpdate=!0,e!==void 0&&e(s)},i,r),s}},zp=class extends io{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Nn(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}};var $R=new hi,V4=new Ne,U4=new Ne,K_=class{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Yn(512,512),this.mapType=Fc,this.map=null,this.mapPass=null,this.matrix=new hi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Iy,this._frameExtents=new Yn(1,1),this._viewportCount=1,this._viewports=[new sr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,i=this.matrix;V4.setFromMatrixPosition(t.matrixWorld),e.position.copy(V4),U4.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(U4),e.updateMatrixWorld(),$R.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix($R),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply($R)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}},ik=class extends K_{constructor(){super(new Ts(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(t){let e=this.camera,i=Bp*2*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,s=t.distance||e.far;(i!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=i,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}},Q_=class extends zp{constructor(t,e,i=0,r=Math.PI/3,s=0,o=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(io.DEFAULT_UP),this.updateMatrix(),this.target=new io,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new ik}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},z4=new hi,A_=new Ne,qR=new Ne,rk=class extends K_{constructor(){super(new Ts(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Yn(4,2),this._viewportCount=6,this._viewports=[new sr(2,1,1,1),new sr(0,1,1,1),new sr(3,1,1,1),new sr(1,1,1,1),new sr(3,0,1,1),new sr(1,0,1,1)],this._cubeDirections=[new Ne(1,0,0),new Ne(-1,0,0),new Ne(0,0,1),new Ne(0,0,-1),new Ne(0,1,0),new Ne(0,-1,0)],this._cubeUps=[new Ne(0,1,0),new Ne(0,1,0),new Ne(0,1,0),new Ne(0,1,0),new Ne(0,0,1),new Ne(0,0,-1)]}updateMatrices(t,e=0){let i=this.camera,r=this.matrix,s=t.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),A_.setFromMatrixPosition(t.matrixWorld),i.position.copy(A_),qR.copy(i.position),qR.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(qR),i.updateMatrixWorld(),r.makeTranslation(-A_.x,-A_.y,-A_.z),z4.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(z4)}},J_=class extends zp{constructor(t,e,i=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new rk}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}},Hp=class extends O_{constructor(t=-1,e=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,s=i-t,o=i+t,a=r+e,u=r-e;if(this.view!==null&&this.view.enabled){let h=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,o=s+h*this.view.width,a-=p*this.view.offsetY,u=a-p*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}},sk=class extends K_{constructor(){super(new Hp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},jp=class extends zp{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(io.DEFAULT_UP),this.updateMatrix(),this.target=new io,this.shadow=new sk}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},eb=class extends zp{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}};var Pd=class{static extractUrlBase(t){let e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}};var XR=new WeakMap,tb=class extends Xp{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let s=this,o=Ed.get(t);if(o!==void 0){if(s.manager.itemStart(t),o.then){o.then(h=>{if(XR.has(o)===!0)r&&r(XR.get(o)),s.manager.itemError(t),s.manager.itemEnd(t);else return e&&e(h),s.manager.itemEnd(t),h});return}return setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let u=fetch(t,a).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){return Ed.add(t,h),e&&e(h),s.manager.itemEnd(t),h}).catch(function(h){r&&r(h),XR.set(u,h),Ed.remove(t),s.manager.itemError(t),s.manager.itemEnd(t)});Ed.add(t,u),s.manager.itemStart(t)}};var VM=class extends Ts{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}};var Ak="\\[\\]\\.:\\/",Qse=new RegExp("["+Ak+"]","g"),Dk="[^"+Ak+"]",Jse="[^"+Ak.replace("\\.","")+"]",eoe=/((?:WC+[\/:])*)/.source.replace("WC",Dk),toe=/(WCOD+)?/.source.replace("WCOD",Jse),noe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Dk),ioe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Dk),roe=new RegExp("^"+eoe+toe+noe+ioe+"$"),soe=["material","materials","bones","map"],ok=class{constructor(t,e,i){let r=i||Hr.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(t,e)}setValue(t,e){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(t,e)}bind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},Hr=(()=>{class n{constructor(e,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,r){return e&&e.isAnimationObjectGroup?new n.Composite(e,i,r):new n(e,i,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Qse,"")}static parseTrackName(e){let i=roe.exec(e);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){let o=r.nodeName.substring(s+1);soe.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,i){if(i===void 0||i===""||i==="."||i===-1||i===e.name||i===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(i);if(r!==void 0)return r}if(e.children){let r=function(o){for(let a=0;a<o.length;a++){let u=o[a];if(u.name===i||u.uuid===i)return u;let h=r(u.children);if(h)return h}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[i++]=r[s]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[i++]}_setValue_array_setNeedsUpdate(e,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node,i=this.parsedPath,r=i.objectName,s=i.propertyName,o=i.propertyIndex;if(e||(e=n.findNode(this.rootNode,i.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let p=i.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let v=0;v<e.length;v++)if(e[v].name===p){p=v;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}let a=e[s];if(a===void 0){let p=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?u=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(h=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=ok,n})();Hr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Hr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Hr.prototype.GetterByBindingType=[Hr.prototype._getValue_direct,Hr.prototype._getValue_array,Hr.prototype._getValue_arrayElement,Hr.prototype._getValue_toArray];Hr.prototype.SetterByBindingTypeAndVersioning=[[Hr.prototype._setValue_direct,Hr.prototype._setValue_direct_setNeedsUpdate,Hr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Hr.prototype._setValue_array,Hr.prototype._setValue_array_setNeedsUpdate,Hr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Hr.prototype._setValue_arrayElement,Hr.prototype._setValue_arrayElement_setNeedsUpdate,Hr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Hr.prototype._setValue_fromArray,Hr.prototype._setValue_fromArray_setNeedsUpdate,Hr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var jTe=new Float32Array(1);var H4=new hi,nb=class{constructor(t,e,i=0,r=1/0){this.ray=new Iu(t,e),this.near=i,this.far=r,this.camera=null,this.layers=new Sy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return H4.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(H4),this}intersectObject(t,e=!0,i=[]){return ak(t,this,i,e),i.sort(j4),i}intersectObjects(t,e=!0,i=[]){for(let r=0,s=t.length;r<s;r++)ak(t[r],this,i,e);return i.sort(j4),i}};function j4(n,t){return n.distance-t.distance}function ak(n,t,e,i){let r=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(r=!1),r===!0&&i===!0){let s=n.children;for(let o=0,a=s.length;o<a;o++)ak(s[o],t,e,!0)}}var Ly=class{constructor(t=1,e=0,i=0){this.radius=t,this.phi=e,this.theta=i}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Ri(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Ri(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};var ib=class extends Au{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}};function Ik(n,t,e,i){let r=ooe(i);switch(e){case yk:return n*t;case t1:return n*t/r.components*r.byteLength;case n1:return n*t/r.components*r.byteLength;case _k:return n*t*2/r.components*r.byteLength;case i1:return n*t*2/r.components*r.byteLength;case vk:return n*t*3/r.components*r.byteLength;case al:return n*t*4/r.components*r.byteLength;case r1:return n*t*4/r.components*r.byteLength;case sb:case ob:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case ab:case lb:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case o1:case l1:return Math.max(n,16)*Math.max(t,8)/4;case s1:case a1:return Math.max(n,8)*Math.max(t,8)/2;case c1:case u1:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case d1:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case h1:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case f1:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case p1:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case m1:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case g1:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case y1:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case v1:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case _1:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case b1:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case x1:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case w1:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case C1:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case S1:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case M1:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case cb:case E1:case T1:return Math.ceil(n/4)*Math.ceil(t/4)*16;case bk:case A1:return Math.ceil(n/4)*Math.ceil(t/4)*8;case D1:case I1:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function ooe(n){switch(n){case Fc:case pk:return{byteLength:1,components:1};case Oy:case mk:case Fy:return{byteLength:2,components:1};case JM:case e1:return{byteLength:2,components:4};case Qh:case QM:case Hl:return{byteLength:4,components:1};case gk:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:UM}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=UM);function l8(){let n=null,t=!1,e=null,i=null;function r(s,o){e(s,o),i=n.requestAnimationFrame(r)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(r),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){n=s}}}function aoe(n){let t=new WeakMap;function e(a,u){let h=a.array,p=a.usage,v=h.byteLength,x=n.createBuffer();n.bindBuffer(u,x),n.bufferData(u,h,p),a.onUploadCallback();let S;if(h instanceof Float32Array)S=n.FLOAT;else if(h instanceof Uint16Array)a.isFloat16BufferAttribute?S=n.HALF_FLOAT:S=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)S=n.SHORT;else if(h instanceof Uint32Array)S=n.UNSIGNED_INT;else if(h instanceof Int32Array)S=n.INT;else if(h instanceof Int8Array)S=n.BYTE;else if(h instanceof Uint8Array)S=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)S=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:x,type:S,bytesPerElement:h.BYTES_PER_ELEMENT,version:a.version,size:v}}function i(a,u,h){let p=u.array,v=u.updateRanges;if(n.bindBuffer(h,a),v.length===0)n.bufferSubData(h,0,p);else{v.sort((S,D)=>S.start-D.start);let x=0;for(let S=1;S<v.length;S++){let D=v[x],O=v[S];O.start<=D.start+D.count+1?D.count=Math.max(D.count,O.start+O.count-D.start):(++x,v[x]=O)}v.length=x+1;for(let S=0,D=v.length;S<D;S++){let O=v[S];n.bufferSubData(h,O.start*p.BYTES_PER_ELEMENT,p,O.start,O.count)}u.clearUpdateRanges()}u.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);let u=t.get(a);u&&(n.deleteBuffer(u.buffer),t.delete(a))}function o(a,u){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let p=t.get(a);(!p||p.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let h=t.get(a);if(h===void 0)t.set(a,e(a,u));else if(h.version<a.version){if(h.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(h.buffer,a,u),h.version=a.version}}return{get:r,remove:s,update:o}}var loe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,coe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,uoe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,doe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,hoe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,foe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,poe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,moe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,goe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,yoe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,voe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,_oe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,boe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,xoe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,woe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Coe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Soe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Moe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Eoe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Toe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Aoe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Doe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Ioe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Poe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Roe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,koe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Loe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Noe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Ooe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Foe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Boe="gl_FragColor = linearToOutputTexel( gl_FragColor );",Voe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Uoe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,zoe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Hoe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,joe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Woe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Goe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,$oe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,qoe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Xoe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Yoe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Zoe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Koe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Qoe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Joe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,eae=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,tae=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,nae=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,iae=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,rae=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,sae=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,oae=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,aae=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lae=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,cae=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,uae=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,dae=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hae=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fae=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,pae=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,mae=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,gae=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,yae=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vae=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,_ae=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,bae=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,xae=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,wae=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Cae=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Sae=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Mae=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Eae=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Tae=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Aae=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Dae=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Iae=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Pae=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Rae=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,kae=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Lae=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Nae=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Oae=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Fae=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Bae=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Vae=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Uae=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,zae=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Hae=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,jae=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Wae=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Gae=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,$ae=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,qae=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Xae=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Yae=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Zae=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Kae=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Qae=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Jae=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ele=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,tle=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,nle=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,ile=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,rle=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sle=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,ole=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,ale=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,lle=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cle=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ule=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dle=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hle=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fle=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ple=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,mle=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,gle=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,yle=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,vle=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_le=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ble=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,xle=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,wle=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Cle=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Sle=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mle=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Ele=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tle=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Ale=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Dle=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ile=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ple=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Rle=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kle=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Lle=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nle=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Ole=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Fle=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ble=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Vle=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ule=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ai={alphahash_fragment:loe,alphahash_pars_fragment:coe,alphamap_fragment:uoe,alphamap_pars_fragment:doe,alphatest_fragment:hoe,alphatest_pars_fragment:foe,aomap_fragment:poe,aomap_pars_fragment:moe,batching_pars_vertex:goe,batching_vertex:yoe,begin_vertex:voe,beginnormal_vertex:_oe,bsdfs:boe,iridescence_fragment:xoe,bumpmap_pars_fragment:woe,clipping_planes_fragment:Coe,clipping_planes_pars_fragment:Soe,clipping_planes_pars_vertex:Moe,clipping_planes_vertex:Eoe,color_fragment:Toe,color_pars_fragment:Aoe,color_pars_vertex:Doe,color_vertex:Ioe,common:Poe,cube_uv_reflection_fragment:Roe,defaultnormal_vertex:koe,displacementmap_pars_vertex:Loe,displacementmap_vertex:Noe,emissivemap_fragment:Ooe,emissivemap_pars_fragment:Foe,colorspace_fragment:Boe,colorspace_pars_fragment:Voe,envmap_fragment:Uoe,envmap_common_pars_fragment:zoe,envmap_pars_fragment:Hoe,envmap_pars_vertex:joe,envmap_physical_pars_fragment:eae,envmap_vertex:Woe,fog_vertex:Goe,fog_pars_vertex:$oe,fog_fragment:qoe,fog_pars_fragment:Xoe,gradientmap_pars_fragment:Yoe,lightmap_pars_fragment:Zoe,lights_lambert_fragment:Koe,lights_lambert_pars_fragment:Qoe,lights_pars_begin:Joe,lights_toon_fragment:tae,lights_toon_pars_fragment:nae,lights_phong_fragment:iae,lights_phong_pars_fragment:rae,lights_physical_fragment:sae,lights_physical_pars_fragment:oae,lights_fragment_begin:aae,lights_fragment_maps:lae,lights_fragment_end:cae,logdepthbuf_fragment:uae,logdepthbuf_pars_fragment:dae,logdepthbuf_pars_vertex:hae,logdepthbuf_vertex:fae,map_fragment:pae,map_pars_fragment:mae,map_particle_fragment:gae,map_particle_pars_fragment:yae,metalnessmap_fragment:vae,metalnessmap_pars_fragment:_ae,morphinstance_vertex:bae,morphcolor_vertex:xae,morphnormal_vertex:wae,morphtarget_pars_vertex:Cae,morphtarget_vertex:Sae,normal_fragment_begin:Mae,normal_fragment_maps:Eae,normal_pars_fragment:Tae,normal_pars_vertex:Aae,normal_vertex:Dae,normalmap_pars_fragment:Iae,clearcoat_normal_fragment_begin:Pae,clearcoat_normal_fragment_maps:Rae,clearcoat_pars_fragment:kae,iridescence_pars_fragment:Lae,opaque_fragment:Nae,packing:Oae,premultiplied_alpha_fragment:Fae,project_vertex:Bae,dithering_fragment:Vae,dithering_pars_fragment:Uae,roughnessmap_fragment:zae,roughnessmap_pars_fragment:Hae,shadowmap_pars_fragment:jae,shadowmap_pars_vertex:Wae,shadowmap_vertex:Gae,shadowmask_pars_fragment:$ae,skinbase_vertex:qae,skinning_pars_vertex:Xae,skinning_vertex:Yae,skinnormal_vertex:Zae,specularmap_fragment:Kae,specularmap_pars_fragment:Qae,tonemapping_fragment:Jae,tonemapping_pars_fragment:ele,transmission_fragment:tle,transmission_pars_fragment:nle,uv_pars_fragment:ile,uv_pars_vertex:rle,uv_vertex:sle,worldpos_vertex:ole,background_vert:ale,background_frag:lle,backgroundCube_vert:cle,backgroundCube_frag:ule,cube_vert:dle,cube_frag:hle,depth_vert:fle,depth_frag:ple,distanceRGBA_vert:mle,distanceRGBA_frag:gle,equirect_vert:yle,equirect_frag:vle,linedashed_vert:_le,linedashed_frag:ble,meshbasic_vert:xle,meshbasic_frag:wle,meshlambert_vert:Cle,meshlambert_frag:Sle,meshmatcap_vert:Mle,meshmatcap_frag:Ele,meshnormal_vert:Tle,meshnormal_frag:Ale,meshphong_vert:Dle,meshphong_frag:Ile,meshphysical_vert:Ple,meshphysical_frag:Rle,meshtoon_vert:kle,meshtoon_frag:Lle,points_vert:Nle,points_frag:Ole,shadow_vert:Fle,shadow_frag:Ble,sprite_vert:Vle,sprite_frag:Ule},Yt={common:{diffuse:{value:new Nn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new vi},alphaMap:{value:null},alphaMapTransform:{value:new vi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new vi}},envmap:{envMap:{value:null},envMapRotation:{value:new vi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new vi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new vi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new vi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new vi},normalScale:{value:new Yn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new vi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new vi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new vi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new vi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Nn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Nn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new vi},alphaTest:{value:0},uvTransform:{value:new vi}},sprite:{diffuse:{value:new Nn(16777215)},opacity:{value:1},center:{value:new Yn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new vi},alphaMap:{value:null},alphaMapTransform:{value:new vi},alphaTest:{value:0}}},Ou={basic:{uniforms:Io([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.fog]),vertexShader:Ai.meshbasic_vert,fragmentShader:Ai.meshbasic_frag},lambert:{uniforms:Io([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,Yt.lights,{emissive:{value:new Nn(0)}}]),vertexShader:Ai.meshlambert_vert,fragmentShader:Ai.meshlambert_frag},phong:{uniforms:Io([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,Yt.lights,{emissive:{value:new Nn(0)},specular:{value:new Nn(1118481)},shininess:{value:30}}]),vertexShader:Ai.meshphong_vert,fragmentShader:Ai.meshphong_frag},standard:{uniforms:Io([Yt.common,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.roughnessmap,Yt.metalnessmap,Yt.fog,Yt.lights,{emissive:{value:new Nn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ai.meshphysical_vert,fragmentShader:Ai.meshphysical_frag},toon:{uniforms:Io([Yt.common,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.gradientmap,Yt.fog,Yt.lights,{emissive:{value:new Nn(0)}}]),vertexShader:Ai.meshtoon_vert,fragmentShader:Ai.meshtoon_frag},matcap:{uniforms:Io([Yt.common,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,{matcap:{value:null}}]),vertexShader:Ai.meshmatcap_vert,fragmentShader:Ai.meshmatcap_frag},points:{uniforms:Io([Yt.points,Yt.fog]),vertexShader:Ai.points_vert,fragmentShader:Ai.points_frag},dashed:{uniforms:Io([Yt.common,Yt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ai.linedashed_vert,fragmentShader:Ai.linedashed_frag},depth:{uniforms:Io([Yt.common,Yt.displacementmap]),vertexShader:Ai.depth_vert,fragmentShader:Ai.depth_frag},normal:{uniforms:Io([Yt.common,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,{opacity:{value:1}}]),vertexShader:Ai.meshnormal_vert,fragmentShader:Ai.meshnormal_frag},sprite:{uniforms:Io([Yt.sprite,Yt.fog]),vertexShader:Ai.sprite_vert,fragmentShader:Ai.sprite_frag},background:{uniforms:{uvTransform:{value:new vi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ai.background_vert,fragmentShader:Ai.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new vi}},vertexShader:Ai.backgroundCube_vert,fragmentShader:Ai.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ai.cube_vert,fragmentShader:Ai.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ai.equirect_vert,fragmentShader:Ai.equirect_frag},distanceRGBA:{uniforms:Io([Yt.common,Yt.displacementmap,{referencePosition:{value:new Ne},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ai.distanceRGBA_vert,fragmentShader:Ai.distanceRGBA_frag},shadow:{uniforms:Io([Yt.lights,Yt.fog,{color:{value:new Nn(0)},opacity:{value:1}}]),vertexShader:Ai.shadow_vert,fragmentShader:Ai.shadow_frag}};Ou.physical={uniforms:Io([Ou.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new vi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new vi},clearcoatNormalScale:{value:new Yn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new vi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new vi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new vi},sheen:{value:0},sheenColor:{value:new Nn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new vi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new vi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new vi},transmissionSamplerSize:{value:new Yn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new vi},attenuationDistance:{value:0},attenuationColor:{value:new Nn(0)},specularColor:{value:new Nn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new vi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new vi},anisotropyVector:{value:new Yn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new vi}}]),vertexShader:Ai.meshphysical_vert,fragmentShader:Ai.meshphysical_frag};var P1={r:0,b:0,g:0},Yp=new Yh,zle=new hi;function Hle(n,t,e,i,r,s,o){let a=new Nn(0),u=s===!0?0:1,h,p,v=null,x=0,S=null;function D(Z){let G=Z.isScene===!0?Z.background:null;return G&&G.isTexture&&(G=(Z.backgroundBlurriness>0?e:t).get(G)),G}function O(Z){let G=!1,le=D(Z);le===null?T(a,u):le&&le.isColor&&(T(le,1),G=!0);let K=n.xr.getEnvironmentBlendMode();K==="additive"?i.buffers.color.setClear(0,0,0,1,o):K==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||G)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function N(Z,G){let le=D(G);le&&(le.isCubeTexture||le.mapping===rb)?(p===void 0&&(p=new Ds(new Zh(1,1,1),new Lc({name:"BackgroundCubeMaterial",uniforms:qp(Ou.backgroundCube.uniforms),vertexShader:Ou.backgroundCube.vertexShader,fragmentShader:Ou.backgroundCube.fragmentShader,side:oa,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(K,oe,ue){this.matrixWorld.copyPosition(ue.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),Yp.copy(G.backgroundRotation),Yp.x*=-1,Yp.y*=-1,Yp.z*=-1,le.isCubeTexture&&le.isRenderTargetTexture===!1&&(Yp.y*=-1,Yp.z*=-1),p.material.uniforms.envMap.value=le,p.material.uniforms.flipEnvMap.value=le.isCubeTexture&&le.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=G.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=G.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(zle.makeRotationFromEuler(Yp)),p.material.toneMapped=Gi.getTransfer(le.colorSpace)!==dr,(v!==le||x!==le.version||S!==n.toneMapping)&&(p.material.needsUpdate=!0,v=le,x=le.version,S=n.toneMapping),p.layers.enableAll(),Z.unshift(p,p.geometry,p.material,0,0,null)):le&&le.isTexture&&(h===void 0&&(h=new Ds(new $_(2,2),new Lc({name:"BackgroundMaterial",uniforms:qp(Ou.background.uniforms),vertexShader:Ou.background.vertexShader,fragmentShader:Ou.background.fragmentShader,side:Rc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=le,h.material.uniforms.backgroundIntensity.value=G.backgroundIntensity,h.material.toneMapped=Gi.getTransfer(le.colorSpace)!==dr,le.matrixAutoUpdate===!0&&le.updateMatrix(),h.material.uniforms.uvTransform.value.copy(le.matrix),(v!==le||x!==le.version||S!==n.toneMapping)&&(h.material.needsUpdate=!0,v=le,x=le.version,S=n.toneMapping),h.layers.enableAll(),Z.unshift(h,h.geometry,h.material,0,0,null))}function T(Z,G){Z.getRGB(P1,Tk(n)),i.buffers.color.setClear(P1.r,P1.g,P1.b,G,o)}function j(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return a},setClearColor:function(Z,G=1){a.set(Z),u=G,T(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(Z){u=Z,T(a,u)},render:O,addToRenderList:N,dispose:j}}function jle(n,t){let e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=x(null),s=r,o=!1;function a(V,se,we,he,je){let ze=!1,de=v(he,we,se);s!==de&&(s=de,h(s.object)),ze=S(V,he,we,je),ze&&D(V,he,we,je),je!==null&&t.update(je,n.ELEMENT_ARRAY_BUFFER),(ze||o)&&(o=!1,G(V,se,we,he),je!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(je).buffer))}function u(){return n.createVertexArray()}function h(V){return n.bindVertexArray(V)}function p(V){return n.deleteVertexArray(V)}function v(V,se,we){let he=we.wireframe===!0,je=i[V.id];je===void 0&&(je={},i[V.id]=je);let ze=je[se.id];ze===void 0&&(ze={},je[se.id]=ze);let de=ze[he];return de===void 0&&(de=x(u()),ze[he]=de),de}function x(V){let se=[],we=[],he=[];for(let je=0;je<e;je++)se[je]=0,we[je]=0,he[je]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:se,enabledAttributes:we,attributeDivisors:he,object:V,attributes:{},index:null}}function S(V,se,we,he){let je=s.attributes,ze=se.attributes,de=0,Re=we.getAttributes();for(let me in Re)if(Re[me].location>=0){let tt=je[me],xt=ze[me];if(xt===void 0&&(me==="instanceMatrix"&&V.instanceMatrix&&(xt=V.instanceMatrix),me==="instanceColor"&&V.instanceColor&&(xt=V.instanceColor)),tt===void 0||tt.attribute!==xt||xt&&tt.data!==xt.data)return!0;de++}return s.attributesNum!==de||s.index!==he}function D(V,se,we,he){let je={},ze=se.attributes,de=0,Re=we.getAttributes();for(let me in Re)if(Re[me].location>=0){let tt=ze[me];tt===void 0&&(me==="instanceMatrix"&&V.instanceMatrix&&(tt=V.instanceMatrix),me==="instanceColor"&&V.instanceColor&&(tt=V.instanceColor));let xt={};xt.attribute=tt,tt&&tt.data&&(xt.data=tt.data),je[me]=xt,de++}s.attributes=je,s.attributesNum=de,s.index=he}function O(){let V=s.newAttributes;for(let se=0,we=V.length;se<we;se++)V[se]=0}function N(V){T(V,0)}function T(V,se){let we=s.newAttributes,he=s.enabledAttributes,je=s.attributeDivisors;we[V]=1,he[V]===0&&(n.enableVertexAttribArray(V),he[V]=1),je[V]!==se&&(n.vertexAttribDivisor(V,se),je[V]=se)}function j(){let V=s.newAttributes,se=s.enabledAttributes;for(let we=0,he=se.length;we<he;we++)se[we]!==V[we]&&(n.disableVertexAttribArray(we),se[we]=0)}function Z(V,se,we,he,je,ze,de){de===!0?n.vertexAttribIPointer(V,se,we,je,ze):n.vertexAttribPointer(V,se,we,he,je,ze)}function G(V,se,we,he){O();let je=he.attributes,ze=we.getAttributes(),de=se.defaultAttributeValues;for(let Re in ze){let me=ze[Re];if(me.location>=0){let $e=je[Re];if($e===void 0&&(Re==="instanceMatrix"&&V.instanceMatrix&&($e=V.instanceMatrix),Re==="instanceColor"&&V.instanceColor&&($e=V.instanceColor)),$e!==void 0){let tt=$e.normalized,xt=$e.itemSize,Tt=t.get($e);if(Tt===void 0)continue;let ut=Tt.buffer,Ie=Tt.type,at=Tt.bytesPerElement,Rt=Ie===n.INT||Ie===n.UNSIGNED_INT||$e.gpuType===QM;if($e.isInterleavedBufferAttribute){let rt=$e.data,zt=rt.stride,Sn=$e.offset;if(rt.isInstancedInterleavedBuffer){for(let dn=0;dn<me.locationSize;dn++)T(me.location+dn,rt.meshPerAttribute);V.isInstancedMesh!==!0&&he._maxInstanceCount===void 0&&(he._maxInstanceCount=rt.meshPerAttribute*rt.count)}else for(let dn=0;dn<me.locationSize;dn++)N(me.location+dn);n.bindBuffer(n.ARRAY_BUFFER,ut);for(let dn=0;dn<me.locationSize;dn++)Z(me.location+dn,xt/me.locationSize,Ie,tt,zt*at,(Sn+xt/me.locationSize*dn)*at,Rt)}else{if($e.isInstancedBufferAttribute){for(let rt=0;rt<me.locationSize;rt++)T(me.location+rt,$e.meshPerAttribute);V.isInstancedMesh!==!0&&he._maxInstanceCount===void 0&&(he._maxInstanceCount=$e.meshPerAttribute*$e.count)}else for(let rt=0;rt<me.locationSize;rt++)N(me.location+rt);n.bindBuffer(n.ARRAY_BUFFER,ut);for(let rt=0;rt<me.locationSize;rt++)Z(me.location+rt,xt/me.locationSize,Ie,tt,xt*at,xt/me.locationSize*rt*at,Rt)}}else if(de!==void 0){let tt=de[Re];if(tt!==void 0)switch(tt.length){case 2:n.vertexAttrib2fv(me.location,tt);break;case 3:n.vertexAttrib3fv(me.location,tt);break;case 4:n.vertexAttrib4fv(me.location,tt);break;default:n.vertexAttrib1fv(me.location,tt)}}}}j()}function le(){ue();for(let V in i){let se=i[V];for(let we in se){let he=se[we];for(let je in he)p(he[je].object),delete he[je];delete se[we]}delete i[V]}}function K(V){if(i[V.id]===void 0)return;let se=i[V.id];for(let we in se){let he=se[we];for(let je in he)p(he[je].object),delete he[je];delete se[we]}delete i[V.id]}function oe(V){for(let se in i){let we=i[se];if(we[V.id]===void 0)continue;let he=we[V.id];for(let je in he)p(he[je].object),delete he[je];delete we[V.id]}}function ue(){te(),o=!0,s!==r&&(s=r,h(s.object))}function te(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:ue,resetDefaultState:te,dispose:le,releaseStatesOfGeometry:K,releaseStatesOfProgram:oe,initAttributes:O,enableAttribute:N,disableUnusedAttributes:j}}function Wle(n,t,e){let i;function r(h){i=h}function s(h,p){n.drawArrays(i,h,p),e.update(p,i,1)}function o(h,p,v){v!==0&&(n.drawArraysInstanced(i,h,p,v),e.update(p,i,v))}function a(h,p,v){if(v===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,h,0,p,0,v);let S=0;for(let D=0;D<v;D++)S+=p[D];e.update(S,i,1)}function u(h,p,v,x){if(v===0)return;let S=t.get("WEBGL_multi_draw");if(S===null)for(let D=0;D<h.length;D++)o(h[D],p[D],x[D]);else{S.multiDrawArraysInstancedWEBGL(i,h,0,p,0,x,0,v);let D=0;for(let O=0;O<v;O++)D+=p[O]*x[O];e.update(D,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=u}function Gle(n,t,e,i){let r;function s(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let oe=t.get("EXT_texture_filter_anisotropic");r=n.getParameter(oe.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(oe){return!(oe!==al&&i.convert(oe)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(oe){let ue=oe===Fy&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(oe!==Fc&&i.convert(oe)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&oe!==Hl&&!ue)}function u(oe){if(oe==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";oe="mediump"}return oe==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=e.precision!==void 0?e.precision:"highp",p=u(h);p!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",p,"instead."),h=p);let v=e.logarithmicDepthBuffer===!0,x=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),S=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),D=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),O=n.getParameter(n.MAX_TEXTURE_SIZE),N=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),T=n.getParameter(n.MAX_VERTEX_ATTRIBS),j=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),Z=n.getParameter(n.MAX_VARYING_VECTORS),G=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),le=D>0,K=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:u,textureFormatReadable:o,textureTypeReadable:a,precision:h,logarithmicDepthBuffer:v,reverseDepthBuffer:x,maxTextures:S,maxVertexTextures:D,maxTextureSize:O,maxCubemapSize:N,maxAttributes:T,maxVertexUniforms:j,maxVaryings:Z,maxFragmentUniforms:G,vertexTextures:le,maxSamples:K}}function $le(n){let t=this,e=null,i=0,r=!1,s=!1,o=new Vl,a=new vi,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(v,x){let S=v.length!==0||x||i!==0||r;return r=x,i=v.length,S},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(v,x){e=p(v,x,0)},this.setState=function(v,x,S){let D=v.clippingPlanes,O=v.clipIntersection,N=v.clipShadows,T=n.get(v);if(!r||D===null||D.length===0||s&&!N)s?p(null):h();else{let j=s?0:i,Z=j*4,G=T.clippingState||null;u.value=G,G=p(D,x,Z,S);for(let le=0;le!==Z;++le)G[le]=e[le];T.clippingState=G,this.numIntersection=O?this.numPlanes:0,this.numPlanes+=j}};function h(){u.value!==e&&(u.value=e,u.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function p(v,x,S,D){let O=v!==null?v.length:0,N=null;if(O!==0){if(N=u.value,D!==!0||N===null){let T=S+O*4,j=x.matrixWorldInverse;a.getNormalMatrix(j),(N===null||N.length<T)&&(N=new Float32Array(T));for(let Z=0,G=S;Z!==O;++Z,G+=4)o.copy(v[Z]).applyMatrix4(j,a),o.normal.toArray(N,G),N[G+3]=o.constant}u.value=N,u.needsUpdate=!0}return t.numPlanes=O,t.numIntersection=0,N}}function qle(n){let t=new WeakMap;function e(o,a){return a===YM?o.mapping=Wp:a===ZM&&(o.mapping=Gp),o}function i(o){if(o&&o.isTexture){let a=o.mapping;if(a===YM||a===ZM)if(t.has(o)){let u=t.get(o).texture;return e(u,o.mapping)}else{let u=o.image;if(u&&u.height>0){let h=new AM(u.height);return h.fromEquirectangularTexture(n,o),t.set(o,h),o.addEventListener("dispose",r),e(h.texture,o.mapping)}else return null}}return o}function r(o){let a=o.target;a.removeEventListener("dispose",r);let u=t.get(a);u!==void 0&&(t.delete(a),u.dispose())}function s(){t=new WeakMap}return{get:i,dispose:s}}var Hy=4,V5=[.125,.215,.35,.446,.526,.582],Qp=20,Pk=new Hp,U5=new Nn,Rk=null,kk=0,Lk=0,Nk=!1,Kp=(1+Math.sqrt(5))/2,zy=1/Kp,z5=[new Ne(-Kp,zy,0),new Ne(Kp,zy,0),new Ne(-zy,0,Kp),new Ne(zy,0,Kp),new Ne(0,Kp,-zy),new Ne(0,Kp,zy),new Ne(-1,1,-1),new Ne(1,1,-1),new Ne(-1,1,1),new Ne(1,1,1)],Xle=new Ne,L1=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,r=100,s={}){let{size:o=256,position:a=Xle}=s;Rk=this._renderer.getRenderTarget(),kk=this._renderer.getActiveCubeFace(),Lk=this._renderer.getActiveMipmapLevel(),Nk=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);let u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(t,i,r,u,a),e>0&&this._blur(u,0,0,e),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=W5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=j5(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Rk,kk,Lk),this._renderer.xr.enabled=Nk,t.scissorTest=!1,R1(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Wp||t.mapping===Gp?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Rk=this._renderer.getRenderTarget(),kk=this._renderer.getActiveCubeFace(),Lk=this._renderer.getActiveMipmapLevel(),Nk=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:ia,minFilter:ia,generateMipmaps:!1,type:Fy,format:al,colorSpace:po,depthBuffer:!1},r=H5(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=H5(t,e,i);let{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Yle(s)),this._blurMaterial=Zle(s,t,e)}return r}_compileMaterial(t){let e=new Ds(this._lodPlanes[0],t);this._renderer.compile(e,Pk)}_sceneToCubeUV(t,e,i,r,s){let u=new Ts(90,1,e,i),h=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],v=this._renderer,x=v.autoClear,S=v.toneMapping;v.getClearColor(U5),v.toneMapping=kd,v.autoClear=!1;let D=new kc({name:"PMREM.Background",side:oa,depthWrite:!1,depthTest:!1}),O=new Ds(new Zh,D),N=!1,T=t.background;T?T.isColor&&(D.color.copy(T),t.background=null,N=!0):(D.color.copy(U5),N=!0);for(let j=0;j<6;j++){let Z=j%3;Z===0?(u.up.set(0,h[j],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x+p[j],s.y,s.z)):Z===1?(u.up.set(0,0,h[j]),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y+p[j],s.z)):(u.up.set(0,h[j],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y,s.z+p[j]));let G=this._cubeSize;R1(r,Z*G,j>2?G:0,G,G),v.setRenderTarget(r),N&&v.render(O,u),v.render(t,u)}O.geometry.dispose(),O.material.dispose(),v.toneMapping=S,v.autoClear=x,t.background=T}_textureToCubeUV(t,e){let i=this._renderer,r=t.mapping===Wp||t.mapping===Gp;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=W5()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=j5());let s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ds(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=t;let u=this._cubeSize;R1(e,0,0,3*u,2*u),i.setRenderTarget(e),i.render(o,Pk)}_applyPMREM(t){let e=this._renderer,i=e.autoClear;e.autoClear=!1;let r=this._lodPlanes.length;for(let s=1;s<r;s++){let o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=z5[(r-s-1)%z5.length];this._blur(t,s-1,s,o,a)}e.autoClear=i}_blur(t,e,i,r,s){let o=this._pingPongRenderTarget;this._halfBlur(t,o,e,i,r,"latitudinal",s),this._halfBlur(o,t,i,i,r,"longitudinal",s)}_halfBlur(t,e,i,r,s,o,a){let u=this._renderer,h=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let p=3,v=new Ds(this._lodPlanes[r],h),x=h.uniforms,S=this._sizeLods[i]-1,D=isFinite(s)?Math.PI/(2*S):2*Math.PI/(2*Qp-1),O=s/D,N=isFinite(s)?1+Math.floor(p*O):Qp;N>Qp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${N} samples when the maximum is set to ${Qp}`);let T=[],j=0;for(let oe=0;oe<Qp;++oe){let ue=oe/O,te=Math.exp(-ue*ue/2);T.push(te),oe===0?j+=te:oe<N&&(j+=2*te)}for(let oe=0;oe<T.length;oe++)T[oe]=T[oe]/j;x.envMap.value=t.texture,x.samples.value=N,x.weights.value=T,x.latitudinal.value=o==="latitudinal",a&&(x.poleAxis.value=a);let{_lodMax:Z}=this;x.dTheta.value=D,x.mipInt.value=Z-i;let G=this._sizeLods[r],le=3*G*(r>Z-Hy?r-Z+Hy:0),K=4*(this._cubeSize-G);R1(e,le,K,3*G,2*G),u.setRenderTarget(e),u.render(v,Pk)}};function Yle(n){let t=[],e=[],i=[],r=n,s=n-Hy+1+V5.length;for(let o=0;o<s;o++){let a=Math.pow(2,r);e.push(a);let u=1/a;o>n-Hy?u=V5[o-n+Hy-1]:o===0&&(u=0),i.push(u);let h=1/(a-2),p=-h,v=1+h,x=[p,p,v,p,v,v,p,p,v,v,p,v],S=6,D=6,O=3,N=2,T=1,j=new Float32Array(O*D*S),Z=new Float32Array(N*D*S),G=new Float32Array(T*D*S);for(let K=0;K<S;K++){let oe=K%3*2/3-1,ue=K>2?0:-1,te=[oe,ue,0,oe+2/3,ue,0,oe+2/3,ue+1,0,oe,ue,0,oe+2/3,ue+1,0,oe,ue+1,0];j.set(te,O*D*K),Z.set(x,N*D*K);let V=[K,K,K,K,K,K];G.set(V,T*D*K)}let le=new Pa;le.setAttribute("position",new As(j,O)),le.setAttribute("uv",new As(Z,N)),le.setAttribute("faceIndex",new As(G,T)),t.push(le),r>Hy&&r--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function H5(n,t,e){let i=new Du(n,t,e);return i.texture.mapping=rb,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function R1(n,t,e,i,r){n.viewport.set(t,e,i,r),n.scissor.set(t,e,i,r)}function Zle(n,t,e){let i=new Float32Array(Qp),r=new Ne(0,1,0);return new Lc({name:"SphericalGaussianBlur",defines:{n:Qp,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Gk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Rd,depthTest:!1,depthWrite:!1})}function j5(){return new Lc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Gk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Rd,depthTest:!1,depthWrite:!1})}function W5(){return new Lc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Gk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Rd,depthTest:!1,depthWrite:!1})}function Gk(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Kle(n){let t=new WeakMap,e=null;function i(a){if(a&&a.isTexture){let u=a.mapping,h=u===YM||u===ZM,p=u===Wp||u===Gp;if(h||p){let v=t.get(a),x=v!==void 0?v.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==x)return e===null&&(e=new L1(n)),v=h?e.fromEquirectangular(a,v):e.fromCubemap(a,v),v.texture.pmremVersion=a.pmremVersion,t.set(a,v),v.texture;if(v!==void 0)return v.texture;{let S=a.image;return h&&S&&S.height>0||p&&S&&r(S)?(e===null&&(e=new L1(n)),v=h?e.fromEquirectangular(a):e.fromCubemap(a),v.texture.pmremVersion=a.pmremVersion,t.set(a,v),a.addEventListener("dispose",s),v.texture):null}}}return a}function r(a){let u=0,h=6;for(let p=0;p<h;p++)a[p]!==void 0&&u++;return u===h}function s(a){let u=a.target;u.removeEventListener("dispose",s);let h=t.get(u);h!==void 0&&(t.delete(u),h.dispose())}function o(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:o}}function Qle(n){let t={};function e(i){if(t[i]!==void 0)return t[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return t[i]=r,r}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){let r=e(i);return r===null&&Vp("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Jle(n,t,e,i){let r={},s=new WeakMap;function o(v){let x=v.target;x.index!==null&&t.remove(x.index);for(let D in x.attributes)t.remove(x.attributes[D]);x.removeEventListener("dispose",o),delete r[x.id];let S=s.get(x);S&&(t.remove(S),s.delete(x)),i.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,e.memory.geometries--}function a(v,x){return r[x.id]===!0||(x.addEventListener("dispose",o),r[x.id]=!0,e.memory.geometries++),x}function u(v){let x=v.attributes;for(let S in x)t.update(x[S],n.ARRAY_BUFFER)}function h(v){let x=[],S=v.index,D=v.attributes.position,O=0;if(S!==null){let j=S.array;O=S.version;for(let Z=0,G=j.length;Z<G;Z+=3){let le=j[Z+0],K=j[Z+1],oe=j[Z+2];x.push(le,K,K,oe,oe,le)}}else if(D!==void 0){let j=D.array;O=D.version;for(let Z=0,G=j.length/3-1;Z<G;Z+=3){let le=Z+0,K=Z+1,oe=Z+2;x.push(le,K,K,oe,oe,le)}}else return;let N=new(Ek(x)?N_:L_)(x,1);N.version=O;let T=s.get(v);T&&t.remove(T),s.set(v,N)}function p(v){let x=s.get(v);if(x){let S=v.index;S!==null&&x.version<S.version&&h(v)}else h(v);return s.get(v)}return{get:a,update:u,getWireframeAttribute:p}}function ece(n,t,e){let i;function r(x){i=x}let s,o;function a(x){s=x.type,o=x.bytesPerElement}function u(x,S){n.drawElements(i,S,s,x*o),e.update(S,i,1)}function h(x,S,D){D!==0&&(n.drawElementsInstanced(i,S,s,x*o,D),e.update(S,i,D))}function p(x,S,D){if(D===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,S,0,s,x,0,D);let N=0;for(let T=0;T<D;T++)N+=S[T];e.update(N,i,1)}function v(x,S,D,O){if(D===0)return;let N=t.get("WEBGL_multi_draw");if(N===null)for(let T=0;T<x.length;T++)h(x[T]/o,S[T],O[T]);else{N.multiDrawElementsInstancedWEBGL(i,S,0,s,x,0,O,0,D);let T=0;for(let j=0;j<D;j++)T+=S[j]*O[j];e.update(T,i,1)}}this.setMode=r,this.setIndex=a,this.render=u,this.renderInstances=h,this.renderMultiDraw=p,this.renderMultiDrawInstances=v}function tce(n){let t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(e.calls++,o){case n.TRIANGLES:e.triangles+=a*(s/3);break;case n.LINES:e.lines+=a*(s/2);break;case n.LINE_STRIP:e.lines+=a*(s-1);break;case n.LINE_LOOP:e.lines+=a*s;break;case n.POINTS:e.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:r,update:i}}function nce(n,t,e){let i=new WeakMap,r=new sr;function s(o,a,u){let h=o.morphTargetInfluences,p=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,v=p!==void 0?p.length:0,x=i.get(a);if(x===void 0||x.count!==v){let V=function(){ue.dispose(),i.delete(a),a.removeEventListener("dispose",V)};var S=V;x!==void 0&&x.texture.dispose();let D=a.morphAttributes.position!==void 0,O=a.morphAttributes.normal!==void 0,N=a.morphAttributes.color!==void 0,T=a.morphAttributes.position||[],j=a.morphAttributes.normal||[],Z=a.morphAttributes.color||[],G=0;D===!0&&(G=1),O===!0&&(G=2),N===!0&&(G=3);let le=a.attributes.position.count*G,K=1;le>t.maxTextureSize&&(K=Math.ceil(le/t.maxTextureSize),le=t.maxTextureSize);let oe=new Float32Array(le*K*4*v),ue=new k_(oe,le,K,v);ue.type=Hl,ue.needsUpdate=!0;let te=G*4;for(let se=0;se<v;se++){let we=T[se],he=j[se],je=Z[se],ze=le*K*4*se;for(let de=0;de<we.count;de++){let Re=de*te;D===!0&&(r.fromBufferAttribute(we,de),oe[ze+Re+0]=r.x,oe[ze+Re+1]=r.y,oe[ze+Re+2]=r.z,oe[ze+Re+3]=0),O===!0&&(r.fromBufferAttribute(he,de),oe[ze+Re+4]=r.x,oe[ze+Re+5]=r.y,oe[ze+Re+6]=r.z,oe[ze+Re+7]=0),N===!0&&(r.fromBufferAttribute(je,de),oe[ze+Re+8]=r.x,oe[ze+Re+9]=r.y,oe[ze+Re+10]=r.z,oe[ze+Re+11]=je.itemSize===4?r.w:1)}}x={count:v,texture:ue,size:new Yn(le,K)},i.set(a,x),a.addEventListener("dispose",V)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)u.getUniforms().setValue(n,"morphTexture",o.morphTexture,e);else{let D=0;for(let N=0;N<h.length;N++)D+=h[N];let O=a.morphTargetsRelative?1:1-D;u.getUniforms().setValue(n,"morphTargetBaseInfluence",O),u.getUniforms().setValue(n,"morphTargetInfluences",h)}u.getUniforms().setValue(n,"morphTargetsTexture",x.texture,e),u.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}return{update:s}}function ice(n,t,e,i){let r=new WeakMap;function s(u){let h=i.render.frame,p=u.geometry,v=t.get(u,p);if(r.get(v)!==h&&(t.update(v),r.set(v,h)),u.isInstancedMesh&&(u.hasEventListener("dispose",a)===!1&&u.addEventListener("dispose",a),r.get(u)!==h&&(e.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&&e.update(u.instanceColor,n.ARRAY_BUFFER),r.set(u,h))),u.isSkinnedMesh){let x=u.skeleton;r.get(x)!==h&&(x.update(),r.set(x,h))}return v}function o(){r=new WeakMap}function a(u){let h=u.target;h.removeEventListener("dispose",a),e.remove(h.instanceMatrix),h.instanceColor!==null&&e.remove(h.instanceColor)}return{update:s,dispose:o}}var c8=new ll,G5=new G_(1,1),u8=new k_,d8=new EM,h8=new F_,$5=[],q5=[],X5=new Float32Array(16),Y5=new Float32Array(9),Z5=new Float32Array(4);function Wy(n,t,e){let i=n[0];if(i<=0||i>0)return n;let r=t*e,s=$5[r];if(s===void 0&&(s=new Float32Array(r),$5[r]=s),t!==0){i.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=e,n[o].toArray(s,a)}return s}function Ws(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function Gs(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function O1(n,t){let e=q5[t];e===void 0&&(e=new Int32Array(t),q5[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function rce(n,t){let e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function sce(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ws(e,t))return;n.uniform2fv(this.addr,t),Gs(e,t)}}function oce(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Ws(e,t))return;n.uniform3fv(this.addr,t),Gs(e,t)}}function ace(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ws(e,t))return;n.uniform4fv(this.addr,t),Gs(e,t)}}function lce(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Ws(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),Gs(e,t)}else{if(Ws(e,i))return;Z5.set(i),n.uniformMatrix2fv(this.addr,!1,Z5),Gs(e,i)}}function cce(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Ws(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),Gs(e,t)}else{if(Ws(e,i))return;Y5.set(i),n.uniformMatrix3fv(this.addr,!1,Y5),Gs(e,i)}}function uce(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Ws(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),Gs(e,t)}else{if(Ws(e,i))return;X5.set(i),n.uniformMatrix4fv(this.addr,!1,X5),Gs(e,i)}}function dce(n,t){let e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function hce(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ws(e,t))return;n.uniform2iv(this.addr,t),Gs(e,t)}}function fce(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Ws(e,t))return;n.uniform3iv(this.addr,t),Gs(e,t)}}function pce(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ws(e,t))return;n.uniform4iv(this.addr,t),Gs(e,t)}}function mce(n,t){let e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function gce(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ws(e,t))return;n.uniform2uiv(this.addr,t),Gs(e,t)}}function yce(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Ws(e,t))return;n.uniform3uiv(this.addr,t),Gs(e,t)}}function vce(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ws(e,t))return;n.uniform4uiv(this.addr,t),Gs(e,t)}}function _ce(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(G5.compareFunction=Ck,s=G5):s=c8,e.setTexture2D(t||s,r)}function bce(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture3D(t||d8,r)}function xce(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTextureCube(t||h8,r)}function wce(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2DArray(t||u8,r)}function Cce(n){switch(n){case 5126:return rce;case 35664:return sce;case 35665:return oce;case 35666:return ace;case 35674:return lce;case 35675:return cce;case 35676:return uce;case 5124:case 35670:return dce;case 35667:case 35671:return hce;case 35668:case 35672:return fce;case 35669:case 35673:return pce;case 5125:return mce;case 36294:return gce;case 36295:return yce;case 36296:return vce;case 35678:case 36198:case 36298:case 36306:case 35682:return _ce;case 35679:case 36299:case 36307:return bce;case 35680:case 36300:case 36308:case 36293:return xce;case 36289:case 36303:case 36311:case 36292:return wce}}function Sce(n,t){n.uniform1fv(this.addr,t)}function Mce(n,t){let e=Wy(t,this.size,2);n.uniform2fv(this.addr,e)}function Ece(n,t){let e=Wy(t,this.size,3);n.uniform3fv(this.addr,e)}function Tce(n,t){let e=Wy(t,this.size,4);n.uniform4fv(this.addr,e)}function Ace(n,t){let e=Wy(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function Dce(n,t){let e=Wy(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function Ice(n,t){let e=Wy(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function Pce(n,t){n.uniform1iv(this.addr,t)}function Rce(n,t){n.uniform2iv(this.addr,t)}function kce(n,t){n.uniform3iv(this.addr,t)}function Lce(n,t){n.uniform4iv(this.addr,t)}function Nce(n,t){n.uniform1uiv(this.addr,t)}function Oce(n,t){n.uniform2uiv(this.addr,t)}function Fce(n,t){n.uniform3uiv(this.addr,t)}function Bce(n,t){n.uniform4uiv(this.addr,t)}function Vce(n,t,e){let i=this.cache,r=t.length,s=O1(e,r);Ws(i,s)||(n.uniform1iv(this.addr,s),Gs(i,s));for(let o=0;o!==r;++o)e.setTexture2D(t[o]||c8,s[o])}function Uce(n,t,e){let i=this.cache,r=t.length,s=O1(e,r);Ws(i,s)||(n.uniform1iv(this.addr,s),Gs(i,s));for(let o=0;o!==r;++o)e.setTexture3D(t[o]||d8,s[o])}function zce(n,t,e){let i=this.cache,r=t.length,s=O1(e,r);Ws(i,s)||(n.uniform1iv(this.addr,s),Gs(i,s));for(let o=0;o!==r;++o)e.setTextureCube(t[o]||h8,s[o])}function Hce(n,t,e){let i=this.cache,r=t.length,s=O1(e,r);Ws(i,s)||(n.uniform1iv(this.addr,s),Gs(i,s));for(let o=0;o!==r;++o)e.setTexture2DArray(t[o]||u8,s[o])}function jce(n){switch(n){case 5126:return Sce;case 35664:return Mce;case 35665:return Ece;case 35666:return Tce;case 35674:return Ace;case 35675:return Dce;case 35676:return Ice;case 5124:case 35670:return Pce;case 35667:case 35671:return Rce;case 35668:case 35672:return kce;case 35669:case 35673:return Lce;case 5125:return Nce;case 36294:return Oce;case 36295:return Fce;case 36296:return Bce;case 35678:case 36198:case 36298:case 36306:case 35682:return Vce;case 35679:case 36299:case 36307:return Uce;case 35680:case 36300:case 36308:case 36293:return zce;case 36289:case 36303:case 36311:case 36292:return Hce}}var Fk=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=Cce(e.type)}},Bk=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=jce(e.type)}},Vk=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){let r=this.seq;for(let s=0,o=r.length;s!==o;++s){let a=r[s];a.setValue(t,e[a.id],i)}}},Ok=/(\w+)(\])?(\[|\.)?/g;function K5(n,t){n.seq.push(t),n.map[t.id]=t}function Wce(n,t,e){let i=n.name,r=i.length;for(Ok.lastIndex=0;;){let s=Ok.exec(i),o=Ok.lastIndex,a=s[1],u=s[2]==="]",h=s[3];if(u&&(a=a|0),h===void 0||h==="["&&o+2===r){K5(e,h===void 0?new Fk(a,n,t):new Bk(a,n,t));break}else{let v=e.map[a];v===void 0&&(v=new Vk(a),K5(e,v)),e=v}}}var jy=class{constructor(t,e){this.seq=[],this.map={};let i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let s=t.getActiveUniform(e,r),o=t.getUniformLocation(e,s.name);Wce(s,o,this)}}setValue(t,e,i,r){let s=this.map[e];s!==void 0&&s.setValue(t,i,r)}setOptional(t,e,i){let r=e[i];r!==void 0&&this.setValue(t,i,r)}static upload(t,e,i,r){for(let s=0,o=e.length;s!==o;++s){let a=e[s],u=i[a.id];u.needsUpdate!==!1&&a.setValue(t,u.value,r)}}static seqWithValue(t,e){let i=[];for(let r=0,s=t.length;r!==s;++r){let o=t[r];o.id in e&&i.push(o)}return i}};function Q5(n,t,e){let i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}var Gce=37297,$ce=0;function qce(n,t){let e=n.split(`
`),i=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++){let a=o+1;i.push(`${a===t?">":" "} ${a}: ${e[o]}`)}return i.join(`
`)}var J5=new vi;function Xce(n){Gi._getMatrix(J5,Gi.workingColorSpace,n);let t=`mat3( ${J5.elements.map(e=>e.toFixed(4))} )`;switch(Gi.getTransfer(n)){case P_:return[t,"LinearTransferOETF"];case dr:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function e8(n,t,e){let i=n.getShaderParameter(t,n.COMPILE_STATUS),r=n.getShaderInfoLog(t).trim();if(i&&r==="")return"";let s=/ERROR: 0:(\d+)/.exec(r);if(s){let o=parseInt(s[1]);return e.toUpperCase()+`

`+r+`

`+qce(n.getShaderSource(t),o)}else return r}function Yce(n,t){let e=Xce(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function Zce(n,t){let e;switch(t){case h5:e="Linear";break;case f5:e="Reinhard";break;case p5:e="Cineon";break;case m5:e="ACESFilmic";break;case y5:e="AgX";break;case v5:e="Neutral";break;case g5:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}var k1=new Ne;function Kce(){Gi.getLuminanceCoefficients(k1);let n=k1.x.toFixed(4),t=k1.y.toFixed(4),e=k1.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Qce(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(hb).join(`
`)}function Jce(n){let t=[];for(let e in n){let i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function eue(n,t){let e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let s=n.getActiveAttrib(t,r),o=s.name,a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),e[o]={type:s.type,location:n.getAttribLocation(t,o),locationSize:a}}return e}function hb(n){return n!==""}function t8(n,t){let e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function n8(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var tue=/^[ \t]*#include +<([\w\d./]+)>/gm;function Uk(n){return n.replace(tue,iue)}var nue=new Map;function iue(n,t){let e=Ai[t];if(e===void 0){let i=nue.get(t);if(i!==void 0)e=Ai[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return Uk(e)}var rue=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function i8(n){return n.replace(rue,sue)}function sue(n,t,e,i){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function r8(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function oue(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===ck?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===zM?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Nu&&(t="SHADOWMAP_TYPE_VSM"),t}function aue(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Wp:case Gp:t="ENVMAP_TYPE_CUBE";break;case rb:t="ENVMAP_TYPE_CUBE_UV";break}return t}function lue(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Gp:t="ENVMAP_MODE_REFRACTION";break}return t}function cue(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case fk:t="ENVMAP_BLENDING_MULTIPLY";break;case u5:t="ENVMAP_BLENDING_MIX";break;case d5:t="ENVMAP_BLENDING_ADD";break}return t}function uue(n){let t=n.envMapCubeUVHeight;if(t===null)return null;let e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function due(n,t,e,i){let r=n.getContext(),s=e.defines,o=e.vertexShader,a=e.fragmentShader,u=oue(e),h=aue(e),p=lue(e),v=cue(e),x=uue(e),S=Qce(e),D=Jce(s),O=r.createProgram(),N,T,j=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(N=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,D].filter(hb).join(`
`),N.length>0&&(N+=`
`),T=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,D].filter(hb).join(`
`),T.length>0&&(T+=`
`)):(N=[r8(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,D,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(hb).join(`
`),T=[r8(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,D,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+h:"",e.envMap?"#define "+p:"",e.envMap?"#define "+v:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==kd?"#define TONE_MAPPING":"",e.toneMapping!==kd?Ai.tonemapping_pars_fragment:"",e.toneMapping!==kd?Zce("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Ai.colorspace_pars_fragment,Yce("linearToOutputTexel",e.outputColorSpace),Kce(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(hb).join(`
`)),o=Uk(o),o=t8(o,e),o=n8(o,e),a=Uk(a),a=t8(a,e),a=n8(a,e),o=i8(o),a=i8(a),e.isRawShaderMaterial!==!0&&(j=`#version 300 es
`,N=[S,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+N,T=["#define varying in",e.glslVersion===Sk?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===Sk?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+T);let Z=j+N+o,G=j+T+a,le=Q5(r,r.VERTEX_SHADER,Z),K=Q5(r,r.FRAGMENT_SHADER,G);r.attachShader(O,le),r.attachShader(O,K),e.index0AttributeName!==void 0?r.bindAttribLocation(O,0,e.index0AttributeName):e.morphTargets===!0&&r.bindAttribLocation(O,0,"position"),r.linkProgram(O);function oe(se){if(n.debug.checkShaderErrors){let we=r.getProgramInfoLog(O).trim(),he=r.getShaderInfoLog(le).trim(),je=r.getShaderInfoLog(K).trim(),ze=!0,de=!0;if(r.getProgramParameter(O,r.LINK_STATUS)===!1)if(ze=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,O,le,K);else{let Re=e8(r,le,"vertex"),me=e8(r,K,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(O,r.VALIDATE_STATUS)+`

Material Name: `+se.name+`
Material Type: `+se.type+`

Program Info Log: `+we+`
`+Re+`
`+me)}else we!==""?console.warn("THREE.WebGLProgram: Program Info Log:",we):(he===""||je==="")&&(de=!1);de&&(se.diagnostics={runnable:ze,programLog:we,vertexShader:{log:he,prefix:N},fragmentShader:{log:je,prefix:T}})}r.deleteShader(le),r.deleteShader(K),ue=new jy(r,O),te=eue(r,O)}let ue;this.getUniforms=function(){return ue===void 0&&oe(this),ue};let te;this.getAttributes=function(){return te===void 0&&oe(this),te};let V=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return V===!1&&(V=r.getProgramParameter(O,Gce)),V},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(O),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=$ce++,this.cacheKey=t,this.usedTimes=1,this.program=O,this.vertexShader=le,this.fragmentShader=K,this}var hue=0,zk=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,i=t.fragmentShader,r=this._getShaderStage(e),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(t);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){let e=this.shaderCache,i=e.get(t);return i===void 0&&(i=new Hk(t),e.set(t,i)),i}},Hk=class{constructor(t){this.id=hue++,this.code=t,this.usedTimes=0}};function fue(n,t,e,i,r,s,o){let a=new Sy,u=new zk,h=new Set,p=[],v=r.logarithmicDepthBuffer,x=r.vertexTextures,S=r.precision,D={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function O(te){return h.add(te),te===0?"uv":`uv${te}`}function N(te,V,se,we,he){let je=we.fog,ze=he.geometry,de=te.isMeshStandardMaterial?we.environment:null,Re=(te.isMeshStandardMaterial?e:t).get(te.envMap||de),me=Re&&Re.mapping===rb?Re.image.height:null,$e=D[te.type];te.precision!==null&&(S=r.getMaxPrecision(te.precision),S!==te.precision&&console.warn("THREE.WebGLProgram.getParameters:",te.precision,"not supported, using",S,"instead."));let tt=ze.morphAttributes.position||ze.morphAttributes.normal||ze.morphAttributes.color,xt=tt!==void 0?tt.length:0,Tt=0;ze.morphAttributes.position!==void 0&&(Tt=1),ze.morphAttributes.normal!==void 0&&(Tt=2),ze.morphAttributes.color!==void 0&&(Tt=3);let ut,Ie,at,Rt;if($e){let Oi=Ou[$e];ut=Oi.vertexShader,Ie=Oi.fragmentShader}else ut=te.vertexShader,Ie=te.fragmentShader,u.update(te),at=u.getVertexShaderID(te),Rt=u.getFragmentShaderID(te);let rt=n.getRenderTarget(),zt=n.state.buffers.depth.getReversed(),Sn=he.isInstancedMesh===!0,dn=he.isBatchedMesh===!0,Mt=!!te.map,Zi=!!te.matcap,Bn=!!Re,Me=!!te.aoMap,hr=!!te.lightMap,Qn=!!te.bumpMap,fi=!!te.normalMap,rn=!!te.displacementMap,ei=!!te.emissiveMap,hn=!!te.metalnessMap,Rn=!!te.roughnessMap,$i=te.anisotropy>0,fe=te.clearcoat>0,J=te.dispersion>0,Ge=te.iridescence>0,nt=te.sheen>0,dt=te.transmission>0,Qe=$i&&!!te.anisotropyMap,yn=fe&&!!te.clearcoatMap,Ht=fe&&!!te.clearcoatNormalMap,kt=fe&&!!te.clearcoatRoughnessMap,fn=Ge&&!!te.iridescenceMap,vt=Ge&&!!te.iridescenceThicknessMap,Jt=nt&&!!te.sheenColorMap,pn=nt&&!!te.sheenRoughnessMap,vn=!!te.specularMap,Ft=!!te.specularColorMap,_n=!!te.specularIntensityMap,Pe=dt&&!!te.transmissionMap,Lt=dt&&!!te.thicknessMap,Ct=!!te.gradientMap,nn=!!te.alphaMap,pt=te.alphaTest>0,ct=!!te.alphaHash,sn=!!te.extensions,Vn=kd;te.toneMapped&&(rt===null||rt.isXRRenderTarget===!0)&&(Vn=n.toneMapping);let Dn={shaderID:$e,shaderType:te.type,shaderName:te.name,vertexShader:ut,fragmentShader:Ie,defines:te.defines,customVertexShaderID:at,customFragmentShaderID:Rt,isRawShaderMaterial:te.isRawShaderMaterial===!0,glslVersion:te.glslVersion,precision:S,batching:dn,batchingColor:dn&&he._colorsTexture!==null,instancing:Sn,instancingColor:Sn&&he.instanceColor!==null,instancingMorph:Sn&&he.morphTexture!==null,supportsVertexTextures:x,outputColorSpace:rt===null?n.outputColorSpace:rt.isXRRenderTarget===!0?rt.texture.colorSpace:po,alphaToCoverage:!!te.alphaToCoverage,map:Mt,matcap:Zi,envMap:Bn,envMapMode:Bn&&Re.mapping,envMapCubeUVHeight:me,aoMap:Me,lightMap:hr,bumpMap:Qn,normalMap:fi,displacementMap:x&&rn,emissiveMap:ei,normalMapObjectSpace:fi&&te.normalMapType===C5,normalMapTangentSpace:fi&&te.normalMapType===wk,metalnessMap:hn,roughnessMap:Rn,anisotropy:$i,anisotropyMap:Qe,clearcoat:fe,clearcoatMap:yn,clearcoatNormalMap:Ht,clearcoatRoughnessMap:kt,dispersion:J,iridescence:Ge,iridescenceMap:fn,iridescenceThicknessMap:vt,sheen:nt,sheenColorMap:Jt,sheenRoughnessMap:pn,specularMap:vn,specularColorMap:Ft,specularIntensityMap:_n,transmission:dt,transmissionMap:Pe,thicknessMap:Lt,gradientMap:Ct,opaque:te.transparent===!1&&te.blending===Lp&&te.alphaToCoverage===!1,alphaMap:nn,alphaTest:pt,alphaHash:ct,combine:te.combine,mapUv:Mt&&O(te.map.channel),aoMapUv:Me&&O(te.aoMap.channel),lightMapUv:hr&&O(te.lightMap.channel),bumpMapUv:Qn&&O(te.bumpMap.channel),normalMapUv:fi&&O(te.normalMap.channel),displacementMapUv:rn&&O(te.displacementMap.channel),emissiveMapUv:ei&&O(te.emissiveMap.channel),metalnessMapUv:hn&&O(te.metalnessMap.channel),roughnessMapUv:Rn&&O(te.roughnessMap.channel),anisotropyMapUv:Qe&&O(te.anisotropyMap.channel),clearcoatMapUv:yn&&O(te.clearcoatMap.channel),clearcoatNormalMapUv:Ht&&O(te.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:kt&&O(te.clearcoatRoughnessMap.channel),iridescenceMapUv:fn&&O(te.iridescenceMap.channel),iridescenceThicknessMapUv:vt&&O(te.iridescenceThicknessMap.channel),sheenColorMapUv:Jt&&O(te.sheenColorMap.channel),sheenRoughnessMapUv:pn&&O(te.sheenRoughnessMap.channel),specularMapUv:vn&&O(te.specularMap.channel),specularColorMapUv:Ft&&O(te.specularColorMap.channel),specularIntensityMapUv:_n&&O(te.specularIntensityMap.channel),transmissionMapUv:Pe&&O(te.transmissionMap.channel),thicknessMapUv:Lt&&O(te.thicknessMap.channel),alphaMapUv:nn&&O(te.alphaMap.channel),vertexTangents:!!ze.attributes.tangent&&(fi||$i),vertexColors:te.vertexColors,vertexAlphas:te.vertexColors===!0&&!!ze.attributes.color&&ze.attributes.color.itemSize===4,pointsUvs:he.isPoints===!0&&!!ze.attributes.uv&&(Mt||nn),fog:!!je,useFog:te.fog===!0,fogExp2:!!je&&je.isFogExp2,flatShading:te.flatShading===!0,sizeAttenuation:te.sizeAttenuation===!0,logarithmicDepthBuffer:v,reverseDepthBuffer:zt,skinning:he.isSkinnedMesh===!0,morphTargets:ze.morphAttributes.position!==void 0,morphNormals:ze.morphAttributes.normal!==void 0,morphColors:ze.morphAttributes.color!==void 0,morphTargetsCount:xt,morphTextureStride:Tt,numDirLights:V.directional.length,numPointLights:V.point.length,numSpotLights:V.spot.length,numSpotLightMaps:V.spotLightMap.length,numRectAreaLights:V.rectArea.length,numHemiLights:V.hemi.length,numDirLightShadows:V.directionalShadowMap.length,numPointLightShadows:V.pointShadowMap.length,numSpotLightShadows:V.spotShadowMap.length,numSpotLightShadowsWithMaps:V.numSpotLightShadowsWithMaps,numLightProbes:V.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:te.dithering,shadowMapEnabled:n.shadowMap.enabled&&se.length>0,shadowMapType:n.shadowMap.type,toneMapping:Vn,decodeVideoTexture:Mt&&te.map.isVideoTexture===!0&&Gi.getTransfer(te.map.colorSpace)===dr,decodeVideoTextureEmissive:ei&&te.emissiveMap.isVideoTexture===!0&&Gi.getTransfer(te.emissiveMap.colorSpace)===dr,premultipliedAlpha:te.premultipliedAlpha,doubleSided:te.side===zl,flipSided:te.side===oa,useDepthPacking:te.depthPacking>=0,depthPacking:te.depthPacking||0,index0AttributeName:te.index0AttributeName,extensionClipCullDistance:sn&&te.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(sn&&te.extensions.multiDraw===!0||dn)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:te.customProgramCacheKey()};return Dn.vertexUv1s=h.has(1),Dn.vertexUv2s=h.has(2),Dn.vertexUv3s=h.has(3),h.clear(),Dn}function T(te){let V=[];if(te.shaderID?V.push(te.shaderID):(V.push(te.customVertexShaderID),V.push(te.customFragmentShaderID)),te.defines!==void 0)for(let se in te.defines)V.push(se),V.push(te.defines[se]);return te.isRawShaderMaterial===!1&&(j(V,te),Z(V,te),V.push(n.outputColorSpace)),V.push(te.customProgramCacheKey),V.join()}function j(te,V){te.push(V.precision),te.push(V.outputColorSpace),te.push(V.envMapMode),te.push(V.envMapCubeUVHeight),te.push(V.mapUv),te.push(V.alphaMapUv),te.push(V.lightMapUv),te.push(V.aoMapUv),te.push(V.bumpMapUv),te.push(V.normalMapUv),te.push(V.displacementMapUv),te.push(V.emissiveMapUv),te.push(V.metalnessMapUv),te.push(V.roughnessMapUv),te.push(V.anisotropyMapUv),te.push(V.clearcoatMapUv),te.push(V.clearcoatNormalMapUv),te.push(V.clearcoatRoughnessMapUv),te.push(V.iridescenceMapUv),te.push(V.iridescenceThicknessMapUv),te.push(V.sheenColorMapUv),te.push(V.sheenRoughnessMapUv),te.push(V.specularMapUv),te.push(V.specularColorMapUv),te.push(V.specularIntensityMapUv),te.push(V.transmissionMapUv),te.push(V.thicknessMapUv),te.push(V.combine),te.push(V.fogExp2),te.push(V.sizeAttenuation),te.push(V.morphTargetsCount),te.push(V.morphAttributeCount),te.push(V.numDirLights),te.push(V.numPointLights),te.push(V.numSpotLights),te.push(V.numSpotLightMaps),te.push(V.numHemiLights),te.push(V.numRectAreaLights),te.push(V.numDirLightShadows),te.push(V.numPointLightShadows),te.push(V.numSpotLightShadows),te.push(V.numSpotLightShadowsWithMaps),te.push(V.numLightProbes),te.push(V.shadowMapType),te.push(V.toneMapping),te.push(V.numClippingPlanes),te.push(V.numClipIntersection),te.push(V.depthPacking)}function Z(te,V){a.disableAll(),V.supportsVertexTextures&&a.enable(0),V.instancing&&a.enable(1),V.instancingColor&&a.enable(2),V.instancingMorph&&a.enable(3),V.matcap&&a.enable(4),V.envMap&&a.enable(5),V.normalMapObjectSpace&&a.enable(6),V.normalMapTangentSpace&&a.enable(7),V.clearcoat&&a.enable(8),V.iridescence&&a.enable(9),V.alphaTest&&a.enable(10),V.vertexColors&&a.enable(11),V.vertexAlphas&&a.enable(12),V.vertexUv1s&&a.enable(13),V.vertexUv2s&&a.enable(14),V.vertexUv3s&&a.enable(15),V.vertexTangents&&a.enable(16),V.anisotropy&&a.enable(17),V.alphaHash&&a.enable(18),V.batching&&a.enable(19),V.dispersion&&a.enable(20),V.batchingColor&&a.enable(21),te.push(a.mask),a.disableAll(),V.fog&&a.enable(0),V.useFog&&a.enable(1),V.flatShading&&a.enable(2),V.logarithmicDepthBuffer&&a.enable(3),V.reverseDepthBuffer&&a.enable(4),V.skinning&&a.enable(5),V.morphTargets&&a.enable(6),V.morphNormals&&a.enable(7),V.morphColors&&a.enable(8),V.premultipliedAlpha&&a.enable(9),V.shadowMapEnabled&&a.enable(10),V.doubleSided&&a.enable(11),V.flipSided&&a.enable(12),V.useDepthPacking&&a.enable(13),V.dithering&&a.enable(14),V.transmission&&a.enable(15),V.sheen&&a.enable(16),V.opaque&&a.enable(17),V.pointsUvs&&a.enable(18),V.decodeVideoTexture&&a.enable(19),V.decodeVideoTextureEmissive&&a.enable(20),V.alphaToCoverage&&a.enable(21),te.push(a.mask)}function G(te){let V=D[te.type],se;if(V){let we=Ou[V];se=O5.clone(we.uniforms)}else se=te.uniforms;return se}function le(te,V){let se;for(let we=0,he=p.length;we<he;we++){let je=p[we];if(je.cacheKey===V){se=je,++se.usedTimes;break}}return se===void 0&&(se=new due(n,V,te,s),p.push(se)),se}function K(te){if(--te.usedTimes===0){let V=p.indexOf(te);p[V]=p[p.length-1],p.pop(),te.destroy()}}function oe(te){u.remove(te)}function ue(){u.dispose()}return{getParameters:N,getProgramCacheKey:T,getUniforms:G,acquireProgram:le,releaseProgram:K,releaseShaderCache:oe,programs:p,dispose:ue}}function pue(){let n=new WeakMap;function t(o){return n.has(o)}function e(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,u){n.get(o)[a]=u}function s(){n=new WeakMap}return{has:t,get:e,remove:i,update:r,dispose:s}}function mue(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function s8(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function o8(){let n=[],t=0,e=[],i=[],r=[];function s(){t=0,e.length=0,i.length=0,r.length=0}function o(v,x,S,D,O,N){let T=n[t];return T===void 0?(T={id:v.id,object:v,geometry:x,material:S,groupOrder:D,renderOrder:v.renderOrder,z:O,group:N},n[t]=T):(T.id=v.id,T.object=v,T.geometry=x,T.material=S,T.groupOrder=D,T.renderOrder=v.renderOrder,T.z=O,T.group=N),t++,T}function a(v,x,S,D,O,N){let T=o(v,x,S,D,O,N);S.transmission>0?i.push(T):S.transparent===!0?r.push(T):e.push(T)}function u(v,x,S,D,O,N){let T=o(v,x,S,D,O,N);S.transmission>0?i.unshift(T):S.transparent===!0?r.unshift(T):e.unshift(T)}function h(v,x){e.length>1&&e.sort(v||mue),i.length>1&&i.sort(x||s8),r.length>1&&r.sort(x||s8)}function p(){for(let v=t,x=n.length;v<x;v++){let S=n[v];if(S.id===null)break;S.id=null,S.object=null,S.geometry=null,S.material=null,S.group=null}}return{opaque:e,transmissive:i,transparent:r,init:s,push:a,unshift:u,finish:p,sort:h}}function gue(){let n=new WeakMap;function t(i,r){let s=n.get(i),o;return s===void 0?(o=new o8,n.set(i,[o])):r>=s.length?(o=new o8,s.push(o)):o=s[r],o}function e(){n=new WeakMap}return{get:t,dispose:e}}function yue(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new Ne,color:new Nn};break;case"SpotLight":e={position:new Ne,direction:new Ne,color:new Nn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new Ne,color:new Nn,distance:0,decay:0};break;case"HemisphereLight":e={direction:new Ne,skyColor:new Nn,groundColor:new Nn};break;case"RectAreaLight":e={color:new Nn,position:new Ne,halfWidth:new Ne,halfHeight:new Ne};break}return n[t.id]=e,e}}}function vue(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yn};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yn};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yn,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}var _ue=0;function bue(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function xue(n){let t=new yue,e=vue(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)i.probe.push(new Ne);let r=new Ne,s=new hi,o=new hi;function a(h){let p=0,v=0,x=0;for(let te=0;te<9;te++)i.probe[te].set(0,0,0);let S=0,D=0,O=0,N=0,T=0,j=0,Z=0,G=0,le=0,K=0,oe=0;h.sort(bue);for(let te=0,V=h.length;te<V;te++){let se=h[te],we=se.color,he=se.intensity,je=se.distance,ze=se.shadow&&se.shadow.map?se.shadow.map.texture:null;if(se.isAmbientLight)p+=we.r*he,v+=we.g*he,x+=we.b*he;else if(se.isLightProbe){for(let de=0;de<9;de++)i.probe[de].addScaledVector(se.sh.coefficients[de],he);oe++}else if(se.isDirectionalLight){let de=t.get(se);if(de.color.copy(se.color).multiplyScalar(se.intensity),se.castShadow){let Re=se.shadow,me=e.get(se);me.shadowIntensity=Re.intensity,me.shadowBias=Re.bias,me.shadowNormalBias=Re.normalBias,me.shadowRadius=Re.radius,me.shadowMapSize=Re.mapSize,i.directionalShadow[S]=me,i.directionalShadowMap[S]=ze,i.directionalShadowMatrix[S]=se.shadow.matrix,j++}i.directional[S]=de,S++}else if(se.isSpotLight){let de=t.get(se);de.position.setFromMatrixPosition(se.matrixWorld),de.color.copy(we).multiplyScalar(he),de.distance=je,de.coneCos=Math.cos(se.angle),de.penumbraCos=Math.cos(se.angle*(1-se.penumbra)),de.decay=se.decay,i.spot[O]=de;let Re=se.shadow;if(se.map&&(i.spotLightMap[le]=se.map,le++,Re.updateMatrices(se),se.castShadow&&K++),i.spotLightMatrix[O]=Re.matrix,se.castShadow){let me=e.get(se);me.shadowIntensity=Re.intensity,me.shadowBias=Re.bias,me.shadowNormalBias=Re.normalBias,me.shadowRadius=Re.radius,me.shadowMapSize=Re.mapSize,i.spotShadow[O]=me,i.spotShadowMap[O]=ze,G++}O++}else if(se.isRectAreaLight){let de=t.get(se);de.color.copy(we).multiplyScalar(he),de.halfWidth.set(se.width*.5,0,0),de.halfHeight.set(0,se.height*.5,0),i.rectArea[N]=de,N++}else if(se.isPointLight){let de=t.get(se);if(de.color.copy(se.color).multiplyScalar(se.intensity),de.distance=se.distance,de.decay=se.decay,se.castShadow){let Re=se.shadow,me=e.get(se);me.shadowIntensity=Re.intensity,me.shadowBias=Re.bias,me.shadowNormalBias=Re.normalBias,me.shadowRadius=Re.radius,me.shadowMapSize=Re.mapSize,me.shadowCameraNear=Re.camera.near,me.shadowCameraFar=Re.camera.far,i.pointShadow[D]=me,i.pointShadowMap[D]=ze,i.pointShadowMatrix[D]=se.shadow.matrix,Z++}i.point[D]=de,D++}else if(se.isHemisphereLight){let de=t.get(se);de.skyColor.copy(se.color).multiplyScalar(he),de.groundColor.copy(se.groundColor).multiplyScalar(he),i.hemi[T]=de,T++}}N>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Yt.LTC_FLOAT_1,i.rectAreaLTC2=Yt.LTC_FLOAT_2):(i.rectAreaLTC1=Yt.LTC_HALF_1,i.rectAreaLTC2=Yt.LTC_HALF_2)),i.ambient[0]=p,i.ambient[1]=v,i.ambient[2]=x;let ue=i.hash;(ue.directionalLength!==S||ue.pointLength!==D||ue.spotLength!==O||ue.rectAreaLength!==N||ue.hemiLength!==T||ue.numDirectionalShadows!==j||ue.numPointShadows!==Z||ue.numSpotShadows!==G||ue.numSpotMaps!==le||ue.numLightProbes!==oe)&&(i.directional.length=S,i.spot.length=O,i.rectArea.length=N,i.point.length=D,i.hemi.length=T,i.directionalShadow.length=j,i.directionalShadowMap.length=j,i.pointShadow.length=Z,i.pointShadowMap.length=Z,i.spotShadow.length=G,i.spotShadowMap.length=G,i.directionalShadowMatrix.length=j,i.pointShadowMatrix.length=Z,i.spotLightMatrix.length=G+le-K,i.spotLightMap.length=le,i.numSpotLightShadowsWithMaps=K,i.numLightProbes=oe,ue.directionalLength=S,ue.pointLength=D,ue.spotLength=O,ue.rectAreaLength=N,ue.hemiLength=T,ue.numDirectionalShadows=j,ue.numPointShadows=Z,ue.numSpotShadows=G,ue.numSpotMaps=le,ue.numLightProbes=oe,i.version=_ue++)}function u(h,p){let v=0,x=0,S=0,D=0,O=0,N=p.matrixWorldInverse;for(let T=0,j=h.length;T<j;T++){let Z=h[T];if(Z.isDirectionalLight){let G=i.directional[v];G.direction.setFromMatrixPosition(Z.matrixWorld),r.setFromMatrixPosition(Z.target.matrixWorld),G.direction.sub(r),G.direction.transformDirection(N),v++}else if(Z.isSpotLight){let G=i.spot[S];G.position.setFromMatrixPosition(Z.matrixWorld),G.position.applyMatrix4(N),G.direction.setFromMatrixPosition(Z.matrixWorld),r.setFromMatrixPosition(Z.target.matrixWorld),G.direction.sub(r),G.direction.transformDirection(N),S++}else if(Z.isRectAreaLight){let G=i.rectArea[D];G.position.setFromMatrixPosition(Z.matrixWorld),G.position.applyMatrix4(N),o.identity(),s.copy(Z.matrixWorld),s.premultiply(N),o.extractRotation(s),G.halfWidth.set(Z.width*.5,0,0),G.halfHeight.set(0,Z.height*.5,0),G.halfWidth.applyMatrix4(o),G.halfHeight.applyMatrix4(o),D++}else if(Z.isPointLight){let G=i.point[x];G.position.setFromMatrixPosition(Z.matrixWorld),G.position.applyMatrix4(N),x++}else if(Z.isHemisphereLight){let G=i.hemi[O];G.direction.setFromMatrixPosition(Z.matrixWorld),G.direction.transformDirection(N),O++}}}return{setup:a,setupView:u,state:i}}function a8(n){let t=new xue(n),e=[],i=[];function r(p){h.camera=p,e.length=0,i.length=0}function s(p){e.push(p)}function o(p){i.push(p)}function a(){t.setup(e)}function u(p){t.setupView(e,p)}let h={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:r,state:h,setupLights:a,setupLightsView:u,pushLight:s,pushShadow:o}}function wue(n){let t=new WeakMap;function e(r,s=0){let o=t.get(r),a;return o===void 0?(a=new a8(n),t.set(r,[a])):s>=o.length?(a=new a8(n),o.push(a)):a=o[s],a}function i(){t=new WeakMap}return{get:e,dispose:i}}var Cue=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Sue=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Mue(n,t,e){let i=new Iy,r=new Yn,s=new Yn,o=new sr,a=new PM({depthPacking:w5}),u=new RM,h={},p=e.maxTextureSize,v={[Rc]:oa,[oa]:Rc,[zl]:zl},x=new Lc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Yn},radius:{value:4}},vertexShader:Cue,fragmentShader:Sue}),S=x.clone();S.defines.HORIZONTAL_PASS=1;let D=new Pa;D.setAttribute("position",new As(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let O=new Ds(D,x),N=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ck;let T=this.type;this.render=function(K,oe,ue){if(N.enabled===!1||N.autoUpdate===!1&&N.needsUpdate===!1||K.length===0)return;let te=n.getRenderTarget(),V=n.getActiveCubeFace(),se=n.getActiveMipmapLevel(),we=n.state;we.setBlending(Rd),we.buffers.color.setClear(1,1,1,1),we.buffers.depth.setTest(!0),we.setScissorTest(!1);let he=T!==Nu&&this.type===Nu,je=T===Nu&&this.type!==Nu;for(let ze=0,de=K.length;ze<de;ze++){let Re=K[ze],me=Re.shadow;if(me===void 0){console.warn("THREE.WebGLShadowMap:",Re,"has no shadow.");continue}if(me.autoUpdate===!1&&me.needsUpdate===!1)continue;r.copy(me.mapSize);let $e=me.getFrameExtents();if(r.multiply($e),s.copy(me.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(s.x=Math.floor(p/$e.x),r.x=s.x*$e.x,me.mapSize.x=s.x),r.y>p&&(s.y=Math.floor(p/$e.y),r.y=s.y*$e.y,me.mapSize.y=s.y)),me.map===null||he===!0||je===!0){let xt=this.type!==Nu?{minFilter:fo,magFilter:fo}:{};me.map!==null&&me.map.dispose(),me.map=new Du(r.x,r.y,xt),me.map.texture.name=Re.name+".shadowMap",me.camera.updateProjectionMatrix()}n.setRenderTarget(me.map),n.clear();let tt=me.getViewportCount();for(let xt=0;xt<tt;xt++){let Tt=me.getViewport(xt);o.set(s.x*Tt.x,s.y*Tt.y,s.x*Tt.z,s.y*Tt.w),we.viewport(o),me.updateMatrices(Re,xt),i=me.getFrustum(),G(oe,ue,me.camera,Re,this.type)}me.isPointLightShadow!==!0&&this.type===Nu&&j(me,ue),me.needsUpdate=!1}T=this.type,N.needsUpdate=!1,n.setRenderTarget(te,V,se)};function j(K,oe){let ue=t.update(O);x.defines.VSM_SAMPLES!==K.blurSamples&&(x.defines.VSM_SAMPLES=K.blurSamples,S.defines.VSM_SAMPLES=K.blurSamples,x.needsUpdate=!0,S.needsUpdate=!0),K.mapPass===null&&(K.mapPass=new Du(r.x,r.y)),x.uniforms.shadow_pass.value=K.map.texture,x.uniforms.resolution.value=K.mapSize,x.uniforms.radius.value=K.radius,n.setRenderTarget(K.mapPass),n.clear(),n.renderBufferDirect(oe,null,ue,x,O,null),S.uniforms.shadow_pass.value=K.mapPass.texture,S.uniforms.resolution.value=K.mapSize,S.uniforms.radius.value=K.radius,n.setRenderTarget(K.map),n.clear(),n.renderBufferDirect(oe,null,ue,S,O,null)}function Z(K,oe,ue,te){let V=null,se=ue.isPointLight===!0?K.customDistanceMaterial:K.customDepthMaterial;if(se!==void 0)V=se;else if(V=ue.isPointLight===!0?u:a,n.localClippingEnabled&&oe.clipShadows===!0&&Array.isArray(oe.clippingPlanes)&&oe.clippingPlanes.length!==0||oe.displacementMap&&oe.displacementScale!==0||oe.alphaMap&&oe.alphaTest>0||oe.map&&oe.alphaTest>0||oe.alphaToCoverage===!0){let we=V.uuid,he=oe.uuid,je=h[we];je===void 0&&(je={},h[we]=je);let ze=je[he];ze===void 0&&(ze=V.clone(),je[he]=ze,oe.addEventListener("dispose",le)),V=ze}if(V.visible=oe.visible,V.wireframe=oe.wireframe,te===Nu?V.side=oe.shadowSide!==null?oe.shadowSide:oe.side:V.side=oe.shadowSide!==null?oe.shadowSide:v[oe.side],V.alphaMap=oe.alphaMap,V.alphaTest=oe.alphaToCoverage===!0?.5:oe.alphaTest,V.map=oe.map,V.clipShadows=oe.clipShadows,V.clippingPlanes=oe.clippingPlanes,V.clipIntersection=oe.clipIntersection,V.displacementMap=oe.displacementMap,V.displacementScale=oe.displacementScale,V.displacementBias=oe.displacementBias,V.wireframeLinewidth=oe.wireframeLinewidth,V.linewidth=oe.linewidth,ue.isPointLight===!0&&V.isMeshDistanceMaterial===!0){let we=n.properties.get(V);we.light=ue}return V}function G(K,oe,ue,te,V){if(K.visible===!1)return;if(K.layers.test(oe.layers)&&(K.isMesh||K.isLine||K.isPoints)&&(K.castShadow||K.receiveShadow&&V===Nu)&&(!K.frustumCulled||i.intersectsObject(K))){K.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,K.matrixWorld);let he=t.update(K),je=K.material;if(Array.isArray(je)){let ze=he.groups;for(let de=0,Re=ze.length;de<Re;de++){let me=ze[de],$e=je[me.materialIndex];if($e&&$e.visible){let tt=Z(K,$e,te,V);K.onBeforeShadow(n,K,oe,ue,he,tt,me),n.renderBufferDirect(ue,null,he,tt,K,me),K.onAfterShadow(n,K,oe,ue,he,tt,me)}}}else if(je.visible){let ze=Z(K,je,te,V);K.onBeforeShadow(n,K,oe,ue,he,ze,null),n.renderBufferDirect(ue,null,he,ze,K,null),K.onAfterShadow(n,K,oe,ue,he,ze,null)}}let we=K.children;for(let he=0,je=we.length;he<je;he++)G(we[he],oe,ue,te,V)}function le(K){K.target.removeEventListener("dispose",le);for(let ue in h){let te=h[ue],V=K.target.uuid;V in te&&(te[V].dispose(),delete te[V])}}}var Eue={[HM]:jM,[WM]:qM,[GM]:XM,[Np]:$M,[jM]:HM,[qM]:WM,[XM]:GM,[$M]:Np};function Tue(n,t){function e(){let Pe=!1,Lt=new sr,Ct=null,nn=new sr(0,0,0,0);return{setMask:function(pt){Ct!==pt&&!Pe&&(n.colorMask(pt,pt,pt,pt),Ct=pt)},setLocked:function(pt){Pe=pt},setClear:function(pt,ct,sn,Vn,Dn){Dn===!0&&(pt*=Vn,ct*=Vn,sn*=Vn),Lt.set(pt,ct,sn,Vn),nn.equals(Lt)===!1&&(n.clearColor(pt,ct,sn,Vn),nn.copy(Lt))},reset:function(){Pe=!1,Ct=null,nn.set(-1,0,0,0)}}}function i(){let Pe=!1,Lt=!1,Ct=null,nn=null,pt=null;return{setReversed:function(ct){if(Lt!==ct){let sn=t.get("EXT_clip_control");ct?sn.clipControlEXT(sn.LOWER_LEFT_EXT,sn.ZERO_TO_ONE_EXT):sn.clipControlEXT(sn.LOWER_LEFT_EXT,sn.NEGATIVE_ONE_TO_ONE_EXT),Lt=ct;let Vn=pt;pt=null,this.setClear(Vn)}},getReversed:function(){return Lt},setTest:function(ct){ct?rt(n.DEPTH_TEST):zt(n.DEPTH_TEST)},setMask:function(ct){Ct!==ct&&!Pe&&(n.depthMask(ct),Ct=ct)},setFunc:function(ct){if(Lt&&(ct=Eue[ct]),nn!==ct){switch(ct){case HM:n.depthFunc(n.NEVER);break;case jM:n.depthFunc(n.ALWAYS);break;case WM:n.depthFunc(n.LESS);break;case Np:n.depthFunc(n.LEQUAL);break;case GM:n.depthFunc(n.EQUAL);break;case $M:n.depthFunc(n.GEQUAL);break;case qM:n.depthFunc(n.GREATER);break;case XM:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}nn=ct}},setLocked:function(ct){Pe=ct},setClear:function(ct){pt!==ct&&(Lt&&(ct=1-ct),n.clearDepth(ct),pt=ct)},reset:function(){Pe=!1,Ct=null,nn=null,pt=null,Lt=!1}}}function r(){let Pe=!1,Lt=null,Ct=null,nn=null,pt=null,ct=null,sn=null,Vn=null,Dn=null;return{setTest:function(Oi){Pe||(Oi?rt(n.STENCIL_TEST):zt(n.STENCIL_TEST))},setMask:function(Oi){Lt!==Oi&&!Pe&&(n.stencilMask(Oi),Lt=Oi)},setFunc:function(Oi,rs,ss){(Ct!==Oi||nn!==rs||pt!==ss)&&(n.stencilFunc(Oi,rs,ss),Ct=Oi,nn=rs,pt=ss)},setOp:function(Oi,rs,ss){(ct!==Oi||sn!==rs||Vn!==ss)&&(n.stencilOp(Oi,rs,ss),ct=Oi,sn=rs,Vn=ss)},setLocked:function(Oi){Pe=Oi},setClear:function(Oi){Dn!==Oi&&(n.clearStencil(Oi),Dn=Oi)},reset:function(){Pe=!1,Lt=null,Ct=null,nn=null,pt=null,ct=null,sn=null,Vn=null,Dn=null}}}let s=new e,o=new i,a=new r,u=new WeakMap,h=new WeakMap,p={},v={},x=new WeakMap,S=[],D=null,O=!1,N=null,T=null,j=null,Z=null,G=null,le=null,K=null,oe=new Nn(0,0,0),ue=0,te=!1,V=null,se=null,we=null,he=null,je=null,ze=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),de=!1,Re=0,me=n.getParameter(n.VERSION);me.indexOf("WebGL")!==-1?(Re=parseFloat(/^WebGL (\d)/.exec(me)[1]),de=Re>=1):me.indexOf("OpenGL ES")!==-1&&(Re=parseFloat(/^OpenGL ES (\d)/.exec(me)[1]),de=Re>=2);let $e=null,tt={},xt=n.getParameter(n.SCISSOR_BOX),Tt=n.getParameter(n.VIEWPORT),ut=new sr().fromArray(xt),Ie=new sr().fromArray(Tt);function at(Pe,Lt,Ct,nn){let pt=new Uint8Array(4),ct=n.createTexture();n.bindTexture(Pe,ct),n.texParameteri(Pe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Pe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let sn=0;sn<Ct;sn++)Pe===n.TEXTURE_3D||Pe===n.TEXTURE_2D_ARRAY?n.texImage3D(Lt,0,n.RGBA,1,1,nn,0,n.RGBA,n.UNSIGNED_BYTE,pt):n.texImage2D(Lt+sn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,pt);return ct}let Rt={};Rt[n.TEXTURE_2D]=at(n.TEXTURE_2D,n.TEXTURE_2D,1),Rt[n.TEXTURE_CUBE_MAP]=at(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Rt[n.TEXTURE_2D_ARRAY]=at(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Rt[n.TEXTURE_3D]=at(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),rt(n.DEPTH_TEST),o.setFunc(Np),Qn(!1),fi(lk),rt(n.CULL_FACE),Me(Rd);function rt(Pe){p[Pe]!==!0&&(n.enable(Pe),p[Pe]=!0)}function zt(Pe){p[Pe]!==!1&&(n.disable(Pe),p[Pe]=!1)}function Sn(Pe,Lt){return v[Pe]!==Lt?(n.bindFramebuffer(Pe,Lt),v[Pe]=Lt,Pe===n.DRAW_FRAMEBUFFER&&(v[n.FRAMEBUFFER]=Lt),Pe===n.FRAMEBUFFER&&(v[n.DRAW_FRAMEBUFFER]=Lt),!0):!1}function dn(Pe,Lt){let Ct=S,nn=!1;if(Pe){Ct=x.get(Lt),Ct===void 0&&(Ct=[],x.set(Lt,Ct));let pt=Pe.textures;if(Ct.length!==pt.length||Ct[0]!==n.COLOR_ATTACHMENT0){for(let ct=0,sn=pt.length;ct<sn;ct++)Ct[ct]=n.COLOR_ATTACHMENT0+ct;Ct.length=pt.length,nn=!0}}else Ct[0]!==n.BACK&&(Ct[0]=n.BACK,nn=!0);nn&&n.drawBuffers(Ct)}function Mt(Pe){return D!==Pe?(n.useProgram(Pe),D=Pe,!0):!1}let Zi={[qh]:n.FUNC_ADD,[q4]:n.FUNC_SUBTRACT,[X4]:n.FUNC_REVERSE_SUBTRACT};Zi[Y4]=n.MIN,Zi[Z4]=n.MAX;let Bn={[K4]:n.ZERO,[Q4]:n.ONE,[J4]:n.SRC_COLOR,[xM]:n.SRC_ALPHA,[s5]:n.SRC_ALPHA_SATURATE,[i5]:n.DST_COLOR,[t5]:n.DST_ALPHA,[e5]:n.ONE_MINUS_SRC_COLOR,[wM]:n.ONE_MINUS_SRC_ALPHA,[r5]:n.ONE_MINUS_DST_COLOR,[n5]:n.ONE_MINUS_DST_ALPHA,[o5]:n.CONSTANT_COLOR,[a5]:n.ONE_MINUS_CONSTANT_COLOR,[l5]:n.CONSTANT_ALPHA,[c5]:n.ONE_MINUS_CONSTANT_ALPHA};function Me(Pe,Lt,Ct,nn,pt,ct,sn,Vn,Dn,Oi){if(Pe===Rd){O===!0&&(zt(n.BLEND),O=!1);return}if(O===!1&&(rt(n.BLEND),O=!0),Pe!==$4){if(Pe!==N||Oi!==te){if((T!==qh||G!==qh)&&(n.blendEquation(n.FUNC_ADD),T=qh,G=qh),Oi)switch(Pe){case Lp:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case uk:n.blendFunc(n.ONE,n.ONE);break;case dk:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case hk:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pe);break}else switch(Pe){case Lp:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case uk:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case dk:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case hk:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pe);break}j=null,Z=null,le=null,K=null,oe.set(0,0,0),ue=0,N=Pe,te=Oi}return}pt=pt||Lt,ct=ct||Ct,sn=sn||nn,(Lt!==T||pt!==G)&&(n.blendEquationSeparate(Zi[Lt],Zi[pt]),T=Lt,G=pt),(Ct!==j||nn!==Z||ct!==le||sn!==K)&&(n.blendFuncSeparate(Bn[Ct],Bn[nn],Bn[ct],Bn[sn]),j=Ct,Z=nn,le=ct,K=sn),(Vn.equals(oe)===!1||Dn!==ue)&&(n.blendColor(Vn.r,Vn.g,Vn.b,Dn),oe.copy(Vn),ue=Dn),N=Pe,te=!1}function hr(Pe,Lt){Pe.side===zl?zt(n.CULL_FACE):rt(n.CULL_FACE);let Ct=Pe.side===oa;Lt&&(Ct=!Ct),Qn(Ct),Pe.blending===Lp&&Pe.transparent===!1?Me(Rd):Me(Pe.blending,Pe.blendEquation,Pe.blendSrc,Pe.blendDst,Pe.blendEquationAlpha,Pe.blendSrcAlpha,Pe.blendDstAlpha,Pe.blendColor,Pe.blendAlpha,Pe.premultipliedAlpha),o.setFunc(Pe.depthFunc),o.setTest(Pe.depthTest),o.setMask(Pe.depthWrite),s.setMask(Pe.colorWrite);let nn=Pe.stencilWrite;a.setTest(nn),nn&&(a.setMask(Pe.stencilWriteMask),a.setFunc(Pe.stencilFunc,Pe.stencilRef,Pe.stencilFuncMask),a.setOp(Pe.stencilFail,Pe.stencilZFail,Pe.stencilZPass)),ei(Pe.polygonOffset,Pe.polygonOffsetFactor,Pe.polygonOffsetUnits),Pe.alphaToCoverage===!0?rt(n.SAMPLE_ALPHA_TO_COVERAGE):zt(n.SAMPLE_ALPHA_TO_COVERAGE)}function Qn(Pe){V!==Pe&&(Pe?n.frontFace(n.CW):n.frontFace(n.CCW),V=Pe)}function fi(Pe){Pe!==W4?(rt(n.CULL_FACE),Pe!==se&&(Pe===lk?n.cullFace(n.BACK):Pe===G4?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):zt(n.CULL_FACE),se=Pe}function rn(Pe){Pe!==we&&(de&&n.lineWidth(Pe),we=Pe)}function ei(Pe,Lt,Ct){Pe?(rt(n.POLYGON_OFFSET_FILL),(he!==Lt||je!==Ct)&&(n.polygonOffset(Lt,Ct),he=Lt,je=Ct)):zt(n.POLYGON_OFFSET_FILL)}function hn(Pe){Pe?rt(n.SCISSOR_TEST):zt(n.SCISSOR_TEST)}function Rn(Pe){Pe===void 0&&(Pe=n.TEXTURE0+ze-1),$e!==Pe&&(n.activeTexture(Pe),$e=Pe)}function $i(Pe,Lt,Ct){Ct===void 0&&($e===null?Ct=n.TEXTURE0+ze-1:Ct=$e);let nn=tt[Ct];nn===void 0&&(nn={type:void 0,texture:void 0},tt[Ct]=nn),(nn.type!==Pe||nn.texture!==Lt)&&($e!==Ct&&(n.activeTexture(Ct),$e=Ct),n.bindTexture(Pe,Lt||Rt[Pe]),nn.type=Pe,nn.texture=Lt)}function fe(){let Pe=tt[$e];Pe!==void 0&&Pe.type!==void 0&&(n.bindTexture(Pe.type,null),Pe.type=void 0,Pe.texture=void 0)}function J(){try{n.compressedTexImage2D(...arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function Ge(){try{n.compressedTexImage3D(...arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function nt(){try{n.texSubImage2D(...arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function dt(){try{n.texSubImage3D(...arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function Qe(){try{n.compressedTexSubImage2D(...arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function yn(){try{n.compressedTexSubImage3D(...arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function Ht(){try{n.texStorage2D(...arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function kt(){try{n.texStorage3D(...arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function fn(){try{n.texImage2D(...arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function vt(){try{n.texImage3D(...arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function Jt(Pe){ut.equals(Pe)===!1&&(n.scissor(Pe.x,Pe.y,Pe.z,Pe.w),ut.copy(Pe))}function pn(Pe){Ie.equals(Pe)===!1&&(n.viewport(Pe.x,Pe.y,Pe.z,Pe.w),Ie.copy(Pe))}function vn(Pe,Lt){let Ct=h.get(Lt);Ct===void 0&&(Ct=new WeakMap,h.set(Lt,Ct));let nn=Ct.get(Pe);nn===void 0&&(nn=n.getUniformBlockIndex(Lt,Pe.name),Ct.set(Pe,nn))}function Ft(Pe,Lt){let nn=h.get(Lt).get(Pe);u.get(Lt)!==nn&&(n.uniformBlockBinding(Lt,nn,Pe.__bindingPointIndex),u.set(Lt,nn))}function _n(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},$e=null,tt={},v={},x=new WeakMap,S=[],D=null,O=!1,N=null,T=null,j=null,Z=null,G=null,le=null,K=null,oe=new Nn(0,0,0),ue=0,te=!1,V=null,se=null,we=null,he=null,je=null,ut.set(0,0,n.canvas.width,n.canvas.height),Ie.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:rt,disable:zt,bindFramebuffer:Sn,drawBuffers:dn,useProgram:Mt,setBlending:Me,setMaterial:hr,setFlipSided:Qn,setCullFace:fi,setLineWidth:rn,setPolygonOffset:ei,setScissorTest:hn,activeTexture:Rn,bindTexture:$i,unbindTexture:fe,compressedTexImage2D:J,compressedTexImage3D:Ge,texImage2D:fn,texImage3D:vt,updateUBOMapping:vn,uniformBlockBinding:Ft,texStorage2D:Ht,texStorage3D:kt,texSubImage2D:nt,texSubImage3D:dt,compressedTexSubImage2D:Qe,compressedTexSubImage3D:yn,scissor:Jt,viewport:pn,reset:_n}}function Aue(n,t,e,i,r,s,o){let a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new Yn,p=new WeakMap,v,x=new WeakMap,S=!1;try{S=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function D(fe,J){return S?new OffscreenCanvas(fe,J):wy("canvas")}function O(fe,J,Ge){let nt=1,dt=$i(fe);if((dt.width>Ge||dt.height>Ge)&&(nt=Ge/Math.max(dt.width,dt.height)),nt<1)if(typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&fe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&fe instanceof ImageBitmap||typeof VideoFrame<"u"&&fe instanceof VideoFrame){let Qe=Math.floor(nt*dt.width),yn=Math.floor(nt*dt.height);v===void 0&&(v=D(Qe,yn));let Ht=J?D(Qe,yn):v;return Ht.width=Qe,Ht.height=yn,Ht.getContext("2d").drawImage(fe,0,0,Qe,yn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+dt.width+"x"+dt.height+") to ("+Qe+"x"+yn+")."),Ht}else return"data"in fe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+dt.width+"x"+dt.height+")."),fe;return fe}function N(fe){return fe.generateMipmaps}function T(fe){n.generateMipmap(fe)}function j(fe){return fe.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:fe.isWebGL3DRenderTarget?n.TEXTURE_3D:fe.isWebGLArrayRenderTarget||fe.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function Z(fe,J,Ge,nt,dt=!1){if(fe!==null){if(n[fe]!==void 0)return n[fe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+fe+"'")}let Qe=J;if(J===n.RED&&(Ge===n.FLOAT&&(Qe=n.R32F),Ge===n.HALF_FLOAT&&(Qe=n.R16F),Ge===n.UNSIGNED_BYTE&&(Qe=n.R8)),J===n.RED_INTEGER&&(Ge===n.UNSIGNED_BYTE&&(Qe=n.R8UI),Ge===n.UNSIGNED_SHORT&&(Qe=n.R16UI),Ge===n.UNSIGNED_INT&&(Qe=n.R32UI),Ge===n.BYTE&&(Qe=n.R8I),Ge===n.SHORT&&(Qe=n.R16I),Ge===n.INT&&(Qe=n.R32I)),J===n.RG&&(Ge===n.FLOAT&&(Qe=n.RG32F),Ge===n.HALF_FLOAT&&(Qe=n.RG16F),Ge===n.UNSIGNED_BYTE&&(Qe=n.RG8)),J===n.RG_INTEGER&&(Ge===n.UNSIGNED_BYTE&&(Qe=n.RG8UI),Ge===n.UNSIGNED_SHORT&&(Qe=n.RG16UI),Ge===n.UNSIGNED_INT&&(Qe=n.RG32UI),Ge===n.BYTE&&(Qe=n.RG8I),Ge===n.SHORT&&(Qe=n.RG16I),Ge===n.INT&&(Qe=n.RG32I)),J===n.RGB_INTEGER&&(Ge===n.UNSIGNED_BYTE&&(Qe=n.RGB8UI),Ge===n.UNSIGNED_SHORT&&(Qe=n.RGB16UI),Ge===n.UNSIGNED_INT&&(Qe=n.RGB32UI),Ge===n.BYTE&&(Qe=n.RGB8I),Ge===n.SHORT&&(Qe=n.RGB16I),Ge===n.INT&&(Qe=n.RGB32I)),J===n.RGBA_INTEGER&&(Ge===n.UNSIGNED_BYTE&&(Qe=n.RGBA8UI),Ge===n.UNSIGNED_SHORT&&(Qe=n.RGBA16UI),Ge===n.UNSIGNED_INT&&(Qe=n.RGBA32UI),Ge===n.BYTE&&(Qe=n.RGBA8I),Ge===n.SHORT&&(Qe=n.RGBA16I),Ge===n.INT&&(Qe=n.RGBA32I)),J===n.RGB&&Ge===n.UNSIGNED_INT_5_9_9_9_REV&&(Qe=n.RGB9_E5),J===n.RGBA){let yn=dt?P_:Gi.getTransfer(nt);Ge===n.FLOAT&&(Qe=n.RGBA32F),Ge===n.HALF_FLOAT&&(Qe=n.RGBA16F),Ge===n.UNSIGNED_BYTE&&(Qe=yn===dr?n.SRGB8_ALPHA8:n.RGBA8),Ge===n.UNSIGNED_SHORT_4_4_4_4&&(Qe=n.RGBA4),Ge===n.UNSIGNED_SHORT_5_5_5_1&&(Qe=n.RGB5_A1)}return(Qe===n.R16F||Qe===n.R32F||Qe===n.RG16F||Qe===n.RG32F||Qe===n.RGBA16F||Qe===n.RGBA32F)&&t.get("EXT_color_buffer_float"),Qe}function G(fe,J){let Ge;return fe?J===null||J===Qh||J===By?Ge=n.DEPTH24_STENCIL8:J===Hl?Ge=n.DEPTH32F_STENCIL8:J===Oy&&(Ge=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):J===null||J===Qh||J===By?Ge=n.DEPTH_COMPONENT24:J===Hl?Ge=n.DEPTH_COMPONENT32F:J===Oy&&(Ge=n.DEPTH_COMPONENT16),Ge}function le(fe,J){return N(fe)===!0||fe.isFramebufferTexture&&fe.minFilter!==fo&&fe.minFilter!==ia?Math.log2(Math.max(J.width,J.height))+1:fe.mipmaps!==void 0&&fe.mipmaps.length>0?fe.mipmaps.length:fe.isCompressedTexture&&Array.isArray(fe.image)?J.mipmaps.length:1}function K(fe){let J=fe.target;J.removeEventListener("dispose",K),ue(J),J.isVideoTexture&&p.delete(J)}function oe(fe){let J=fe.target;J.removeEventListener("dispose",oe),V(J)}function ue(fe){let J=i.get(fe);if(J.__webglInit===void 0)return;let Ge=fe.source,nt=x.get(Ge);if(nt){let dt=nt[J.__cacheKey];dt.usedTimes--,dt.usedTimes===0&&te(fe),Object.keys(nt).length===0&&x.delete(Ge)}i.remove(fe)}function te(fe){let J=i.get(fe);n.deleteTexture(J.__webglTexture);let Ge=fe.source,nt=x.get(Ge);delete nt[J.__cacheKey],o.memory.textures--}function V(fe){let J=i.get(fe);if(fe.depthTexture&&(fe.depthTexture.dispose(),i.remove(fe.depthTexture)),fe.isWebGLCubeRenderTarget)for(let nt=0;nt<6;nt++){if(Array.isArray(J.__webglFramebuffer[nt]))for(let dt=0;dt<J.__webglFramebuffer[nt].length;dt++)n.deleteFramebuffer(J.__webglFramebuffer[nt][dt]);else n.deleteFramebuffer(J.__webglFramebuffer[nt]);J.__webglDepthbuffer&&n.deleteRenderbuffer(J.__webglDepthbuffer[nt])}else{if(Array.isArray(J.__webglFramebuffer))for(let nt=0;nt<J.__webglFramebuffer.length;nt++)n.deleteFramebuffer(J.__webglFramebuffer[nt]);else n.deleteFramebuffer(J.__webglFramebuffer);if(J.__webglDepthbuffer&&n.deleteRenderbuffer(J.__webglDepthbuffer),J.__webglMultisampledFramebuffer&&n.deleteFramebuffer(J.__webglMultisampledFramebuffer),J.__webglColorRenderbuffer)for(let nt=0;nt<J.__webglColorRenderbuffer.length;nt++)J.__webglColorRenderbuffer[nt]&&n.deleteRenderbuffer(J.__webglColorRenderbuffer[nt]);J.__webglDepthRenderbuffer&&n.deleteRenderbuffer(J.__webglDepthRenderbuffer)}let Ge=fe.textures;for(let nt=0,dt=Ge.length;nt<dt;nt++){let Qe=i.get(Ge[nt]);Qe.__webglTexture&&(n.deleteTexture(Qe.__webglTexture),o.memory.textures--),i.remove(Ge[nt])}i.remove(fe)}let se=0;function we(){se=0}function he(){let fe=se;return fe>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+fe+" texture units while this GPU supports only "+r.maxTextures),se+=1,fe}function je(fe){let J=[];return J.push(fe.wrapS),J.push(fe.wrapT),J.push(fe.wrapR||0),J.push(fe.magFilter),J.push(fe.minFilter),J.push(fe.anisotropy),J.push(fe.internalFormat),J.push(fe.format),J.push(fe.type),J.push(fe.generateMipmaps),J.push(fe.premultiplyAlpha),J.push(fe.flipY),J.push(fe.unpackAlignment),J.push(fe.colorSpace),J.join()}function ze(fe,J){let Ge=i.get(fe);if(fe.isVideoTexture&&hn(fe),fe.isRenderTargetTexture===!1&&fe.version>0&&Ge.__version!==fe.version){let nt=fe.image;if(nt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(nt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Rt(Ge,fe,J);return}}e.bindTexture(n.TEXTURE_2D,Ge.__webglTexture,n.TEXTURE0+J)}function de(fe,J){let Ge=i.get(fe);if(fe.version>0&&Ge.__version!==fe.version){Rt(Ge,fe,J);return}e.bindTexture(n.TEXTURE_2D_ARRAY,Ge.__webglTexture,n.TEXTURE0+J)}function Re(fe,J){let Ge=i.get(fe);if(fe.version>0&&Ge.__version!==fe.version){Rt(Ge,fe,J);return}e.bindTexture(n.TEXTURE_3D,Ge.__webglTexture,n.TEXTURE0+J)}function me(fe,J){let Ge=i.get(fe);if(fe.version>0&&Ge.__version!==fe.version){rt(Ge,fe,J);return}e.bindTexture(n.TEXTURE_CUBE_MAP,Ge.__webglTexture,n.TEXTURE0+J)}let $e={[Xh]:n.REPEAT,[Eu]:n.CLAMP_TO_EDGE,[by]:n.MIRRORED_REPEAT},tt={[fo]:n.NEAREST,[KM]:n.NEAREST_MIPMAP_NEAREST,[$p]:n.NEAREST_MIPMAP_LINEAR,[ia]:n.LINEAR,[Ny]:n.LINEAR_MIPMAP_NEAREST,[Oc]:n.LINEAR_MIPMAP_LINEAR},xt={[S5]:n.NEVER,[I5]:n.ALWAYS,[M5]:n.LESS,[Ck]:n.LEQUAL,[E5]:n.EQUAL,[D5]:n.GEQUAL,[T5]:n.GREATER,[A5]:n.NOTEQUAL};function Tt(fe,J){if(J.type===Hl&&t.has("OES_texture_float_linear")===!1&&(J.magFilter===ia||J.magFilter===Ny||J.magFilter===$p||J.magFilter===Oc||J.minFilter===ia||J.minFilter===Ny||J.minFilter===$p||J.minFilter===Oc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(fe,n.TEXTURE_WRAP_S,$e[J.wrapS]),n.texParameteri(fe,n.TEXTURE_WRAP_T,$e[J.wrapT]),(fe===n.TEXTURE_3D||fe===n.TEXTURE_2D_ARRAY)&&n.texParameteri(fe,n.TEXTURE_WRAP_R,$e[J.wrapR]),n.texParameteri(fe,n.TEXTURE_MAG_FILTER,tt[J.magFilter]),n.texParameteri(fe,n.TEXTURE_MIN_FILTER,tt[J.minFilter]),J.compareFunction&&(n.texParameteri(fe,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(fe,n.TEXTURE_COMPARE_FUNC,xt[J.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(J.magFilter===fo||J.minFilter!==$p&&J.minFilter!==Oc||J.type===Hl&&t.has("OES_texture_float_linear")===!1)return;if(J.anisotropy>1||i.get(J).__currentAnisotropy){let Ge=t.get("EXT_texture_filter_anisotropic");n.texParameterf(fe,Ge.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(J.anisotropy,r.getMaxAnisotropy())),i.get(J).__currentAnisotropy=J.anisotropy}}}function ut(fe,J){let Ge=!1;fe.__webglInit===void 0&&(fe.__webglInit=!0,J.addEventListener("dispose",K));let nt=J.source,dt=x.get(nt);dt===void 0&&(dt={},x.set(nt,dt));let Qe=je(J);if(Qe!==fe.__cacheKey){dt[Qe]===void 0&&(dt[Qe]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Ge=!0),dt[Qe].usedTimes++;let yn=dt[fe.__cacheKey];yn!==void 0&&(dt[fe.__cacheKey].usedTimes--,yn.usedTimes===0&&te(J)),fe.__cacheKey=Qe,fe.__webglTexture=dt[Qe].texture}return Ge}function Ie(fe,J,Ge){return Math.floor(Math.floor(fe/Ge)/J)}function at(fe,J,Ge,nt){let Qe=fe.updateRanges;if(Qe.length===0)e.texSubImage2D(n.TEXTURE_2D,0,0,0,J.width,J.height,Ge,nt,J.data);else{Qe.sort((vt,Jt)=>vt.start-Jt.start);let yn=0;for(let vt=1;vt<Qe.length;vt++){let Jt=Qe[yn],pn=Qe[vt],vn=Jt.start+Jt.count,Ft=Ie(pn.start,J.width,4),_n=Ie(Jt.start,J.width,4);pn.start<=vn+1&&Ft===_n&&Ie(pn.start+pn.count-1,J.width,4)===Ft?Jt.count=Math.max(Jt.count,pn.start+pn.count-Jt.start):(++yn,Qe[yn]=pn)}Qe.length=yn+1;let Ht=n.getParameter(n.UNPACK_ROW_LENGTH),kt=n.getParameter(n.UNPACK_SKIP_PIXELS),fn=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,J.width);for(let vt=0,Jt=Qe.length;vt<Jt;vt++){let pn=Qe[vt],vn=Math.floor(pn.start/4),Ft=Math.ceil(pn.count/4),_n=vn%J.width,Pe=Math.floor(vn/J.width),Lt=Ft,Ct=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,_n),n.pixelStorei(n.UNPACK_SKIP_ROWS,Pe),e.texSubImage2D(n.TEXTURE_2D,0,_n,Pe,Lt,Ct,Ge,nt,J.data)}fe.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Ht),n.pixelStorei(n.UNPACK_SKIP_PIXELS,kt),n.pixelStorei(n.UNPACK_SKIP_ROWS,fn)}}function Rt(fe,J,Ge){let nt=n.TEXTURE_2D;(J.isDataArrayTexture||J.isCompressedArrayTexture)&&(nt=n.TEXTURE_2D_ARRAY),J.isData3DTexture&&(nt=n.TEXTURE_3D);let dt=ut(fe,J),Qe=J.source;e.bindTexture(nt,fe.__webglTexture,n.TEXTURE0+Ge);let yn=i.get(Qe);if(Qe.version!==yn.__version||dt===!0){e.activeTexture(n.TEXTURE0+Ge);let Ht=Gi.getPrimaries(Gi.workingColorSpace),kt=J.colorSpace===Ld?null:Gi.getPrimaries(J.colorSpace),fn=J.colorSpace===Ld||Ht===kt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,J.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,J.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,fn);let vt=O(J.image,!1,r.maxTextureSize);vt=Rn(J,vt);let Jt=s.convert(J.format,J.colorSpace),pn=s.convert(J.type),vn=Z(J.internalFormat,Jt,pn,J.colorSpace,J.isVideoTexture);Tt(nt,J);let Ft,_n=J.mipmaps,Pe=J.isVideoTexture!==!0,Lt=yn.__version===void 0||dt===!0,Ct=Qe.dataReady,nn=le(J,vt);if(J.isDepthTexture)vn=G(J.format===Vy,J.type),Lt&&(Pe?e.texStorage2D(n.TEXTURE_2D,1,vn,vt.width,vt.height):e.texImage2D(n.TEXTURE_2D,0,vn,vt.width,vt.height,0,Jt,pn,null));else if(J.isDataTexture)if(_n.length>0){Pe&&Lt&&e.texStorage2D(n.TEXTURE_2D,nn,vn,_n[0].width,_n[0].height);for(let pt=0,ct=_n.length;pt<ct;pt++)Ft=_n[pt],Pe?Ct&&e.texSubImage2D(n.TEXTURE_2D,pt,0,0,Ft.width,Ft.height,Jt,pn,Ft.data):e.texImage2D(n.TEXTURE_2D,pt,vn,Ft.width,Ft.height,0,Jt,pn,Ft.data);J.generateMipmaps=!1}else Pe?(Lt&&e.texStorage2D(n.TEXTURE_2D,nn,vn,vt.width,vt.height),Ct&&at(J,vt,Jt,pn)):e.texImage2D(n.TEXTURE_2D,0,vn,vt.width,vt.height,0,Jt,pn,vt.data);else if(J.isCompressedTexture)if(J.isCompressedArrayTexture){Pe&&Lt&&e.texStorage3D(n.TEXTURE_2D_ARRAY,nn,vn,_n[0].width,_n[0].height,vt.depth);for(let pt=0,ct=_n.length;pt<ct;pt++)if(Ft=_n[pt],J.format!==al)if(Jt!==null)if(Pe){if(Ct)if(J.layerUpdates.size>0){let sn=Ik(Ft.width,Ft.height,J.format,J.type);for(let Vn of J.layerUpdates){let Dn=Ft.data.subarray(Vn*sn/Ft.data.BYTES_PER_ELEMENT,(Vn+1)*sn/Ft.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,pt,0,0,Vn,Ft.width,Ft.height,1,Jt,Dn)}J.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,pt,0,0,0,Ft.width,Ft.height,vt.depth,Jt,Ft.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,pt,vn,Ft.width,Ft.height,vt.depth,0,Ft.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Pe?Ct&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,pt,0,0,0,Ft.width,Ft.height,vt.depth,Jt,pn,Ft.data):e.texImage3D(n.TEXTURE_2D_ARRAY,pt,vn,Ft.width,Ft.height,vt.depth,0,Jt,pn,Ft.data)}else{Pe&&Lt&&e.texStorage2D(n.TEXTURE_2D,nn,vn,_n[0].width,_n[0].height);for(let pt=0,ct=_n.length;pt<ct;pt++)Ft=_n[pt],J.format!==al?Jt!==null?Pe?Ct&&e.compressedTexSubImage2D(n.TEXTURE_2D,pt,0,0,Ft.width,Ft.height,Jt,Ft.data):e.compressedTexImage2D(n.TEXTURE_2D,pt,vn,Ft.width,Ft.height,0,Ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Pe?Ct&&e.texSubImage2D(n.TEXTURE_2D,pt,0,0,Ft.width,Ft.height,Jt,pn,Ft.data):e.texImage2D(n.TEXTURE_2D,pt,vn,Ft.width,Ft.height,0,Jt,pn,Ft.data)}else if(J.isDataArrayTexture)if(Pe){if(Lt&&e.texStorage3D(n.TEXTURE_2D_ARRAY,nn,vn,vt.width,vt.height,vt.depth),Ct)if(J.layerUpdates.size>0){let pt=Ik(vt.width,vt.height,J.format,J.type);for(let ct of J.layerUpdates){let sn=vt.data.subarray(ct*pt/vt.data.BYTES_PER_ELEMENT,(ct+1)*pt/vt.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ct,vt.width,vt.height,1,Jt,pn,sn)}J.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,vt.width,vt.height,vt.depth,Jt,pn,vt.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,vn,vt.width,vt.height,vt.depth,0,Jt,pn,vt.data);else if(J.isData3DTexture)Pe?(Lt&&e.texStorage3D(n.TEXTURE_3D,nn,vn,vt.width,vt.height,vt.depth),Ct&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,vt.width,vt.height,vt.depth,Jt,pn,vt.data)):e.texImage3D(n.TEXTURE_3D,0,vn,vt.width,vt.height,vt.depth,0,Jt,pn,vt.data);else if(J.isFramebufferTexture){if(Lt)if(Pe)e.texStorage2D(n.TEXTURE_2D,nn,vn,vt.width,vt.height);else{let pt=vt.width,ct=vt.height;for(let sn=0;sn<nn;sn++)e.texImage2D(n.TEXTURE_2D,sn,vn,pt,ct,0,Jt,pn,null),pt>>=1,ct>>=1}}else if(_n.length>0){if(Pe&&Lt){let pt=$i(_n[0]);e.texStorage2D(n.TEXTURE_2D,nn,vn,pt.width,pt.height)}for(let pt=0,ct=_n.length;pt<ct;pt++)Ft=_n[pt],Pe?Ct&&e.texSubImage2D(n.TEXTURE_2D,pt,0,0,Jt,pn,Ft):e.texImage2D(n.TEXTURE_2D,pt,vn,Jt,pn,Ft);J.generateMipmaps=!1}else if(Pe){if(Lt){let pt=$i(vt);e.texStorage2D(n.TEXTURE_2D,nn,vn,pt.width,pt.height)}Ct&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Jt,pn,vt)}else e.texImage2D(n.TEXTURE_2D,0,vn,Jt,pn,vt);N(J)&&T(nt),yn.__version=Qe.version,J.onUpdate&&J.onUpdate(J)}fe.__version=J.version}function rt(fe,J,Ge){if(J.image.length!==6)return;let nt=ut(fe,J),dt=J.source;e.bindTexture(n.TEXTURE_CUBE_MAP,fe.__webglTexture,n.TEXTURE0+Ge);let Qe=i.get(dt);if(dt.version!==Qe.__version||nt===!0){e.activeTexture(n.TEXTURE0+Ge);let yn=Gi.getPrimaries(Gi.workingColorSpace),Ht=J.colorSpace===Ld?null:Gi.getPrimaries(J.colorSpace),kt=J.colorSpace===Ld||yn===Ht?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,J.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,J.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,kt);let fn=J.isCompressedTexture||J.image[0].isCompressedTexture,vt=J.image[0]&&J.image[0].isDataTexture,Jt=[];for(let ct=0;ct<6;ct++)!fn&&!vt?Jt[ct]=O(J.image[ct],!0,r.maxCubemapSize):Jt[ct]=vt?J.image[ct].image:J.image[ct],Jt[ct]=Rn(J,Jt[ct]);let pn=Jt[0],vn=s.convert(J.format,J.colorSpace),Ft=s.convert(J.type),_n=Z(J.internalFormat,vn,Ft,J.colorSpace),Pe=J.isVideoTexture!==!0,Lt=Qe.__version===void 0||nt===!0,Ct=dt.dataReady,nn=le(J,pn);Tt(n.TEXTURE_CUBE_MAP,J);let pt;if(fn){Pe&&Lt&&e.texStorage2D(n.TEXTURE_CUBE_MAP,nn,_n,pn.width,pn.height);for(let ct=0;ct<6;ct++){pt=Jt[ct].mipmaps;for(let sn=0;sn<pt.length;sn++){let Vn=pt[sn];J.format!==al?vn!==null?Pe?Ct&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn,0,0,Vn.width,Vn.height,vn,Vn.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn,_n,Vn.width,Vn.height,0,Vn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pe?Ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn,0,0,Vn.width,Vn.height,vn,Ft,Vn.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn,_n,Vn.width,Vn.height,0,vn,Ft,Vn.data)}}}else{if(pt=J.mipmaps,Pe&&Lt){pt.length>0&&nn++;let ct=$i(Jt[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,nn,_n,ct.width,ct.height)}for(let ct=0;ct<6;ct++)if(vt){Pe?Ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,0,0,Jt[ct].width,Jt[ct].height,vn,Ft,Jt[ct].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,_n,Jt[ct].width,Jt[ct].height,0,vn,Ft,Jt[ct].data);for(let sn=0;sn<pt.length;sn++){let Dn=pt[sn].image[ct].image;Pe?Ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn+1,0,0,Dn.width,Dn.height,vn,Ft,Dn.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn+1,_n,Dn.width,Dn.height,0,vn,Ft,Dn.data)}}else{Pe?Ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,0,0,vn,Ft,Jt[ct]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,_n,vn,Ft,Jt[ct]);for(let sn=0;sn<pt.length;sn++){let Vn=pt[sn];Pe?Ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn+1,0,0,vn,Ft,Vn.image[ct]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn+1,_n,vn,Ft,Vn.image[ct])}}}N(J)&&T(n.TEXTURE_CUBE_MAP),Qe.__version=dt.version,J.onUpdate&&J.onUpdate(J)}fe.__version=J.version}function zt(fe,J,Ge,nt,dt,Qe){let yn=s.convert(Ge.format,Ge.colorSpace),Ht=s.convert(Ge.type),kt=Z(Ge.internalFormat,yn,Ht,Ge.colorSpace),fn=i.get(J),vt=i.get(Ge);if(vt.__renderTarget=J,!fn.__hasExternalTextures){let Jt=Math.max(1,J.width>>Qe),pn=Math.max(1,J.height>>Qe);dt===n.TEXTURE_3D||dt===n.TEXTURE_2D_ARRAY?e.texImage3D(dt,Qe,kt,Jt,pn,J.depth,0,yn,Ht,null):e.texImage2D(dt,Qe,kt,Jt,pn,0,yn,Ht,null)}e.bindFramebuffer(n.FRAMEBUFFER,fe),ei(J)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,nt,dt,vt.__webglTexture,0,rn(J)):(dt===n.TEXTURE_2D||dt>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&dt<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,nt,dt,vt.__webglTexture,Qe),e.bindFramebuffer(n.FRAMEBUFFER,null)}function Sn(fe,J,Ge){if(n.bindRenderbuffer(n.RENDERBUFFER,fe),J.depthBuffer){let nt=J.depthTexture,dt=nt&&nt.isDepthTexture?nt.type:null,Qe=G(J.stencilBuffer,dt),yn=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ht=rn(J);ei(J)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ht,Qe,J.width,J.height):Ge?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ht,Qe,J.width,J.height):n.renderbufferStorage(n.RENDERBUFFER,Qe,J.width,J.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,yn,n.RENDERBUFFER,fe)}else{let nt=J.textures;for(let dt=0;dt<nt.length;dt++){let Qe=nt[dt],yn=s.convert(Qe.format,Qe.colorSpace),Ht=s.convert(Qe.type),kt=Z(Qe.internalFormat,yn,Ht,Qe.colorSpace),fn=rn(J);Ge&&ei(J)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,fn,kt,J.width,J.height):ei(J)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,fn,kt,J.width,J.height):n.renderbufferStorage(n.RENDERBUFFER,kt,J.width,J.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function dn(fe,J){if(J&&J.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,fe),!(J.depthTexture&&J.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let nt=i.get(J.depthTexture);nt.__renderTarget=J,(!nt.__webglTexture||J.depthTexture.image.width!==J.width||J.depthTexture.image.height!==J.height)&&(J.depthTexture.image.width=J.width,J.depthTexture.image.height=J.height,J.depthTexture.needsUpdate=!0),ze(J.depthTexture,0);let dt=nt.__webglTexture,Qe=rn(J);if(J.depthTexture.format===xy)ei(J)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,dt,0,Qe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,dt,0);else if(J.depthTexture.format===Vy)ei(J)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,dt,0,Qe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,dt,0);else throw new Error("Unknown depthTexture format")}function Mt(fe){let J=i.get(fe),Ge=fe.isWebGLCubeRenderTarget===!0;if(J.__boundDepthTexture!==fe.depthTexture){let nt=fe.depthTexture;if(J.__depthDisposeCallback&&J.__depthDisposeCallback(),nt){let dt=()=>{delete J.__boundDepthTexture,delete J.__depthDisposeCallback,nt.removeEventListener("dispose",dt)};nt.addEventListener("dispose",dt),J.__depthDisposeCallback=dt}J.__boundDepthTexture=nt}if(fe.depthTexture&&!J.__autoAllocateDepthBuffer){if(Ge)throw new Error("target.depthTexture not supported in Cube render targets");let nt=fe.texture.mipmaps;nt&&nt.length>0?dn(J.__webglFramebuffer[0],fe):dn(J.__webglFramebuffer,fe)}else if(Ge){J.__webglDepthbuffer=[];for(let nt=0;nt<6;nt++)if(e.bindFramebuffer(n.FRAMEBUFFER,J.__webglFramebuffer[nt]),J.__webglDepthbuffer[nt]===void 0)J.__webglDepthbuffer[nt]=n.createRenderbuffer(),Sn(J.__webglDepthbuffer[nt],fe,!1);else{let dt=fe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Qe=J.__webglDepthbuffer[nt];n.bindRenderbuffer(n.RENDERBUFFER,Qe),n.framebufferRenderbuffer(n.FRAMEBUFFER,dt,n.RENDERBUFFER,Qe)}}else{let nt=fe.texture.mipmaps;if(nt&&nt.length>0?e.bindFramebuffer(n.FRAMEBUFFER,J.__webglFramebuffer[0]):e.bindFramebuffer(n.FRAMEBUFFER,J.__webglFramebuffer),J.__webglDepthbuffer===void 0)J.__webglDepthbuffer=n.createRenderbuffer(),Sn(J.__webglDepthbuffer,fe,!1);else{let dt=fe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Qe=J.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Qe),n.framebufferRenderbuffer(n.FRAMEBUFFER,dt,n.RENDERBUFFER,Qe)}}e.bindFramebuffer(n.FRAMEBUFFER,null)}function Zi(fe,J,Ge){let nt=i.get(fe);J!==void 0&&zt(nt.__webglFramebuffer,fe,fe.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Ge!==void 0&&Mt(fe)}function Bn(fe){let J=fe.texture,Ge=i.get(fe),nt=i.get(J);fe.addEventListener("dispose",oe);let dt=fe.textures,Qe=fe.isWebGLCubeRenderTarget===!0,yn=dt.length>1;if(yn||(nt.__webglTexture===void 0&&(nt.__webglTexture=n.createTexture()),nt.__version=J.version,o.memory.textures++),Qe){Ge.__webglFramebuffer=[];for(let Ht=0;Ht<6;Ht++)if(J.mipmaps&&J.mipmaps.length>0){Ge.__webglFramebuffer[Ht]=[];for(let kt=0;kt<J.mipmaps.length;kt++)Ge.__webglFramebuffer[Ht][kt]=n.createFramebuffer()}else Ge.__webglFramebuffer[Ht]=n.createFramebuffer()}else{if(J.mipmaps&&J.mipmaps.length>0){Ge.__webglFramebuffer=[];for(let Ht=0;Ht<J.mipmaps.length;Ht++)Ge.__webglFramebuffer[Ht]=n.createFramebuffer()}else Ge.__webglFramebuffer=n.createFramebuffer();if(yn)for(let Ht=0,kt=dt.length;Ht<kt;Ht++){let fn=i.get(dt[Ht]);fn.__webglTexture===void 0&&(fn.__webglTexture=n.createTexture(),o.memory.textures++)}if(fe.samples>0&&ei(fe)===!1){Ge.__webglMultisampledFramebuffer=n.createFramebuffer(),Ge.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,Ge.__webglMultisampledFramebuffer);for(let Ht=0;Ht<dt.length;Ht++){let kt=dt[Ht];Ge.__webglColorRenderbuffer[Ht]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Ge.__webglColorRenderbuffer[Ht]);let fn=s.convert(kt.format,kt.colorSpace),vt=s.convert(kt.type),Jt=Z(kt.internalFormat,fn,vt,kt.colorSpace,fe.isXRRenderTarget===!0),pn=rn(fe);n.renderbufferStorageMultisample(n.RENDERBUFFER,pn,Jt,fe.width,fe.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.RENDERBUFFER,Ge.__webglColorRenderbuffer[Ht])}n.bindRenderbuffer(n.RENDERBUFFER,null),fe.depthBuffer&&(Ge.__webglDepthRenderbuffer=n.createRenderbuffer(),Sn(Ge.__webglDepthRenderbuffer,fe,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Qe){e.bindTexture(n.TEXTURE_CUBE_MAP,nt.__webglTexture),Tt(n.TEXTURE_CUBE_MAP,J);for(let Ht=0;Ht<6;Ht++)if(J.mipmaps&&J.mipmaps.length>0)for(let kt=0;kt<J.mipmaps.length;kt++)zt(Ge.__webglFramebuffer[Ht][kt],fe,J,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,kt);else zt(Ge.__webglFramebuffer[Ht],fe,J,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,0);N(J)&&T(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(yn){for(let Ht=0,kt=dt.length;Ht<kt;Ht++){let fn=dt[Ht],vt=i.get(fn);e.bindTexture(n.TEXTURE_2D,vt.__webglTexture),Tt(n.TEXTURE_2D,fn),zt(Ge.__webglFramebuffer,fe,fn,n.COLOR_ATTACHMENT0+Ht,n.TEXTURE_2D,0),N(fn)&&T(n.TEXTURE_2D)}e.unbindTexture()}else{let Ht=n.TEXTURE_2D;if((fe.isWebGL3DRenderTarget||fe.isWebGLArrayRenderTarget)&&(Ht=fe.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(Ht,nt.__webglTexture),Tt(Ht,J),J.mipmaps&&J.mipmaps.length>0)for(let kt=0;kt<J.mipmaps.length;kt++)zt(Ge.__webglFramebuffer[kt],fe,J,n.COLOR_ATTACHMENT0,Ht,kt);else zt(Ge.__webglFramebuffer,fe,J,n.COLOR_ATTACHMENT0,Ht,0);N(J)&&T(Ht),e.unbindTexture()}fe.depthBuffer&&Mt(fe)}function Me(fe){let J=fe.textures;for(let Ge=0,nt=J.length;Ge<nt;Ge++){let dt=J[Ge];if(N(dt)){let Qe=j(fe),yn=i.get(dt).__webglTexture;e.bindTexture(Qe,yn),T(Qe),e.unbindTexture()}}}let hr=[],Qn=[];function fi(fe){if(fe.samples>0){if(ei(fe)===!1){let J=fe.textures,Ge=fe.width,nt=fe.height,dt=n.COLOR_BUFFER_BIT,Qe=fe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,yn=i.get(fe),Ht=J.length>1;if(Ht)for(let fn=0;fn<J.length;fn++)e.bindFramebuffer(n.FRAMEBUFFER,yn.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+fn,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,yn.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+fn,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,yn.__webglMultisampledFramebuffer);let kt=fe.texture.mipmaps;kt&&kt.length>0?e.bindFramebuffer(n.DRAW_FRAMEBUFFER,yn.__webglFramebuffer[0]):e.bindFramebuffer(n.DRAW_FRAMEBUFFER,yn.__webglFramebuffer);for(let fn=0;fn<J.length;fn++){if(fe.resolveDepthBuffer&&(fe.depthBuffer&&(dt|=n.DEPTH_BUFFER_BIT),fe.stencilBuffer&&fe.resolveStencilBuffer&&(dt|=n.STENCIL_BUFFER_BIT)),Ht){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,yn.__webglColorRenderbuffer[fn]);let vt=i.get(J[fn]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,vt,0)}n.blitFramebuffer(0,0,Ge,nt,0,0,Ge,nt,dt,n.NEAREST),u===!0&&(hr.length=0,Qn.length=0,hr.push(n.COLOR_ATTACHMENT0+fn),fe.depthBuffer&&fe.resolveDepthBuffer===!1&&(hr.push(Qe),Qn.push(Qe),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Qn)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,hr))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ht)for(let fn=0;fn<J.length;fn++){e.bindFramebuffer(n.FRAMEBUFFER,yn.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+fn,n.RENDERBUFFER,yn.__webglColorRenderbuffer[fn]);let vt=i.get(J[fn]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,yn.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+fn,n.TEXTURE_2D,vt,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,yn.__webglMultisampledFramebuffer)}else if(fe.depthBuffer&&fe.resolveDepthBuffer===!1&&u){let J=fe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[J])}}}function rn(fe){return Math.min(r.maxSamples,fe.samples)}function ei(fe){let J=i.get(fe);return fe.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&J.__useRenderToTexture!==!1}function hn(fe){let J=o.render.frame;p.get(fe)!==J&&(p.set(fe,J),fe.update())}function Rn(fe,J){let Ge=fe.colorSpace,nt=fe.format,dt=fe.type;return fe.isCompressedTexture===!0||fe.isVideoTexture===!0||Ge!==po&&Ge!==Ld&&(Gi.getTransfer(Ge)===dr?(nt!==al||dt!==Fc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ge)),J}function $i(fe){return typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement?(h.width=fe.naturalWidth||fe.width,h.height=fe.naturalHeight||fe.height):typeof VideoFrame<"u"&&fe instanceof VideoFrame?(h.width=fe.displayWidth,h.height=fe.displayHeight):(h.width=fe.width,h.height=fe.height),h}this.allocateTextureUnit=he,this.resetTextureUnits=we,this.setTexture2D=ze,this.setTexture2DArray=de,this.setTexture3D=Re,this.setTextureCube=me,this.rebindTextures=Zi,this.setupRenderTarget=Bn,this.updateRenderTargetMipmap=Me,this.updateMultisampleRenderTarget=fi,this.setupDepthRenderbuffer=Mt,this.setupFrameBufferTexture=zt,this.useMultisampledRTT=ei}function Due(n,t){function e(i,r=Ld){let s,o=Gi.getTransfer(r);if(i===Fc)return n.UNSIGNED_BYTE;if(i===JM)return n.UNSIGNED_SHORT_4_4_4_4;if(i===e1)return n.UNSIGNED_SHORT_5_5_5_1;if(i===gk)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===pk)return n.BYTE;if(i===mk)return n.SHORT;if(i===Oy)return n.UNSIGNED_SHORT;if(i===QM)return n.INT;if(i===Qh)return n.UNSIGNED_INT;if(i===Hl)return n.FLOAT;if(i===Fy)return n.HALF_FLOAT;if(i===yk)return n.ALPHA;if(i===vk)return n.RGB;if(i===al)return n.RGBA;if(i===xy)return n.DEPTH_COMPONENT;if(i===Vy)return n.DEPTH_STENCIL;if(i===t1)return n.RED;if(i===n1)return n.RED_INTEGER;if(i===_k)return n.RG;if(i===i1)return n.RG_INTEGER;if(i===r1)return n.RGBA_INTEGER;if(i===sb||i===ob||i===ab||i===lb)if(o===dr)if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===sb)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===ob)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===ab)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===lb)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===sb)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===ob)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===ab)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===lb)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===s1||i===o1||i===a1||i===l1)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===s1)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===o1)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===a1)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===l1)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===c1||i===u1||i===d1)if(s=t.get("WEBGL_compressed_texture_etc"),s!==null){if(i===c1||i===u1)return o===dr?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===d1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===h1||i===f1||i===p1||i===m1||i===g1||i===y1||i===v1||i===_1||i===b1||i===x1||i===w1||i===C1||i===S1||i===M1)if(s=t.get("WEBGL_compressed_texture_astc"),s!==null){if(i===h1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===f1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===p1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===m1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===g1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===y1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===v1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===_1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===b1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===x1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===w1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===C1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===S1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===M1)return o===dr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===cb||i===E1||i===T1)if(s=t.get("EXT_texture_compression_bptc"),s!==null){if(i===cb)return o===dr?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===E1)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===T1)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===bk||i===A1||i===D1||i===I1)if(s=t.get("EXT_texture_compression_rgtc"),s!==null){if(i===cb)return s.COMPRESSED_RED_RGTC1_EXT;if(i===A1)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===D1)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===I1)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===By?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}var Iue=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Pue=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,jk=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,i){if(this.texture===null){let r=new ll,s=t.properties.get(r);s.__webglTexture=e.texture,(e.depthNear!==i.depthNear||e.depthFar!==i.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(this.texture!==null&&this.mesh===null){let e=t.cameras[0].viewport,i=new Lc({vertexShader:Iue,fragmentShader:Pue,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Ds(new $_(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},Wk=class extends Au{constructor(t,e){super();let i=this,r=null,s=1,o=null,a="local-floor",u=1,h=null,p=null,v=null,x=null,S=null,D=null,O=new jk,N=e.getContextAttributes(),T=null,j=null,Z=[],G=[],le=new Yn,K=null,oe=new Ts;oe.viewport=new sr;let ue=new Ts;ue.viewport=new sr;let te=[oe,ue],V=new VM,se=null,we=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ie){let at=Z[Ie];return at===void 0&&(at=new My,Z[Ie]=at),at.getTargetRaySpace()},this.getControllerGrip=function(Ie){let at=Z[Ie];return at===void 0&&(at=new My,Z[Ie]=at),at.getGripSpace()},this.getHand=function(Ie){let at=Z[Ie];return at===void 0&&(at=new My,Z[Ie]=at),at.getHandSpace()};function he(Ie){let at=G.indexOf(Ie.inputSource);if(at===-1)return;let Rt=Z[at];Rt!==void 0&&(Rt.update(Ie.inputSource,Ie.frame,h||o),Rt.dispatchEvent({type:Ie.type,data:Ie.inputSource}))}function je(){r.removeEventListener("select",he),r.removeEventListener("selectstart",he),r.removeEventListener("selectend",he),r.removeEventListener("squeeze",he),r.removeEventListener("squeezestart",he),r.removeEventListener("squeezeend",he),r.removeEventListener("end",je),r.removeEventListener("inputsourceschange",ze);for(let Ie=0;Ie<Z.length;Ie++){let at=G[Ie];at!==null&&(G[Ie]=null,Z[Ie].disconnect(at))}se=null,we=null,O.reset(),t.setRenderTarget(T),S=null,x=null,v=null,r=null,j=null,ut.stop(),i.isPresenting=!1,t.setPixelRatio(K),t.setSize(le.width,le.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ie){s=Ie,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ie){a=Ie,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(Ie){h=Ie},this.getBaseLayer=function(){return x!==null?x:S},this.getBinding=function(){return v},this.getFrame=function(){return D},this.getSession=function(){return r},this.setSession=function(Ie){return In(this,null,function*(){if(r=Ie,r!==null){if(T=t.getRenderTarget(),r.addEventListener("select",he),r.addEventListener("selectstart",he),r.addEventListener("selectend",he),r.addEventListener("squeeze",he),r.addEventListener("squeezestart",he),r.addEventListener("squeezeend",he),r.addEventListener("end",je),r.addEventListener("inputsourceschange",ze),N.xrCompatible!==!0&&(yield e.makeXRCompatible()),K=t.getPixelRatio(),t.getSize(le),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Rt=null,rt=null,zt=null;N.depth&&(zt=N.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Rt=N.stencil?Vy:xy,rt=N.stencil?By:Qh);let Sn={colorFormat:e.RGBA8,depthFormat:zt,scaleFactor:s};v=new XRWebGLBinding(r,e),x=v.createProjectionLayer(Sn),r.updateRenderState({layers:[x]}),t.setPixelRatio(1),t.setSize(x.textureWidth,x.textureHeight,!1),j=new Du(x.textureWidth,x.textureHeight,{format:al,type:Fc,depthTexture:new G_(x.textureWidth,x.textureHeight,rt,void 0,void 0,void 0,void 0,void 0,void 0,Rt),stencilBuffer:N.stencil,colorSpace:t.outputColorSpace,samples:N.antialias?4:0,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}else{let Rt={antialias:N.antialias,alpha:!0,depth:N.depth,stencil:N.stencil,framebufferScaleFactor:s};S=new XRWebGLLayer(r,e,Rt),r.updateRenderState({baseLayer:S}),t.setPixelRatio(1),t.setSize(S.framebufferWidth,S.framebufferHeight,!1),j=new Du(S.framebufferWidth,S.framebufferHeight,{format:al,type:Fc,colorSpace:t.outputColorSpace,stencilBuffer:N.stencil,resolveDepthBuffer:S.ignoreDepthValues===!1,resolveStencilBuffer:S.ignoreDepthValues===!1})}j.isXRRenderTarget=!0,this.setFoveation(u),h=null,o=yield r.requestReferenceSpace(a),ut.setContext(r),ut.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return O.getDepthTexture()};function ze(Ie){for(let at=0;at<Ie.removed.length;at++){let Rt=Ie.removed[at],rt=G.indexOf(Rt);rt>=0&&(G[rt]=null,Z[rt].disconnect(Rt))}for(let at=0;at<Ie.added.length;at++){let Rt=Ie.added[at],rt=G.indexOf(Rt);if(rt===-1){for(let Sn=0;Sn<Z.length;Sn++)if(Sn>=G.length){G.push(Rt),rt=Sn;break}else if(G[Sn]===null){G[Sn]=Rt,rt=Sn;break}if(rt===-1)break}let zt=Z[rt];zt&&zt.connect(Rt)}}let de=new Ne,Re=new Ne;function me(Ie,at,Rt){de.setFromMatrixPosition(at.matrixWorld),Re.setFromMatrixPosition(Rt.matrixWorld);let rt=de.distanceTo(Re),zt=at.projectionMatrix.elements,Sn=Rt.projectionMatrix.elements,dn=zt[14]/(zt[10]-1),Mt=zt[14]/(zt[10]+1),Zi=(zt[9]+1)/zt[5],Bn=(zt[9]-1)/zt[5],Me=(zt[8]-1)/zt[0],hr=(Sn[8]+1)/Sn[0],Qn=dn*Me,fi=dn*hr,rn=rt/(-Me+hr),ei=rn*-Me;if(at.matrixWorld.decompose(Ie.position,Ie.quaternion,Ie.scale),Ie.translateX(ei),Ie.translateZ(rn),Ie.matrixWorld.compose(Ie.position,Ie.quaternion,Ie.scale),Ie.matrixWorldInverse.copy(Ie.matrixWorld).invert(),zt[10]===-1)Ie.projectionMatrix.copy(at.projectionMatrix),Ie.projectionMatrixInverse.copy(at.projectionMatrixInverse);else{let hn=dn+rn,Rn=Mt+rn,$i=Qn-ei,fe=fi+(rt-ei),J=Zi*Mt/Rn*hn,Ge=Bn*Mt/Rn*hn;Ie.projectionMatrix.makePerspective($i,fe,J,Ge,hn,Rn),Ie.projectionMatrixInverse.copy(Ie.projectionMatrix).invert()}}function $e(Ie,at){at===null?Ie.matrixWorld.copy(Ie.matrix):Ie.matrixWorld.multiplyMatrices(at.matrixWorld,Ie.matrix),Ie.matrixWorldInverse.copy(Ie.matrixWorld).invert()}this.updateCamera=function(Ie){if(r===null)return;let at=Ie.near,Rt=Ie.far;O.texture!==null&&(O.depthNear>0&&(at=O.depthNear),O.depthFar>0&&(Rt=O.depthFar)),V.near=ue.near=oe.near=at,V.far=ue.far=oe.far=Rt,(se!==V.near||we!==V.far)&&(r.updateRenderState({depthNear:V.near,depthFar:V.far}),se=V.near,we=V.far),oe.layers.mask=Ie.layers.mask|2,ue.layers.mask=Ie.layers.mask|4,V.layers.mask=oe.layers.mask|ue.layers.mask;let rt=Ie.parent,zt=V.cameras;$e(V,rt);for(let Sn=0;Sn<zt.length;Sn++)$e(zt[Sn],rt);zt.length===2?me(V,oe,ue):V.projectionMatrix.copy(oe.projectionMatrix),tt(Ie,V,rt)};function tt(Ie,at,Rt){Rt===null?Ie.matrix.copy(at.matrixWorld):(Ie.matrix.copy(Rt.matrixWorld),Ie.matrix.invert(),Ie.matrix.multiply(at.matrixWorld)),Ie.matrix.decompose(Ie.position,Ie.quaternion,Ie.scale),Ie.updateMatrixWorld(!0),Ie.projectionMatrix.copy(at.projectionMatrix),Ie.projectionMatrixInverse.copy(at.projectionMatrixInverse),Ie.isPerspectiveCamera&&(Ie.fov=Bp*2*Math.atan(1/Ie.projectionMatrix.elements[5]),Ie.zoom=1)}this.getCamera=function(){return V},this.getFoveation=function(){if(!(x===null&&S===null))return u},this.setFoveation=function(Ie){u=Ie,x!==null&&(x.fixedFoveation=Ie),S!==null&&S.fixedFoveation!==void 0&&(S.fixedFoveation=Ie)},this.hasDepthSensing=function(){return O.texture!==null},this.getDepthSensingMesh=function(){return O.getMesh(V)};let xt=null;function Tt(Ie,at){if(p=at.getViewerPose(h||o),D=at,p!==null){let Rt=p.views;S!==null&&(t.setRenderTargetFramebuffer(j,S.framebuffer),t.setRenderTarget(j));let rt=!1;Rt.length!==V.cameras.length&&(V.cameras.length=0,rt=!0);for(let dn=0;dn<Rt.length;dn++){let Mt=Rt[dn],Zi=null;if(S!==null)Zi=S.getViewport(Mt);else{let Me=v.getViewSubImage(x,Mt);Zi=Me.viewport,dn===0&&(t.setRenderTargetTextures(j,Me.colorTexture,Me.depthStencilTexture),t.setRenderTarget(j))}let Bn=te[dn];Bn===void 0&&(Bn=new Ts,Bn.layers.enable(dn),Bn.viewport=new sr,te[dn]=Bn),Bn.matrix.fromArray(Mt.transform.matrix),Bn.matrix.decompose(Bn.position,Bn.quaternion,Bn.scale),Bn.projectionMatrix.fromArray(Mt.projectionMatrix),Bn.projectionMatrixInverse.copy(Bn.projectionMatrix).invert(),Bn.viewport.set(Zi.x,Zi.y,Zi.width,Zi.height),dn===0&&(V.matrix.copy(Bn.matrix),V.matrix.decompose(V.position,V.quaternion,V.scale)),rt===!0&&V.cameras.push(Bn)}let zt=r.enabledFeatures;if(zt&&zt.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&v){let dn=v.getDepthInformation(Rt[0]);dn&&dn.isValid&&dn.texture&&O.init(t,dn,r.renderState)}}for(let Rt=0;Rt<Z.length;Rt++){let rt=G[Rt],zt=Z[Rt];rt!==null&&zt!==void 0&&zt.update(rt,at,h||o)}xt&&xt(Ie,at),at.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:at}),D=null}let ut=new l8;ut.setAnimationLoop(Tt),this.setAnimationLoop=function(Ie){xt=Ie},this.dispose=function(){}}},Zp=new Yh,Rue=new hi;function kue(n,t){function e(N,T){N.matrixAutoUpdate===!0&&N.updateMatrix(),T.value.copy(N.matrix)}function i(N,T){T.color.getRGB(N.fogColor.value,Tk(n)),T.isFog?(N.fogNear.value=T.near,N.fogFar.value=T.far):T.isFogExp2&&(N.fogDensity.value=T.density)}function r(N,T,j,Z,G){T.isMeshBasicMaterial||T.isMeshLambertMaterial?s(N,T):T.isMeshToonMaterial?(s(N,T),v(N,T)):T.isMeshPhongMaterial?(s(N,T),p(N,T)):T.isMeshStandardMaterial?(s(N,T),x(N,T),T.isMeshPhysicalMaterial&&S(N,T,G)):T.isMeshMatcapMaterial?(s(N,T),D(N,T)):T.isMeshDepthMaterial?s(N,T):T.isMeshDistanceMaterial?(s(N,T),O(N,T)):T.isMeshNormalMaterial?s(N,T):T.isLineBasicMaterial?(o(N,T),T.isLineDashedMaterial&&a(N,T)):T.isPointsMaterial?u(N,T,j,Z):T.isSpriteMaterial?h(N,T):T.isShadowMaterial?(N.color.value.copy(T.color),N.opacity.value=T.opacity):T.isShaderMaterial&&(T.uniformsNeedUpdate=!1)}function s(N,T){N.opacity.value=T.opacity,T.color&&N.diffuse.value.copy(T.color),T.emissive&&N.emissive.value.copy(T.emissive).multiplyScalar(T.emissiveIntensity),T.map&&(N.map.value=T.map,e(T.map,N.mapTransform)),T.alphaMap&&(N.alphaMap.value=T.alphaMap,e(T.alphaMap,N.alphaMapTransform)),T.bumpMap&&(N.bumpMap.value=T.bumpMap,e(T.bumpMap,N.bumpMapTransform),N.bumpScale.value=T.bumpScale,T.side===oa&&(N.bumpScale.value*=-1)),T.normalMap&&(N.normalMap.value=T.normalMap,e(T.normalMap,N.normalMapTransform),N.normalScale.value.copy(T.normalScale),T.side===oa&&N.normalScale.value.negate()),T.displacementMap&&(N.displacementMap.value=T.displacementMap,e(T.displacementMap,N.displacementMapTransform),N.displacementScale.value=T.displacementScale,N.displacementBias.value=T.displacementBias),T.emissiveMap&&(N.emissiveMap.value=T.emissiveMap,e(T.emissiveMap,N.emissiveMapTransform)),T.specularMap&&(N.specularMap.value=T.specularMap,e(T.specularMap,N.specularMapTransform)),T.alphaTest>0&&(N.alphaTest.value=T.alphaTest);let j=t.get(T),Z=j.envMap,G=j.envMapRotation;Z&&(N.envMap.value=Z,Zp.copy(G),Zp.x*=-1,Zp.y*=-1,Zp.z*=-1,Z.isCubeTexture&&Z.isRenderTargetTexture===!1&&(Zp.y*=-1,Zp.z*=-1),N.envMapRotation.value.setFromMatrix4(Rue.makeRotationFromEuler(Zp)),N.flipEnvMap.value=Z.isCubeTexture&&Z.isRenderTargetTexture===!1?-1:1,N.reflectivity.value=T.reflectivity,N.ior.value=T.ior,N.refractionRatio.value=T.refractionRatio),T.lightMap&&(N.lightMap.value=T.lightMap,N.lightMapIntensity.value=T.lightMapIntensity,e(T.lightMap,N.lightMapTransform)),T.aoMap&&(N.aoMap.value=T.aoMap,N.aoMapIntensity.value=T.aoMapIntensity,e(T.aoMap,N.aoMapTransform))}function o(N,T){N.diffuse.value.copy(T.color),N.opacity.value=T.opacity,T.map&&(N.map.value=T.map,e(T.map,N.mapTransform))}function a(N,T){N.dashSize.value=T.dashSize,N.totalSize.value=T.dashSize+T.gapSize,N.scale.value=T.scale}function u(N,T,j,Z){N.diffuse.value.copy(T.color),N.opacity.value=T.opacity,N.size.value=T.size*j,N.scale.value=Z*.5,T.map&&(N.map.value=T.map,e(T.map,N.uvTransform)),T.alphaMap&&(N.alphaMap.value=T.alphaMap,e(T.alphaMap,N.alphaMapTransform)),T.alphaTest>0&&(N.alphaTest.value=T.alphaTest)}function h(N,T){N.diffuse.value.copy(T.color),N.opacity.value=T.opacity,N.rotation.value=T.rotation,T.map&&(N.map.value=T.map,e(T.map,N.mapTransform)),T.alphaMap&&(N.alphaMap.value=T.alphaMap,e(T.alphaMap,N.alphaMapTransform)),T.alphaTest>0&&(N.alphaTest.value=T.alphaTest)}function p(N,T){N.specular.value.copy(T.specular),N.shininess.value=Math.max(T.shininess,1e-4)}function v(N,T){T.gradientMap&&(N.gradientMap.value=T.gradientMap)}function x(N,T){N.metalness.value=T.metalness,T.metalnessMap&&(N.metalnessMap.value=T.metalnessMap,e(T.metalnessMap,N.metalnessMapTransform)),N.roughness.value=T.roughness,T.roughnessMap&&(N.roughnessMap.value=T.roughnessMap,e(T.roughnessMap,N.roughnessMapTransform)),T.envMap&&(N.envMapIntensity.value=T.envMapIntensity)}function S(N,T,j){N.ior.value=T.ior,T.sheen>0&&(N.sheenColor.value.copy(T.sheenColor).multiplyScalar(T.sheen),N.sheenRoughness.value=T.sheenRoughness,T.sheenColorMap&&(N.sheenColorMap.value=T.sheenColorMap,e(T.sheenColorMap,N.sheenColorMapTransform)),T.sheenRoughnessMap&&(N.sheenRoughnessMap.value=T.sheenRoughnessMap,e(T.sheenRoughnessMap,N.sheenRoughnessMapTransform))),T.clearcoat>0&&(N.clearcoat.value=T.clearcoat,N.clearcoatRoughness.value=T.clearcoatRoughness,T.clearcoatMap&&(N.clearcoatMap.value=T.clearcoatMap,e(T.clearcoatMap,N.clearcoatMapTransform)),T.clearcoatRoughnessMap&&(N.clearcoatRoughnessMap.value=T.clearcoatRoughnessMap,e(T.clearcoatRoughnessMap,N.clearcoatRoughnessMapTransform)),T.clearcoatNormalMap&&(N.clearcoatNormalMap.value=T.clearcoatNormalMap,e(T.clearcoatNormalMap,N.clearcoatNormalMapTransform),N.clearcoatNormalScale.value.copy(T.clearcoatNormalScale),T.side===oa&&N.clearcoatNormalScale.value.negate())),T.dispersion>0&&(N.dispersion.value=T.dispersion),T.iridescence>0&&(N.iridescence.value=T.iridescence,N.iridescenceIOR.value=T.iridescenceIOR,N.iridescenceThicknessMinimum.value=T.iridescenceThicknessRange[0],N.iridescenceThicknessMaximum.value=T.iridescenceThicknessRange[1],T.iridescenceMap&&(N.iridescenceMap.value=T.iridescenceMap,e(T.iridescenceMap,N.iridescenceMapTransform)),T.iridescenceThicknessMap&&(N.iridescenceThicknessMap.value=T.iridescenceThicknessMap,e(T.iridescenceThicknessMap,N.iridescenceThicknessMapTransform))),T.transmission>0&&(N.transmission.value=T.transmission,N.transmissionSamplerMap.value=j.texture,N.transmissionSamplerSize.value.set(j.width,j.height),T.transmissionMap&&(N.transmissionMap.value=T.transmissionMap,e(T.transmissionMap,N.transmissionMapTransform)),N.thickness.value=T.thickness,T.thicknessMap&&(N.thicknessMap.value=T.thicknessMap,e(T.thicknessMap,N.thicknessMapTransform)),N.attenuationDistance.value=T.attenuationDistance,N.attenuationColor.value.copy(T.attenuationColor)),T.anisotropy>0&&(N.anisotropyVector.value.set(T.anisotropy*Math.cos(T.anisotropyRotation),T.anisotropy*Math.sin(T.anisotropyRotation)),T.anisotropyMap&&(N.anisotropyMap.value=T.anisotropyMap,e(T.anisotropyMap,N.anisotropyMapTransform))),N.specularIntensity.value=T.specularIntensity,N.specularColor.value.copy(T.specularColor),T.specularColorMap&&(N.specularColorMap.value=T.specularColorMap,e(T.specularColorMap,N.specularColorMapTransform)),T.specularIntensityMap&&(N.specularIntensityMap.value=T.specularIntensityMap,e(T.specularIntensityMap,N.specularIntensityMapTransform))}function D(N,T){T.matcap&&(N.matcap.value=T.matcap)}function O(N,T){let j=t.get(T).light;N.referencePosition.value.setFromMatrixPosition(j.matrixWorld),N.nearDistance.value=j.shadow.camera.near,N.farDistance.value=j.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Lue(n,t,e,i){let r={},s={},o=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function u(j,Z){let G=Z.program;i.uniformBlockBinding(j,G)}function h(j,Z){let G=r[j.id];G===void 0&&(D(j),G=p(j),r[j.id]=G,j.addEventListener("dispose",N));let le=Z.program;i.updateUBOMapping(j,le);let K=t.render.frame;s[j.id]!==K&&(x(j),s[j.id]=K)}function p(j){let Z=v();j.__bindingPointIndex=Z;let G=n.createBuffer(),le=j.__size,K=j.usage;return n.bindBuffer(n.UNIFORM_BUFFER,G),n.bufferData(n.UNIFORM_BUFFER,le,K),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,Z,G),G}function v(){for(let j=0;j<a;j++)if(o.indexOf(j)===-1)return o.push(j),j;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(j){let Z=r[j.id],G=j.uniforms,le=j.__cache;n.bindBuffer(n.UNIFORM_BUFFER,Z);for(let K=0,oe=G.length;K<oe;K++){let ue=Array.isArray(G[K])?G[K]:[G[K]];for(let te=0,V=ue.length;te<V;te++){let se=ue[te];if(S(se,K,te,le)===!0){let we=se.__offset,he=Array.isArray(se.value)?se.value:[se.value],je=0;for(let ze=0;ze<he.length;ze++){let de=he[ze],Re=O(de);typeof de=="number"||typeof de=="boolean"?(se.__data[0]=de,n.bufferSubData(n.UNIFORM_BUFFER,we+je,se.__data)):de.isMatrix3?(se.__data[0]=de.elements[0],se.__data[1]=de.elements[1],se.__data[2]=de.elements[2],se.__data[3]=0,se.__data[4]=de.elements[3],se.__data[5]=de.elements[4],se.__data[6]=de.elements[5],se.__data[7]=0,se.__data[8]=de.elements[6],se.__data[9]=de.elements[7],se.__data[10]=de.elements[8],se.__data[11]=0):(de.toArray(se.__data,je),je+=Re.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,we,se.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function S(j,Z,G,le){let K=j.value,oe=Z+"_"+G;if(le[oe]===void 0)return typeof K=="number"||typeof K=="boolean"?le[oe]=K:le[oe]=K.clone(),!0;{let ue=le[oe];if(typeof K=="number"||typeof K=="boolean"){if(ue!==K)return le[oe]=K,!0}else if(ue.equals(K)===!1)return ue.copy(K),!0}return!1}function D(j){let Z=j.uniforms,G=0,le=16;for(let oe=0,ue=Z.length;oe<ue;oe++){let te=Array.isArray(Z[oe])?Z[oe]:[Z[oe]];for(let V=0,se=te.length;V<se;V++){let we=te[V],he=Array.isArray(we.value)?we.value:[we.value];for(let je=0,ze=he.length;je<ze;je++){let de=he[je],Re=O(de),me=G%le,$e=me%Re.boundary,tt=me+$e;G+=$e,tt!==0&&le-tt<Re.storage&&(G+=le-tt),we.__data=new Float32Array(Re.storage/Float32Array.BYTES_PER_ELEMENT),we.__offset=G,G+=Re.storage}}}let K=G%le;return K>0&&(G+=le-K),j.__size=G,j.__cache={},this}function O(j){let Z={boundary:0,storage:0};return typeof j=="number"||typeof j=="boolean"?(Z.boundary=4,Z.storage=4):j.isVector2?(Z.boundary=8,Z.storage=8):j.isVector3||j.isColor?(Z.boundary=16,Z.storage=12):j.isVector4?(Z.boundary=16,Z.storage=16):j.isMatrix3?(Z.boundary=48,Z.storage=48):j.isMatrix4?(Z.boundary=64,Z.storage=64):j.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",j),Z}function N(j){let Z=j.target;Z.removeEventListener("dispose",N);let G=o.indexOf(Z.__bindingPointIndex);o.splice(G,1),n.deleteBuffer(r[Z.id]),delete r[Z.id],delete s[Z.id]}function T(){for(let j in r)n.deleteBuffer(r[j]);o=[],r={},s={}}return{bind:u,update:h,dispose:T}}var N1=class{constructor(t={}){let{canvas:e=P5(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:h=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:v=!1,reverseDepthBuffer:x=!1}=t;this.isWebGLRenderer=!0;let S;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");S=i.getContextAttributes().alpha}else S=o;let D=new Uint32Array(4),O=new Int32Array(4),N=null,T=null,j=[],Z=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=kd,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let G=this,le=!1;this._outputColorSpace=js;let K=0,oe=0,ue=null,te=-1,V=null,se=new sr,we=new sr,he=null,je=new Nn(0),ze=0,de=e.width,Re=e.height,me=1,$e=null,tt=null,xt=new sr(0,0,de,Re),Tt=new sr(0,0,de,Re),ut=!1,Ie=new Iy,at=!1,Rt=!1,rt=new hi,zt=new hi,Sn=new Ne,dn=new sr,Mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Zi=!1;function Bn(){return ue===null?me:1}let Me=i;function hr(re,Fe){return e.getContext(re,Fe)}try{let re={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:p,failIfMajorPerformanceCaveat:v};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${UM}`),e.addEventListener("webglcontextlost",nn,!1),e.addEventListener("webglcontextrestored",pt,!1),e.addEventListener("webglcontextcreationerror",ct,!1),Me===null){let Fe="webgl2";if(Me=hr(Fe,re),Me===null)throw hr(Fe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(re){throw console.error("THREE.WebGLRenderer: "+re.message),re}let Qn,fi,rn,ei,hn,Rn,$i,fe,J,Ge,nt,dt,Qe,yn,Ht,kt,fn,vt,Jt,pn,vn,Ft,_n,Pe;function Lt(){Qn=new Qle(Me),Qn.init(),Ft=new Due(Me,Qn),fi=new Gle(Me,Qn,t,Ft),rn=new Tue(Me,Qn),fi.reverseDepthBuffer&&x&&rn.buffers.depth.setReversed(!0),ei=new tce(Me),hn=new pue,Rn=new Aue(Me,Qn,rn,hn,fi,Ft,ei),$i=new qle(G),fe=new Kle(G),J=new aoe(Me),_n=new jle(Me,J),Ge=new Jle(Me,J,ei,_n),nt=new ice(Me,Ge,J,ei),Jt=new nce(Me,fi,Rn),kt=new $le(hn),dt=new fue(G,$i,fe,Qn,fi,_n,kt),Qe=new kue(G,hn),yn=new gue,Ht=new wue(Qn),vt=new Hle(G,$i,fe,rn,nt,S,u),fn=new Mue(G,nt,fi),Pe=new Lue(Me,ei,fi,rn),pn=new Wle(Me,Qn,ei),vn=new ece(Me,Qn,ei),ei.programs=dt.programs,G.capabilities=fi,G.extensions=Qn,G.properties=hn,G.renderLists=yn,G.shadowMap=fn,G.state=rn,G.info=ei}Lt();let Ct=new Wk(G,Me);this.xr=Ct,this.getContext=function(){return Me},this.getContextAttributes=function(){return Me.getContextAttributes()},this.forceContextLoss=function(){let re=Qn.get("WEBGL_lose_context");re&&re.loseContext()},this.forceContextRestore=function(){let re=Qn.get("WEBGL_lose_context");re&&re.restoreContext()},this.getPixelRatio=function(){return me},this.setPixelRatio=function(re){re!==void 0&&(me=re,this.setSize(de,Re,!1))},this.getSize=function(re){return re.set(de,Re)},this.setSize=function(re,Fe,qe=!0){if(Ct.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}de=re,Re=Fe,e.width=Math.floor(re*me),e.height=Math.floor(Fe*me),qe===!0&&(e.style.width=re+"px",e.style.height=Fe+"px"),this.setViewport(0,0,re,Fe)},this.getDrawingBufferSize=function(re){return re.set(de*me,Re*me).floor()},this.setDrawingBufferSize=function(re,Fe,qe){de=re,Re=Fe,me=qe,e.width=Math.floor(re*qe),e.height=Math.floor(Fe*qe),this.setViewport(0,0,re,Fe)},this.getCurrentViewport=function(re){return re.copy(se)},this.getViewport=function(re){return re.copy(xt)},this.setViewport=function(re,Fe,qe,Xe){re.isVector4?xt.set(re.x,re.y,re.z,re.w):xt.set(re,Fe,qe,Xe),rn.viewport(se.copy(xt).multiplyScalar(me).round())},this.getScissor=function(re){return re.copy(Tt)},this.setScissor=function(re,Fe,qe,Xe){re.isVector4?Tt.set(re.x,re.y,re.z,re.w):Tt.set(re,Fe,qe,Xe),rn.scissor(we.copy(Tt).multiplyScalar(me).round())},this.getScissorTest=function(){return ut},this.setScissorTest=function(re){rn.setScissorTest(ut=re)},this.setOpaqueSort=function(re){$e=re},this.setTransparentSort=function(re){tt=re},this.getClearColor=function(re){return re.copy(vt.getClearColor())},this.setClearColor=function(){vt.setClearColor(...arguments)},this.getClearAlpha=function(){return vt.getClearAlpha()},this.setClearAlpha=function(){vt.setClearAlpha(...arguments)},this.clear=function(re=!0,Fe=!0,qe=!0){let Xe=0;if(re){let Be=!1;if(ue!==null){let At=ue.texture.format;Be=At===r1||At===i1||At===n1}if(Be){let At=ue.texture.type,Ut=At===Fc||At===Qh||At===Oy||At===By||At===JM||At===e1,$t=vt.getClearColor(),qt=vt.getClearAlpha(),Wt=$t.r,Tn=$t.g,Pt=$t.b;Ut?(D[0]=Wt,D[1]=Tn,D[2]=Pt,D[3]=qt,Me.clearBufferuiv(Me.COLOR,0,D)):(O[0]=Wt,O[1]=Tn,O[2]=Pt,O[3]=qt,Me.clearBufferiv(Me.COLOR,0,O))}else Xe|=Me.COLOR_BUFFER_BIT}Fe&&(Xe|=Me.DEPTH_BUFFER_BIT),qe&&(Xe|=Me.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Me.clear(Xe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",nn,!1),e.removeEventListener("webglcontextrestored",pt,!1),e.removeEventListener("webglcontextcreationerror",ct,!1),vt.dispose(),yn.dispose(),Ht.dispose(),hn.dispose(),$i.dispose(),fe.dispose(),nt.dispose(),_n.dispose(),Pe.dispose(),dt.dispose(),Ct.dispose(),Ct.removeEventListener("sessionstart",jd),Ct.removeEventListener("sessionend",Wr),on.stop()};function nn(re){re.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),le=!0}function pt(){console.log("THREE.WebGLRenderer: Context Restored."),le=!1;let re=ei.autoReset,Fe=fn.enabled,qe=fn.autoUpdate,Xe=fn.needsUpdate,Be=fn.type;Lt(),ei.autoReset=re,fn.enabled=Fe,fn.autoUpdate=qe,fn.needsUpdate=Xe,fn.type=Be}function ct(re){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",re.statusMessage)}function sn(re){let Fe=re.target;Fe.removeEventListener("dispose",sn),Vn(Fe)}function Vn(re){Dn(re),hn.remove(re)}function Dn(re){let Fe=hn.get(re).programs;Fe!==void 0&&(Fe.forEach(function(qe){dt.releaseProgram(qe)}),re.isShaderMaterial&&dt.releaseShaderCache(re))}this.renderBufferDirect=function(re,Fe,qe,Xe,Be,At){Fe===null&&(Fe=Mt);let Ut=Be.isMesh&&Be.matrixWorld.determinant()<0,$t=Wd(re,Fe,qe,Xe,Be);rn.setMaterial(Xe,Ut);let qt=qe.index,Wt=1;if(Xe.wireframe===!0){if(qt=Ge.getWireframeAttribute(qe),qt===void 0)return;Wt=2}let Tn=qe.drawRange,Pt=qe.attributes.position,gn=Tn.start*Wt,si=(Tn.start+Tn.count)*Wt;At!==null&&(gn=Math.max(gn,At.start*Wt),si=Math.min(si,(At.start+At.count)*Wt)),qt!==null?(gn=Math.max(gn,0),si=Math.min(si,qt.count)):Pt!=null&&(gn=Math.max(gn,0),si=Math.min(si,Pt.count));let Ki=si-gn;if(Ki<0||Ki===1/0)return;_n.setup(Be,Xe,$t,qe,qt);let Di,_i=pn;if(qt!==null&&(Di=J.get(qt),_i=vn,_i.setIndex(Di)),Be.isMesh)Xe.wireframe===!0?(rn.setLineWidth(Xe.wireframeLinewidth*Bn()),_i.setMode(Me.LINES)):_i.setMode(Me.TRIANGLES);else if(Be.isLine){let Dt=Xe.linewidth;Dt===void 0&&(Dt=1),rn.setLineWidth(Dt*Bn()),Be.isLineSegments?_i.setMode(Me.LINES):Be.isLineLoop?_i.setMode(Me.LINE_LOOP):_i.setMode(Me.LINE_STRIP)}else Be.isPoints?_i.setMode(Me.POINTS):Be.isSprite&&_i.setMode(Me.TRIANGLES);if(Be.isBatchedMesh)if(Be._multiDrawInstances!==null)Vp("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),_i.renderMultiDrawInstances(Be._multiDrawStarts,Be._multiDrawCounts,Be._multiDrawCount,Be._multiDrawInstances);else if(Qn.get("WEBGL_multi_draw"))_i.renderMultiDraw(Be._multiDrawStarts,Be._multiDrawCounts,Be._multiDrawCount);else{let Dt=Be._multiDrawStarts,ai=Be._multiDrawCounts,li=Be._multiDrawCount,hs=qt?J.get(qt).bytesPerElement:1,Sr=hn.get(Xe).currentProgram.getUniforms();for(let fs=0;fs<li;fs++)Sr.setValue(Me,"_gl_DrawID",fs),_i.render(Dt[fs]/hs,ai[fs])}else if(Be.isInstancedMesh)_i.renderInstances(gn,Ki,Be.count);else if(qe.isInstancedBufferGeometry){let Dt=qe._maxInstanceCount!==void 0?qe._maxInstanceCount:1/0,ai=Math.min(qe.instanceCount,Dt);_i.renderInstances(gn,Ki,ai)}else _i.render(gn,Ki)};function Oi(re,Fe,qe){re.transparent===!0&&re.side===zl&&re.forceSinglePass===!1?(re.side=oa,re.needsUpdate=!0,Zl(re,Fe,qe),re.side=Rc,re.needsUpdate=!0,Zl(re,Fe,qe),re.side=zl):Zl(re,Fe,qe)}this.compile=function(re,Fe,qe=null){qe===null&&(qe=re),T=Ht.get(qe),T.init(Fe),Z.push(T),qe.traverseVisible(function(Be){Be.isLight&&Be.layers.test(Fe.layers)&&(T.pushLight(Be),Be.castShadow&&T.pushShadow(Be))}),re!==qe&&re.traverseVisible(function(Be){Be.isLight&&Be.layers.test(Fe.layers)&&(T.pushLight(Be),Be.castShadow&&T.pushShadow(Be))}),T.setupLights();let Xe=new Set;return re.traverse(function(Be){if(!(Be.isMesh||Be.isPoints||Be.isLine||Be.isSprite))return;let At=Be.material;if(At)if(Array.isArray(At))for(let Ut=0;Ut<At.length;Ut++){let $t=At[Ut];Oi($t,qe,Be),Xe.add($t)}else Oi(At,qe,Be),Xe.add(At)}),T=Z.pop(),Xe},this.compileAsync=function(re,Fe,qe=null){let Xe=this.compile(re,Fe,qe);return new Promise(Be=>{function At(){if(Xe.forEach(function(Ut){hn.get(Ut).currentProgram.isReady()&&Xe.delete(Ut)}),Xe.size===0){Be(re);return}setTimeout(At,10)}Qn.get("KHR_parallel_shader_compile")!==null?At():setTimeout(At,10)})};let rs=null;function ss(re){rs&&rs(re)}function jd(){on.stop()}function Wr(){on.start()}let on=new l8;on.setAnimationLoop(ss),typeof self<"u"&&on.setContext(self),this.setAnimationLoop=function(re){rs=re,Ct.setAnimationLoop(re),re===null?on.stop():on.start()},Ct.addEventListener("sessionstart",jd),Ct.addEventListener("sessionend",Wr),this.render=function(re,Fe){if(Fe!==void 0&&Fe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(le===!0)return;if(re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),Fe.parent===null&&Fe.matrixWorldAutoUpdate===!0&&Fe.updateMatrixWorld(),Ct.enabled===!0&&Ct.isPresenting===!0&&(Ct.cameraAutoUpdate===!0&&Ct.updateCamera(Fe),Fe=Ct.getCamera()),re.isScene===!0&&re.onBeforeRender(G,re,Fe,ue),T=Ht.get(re,Z.length),T.init(Fe),Z.push(T),zt.multiplyMatrices(Fe.projectionMatrix,Fe.matrixWorldInverse),Ie.setFromProjectionMatrix(zt),Rt=this.localClippingEnabled,at=kt.init(this.clippingPlanes,Rt),N=yn.get(re,j.length),N.init(),j.push(N),Ct.enabled===!0&&Ct.isPresenting===!0){let At=G.xr.getDepthSensingMesh();At!==null&&Wc(At,Fe,-1/0,G.sortObjects)}Wc(re,Fe,0,G.sortObjects),N.finish(),G.sortObjects===!0&&N.sort($e,tt),Zi=Ct.enabled===!1||Ct.isPresenting===!1||Ct.hasDepthSensing()===!1,Zi&&vt.addToRenderList(N,re),this.info.render.frame++,at===!0&&kt.beginShadows();let qe=T.state.shadowsArray;fn.render(qe,re,Fe),at===!0&&kt.endShadows(),this.info.autoReset===!0&&this.info.reset();let Xe=N.opaque,Be=N.transmissive;if(T.setupLights(),Fe.isArrayCamera){let At=Fe.cameras;if(Be.length>0)for(let Ut=0,$t=At.length;Ut<$t;Ut++){let qt=At[Ut];Uu(Xe,Be,re,qt)}Zi&&vt.render(re);for(let Ut=0,$t=At.length;Ut<$t;Ut++){let qt=At[Ut];Gc(N,re,qt,qt.viewport)}}else Be.length>0&&Uu(Xe,Be,re,Fe),Zi&&vt.render(re),Gc(N,re,Fe);ue!==null&&oe===0&&(Rn.updateMultisampleRenderTarget(ue),Rn.updateRenderTargetMipmap(ue)),re.isScene===!0&&re.onAfterRender(G,re,Fe),_n.resetDefaultState(),te=-1,V=null,Z.pop(),Z.length>0?(T=Z[Z.length-1],at===!0&&kt.setGlobalState(G.clippingPlanes,T.state.camera)):T=null,j.pop(),j.length>0?N=j[j.length-1]:N=null};function Wc(re,Fe,qe,Xe){if(re.visible===!1)return;if(re.layers.test(Fe.layers)){if(re.isGroup)qe=re.renderOrder;else if(re.isLOD)re.autoUpdate===!0&&re.update(Fe);else if(re.isLight)T.pushLight(re),re.castShadow&&T.pushShadow(re);else if(re.isSprite){if(!re.frustumCulled||Ie.intersectsSprite(re)){Xe&&dn.setFromMatrixPosition(re.matrixWorld).applyMatrix4(zt);let Ut=nt.update(re),$t=re.material;$t.visible&&N.push(re,Ut,$t,qe,dn.z,null)}}else if((re.isMesh||re.isLine||re.isPoints)&&(!re.frustumCulled||Ie.intersectsObject(re))){let Ut=nt.update(re),$t=re.material;if(Xe&&(re.boundingSphere!==void 0?(re.boundingSphere===null&&re.computeBoundingSphere(),dn.copy(re.boundingSphere.center)):(Ut.boundingSphere===null&&Ut.computeBoundingSphere(),dn.copy(Ut.boundingSphere.center)),dn.applyMatrix4(re.matrixWorld).applyMatrix4(zt)),Array.isArray($t)){let qt=Ut.groups;for(let Wt=0,Tn=qt.length;Wt<Tn;Wt++){let Pt=qt[Wt],gn=$t[Pt.materialIndex];gn&&gn.visible&&N.push(re,Ut,gn,qe,dn.z,Pt)}}else $t.visible&&N.push(re,Ut,$t,qe,dn.z,null)}}let At=re.children;for(let Ut=0,$t=At.length;Ut<$t;Ut++)Wc(At[Ut],Fe,qe,Xe)}function Gc(re,Fe,qe,Xe){let Be=re.opaque,At=re.transmissive,Ut=re.transparent;T.setupLightsView(qe),at===!0&&kt.setGlobalState(G.clippingPlanes,qe),Xe&&rn.viewport(se.copy(Xe)),Be.length>0&&Fa(Be,Fe,qe),At.length>0&&Fa(At,Fe,qe),Ut.length>0&&Fa(Ut,Fe,qe),rn.buffers.depth.setTest(!0),rn.buffers.depth.setMask(!0),rn.buffers.color.setMask(!0),rn.setPolygonOffset(!1)}function Uu(re,Fe,qe,Xe){if((qe.isScene===!0?qe.overrideMaterial:null)!==null)return;T.state.transmissionRenderTarget[Xe.id]===void 0&&(T.state.transmissionRenderTarget[Xe.id]=new Du(1,1,{generateMipmaps:!0,type:Qn.has("EXT_color_buffer_half_float")||Qn.has("EXT_color_buffer_float")?Fy:Fc,minFilter:Oc,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Gi.workingColorSpace}));let At=T.state.transmissionRenderTarget[Xe.id],Ut=Xe.viewport||se;At.setSize(Ut.z*G.transmissionResolutionScale,Ut.w*G.transmissionResolutionScale);let $t=G.getRenderTarget();G.setRenderTarget(At),G.getClearColor(je),ze=G.getClearAlpha(),ze<1&&G.setClearColor(16777215,.5),G.clear(),Zi&&vt.render(qe);let qt=G.toneMapping;G.toneMapping=kd;let Wt=Xe.viewport;if(Xe.viewport!==void 0&&(Xe.viewport=void 0),T.setupLightsView(Xe),at===!0&&kt.setGlobalState(G.clippingPlanes,Xe),Fa(re,qe,Xe),Rn.updateMultisampleRenderTarget(At),Rn.updateRenderTargetMipmap(At),Qn.has("WEBGL_multisampled_render_to_texture")===!1){let Tn=!1;for(let Pt=0,gn=Fe.length;Pt<gn;Pt++){let si=Fe[Pt],Ki=si.object,Di=si.geometry,_i=si.material,Dt=si.group;if(_i.side===zl&&Ki.layers.test(Xe.layers)){let ai=_i.side;_i.side=oa,_i.needsUpdate=!0,Yl(Ki,qe,Xe,Di,_i,Dt),_i.side=ai,_i.needsUpdate=!0,Tn=!0}}Tn===!0&&(Rn.updateMultisampleRenderTarget(At),Rn.updateRenderTargetMipmap(At))}G.setRenderTarget($t),G.setClearColor(je,ze),Wt!==void 0&&(Xe.viewport=Wt),G.toneMapping=qt}function Fa(re,Fe,qe){let Xe=Fe.isScene===!0?Fe.overrideMaterial:null;for(let Be=0,At=re.length;Be<At;Be++){let Ut=re[Be],$t=Ut.object,qt=Ut.geometry,Wt=Ut.group,Tn=Ut.material;Tn.allowOverride===!0&&Xe!==null&&(Tn=Xe),$t.layers.test(qe.layers)&&Yl($t,Fe,qe,qt,Tn,Wt)}}function Yl(re,Fe,qe,Xe,Be,At){re.onBeforeRender(G,Fe,qe,Xe,Be,At),re.modelViewMatrix.multiplyMatrices(qe.matrixWorldInverse,re.matrixWorld),re.normalMatrix.getNormalMatrix(re.modelViewMatrix),Be.onBeforeRender(G,Fe,qe,Xe,re,At),Be.transparent===!0&&Be.side===zl&&Be.forceSinglePass===!1?(Be.side=oa,Be.needsUpdate=!0,G.renderBufferDirect(qe,Fe,Xe,Be,re,At),Be.side=Rc,Be.needsUpdate=!0,G.renderBufferDirect(qe,Fe,Xe,Be,re,At),Be.side=zl):G.renderBufferDirect(qe,Fe,Xe,Be,re,At),re.onAfterRender(G,Fe,qe,Xe,Be,At)}function Zl(re,Fe,qe){Fe.isScene!==!0&&(Fe=Mt);let Xe=hn.get(re),Be=T.state.lights,At=T.state.shadowsArray,Ut=Be.state.version,$t=dt.getParameters(re,Be.state,At,Fe,qe),qt=dt.getProgramCacheKey($t),Wt=Xe.programs;Xe.environment=re.isMeshStandardMaterial?Fe.environment:null,Xe.fog=Fe.fog,Xe.envMap=(re.isMeshStandardMaterial?fe:$i).get(re.envMap||Xe.environment),Xe.envMapRotation=Xe.environment!==null&&re.envMap===null?Fe.environmentRotation:re.envMapRotation,Wt===void 0&&(re.addEventListener("dispose",sn),Wt=new Map,Xe.programs=Wt);let Tn=Wt.get(qt);if(Tn!==void 0){if(Xe.currentProgram===Tn&&Xe.lightsStateVersion===Ut)return ul(re,$t),Tn}else $t.uniforms=dt.getUniforms(re),re.onBeforeCompile($t,G),Tn=dt.acquireProgram($t,qt),Wt.set(qt,Tn),Xe.uniforms=$t.uniforms;let Pt=Xe.uniforms;return(!re.isShaderMaterial&&!re.isRawShaderMaterial||re.clipping===!0)&&(Pt.clippingPlanes=kt.uniform),ul(re,$t),Xe.needsLights=zu(re),Xe.lightsStateVersion=Ut,Xe.needsLights&&(Pt.ambientLightColor.value=Be.state.ambient,Pt.lightProbe.value=Be.state.probe,Pt.directionalLights.value=Be.state.directional,Pt.directionalLightShadows.value=Be.state.directionalShadow,Pt.spotLights.value=Be.state.spot,Pt.spotLightShadows.value=Be.state.spotShadow,Pt.rectAreaLights.value=Be.state.rectArea,Pt.ltc_1.value=Be.state.rectAreaLTC1,Pt.ltc_2.value=Be.state.rectAreaLTC2,Pt.pointLights.value=Be.state.point,Pt.pointLightShadows.value=Be.state.pointShadow,Pt.hemisphereLights.value=Be.state.hemi,Pt.directionalShadowMap.value=Be.state.directionalShadowMap,Pt.directionalShadowMatrix.value=Be.state.directionalShadowMatrix,Pt.spotShadowMap.value=Be.state.spotShadowMap,Pt.spotLightMatrix.value=Be.state.spotLightMatrix,Pt.spotLightMap.value=Be.state.spotLightMap,Pt.pointShadowMap.value=Be.state.pointShadowMap,Pt.pointShadowMatrix.value=Be.state.pointShadowMatrix),Xe.currentProgram=Tn,Xe.uniformsList=null,Tn}function Po(re){if(re.uniformsList===null){let Fe=re.currentProgram.getUniforms();re.uniformsList=jy.seqWithValue(Fe.seq,re.uniforms)}return re.uniformsList}function ul(re,Fe){let qe=hn.get(re);qe.outputColorSpace=Fe.outputColorSpace,qe.batching=Fe.batching,qe.batchingColor=Fe.batchingColor,qe.instancing=Fe.instancing,qe.instancingColor=Fe.instancingColor,qe.instancingMorph=Fe.instancingMorph,qe.skinning=Fe.skinning,qe.morphTargets=Fe.morphTargets,qe.morphNormals=Fe.morphNormals,qe.morphColors=Fe.morphColors,qe.morphTargetsCount=Fe.morphTargetsCount,qe.numClippingPlanes=Fe.numClippingPlanes,qe.numIntersection=Fe.numClipIntersection,qe.vertexAlphas=Fe.vertexAlphas,qe.vertexTangents=Fe.vertexTangents,qe.toneMapping=Fe.toneMapping}function Wd(re,Fe,qe,Xe,Be){Fe.isScene!==!0&&(Fe=Mt),Rn.resetTextureUnits();let At=Fe.fog,Ut=Xe.isMeshStandardMaterial?Fe.environment:null,$t=ue===null?G.outputColorSpace:ue.isXRRenderTarget===!0?ue.texture.colorSpace:po,qt=(Xe.isMeshStandardMaterial?fe:$i).get(Xe.envMap||Ut),Wt=Xe.vertexColors===!0&&!!qe.attributes.color&&qe.attributes.color.itemSize===4,Tn=!!qe.attributes.tangent&&(!!Xe.normalMap||Xe.anisotropy>0),Pt=!!qe.morphAttributes.position,gn=!!qe.morphAttributes.normal,si=!!qe.morphAttributes.color,Ki=kd;Xe.toneMapped&&(ue===null||ue.isXRRenderTarget===!0)&&(Ki=G.toneMapping);let Di=qe.morphAttributes.position||qe.morphAttributes.normal||qe.morphAttributes.color,_i=Di!==void 0?Di.length:0,Dt=hn.get(Xe),ai=T.state.lights;if(at===!0&&(Rt===!0||re!==V)){let cr=re===V&&Xe.id===te;kt.setState(Xe,re,cr)}let li=!1;Xe.version===Dt.__version?(Dt.needsLights&&Dt.lightsStateVersion!==ai.state.version||Dt.outputColorSpace!==$t||Be.isBatchedMesh&&Dt.batching===!1||!Be.isBatchedMesh&&Dt.batching===!0||Be.isBatchedMesh&&Dt.batchingColor===!0&&Be.colorTexture===null||Be.isBatchedMesh&&Dt.batchingColor===!1&&Be.colorTexture!==null||Be.isInstancedMesh&&Dt.instancing===!1||!Be.isInstancedMesh&&Dt.instancing===!0||Be.isSkinnedMesh&&Dt.skinning===!1||!Be.isSkinnedMesh&&Dt.skinning===!0||Be.isInstancedMesh&&Dt.instancingColor===!0&&Be.instanceColor===null||Be.isInstancedMesh&&Dt.instancingColor===!1&&Be.instanceColor!==null||Be.isInstancedMesh&&Dt.instancingMorph===!0&&Be.morphTexture===null||Be.isInstancedMesh&&Dt.instancingMorph===!1&&Be.morphTexture!==null||Dt.envMap!==qt||Xe.fog===!0&&Dt.fog!==At||Dt.numClippingPlanes!==void 0&&(Dt.numClippingPlanes!==kt.numPlanes||Dt.numIntersection!==kt.numIntersection)||Dt.vertexAlphas!==Wt||Dt.vertexTangents!==Tn||Dt.morphTargets!==Pt||Dt.morphNormals!==gn||Dt.morphColors!==si||Dt.toneMapping!==Ki||Dt.morphTargetsCount!==_i)&&(li=!0):(li=!0,Dt.__version=Xe.version);let hs=Dt.currentProgram;li===!0&&(hs=Zl(Xe,Fe,Be));let Sr=!1,fs=!1,Ro=!1,Ti=hs.getUniforms(),Ii=Dt.uniforms;if(rn.useProgram(hs.program)&&(Sr=!0,fs=!0,Ro=!0),Xe.id!==te&&(te=Xe.id,fs=!0),Sr||V!==re){rn.buffers.depth.getReversed()?(rt.copy(re.projectionMatrix),k5(rt),L5(rt),Ti.setValue(Me,"projectionMatrix",rt)):Ti.setValue(Me,"projectionMatrix",re.projectionMatrix),Ti.setValue(Me,"viewMatrix",re.matrixWorldInverse);let nr=Ti.map.cameraPosition;nr!==void 0&&nr.setValue(Me,Sn.setFromMatrixPosition(re.matrixWorld)),fi.logarithmicDepthBuffer&&Ti.setValue(Me,"logDepthBufFC",2/(Math.log(re.far+1)/Math.LN2)),(Xe.isMeshPhongMaterial||Xe.isMeshToonMaterial||Xe.isMeshLambertMaterial||Xe.isMeshBasicMaterial||Xe.isMeshStandardMaterial||Xe.isShaderMaterial)&&Ti.setValue(Me,"isOrthographic",re.isOrthographicCamera===!0),V!==re&&(V=re,fs=!0,Ro=!0)}if(Be.isSkinnedMesh){Ti.setOptional(Me,Be,"bindMatrix"),Ti.setOptional(Me,Be,"bindMatrixInverse");let cr=Be.skeleton;cr&&(cr.boneTexture===null&&cr.computeBoneTexture(),Ti.setValue(Me,"boneTexture",cr.boneTexture,Rn))}Be.isBatchedMesh&&(Ti.setOptional(Me,Be,"batchingTexture"),Ti.setValue(Me,"batchingTexture",Be._matricesTexture,Rn),Ti.setOptional(Me,Be,"batchingIdTexture"),Ti.setValue(Me,"batchingIdTexture",Be._indirectTexture,Rn),Ti.setOptional(Me,Be,"batchingColorTexture"),Be._colorsTexture!==null&&Ti.setValue(Me,"batchingColorTexture",Be._colorsTexture,Rn));let Fi=qe.morphAttributes;if((Fi.position!==void 0||Fi.normal!==void 0||Fi.color!==void 0)&&Jt.update(Be,qe,hs),(fs||Dt.receiveShadow!==Be.receiveShadow)&&(Dt.receiveShadow=Be.receiveShadow,Ti.setValue(Me,"receiveShadow",Be.receiveShadow)),Xe.isMeshGouraudMaterial&&Xe.envMap!==null&&(Ii.envMap.value=qt,Ii.flipEnvMap.value=qt.isCubeTexture&&qt.isRenderTargetTexture===!1?-1:1),Xe.isMeshStandardMaterial&&Xe.envMap===null&&Fe.environment!==null&&(Ii.envMapIntensity.value=Fe.environmentIntensity),fs&&(Ti.setValue(Me,"toneMappingExposure",G.toneMappingExposure),Dt.needsLights&&Gr(Ii,Ro),At&&Xe.fog===!0&&Qe.refreshFogUniforms(Ii,At),Qe.refreshMaterialUniforms(Ii,Xe,me,Re,T.state.transmissionRenderTarget[re.id]),jy.upload(Me,Po(Dt),Ii,Rn)),Xe.isShaderMaterial&&Xe.uniformsNeedUpdate===!0&&(jy.upload(Me,Po(Dt),Ii,Rn),Xe.uniformsNeedUpdate=!1),Xe.isSpriteMaterial&&Ti.setValue(Me,"center",Be.center),Ti.setValue(Me,"modelViewMatrix",Be.modelViewMatrix),Ti.setValue(Me,"normalMatrix",Be.normalMatrix),Ti.setValue(Me,"modelMatrix",Be.matrixWorld),Xe.isShaderMaterial||Xe.isRawShaderMaterial){let cr=Xe.uniformsGroups;for(let nr=0,Kl=cr.length;nr<Kl;nr++){let Ys=cr[nr];Pe.update(Ys,hs),Pe.bind(Ys,hs)}}return hs}function Gr(re,Fe){re.ambientLightColor.needsUpdate=Fe,re.lightProbe.needsUpdate=Fe,re.directionalLights.needsUpdate=Fe,re.directionalLightShadows.needsUpdate=Fe,re.pointLights.needsUpdate=Fe,re.pointLightShadows.needsUpdate=Fe,re.spotLights.needsUpdate=Fe,re.spotLightShadows.needsUpdate=Fe,re.rectAreaLights.needsUpdate=Fe,re.hemisphereLights.needsUpdate=Fe}function zu(re){return re.isMeshLambertMaterial||re.isMeshToonMaterial||re.isMeshPhongMaterial||re.isMeshStandardMaterial||re.isShadowMaterial||re.isShaderMaterial&&re.lights===!0}this.getActiveCubeFace=function(){return K},this.getActiveMipmapLevel=function(){return oe},this.getRenderTarget=function(){return ue},this.setRenderTargetTextures=function(re,Fe,qe){let Xe=hn.get(re);Xe.__autoAllocateDepthBuffer=re.resolveDepthBuffer===!1,Xe.__autoAllocateDepthBuffer===!1&&(Xe.__useRenderToTexture=!1),hn.get(re.texture).__webglTexture=Fe,hn.get(re.depthTexture).__webglTexture=Xe.__autoAllocateDepthBuffer?void 0:qe,Xe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(re,Fe){let qe=hn.get(re);qe.__webglFramebuffer=Fe,qe.__useDefaultFramebuffer=Fe===void 0};let gf=Me.createFramebuffer();this.setRenderTarget=function(re,Fe=0,qe=0){ue=re,K=Fe,oe=qe;let Xe=!0,Be=null,At=!1,Ut=!1;if(re){let qt=hn.get(re);if(qt.__useDefaultFramebuffer!==void 0)rn.bindFramebuffer(Me.FRAMEBUFFER,null),Xe=!1;else if(qt.__webglFramebuffer===void 0)Rn.setupRenderTarget(re);else if(qt.__hasExternalTextures)Rn.rebindTextures(re,hn.get(re.texture).__webglTexture,hn.get(re.depthTexture).__webglTexture);else if(re.depthBuffer){let Pt=re.depthTexture;if(qt.__boundDepthTexture!==Pt){if(Pt!==null&&hn.has(Pt)&&(re.width!==Pt.image.width||re.height!==Pt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Rn.setupDepthRenderbuffer(re)}}let Wt=re.texture;(Wt.isData3DTexture||Wt.isDataArrayTexture||Wt.isCompressedArrayTexture)&&(Ut=!0);let Tn=hn.get(re).__webglFramebuffer;re.isWebGLCubeRenderTarget?(Array.isArray(Tn[Fe])?Be=Tn[Fe][qe]:Be=Tn[Fe],At=!0):re.samples>0&&Rn.useMultisampledRTT(re)===!1?Be=hn.get(re).__webglMultisampledFramebuffer:Array.isArray(Tn)?Be=Tn[qe]:Be=Tn,se.copy(re.viewport),we.copy(re.scissor),he=re.scissorTest}else se.copy(xt).multiplyScalar(me).floor(),we.copy(Tt).multiplyScalar(me).floor(),he=ut;if(qe!==0&&(Be=gf),rn.bindFramebuffer(Me.FRAMEBUFFER,Be)&&Xe&&rn.drawBuffers(re,Be),rn.viewport(se),rn.scissor(we),rn.setScissorTest(he),At){let qt=hn.get(re.texture);Me.framebufferTexture2D(Me.FRAMEBUFFER,Me.COLOR_ATTACHMENT0,Me.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,qt.__webglTexture,qe)}else if(Ut){let qt=hn.get(re.texture),Wt=Fe;Me.framebufferTextureLayer(Me.FRAMEBUFFER,Me.COLOR_ATTACHMENT0,qt.__webglTexture,qe,Wt)}else if(re!==null&&qe!==0){let qt=hn.get(re.texture);Me.framebufferTexture2D(Me.FRAMEBUFFER,Me.COLOR_ATTACHMENT0,Me.TEXTURE_2D,qt.__webglTexture,qe)}te=-1},this.readRenderTargetPixels=function(re,Fe,qe,Xe,Be,At,Ut,$t=0){if(!(re&&re.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let qt=hn.get(re).__webglFramebuffer;if(re.isWebGLCubeRenderTarget&&Ut!==void 0&&(qt=qt[Ut]),qt){rn.bindFramebuffer(Me.FRAMEBUFFER,qt);try{let Wt=re.textures[$t],Tn=Wt.format,Pt=Wt.type;if(!fi.textureFormatReadable(Tn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!fi.textureTypeReadable(Pt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Fe>=0&&Fe<=re.width-Xe&&qe>=0&&qe<=re.height-Be&&(re.textures.length>1&&Me.readBuffer(Me.COLOR_ATTACHMENT0+$t),Me.readPixels(Fe,qe,Xe,Be,Ft.convert(Tn),Ft.convert(Pt),At))}finally{let Wt=ue!==null?hn.get(ue).__webglFramebuffer:null;rn.bindFramebuffer(Me.FRAMEBUFFER,Wt)}}},this.readRenderTargetPixelsAsync=function(re,Fe,qe,Xe,Be,At,Ut,$t=0){return In(this,null,function*(){if(!(re&&re.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let qt=hn.get(re).__webglFramebuffer;if(re.isWebGLCubeRenderTarget&&Ut!==void 0&&(qt=qt[Ut]),qt)if(Fe>=0&&Fe<=re.width-Xe&&qe>=0&&qe<=re.height-Be){rn.bindFramebuffer(Me.FRAMEBUFFER,qt);let Wt=re.textures[$t],Tn=Wt.format,Pt=Wt.type;if(!fi.textureFormatReadable(Tn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!fi.textureTypeReadable(Pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let gn=Me.createBuffer();Me.bindBuffer(Me.PIXEL_PACK_BUFFER,gn),Me.bufferData(Me.PIXEL_PACK_BUFFER,At.byteLength,Me.STREAM_READ),re.textures.length>1&&Me.readBuffer(Me.COLOR_ATTACHMENT0+$t),Me.readPixels(Fe,qe,Xe,Be,Ft.convert(Tn),Ft.convert(Pt),0);let si=ue!==null?hn.get(ue).__webglFramebuffer:null;rn.bindFramebuffer(Me.FRAMEBUFFER,si);let Ki=Me.fenceSync(Me.SYNC_GPU_COMMANDS_COMPLETE,0);return Me.flush(),yield R5(Me,Ki,4),Me.bindBuffer(Me.PIXEL_PACK_BUFFER,gn),Me.getBufferSubData(Me.PIXEL_PACK_BUFFER,0,At),Me.deleteBuffer(gn),Me.deleteSync(Ki),At}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(re,Fe=null,qe=0){let Xe=Math.pow(2,-qe),Be=Math.floor(re.image.width*Xe),At=Math.floor(re.image.height*Xe),Ut=Fe!==null?Fe.x:0,$t=Fe!==null?Fe.y:0;Rn.setTexture2D(re,0),Me.copyTexSubImage2D(Me.TEXTURE_2D,qe,0,0,Ut,$t,Be,At),rn.unbindTexture()};let Gd=Me.createFramebuffer(),Ba=Me.createFramebuffer();this.copyTextureToTexture=function(re,Fe,qe=null,Xe=null,Be=0,At=null){At===null&&(Be!==0?(Vp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),At=Be,Be=0):At=0);let Ut,$t,qt,Wt,Tn,Pt,gn,si,Ki,Di=re.isCompressedTexture?re.mipmaps[At]:re.image;if(qe!==null)Ut=qe.max.x-qe.min.x,$t=qe.max.y-qe.min.y,qt=qe.isBox3?qe.max.z-qe.min.z:1,Wt=qe.min.x,Tn=qe.min.y,Pt=qe.isBox3?qe.min.z:0;else{let Fi=Math.pow(2,-Be);Ut=Math.floor(Di.width*Fi),$t=Math.floor(Di.height*Fi),re.isDataArrayTexture?qt=Di.depth:re.isData3DTexture?qt=Math.floor(Di.depth*Fi):qt=1,Wt=0,Tn=0,Pt=0}Xe!==null?(gn=Xe.x,si=Xe.y,Ki=Xe.z):(gn=0,si=0,Ki=0);let _i=Ft.convert(Fe.format),Dt=Ft.convert(Fe.type),ai;Fe.isData3DTexture?(Rn.setTexture3D(Fe,0),ai=Me.TEXTURE_3D):Fe.isDataArrayTexture||Fe.isCompressedArrayTexture?(Rn.setTexture2DArray(Fe,0),ai=Me.TEXTURE_2D_ARRAY):(Rn.setTexture2D(Fe,0),ai=Me.TEXTURE_2D),Me.pixelStorei(Me.UNPACK_FLIP_Y_WEBGL,Fe.flipY),Me.pixelStorei(Me.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Fe.premultiplyAlpha),Me.pixelStorei(Me.UNPACK_ALIGNMENT,Fe.unpackAlignment);let li=Me.getParameter(Me.UNPACK_ROW_LENGTH),hs=Me.getParameter(Me.UNPACK_IMAGE_HEIGHT),Sr=Me.getParameter(Me.UNPACK_SKIP_PIXELS),fs=Me.getParameter(Me.UNPACK_SKIP_ROWS),Ro=Me.getParameter(Me.UNPACK_SKIP_IMAGES);Me.pixelStorei(Me.UNPACK_ROW_LENGTH,Di.width),Me.pixelStorei(Me.UNPACK_IMAGE_HEIGHT,Di.height),Me.pixelStorei(Me.UNPACK_SKIP_PIXELS,Wt),Me.pixelStorei(Me.UNPACK_SKIP_ROWS,Tn),Me.pixelStorei(Me.UNPACK_SKIP_IMAGES,Pt);let Ti=re.isDataArrayTexture||re.isData3DTexture,Ii=Fe.isDataArrayTexture||Fe.isData3DTexture;if(re.isDepthTexture){let Fi=hn.get(re),cr=hn.get(Fe),nr=hn.get(Fi.__renderTarget),Kl=hn.get(cr.__renderTarget);rn.bindFramebuffer(Me.READ_FRAMEBUFFER,nr.__webglFramebuffer),rn.bindFramebuffer(Me.DRAW_FRAMEBUFFER,Kl.__webglFramebuffer);for(let Ys=0;Ys<qt;Ys++)Ti&&(Me.framebufferTextureLayer(Me.READ_FRAMEBUFFER,Me.COLOR_ATTACHMENT0,hn.get(re).__webglTexture,Be,Pt+Ys),Me.framebufferTextureLayer(Me.DRAW_FRAMEBUFFER,Me.COLOR_ATTACHMENT0,hn.get(Fe).__webglTexture,At,Ki+Ys)),Me.blitFramebuffer(Wt,Tn,Ut,$t,gn,si,Ut,$t,Me.DEPTH_BUFFER_BIT,Me.NEAREST);rn.bindFramebuffer(Me.READ_FRAMEBUFFER,null),rn.bindFramebuffer(Me.DRAW_FRAMEBUFFER,null)}else if(Be!==0||re.isRenderTargetTexture||hn.has(re)){let Fi=hn.get(re),cr=hn.get(Fe);rn.bindFramebuffer(Me.READ_FRAMEBUFFER,Gd),rn.bindFramebuffer(Me.DRAW_FRAMEBUFFER,Ba);for(let nr=0;nr<qt;nr++)Ti?Me.framebufferTextureLayer(Me.READ_FRAMEBUFFER,Me.COLOR_ATTACHMENT0,Fi.__webglTexture,Be,Pt+nr):Me.framebufferTexture2D(Me.READ_FRAMEBUFFER,Me.COLOR_ATTACHMENT0,Me.TEXTURE_2D,Fi.__webglTexture,Be),Ii?Me.framebufferTextureLayer(Me.DRAW_FRAMEBUFFER,Me.COLOR_ATTACHMENT0,cr.__webglTexture,At,Ki+nr):Me.framebufferTexture2D(Me.DRAW_FRAMEBUFFER,Me.COLOR_ATTACHMENT0,Me.TEXTURE_2D,cr.__webglTexture,At),Be!==0?Me.blitFramebuffer(Wt,Tn,Ut,$t,gn,si,Ut,$t,Me.COLOR_BUFFER_BIT,Me.NEAREST):Ii?Me.copyTexSubImage3D(ai,At,gn,si,Ki+nr,Wt,Tn,Ut,$t):Me.copyTexSubImage2D(ai,At,gn,si,Wt,Tn,Ut,$t);rn.bindFramebuffer(Me.READ_FRAMEBUFFER,null),rn.bindFramebuffer(Me.DRAW_FRAMEBUFFER,null)}else Ii?re.isDataTexture||re.isData3DTexture?Me.texSubImage3D(ai,At,gn,si,Ki,Ut,$t,qt,_i,Dt,Di.data):Fe.isCompressedArrayTexture?Me.compressedTexSubImage3D(ai,At,gn,si,Ki,Ut,$t,qt,_i,Di.data):Me.texSubImage3D(ai,At,gn,si,Ki,Ut,$t,qt,_i,Dt,Di):re.isDataTexture?Me.texSubImage2D(Me.TEXTURE_2D,At,gn,si,Ut,$t,_i,Dt,Di.data):re.isCompressedTexture?Me.compressedTexSubImage2D(Me.TEXTURE_2D,At,gn,si,Di.width,Di.height,_i,Di.data):Me.texSubImage2D(Me.TEXTURE_2D,At,gn,si,Ut,$t,_i,Dt,Di);Me.pixelStorei(Me.UNPACK_ROW_LENGTH,li),Me.pixelStorei(Me.UNPACK_IMAGE_HEIGHT,hs),Me.pixelStorei(Me.UNPACK_SKIP_PIXELS,Sr),Me.pixelStorei(Me.UNPACK_SKIP_ROWS,fs),Me.pixelStorei(Me.UNPACK_SKIP_IMAGES,Ro),At===0&&Fe.generateMipmaps&&Me.generateMipmap(ai),rn.unbindTexture()},this.copyTextureToTexture3D=function(re,Fe,qe=null,Xe=null,Be=0){return Vp('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(re,Fe,qe,Xe,Be)},this.initRenderTarget=function(re){hn.get(re).__webglFramebuffer===void 0&&Rn.setupRenderTarget(re)},this.initTexture=function(re){re.isCubeTexture?Rn.setTextureCube(re,0):re.isData3DTexture?Rn.setTexture3D(re,0):re.isDataArrayTexture||re.isCompressedArrayTexture?Rn.setTexture2DArray(re,0):Rn.setTexture2D(re,0),rn.unbindTexture()},this.resetState=function(){K=0,oe=0,ue=null,rn.reset(),_n.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Tu}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;let e=this.getContext();e.drawingBufferColorSpace=Gi._getDrawingBufferColorSpace(t),e.unpackColorSpace=Gi._getUnpackColorSpace()}};var f8={type:"change"},qk={type:"start"},m8={type:"end"},F1=new Iu,p8=new Vl,Nue=Math.cos(70*db.DEG2RAD),$s=new Ne,La=2*Math.PI,_r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},$k=1e-6,B1=class extends ib{constructor(t,e=null){super(t,e),this.state=_r.NONE,this.target=new Ne,this.cursor=new Ne,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Ul.ROTATE,MIDDLE:Ul.DOLLY,RIGHT:Ul.PAN},this.touches={ONE:Nc.ROTATE,TWO:Nc.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Ne,this._lastQuaternion=new ra,this._lastTargetPosition=new Ne,this._quat=new ra().setFromUnitVectors(t.up,new Ne(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Ly,this._sphericalDelta=new Ly,this._scale=1,this._panOffset=new Ne,this._rotateStart=new Yn,this._rotateEnd=new Yn,this._rotateDelta=new Yn,this._panStart=new Yn,this._panEnd=new Yn,this._panDelta=new Yn,this._dollyStart=new Yn,this._dollyEnd=new Yn,this._dollyDelta=new Yn,this._dollyDirection=new Ne,this._mouse=new Yn,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=Fue.bind(this),this._onPointerDown=Oue.bind(this),this._onPointerUp=Bue.bind(this),this._onContextMenu=Gue.bind(this),this._onMouseWheel=zue.bind(this),this._onKeyDown=Hue.bind(this),this._onTouchStart=jue.bind(this),this._onTouchMove=Wue.bind(this),this._onMouseDown=Vue.bind(this),this._onMouseMove=Uue.bind(this),this._interceptControlDown=$ue.bind(this),this._interceptControlUp=que.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(t){super.connect(t),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(f8),this.update(),this.state=_r.NONE}update(t=null){let e=this.object.position;$s.copy(e).sub(this.target),$s.applyQuaternion(this._quat),this._spherical.setFromVector3($s),this.autoRotate&&this.state===_r.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&&isFinite(r)&&(i<-Math.PI?i+=La:i>Math.PI&&(i-=La),r<-Math.PI?r+=La:r>Math.PI&&(r-=La),i<=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if($s.setFromSpherical(this._spherical),$s.applyQuaternion(this._quatInverse),e.copy(this.target).add($s),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){let a=$s.length();o=this._clampDistance(a*this._scale);let u=a-o;this.object.position.addScaledVector(this._dollyDirection,u),this.object.updateMatrixWorld(),s=!!u}else if(this.object.isOrthographicCamera){let a=new Ne(this._mouse.x,this._mouse.y,0);a.unproject(this.object);let u=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=u!==this.object.zoom;let h=new Ne(this._mouse.x,this._mouse.y,0);h.unproject(this.object),this.object.position.sub(h).add(a),this.object.updateMatrixWorld(),o=$s.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(F1.origin.copy(this.object.position),F1.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(F1.direction))<Nue?this.object.lookAt(this.target):(p8.setFromNormalAndCoplanarPoint(this.object.up,this.target),F1.intersectPlane(p8,this.target))))}else if(this.object.isOrthographicCamera){let o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>$k||8*(1-this._lastQuaternion.dot(this.object.quaternion))>$k||this._lastTargetPosition.distanceToSquared(this.target)>$k?(this.dispatchEvent(f8),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(t){return t!==null?La/60*this.autoRotateSpeed*t:La/60/60*this.autoRotateSpeed}_getZoomScale(t){let e=Math.abs(t*.01);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){$s.setFromMatrixColumn(e,0),$s.multiplyScalar(-t),this._panOffset.add($s)}_panUp(t,e){this.screenSpacePanning===!0?$s.setFromMatrixColumn(e,1):($s.setFromMatrixColumn(e,0),$s.crossVectors(this.object.up,$s)),$s.multiplyScalar(t),this._panOffset.add($s)}_pan(t,e){let i=this.domElement;if(this.object.isPerspectiveCamera){let r=this.object.position;$s.copy(r).sub(this.target);let s=$s.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*s/i.clientHeight,this.object.matrix),this._panUp(2*e*s/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),r=t-i.left,s=e-i.top,o=i.width,a=i.height;this._mouse.x=r/o*2-1,this._mouse.y=-(s/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(La*this._rotateDelta.x/e.clientHeight),this._rotateUp(La*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(La*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-La*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(La*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-La*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(this._pointers.length===1)this._rotateStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._rotateStart.set(i,r)}}_handleTouchStartPan(t){if(this._pointers.length===1)this._panStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._panStart.set(i,r)}}_handleTouchStartDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,r=t.pageY-e.y,s=Math.sqrt(i*i+r*r);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(this._pointers.length==1)this._rotateEnd.set(t.pageX,t.pageY);else{let i=this._getSecondPointerPosition(t),r=.5*(t.pageX+i.x),s=.5*(t.pageY+i.y);this._rotateEnd.set(r,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(La*this._rotateDelta.x/e.clientHeight),this._rotateUp(La*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(this._pointers.length===1)this._panEnd.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._panEnd.set(i,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,r=t.pageY-e.y,s=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let o=(t.pageX+e.x)*.5,a=(t.pageY+e.y)*.5;this._updateZoomParameters(o,a)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];e===void 0&&(e=new Yn,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){let e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){let e=t.deltaMode,i={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return t.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}};function Oue(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function Fue(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function Bue(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(m8),this.state=_r.NONE;break;case 1:let t=this._pointers[0],e=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:e.x,pageY:e.y});break}}function Vue(n){let t;switch(n.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Ul.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=_r.DOLLY;break;case Ul.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=_r.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=_r.ROTATE}break;case Ul.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=_r.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=_r.PAN}break;default:this.state=_r.NONE}this.state!==_r.NONE&&this.dispatchEvent(qk)}function Uue(n){switch(this.state){case _r.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case _r.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case _r.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function zue(n){this.enabled===!1||this.enableZoom===!1||this.state!==_r.NONE||(n.preventDefault(),this.dispatchEvent(qk),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(m8))}function Hue(n){this.enabled!==!1&&this._handleKeyDown(n)}function jue(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Nc.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=_r.TOUCH_ROTATE;break;case Nc.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=_r.TOUCH_PAN;break;default:this.state=_r.NONE}break;case 2:switch(this.touches.TWO){case Nc.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=_r.TOUCH_DOLLY_PAN;break;case Nc.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=_r.TOUCH_DOLLY_ROTATE;break;default:this.state=_r.NONE}break;default:this.state=_r.NONE}this.state!==_r.NONE&&this.dispatchEvent(qk)}function Wue(n){switch(this._trackPointer(n),this.state){case _r.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case _r.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case _r.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case _r.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=_r.NONE}}function Gue(n){this.enabled!==!1&&n.preventDefault()}function $ue(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function que(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var Xk=(()=>{class n{camera;controls;init(e){let i=e.clientWidth,r=e.clientHeight;this.camera=new Ts(25,i/r,.1,1e3),this.controls=new B1(this.camera,e),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.zoomSpeed=0,this.controls.enableRotate=!1,this.controls.enablePan=!0,this.controls.screenSpacePanning=!0,this.controls.panSpeed=10,this.controls.minDistance=10,this.controls.maxDistance=100,this.resetView(),this.controls.mouseButtons={LEFT:Ul.PAN,MIDDLE:Ul.DOLLY,RIGHT:Ul.ROTATE},this.controls.touches={ONE:Nc.PAN,TWO:Nc.DOLLY_PAN},this.controls.addEventListener("change",()=>{let s=this.camera.position.x,o=this.controls.target.x;this.camera.position.set(s,15,25),this.controls.target.set(o,0,0)}),e.addEventListener("wheel",this.handleScroll)}zoomIn(){this.camera.zoom=Math.min(this.camera.zoom+.1,10),this.camera.updateProjectionMatrix()}zoomOut(){this.camera.zoom=Math.max(this.camera.zoom-.1,1),this.camera.updateProjectionMatrix()}resetView(){this.controls&&(this.controls.reset(),this.camera.position.set(-30,20,30),this.camera.lookAt(0,0,0))}zoomTo(e,i=500){if(!this.camera||!this.controls)return;let r=this.camera.position.clone(),s=e.clone().add(new Ne(-30,20,30)),o=this.controls.target.clone(),a=null,u=h=>{a||(a=h);let p=Math.min((h-a)/i,1);this.camera.position.lerpVectors(r,s,p),this.controls.target.lerpVectors(o,e,p),this.controls.update(),p<1&&requestAnimationFrame(u)};requestAnimationFrame(u)}resize(e,i){let r=e.parentElement;if(!this.camera||!r)return;let s=r.clientWidth,o=r.clientHeight;this.camera.aspect=s/o,this.camera.updateProjectionMatrix(),i.setSize(s,o,!0)}updateControls(){this.controls&&(this.controls.target.y=0,this.controls.target.z=0,this.camera.position.y=15,this.camera.position.z=25,this.controls.update())}getCamera(){return this.camera}handleScroll=e=>{e.preventDefault(),Math.sign(e.deltaY)>0?this.zoomOut():this.zoomIn()};static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();var Yk=(()=>{class n{raycaster=new nb;pointer=new Yn;canvas;camera;sensors=[];bridgeSections=[];hoveredCallback=null;clickedCallback=null;init(e,i,r,s){this.canvas==null&&(e.addEventListener("mousemove",this.handleMouseMove),e.addEventListener("click",this.handleClick)),this.canvas=e,this.camera=i,this.sensors=r,this.bridgeSections=s}onObjectClick(e){this.clickedCallback=e}onObjectHover(e){this.hoveredCallback=e}handleMouseMove=e=>{let{object:i,position:r}=this.getIntersectedObject(e);i?(this.canvas.style.cursor="pointer",this.hoveredCallback?.(i,r)):(this.canvas.style.cursor="move",this.hoveredCallback?.(null))};handleClick=e=>{let{object:i}=this.getIntersectedObject(e);i&&this.clickedCallback?.(i)};getIntersectedObject(e){let i=this.canvas.getBoundingClientRect();this.pointer.x=(e.clientX-i.left)/i.width*2-1,this.pointer.y=-((e.clientY-i.top)/i.height)*2+1,this.raycaster.setFromCamera(this.pointer,this.camera);let r=[...this.sensors.map(S=>S.innerMesh),...this.bridgeSections.map(S=>S.innerMesh)].filter(S=>!!S),s=this.raycaster.intersectObjects(r);if(s.length===0)return{object:null};let o=s[0].object,a=this.sensors.find(S=>S.innerMesh===o),u=this.bridgeSections.find(S=>S.innerMesh===o),h=a||u;if(!h)return{object:null};if(!h.innerMesh)return{object:null};let p=h.innerMesh.position.clone().project(this.camera),v=(p.x+1)/2*this.canvas.clientWidth,x=(-p.y+1)/2*this.canvas.clientHeight-20;return{object:h,position:{left:`${v}px`,top:`${x}px`}}}animateSensors(e){this.sensors.forEach(i=>{if(i.pingMesh){let r=e*.001%1,s=1+r,o=1-r;i.pingMesh.scale.set(s,s,s);let a=i.pingMesh.material;a.opacity=o}})}animateSections(e){this.bridgeSections.forEach(i=>{if(i.pingMesh){let r=e*.001%1,s=1+r/10,o=1-r;i.pingMesh.scale.set(s,s,s);let a=i.pingMesh.material;a.opacity=o}})}clearObjectReferences(){this.sensors.forEach(e=>{e.innerMesh=void 0,e.pingMesh=void 0}),this.bridgeSections.forEach(e=>{e.innerMesh=void 0,e.pingMesh=void 0})}clearEventListeners(){this.canvas&&(this.canvas.removeEventListener("mousemove",this.handleMouseMove),this.canvas.removeEventListener("click",this.handleClick))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();function Zk(n){return{healthy:"#76996E",warn:"#F4AC32",critical:"#C42021"}[n]}function Kk(n,t,e){let i=new q_(.3,32,32),r=new Pu({color:new Nn(t),emissive:new Nn(t),emissiveIntensity:e?.3:1,transparent:!e,opacity:1,depthWrite:e}),s=new Ds(i,r);return s.position.copy(n),s}function Qk(n,t,e,i){let r=new Zh(n.x,n.y,n.z),s=new Pu({color:new Nn(e),emissive:new Nn(e),emissiveIntensity:i?.3:1,transparent:!i,opacity:1,depthWrite:i}),o=new Ds(r,s);return o.position.copy(t),o}function Jk(n,t){if(t===xk)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(t===Uy||t===ub){let e=n.getIndex();if(e===null){let o=[],a=n.getAttribute("position");if(a!==void 0){for(let u=0;u<a.count;u++)o.push(u);n.setIndex(o),e=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=e.count-2,r=[];if(t===Uy)for(let o=1;o<=i;o++)r.push(e.getX(0)),r.push(e.getX(o)),r.push(e.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(e.getX(o)),r.push(e.getX(o+1)),r.push(e.getX(o+2))):(r.push(e.getX(o+2)),r.push(e.getX(o+1)),r.push(e.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),n}var V1=class extends Xp{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new o2(e)}),this.register(function(e){return new a2(e)}),this.register(function(e){return new g2(e)}),this.register(function(e){return new y2(e)}),this.register(function(e){return new v2(e)}),this.register(function(e){return new c2(e)}),this.register(function(e){return new u2(e)}),this.register(function(e){return new d2(e)}),this.register(function(e){return new h2(e)}),this.register(function(e){return new s2(e)}),this.register(function(e){return new f2(e)}),this.register(function(e){return new l2(e)}),this.register(function(e){return new m2(e)}),this.register(function(e){return new p2(e)}),this.register(function(e){return new i2(e)}),this.register(function(e){return new _2(e)}),this.register(function(e){return new b2(e)})}load(t,e,i,r){let s=this,o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){let h=Pd.extractUrlBase(t);o=Pd.resolveURL(h,this.path)}else o=Pd.extractUrlBase(t);this.manager.itemStart(t);let a=function(h){r?r(h):console.error(h),s.manager.itemError(t),s.manager.itemEnd(t)},u=new ky(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(h){try{s.parse(h,o,function(p){e(p),s.manager.itemEnd(t)},a)}catch(p){a(p)}},i,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,r){let s,o={},a={},u=new TextDecoder;if(typeof t=="string")s=JSON.parse(t);else if(t instanceof ArrayBuffer)if(u.decode(new Uint8Array(t,0,4))===b8){try{o[Vi.KHR_BINARY_GLTF]=new x2(t)}catch(v){r&&r(v);return}s=JSON.parse(o[Vi.KHR_BINARY_GLTF].content)}else s=JSON.parse(u.decode(t));else s=t;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let h=new A2(s,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){let v=this.pluginCallbacks[p](h);v.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[v.name]=v,o[v.name]=!0}if(s.extensionsUsed)for(let p=0;p<s.extensionsUsed.length;++p){let v=s.extensionsUsed[p],x=s.extensionsRequired||[];switch(v){case Vi.KHR_MATERIALS_UNLIT:o[v]=new r2;break;case Vi.KHR_DRACO_MESH_COMPRESSION:o[v]=new w2(s,this.dracoLoader);break;case Vi.KHR_TEXTURE_TRANSFORM:o[v]=new C2;break;case Vi.KHR_MESH_QUANTIZATION:o[v]=new S2;break;default:x.indexOf(v)>=0&&a[v]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+v+'".')}}h.setExtensions(o),h.setPlugins(a),h.parse(i,r)}parseAsync(t,e){let i=this;return new Promise(function(r,s){i.parse(t,e,r,s)})}};function Yue(){let n={};return{get:function(t){return n[t]},add:function(t,e){n[t]=e},remove:function(t){delete n[t]},removeAll:function(){n={}}}}var Vi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},i2=class{constructor(t){this.parser=t,this.name=Vi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let t=this.parser,e=this.parser.json.nodes||[];for(let i=0,r=e.length;i<r;i++){let s=e[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(t){let e=this.parser,i="light:"+t,r=e.cache.get(i);if(r)return r;let s=e.json,u=((s.extensions&&s.extensions[this.name]||{}).lights||[])[t],h,p=new Nn(16777215);u.color!==void 0&&p.setRGB(u.color[0],u.color[1],u.color[2],po);let v=u.range!==void 0?u.range:0;switch(u.type){case"directional":h=new jp(p),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new J_(p),h.distance=v;break;case"spot":h=new Q_(p),h.distance=v,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,h.angle=u.spot.outerConeAngle,h.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return h.position.set(0,0,0),Nd(h,u),u.intensity!==void 0&&(h.intensity=u.intensity),h.name=e.createUniqueName(u.name||"light_"+t),r=Promise.resolve(h),e.cache.add(i,r),r}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){let e=this,i=this.parser,s=i.json.nodes[t],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(u){return i._getNodeRef(e.cache,a,u)})}},r2=class{constructor(){this.name=Vi.KHR_MATERIALS_UNLIT}getMaterialType(){return kc}extendParams(t,e,i){let r=[];t.color=new Nn(1,1,1),t.opacity=1;let s=e.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){let o=s.baseColorFactor;t.color.setRGB(o[0],o[1],o[2],po),t.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(t,"map",s.baseColorTexture,js))}return Promise.all(r)}},s2=class{constructor(t){this.parser=t,this.name=Vi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(e.emissiveIntensity=s),Promise.resolve()}},o2=class{constructor(t){this.parser=t,this.name=Vi.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ra}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(e.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){let a=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new Yn(a,a)}return Promise.all(s)}},a2=class{constructor(t){this.parser=t,this.name=Vi.KHR_MATERIALS_DISPERSION}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ra}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=r.extensions[this.name];return e.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}},l2=class{constructor(t){this.parser=t,this.name=Vi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ra}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(e.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(e,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(e.iridescenceIOR=o.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(e,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}},c2=class{constructor(t){this.parser=t,this.name=Vi.KHR_MATERIALS_SHEEN}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ra}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[];e.sheenColor=new Nn(0,0,0),e.sheenRoughness=0,e.sheen=1;let o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){let a=o.sheenColorFactor;e.sheenColor.setRGB(a[0],a[1],a[2],po)}return o.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(e,"sheenColorMap",o.sheenColorTexture,js)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}},u2=class{constructor(t){this.parser=t,this.name=Vi.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ra}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(e.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(s)}},d2=class{constructor(t){this.parser=t,this.name=Vi.KHR_MATERIALS_VOLUME}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ra}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];e.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||1/0;let a=o.attenuationColor||[1,1,1];return e.attenuationColor=new Nn().setRGB(a[0],a[1],a[2],po),Promise.all(s)}},h2=class{constructor(t){this.parser=t,this.name=Vi.KHR_MATERIALS_IOR}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ra}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=r.extensions[this.name];return e.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}},f2=class{constructor(t){this.parser=t,this.name=Vi.KHR_MATERIALS_SPECULAR}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ra}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];e.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(e,"specularIntensityMap",o.specularTexture));let a=o.specularColorFactor||[1,1,1];return e.specularColor=new Nn().setRGB(a[0],a[1],a[2],po),o.specularColorTexture!==void 0&&s.push(i.assignTexture(e,"specularColorMap",o.specularColorTexture,js)),Promise.all(s)}},p2=class{constructor(t){this.parser=t,this.name=Vi.EXT_MATERIALS_BUMP}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ra}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return e.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(e,"bumpMap",o.bumpTexture)),Promise.all(s)}},m2=class{constructor(t){this.parser=t,this.name=Vi.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ra}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(e.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(e.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(e,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}},g2=class{constructor(t){this.parser=t,this.name=Vi.KHR_TEXTURE_BASISU}loadTexture(t){let e=this.parser,i=e.json,r=i.textures[t];if(!r.extensions||!r.extensions[this.name])return null;let s=r.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,s.source,o)}},y2=class{constructor(t){this.parser=t,this.name=Vi.EXT_TEXTURE_WEBP}loadTexture(t){let e=this.name,i=this.parser,r=i.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;let o=s.extensions[e],a=r.images[o.source],u=i.textureLoader;if(a.uri){let h=i.options.manager.getHandler(a.uri);h!==null&&(u=h)}return i.loadTextureImage(t,o.source,u)}},v2=class{constructor(t){this.parser=t,this.name=Vi.EXT_TEXTURE_AVIF}loadTexture(t){let e=this.name,i=this.parser,r=i.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;let o=s.extensions[e],a=r.images[o.source],u=i.textureLoader;if(a.uri){let h=i.options.manager.getHandler(a.uri);h!==null&&(u=h)}return i.loadTextureImage(t,o.source,u)}},_2=class{constructor(t){this.name=Vi.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){let e=this.parser.json,i=e.bufferViews[t];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){let u=r.byteOffset||0,h=r.byteLength||0,p=r.count,v=r.byteStride,x=new Uint8Array(a,u,h);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(p,v,x,r.mode,r.filter).then(function(S){return S.buffer}):o.ready.then(function(){let S=new ArrayBuffer(p*v);return o.decodeGltfBuffer(new Uint8Array(S),p,v,x,r.mode,r.filter),S})})}else return null}},b2=class{constructor(t){this.name=Vi.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){let e=this.parser.json,i=e.nodes[t];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=e.meshes[i.mesh];for(let h of r.primitives)if(h.mode!==jl.TRIANGLES&&h.mode!==jl.TRIANGLE_STRIP&&h.mode!==jl.TRIANGLE_FAN&&h.mode!==void 0)return null;let o=i.extensions[this.name].attributes,a=[],u={};for(let h in o)a.push(this.parser.getDependency("accessor",o[h]).then(p=>(u[h]=p,u[h])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(h=>{let p=h.pop(),v=p.isGroup?p.children:[p],x=h[0].count,S=[];for(let D of v){let O=new hi,N=new Ne,T=new ra,j=new Ne(1,1,1),Z=new z_(D.geometry,D.material,x);for(let G=0;G<x;G++)u.TRANSLATION&&N.fromBufferAttribute(u.TRANSLATION,G),u.ROTATION&&T.fromBufferAttribute(u.ROTATION,G),u.SCALE&&j.fromBufferAttribute(u.SCALE,G),Z.setMatrixAt(G,O.compose(N,T,j));for(let G in u)if(G==="_COLOR_0"){let le=u[G];Z.instanceColor=new Kh(le.array,le.itemSize,le.normalized)}else G!=="TRANSLATION"&&G!=="ROTATION"&&G!=="SCALE"&&D.geometry.setAttribute(G,u[G]);io.prototype.copy.call(Z,D),this.parser.assignFinalMaterial(Z),S.push(Z)}return p.isGroup?(p.clear(),p.add(...S),p):S[0]}))}},b8="glTF",pb=12,g8={JSON:1313821514,BIN:5130562},x2=class{constructor(t){this.name=Vi.KHR_BINARY_GLTF,this.content=null,this.body=null;let e=new DataView(t,0,pb),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==b8)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-pb,s=new DataView(t,pb),o=0;for(;o<r;){let a=s.getUint32(o,!0);o+=4;let u=s.getUint32(o,!0);if(o+=4,u===g8.JSON){let h=new Uint8Array(t,pb+o,a);this.content=i.decode(h)}else if(u===g8.BIN){let h=pb+o;this.body=t.slice(h,h+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},w2=class{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Vi.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){let i=this.json,r=this.dracoLoader,s=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},u={},h={};for(let p in o){let v=E2[p]||p.toLowerCase();a[v]=o[p]}for(let p in t.attributes){let v=E2[p]||p.toLowerCase();if(o[p]!==void 0){let x=i.accessors[t.attributes[p]],S=Gy[x.componentType];h[v]=S.name,u[v]=x.normalized===!0}}return e.getDependency("bufferView",s).then(function(p){return new Promise(function(v,x){r.decodeDracoFile(p,function(S){for(let D in S.attributes){let O=S.attributes[D],N=u[D];N!==void 0&&(O.normalized=N)}v(S)},a,h,po,x)})})}},C2=class{constructor(){this.name=Vi.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}},S2=class{constructor(){this.name=Vi.KHR_MESH_QUANTIZATION}},U1=class extends Ad{constructor(t,e,i,r){super(t,e,i,r)}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=t*r*3+r;for(let o=0;o!==r;o++)e[o]=i[s+o];return e}interpolate_(t,e,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=a*2,h=a*3,p=r-e,v=(i-e)/p,x=v*v,S=x*v,D=t*h,O=D-h,N=-2*S+3*x,T=S-x,j=1-N,Z=T-x+v;for(let G=0;G!==a;G++){let le=o[O+G+a],K=o[O+G+u]*p,oe=o[D+G+a],ue=o[D+G]*p;s[G]=j*le+Z*K+N*oe+T*ue}return s}},Zue=new ra,M2=class extends U1{interpolate_(t,e,i,r){let s=super.interpolate_(t,e,i,r);return Zue.fromArray(s).normalize().toArray(s),s}},jl={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Gy={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},y8={9728:fo,9729:ia,9984:KM,9985:Ny,9986:$p,9987:Oc},v8={33071:Eu,33648:by,10497:Xh},e2={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},E2={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Jh={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Kue={CUBICSPLINE:void 0,LINEAR:Fp,STEP:Op},t2={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Que(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Pu({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Rc})),n.DefaultMaterial}function Jp(n,t,e){for(let i in e.extensions)n[i]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=e.extensions[i])}function Nd(n,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(n.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Jue(n,t,e){let i=!1,r=!1,s=!1;for(let h=0,p=t.length;h<p;h++){let v=t[h];if(v.POSITION!==void 0&&(i=!0),v.NORMAL!==void 0&&(r=!0),v.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);let o=[],a=[],u=[];for(let h=0,p=t.length;h<p;h++){let v=t[h];if(i){let x=v.POSITION!==void 0?e.getDependency("accessor",v.POSITION):n.attributes.position;o.push(x)}if(r){let x=v.NORMAL!==void 0?e.getDependency("accessor",v.NORMAL):n.attributes.normal;a.push(x)}if(s){let x=v.COLOR_0!==void 0?e.getDependency("accessor",v.COLOR_0):n.attributes.color;u.push(x)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(u)]).then(function(h){let p=h[0],v=h[1],x=h[2];return i&&(n.morphAttributes.position=p),r&&(n.morphAttributes.normal=v),s&&(n.morphAttributes.color=x),n.morphTargetsRelative=!0,n})}function ede(n,t){if(n.updateMorphTargets(),t.weights!==void 0)for(let e=0,i=t.weights.length;e<i;e++)n.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){let e=t.extras.targetNames;if(n.morphTargetInfluences.length===e.length){n.morphTargetDictionary={};for(let i=0,r=e.length;i<r;i++)n.morphTargetDictionary[e[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function tde(n){let t,e=n.extensions&&n.extensions[Vi.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+n2(e.attributes):t=n.indices+":"+n2(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)t+=":"+n2(n.targets[i]);return t}function n2(n){let t="",e=Object.keys(n).sort();for(let i=0,r=e.length;i<r;i++)t+=e[i]+":"+n[e[i]]+";";return t}function T2(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function nde(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}var ide=new hi,A2=class{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new Yue,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,s=!1,o=-1;if(typeof navigator<"u"){let a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;let u=a.match(/Version\/(\d+)/);r=i&&u?parseInt(u[1],10):-1,s=a.indexOf("Firefox")>-1,o=s?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||s&&o<98?this.textureLoader=new Z_(this.options.manager):this.textureLoader=new tb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ky(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){let i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){let a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Jp(s,a,r),Nd(a,r),Promise.all(i._invokeAll(function(u){return u.afterRoot&&u.afterRoot(a)})).then(function(){for(let u of a.scenes)u.updateMatrixWorld();t(a)})}).catch(e)}_markDefs(){let t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=e.length;r<s;r++){let o=e[r].joints;for(let a=0,u=o.length;a<u;a++)t[o[a]].isBone=!0}for(let r=0,s=t.length;r<s;r++){let o=t[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;let r=i.clone(),s=(o,a)=>{let u=this.associations.get(o);u!=null&&this.associations.set(a,u);for(let[h,p]of o.children.entries())s(p,a.children[h])};return s(i,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){let e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){let r=t(e[i]);if(r)return r}return null}_invokeAll(t){let e=Object.values(this.plugins);e.unshift(this);let i=[];for(let r=0;r<e.length;r++){let s=t(e[r]);s&&i.push(s)}return i}getDependency(t,e){let i=t+":"+e,r=this.cache.get(i);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(e)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(e)});break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(t,e)}),!r)throw new Error("Unknown type: "+t);break}this.cache.add(i,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){let i=this,r=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(r.map(function(s,o){return i.getDependency(t,o)})),this.cache.add(t,e)}return e}loadBuffer(t){let e=this.json.buffers[t],i=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[Vi.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(s,o){i.load(Pd.resolveURL(e.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){let e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(i){let r=e.byteLength||0,s=e.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(t){let e=this,i=this.json,r=this.json.accessors[t];if(r.bufferView===void 0&&r.sparse===void 0){let o=e2[r.type],a=Gy[r.componentType],u=r.normalized===!0,h=new a(r.count*o);return Promise.resolve(new As(h,o,u))}let s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){let a=o[0],u=e2[r.type],h=Gy[r.componentType],p=h.BYTES_PER_ELEMENT,v=p*u,x=r.byteOffset||0,S=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,D=r.normalized===!0,O,N;if(S&&S!==v){let T=Math.floor(x/S),j="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+T+":"+r.count,Z=e.cache.get(j);Z||(O=new h(a,T*S,r.count*S/p),Z=new Ty(O,S/p),e.cache.add(j,Z)),N=new Ay(Z,u,x%S/p,D)}else a===null?O=new h(r.count*u):O=new h(a,x,r.count*u),N=new As(O,u,D);if(r.sparse!==void 0){let T=e2.SCALAR,j=Gy[r.sparse.indices.componentType],Z=r.sparse.indices.byteOffset||0,G=r.sparse.values.byteOffset||0,le=new j(o[1],Z,r.sparse.count*T),K=new h(o[2],G,r.sparse.count*u);a!==null&&(N=new As(N.array.slice(),N.itemSize,N.normalized)),N.normalized=!1;for(let oe=0,ue=le.length;oe<ue;oe++){let te=le[oe];if(N.setX(te,K[oe*u]),u>=2&&N.setY(te,K[oe*u+1]),u>=3&&N.setZ(te,K[oe*u+2]),u>=4&&N.setW(te,K[oe*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}N.normalized=D}return N})}loadTexture(t){let e=this.json,i=this.options,s=e.textures[t].source,o=e.images[s],a=this.textureLoader;if(o.uri){let u=i.manager.getHandler(o.uri);u!==null&&(a=u)}return this.loadTextureImage(t,s,a)}loadTextureImage(t,e,i){let r=this,s=this.json,o=s.textures[t],a=s.images[e],u=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[u])return this.textureCache[u];let h=this.loadImageSource(e,i).then(function(p){p.flipY=!1,p.name=o.name||a.name||"",p.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(p.name=a.uri);let x=(s.samplers||{})[o.sampler]||{};return p.magFilter=y8[x.magFilter]||ia,p.minFilter=y8[x.minFilter]||Oc,p.wrapS=v8[x.wrapS]||Xh,p.wrapT=v8[x.wrapT]||Xh,p.generateMipmaps=!p.isCompressedTexture&&p.minFilter!==fo&&p.minFilter!==ia,r.associations.set(p,{textures:t}),p}).catch(function(){return null});return this.textureCache[u]=h,h}loadImageSource(t,e){let i=this,r=this.json,s=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(v=>v.clone());let o=r.images[t],a=self.URL||self.webkitURL,u=o.uri||"",h=!1;if(o.bufferView!==void 0)u=i.getDependency("bufferView",o.bufferView).then(function(v){h=!0;let x=new Blob([v],{type:o.mimeType});return u=a.createObjectURL(x),u});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");let p=Promise.resolve(u).then(function(v){return new Promise(function(x,S){let D=x;e.isImageBitmapLoader===!0&&(D=function(O){let N=new ll(O);N.needsUpdate=!0,x(N)}),e.load(Pd.resolveURL(v,s.path),D,void 0,S)})}).then(function(v){return h===!0&&a.revokeObjectURL(u),Nd(v,o),v.userData.mimeType=o.mimeType||nde(o.uri),v}).catch(function(v){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),v});return this.sourceCache[t]=p,p}assignTexture(t,e,i,r){let s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Vi.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[Vi.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let u=s.associations.get(o);o=s.extensions[Vi.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,u)}}return r!==void 0&&(o.colorSpace=r),t[e]=o,o})}assignFinalMaterial(t){let e=t.geometry,i=t.material,r=e.attributes.tangent===void 0,s=e.attributes.color!==void 0,o=e.attributes.normal===void 0;if(t.isPoints){let a="PointsMaterial:"+i.uuid,u=this.cache.get(a);u||(u=new Ry,Ia.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.sizeAttenuation=!1,this.cache.add(a,u)),i=u}else if(t.isLine){let a="LineBasicMaterial:"+i.uuid,u=this.cache.get(a);u||(u=new Py,Ia.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,this.cache.add(a,u)),i=u}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let u=this.cache.get(a);u||(u=i.clone(),s&&(u.vertexColors=!0),o&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(a,u),this.associations.set(u,this.associations.get(i))),i=u}t.material=i}getMaterialType(){return Pu}loadMaterial(t){let e=this,i=this.json,r=this.extensions,s=i.materials[t],o,a={},u=s.extensions||{},h=[];if(u[Vi.KHR_MATERIALS_UNLIT]){let v=r[Vi.KHR_MATERIALS_UNLIT];o=v.getMaterialType(),h.push(v.extendParams(a,s,e))}else{let v=s.pbrMetallicRoughness||{};if(a.color=new Nn(1,1,1),a.opacity=1,Array.isArray(v.baseColorFactor)){let x=v.baseColorFactor;a.color.setRGB(x[0],x[1],x[2],po),a.opacity=x[3]}v.baseColorTexture!==void 0&&h.push(e.assignTexture(a,"map",v.baseColorTexture,js)),a.metalness=v.metallicFactor!==void 0?v.metallicFactor:1,a.roughness=v.roughnessFactor!==void 0?v.roughnessFactor:1,v.metallicRoughnessTexture!==void 0&&(h.push(e.assignTexture(a,"metalnessMap",v.metallicRoughnessTexture)),h.push(e.assignTexture(a,"roughnessMap",v.metallicRoughnessTexture))),o=this._invokeOne(function(x){return x.getMaterialType&&x.getMaterialType(t)}),h.push(Promise.all(this._invokeAll(function(x){return x.extendMaterialParams&&x.extendMaterialParams(t,a)})))}s.doubleSided===!0&&(a.side=zl);let p=s.alphaMode||t2.OPAQUE;if(p===t2.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,p===t2.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==kc&&(h.push(e.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Yn(1,1),s.normalTexture.scale!==void 0)){let v=s.normalTexture.scale;a.normalScale.set(v,v)}if(s.occlusionTexture!==void 0&&o!==kc&&(h.push(e.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==kc){let v=s.emissiveFactor;a.emissive=new Nn().setRGB(v[0],v[1],v[2],po)}return s.emissiveTexture!==void 0&&o!==kc&&h.push(e.assignTexture(a,"emissiveMap",s.emissiveTexture,js)),Promise.all(h).then(function(){let v=new o(a);return s.name&&(v.name=s.name),Nd(v,s),e.associations.set(v,{materials:t}),s.extensions&&Jp(r,v,s),v})}createUniqueName(t){let e=Hr.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){let e=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Vi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(u){return _8(u,a,e)})}let o=[];for(let a=0,u=t.length;a<u;a++){let h=t[a],p=tde(h),v=r[p];if(v)o.push(v.promise);else{let x;h.extensions&&h.extensions[Vi.KHR_DRACO_MESH_COMPRESSION]?x=s(h):x=_8(new Pa,h,e),r[p]={primitive:h,promise:x},o.push(x)}}return Promise.all(o)}loadMesh(t){let e=this,i=this.json,r=this.extensions,s=i.meshes[t],o=s.primitives,a=[];for(let u=0,h=o.length;u<h;u++){let p=o[u].material===void 0?Que(this.cache):this.getDependency("material",o[u].material);a.push(p)}return a.push(e.loadGeometries(o)),Promise.all(a).then(function(u){let h=u.slice(0,u.length-1),p=u[u.length-1],v=[];for(let S=0,D=p.length;S<D;S++){let O=p[S],N=o[S],T,j=h[S];if(N.mode===jl.TRIANGLES||N.mode===jl.TRIANGLE_STRIP||N.mode===jl.TRIANGLE_FAN||N.mode===void 0)T=s.isSkinnedMesh===!0?new B_(O,j):new Ds(O,j),T.isSkinnedMesh===!0&&T.normalizeSkinWeights(),N.mode===jl.TRIANGLE_STRIP?T.geometry=Jk(T.geometry,ub):N.mode===jl.TRIANGLE_FAN&&(T.geometry=Jk(T.geometry,Uy));else if(N.mode===jl.LINES)T=new H_(O,j);else if(N.mode===jl.LINE_STRIP)T=new Up(O,j);else if(N.mode===jl.LINE_LOOP)T=new j_(O,j);else if(N.mode===jl.POINTS)T=new W_(O,j);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+N.mode);Object.keys(T.geometry.morphAttributes).length>0&&ede(T,s),T.name=e.createUniqueName(s.name||"mesh_"+t),Nd(T,s),N.extensions&&Jp(r,T,N),e.assignFinalMaterial(T),v.push(T)}for(let S=0,D=v.length;S<D;S++)e.associations.set(v[S],{meshes:t,primitives:S});if(v.length===1)return s.extensions&&Jp(r,v[0],s),v[0];let x=new Ic;s.extensions&&Jp(r,x,s),e.associations.set(x,{meshes:t});for(let S=0,D=v.length;S<D;S++)x.add(v[S]);return x})}loadCamera(t){let e,i=this.json.cameras[t],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?e=new Ts(db.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(e=new Hp(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(e.name=this.createUniqueName(i.name)),Nd(e,i),Promise.resolve(e)}loadSkin(t){let e=this.json.skins[t],i=[];for(let r=0,s=e.joints.length;r<s;r++)i.push(this._loadNodeShallow(e.joints[r]));return e.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",e.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let s=r.pop(),o=r,a=[],u=[];for(let h=0,p=o.length;h<p;h++){let v=o[h];if(v){a.push(v);let x=new hi;s!==null&&x.fromArray(s.array,h*16),u.push(x)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[h])}return new U_(a,u)})}loadAnimation(t){let e=this.json,i=this,r=e.animations[t],s=r.name?r.name:"animation_"+t,o=[],a=[],u=[],h=[],p=[];for(let v=0,x=r.channels.length;v<x;v++){let S=r.channels[v],D=r.samplers[S.sampler],O=S.target,N=O.node,T=r.parameters!==void 0?r.parameters[D.input]:D.input,j=r.parameters!==void 0?r.parameters[D.output]:D.output;O.node!==void 0&&(o.push(this.getDependency("node",N)),a.push(this.getDependency("accessor",T)),u.push(this.getDependency("accessor",j)),h.push(D),p.push(O))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(u),Promise.all(h),Promise.all(p)]).then(function(v){let x=v[0],S=v[1],D=v[2],O=v[3],N=v[4],T=[];for(let j=0,Z=x.length;j<Z;j++){let G=x[j],le=S[j],K=D[j],oe=O[j],ue=N[j];if(G===void 0)continue;G.updateMatrix&&G.updateMatrix();let te=i._createAnimationTracks(G,le,K,oe,ue);if(te)for(let V=0;V<te.length;V++)T.push(te[V])}return new Y_(s,void 0,T)})}createNodeMesh(t){let e=this.json,i=this,r=e.nodes[t];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){let o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let u=0,h=r.weights.length;u<h;u++)a.morphTargetInfluences[u]=r.weights[u]}),o})}loadNode(t){let e=this.json,i=this,r=e.nodes[t],s=i._loadNodeShallow(t),o=[],a=r.children||[];for(let h=0,p=a.length;h<p;h++)o.push(i.getDependency("node",a[h]));let u=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),u]).then(function(h){let p=h[0],v=h[1],x=h[2];x!==null&&p.traverse(function(S){S.isSkinnedMesh&&S.bind(x,ide)});for(let S=0,D=v.length;S<D;S++)p.add(v[S]);return p})}_loadNodeShallow(t){let e=this.json,i=this.extensions,r=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];let s=e.nodes[t],o=s.name?r.createUniqueName(s.name):"",a=[],u=r._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(t)});return u&&a.push(u),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(h){return r._getNodeRef(r.cameraCache,s.camera,h)})),r._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(t)}).forEach(function(h){a.push(h)}),this.nodeCache[t]=Promise.all(a).then(function(h){let p;if(s.isBone===!0?p=new Dy:h.length>1?p=new Ic:h.length===1?p=h[0]:p=new io,p!==h[0])for(let v=0,x=h.length;v<x;v++)p.add(h[v]);if(s.name&&(p.userData.name=s.name,p.name=o),Nd(p,s),s.extensions&&Jp(i,p,s),s.matrix!==void 0){let v=new hi;v.fromArray(s.matrix),p.applyMatrix4(v)}else s.translation!==void 0&&p.position.fromArray(s.translation),s.rotation!==void 0&&p.quaternion.fromArray(s.rotation),s.scale!==void 0&&p.scale.fromArray(s.scale);if(!r.associations.has(p))r.associations.set(p,{});else if(s.mesh!==void 0&&r.meshCache.refs[s.mesh]>1){let v=r.associations.get(p);r.associations.set(p,Ke({},v))}return r.associations.get(p).nodes=t,p}),this.nodeCache[t]}loadScene(t){let e=this.extensions,i=this.json.scenes[t],r=this,s=new Ic;i.name&&(s.name=r.createUniqueName(i.name)),Nd(s,i),i.extensions&&Jp(e,s,i);let o=i.nodes||[],a=[];for(let u=0,h=o.length;u<h;u++)a.push(r.getDependency("node",o[u]));return Promise.all(a).then(function(u){for(let p=0,v=u.length;p<v;p++)s.add(u[p]);let h=p=>{let v=new Map;for(let[x,S]of r.associations)(x instanceof Ia||x instanceof ll)&&v.set(x,S);return p.traverse(x=>{let S=r.associations.get(x);S!=null&&v.set(x,S)}),v};return r.associations=h(s),s})}_createAnimationTracks(t,e,i,r,s){let o=[],a=t.name?t.name:t.uuid,u=[];Jh[s.path]===Jh.weights?t.traverse(function(x){x.morphTargetInfluences&&u.push(x.name?x.name:x.uuid)}):u.push(a);let h;switch(Jh[s.path]){case Jh.weights:h=Ru;break;case Jh.rotation:h=ku;break;case Jh.translation:case Jh.scale:h=Lu;break;default:switch(i.itemSize){case 1:h=Ru;break;case 2:case 3:default:h=Lu;break}break}let p=r.interpolation!==void 0?Kue[r.interpolation]:Fp,v=this._getArrayFromAccessor(i);for(let x=0,S=u.length;x<S;x++){let D=new h(u[x]+"."+Jh[s.path],e.array,v,p);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(D),o.push(D)}return o}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){let i=T2(e.constructor),r=new Float32Array(e.length);for(let s=0,o=e.length;s<o;s++)r[s]=e[s]*i;e=r}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(i){let r=this instanceof ku?M2:U1;return new r(this.times,this.values,this.getValueSize()/3,i)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function rde(n,t,e){let i=t.attributes,r=new sa;if(i.POSITION!==void 0){let a=e.json.accessors[i.POSITION],u=a.min,h=a.max;if(u!==void 0&&h!==void 0){if(r.set(new Ne(u[0],u[1],u[2]),new Ne(h[0],h[1],h[2])),a.normalized){let p=T2(Gy[a.componentType]);r.min.multiplyScalar(p),r.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let s=t.targets;if(s!==void 0){let a=new Ne,u=new Ne;for(let h=0,p=s.length;h<p;h++){let v=s[h];if(v.POSITION!==void 0){let x=e.json.accessors[v.POSITION],S=x.min,D=x.max;if(S!==void 0&&D!==void 0){if(u.setX(Math.max(Math.abs(S[0]),Math.abs(D[0]))),u.setY(Math.max(Math.abs(S[1]),Math.abs(D[1]))),u.setZ(Math.max(Math.abs(S[2]),Math.abs(D[2]))),x.normalized){let O=T2(Gy[x.componentType]);u.multiplyScalar(O)}a.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let o=new Da;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function _8(n,t,e){let i=t.attributes,r=[];function s(o,a){return e.getDependency("accessor",o).then(function(u){n.setAttribute(a,u)})}for(let o in i){let a=E2[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(t.indices!==void 0&&!n.index){let o=e.getDependency("accessor",t.indices).then(function(a){n.setIndex(a)});r.push(o)}return Gi.workingColorSpace!==po&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Gi.workingColorSpace}" not supported.`),Nd(n,t),rde(n,t,e),Promise.all(r).then(function(){return t.targets!==void 0?Jue(n,t.targets,e):n})}var D2=(()=>{class n{SCENE_NAME="bridge-model";scene=new Ey;loader=new V1;init(e="#f4f4f4"){this.scene=new Ey,this.scene.background=new Nn(e),this.initLighting()}getScene(){return this.scene}initLighting(){let e=new jp(16777215,2);e.position.set(20,20,20),this.initShadowsForLight(e),this.scene.add(new eb(16777215,1.5)),this.scene.add(e)}initShadowsForLight(e){e.castShadow=!0,e.shadow.mapSize.width=4096,e.shadow.mapSize.height=4096,e.shadow.camera.near=1,e.shadow.camera.far=100,e.shadow.camera.left=-50,e.shadow.camera.right=50,e.shadow.camera.top=50,e.shadow.camera.bottom=-50,e.shadow.normalBias=.01,e.shadow.bias=-5e-4}loadModelToScene(e){this.disposeExistingBridgeModel(),this.loadNewBridgeModel(e)}loadNewBridgeModel(e){this.loader.load(e,i=>{let r=new sa().setFromObject(i.scene),s=new Ne;r.getCenter(s),i.scene.position.sub(s),i.scene.name=this.SCENE_NAME,this.updateModelAppearance(i),this.scene.add(i.scene)},void 0,i=>console.error("Model Load Error:",i))}disposeExistingBridgeModel(){let e=this.scene.getObjectByName(this.SCENE_NAME);e&&(e.traverse(i=>{let r=i;r.geometry?.dispose();let s=r.material;Array.isArray(s)?s.forEach(o=>o?.dispose()):s?.dispose()}),this.scene.remove(e))}destroy(){this.scene.traverse(e=>{if(e.geometry&&e.geometry.dispose(),e.material){let i=e.material;Array.isArray(i)?i.forEach(r=>r.dispose()):i.dispose()}e.dispose&&e.dispose()}),this.scene.clear()}updateModelAppearance(e){e.scene.traverse(i=>{if(i.isMesh){let r=i;r.castShadow=!0,r.receiveShadow=!0,this.setModelColor(r)}})}setModelColor(e){(Array.isArray(e.material)?e.material:[e.material]).forEach(r=>{"color"in r&&r.color.setHex(16777215)})}addSensors(e){e.forEach(i=>{let r=Zk(i.state),s=Kk(i.position,r,!0),o=Kk(i.position,r,!1);i.innerMesh=s,i.pingMesh=o,i.innerMesh.userData.type="sensor",i.pingMesh.userData.type="sensor",this.scene.add(s),this.scene.add(o)})}addSections(e){e.forEach(i=>{let r=Zk(i.state),s=Qk(i.size,i.position,r,!0),o=Qk(i.size,i.position,r,!1);s.userData.type="section",o.userData.type="section",i.innerMesh=s,i.pingMesh=o,this.scene.add(s),this.scene.add(o)})}clearSceneContent(){let e=["bridge-model"],i=["AmbientLight","DirectionalLight"],r=[];this.scene.children.forEach(s=>{let o=e.includes(s.name),a=i.includes(s.type);!o&&!a&&r.push(s)}),r.forEach(s=>{s.traverse(o=>{if(o.geometry&&o.geometry.dispose(),o.material){let a=o.material;Array.isArray(a)?a.forEach(u=>u.dispose()):a.dispose()}}),this.scene.remove(s)})}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();var x8=(()=>{class n{label=_t();style=_t({left:"0px",top:"0px"});static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-tooltip"]],inputs:{label:[1,"label"],style:[1,"style"]},decls:2,vars:2,consts:[[1,"absolute","transform","-translate-x-1/2","-translate-y-full","bg-primary","text-white","text-sm","px-2","py-1","rounded","shadow","pointer-events-none","whitespace-nowrap",3,"ngStyle"]],template:function(i,r){i&1&&(ge(0,"div",0),ot(1),ye()),i&2&&(Le("ngStyle",r.style()),xe(),Ei(" ",r.label()," "))},dependencies:[Nt,Ng],encapsulation:2})}return n})();var sde=["canvas"];function ode(n,t){if(n&1&&it(0,"lib-tooltip",4),n&2){let e=Ae();DV(e.tooltipStyle),Le("label",e.hoveredObject.label)}}var I2=(()=>{class n{canvasRef;modelUrl=_t("");backgroundColor=_t("#FFF");sensors=_t([]);sections=_t([]);viewMode=_t("sensor");elementClicked=ji();sceneService=Ue(D2);cameraService=Ue(Xk);interactionService=Ue(Yk);cdr=Ue(Ss);renderer;initialModelLoadThrough=!1;hoveredObject=null;tooltipStyle={left:"0px",top:"0px"};animationId;constructor(){Wi(()=>{this.modelUrl(),this.initialModelLoadThrough&&(this.cleanSectionsAndSensors(),this.loadBridge(),this.initSectionsAndSensors())}),Wi(()=>{this.sensors(),this.sections(),this.viewMode(),this.initialModelLoadThrough&&(this.cleanSectionsAndSensors(),this.initSectionsAndSensors())})}ngAfterViewInit(){this.initCanvas(),this.loadBridge(),this.initSectionsAndSensors(),this.initialModelLoadThrough=!0}ngAfterViewChecked(){this.cameraService.resize(this.canvasRef.nativeElement,this.renderer)}ngOnDestroy(){this.cleanSectionsAndSensors(),this.interactionService.clearEventListeners(),this.renderer.dispose(),this.renderer.domElement&&this.renderer.domElement.parentElement&&this.renderer.domElement.parentElement.removeChild(this.renderer.domElement),this.sceneService.destroy(),this.animationId&&cancelAnimationFrame(this.animationId)}cleanSectionsAndSensors(){this.sceneService.clearSceneContent(),this.interactionService.clearObjectReferences()}initSectionsAndSensors(){this.loadObjects(),this.initInteractionHooks()}loadBridge(){this.sceneService.loadModelToScene(this.modelUrl())}initCanvas(){let e=this.canvasRef.nativeElement;this.initRenderer(),this.sceneService.init(this.backgroundColor()),this.cameraService.init(e),this.animate(),this.initResizeHandler(),this.initCanvasEvents()}zoomIn(){this.cameraService.zoomIn()}zoomOut(){this.cameraService.zoomOut()}resetView(){this.cameraService.resetView()}initRenderer(){let e=this.canvasRef.nativeElement;this.renderer=new N1({canvas:e,antialias:!0}),this.renderer.setSize(e.clientWidth,e.clientHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,1)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=zM}initInteractionHooks(){let e=this.canvasRef.nativeElement;this.interactionService.init(e,this.cameraService.getCamera(),this.sensors(),this.sections()),this.interactionService.onObjectClick(i=>{this.elementClicked.emit(i),this.cameraService.zoomTo(i.position)}),this.interactionService.onObjectHover((i,r)=>{this.hoveredObject=i,i&&r&&(this.tooltipStyle=r),this.cdr.markForCheck()})}loadObjects(){this.viewMode()==="sensor"?this.sceneService.addSensors(this.sensors()):this.sceneService.addSections(this.sections())}initCanvasEvents(){let e=this.canvasRef.nativeElement;e.addEventListener("mousemove",this.interactionService.handleMouseMove),e.addEventListener("click",this.interactionService.handleClick)}initResizeHandler(){let e=this.canvasRef.nativeElement;window.addEventListener("resize",()=>this.cameraService.resize(e,this.renderer))}animate=()=>{this.animationId=requestAnimationFrame(this.animate);let e=performance.now();this.cameraService.updateControls(),this.renderer.render(this.sceneService.getScene(),this.cameraService.getCamera()),this.interactionService.animateSensors(e),this.interactionService.animateSections(e)};static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-model-canvas"]],viewQuery:function(i,r){if(i&1&&Bi(sde,7),i&2){let s;jn(s=Wn())&&(r.canvasRef=s.first)}},inputs:{modelUrl:[1,"modelUrl"],backgroundColor:[1,"backgroundColor"],sensors:[1,"sensors"],sections:[1,"sections"],viewMode:[1,"viewMode"]},outputs:{elementClicked:"elementClicked"},features:[Mo([D2,Xk,Yk])],decls:4,vars:1,consts:[["canvas",""],[1,"viewer-wrapper"],[1,"model-canvas"],[3,"label","style",4,"ngIf"],[3,"label"]],template:function(i,r){i&1&&(ge(0,"div",1),it(1,"canvas",2,0),It(3,ode,1,3,"lib-tooltip",3),ye()),i&2&&(xe(3),Le("ngIf",r.hoveredObject))},dependencies:[Nt,el,x8],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;position:relative}.viewer-wrapper[_ngcontent-%COMP%]{position:relative;height:100%}.model-canvas[_ngcontent-%COMP%]{display:block;width:100%;height:100%}"],changeDetection:0})}return n})();var w8=(()=>{class n{modelUrl=_t.required();sensors=_t([]);sections=_t([]);viewModeInput=_t("section");viewMode=mn("section");constructor(){Wi(()=>{this.viewMode.set(this.viewModeInput())})}elementClick=ji();modelCanvas;SensorIconComponent=lH;BridgeIconComponent=yS;zoomIn(){this.modelCanvas.zoomIn()}zoomOut(){this.modelCanvas.zoomOut()}resetView(){this.modelCanvas.resetView()}ResetIconComponent=uH;MinusIconComponent=cH;PlusIconComponent=vS;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-asset-3d-viewer"]],viewQuery:function(i,r){if(i&1&&Bi(I2,5),i&2){let s;jn(s=Wn())&&(r.modelCanvas=s.first)}},inputs:{modelUrl:[1,"modelUrl"],sensors:[1,"sensors"],sections:[1,"sections"],viewModeInput:[1,"viewModeInput"]},outputs:{elementClick:"elementClick"},decls:7,vars:15,consts:[[1,"w-full","h-full","relative"],[1,"absolute","z-1","mt-2","ml-4","md:ml-[min(10%,3rem)]",3,"rightClicked","leftClicked","iconLeftComponent","iconRightComponent","labelLeft","labelRight","activeButton"],[1,"absolute","top-2","right-2","z-1","flex","flex-col","gap-1"],[3,"clicked","iconComponent","position"],[3,"elementClicked","modelUrl","sensors","sections","viewMode"]],template:function(i,r){i&1&&(ge(0,"div",0)(1,"lib-button-group",1),yt("rightClicked",function(){return r.viewMode.set("sensor")})("leftClicked",function(){return r.viewMode.set("section")}),ye(),ge(2,"div",2)(3,"lib-button",3),yt("clicked",function(){return r.zoomIn()}),ye(),ge(4,"lib-button",3),yt("clicked",function(){return r.zoomOut()}),ye(),ge(5,"lib-button",3),yt("clicked",function(){return r.resetView()}),ye()(),ge(6,"lib-model-canvas",4),yt("elementClicked",function(o){return r.elementClick.emit(o)}),ye()()),i&2&&(xe(),Le("iconLeftComponent",r.BridgeIconComponent)("iconRightComponent",r.SensorIconComponent)("labelLeft","Sections")("labelRight","Sensors")("activeButton",r.viewMode()==="sensor"?"right":"left"),xe(2),Le("iconComponent",r.PlusIconComponent)("position","center"),xe(),Le("iconComponent",r.MinusIconComponent)("position","center"),xe(),Le("iconComponent",r.ResetIconComponent)("position","center"),xe(),Le("modelUrl",r.modelUrl())("sensors",r.sensors())("sections",r.sections())("viewMode",r.viewMode()))},dependencies:[Nt,I2,kz,Ll],encapsulation:2})}return n})();var ade=["burgerMenuContainer"],lde=(n,t)=>({"side-navbar-collapsed":n,"side-navbar-expanded":t});function cde(n,t){if(n&1){let e=An();ge(0,"nav",1)(1,"div",3)(2,"span",4),ot(3,"\u2206Vistruct"),ye(),ge(4,"button",5),yt("click",function(){mt(e);let r=Ae();return gt(r.toggleCollapse())}),So(),ge(5,"svg",6),it(6,"path",7),ye()(),gu(),ge(7,"div",8,0)(9,"ul",9)(10,"li")(11,"a",10),it(12,"lib-globe-icon",11),ge(13,"span"),ot(14,"Asset Map"),ye()()(),ge(15,"li")(16,"a",10),it(17,"lib-alarm-icon",11),ge(18,"span"),ot(19,"Notifications"),ye()()()()()()()}if(n&2){let e=Ae();xe(7),kr("height",e.isCollapsed()?"0":e.burgerMenuHeight()),xe(4),Le("routerLink","assets"),xe(),Le("color","primary")("hover","secondary"),xe(4),Le("routerLink","notifications"),xe(),Le("color","primary")("hover","secondary")}}function ude(n,t){n&1&&(ge(0,"span",21),ot(1,"\u2206Vistruct"),ye())}function dde(n,t){n&1&&(ge(0,"span",22),ot(1,"\u2206V"),ye())}function hde(n,t){n&1&&(ge(0,"span"),ot(1,"Asset Map"),ye())}function fde(n,t){n&1&&(ge(0,"span",20),ot(1,"Notifications"),ye())}function pde(n,t){if(n&1){let e=An();ge(0,"div",12),yt("mouseenter",function(){mt(e);let r=Ae();return gt(r.expand())})("mouseleave",function(){mt(e);let r=Ae();return gt(r.collapse())}),ge(1,"div",13),It(2,ude,2,0,"span",14)(3,dde,2,0,"span",15),ye(),ge(4,"ul",16)(5,"li")(6,"a",17),it(7,"lib-globe-icon",18),It(8,hde,2,0,"span"),ye()(),ge(9,"li")(10,"a",19),it(11,"lib-alarm-icon",18),It(12,fde,2,0,"span",20),ye()()()()}if(n&2){let e=Ae();Le("ngClass",aC(15,lde,e.isCollapsed(),!e.isCollapsed())),xe(2),Le("ngIf",!e.isCollapsed()),xe(),Le("ngIf",e.isCollapsed()),xe(3),Mi("gap-3",!e.isCollapsed()),Le("routerLink","assets"),xe(),Le("color","primary")("hover","secondary"),xe(),Kt(e.isCollapsed()?-1:8),xe(2),Mi("gap-3",!e.isCollapsed()),Le("routerLink","notifications"),xe(),Le("color","primary")("hover","secondary"),xe(),Kt(e.isCollapsed()?-1:12)}}var C8=(()=>{class n{burgerMenuRef;isCollapsed=mn(!0);burgerNavigation=_t.required();burgerMenuHeight=mn("0px");collapse(){this.isCollapsed.set(!0),this.setBurgerMenuHeight()}toggleCollapse(){this.isCollapsed()?this.expand():this.collapse()}expand(){this.isCollapsed.set(!1),this.setBurgerMenuHeight()}setBurgerMenuHeight(){if(!this.burgerNavigation())return;let e=this.burgerMenuRef.nativeElement;this.isCollapsed()?this.burgerMenuHeight.set("0px"):this.burgerMenuHeight.set(e.scrollHeight+"px")}onmouseleave=onmouseleave;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-navigation"]],viewQuery:function(i,r){if(i&1&&Bi(ade,5),i&2){let s;jn(s=Wn())&&(r.burgerMenuRef=s.first)}},inputs:{burgerNavigation:[1,"burgerNavigation"]},decls:2,vars:1,consts:[["burgerMenuContainer",""],[1,"fixed","top-0","left-0","right-0","z-50","bg-elevated-background"],[1,"fixed","top-0","left-0","h-screen","z-40","bg-elevated-background","transition-all","duration-300","overflow-hidden",3,"ngClass"],[1,"max-w-screen-xl","flex","flex-wrap","items-center","justify-between","mx-auto","p-4"],[1,"text-xl","font-bold","text-primary","whitespace-nowrap","overflow-hidden"],["type","button",1,"cursor-pointer","inline-flex","items-center","p-2","w-10","h-10","justify-center","text-sm","text-gray-500","rounded-lg","md:hidden","hover:bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-gray-200",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 17 14",1,"w-5","h-5"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M1 1h15M1 7h15M1 13h15"],["id","navbar-default",1,"overflow-hidden","w-full","burger-menu"],[1,"font-medium","flex","flex-col","p-4","mt-4","border","border-gray-100","rounded-lg","bg-white","rtl:space-x-reverse"],["aria-current","page",1,"flex","gap-2","py-2","px-3","text-gray-900","rounded-sm","hover:bg-gray-100",3,"routerLink"],[3,"color","hover"],[1,"fixed","top-0","left-0","h-screen","z-40","bg-elevated-background","transition-all","duration-300","overflow-hidden",3,"mouseenter","mouseleave","ngClass"],[1,"flex","items-center","justify-between","px-4","pt-4"],["class","text-xl ml-0.75 font-bold whitespace-nowrap text-primary",4,"ngIf"],["class","text-xl ml-0.75 font-bold text-primary",4,"ngIf"],[1,"mt-6","space-y-2","font-medium"],[1,"flex","group","py-2","hover:bg-gray-100","hover:text-gray-900","rounded-lg","group","whitespace-nowrap",3,"routerLink"],[1,"icon",3,"color","hover"],[1,"flex","py-2","hover:bg-gray-100","hover:text-gray-900","rounded-lg","group","whitespace-nowrap","overflow-hidden",3,"routerLink"],[1,"flex-1"],[1,"text-xl","ml-0.75","font-bold","whitespace-nowrap","text-primary"],[1,"text-xl","ml-0.75","font-bold","text-primary"]],template:function(i,r){i&1&&It(0,cde,20,8,"nav",1)(1,pde,13,18,"div",2),i&2&&Kt(r.burgerNavigation()?0:1)},dependencies:[Nt,us,el,m_,Nl,qg],styles:["[_nghost-%COMP%]{display:block}.side-navbar-expanded[_ngcontent-%COMP%]{width:16rem}.side-navbar-collapsed[_ngcontent-%COMP%]{width:4rem}.icon[_ngcontent-%COMP%]{margin-left:calc((4rem - 28px)/2)}.label[_ngcontent-%COMP%]{margin-right:calc((4rem - 28px)/2)}.burger-menu[_ngcontent-%COMP%]{transition:.3s height ease}.burger-menu.collapsed[_ngcontent-%COMP%]{max-height:0}"]})}return n})();var mde=["layout"];function gde(n,t){if(n&1&&it(0,"lib-navigation",2),n&2){let e=Ae();Le("burgerNavigation",e.mobileView())}}var S8=(()=>{class n{layoutRef;mobileView=mn(void 0);ngAfterViewInit(){this.updateMobileView()}updateMobileView(){this.mobileView.set(this.layoutRef.nativeElement.offsetWidth<700)}onResize(){this.updateMobileView()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-layout"]],viewQuery:function(i,r){if(i&1&&Bi(mde,7),i&2){let s;jn(s=Wn())&&(r.layoutRef=s.first)}},hostBindings:function(i,r){i&1&&yt("resize",function(o){return r.onResize(o)},!1,Xw)},decls:5,vars:3,consts:[["layout",""],["id","layout"],[3,"burgerNavigation"],[1,"router-outlet-container"]],template:function(i,r){i&1&&(ge(0,"div",1,0),It(2,gde,1,1,"lib-navigation",2),ge(3,"div",3),it(4,"router-outlet"),ye()()),i&2&&(Mi("mobile",r.mobileView()),xe(2),Kt(r.mobileView()!==void 0?2:-1))},dependencies:[Nt,xp,C8],styles:["#layout[_ngcontent-%COMP%]{height:100dvh;width:100%}#layout[_ngcontent-%COMP%]   .router-outlet-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto}#layout[_ngcontent-%COMP%]:not(.mobile){margin-left:4rem}#layout[_ngcontent-%COMP%]:not(.mobile)   .router-outlet-container[_ngcontent-%COMP%]{width:calc(100% - 4rem)}#layout.mobile[_ngcontent-%COMP%]{margin-top:4.5rem}#layout.mobile[_ngcontent-%COMP%]   .router-outlet-container[_ngcontent-%COMP%]{height:calc(100% - 4.5rem)}"]})}return n})();function em(n){return n>75?"healthy":n>40?"warn":"critical"}function M8(n){let t=ho(()=>n());return vde(t)?new Proxy(n,{get(e,i){return i in t?(tI(e[i])||Object.defineProperty(e,i,{value:an(()=>e()[i]),configurable:!0}),M8(e[i])):e[i]}}):n}var yde=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function vde(n){if(n===null||typeof n!="object"||_de(n))return!1;let t=Object.getPrototypeOf(n);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(yde.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function _de(n){return typeof n?.[Symbol.iterator]=="function"}var bde=new WeakMap,Fu=Symbol("STATE_SOURCE");function Yi(n,...t){n[Fu].update(e=>t.reduce((i,r)=>Ke(Ke({},i),typeof r=="function"?r(i):r),e)),Cde(n)}function xde(n){return n[Fu]()}function wde(n){return bde.get(n[Fu])||[]}function Cde(n){let t=wde(n);for(let e of t){let i=ho(()=>xde(n));e(i)}}function $y(...n){let t=[...n],e=typeof t[0]=="function"?{}:t.shift(),i=t;return(()=>{class s{constructor(){let a=i.reduce((O,N)=>N(O),Sde()),{stateSignals:u,props:h,methods:p,hooks:v}=a,x=Ke(Ke(Ke({},u),h),p);this[Fu]=a[Fu];for(let O of Reflect.ownKeys(x))this[O]=x[O];let{onInit:S,onDestroy:D}=v;S&&S(),D&&Ue(Tl).onDestroy(D)}static \u0275fac=function(u){return new(u||s)};static \u0275prov=Vt({token:s,factory:s.\u0275fac,providedIn:e.providedIn||null})}return s})()}function Sde(){return{[Fu]:mn({}),stateSignals:{},props:{},methods:{},hooks:{}}}function qy(n){return t=>{let e=n(Ke(Ke(Ke({[Fu]:t[Fu]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(e),Mn(Ke({},t),{methods:Ke(Ke({},t.methods),e)})}}function Xy(n){return t=>{let e=typeof n=="function"?n():n,i=Reflect.ownKeys(e);t[Fu].update(s=>Ke(Ke({},s),e));let r=i.reduce((s,o)=>{let a=an(()=>t[Fu]()[o]);return Mn(Ke({},s),{[o]:M8(a)})},{});return Mn(Ke({},t),{stateSignals:Ke(Ke({},t.stateSignals),r)})}}var E8=(()=>{class n{assets=[{asset:{id:"1551b642-4f89-4e9c-a9a0-630d768f10c4",name:"Demo Bridge",type:"bridge",location:{lat:47.3769,lng:8.5417},description:"Near the Limmatplatz",locationName:"District 5, Z\xFCrich",constructionYear:1982,modelPath:"assets/models/bridge.glb",material:"Prestressed concrete with steel elements",length:173.4},sensors:[{id:"c35a5f1e-7d3f-41dc-b97f-46aabf8e58e2",label:"Vibration Nord 3",position:{x:20,y:.9,z:0},healthPercentage:70},{id:"7f2e8e6c-3e45-49b0-a934-6176c776f518",label:"Vibration Nord 2",position:{x:13,y:.9,z:0},healthPercentage:69},{id:"8d7c8894-27c3-4ff4-8e2a-f2c53b8cb48d",label:"Vibration Nord 1",position:{x:3.5,y:.9,z:0},healthPercentage:86},{id:"c95a1c63-1d79-4232-b6f5-e13ad024dca6",label:"Vibration S\xFCd 1",position:{x:-3.5,y:.9,z:0},healthPercentage:91},{id:"ebcc62a8-fcef-4df1-984c-7a69222d4382",label:"Vibration S\xFCd 2",position:{x:-13,y:.9,z:0},healthPercentage:88},{id:"0c3092da-d665-435a-ae1f-530965bd7eae",label:"Vibration S\xFCd 3",position:{x:-20,y:.9,z:0},healthPercentage:92}],sections:[{id:"bb5f9422-e40e-4ed6-a6f0-2f2de838f29d",label:"Br\xFCckenabschnitt Nord",position:{x:16.5,y:.9,z:0},size:{x:16,y:.25,z:2},healthPercentage:69},{id:"c6f618b3-f589-401f-9ee7-89fc6e26309a",label:"Br\xFCckenabschnitt Mitte",position:{x:0,y:.9,z:0},size:{x:16,y:.25,z:2},healthPercentage:91},{id:"a12c4ad7-ff63-47e5-9c5b-1e9a3ec4cf69",label:"Br\xFCckenabschnitt S\xFCd",position:{x:-16.5,y:.9,z:0},size:{x:16,y:.25,z:2},healthPercentage:93}],healthPercentage:86},{asset:{id:"e7d8f580-9a6e-49f3-968b-e987c26f6ab9",name:"Kirchenfeldbr\xFCcke",type:"bridge",location:{lat:46.9481,lng:7.4474},description:"Existing bridge connecting old town and Kirchenfeld",locationName:"Aare river, Bern",constructionYear:1974,material:"Reinforced concrete and granite overlay",modelPath:"assets/models/kirchenfeld.glb",length:201.8},sensors:[{id:"2aea7dd9-2074-4cb9-a3ac-5f51d5b92802",label:"Vibration Verbindung Nord",position:{x:20,y:-.3,z:0},healthPercentage:10},{id:"f8a21e91-fd14-4b4e-91ec-2c30b376d2e6",label:"Strukturspannung Nord",position:{x:10,y:-.3,z:0},healthPercentage:30},{id:"b2d8a5e0-bbc4-406d-87c4-69f28eb0308e",label:"Neigung Mitte",position:{x:2,y:-.3,z:0},healthPercentage:65},{id:"7b95a642-e580-4a7c-8d39-bb8d81c3fbd6",label:"Vibration Mitte",position:{x:-2,y:-.3,z:0},healthPercentage:85},{id:"64099e36-0d5a-4c33-95a1-4f6e879c4076",label:"Temperatur S\xFCd",position:{x:-10,y:-.3,z:0},healthPercentage:90},{id:"b244e9cf-71ca-4c5d-a36f-2203579b90f5",label:"Vibration Verbindung S\xFCd",position:{x:-20,y:-.3,z:0},healthPercentage:100}],sections:[{id:"d5cf89c8-5dc3-4b58-aef2-d2a7be012220",label:"Verbindung Nord",position:{x:19,y:-.3,z:0},size:{x:10,y:.25,z:2},healthPercentage:17},{id:"edc90d04-f305-49b6-9292-1745c3bba54a",label:"Br\xFCckenabschnitt Mitte",position:{x:0,y:-.3,z:0},size:{x:26,y:.25,z:2},healthPercentage:50},{id:"27d926da-ea7d-4bf1-8487-b78970613dc0",label:"Verbindung S\xFCd",position:{x:-19,y:-.3,z:0},size:{x:10,y:.25,z:2},healthPercentage:90}],healthPercentage:67.5},{asset:{id:"8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470",name:"Pont du Mont-Blanc",type:"bridge",location:{lat:46.2044,lng:6.1432},description:"Connects the left and right banks of the Rhone",locationName:"Lake Geneva, Geneva",constructionYear:1995,modelPath:"assets/models/mont-blanc.glb",material:"Steel box girder with asphalt top",length:157.6},sensors:[{id:"bc9b5730-24a0-46a5-8c11-757f8f85b412",label:"Vibration S\xFCd",position:{x:-18,y:1.5,z:0},healthPercentage:89},{id:"8c74b44e-1a9c-4a55-8f6b-83f4767763c5",label:"Temperatur S\xFCd",position:{x:-12,y:1.5,z:0},healthPercentage:96},{id:"f8226eaf-9b56-45c7-9988-84d84892e0b7",label:"Vibration Mitte",position:{x:-2,y:1.4,z:0},healthPercentage:91},{id:"b7cddbb1-d234-46f7-9a5d-0dfcd9de29d1",label:"Neigung Mitte",position:{x:4,y:1.4,z:0},healthPercentage:93},{id:"02cda3a6-dc27-4f12-82df-f6b3882e946e",label:"Strukturspannung Nord",position:{x:12,y:1.4,z:0},healthPercentage:89},{id:"e7fec506-2608-45f8-85b3-1bc3364adbea",label:"Strukturspannung Nord",position:{x:18,y:1.4,z:0},healthPercentage:99}],sections:[{id:"dd2e9308-9913-4db0-9c0d-453fb6d4fa57",label:"Section West",position:{x:-15,y:1.4,z:0},size:{x:13,y:.25,z:2},healthPercentage:89},{id:"abe09045-5c0d-47ae-9d88-2d77b2f5cb0d",label:"Section Middle",position:{x:0,y:1.4,z:0},size:{x:13,y:.25,z:2},healthPercentage:92},{id:"dbb287d5-eeb3-49e5-a2c8-76a4d927e7b1",label:"Section East",position:{x:15,y:1.4,z:0},size:{x:13,y:.25,z:2},healthPercentage:91}],healthPercentage:90},{asset:{id:"b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7",name:"Mittlere Br\xFCcke",type:"bridge",location:{lat:47.5596,lng:7.5886},description:"Railway crossing between Kleinbasel and Grossbasel",locationName:"Rhine river, Basel",constructionYear:1965,modelPath:"assets/models/mittlere-bruecke.glb",material:"Metal h-beams with concrete base",length:189.2},sensors:[{id:"62f5a029-5bd7-41a5-9426-2a59c97b5b79",label:"Vibration Pillar 1",position:{x:16.8,y:-1,z:.75},healthPercentage:96},{id:"587c6f1b-6fd0-473c-b2c0-6c6f0eb1eab0",label:"Vibration Pillar 1",position:{x:16.8,y:2,z:.75},healthPercentage:92},{id:"5b096a9b-c03e-4513-acc7-a5c18cd5b3d7",label:"Vibration Nord 2",position:{x:13.5,y:2.75,z:0},healthPercentage:91},{id:"d38db80c-8567-4fc9-9934-175d3633a180",label:"Vibration Pillar 2",position:{x:10.125,y:-1,z:.75},healthPercentage:56},{id:"9e7168fa-e08d-4585-b628-2aeead4878a4",label:"Vibration Pillar 2",position:{x:10.125,y:2,z:.75},healthPercentage:81},{id:"7ba7721b-f40b-4f29-9b54-a1a0bad98041",label:"Vibration Nord 1",position:{x:6.25,y:2.75,z:0},healthPercentage:57},{id:"781c100f-aeef-4122-8422-3bc0ac52de27",label:"Vibration Pillar 3",position:{x:3.4,y:-1,z:.75},healthPercentage:54},{id:"c9c52881-c258-4c73-85ac-fe7d10ed1899",label:"Vibration Pillar 3",position:{x:3.4,y:2,z:.75},healthPercentage:36},{id:"ba71dce3-590c-4bea-9c93-1e642dcf505d",label:"Vibration Middle",position:{x:0,y:2.75,z:0},healthPercentage:19},{id:"23c554a6-1e2c-42b0-8a6a-d24f83998706",label:"Vibration Pillar 4",position:{x:-3.4,y:-1,z:.75},healthPercentage:15},{id:"0d7c0706-fbbc-4465-92b7-3f2593e00b53",label:"Vibration Pillar 4",position:{x:-3.4,y:2,z:.75},healthPercentage:27},{id:"786b66ff-2f76-4bed-82ed-7751c41464e4",label:"Vibration South 1",position:{x:-6.5,y:2.75,z:0},healthPercentage:19},{id:"335d5120-79e5-4627-9bea-dd55d6d3540d",label:"Vibration Pillar 5",position:{x:-10.125,y:-1,z:.75},healthPercentage:24},{id:"e56e66f9-1d4d-423a-81c7-5f5e830d8ba9",label:"Vibration Pillar 5",position:{x:-10.125,y:2,z:.75},healthPercentage:46},{id:"692d084e-9e3b-4014-909d-7137f04e204c",label:"Vibration South 2",position:{x:-13.5,y:2.75,z:0},healthPercentage:66},{id:"3d0ae4e7-62d4-41fd-875f-e88661c8c87b",label:"Vibration Pillar 6",position:{x:-16.8,y:-1,z:.75},healthPercentage:82},{id:"a7ebd388-7a9c-4d98-be79-7466dc09d36c",label:"Vibration Pillar 6",position:{x:-16.8,y:2,z:.75},healthPercentage:83}],sections:[{id:"b4154364-c857-44c9-a2f4-cd7d79933ccb",label:"Br\xFCckenabschnitt Nord 2",position:{x:13.5,y:2.75,z:0},size:{x:6,y:.25,z:1.4},healthPercentage:86},{id:"4c6d95d5-329b-4c9f-9fba-e9786160cf67",label:"Br\xFCckenabschnitt Nord 1",position:{x:6.75,y:2.75,z:0},size:{x:6,y:.25,z:1.4},healthPercentage:63},{id:"fd121158-cb75-4557-a90a-4196065a8c6b",label:"Br\xFCckenabschnitt Mitte",position:{x:0,y:2.75,z:0},size:{x:6,y:.25,z:1.4},healthPercentage:16},{id:"f5be79bb-20d2-4b04-b4d4-2cef294506c7",label:"Br\xFCckenabschnitt S\xFCd 1",position:{x:-6.75,y:2.75,z:0},size:{x:6,y:.25,z:1.4},healthPercentage:10},{id:"13f6bb3c-2f62-438e-b1f2-5aea4aff19d1",label:"Br\xFCckenabschnitt S\xFCd 2",position:{x:-13.5,y:2.75,z:0},size:{x:6,y:.25,z:1.4},healthPercentage:43}],healthPercentage:26}];getAll(){return Pn(this.assets).pipe(Gf(300))}getAsset(e){let i=this.assets.find(r=>r.asset.id===e);return Pn(i).pipe(Gf(200))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var T8=(()=>{class n{keyPrefix="asset:";TTL_CACHE_MS=30*60*1e3;get(e){let i=this.getRawCached(e);return i&&i.expiresAt>Date.now()?i.value:(this.remove(e),null)}set(e){let i={id:e.asset.id,value:e,expiresAt:Date.now()+this.TTL_CACHE_MS};localStorage.setItem(this.keyPrefix+e.asset.id,JSON.stringify(i))}remove(e){localStorage.removeItem(this.keyPrefix+e)}getAllStoredMeasurements(){return Object.keys(localStorage).filter(e=>e.startsWith(this.keyPrefix)).map(e=>this.getRawCached(e.replace(this.keyPrefix,""))).filter(e=>!!e)}shouldRefreshByAssetId(e){let i=this.getRawCached(e);return!i||i.expiresAt<Date.now()}getRawCached(e){let i=localStorage.getItem(this.keyPrefix+e);if(!i)return null;try{return JSON.parse(i)}catch{return this.remove(e),null}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ef(n,t=3e4){return!n||Date.now()-n>t}function tf(n,t){let e=new Map(n);return e.set(t,Date.now()),e}function nf(n,t){return new Set([...n,t])}function Bu(n,t){let e=new Set(n);return e.delete(t),e}function rf(n,t){return new Set([...n,t])}function sf(n,t){let e=new Set(n);return e.delete(t),e}function z1(n,t,e){let i=Date.now();for(let r of n)r.expiresAt<i&&!t(r.id)&&e(r.id)}function Yy(n,t){return n.get(t)??[]}function Zy(n,t,e,i,r){return In(this,null,function*(){if(!r.length)return{byAsset:new Map(n),byElement:new Map(t)};yield i(r);let s=new Map(n),o=new Map(t);for(let a of r){let u=s.get(a.assetId)??[];u.some(x=>x.id===a.id)||s.set(a.assetId,[...u,a]);let p=o.get(a.affectedElementId)??[];p.some(x=>x.id===a.id)||o.set(a.affectedElementId,[...p,a])}return{byAsset:s,byElement:o}})}function mb(n){let{storeName:t,objectType:e,objectId:i,lastRefresh:r,storeHasData:s,cacheHasData:o,isStoreOutdated:a,isCacheOutdated:u,ttl:h,ttr:p,trigger:v}=n,x=!a&&s,S=a&&!u&&o,D={timestamp:new Date().toISOString(),store:t,type:"loadDecision",trigger:v??"unspecified",objectType:e,objectId:i,lastRefresh:r?new Date(r).toISOString():null,refreshDueAt:r?new Date(r+h).toISOString():null,ttl:h,ttr:p,storeHasData:s,cacheHasData:o,isStoreOutdated:a,isCacheOutdated:u,action:x?"skip":S?"cache":"api"};console.info(JSON.stringify(D))}var Mde={assets:new Map,loading:new Set,observedAssetIds:new Set,assetTimestamps:new Map},P2=10*60*1e3,A8=3*60*1e3,of=$y({providedIn:"root"},Xy(Mde),qy((n,t=Ue(E8),e=Ue(T8))=>{let i=(p,v={})=>{if(n.loading().has(p))return;let x=n.assetTimestamps().get(p),S=ef(x,P2),D=e.shouldRefreshByAssetId(p),O=n.assets().has(p),N=e.get(p);if(mb({storeName:"AssetDataStore",objectType:"assetId",objectId:p,lastRefresh:x,storeHasData:O,cacheHasData:!!N,isStoreOutdated:S,isCacheOutdated:D,ttl:P2,ttr:A8,trigger:v.trigger??"unspecified"}),!(!S&&O)){if(S&&N&&!D){Yi(n,{assets:new Map(n.assets()).set(p,N),assetTimestamps:tf(n.assetTimestamps(),p)});return}Yi(n,{loading:nf(n.loading(),p)}),t.getAsset(p).subscribe({next:T=>{if(T){let j=new Map(n.assets()).set(p,T);Yi(n,{assets:j,assetTimestamps:tf(n.assetTimestamps(),p)}),e.set(T)}},complete:()=>{Yi(n,{loading:Bu(n.loading(),p)})}})}},r=()=>{t.getAll().subscribe({next:p=>{let v=new Map,x=new Map,S=new Set(n.observedAssetIds());p.forEach(D=>{let O=D.asset.id;v.set(O,D),x.set(O,Date.now()),e.set(D),S.add(O)}),Yi(n,{assets:v,assetTimestamps:x,observedAssetIds:S})}})},s=p=>{Yi(n,{observedAssetIds:rf(n.observedAssetIds(),p)}),i(p,{trigger:"observe"})},o=p=>{Yi(n,{observedAssetIds:sf(n.observedAssetIds(),p)}),h()},a=()=>{r()},u=p=>{let v=new Set(n.observedAssetIds());p.forEach(x=>v.delete(x)),Yi(n,{observedAssetIds:v}),h()},h=()=>{let p=new Set(n.observedAssetIds());z1(e.getAllStoredMeasurements(),v=>p.has(v),v=>e.remove(v))};return Wi(()=>{Wf(A8).subscribe(()=>{for(let p of n.observedAssetIds()){let v=n.assetTimestamps().get(p);ef(v,P2)&&i(p,{trigger:"interval"})}})}),{getAssetById:p=>an(()=>n.assets().get(p)),getAllAssets:()=>an(()=>Array.from(n.assets().values())),observeAsset:s,unobserveAsset:o,observeAllAssets:a,unobserveAssets:u}}));var D8=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Ede(n){return typeof n=="string"&&D8.test(n)}var I8=Ede;function Tde(n){if(!I8(n))throw TypeError("Invalid UUID");let t;return Uint8Array.of((t=parseInt(n.slice(0,8),16))>>>24,t>>>16&255,t>>>8&255,t&255,(t=parseInt(n.slice(9,13),16))>>>8,t&255,(t=parseInt(n.slice(14,18),16))>>>8,t&255,(t=parseInt(n.slice(19,23),16))>>>8,t&255,(t=parseInt(n.slice(24,36),16))/1099511627776&255,t/4294967296&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255)}var R2=Tde;var mo=[];for(let n=0;n<256;++n)mo.push((n+256).toString(16).slice(1));function P8(n,t=0){return(mo[n[t+0]]+mo[n[t+1]]+mo[n[t+2]]+mo[n[t+3]]+"-"+mo[n[t+4]]+mo[n[t+5]]+"-"+mo[n[t+6]]+mo[n[t+7]]+"-"+mo[n[t+8]]+mo[n[t+9]]+"-"+mo[n[t+10]]+mo[n[t+11]]+mo[n[t+12]]+mo[n[t+13]]+mo[n[t+14]]+mo[n[t+15]]).toLowerCase()}function Ade(n){n=unescape(encodeURIComponent(n));let t=new Uint8Array(n.length);for(let e=0;e<n.length;++e)t[e]=n.charCodeAt(e);return t}var R8="6ba7b810-9dad-11d1-80b4-00c04fd430c8",k8="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function k2(n,t,e,i,r,s){let o=typeof e=="string"?Ade(e):e,a=typeof i=="string"?R2(i):i;if(typeof i=="string"&&(i=R2(i)),i?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+o.length);if(u.set(a),u.set(o,a.length),u=t(u),u[6]=u[6]&15|n,u[8]=u[8]&63|128,r){s=s||0;for(let h=0;h<16;++h)r[s+h]=u[h];return r}return P8(u)}function Dde(n,t,e,i){switch(n){case 0:return t&e^~t&i;case 1:return t^e^i;case 2:return t&e^t&i^e&i;case 3:return t^e^i}}function L2(n,t){return n<<t|n>>>32-t}function Ide(n){let t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520],i=new Uint8Array(n.length+1);i.set(n),i[n.length]=128,n=i;let r=n.length/4+2,s=Math.ceil(r/16),o=new Array(s);for(let a=0;a<s;++a){let u=new Uint32Array(16);for(let h=0;h<16;++h)u[h]=n[a*64+h*4]<<24|n[a*64+h*4+1]<<16|n[a*64+h*4+2]<<8|n[a*64+h*4+3];o[a]=u}o[s-1][14]=(n.length-1)*8/Math.pow(2,32),o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=(n.length-1)*8&4294967295;for(let a=0;a<s;++a){let u=new Uint32Array(80);for(let D=0;D<16;++D)u[D]=o[a][D];for(let D=16;D<80;++D)u[D]=L2(u[D-3]^u[D-8]^u[D-14]^u[D-16],1);let h=e[0],p=e[1],v=e[2],x=e[3],S=e[4];for(let D=0;D<80;++D){let O=Math.floor(D/20),N=L2(h,5)+Dde(O,p,v,x)+S+t[O]+u[D]>>>0;S=x,x=v,v=L2(p,30)>>>0,p=h,h=N}e[0]=e[0]+h>>>0,e[1]=e[1]+p>>>0,e[2]=e[2]+v>>>0,e[3]=e[3]+x>>>0,e[4]=e[4]+S>>>0}return Uint8Array.of(e[0]>>24,e[0]>>16,e[0]>>8,e[0],e[1]>>24,e[1]>>16,e[1]>>8,e[1],e[2]>>24,e[2]>>16,e[2]>>8,e[2],e[3]>>24,e[3]>>16,e[3]>>8,e[3],e[4]>>24,e[4]>>16,e[4]>>8,e[4])}var L8=Ide;function N2(n,t,e,i){return k2(80,L8,n,t,e,i)}N2.DNS=R8;N2.URL=k8;var gb=N2;var N8=(()=>{class n{notifications=[...Zn("1551b642-4f89-4e9c-a9a0-630d768f10c4","Demo Bridge","c35a5f1e-7d3f-41dc-b97f-46aabf8e58e2","Vibration Nord 3",70,"sensor"),...Zn("1551b642-4f89-4e9c-a9a0-630d768f10c4","Demo Bridge","7f2e8e6c-3e45-49b0-a934-6176c776f518","Vibration Nord 2",69,"sensor"),...Zn("1551b642-4f89-4e9c-a9a0-630d768f10c4","Demo Bridge","8d7c8894-27c3-4ff4-8e2a-f2c53b8cb48d","Vibration Nord 1",86,"sensor"),...Zn("1551b642-4f89-4e9c-a9a0-630d768f10c4","Demo Bridge","c95a1c63-1d79-4232-b6f5-e13ad024dca6","Vibration S\xFCd 1",91,"sensor"),...Zn("1551b642-4f89-4e9c-a9a0-630d768f10c4","Demo Bridge","ebcc62a8-fcef-4df1-984c-7a69222d4382","Vibration S\xFCd 2",88,"sensor"),...Zn("1551b642-4f89-4e9c-a9a0-630d768f10c4","Demo Bridge","0c3092da-d665-435a-ae1f-530965bd7eae","Vibration S\xFCd 3",92,"sensor"),...Zn("1551b642-4f89-4e9c-a9a0-630d768f10c4","Demo Bridge","bb5f9422-e40e-4ed6-a6f0-2f2de838f29d","Br\xFCckenabschnitt Nord",69,"section"),...Zn("1551b642-4f89-4e9c-a9a0-630d768f10c4","Demo Bridge","c6f618b3-f589-401f-9ee7-89fc6e26309a","Br\xFCckenabschnitt Mitte",91,"section"),...Zn("1551b642-4f89-4e9c-a9a0-630d768f10c4","Demo Bridge","a12c4ad7-ff63-47e5-9c5b-1e9a3ec4cf69","Br\xFCckenabschnitt S\xFCd",93,"section"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","2aea7dd9-2074-4cb9-a3ac-5f51d5b92802","Vibration Nord 1",10,"sensor"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","f8a21e91-fd14-4b4e-91ec-2c30b376d2e6","Vibration Nord 2",30,"sensor"),...Zn("e7d8a5e0-bbc4-406d-87c4-69f28eb0308e","Kirchenfeldbr\xFCcke","b2d8a5e0-bbc4-406d-87c4-69f28eb0308e","Vibration Nord 3",65,"sensor"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","7b95a642-e580-4a7c-8d39-bb8d81c3fbd6","Vibration Mitte 1",85,"sensor"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","64099e36-0d5a-4c33-95a1-4f6e879c4076","Vibration Mitte 2",90,"sensor"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","b244e9cf-71ca-4c5d-a36f-2203579b90f5","Vibration S\xFCd 1",100,"sensor"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","d5cf89c8-5dc3-4b58-aef2-d2a7be012220","Br\xFCckenabschnitt Nord",17,"section"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","edc90d04-f305-49b6-9292-1745c3bba54a","Br\xFCckenabschnitt Mitte",50,"section"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","27d926da-ea7d-4bf1-8487-b78970613dc0","Br\xFCckenabschnitt S\xFCd",90,"section"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","bc9b5730-24a0-46a5-8c11-757f8f85b412","Vibration S\xFCd",89,"sensor"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","8c74b44e-1a9c-4a55-8f6b-83f4767763c5","Temperatur S\xFCd",96,"sensor"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","f8226eaf-9b56-45c7-9988-84d84892e0b7","Vibration Mitte",91,"sensor"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","b7cddbb1-d234-46f7-9a5d-0dfcd9de29d1","Neigung Mitte",93,"sensor"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","02cda3a6-dc27-4f12-82df-f6b3882e946e","Strukturspannung Nord",89,"sensor"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","e7fec506-2608-45f8-85b3-1bc3364adbea","Strukturspannung Nord",99,"sensor"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","dd2e9308-9913-4db0-9c0d-453fb6d4fa57","Section West",89,"section"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","abe09045-5c0d-47ae-9d88-2d77b2f5cb0d","Section Middle",92,"section"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","dbb287d5-eeb3-49e5-a2c8-76a4d927e7b1","Section East",91,"section"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","62f5a029-5bd7-41a5-9426-2a59c97b5b79","Vibration Pillar 1",96,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","587c6f1b-6fd0-473c-b2c0-6c6f0eb1eab0","Vibration Pillar 1",92,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","5b096a9b-c03e-4513-acc7-a5c18cd5b3d7","Vibration Nord 2",91,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","d38db80c-8567-4fc9-9934-175d3633a180","Vibration Pillar 2",56,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","9e7168fa-e08d-4585-b628-2aeead4878a4","Vibration Pillar 2",81,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","7ba7721b-f40b-4f29-9b54-a1a0bad98041","Vibration Nord 1",57,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","781c100f-aeef-4122-8422-3bc0ac52de27","Vibration Pillar 3",54,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","c9c52881-c258-4c73-85ac-fe7d10ed1899","Vibration Pillar 3",36,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","ba71dce3-590c-4bea-9c93-1e642dcf505d","Vibration Middle",19,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","23c554a6-1e2c-42b0-8a6a-d24f83998706","Vibration Pillar 4",15,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","0d7c0706-fbbc-4465-92b7-3f2593e00b53","Vibration Pillar 4",27,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","786b66ff-2f76-4bed-82ed-7751c41464e4","Vibration South 1",19,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","335d5120-79e5-4627-9bea-dd55d6d3540d","Vibration Pillar 5",24,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","e56e66f9-1d4d-423a-81c7-5f5e830d8ba9","Vibration Pillar 5",46,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","692d084e-9e3b-4014-909d-7137f04e204c","Vibration South 2",66,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","3d0ae4e7-62d4-41fd-875f-e88661c8c87b","Vibration Pillar 6",82,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","a7ebd388-7a9c-4d98-be79-7466dc09d36c","Vibration Pillar 6",83,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","b4154364-c857-44c9-a2f4-cd7d79933ccb","Br\xFCckenabschnitt Nord 2",86,"section"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","4c6d95d5-329b-4c9f-9fba-e9786160cf67","Br\xFCckenabschnitt Nord 1",63,"section"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","fd121158-cb75-4557-a90a-4196065a8c6b","Br\xFCckenabschnitt Mitte",16,"section"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","f5be79bb-20d2-4b04-b4d4-2cef294506c7","Br\xFCckenabschnitt S\xFCd 1",10,"section"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","13f6bb3c-2f62-438e-b1f2-5aea4aff19d1","Br\xFCckenabschnitt S\xFCd 2",43,"section")];getByAssetIdBefore(e,i,r){return Pn(null).pipe(ui(()=>this.notifications.filter(s=>s.assetId===e&&s.dateTime<i).sort((s,o)=>o.dateTime.getTime()-s.dateTime.getTime()).slice(0,r)))}getByElementIdBefore(e,i,r){return Pn(null).pipe(ui(()=>this.notifications.filter(s=>s.affectedElementId===e&&s.dateTime<i).sort((s,o)=>o.dateTime.getTime()-s.dateTime.getTime()).slice(0,r)))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pde="82d49e3d-aa71-4750-ad6a-3defa50cd166";function Rde(n){let t=n%2147483647;return()=>(t=t*16807%2147483647,(t-1)/2147483646)}function Zn(n,t,e,i,r,s,o=20){let a=[],u=new Date,h=`${n}-${e}`,p=Array.from(h).reduce((x,S)=>x+S.charCodeAt(0),0),v=Rde(p);for(let x=0;x<o;x++){let S=x*.001,D=new Date(u);D.setDate(u.getDate()-Math.floor(S)),D.setHours(Math.floor(v()*24)),D.setMinutes(Math.floor(v()*60)),D.setSeconds(Math.floor(v()*60));let O=v(),N=kde(r,O),j={id:gb(`${h}-${x}`,Pde),status:N,dateTime:D,asset:t,assetId:n,affectedElement:i,affectedElementId:e,affectedElementType:s,notification:Lde(N,s,O)};a.push(j)}return a}function kde(n,t){return n>75?t>.95?"warn":"healthy":n>40?t<.8?"warn":"healthy":t<.7?"critical":"warn"}function Lde(n,t,e){let i=Math.floor(e*100);if(n==="healthy")if(t==="sensor"){let r=["All sensor readings remain stable and within expected parameters.","No irregularities detected in current sensor output.","Sensor performance is consistent and nominal.","No anomalies found in recent vibration measurements.","Sensor shows stable trends over time."];return r[i%r.length]}else{let r=["Structural metrics are consistent across all sections.","All section-related sensors report normal conditions.","No deviations found in structural behavior.","Span performance remains within safe operational bounds.","Current stress levels are within normal limits."];return r[i%r.length]}if(n==="warn")if(t==="sensor"){let r=["Sporadic anomalies detected in vibration data.","Sensor reported values approaching warning threshold.","Elevated motion patterns observed during traffic peaks.","Sensor readings fluctuate slightly outside average baseline.","Short bursts of increased acceleration detected recently."];return r[i%r.length]}else{let r=["Minor displacement patterns observed in the span.","Section exhibits slight structural inconsistencies.","Recent load patterns suggest early deformation signs.","Deviations from baseline strain profile require review.","Sensor correlation indicates possible section imbalance."];return r[i%r.length]}if(t==="sensor"){let r=["Critical deviation detected in acceleration metrics.","Sensor reports extreme values beyond safety thresholds.","Detected instability suggests potential structural failure.","Dangerous vibration amplitude identified in recent measurements.","Sensor readings indicate immediate inspection is required."];return r[i%r.length]}else{let r=["Critical strain values detected across multiple sections.","Span stability compromised based on combined sensor data.","Section under severe mechanical stress. Immediate response needed.","Structural failure indicators observed in recent readings.","Urgent attention required due to escalating structural anomalies."];return r[i%r.length]}}var B2=(n,t)=>t.some(e=>n instanceof e),O8,F8;function Nde(){return O8||(O8=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ode(){return F8||(F8=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var V2=new WeakMap,O2=new WeakMap,H1=new WeakMap;function Fde(n){let t=new Promise((e,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{e(tm(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return H1.set(t,n),t}function Bde(n){if(V2.has(n))return;let t=new Promise((e,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});V2.set(n,t)}var U2={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return V2.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return tm(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function z8(n){U2=n(U2)}function Vde(n){return Ode().includes(n)?function(...t){return n.apply(z2(this),t),tm(this.request)}:function(...t){return tm(n.apply(z2(this),t))}}function Ude(n){return typeof n=="function"?Vde(n):(n instanceof IDBTransaction&&Bde(n),B2(n,Nde())?new Proxy(n,U2):n)}function tm(n){if(n instanceof IDBRequest)return Fde(n);if(O2.has(n))return O2.get(n);let t=Ude(n);return t!==n&&(O2.set(n,t),H1.set(t,n)),t}var z2=n=>H1.get(n);function j1(n,t,{blocked:e,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,t),a=tm(o);return i&&o.addEventListener("upgradeneeded",u=>{i(tm(o.result),u.oldVersion,u.newVersion,tm(o.transaction),u)}),e&&o.addEventListener("blocked",u=>e(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),a}var zde=["get","getKey","getAll","getAllKeys","count"],Hde=["put","add","delete","clear"],F2=new Map;function B8(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(F2.get(t))return F2.get(t);let e=t.replace(/FromIndex$/,""),i=t!==e,r=Hde.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||zde.includes(e)))return;let s=function(o,...a){return In(this,null,function*(){let u=this.transaction(o,r?"readwrite":"readonly"),h=u.store;return i&&(h=h.index(a.shift())),(yield Promise.all([h[e](...a),r&&u.done]))[0]})};return F2.set(t,s),s}z8(n=>Mn(Ke({},n),{get:(t,e,i)=>B8(t,e)||n.get(t,e,i),has:(t,e)=>!!B8(t,e)||n.has(t,e)}));var jde=["continue","continuePrimaryKey","advance"],V8={},H2=new WeakMap,H8=new WeakMap,Wde={get(n,t){if(!jde.includes(t))return n[t];let e=V8[t];return e||(e=V8[t]=function(...i){H2.set(this,H8.get(this)[t](...i))}),e}};function Gde(...n){return wO(this,null,function*(){let t=this;if(t instanceof IDBCursor||(t=yield new px(t.openCursor(...n))),!t)return;t=t;let e=new Proxy(t,Wde);for(H8.set(e,t),H1.set(e,z2(t));t;)yield e,t=yield new px(H2.get(e)||t.continue()),H2.delete(e)})}function U8(n,t){return t===Symbol.asyncIterator&&B2(n,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&B2(n,[IDBIndex,IDBObjectStore])}z8(n=>Mn(Ke({},n),{get(t,e,i){return U8(t,e)?Gde:n.get(t,e,i)},has(t,e){return U8(t,e)||n.has(t,e)}}));var j8=(()=>{class n{TTL_CACHE_MS=60*1e3;dbPromise=j1("notification-db",3,{upgrade(e){let i=e.createObjectStore("notifications",{keyPath:"id"});i.createIndex("by-asset","value.assetId"),i.createIndex("by-element","value.affectedElementId"),i.createIndex("by-asset-and-date",["value.assetId","value.dateTime"]),i.createIndex("by-element-and-date",["value.affectedElementId","value.dateTime"]),e.createObjectStore("metadataAssets",{keyPath:"id"}).createIndex("by-lastUpdatedAt","value"),e.createObjectStore("metadataElements",{keyPath:"id"}).createIndex("by-lastUpdatedAt","value")}});putManyForAsset(e,i){return In(this,null,function*(){let s=(yield this.dbPromise).transaction("notifications","readwrite"),o=s.objectStore("notifications");for(let a of e){let u={id:a.id,value:a};yield o.put(u)}yield s.done,yield this.setLastUpdated("metadataAssets",i)})}putManyForElement(e,i){return In(this,null,function*(){let s=(yield this.dbPromise).transaction("notifications","readwrite"),o=s.objectStore("notifications");for(let a of e){let u={id:a.id,value:a};yield o.put(u)}yield s.done,yield this.setLastUpdated("metadataElements",i)})}getManyForAsset(e,i,r){return In(this,null,function*(){let o=(yield this.dbPromise).transaction("notifications").store.index("by-asset-and-date"),a=IDBKeyRange.bound([e,new Date(0)],[e,i],!1,!0);return(yield o.getAll(a,r)).map(h=>h.value)})}getManyForElement(e,i,r){return In(this,null,function*(){let o=(yield this.dbPromise).transaction("notifications").store.index("by-element-and-date"),a=IDBKeyRange.bound([e,new Date(0)],[e,i],!1,!0);return(yield o.getAll(a,r)).map(h=>h.value)})}cleanUpUnusedNotificationIdsByReferenceIndex(e,i){return In(this,null,function*(){let[r,s]=yield Promise.all([this.getExpiredAssetIds(),this.getExpiredElementIds()]),o=r.filter(p=>!e.has(p)),a=s.filter(p=>!i.has(p)),u=new Map;for(let p of o){let v=yield this.getAllByAssetId(p);for(let x of v)u.set(x.id,0)}for(let p of a){let v=yield this.getAllByElementId(p);for(let x of v)u.has(x.id)||u.set(x.id,0)}for(let p of e){let v=yield this.getAllByAssetId(p);for(let x of v)u.has(x.id)&&u.set(x.id,u.get(x.id)+1)}for(let p of i){let v=yield this.getAllByElementId(p);for(let x of v)u.has(x.id)&&u.set(x.id,u.get(x.id)+1)}let h=[...u.entries()].filter(([p,v])=>v===0).map(([p])=>p);return this.removeMany(h)})}setLastUpdated(s,o){return In(this,arguments,function*(e,i,r=new Date){let u=(yield this.dbPromise).transaction(e,"readwrite");yield u.store.put({id:i,value:r}),yield u.done})}getExpiredIds(e,i){return In(this,null,function*(){let s=(yield this.dbPromise).transaction(e).store.index("by-lastUpdatedAt"),o=[],a=Date.now(),u=yield s.openCursor();for(;u;)new Date(u.value.value).getTime()+i<a&&o.push(u.value.id),u=yield u.continue();return o})}getExpiredAssetIds(){return In(this,null,function*(){return this.getExpiredIds("metadataAssets",this.TTL_CACHE_MS)})}getExpiredElementIds(){return In(this,null,function*(){return this.getExpiredIds("metadataElements",this.TTL_CACHE_MS)})}getAllByAssetId(e){return In(this,null,function*(){return(yield(yield this.dbPromise).transaction("notifications").store.index("by-asset").getAll(e)).map(a=>a.value)})}getAllByElementId(e){return In(this,null,function*(){return(yield(yield this.dbPromise).transaction("notifications").store.index("by-element").getAll(e)).map(a=>a.value)})}removeMany(e){return In(this,null,function*(){let r=(yield this.dbPromise).transaction("notifications","readwrite"),s=r.store;for(let o of e)yield s.delete(o);yield r.done})}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $de=30*1e3,W1=50,qde={notificationsByAssetId:new Map,notificationsByElementId:new Map,lastLoadedTimestamps:new Map,loading:new Set,observedAssetIds:new Set,observedElementIds:new Set},$1=$y({providedIn:"root"},Xy(qde),qy((n,t=Ue(N8),e=Ue(j8))=>{function i(D,O){return In(this,arguments,function*(p,v,x=W1,S=!1){if(!S){if(n.loading().has(p))return;if((n.notificationsByAssetId().get(p)??[]).filter(le=>new Date(le.dateTime)<v).length>=x){Yi(n,{});return}Yi(n,{loading:nf(n.loading(),p)});let G=(yield e.getManyForAsset(p,v,x))??[];if(G.length===x){let le=new Map(n.notificationsByAssetId());le.set(p,G),Yi(n,{notificationsByAssetId:le,lastLoadedTimestamps:new Map(n.lastLoadedTimestamps()).set(p,G1(G)),loading:Bu(n.loading(),p)});return}}let N=(yield t.getByAssetIdBefore(p,v,x).toPromise())??[];yield e.putManyForAsset(N,p);let{byAsset:T,byElement:j}=yield Zy(n.notificationsByAssetId(),n.notificationsByElementId(),()=>Promise.resolve(),Z=>e.putManyForAsset(Z,p),N);Yi(n,{notificationsByAssetId:T,notificationsByElementId:j,lastLoadedTimestamps:new Map(n.lastLoadedTimestamps()).set(p,G1(N)),loading:Bu(n.loading(),p)})})}function r(D,O){return In(this,arguments,function*(p,v,x=W1,S=!1){if(!S){if(n.loading().has(p))return;if((n.notificationsByElementId().get(p)??[]).filter(le=>new Date(le.dateTime)<v).length>=x){Yi(n,{});return}Yi(n,{loading:nf(n.loading(),p)});let G=(yield e.getManyForElement(p,v,x))??[];if(G.length===x){let le=new Map(n.notificationsByElementId());le.set(p,G),Yi(n,{notificationsByElementId:le,lastLoadedTimestamps:new Map(n.lastLoadedTimestamps()).set(p,G1(G)),loading:Bu(n.loading(),p)});return}}let N=(yield t.getByElementIdBefore(p,v,x).toPromise())??[];yield e.putManyForElement(N,p);let{byAsset:T,byElement:j}=yield Zy(n.notificationsByAssetId(),n.notificationsByElementId(),()=>Promise.resolve(),Z=>e.putManyForElement(Z,p),N);Yi(n,{notificationsByAssetId:T,notificationsByElementId:j,lastLoadedTimestamps:new Map(n.lastLoadedTimestamps()).set(p,G1(N)),loading:Bu(n.loading(),p)})})}function s(p){return In(this,null,function*(){Yi(n,{observedAssetIds:rf(n.observedAssetIds(),p)}),yield i(p,new Date)})}function o(p){Yi(n,{observedAssetIds:sf(n.observedAssetIds(),p),notificationsByAssetId:(()=>{let v=new Map(n.notificationsByAssetId());return v.delete(p),v})(),lastLoadedTimestamps:(()=>{let v=new Map(n.lastLoadedTimestamps());return v.delete(p),v})()})}function a(p){return In(this,null,function*(){Yi(n,{observedElementIds:rf(n.observedElementIds(),p)}),yield r(p,new Date)})}function u(p){Yi(n,{observedElementIds:sf(n.observedElementIds(),p),notificationsByElementId:(()=>{let v=new Map(n.notificationsByElementId());return v.delete(p),v})(),lastLoadedTimestamps:(()=>{let v=new Map(n.lastLoadedTimestamps());return v.delete(p),v})()})}function h(){return In(this,null,function*(){let p=n.observedAssetIds(),v=n.observedElementIds();yield e.cleanUpUnusedNotificationIdsByReferenceIndex(p,v)})}return Wi(()=>{Wf($de).subscribe(()=>In(null,null,function*(){for(let p of n.observedAssetIds())i(p,new Date,W1,!0);for(let p of n.observedElementIds())r(p,new Date,W1,!0);yield h()}))}),{getAllByAssetId:p=>an(()=>Yy(n.notificationsByAssetId(),p)),getAllByElementId:p=>an(()=>Yy(n.notificationsByElementId(),p)),getAllNotifications:()=>an(()=>{let p=new Map;for(let v of n.notificationsByAssetId().values())for(let x of v)p.set(x.id,x);return Array.from(p.values())}),isLoading:p=>an(()=>n.loading().has(p)),getLastLoadedTimestampByAssetId:p=>n.lastLoadedTimestamps().get(p)??new Date,getObservedAssetIds:()=>n.observedAssetIds(),observeAsset:s,unobserveAsset:o,observeElement:a,unobserveElement:u,loadNotificationsForAsset:i,loadNotificationsForElement:r}}));function G1(n){return n.reduce((t,e)=>new Date(e.dateTime)<t?new Date(e.dateTime):t,new Date)}var W8=(()=>{class n{measurements=[...Kn("1551b642-4f89-4e9c-a9a0-630d768f10c4","c35a5f1e-7d3f-41dc-b97f-46aabf8e58e2",70,"sensor"),...Kn("1551b642-4f89-4e9c-a9a0-630d768f10c4","7f2e8e6c-3e45-49b0-a934-6176c776f518",69,"sensor"),...Kn("1551b642-4f89-4e9c-a9a0-630d768f10c4","8d7c8894-27c3-4ff4-8e2a-f2c53b8cb48d",86,"sensor"),...Kn("1551b642-4f89-4e9c-a9a0-630d768f10c4","c95a1c63-1d79-4232-b6f5-e13ad024dca6",91,"sensor"),...Kn("1551b642-4f89-4e9c-a9a0-630d768f10c4","ebcc62a8-fcef-4df1-984c-7a69222d4382",88,"sensor"),...Kn("1551b642-4f89-4e9c-a9a0-630d768f10c4","0c3092da-d665-435a-ae1f-530965bd7eae",92,"sensor"),...Kn("1551b642-4f89-4e9c-a9a0-630d768f10c4","bb5f9422-e40e-4ed6-a6f0-2f2de838f29d",69,"aggregated"),...Kn("1551b642-4f89-4e9c-a9a0-630d768f10c4","c6f618b3-f589-401f-9ee7-89fc6e26309a",91,"aggregated"),...Kn("1551b642-4f89-4e9c-a9a0-630d768f10c4","a12c4ad7-ff63-47e5-9c5b-1e9a3ec4cf69",93,"aggregated"),...Kn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","2aea7dd9-2074-4cb9-a3ac-5f51d5b92802",10,"sensor"),...Kn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","f8a21e91-fd14-4b4e-91ec-2c30b376d2e6",30,"sensor"),...Kn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","b2d8a5e0-bbc4-406d-87c4-69f28eb0308e",65,"sensor"),...Kn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","7b95a642-e580-4a7c-8d39-bb8d81c3fbd6",85,"sensor"),...Kn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","64099e36-0d5a-4c33-95a1-4f6e879c4076",90,"sensor"),...Kn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","b244e9cf-71ca-4c5d-a36f-2203579b90f5",100,"sensor"),...Kn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","d5cf89c8-5dc3-4b58-aef2-d2a7be012220",17,"aggregated"),...Kn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","edc90d04-f305-49b6-9292-1745c3bba54a",50,"aggregated"),...Kn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","27d926da-ea7d-4bf1-8487-b78970613dc0",90,"aggregated"),...Kn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","bc9b5730-24a0-46a5-8c11-757f8f85b412",89,"sensor"),...Kn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","8c74b44e-1a9c-4a55-8f6b-83f4767763c5",96,"sensor"),...Kn("8b9db78b-dfd4-4f12-82df-f6b3882e946e","f8226eaf-9b56-45c7-9988-84d84892e0b7",91,"sensor"),...Kn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","b7cddbb1-d234-46f7-9a5d-0dfcd9de29d1",93,"sensor"),...Kn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","02cda3a6-dc27-4f12-82df-f6b3882e946e",89,"sensor"),...Kn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","e7fec506-2608-45f8-85b3-1bc3364adbea",99,"sensor"),...Kn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","dd2e9308-9913-4db0-9c0d-453fb6d4fa57",89,"aggregated"),...Kn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","abe09045-5c0d-47ae-9d88-2d77b2f5cb0d",92,"aggregated"),...Kn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","dbb287d5-eeb3-49e5-a2c8-76a4d927e7b1",91,"aggregated"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","62f5a029-5bd7-41a5-9426-2a59c97b5b79",96,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","587c6f1b-6fd0-473c-b2c0-6c6f0eb1eab0",92,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","5b096a9b-c03e-4513-acc7-a5c18cd5b3d7",91,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","d38db80c-8567-4fc9-9934-175d3633a180",56,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","9e7168fa-e08d-4585-b628-2aeead4878a4",81,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","7ba7721b-f40b-4f29-9b54-a1a0bad98041",57,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","781c100f-aeef-4122-8422-3bc0ac52de27",54,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","c9c52881-c258-4c73-85ac-fe7d10ed1899",36,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","ba71dce3-590c-4bea-9c93-1e642dcf505d",19,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","23c554a6-1e2c-42b0-8a6a-d24f83998706",15,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","0d7c0706-fbbc-4465-92b7-3f2593e00b53",27,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","786b66ff-2f76-4bed-82ed-7751c41464e4",19,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","335d5120-79e5-4627-9bea-dd55d6d3540d",24,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","e56e66f9-1d4d-423a-81c7-5f5e830d8ba9",46,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","692d084e-9e3b-4014-909d-7137f04e204c",66,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","3d0ae4e7-62d4-41fd-875f-e88661c8c87b",82,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","a7ebd388-7a9c-4d98-be79-7466dc09d36c",83,"sensor"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","b4154364-c857-44c9-a2f4-cd7d79933ccb",86,"aggregated"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","4c6d95d5-329b-4c9f-9fba-e9786160cf67",63,"aggregated"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","fd121158-cb75-4557-a90a-4196065a8c6b",16,"aggregated"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","f5be79bb-20d2-4b04-b4d4-2cef294506c7",10,"aggregated"),...Kn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","13f6bb3c-2f62-438e-b1f2-5aea4aff19d1",43,"aggregated")];getByAssetId(e){let i=this.measurements.filter(r=>r.assetId===e);return Pn(i).pipe(Gf(200))}getAllByElementId(e){let i=this.measurements.filter(r=>r.affectedElementId===e);return Pn(i).pipe(Gf(200))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xde="6ba7b810-9dad-11d1-80b4-00c04fd430c8";function Yde(n){let t=n%2147483647;return()=>(t=t*16807%2147483647,(t-1)/2147483646)}function Kn(n,t,e,i="sensor"){let s=100-e,o=new Date,a=`${n}-${t}`,u=Array.from(a).reduce((p,v)=>p+v.charCodeAt(0),0),h=Yde(u);return Array.from({length:180},(p,v)=>{let x=180-v,S=new Date(o);S.setDate(o.getDate()-x);let D=s+20/180*v,N=Math.pow(1.015,v+s)*(h()-.5),T=Math.round((D+N)*10)/10;return{id:gb(`${a}-${v}`,Xde),dateTime:S,assetId:n,affectedElementId:t,affectedElementType:i,value:T}})}var G8=(()=>{class n{TTL_CACHE_MS=5*60*1e3;dbPromise=j1("measurement-db",1,{upgrade(e){e.createObjectStore("measurements",{keyPath:"id"}),e.createObjectStore("assetIndex"),e.createObjectStore("elementIndex")}});get(e){return In(this,null,function*(){let i=yield this.dbPromise,r=yield i.get("measurements",e);return r?r.expiresAt<Date.now()?(yield i.delete("measurements",e),null):r.value:null})}set(e){return In(this,null,function*(){let i=yield this.dbPromise,r={id:e.id,value:e,expiresAt:Date.now()+this.TTL_CACHE_MS};yield i.put("measurements",r),yield this.appendToIndex(i,"assetIndex",e.assetId,e.id),e.affectedElementId&&(yield this.appendToIndex(i,"elementIndex",e.affectedElementId,e.id))})}getAllByAsset(e){return In(this,null,function*(){let i=yield this.dbPromise,r=(yield i.get("assetIndex",e))??[];return this.getValidMeasurementsByIds(i,r)})}getAllByElement(e){return In(this,null,function*(){let i=yield this.dbPromise,r=(yield i.get("elementIndex",e))??[];return this.getValidMeasurementsByIds(i,r)})}getAllIdsForAsset(e){return In(this,null,function*(){return(yield(yield this.dbPromise).get("assetIndex",e))??[]})}getAllIdsForElement(e){return In(this,null,function*(){return(yield(yield this.dbPromise).get("elementIndex",e))??[]})}getAllStoredMeasurementIds(){return In(this,null,function*(){return yield(yield this.dbPromise).getAllKeys("measurements")})}getAllStoredMeasurements(){return In(this,null,function*(){return yield(yield this.dbPromise).getAll("measurements")})}shouldRefreshByAssetId(e){return In(this,null,function*(){let i=yield this.dbPromise,r=(yield i.get("assetIndex",e))??[],o=(yield Promise.all(r.map(a=>i.get("measurements",a)))).filter(a=>!!a);return o.length===0||o.some(a=>a.expiresAt<Date.now())})}shouldRefreshByElementId(e){return In(this,null,function*(){let i=yield this.dbPromise,r=(yield i.get("elementIndex",e))??[],o=(yield Promise.all(r.map(a=>i.get("measurements",a)))).filter(a=>!!a);return o.length===0||o.some(a=>a.expiresAt<Date.now())})}remove(e){return In(this,null,function*(){yield(yield this.dbPromise).delete("measurements",e)})}appendToIndex(e,i,r,s){return In(this,null,function*(){let o=(yield e.get(i,r))??[];o.includes(s)||(o.push(s),yield e.put(i,o,r))})}getValidMeasurementsByIds(e,i){return In(this,null,function*(){return(yield Promise.all(i.map(s=>e.get("measurements",s)))).filter(s=>!!s&&s.expiresAt>Date.now()).map(s=>s.value)})}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Zde={measurementsByAssetId:new Map,measurementsByElementId:new Map,loading:new Set,observedAssetIds:new Set,observedElementIds:new Set,assetTimestamps:new Map,elementTimestamps:new Map},j2=2*60*1e3,W2=10*1e3,$8=$y({providedIn:"root"},Xy(Zde),qy((n,t=Ue(W8),e=Ue(G8))=>{function i(x){return In(this,arguments,function*(p,v={}){if(n.loading().has(p))return;let S=n.assetTimestamps().get(p),D=ef(S,j2),O=yield e.shouldRefreshByAssetId(p),N=!!n.measurementsByAssetId().get(p)?.length,T=yield e.getAllByAsset(p),j=!!T.length;if(mb({storeName:"MeasurementDataStore",objectType:"assetId",objectId:p,lastRefresh:S,storeHasData:N,cacheHasData:j,isStoreOutdated:D,isCacheOutdated:O,ttl:j2,ttr:W2,trigger:v.trigger??"unspecified"}),!(!D&&N)){if(D&&!O&&j){Yi(n,{measurementsByAssetId:new Map(n.measurementsByAssetId()).set(p,T),assetTimestamps:tf(n.assetTimestamps(),p)});return}Yi(n,{loading:nf(n.loading(),p)}),t.getByAssetId(p).subscribe({next:Z=>In(null,null,function*(){let{byAsset:G,byElement:le}=yield Zy(n.measurementsByAssetId(),n.measurementsByElementId(),K=>e.set(K),()=>Promise.resolve(),Z);Yi(n,{measurementsByAssetId:G,measurementsByElementId:le,assetTimestamps:tf(n.assetTimestamps(),p)})}),complete:()=>{Yi(n,{loading:Bu(n.loading(),p)})}})}})}function r(x){return In(this,arguments,function*(p,v={}){if(n.loading().has(p))return;let S=n.elementTimestamps().get(p),D=ef(S),O=yield e.shouldRefreshByElementId(p),N=!!n.measurementsByElementId().get(p)?.length,T=yield e.getAllByElement(p),j=!!T.length;if(mb({storeName:"MeasurementDataStore",objectType:"elementId",objectId:p,lastRefresh:S,storeHasData:N,cacheHasData:j,isStoreOutdated:D,isCacheOutdated:O,ttl:j2,ttr:W2,trigger:v.trigger??"unspecified"}),!(!D&&N)){if(D&&!O&&j){Yi(n,{measurementsByElementId:new Map(n.measurementsByElementId()).set(p,T),elementTimestamps:tf(n.elementTimestamps(),p)});return}Yi(n,{loading:nf(n.loading(),p)}),t.getAllByElementId(p).subscribe({next:Z=>In(null,null,function*(){let{byAsset:G,byElement:le}=yield Zy(n.measurementsByAssetId(),n.measurementsByElementId(),K=>e.set(K),()=>Promise.resolve(),Z);Yi(n,{measurementsByAssetId:G,measurementsByElementId:le,elementTimestamps:tf(n.elementTimestamps(),p)})}),complete:()=>{Yi(n,{loading:Bu(n.loading(),p)})}})}})}function s(p){Yi(n,{observedAssetIds:rf(n.observedAssetIds(),p)}),i(p,{trigger:"observe"})}function o(p){Yi(n,{observedAssetIds:sf(n.observedAssetIds(),p)}),h()}function a(p){Yi(n,{observedElementIds:rf(n.observedElementIds(),p)}),r(p,{trigger:"observe"})}function u(p){Yi(n,{observedElementIds:sf(n.observedElementIds(),p)}),h()}function h(){return In(this,null,function*(){let p=new Set;for(let v of n.observedAssetIds())for(let x of yield e.getAllIdsForAsset(v))p.add(x);for(let v of n.observedElementIds())for(let x of yield e.getAllIdsForElement(v))p.add(x);z1(yield e.getAllStoredMeasurements(),v=>p.has(v),v=>e.remove(v))})}return Wi(()=>{Wf(W2).subscribe(()=>{for(let p of n.observedAssetIds()){let v=n.assetTimestamps().get(p);ef(v)&&i(p,{trigger:"interval"})}for(let p of n.observedElementIds()){let v=n.elementTimestamps().get(p);ef(v)&&r(p,{trigger:"interval"})}})}),{getAllByAssetId:p=>an(()=>Yy(n.measurementsByAssetId(),p)),getAllByElementId:p=>an(()=>Yy(n.measurementsByElementId(),p)),isLoading:p=>an(()=>n.loading().has(p)),observeAsset:s,unobserveAsset:o,observeElement:a,unobserveElement:u}}));var yb=class{assetStore=Ue(of);notificationStore=Ue($1);selectedAssetId=mn(void 0);availableAssets=an(()=>this.assetStore.getAllAssets()().map(t=>t.asset));assetIds=an(()=>this.assetStore.getAllAssets()().map(t=>t.asset.id).sort(),{equal:(t,e)=>t.length===e.length&&t.every((i,r)=>i===e[r])});isAssetSelected=an(()=>!!this.selectedAssetId());notifications=an(()=>{let t=this.selectedAssetId(),e=this.notificationStore.getAllNotifications()(),i=this.notificationStore.getAllByAssetId(t??"")();return[...t?i:e].sort((s,o)=>o.dateTime.getTime()-s.dateTime.getTime())});constructor(){this.assetStore.observeAllAssets(),Wi(()=>{let t=this.assetIds();ho(()=>{this.observeSequentially(t)})})}observeSequentially(t){return In(this,null,function*(){for(let e of t)yield this.notificationStore.observeAsset(e)})}syncObservedAssets(t){return In(this,null,function*(){let e=this.notificationStore.getObservedAssetIds(),i=[...e].filter(s=>!t.includes(s)),r=t.filter(s=>!e.has(s));for(let s of i)this.notificationStore.unobserveAsset(s);for(let s of r)yield this.notificationStore.observeAsset(s)})}loadNextPage(){return In(this,null,function*(){let t=this.isAssetSelected(),e=this.selectedAssetId(),i=this.assetIds(),r=s=>!s||s.length===0?new Date:s.reduce((o,a)=>a.dateTime<o?a.dateTime:o,s[0].dateTime);if(t&&e){let s=this.notifications(),o=r(s);yield this.notificationStore.loadNotificationsForAsset(e,o)}else for(let s of i){let o=this.notifications().filter(u=>u.assetId===s),a=r(o);yield this.notificationStore.loadNotificationsForAsset(s,a)}})}};var G2=(()=>{class n{store=Ue(yb);router=Ue(to);route=Ue(eo);selectedAssetId=this.store.selectedAssetId;availableAssets=this.store.availableAssets;allAssetIds=this.store.assetIds;notifications=this.store.notifications;isAssetSelected=this.store.isAssetSelected;breadCrumbs=mn([{type:"SIMPLE_BREADCRUMB",icon:Nl,text:"Notifications"}]);ngOnInit(){let e=this.route.snapshot.paramMap.get("id")??void 0;this.store.selectedAssetId.set(e),this.router.events.subscribe(i=>{if(i instanceof Ta){let r=this.route.snapshot.paramMap.get("id")??void 0;this.store.selectedAssetId.set(r)}}),this.breadCrumbs.set([...this.breadCrumbs(),{type:"ASSET_SELECTOR_BREADCRUMB",allowAllAssets:!0,initialValue:this.availableAssets().find(i=>i.id===e)}])}changeUrlToLocation(e){this.notifySelectedAsset(e),this.router.navigateByUrl(e===Mp.id?"/notifications":`/notifications/${e}`)}notifySelectedAsset(e){return In(this,null,function*(){e===Mp.id?yield this.store.syncObservedAssets(this.allAssetIds()):yield this.store.syncObservedAssets([e])})}navigateToElement(e){this.router.navigate(["assets",e.assetId,e.affectedElementType,e.affectedElementId])}onLoadMore(){this.store.loadNextPage()}onDateRangeChanged(e){this.store.loadNextPage()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-alarm-overview"]],features:[Mo([yb])],decls:7,vars:5,consts:[["id","notification-overview-container"],[1,"text-4xl","mb-1","font-extrabold","leading-none","tracking-tight","text-gray-900","md:text-5xl","lg:text-6xl"],[1,"text-lg","mb-4","font-normal","text-gray-500","lg:text-xl"],[1,"block","relative","mb-4",3,"selectAssetEffect","crumbs","availableAssets","onAssetSelection"],[3,"notificationClickAction","loadMore","dateRangeChanged","notifications","hideAssetInfo"]],template:function(i,r){i&1&&(ge(0,"div",0)(1,"h1",1),ot(2," Notification Overview"),ye(),ge(3,"p",2),ot(4,"Notifications Regarding Bridge Health or Sensor Measurements"),ye(),ge(5,"lib-breadcrumb",3),yt("selectAssetEffect",function(o){return r.changeUrlToLocation(o.id)}),ye(),ge(6,"lib-notification-table",4),yt("notificationClickAction",function(o){return r.navigateToElement(o)})("loadMore",function(){return r.onLoadMore()})("dateRangeChanged",function(o){return r.onDateRangeChanged(o)}),ye()()),i&2&&(xe(5),Le("crumbs",r.breadCrumbs())("availableAssets",r.availableAssets())("onAssetSelection",r.selectedAssetId),xe(),Le("notifications",r.notifications())("hideAssetInfo",r.isAssetSelected()))},dependencies:[Nt,Mu,DS,wS],styles:["@media (min-width: 600px){#notification-overview-container[_ngcontent-%COMP%]{padding:min(10%,3rem)}}@media (max-width: 599px){#notification-overview-container[_ngcontent-%COMP%]{padding:2rem 1rem}}"]})}return n})();var q8=(()=>{class n{router;store=Ue(of);assetHealthInformation=this.store.getAllAssets();assetFilter=mn(SS);filteredAssets=an(()=>this.assetHealthInformation().map(e=>Mn(Ke({},e),{healthStatus:em(e.healthPercentage)})).filter(this.assetFilter()));allAssetNames=an(()=>this.assetHealthInformation().map(e=>e.asset.name));assetLocations=an(()=>this.filteredAssets().map(e=>this.assetHealthInformationToAssetMapLocation(e)));assetHealthCardData=an(()=>this.filteredAssets().map(e=>this.assetHealthCardDataFromHealthData(e)));currentLocation=mn(void 0);constructor(e){this.router=e;let i=Ue(eo);this.store.observeAllAssets(),Wi(()=>{let r=i.snapshot.queryParamMap.get("asset-id");r&&(this.navigateToLocationOfId(r),this.router.navigate([],{relativeTo:i,queryParamsHandling:"replace",replaceUrl:!0}))})}navigateToLocationOfId(e){this.currentLocation.set(this.assetLocations().find(i=>i.id===e))}assetHealthCardDataFromHealthData(e){let{id:i,name:r,type:s,description:o}=e.asset;return{id:i,name:r,type:s,description:o,healthPercentage:e.healthPercentage}}assetHealthInformationToAssetMapLocation(e){return{id:e.asset.id,lat:e.asset.location.lat,lng:e.asset.location.lng,name:e.asset.name,type:e.asset.type,description:e.asset.description,healthPercentage:e.healthPercentage,state:em(e.healthPercentage)}}navigateToDetailViewForId(e){this.router.navigate(["assets",e])}static \u0275fac=function(i){return new(i||n)(En(to))};static \u0275cmp=bt({type:n,selectors:[["lib-asset-overview"]],decls:5,vars:4,consts:[[1,"asset-map-container","h-full"],[1,"absolute","top-0","z-10","w-full","flex","justify-center","p-2"],[1,"asset-filter","relative","top-0","z-40",3,"filter","availableAssetNames"],[3,"setCurrentLocation","locations","currentLocation"],[3,"navigateToAssetOfId","accessAssetDetailViewForId","assetHealthData"]],template:function(i,r){i&1&&(ge(0,"div",0)(1,"div",1)(2,"lib-asset-filter",2),yt("filter",function(o){return r.assetFilter.set(o)}),ye()(),ge(3,"lib-asset-map",3),yt("setCurrentLocation",function(o){return r.currentLocation.set(o)}),ye(),ge(4,"lib-asset-health-card-carousel",4),yt("navigateToAssetOfId",function(o){return r.navigateToLocationOfId(o)})("accessAssetDetailViewForId",function(o){return r.navigateToDetailViewForId(o)}),ye()()),i&2&&(xe(2),Le("availableAssetNames",r.allAssetNames()),xe(),Le("locations",r.assetLocations())("currentLocation",r.currentLocation()),xe(),Le("assetHealthData",r.assetHealthCardData()))},dependencies:[Nt,t4,r4,mH],styles:[".asset-map-container[_ngcontent-%COMP%]{position:relative}.asset-filter[_ngcontent-%COMP%]{max-width:30rem;width:100%}"]})}return n})();function $2(n,t){let e=!t?.manualCleanup;e&&!t?.injector&&yv($2);let i=e?t?.injector?.get(Tl)??Ue(Tl):null,r=Kde(t?.equal),s;t?.requireSync?s=mn({kind:0},{equal:r}):s=mn({kind:1,value:t?.initialValue},{equal:r});let o,a=n.subscribe({next:u=>s.set({kind:1,value:u}),error:u=>{if(t?.rejectErrors)throw u;s.set({kind:2,error:u})},complete:()=>{o?.()}});if(t?.requireSync&&s().kind===0)throw new wt(601,!1);return o=i?.onDestroy(a.unsubscribe.bind(a)),an(()=>{let u=s();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new wt(601,!1)}},{equal:t?.equal})}function Kde(n=Object.is){return(t,e)=>t.kind===1&&e.kind===1&&n(t.value,e.value)}var vb=class{route=Ue(eo);location=Ue(bu);assetStore=Ue(of);notificationStore=Ue($1);measurementStore=Ue($8);assetId=mn(null);elementId=mn(null);detailType=mn("section");assetHealthDetail=mn(null);assetHealth=an(()=>{let t=this.assetId();return t?this.assetStore.getAssetById(t)():void 0});elementNotifications=an(()=>{let t=this.elementId();return t?this.notificationStore.getAllByElementId(t)().slice(0,3):[]});elementMeasurements=an(()=>{let t=this.elementId();return t?this.measurementStore.getAllByElementId(t)().map(e=>({timestamp:new Date(e.dateTime??Date.now()).toISOString(),value:e.value})):[]});constructor(){this.assetStore.observeAllAssets();let t=$2(this.route.paramMap.pipe(ui(r=>r.get("id"))));Wi(()=>this.assetId.set(t()??null));let e=null;Wi(()=>{let r=this.assetId();!r||r===e||(e&&(this.notificationStore.unobserveAsset(e),this.measurementStore.unobserveAsset(e)),this.notificationStore.observeAsset(r),this.measurementStore.observeAsset(r),e=r)});let i=null;Wi(()=>{let r=this.elementId();!r||r===i||(i&&(this.notificationStore.unobserveElement(i),this.measurementStore.unobserveElement(i)),this.notificationStore.observeElement(r),this.measurementStore.observeElement(r),i=r)})}showSidebar(t,e,i,r){this.detailType.set(e),this.elementId.set(t),this.assetHealthDetail.set({name:i,healthStatus:r});let s=`/assets/${this.assetId()}/${this.detailType()}/${t}`;this.location.replaceState(s)}closeSidebar(){this.assetHealthDetail.set(null),this.location.replaceState(`/assets/${this.assetId()}`)}};function Qde(n,t){if(n&1){let e=An();ge(0,"div",5)(1,"lib-asset-3d-viewer",6),yt("elementClick",function(r){mt(e);let s=Ae();return gt(s.onElementClicked(r))}),ye(),ge(2,"lib-asset-health-detail-sidebar",7),yt("closeSidebar",function(){mt(e);let r=Ae();return gt(r.closeSidebar())}),ye(),ge(3,"lib-asset-information-page",8),yt("assetInformationExpanded",function(){mt(e);let r=Ae();return gt(r.closeSidebar())}),ye()()}if(n&2){let e=Ae();xe(),Le("modelUrl",e.assetInformation().modelPath)("sensors",e.sensors())("sections",e.sections())("viewModeInput",e.store.detailType()),xe(),Le("detail",e.store.assetHealthDetail())("id",e.store.elementId())("type",e.store.detailType())("notifications",e.store.elementNotifications())("measurements",e.store.elementMeasurements()),xe(),Le("assetInformation",e.assetInformation())("collapseInputTrigger",e.assetInformationCollapseTrigger())}}var q1=(()=>{class n{route=Ue(eo);router=Ue(to);store=Ue(vb);assetStore=Ue(of);assetInformationCollapseTrigger=mn(0);allSelectableAssets=an(()=>this.assetStore.getAllAssets()().map(e=>e.asset));sensors=an(()=>(this.store.assetHealth()?.sensors??[]).map(e=>Mn(Ke({},e),{position:this.toVector3(e.position),type:"sensor",state:em(e.healthPercentage),healthPercentage:e.healthPercentage})));sections=an(()=>(this.store.assetHealth()?.sections??[]).map(e=>Mn(Ke({},e),{position:this.toVector3(e.position),size:this.toVector3(e.size),type:"section",state:em(e.healthPercentage),healthPercentage:e.healthPercentage})));assetInformation=an(()=>{let e=this.store.assetHealth();if(e)return{name:e.asset.name,healthPercentage:e.healthPercentage,healthStatus:em(e.healthPercentage),location:e.asset.locationName??"",constructionYear:e.asset.constructionYear?.toString()??"",modelPath:e.asset.modelPath,material:e.asset.material??"",length:e.asset.length?`${e.asset.length}m`:""}});breadcrumbs=an(()=>{let e=this.store.assetHealth();return e?[{text:"Asset Map",icon:m_,href:"assets",type:"SIMPLE_BREADCRUMB"},{type:"ASSET_SELECTOR_BREADCRUMB",allowAllAssets:!1,initialValue:{id:e.asset.id,name:e.asset.name}}]:[{text:"Map Overview",icon:m_,href:"assets",type:"SIMPLE_BREADCRUMB"}]});ngOnInit(){let e=this.route.snapshot.paramMap,i=e.get("id"),r=e.get("sensorId"),s=e.get("sectionId");this.store.assetId.set(i??null);let o=r??s;if(o){let a=[...this.sensors(),...this.sections()].find(u=>u.id===o);a&&this.store.showSidebar(a.id,a.type,a.label,a.state)}}onElementClicked(e){this.store.showSidebar(e.id,e.type,e.label,e.state),this.assetInformationCollapseTrigger.set(this.assetInformationCollapseTrigger()+1)}closeSidebar(){this.store.closeSidebar()}onSelectAsset(e){this.store.assetHealthDetail.set(null),this.router.navigate(["assets",e.id])}toVector3=e=>new Ne(e.x,e.y,e.z);static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["lib-asset-detail"]],features:[Mo([vb])],decls:8,vars:3,consts:[[1,"w-full","h-full","relative","overflow-hidden"],[1,"header-container"],[1,"text-4xl","mb-1","font-extrabold","leading-none","tracking-tight","text-gray-900","md:text-5xl","lg:text-6xl"],[1,"text-lg","font-normal","text-gray-500","lg:text-xl"],[3,"selectAssetEffect","crumbs","availableAssets"],["id","content"],[3,"elementClick","modelUrl","sensors","sections","viewModeInput"],[3,"closeSidebar","detail","id","type","notifications","measurements"],[3,"assetInformationExpanded","assetInformation","collapseInputTrigger"]],template:function(i,r){i&1&&(ge(0,"div",0)(1,"div",1)(2,"h1",2),ot(3," Asset Details "),ye(),ge(4,"p",3),ot(5," Detailed asset health information "),ye(),ge(6,"lib-breadcrumb",4),yt("selectAssetEffect",function(o){return r.onSelectAsset(o)}),ye()(),It(7,Qde,4,11,"div",5),ye()),i&2&&(xe(6),Le("crumbs",r.breadcrumbs())("availableAssets",r.allSelectableAssets()),xe(),Kt(r.assetInformation()?7:-1))},dependencies:[Nt,w8,s4,wS,KH,o_],styles:["#header[_ngcontent-%COMP%]{height:9rem}@media (min-width: 600px){.header-container[_ngcontent-%COMP%]{padding:min(10%,3rem) min(10%,3rem) 1rem}}@media (max-width: 599px){.header-container[_ngcontent-%COMP%]{padding:2rem 1rem 1rem}}#content[_ngcontent-%COMP%]{height:calc(100% - 10rem);overflow:hidden}"],changeDetection:0})}return n})();var X8=[{path:"",redirectTo:"/assets",pathMatch:"full"},{path:"",component:S8,children:[{path:"assets",component:q8},{path:"assets/:id",component:q1},{path:"assets/:id/sensor/:sensorId",component:q1},{path:"assets/:id/section/:sectionId",component:q1},{path:"notifications",component:G2},{path:"notifications/:id",component:G2},{path:"**",redirectTo:"/assets"}]}];var ki=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(ki||{}),Bc="*";function Y8(n,t=null){return{type:ki.Sequence,steps:n,options:t}}function q2(n){return{type:ki.Style,styles:n,offset:null}}var Od=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Ky=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,i=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){let t=this.players.reduce((e,i)=>e===null||i.totalTime>e.totalTime?i:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},_b="!";function Z8(n){return new wt(3e3,!1)}function Jde(){return new wt(3100,!1)}function ehe(){return new wt(3101,!1)}function the(n){return new wt(3001,!1)}function nhe(n){return new wt(3003,!1)}function ihe(n){return new wt(3004,!1)}function Q8(n,t){return new wt(3005,!1)}function J8(){return new wt(3006,!1)}function e9(){return new wt(3007,!1)}function t9(n,t){return new wt(3008,!1)}function n9(n){return new wt(3002,!1)}function i9(n,t,e,i,r){return new wt(3010,!1)}function r9(){return new wt(3011,!1)}function s9(){return new wt(3012,!1)}function o9(){return new wt(3200,!1)}function a9(){return new wt(3202,!1)}function l9(){return new wt(3013,!1)}function c9(n){return new wt(3014,!1)}function u9(n){return new wt(3015,!1)}function d9(n){return new wt(3016,!1)}function h9(n,t){return new wt(3404,!1)}function rhe(n){return new wt(3502,!1)}function f9(n){return new wt(3503,!1)}function p9(){return new wt(3300,!1)}function m9(n){return new wt(3504,!1)}function g9(n){return new wt(3301,!1)}function y9(n,t){return new wt(3302,!1)}function v9(n){return new wt(3303,!1)}function _9(n,t){return new wt(3400,!1)}function b9(n){return new wt(3401,!1)}function x9(n){return new wt(3402,!1)}function w9(n,t){return new wt(3505,!1)}function Fd(n){switch(n.length){case 0:return new Od;case 1:return n[0];default:return new Ky(n)}}function K2(n,t,e=new Map,i=new Map){let r=[],s=[],o=-1,a=null;if(t.forEach(u=>{let h=u.get("offset"),p=h==o,v=p&&a||new Map;u.forEach((x,S)=>{let D=S,O=x;if(S!=="offset")switch(D=n.normalizePropertyName(D,r),O){case _b:O=e.get(S);break;case Bc:O=i.get(S);break;default:O=n.normalizeStyleValue(S,D,O,r);break}v.set(D,O)}),p||s.push(v),a=v,o=h}),r.length)throw rhe(r);return s}function X1(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&X2(e,"start",n)));break;case"done":n.onDone(()=>i(e&&X2(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&X2(e,"destroy",n)));break}}function X2(n,t,e){let i=e.totalTime,r=!!e.disabled,s=Y1(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,i??n.totalTime,r),o=n._data;return o!=null&&(s._data=o),s}function Y1(n,t,e,i,r="",s=0,o){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Na(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function Q2(n){let t=n.indexOf(":"),e=n.substring(1,t),i=n.slice(t+1);return[e,i]}var she=typeof document>"u"?null:document.documentElement;function Z1(n){let t=n.parentNode||n.host||null;return t===she?null:t}function ohe(n){return n.substring(1,6)=="ebkit"}var nm=null,K8=!1;function C9(n){nm||(nm=ahe()||{},K8=nm.style?"WebkitAppearance"in nm.style:!1);let t=!0;return nm.style&&!ohe(n)&&(t=n in nm.style,!t&&K8&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in nm.style)),t}function ahe(){return typeof document<"u"?document.body:null}function J2(n,t){for(;t;){if(t===n)return!0;t=Z1(t)}return!1}function eL(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let i=n.querySelector(t);return i?[i]:[]}var lhe=1e3,tL="{{",che="}}",nL="ng-enter",K1="ng-leave",bb="ng-trigger",xb=".ng-trigger",iL="ng-animating",Q1=".ng-animating";function Vu(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Y2(parseFloat(t[1]),t[2])}function Y2(n,t){switch(t){case"s":return n*lhe;default:return n}}function wb(n,t,e){return n.hasOwnProperty("duration")?n:uhe(n,t,e)}function uhe(n,t,e){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,o="";if(typeof n=="string"){let a=n.match(i);if(a===null)return t.push(Z8(n)),{duration:0,delay:0,easing:""};r=Y2(parseFloat(a[1]),a[2]);let u=a[3];u!=null&&(s=Y2(parseFloat(u),a[4]));let h=a[5];h&&(o=h)}else r=n;if(!e){let a=!1,u=t.length;r<0&&(t.push(Jde()),a=!0),s<0&&(t.push(ehe()),a=!0),a&&t.splice(u,0,Z8(n))}return{duration:r,delay:s,easing:o}}function S9(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function Vc(n,t,e){t.forEach((i,r)=>{let s=J1(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i})}function af(n,t){t.forEach((e,i)=>{let r=J1(i);n.style[r]=""})}function Qy(n){return Array.isArray(n)?n.length==1?n[0]:Y8(n):n}function M9(n,t,e){let i=t.params||{},r=rL(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(the(s))})}var Z2=new RegExp(`${tL}\\s*(.+?)\\s*${che}`,"g");function rL(n){let t=[];if(typeof n=="string"){let e;for(;e=Z2.exec(n);)t.push(e[1]);Z2.lastIndex=0}return t}function Jy(n,t,e){let i=`${n}`,r=i.replace(Z2,(s,o)=>{let a=t[o];return a==null&&(e.push(nhe(o)),a=""),a.toString()});return r==i?n:r}var dhe=/-+([a-z0-9])/g;function J1(n){return n.replace(dhe,(...t)=>t[1].toUpperCase())}function E9(n,t){return n===0||t===0}function T9(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(a=>o.set(a,eE(n,a)))}}return t}function Oa(n,t,e){switch(t.type){case ki.Trigger:return n.visitTrigger(t,e);case ki.State:return n.visitState(t,e);case ki.Transition:return n.visitTransition(t,e);case ki.Sequence:return n.visitSequence(t,e);case ki.Group:return n.visitGroup(t,e);case ki.Animate:return n.visitAnimate(t,e);case ki.Keyframes:return n.visitKeyframes(t,e);case ki.Style:return n.visitStyle(t,e);case ki.Reference:return n.visitReference(t,e);case ki.AnimateChild:return n.visitAnimateChild(t,e);case ki.AnimateRef:return n.visitAnimateRef(t,e);case ki.Query:return n.visitQuery(t,e);case ki.Stagger:return n.visitStagger(t,e);default:throw ihe(t.type)}}function eE(n,t){return window.getComputedStyle(n)[t]}var xL=(()=>{class n{validateStyleProperty(e){return C9(e)}containsElement(e,i){return J2(e,i)}getParentElement(e){return Z1(e)}query(e,i,r){return eL(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,o,a=[],u){return new Od(r,s)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),rm=class{static NOOP=new xL},sm=class{};var hhe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),sE=class extends sm{normalizePropertyName(t,e){return J1(t)}normalizeStyleValue(t,e,i,r){let s="",o=i.toString().trim();if(hhe.has(e)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(Q8(t,i))}return o+s}};var oE="*";function fhe(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>phe(i,e,t)):e.push(n),e}function phe(n,t,e){if(n[0]==":"){let u=mhe(n,e);if(typeof u=="function"){t.push(u);return}n=u}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push(u9(n)),t;let r=i[1],s=i[2],o=i[3];t.push(A9(r,o));let a=r==oE&&o==oE;s[0]=="<"&&!a&&t.push(A9(o,r))}function mhe(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(d9(n)),"* => *"}}var tE=new Set(["true","1"]),nE=new Set(["false","0"]);function A9(n,t){let e=tE.has(n)||nE.has(n),i=tE.has(t)||nE.has(t);return(r,s)=>{let o=n==oE||n==r,a=t==oE||t==s;return!o&&e&&typeof r=="boolean"&&(o=r?tE.has(n):nE.has(n)),!a&&i&&typeof s=="boolean"&&(a=s?tE.has(t):nE.has(t)),o&&a}}var B9=":self",ghe=new RegExp(`s*${B9}s*,?`,"g");function V9(n,t,e,i){return new uL(n).build(t,e,i)}var D9="",uL=class{_driver;constructor(t){this._driver=t}build(t,e,i){let r=new dL(e);return this._resetContextStyleTimingState(r),Oa(this,Qy(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector=D9,t.collectedStyles=new Map,t.collectedStyles.set(D9,new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0,s=[],o=[];return t.name.charAt(0)=="@"&&e.errors.push(J8()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==ki.State){let u=a,h=u.name;h.toString().split(/\s*,\s*/).forEach(p=>{u.name=p,s.push(this.visitState(u,e))}),u.name=h}else if(a.type==ki.Transition){let u=this.visitTransition(a,e);i+=u.queryCount,r+=u.depCount,o.push(u)}else e.errors.push(e9())}),{type:ki.Trigger,name:t.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(t,e){let i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){let s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(u=>{rL(u).forEach(h=>{o.hasOwnProperty(h)||s.add(h)})})}),s.size&&e.errors.push(t9(t.name,[...s.values()]))}return{type:ki.State,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let i=Oa(this,Qy(t.animation),e),r=fhe(t.expr,e.errors);return{type:ki.Transition,matchers:r,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:im(t.options)}}visitSequence(t,e){return{type:ki.Sequence,steps:t.steps.map(i=>Oa(this,i,e)),options:im(t.options)}}visitGroup(t,e){let i=e.currentTime,r=0,s=t.steps.map(o=>{e.currentTime=i;let a=Oa(this,o,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:ki.Group,steps:s,options:im(t.options)}}visitAnimate(t,e){let i=bhe(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:q2({});if(s.type==ki.Keyframes)r=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;let h={};i.easing&&(h.easing=i.easing),o=q2(h)}e.currentTime+=i.duration+i.delay;let u=this.visitStyle(o,e);u.isEmptyStep=a,r=u}return e.currentAnimateTimings=null,{type:ki.Animate,timings:i,style:r,options:null}}visitStyle(t,e){let i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){let i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)typeof a=="string"?a===Bc?i.push(a):e.errors.push(n9(a)):i.push(new Map(Object.entries(a)));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let u of a.values())if(u.toString().indexOf(tL)>=0){s=!0;break}}}),{type:ki.Style,styles:i,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){let i=e.currentAnimateTimings,r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,u)=>{let h=e.collectedStyles.get(e.currentQuerySelector),p=h.get(u),v=!0;p&&(s!=r&&s>=p.startTime&&r<=p.endTime&&(e.errors.push(i9(u,p.startTime,p.endTime,s,r)),v=!1),s=p.startTime),v&&h.set(u,{startTime:s,endTime:r}),e.options&&M9(a,e.options,e.errors)})})}visitKeyframes(t,e){let i={type:ki.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(r9()),i;let r=1,s=0,o=[],a=!1,u=!1,h=0,p=t.steps.map(T=>{let j=this._makeStyleAst(T,e),Z=j.offset!=null?j.offset:_he(j.styles),G=0;return Z!=null&&(s++,G=j.offset=Z),u=u||G<0||G>1,a=a||G<h,h=G,o.push(G),j});u&&e.errors.push(s9()),a&&e.errors.push(o9());let v=t.steps.length,x=0;s>0&&s<v?e.errors.push(a9()):s==0&&(x=r/(v-1));let S=v-1,D=e.currentTime,O=e.currentAnimateTimings,N=O.duration;return p.forEach((T,j)=>{let Z=x>0?j==S?1:x*j:o[j],G=Z*N;e.currentTime=D+O.delay+G,O.duration=G,this._validateStyleAst(T,e),T.offset=Z,i.styles.push(T)}),i}visitReference(t,e){return{type:ki.Reference,animation:Oa(this,Qy(t.animation),e),options:im(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:ki.AnimateChild,options:im(t.options)}}visitAnimateRef(t,e){return{type:ki.AnimateRef,animation:this.visitReference(t.animation,e),options:im(t.options)}}visitQuery(t,e){let i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;let[s,o]=yhe(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,Na(e.collectedStyles,e.currentQuerySelector,new Map);let a=Oa(this,Qy(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:ki.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:im(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(l9());let i=t.timings==="full"?{duration:0,delay:0,easing:"full"}:wb(t.timings,e.errors,!0);return{type:ki.Stagger,animation:Oa(this,Qy(t.animation),e),timings:i,options:null}}};function yhe(n){let t=!!n.split(/\s*,\s*/).find(e=>e==B9);return t&&(n=n.replace(ghe,"")),n=n.replace(/@\*/g,xb).replace(/@\w+/g,e=>xb+"-"+e.slice(1)).replace(/:animating/g,Q1),[n,t]}function vhe(n){return n?Ke({},n):null}var dL=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function _he(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function bhe(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=wb(n,t).duration;return sL(s,0,"")}let e=n;if(e.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=sL(0,0,"");return s.dynamic=!0,s.strValue=e,s}let r=wb(e,t);return sL(r.duration,r.delay,r.easing)}function im(n){return n?(n=Ke({},n),n.params&&(n.params=vhe(n.params))):n={},n}function sL(n,t,e){return{duration:n,delay:t,easing:e}}function wL(n,t,e,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}var Sb=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},xhe=1,whe=":enter",Che=new RegExp(whe,"g"),She=":leave",Mhe=new RegExp(She,"g");function U9(n,t,e,i,r,s=new Map,o=new Map,a,u,h=[]){return new hL().buildKeyframes(n,t,e,i,r,s,o,a,u,h)}var hL=class{buildKeyframes(t,e,i,r,s,o,a,u,h,p=[]){h=h||new Sb;let v=new fL(t,e,h,r,s,p,[]);v.options=u;let x=u.delay?Vu(u.delay):0;v.currentTimeline.delayNextStep(x),v.currentTimeline.setStyles([o],null,v.errors,u),Oa(this,i,v);let S=v.timelines.filter(D=>D.containsAnimation());if(S.length&&a.size){let D;for(let O=S.length-1;O>=0;O--){let N=S[O];if(N.element===e){D=N;break}}D&&!D.allowOnlyTimelineStyles()&&D.setStyles([a],null,v.errors,u)}return S.length?S.map(D=>D.buildKeyframes()):[wL(e,[],[],[],0,x,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let i=e.subInstructions.get(e.element);if(i){let r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){let i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(let r of t){let s=r?.delay;if(s){let o=typeof s=="number"?s:Vu(Jy(s,r?.params??{},e.errors));i.delayNextStep(o)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime,o=i.duration!=null?Vu(i.duration):null,a=i.delay!=null?Vu(i.delay):null;return o!==0&&t.forEach(u=>{let h=e.appendInstructionToTimeline(u,o,a);s=Math.max(s,h.duration+h.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Oa(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let i=e.subContextCount,r=e,s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==ki.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=aE);let o=Vu(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Oa(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let i=[],r=e.currentTimeline.currentTime,s=t.options&&t.options.delay?Vu(t.options.delay):0;t.steps.forEach(o=>{let a=e.createSubContext(t.options);s&&a.delayNextStep(s),Oa(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let i=t.strValue,r=e.params?Jy(i,e.params,e.errors):i;return wb(r,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());let s=t.style;s.type==ki.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(u=>{let h=u.offset||0;a.forwardTime(h*s),a.setStyles(u.styles,u.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){let i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Vu(r.delay):0;s&&(e.previousNode.type===ki.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=aE);let o=i,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let u=null;a.forEach((h,p)=>{e.currentQueryIndex=p;let v=e.createSubContext(t.options,h);s&&v.delayNextStep(s),h===e.element&&(u=v.currentTimeline),Oa(this,t.animation,v),v.currentTimeline.applyStylesToKeyframe();let x=v.currentTimeline.currentTime;o=Math.max(o,x)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let i=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1),u=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=a-u;break;case"full":u=i.currentStaggerTime;break}let p=e.currentTimeline;u&&p.delayNextStep(u);let v=p.currentTime;Oa(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-v+(r.startTime-i.currentTimeline.startTime)}},aE={},fL=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=aE;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,i,r,s,o,a,u){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=u||new lE(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let i=t,r=this.options;i.duration!=null&&(r.duration=Vu(i.duration)),i.delay!=null&&(r.delay=Vu(i.delay));let s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=Jy(s[a],o,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){let r=e||this.element,s=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=aE,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){let r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new pL(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=t.replace(Che,"."+this._enterClassName),t=t.replace(Mhe,"."+this._leaveClassName);let u=i!=1,h=this._driver.query(this.element,t,u);i!==0&&(h=i<0?h.slice(h.length+i,h.length):h.slice(0,i)),a.push(...h)}return!s&&a.length==0&&o.push(c9(e)),a}},lE=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=xhe,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Bc),this._currentKeyframe.set(e,Bc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);let s=r&&r.params||{},o=Ehe(t,this._globalTimelineStyles);for(let[a,u]of o){let h=Jy(u,s,i);this._pendingStyles.set(a,h),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Bc),this._updateStyle(a,h)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{let r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,u)=>{let h=new Map([...this._backFill,...a]);h.forEach((p,v)=>{p===_b?t.add(v):p===Bc&&e.add(v)}),i||h.set("offset",u/this.duration),r.push(h)});let s=[...t.values()],o=[...e.values()];if(i){let a=r[0],u=new Map(a);a.set("offset",0),u.set("offset",1),r=[a,u]}return wL(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}},pL=class extends lE{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,i,r,s,o,a=!1){super(t,e,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){let s=[],o=i+e,a=e/o,u=new Map(t[0]);u.set("offset",0),s.push(u);let h=new Map(t[0]);h.set("offset",I9(a)),s.push(h);let p=t.length-1;for(let v=1;v<=p;v++){let x=new Map(t[v]),S=x.get("offset"),D=e+S*i;x.set("offset",I9(D/o)),s.push(x)}i=o,e=0,r="",t=s}return wL(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}};function I9(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function Ehe(n,t){let e=new Map,i;return n.forEach(r=>{if(r==="*"){i??=t.keys();for(let s of i)e.set(s,Bc)}else for(let[s,o]of r)e.set(s,o)}),e}function P9(n,t,e,i,r,s,o,a,u,h,p,v,x){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:u,preStyleProps:h,postStyleProps:p,totalTime:v,errors:x}}var oL={},cE=class{_triggerName;ast;_stateStyles;constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return The(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return t!==void 0&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,o,a,u,h,p){let v=[],x=this.ast.options&&this.ast.options.params||oL,S=a&&a.params||oL,D=this.buildStyles(i,S,v),O=u&&u.params||oL,N=this.buildStyles(r,O,v),T=new Set,j=new Map,Z=new Map,G=r==="void",le={params:z9(O,x),delay:this.ast.options?.delay},K=p?[]:U9(t,e,this.ast.animation,s,o,D,N,le,h,v),oe=0;return K.forEach(ue=>{oe=Math.max(ue.duration+ue.delay,oe)}),v.length?P9(e,this._triggerName,i,r,G,D,N,[],[],j,Z,oe,v):(K.forEach(ue=>{let te=ue.element,V=Na(j,te,new Set);ue.preStyleProps.forEach(we=>V.add(we));let se=Na(Z,te,new Set);ue.postStyleProps.forEach(we=>se.add(we)),te!==e&&T.add(te)}),P9(e,this._triggerName,i,r,G,D,N,K,[...T.values()],j,Z,oe))}};function The(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}function z9(n,t){let e=Ke({},t);return Object.entries(n).forEach(([i,r])=>{r!=null&&(e[i]=r)}),e}var mL=class{styles;defaultParams;normalizer;constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){let i=new Map,r=z9(t,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=Jy(o,r,e));let u=this.normalizer.normalizePropertyName(a,e);o=this.normalizer.normalizeStyleValue(a,u,o,e),i.set(a,o)})}),i}};function Ahe(n,t,e){return new gL(n,t,e)}var gL=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,e.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new mL(r.style,s,i))}),R9(this.states,"true","1"),R9(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new cE(t,r,this.states))}),this.fallbackTransition=Dhe(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(o=>o.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}};function Dhe(n,t,e){let i=[(o,a)=>!0],r={type:ki.Sequence,steps:[],options:null},s={type:ki.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new cE(n,s,t)}function R9(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var Ihe=new Sb,yL=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i}register(t,e){let i=[],r=[],s=V9(this._driver,e,i,r);if(i.length)throw f9(i);this._animations.set(t,s)}_buildPlayer(t,e,i){let r=t.element,s=K2(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){let r=[],s=this._animations.get(t),o,a=new Map;if(s?(o=U9(this._driver,e,s,nL,K1,new Map,new Map,i,Ihe,r),o.forEach(p=>{let v=Na(a,p.element,new Map);p.postStyleProps.forEach(x=>v.set(x,null))})):(r.push(p9()),o=[]),r.length)throw m9(r);a.forEach((p,v)=>{p.forEach((x,S)=>{p.set(S,this._driver.computeStyle(v,S,Bc))})});let u=o.map(p=>{let v=a.get(p.element);return this._buildPlayer(p,new Map,v)}),h=Fd(u);return this._playersById.set(t,h),h.onDestroy(()=>this.destroy(t)),this.players.push(h),h}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw g9(t);return e}listen(t,e,i,r){let s=Y1(e,"","","");return X1(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if(i=="register"){this.register(t,r[0]);return}if(i=="create"){let o=r[0]||{};this.create(t,e,o);return}let s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t);break}}},k9="ng-animate-queued",Phe=".ng-animate-queued",aL="ng-animate-disabled",Rhe=".ng-animate-disabled",khe="ng-star-inserted",Lhe=".ng-star-inserted",Nhe=[],H9={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ohe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Uc="__ng_removed",Mb=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let i=t&&t.hasOwnProperty("value"),r=i?t.value:t;if(this.value=Bhe(r),i){let s=t,{value:o}=s,a=vO(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let i=this.options.params;Object.keys(e).forEach(r=>{i[r]==null&&(i[r]=e[r])})}}},Cb="void",lL=new Mb(Cb),vL=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this._hostClassName="ng-tns-"+t,Wl(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw y9(i,e);if(i==null||i.length==0)throw v9(e);if(!Vhe(i))throw _9(i,e);let s=Na(this._elementListeners,t,[]),o={name:e,phase:i,callback:r};s.push(o);let a=Na(this._engine.statesByElement,t,new Map);return a.has(e)||(Wl(t,bb),Wl(t,bb+"-"+e),a.set(e,lL)),()=>{this._engine.afterFlush(()=>{let u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw b9(t);return e}trigger(t,e,i,r=!0){let s=this._getTrigger(e),o=new Eb(this.id,e,t),a=this._engine.statesByElement.get(t);a||(Wl(t,bb),Wl(t,bb+"-"+e),this._engine.statesByElement.set(t,a=new Map));let u=a.get(e),h=new Mb(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&u&&h.absorbOptions(u.options),a.set(e,h),u||(u=lL),!(h.value===Cb)&&u.value===h.value){if(!Hhe(u.params,h.params)){let O=[],N=s.matchStyles(u.value,u.params,O),T=s.matchStyles(h.value,h.params,O);O.length?this._engine.reportError(O):this._engine.afterFlush(()=>{af(t,N),Vc(t,T)})}return}let x=Na(this._engine.playersByElement,t,[]);x.forEach(O=>{O.namespaceId==this.id&&O.triggerName==e&&O.queued&&O.destroy()});let S=s.matchTransition(u.value,h.value,t,h.params),D=!1;if(!S){if(!r)return;S=s.fallbackTransition,D=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:S,fromState:u,toState:h,player:o,isFallbackTransition:D}),D||(Wl(t,k9),o.onStart(()=>{e0(t,k9)})),o.onDone(()=>{let O=this.players.indexOf(o);O>=0&&this.players.splice(O,1);let N=this._engine.playersByElement.get(t);if(N){let T=N.indexOf(o);T>=0&&N.splice(T,1)}}),this.players.push(o),x.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let i=this._engine.driver.query(t,xb,!0);i.forEach(r=>{if(r[Uc])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){let s=this._engine.statesByElement.get(t),o=new Map;if(s){let a=[];if(s.forEach((u,h)=>{if(o.set(h,u.value),this._triggers.has(h)){let p=this.trigger(t,h,Cb,r);p&&a.push(p)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),i&&Fd(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){let r=new Set;e.forEach(s=>{let o=s.name;if(r.has(o))return;r.add(o);let u=this._triggers.get(o).fallbackTransition,h=i.get(o)||lL,p=new Mb(Cb),v=new Eb(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:u,fromState:h,toState:p,player:v,isFallbackTransition:!0})})}}removeNode(t,e){let i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{let s=t[Uc];(!s||s===H9)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Wl(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){let u=Y1(s,i.triggerName,i.fromState.value,i.toState.value);u._data=t,X1(i.player,a.phase,u,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{let s=i.transition.ast.depCount,o=r.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},_L=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){let i=new vL(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(e);for(;a;){let u=r.get(a);if(u){let h=i.indexOf(u);i.splice(h+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,i=this.statesByElement.get(t);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}}return e}trigger(t,e,i,r){if(iE(e)){let s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!iE(e))return;let s=e[Uc];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){let o=this._fetchNamespace(t);o&&o.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Wl(t,aL)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),e0(t,aL))}removeNode(t,e,i){if(iE(e)){let r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);let s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[Uc]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return iE(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,xb,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,Q1,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Fd(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[Uc];if(e&&e.setForRemoval){if(t[Uc]=H9,e.namespaceId){this.destroyInnerAnimations(t);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(aL)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Rhe,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Wl(r,khe)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?Fd(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw x9(t)}_flushAnimations(t,e){let i=new Sb,r=[],s=new Map,o=[],a=new Map,u=new Map,h=new Map,p=new Set;this.disabledNodes.forEach(de=>{p.add(de);let Re=this.driver.query(de,Phe,!0);for(let me=0;me<Re.length;me++)p.add(Re[me])});let v=this.bodyNode,x=Array.from(this.statesByElement.keys()),S=O9(x,this.collectedEnterElements),D=new Map,O=0;S.forEach((de,Re)=>{let me=nL+O++;D.set(Re,me),de.forEach($e=>Wl($e,me))});let N=[],T=new Set,j=new Set;for(let de=0;de<this.collectedLeaveElements.length;de++){let Re=this.collectedLeaveElements[de],me=Re[Uc];me&&me.setForRemoval&&(N.push(Re),T.add(Re),me.hasAnimation?this.driver.query(Re,Lhe,!0).forEach($e=>T.add($e)):j.add(Re))}let Z=new Map,G=O9(x,Array.from(T));G.forEach((de,Re)=>{let me=K1+O++;Z.set(Re,me),de.forEach($e=>Wl($e,me))}),t.push(()=>{S.forEach((de,Re)=>{let me=D.get(Re);de.forEach($e=>e0($e,me))}),G.forEach((de,Re)=>{let me=Z.get(Re);de.forEach($e=>e0($e,me))}),N.forEach(de=>{this.processLeaveNode(de)})});let le=[],K=[];for(let de=this._namespaceList.length-1;de>=0;de--)this._namespaceList[de].drainQueuedTransitions(e).forEach(me=>{let $e=me.player,tt=me.element;if(le.push($e),this.collectedEnterElements.length){let rt=tt[Uc];if(rt&&rt.setForMove){if(rt.previousTriggersValues&&rt.previousTriggersValues.has(me.triggerName)){let zt=rt.previousTriggersValues.get(me.triggerName),Sn=this.statesByElement.get(me.element);if(Sn&&Sn.has(me.triggerName)){let dn=Sn.get(me.triggerName);dn.value=zt,Sn.set(me.triggerName,dn)}}$e.destroy();return}}let xt=!v||!this.driver.containsElement(v,tt),Tt=Z.get(tt),ut=D.get(tt),Ie=this._buildInstruction(me,i,ut,Tt,xt);if(Ie.errors&&Ie.errors.length){K.push(Ie);return}if(xt){$e.onStart(()=>af(tt,Ie.fromStyles)),$e.onDestroy(()=>Vc(tt,Ie.toStyles)),r.push($e);return}if(me.isFallbackTransition){$e.onStart(()=>af(tt,Ie.fromStyles)),$e.onDestroy(()=>Vc(tt,Ie.toStyles)),r.push($e);return}let at=[];Ie.timelines.forEach(rt=>{rt.stretchStartingKeyframe=!0,this.disabledNodes.has(rt.element)||at.push(rt)}),Ie.timelines=at,i.append(tt,Ie.timelines);let Rt={instruction:Ie,player:$e,element:tt};o.push(Rt),Ie.queriedElements.forEach(rt=>Na(a,rt,[]).push($e)),Ie.preStyleProps.forEach((rt,zt)=>{if(rt.size){let Sn=u.get(zt);Sn||u.set(zt,Sn=new Set),rt.forEach((dn,Mt)=>Sn.add(Mt))}}),Ie.postStyleProps.forEach((rt,zt)=>{let Sn=h.get(zt);Sn||h.set(zt,Sn=new Set),rt.forEach((dn,Mt)=>Sn.add(Mt))})});if(K.length){let de=[];K.forEach(Re=>{de.push(w9(Re.triggerName,Re.errors))}),le.forEach(Re=>Re.destroy()),this.reportError(de)}let oe=new Map,ue=new Map;o.forEach(de=>{let Re=de.element;i.has(Re)&&(ue.set(Re,Re),this._beforeAnimationBuild(de.player.namespaceId,de.instruction,oe))}),r.forEach(de=>{let Re=de.element;this._getPreviousPlayers(Re,!1,de.namespaceId,de.triggerName,null).forEach($e=>{Na(oe,Re,[]).push($e),$e.destroy()})});let te=N.filter(de=>F9(de,u,h)),V=new Map;N9(V,this.driver,j,h,Bc).forEach(de=>{F9(de,u,h)&&te.push(de)});let we=new Map;S.forEach((de,Re)=>{N9(we,this.driver,new Set(de),u,_b)}),te.forEach(de=>{let Re=V.get(de),me=we.get(de);V.set(de,new Map([...Re?.entries()??[],...me?.entries()??[]]))});let he=[],je=[],ze={};o.forEach(de=>{let{element:Re,player:me,instruction:$e}=de;if(i.has(Re)){if(p.has(Re)){me.onDestroy(()=>Vc(Re,$e.toStyles)),me.disabled=!0,me.overrideTotalTime($e.totalTime),r.push(me);return}let tt=ze;if(ue.size>1){let Tt=Re,ut=[];for(;Tt=Tt.parentNode;){let Ie=ue.get(Tt);if(Ie){tt=Ie;break}ut.push(Tt)}ut.forEach(Ie=>ue.set(Ie,tt))}let xt=this._buildAnimation(me.namespaceId,$e,oe,s,we,V);if(me.setRealPlayer(xt),tt===ze)he.push(me);else{let Tt=this.playersByElement.get(tt);Tt&&Tt.length&&(me.parentPlayer=Fd(Tt)),r.push(me)}}else af(Re,$e.fromStyles),me.onDestroy(()=>Vc(Re,$e.toStyles)),je.push(me),p.has(Re)&&r.push(me)}),je.forEach(de=>{let Re=s.get(de.element);if(Re&&Re.length){let me=Fd(Re);de.setRealPlayer(me)}}),r.forEach(de=>{de.parentPlayer?de.syncPlayerEvents(de.parentPlayer):de.destroy()});for(let de=0;de<N.length;de++){let Re=N[de],me=Re[Uc];if(e0(Re,K1),me&&me.hasAnimation)continue;let $e=[];if(a.size){let xt=a.get(Re);xt&&xt.length&&$e.push(...xt);let Tt=this.driver.query(Re,Q1,!0);for(let ut=0;ut<Tt.length;ut++){let Ie=a.get(Tt[ut]);Ie&&Ie.length&&$e.push(...Ie)}}let tt=$e.filter(xt=>!xt.destroyed);tt.length?Uhe(this,Re,tt):this.processLeaveNode(Re)}return N.length=0,he.forEach(de=>{this.players.push(de),de.onDone(()=>{de.destroy();let Re=this.players.indexOf(de);this.players.splice(Re,1)}),de.play()}),he}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let o=[];if(e){let a=this.playersByQueriedElement.get(t);a&&(o=a)}else{let a=this.playersByElement.get(t);if(a){let u=!s||s==Cb;a.forEach(h=>{h.queued||!u&&h.triggerName!=r||o.push(h)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,e,i){let r=e.triggerName,s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:r;for(let u of e.timelines){let h=u.element,p=h!==s,v=Na(i,h,[]);this._getPreviousPlayers(h,p,o,a,e.toState).forEach(S=>{let D=S.getRealPlayer();D.beforeDestroy&&D.beforeDestroy(),S.destroy(),v.push(S)})}af(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,o){let a=e.triggerName,u=e.element,h=[],p=new Set,v=new Set,x=e.timelines.map(D=>{let O=D.element;p.add(O);let N=O[Uc];if(N&&N.removedBeforeQueried)return new Od(D.duration,D.delay);let T=O!==u,j=zhe((i.get(O)||Nhe).map(oe=>oe.getRealPlayer())).filter(oe=>{let ue=oe;return ue.element?ue.element===O:!1}),Z=s.get(O),G=o.get(O),le=K2(this._normalizer,D.keyframes,Z,G),K=this._buildPlayer(D,le,j);if(D.subTimeline&&r&&v.add(O),T){let oe=new Eb(t,a,O);oe.setRealPlayer(K),h.push(oe)}return K});h.forEach(D=>{Na(this.playersByQueriedElement,D.element,[]).push(D),D.onDone(()=>Fhe(this.playersByQueriedElement,D.element,D))}),p.forEach(D=>Wl(D,iL));let S=Fd(x);return S.onDestroy(()=>{p.forEach(D=>e0(D,iL)),Vc(u,e.toStyles)}),v.forEach(D=>{Na(r,D,[]).push(S)}),S}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Od(t.duration,t.delay)}},Eb=class{namespaceId;triggerName;element;_player=new Od;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>X1(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Na(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function Fhe(n,t,e){let i=n.get(t);if(i){if(i.length){let r=i.indexOf(e);i.splice(r,1)}i.length==0&&n.delete(t)}return i}function Bhe(n){return n??null}function iE(n){return n&&n.nodeType===1}function Vhe(n){return n=="start"||n=="done"}function L9(n,t){let e=n.style.display;return n.style.display=t??"none",e}function N9(n,t,e,i,r){let s=[];e.forEach(u=>s.push(L9(u)));let o=[];i.forEach((u,h)=>{let p=new Map;u.forEach(v=>{let x=t.computeStyle(h,v,r);p.set(v,x),(!x||x.length==0)&&(h[Uc]=Ohe,o.push(h))}),n.set(h,p)});let a=0;return e.forEach(u=>L9(u,s[a++])),o}function O9(n,t){let e=new Map;if(n.forEach(a=>e.set(a,[])),t.length==0)return e;let i=1,r=new Set(t),s=new Map;function o(a){if(!a)return i;let u=s.get(a);if(u)return u;let h=a.parentNode;return e.has(h)?u=h:r.has(h)?u=i:u=o(h),s.set(a,u),u}return t.forEach(a=>{let u=o(a);u!==i&&e.get(u).push(a)}),e}function Wl(n,t){n.classList?.add(t)}function e0(n,t){n.classList?.remove(t)}function Uhe(n,t,e){Fd(e).onDone(()=>n.processLeaveNode(t))}function zhe(n){let t=[];return j9(n,t),t}function j9(n,t){for(let e=0;e<n.length;e++){let i=n[e];i instanceof Ky?j9(i.players,t):t.push(i)}}function Hhe(n,t){let e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){let s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}function F9(n,t,e){let i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}var t0=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,i){this._driver=e,this._normalizer=i,this._transitionEngine=new _L(t.body,e,i),this._timelineEngine=new yL(t.body,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){let o=t+"-"+r,a=this._triggerCache[o];if(!a){let u=[],h=[],p=V9(this._driver,s,u,h);if(u.length)throw h9(r,u);a=Ahe(r,p,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if(i.charAt(0)=="@"){let[s,o]=Q2(i),a=r;this._timelineEngine.command(s,e,o,a)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if(i.charAt(0)=="@"){let[o,a]=Q2(i);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function jhe(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=cL(t[0]),t.length>1&&(i=cL(t[t.length-1]))):t instanceof Map&&(e=cL(t)),e||i?new Whe(n,e,i):null}var Whe=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Vc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Vc(this._element,this._initialStyles),this._endStyles&&(Vc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(af(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(af(this._element,this._endStyles),this._endStyles=null),Vc(this._element,this._initialStyles),this._state=3)}}return n})();function cL(n){let t=null;return n.forEach((e,i)=>{Ghe(i)&&(t=t||new Map,t.set(i,e))}),t}function Ghe(n){return n==="display"||n==="position"}var uE=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&t.set(r,this._finished?i:eE(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},dE=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return J2(t,e)}getParentElement(t){return Z1(t)}query(t,e,i){return eL(t,e,i)}computeStyle(t,e,i){return eE(t,e)}animate(t,e,i,r,s,o=[]){let a=r==0?"both":"forwards",u={duration:i,delay:r,fill:a};s&&(u.easing=s);let h=new Map,p=o.filter(S=>S instanceof uE);E9(i,r)&&p.forEach(S=>{S.currentSnapshot.forEach((D,O)=>h.set(O,D))});let v=S9(e).map(S=>new Map(S));v=T9(t,v,h);let x=jhe(t,v);return new uE(t,v,u,x)}};var rE="@",W9="@.disabled",hE=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){e.charAt(0)==rE&&e==W9?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i,r){return this.delegate.listen(t,e,i,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},bL=class extends hE{factory;constructor(t,e,i,r,s){super(e,i,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){e.charAt(0)==rE?e.charAt(1)=="."&&e==W9?(i=i===void 0?!0:!!i,this.disableAnimations(t,i)):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i,r){if(e.charAt(0)==rE){let s=$he(t),o=e.slice(1),a="";return o.charAt(0)!=rE&&([o,a]=qhe(o)),this.engine.listen(this.namespaceId,s,o,a,u=>{let h=u._data||-1;this.factory.scheduleListenerCallback(h,i,u)})}return this.delegate.listen(t,e,i,r)}};function $he(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function qhe(n){let t=n.indexOf("."),e=n.substring(0,t),i=n.slice(t+1);return[e,i]}var fE=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,i){this.delegate=t,this.engine=e,this._zone=i,e.onRemovalComplete=(r,s)=>{s?.removeChild(null,r)}}createRenderer(t,e){let i="",r=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let h=this._rendererCache,p=h.get(r);if(!p){let v=()=>h.delete(r);p=new hE(i,r,this.engine,v),h.set(r,p)}return p}let s=e.id,o=e.id+"-"+this._currentId;this._currentId++,this.engine.register(o,t);let a=h=>{Array.isArray(h)?h.forEach(a):this.engine.registerTrigger(s,o,t,h.name,h)};return e.data.animation.forEach(a),new bL(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,i){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var Yhe=(()=>{class n extends t0{constructor(e,i,r){super(e,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(qn(Qr),qn(rm),qn(sm))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();function Zhe(){return new sE}function Khe(n,t,e){return new fE(n,t,e)}var G9=[{provide:sm,useFactory:Zhe},{provide:t0,useClass:Yhe},{provide:Th,useFactory:Khe,deps:[zv,t0,xr]}],V2e=[{provide:rm,useClass:xL},{provide:rI,useValue:"NoopAnimations"},...G9],Qhe=[{provide:rm,useFactory:()=>new dE},{provide:rI,useFactory:()=>"BrowserAnimations"},...G9];function $9(){return yu("NgEagerAnimations"),[...Qhe]}var q9={providers:[YV({eventCoalescing:!0}),RP(X8,LP()),$9()]};var Jhe=function(){function n(t,e){e===void 0&&(e=[]),this._eventType=t,this._eventFunctions=e}return n.prototype.init=function(){var t=this;this._eventFunctions.forEach(function(e){typeof window<"u"&&window.addEventListener(t._eventType,e)})},n}(),X9=Jhe;var efe=function(){function n(){this._instances={Accordion:{},Carousel:{},Collapse:{},Dial:{},Dismiss:{},Drawer:{},Dropdown:{},Modal:{},Popover:{},Tabs:{},Tooltip:{},InputCounter:{},CopyClipboard:{},Datepicker:{}}}return n.prototype.addInstance=function(t,e,i,r){if(r===void 0&&(r=!1),!this._instances[t])return console.warn("Flowbite: Component ".concat(t," does not exist.")),!1;if(this._instances[t][i]&&!r){console.warn("Flowbite: Instance with ID ".concat(i," already exists."));return}r&&this._instances[t][i]&&this._instances[t][i].destroyAndRemoveInstance(),this._instances[t][i||this._generateRandomId()]=e},n.prototype.getAllInstances=function(){return this._instances},n.prototype.getInstances=function(t){return this._instances[t]?this._instances[t]:(console.warn("Flowbite: Component ".concat(t," does not exist.")),!1)},n.prototype.getInstance=function(t,e){if(this._componentAndInstanceCheck(t,e)){if(!this._instances[t][e]){console.warn("Flowbite: Instance with ID ".concat(e," does not exist."));return}return this._instances[t][e]}},n.prototype.destroyAndRemoveInstance=function(t,e){this._componentAndInstanceCheck(t,e)&&(this.destroyInstanceObject(t,e),this.removeInstance(t,e))},n.prototype.removeInstance=function(t,e){this._componentAndInstanceCheck(t,e)&&delete this._instances[t][e]},n.prototype.destroyInstanceObject=function(t,e){this._componentAndInstanceCheck(t,e)&&this._instances[t][e].destroy()},n.prototype.instanceExists=function(t,e){return!(!this._instances[t]||!this._instances[t][e])},n.prototype._generateRandomId=function(){return Math.random().toString(36).substr(2,9)},n.prototype._componentAndInstanceCheck=function(t,e){return this._instances[t]?this._instances[t][e]?!0:(console.warn("Flowbite: Instance with ID ".concat(e," does not exist.")),!1):(console.warn("Flowbite: Component ".concat(t," does not exist.")),!1)},n}(),Y9=new efe,Fn=Y9;typeof window<"u"&&(window.FlowbiteInstances=Y9);var pE=function(){return pE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pE.apply(this,arguments)},mE={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},tfe={id:null,override:!0},Z9=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=[]),i===void 0&&(i=mE),r===void 0&&(r=tfe),this._instanceId=r.id?r.id:t.id,this._accordionEl=t,this._items=e,this._options=pE(pE({},mE),i),this._initialized=!1,this.init(),Fn.addInstance("Accordion",this,this._instanceId,r.override)}return n.prototype.init=function(){var t=this;this._items.length&&!this._initialized&&(this._items.forEach(function(e){e.active&&t.open(e.id);var i=function(){t.toggle(e.id)};e.triggerEl.addEventListener("click",i),e.clickHandler=i}),this._initialized=!0)},n.prototype.destroy=function(){this._items.length&&this._initialized&&(this._items.forEach(function(t){t.triggerEl.removeEventListener("click",t.clickHandler),delete t.clickHandler}),this._initialized=!1)},n.prototype.removeInstance=function(){Fn.removeInstance("Accordion",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getItem=function(t){return this._items.filter(function(e){return e.id===t})[0]},n.prototype.open=function(t){var e,i,r=this,s=this.getItem(t);this._options.alwaysOpen||this._items.map(function(o){var a,u;o!==s&&((a=o.triggerEl.classList).remove.apply(a,r._options.activeClasses.split(" ")),(u=o.triggerEl.classList).add.apply(u,r._options.inactiveClasses.split(" ")),o.targetEl.classList.add("hidden"),o.triggerEl.setAttribute("aria-expanded","false"),o.active=!1,o.iconEl&&o.iconEl.classList.add("rotate-180"))}),(e=s.triggerEl.classList).add.apply(e,this._options.activeClasses.split(" ")),(i=s.triggerEl.classList).remove.apply(i,this._options.inactiveClasses.split(" ")),s.triggerEl.setAttribute("aria-expanded","true"),s.targetEl.classList.remove("hidden"),s.active=!0,s.iconEl&&s.iconEl.classList.remove("rotate-180"),this._options.onOpen(this,s)},n.prototype.toggle=function(t){var e=this.getItem(t);e.active?this.close(t):this.open(t),this._options.onToggle(this,e)},n.prototype.close=function(t){var e,i,r=this.getItem(t);(e=r.triggerEl.classList).remove.apply(e,this._options.activeClasses.split(" ")),(i=r.triggerEl.classList).add.apply(i,this._options.inactiveClasses.split(" ")),r.targetEl.classList.add("hidden"),r.triggerEl.setAttribute("aria-expanded","false"),r.active=!1,r.iconEl&&r.iconEl.classList.add("rotate-180"),this._options.onClose(this,r)},n.prototype.updateOnOpen=function(t){this._options.onOpen=t},n.prototype.updateOnClose=function(t){this._options.onClose=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function n0(){document.querySelectorAll("[data-accordion]").forEach(function(n){var t=n.getAttribute("data-accordion"),e=n.getAttribute("data-active-classes"),i=n.getAttribute("data-inactive-classes"),r=[];n.querySelectorAll("[data-accordion-target]").forEach(function(s){if(s.closest("[data-accordion]")===n){var o={id:s.getAttribute("data-accordion-target"),triggerEl:s,targetEl:document.querySelector(s.getAttribute("data-accordion-target")),iconEl:s.querySelector("[data-accordion-icon]"),active:s.getAttribute("aria-expanded")==="true"};r.push(o)}}),new Z9(n,r,{alwaysOpen:t==="open",activeClasses:e||mE.activeClasses,inactiveClasses:i||mE.inactiveClasses})})}typeof window<"u"&&(window.Accordion=Z9,window.initAccordions=n0);var gE=function(){return gE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},gE.apply(this,arguments)},K9={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},nfe={id:null,override:!0},CL=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=K9),r===void 0&&(r=nfe),this._instanceId=r.id?r.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=gE(gE({},K9),i),this._visible=!1,this._initialized=!1,this.init(),Fn.addInstance("Collapse",this,this._instanceId,r.override)}return n.prototype.init=function(){var t=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._clickHandler=function(){t.toggle()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},n.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},n.prototype.removeInstance=function(){Fn.removeInstance("Collapse",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},n.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},n.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},n.prototype.updateOnCollapse=function(t){this._options.onCollapse=t},n.prototype.updateOnExpand=function(t){this._options.onExpand=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function i0(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(n){var t=n.getAttribute("data-collapse-toggle"),e=document.getElementById(t);e?Fn.instanceExists("Collapse",e.getAttribute("id"))?new CL(e,n,{},{id:e.getAttribute("id")+"_"+Fn._generateRandomId()}):new CL(e,n):console.error('The target element with id "'.concat(t,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=CL,window.initCollapses=i0);var om=function(){return om=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},om.apply(this,arguments)},yE={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},ife={id:null,override:!0},Q9=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=[]),i===void 0&&(i=yE),r===void 0&&(r=ife),this._instanceId=r.id?r.id:t.id,this._carouselEl=t,this._items=e,this._options=om(om(om({},yE),i),{indicators:om(om({},yE.indicators),i.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init(),Fn.addInstance("Carousel",this,this._instanceId,r.override)}return n.prototype.init=function(){var t=this;this._items.length&&!this._initialized&&(this._items.map(function(e){e.el.classList.add("absolute","inset-0","transition-transform","transform")}),this.getActiveItem()?this.slideTo(this.getActiveItem().position):this.slideTo(0),this._indicators.map(function(e,i){e.el.addEventListener("click",function(){t.slideTo(i)})}),this._initialized=!0)},n.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},n.prototype.removeInstance=function(){Fn.removeInstance("Carousel",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getItem=function(t){return this._items[t]},n.prototype.slideTo=function(t){var e=this._items[t],i={left:e.position===0?this._items[this._items.length-1]:this._items[e.position-1],middle:e,right:e.position===this._items.length-1?this._items[0]:this._items[e.position+1]};this._rotate(i),this._setActiveItem(e),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},n.prototype.next=function(){var t=this.getActiveItem(),e=null;t.position===this._items.length-1?e=this._items[0]:e=this._items[t.position+1],this.slideTo(e.position),this._options.onNext(this)},n.prototype.prev=function(){var t=this.getActiveItem(),e=null;t.position===0?e=this._items[this._items.length-1]:e=this._items[t.position-1],this.slideTo(e.position),this._options.onPrev(this)},n.prototype._rotate=function(t){if(this._items.map(function(e){e.el.classList.add("hidden")}),this._items.length===1){t.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),t.middle.el.classList.add("translate-x-0","z-20");return}t.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),t.left.el.classList.add("-translate-x-full","z-10"),t.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),t.middle.el.classList.add("translate-x-0","z-30"),t.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-30"),t.right.el.classList.add("translate-x-full","z-20")},n.prototype.cycle=function(){var t=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){t.next()},this._intervalDuration))},n.prototype.pause=function(){clearInterval(this._intervalInstance)},n.prototype.getActiveItem=function(){return this._activeItem},n.prototype._setActiveItem=function(t){var e,i,r=this;this._activeItem=t;var s=t.position;this._indicators.length&&(this._indicators.map(function(o){var a,u;o.el.setAttribute("aria-current","false"),(a=o.el.classList).remove.apply(a,r._options.indicators.activeClasses.split(" ")),(u=o.el.classList).add.apply(u,r._options.indicators.inactiveClasses.split(" "))}),(e=this._indicators[s].el.classList).add.apply(e,this._options.indicators.activeClasses.split(" ")),(i=this._indicators[s].el.classList).remove.apply(i,this._options.indicators.inactiveClasses.split(" ")),this._indicators[s].el.setAttribute("aria-current","true"))},n.prototype.updateOnNext=function(t){this._options.onNext=t},n.prototype.updateOnPrev=function(t){this._options.onPrev=t},n.prototype.updateOnChange=function(t){this._options.onChange=t},n}();function r0(){document.querySelectorAll("[data-carousel]").forEach(function(n){var t=n.getAttribute("data-carousel-interval"),e=n.getAttribute("data-carousel")==="slide",i=[],r=0;n.querySelectorAll("[data-carousel-item]").length&&Array.from(n.querySelectorAll("[data-carousel-item]")).map(function(h,p){i.push({position:p,el:h}),h.getAttribute("data-carousel-item")==="active"&&(r=p)});var s=[];n.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(n.querySelectorAll("[data-carousel-slide-to]")).map(function(h){s.push({position:parseInt(h.getAttribute("data-carousel-slide-to")),el:h})});var o=new Q9(n,i,{defaultPosition:r,indicators:{items:s},interval:t||yE.interval});e&&o.cycle();var a=n.querySelector("[data-carousel-next]"),u=n.querySelector("[data-carousel-prev]");a&&a.addEventListener("click",function(){o.next()}),u&&u.addEventListener("click",function(){o.prev()})})}typeof window<"u"&&(window.Carousel=Q9,window.initCarousels=r0);var vE=function(){return vE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vE.apply(this,arguments)},J9={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},rfe={id:null,override:!0},e6=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=J9),r===void 0&&(r=rfe),this._instanceId=r.id?r.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=vE(vE({},J9),i),this._initialized=!1,this.init(),Fn.addInstance("Dismiss",this,this._instanceId,r.override)}return n.prototype.init=function(){var t=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._clickHandler=function(){t.hide()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},n.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},n.prototype.removeInstance=function(){Fn.removeInstance("Dismiss",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.hide=function(){var t=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){t._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},n.prototype.updateOnHide=function(t){this._options.onHide=t},n}();function s0(){document.querySelectorAll("[data-dismiss-target]").forEach(function(n){var t=n.getAttribute("data-dismiss-target"),e=document.querySelector(t);e?new e6(e,n):console.error('The dismiss element with id "'.concat(t,'" does not exist. Please check the data-dismiss-target attribute.'))})}typeof window<"u"&&(window.Dismiss=e6,window.initDismisses=s0);var is="top",qs="bottom",Is="right",ds="left",_E="auto",lf=[is,qs,Is,ds],Bd="start",am="end",t6="clippingParents",bE="viewport",o0="popper",n6="reference",SL=lf.reduce(function(n,t){return n.concat([t+"-"+Bd,t+"-"+am])},[]),xE=[].concat(lf,[_E]).reduce(function(n,t){return n.concat([t,t+"-"+Bd,t+"-"+am])},[]),sfe="beforeRead",ofe="read",afe="afterRead",lfe="beforeMain",cfe="main",ufe="afterMain",dfe="beforeWrite",hfe="write",ffe="afterWrite",i6=[sfe,ofe,afe,lfe,cfe,ufe,dfe,hfe,ffe];function ro(n){return n?(n.nodeName||"").toLowerCase():null}function jr(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function Gl(n){var t=jr(n).Element;return n instanceof t||n instanceof Element}function Xs(n){var t=jr(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function a0(n){if(typeof ShadowRoot>"u")return!1;var t=jr(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function pfe(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},r=t.attributes[e]||{},s=t.elements[e];!Xs(s)||!ro(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function mfe(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(i){var r=t.elements[i],s=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:e[i]),a=o.reduce(function(u,h){return u[h]="",u},{});!Xs(r)||!ro(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(u){r.removeAttribute(u)}))})}}var r6={name:"applyStyles",enabled:!0,phase:"write",fn:pfe,effect:mfe,requires:["computeStyles"]};function so(n){return n.split("-")[0]}var zc=Math.max,lm=Math.min,Vd=Math.round;function l0(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Tb(){return!/^((?!chrome|android).)*safari/i.test(l0())}function $l(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var i=n.getBoundingClientRect(),r=1,s=1;t&&Xs(n)&&(r=n.offsetWidth>0&&Vd(i.width)/n.offsetWidth||1,s=n.offsetHeight>0&&Vd(i.height)/n.offsetHeight||1);var o=Gl(n)?jr(n):window,a=o.visualViewport,u=!Tb()&&e,h=(i.left+(u&&a?a.offsetLeft:0))/r,p=(i.top+(u&&a?a.offsetTop:0))/s,v=i.width/r,x=i.height/s;return{width:v,height:x,top:p,right:h+v,bottom:p+x,left:h,x:h,y:p}}function cm(n){var t=$l(n),e=n.offsetWidth,i=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:i}}function Ab(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&a0(e)){var i=t;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function aa(n){return jr(n).getComputedStyle(n)}function ML(n){return["table","td","th"].indexOf(ro(n))>=0}function go(n){return((Gl(n)?n.ownerDocument:n.document)||window.document).documentElement}function Ud(n){return ro(n)==="html"?n:n.assignedSlot||n.parentNode||(a0(n)?n.host:null)||go(n)}function s6(n){return!Xs(n)||aa(n).position==="fixed"?null:n.offsetParent}function gfe(n){var t=/firefox/i.test(l0()),e=/Trident/i.test(l0());if(e&&Xs(n)){var i=aa(n);if(i.position==="fixed")return null}var r=Ud(n);for(a0(r)&&(r=r.host);Xs(r)&&["html","body"].indexOf(ro(r))<0;){var s=aa(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function Hc(n){for(var t=jr(n),e=s6(n);e&&ML(e)&&aa(e).position==="static";)e=s6(e);return e&&(ro(e)==="html"||ro(e)==="body"&&aa(e).position==="static")?t:e||gfe(n)||t}function um(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function dm(n,t,e){return zc(n,lm(t,e))}function o6(n,t,e){var i=dm(n,t,e);return i>e?e:i}function Db(){return{top:0,right:0,bottom:0,left:0}}function Ib(n){return Object.assign({},Db(),n)}function Pb(n,t){return t.reduce(function(e,i){return e[i]=n,e},{})}var yfe=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,Ib(typeof t!="number"?t:Pb(t,lf))};function vfe(n){var t,e=n.state,i=n.name,r=n.options,s=e.elements.arrow,o=e.modifiersData.popperOffsets,a=so(e.placement),u=um(a),h=[ds,Is].indexOf(a)>=0,p=h?"height":"width";if(!(!s||!o)){var v=yfe(r.padding,e),x=cm(s),S=u==="y"?is:ds,D=u==="y"?qs:Is,O=e.rects.reference[p]+e.rects.reference[u]-o[u]-e.rects.popper[p],N=o[u]-e.rects.reference[u],T=Hc(s),j=T?u==="y"?T.clientHeight||0:T.clientWidth||0:0,Z=O/2-N/2,G=v[S],le=j-x[p]-v[D],K=j/2-x[p]/2+Z,oe=dm(G,K,le),ue=u;e.modifiersData[i]=(t={},t[ue]=oe,t.centerOffset=oe-K,t)}}function _fe(n){var t=n.state,e=n.options,i=e.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||Ab(t.elements.popper,r)&&(t.elements.arrow=r))}var a6={name:"arrow",enabled:!0,phase:"main",fn:vfe,effect:_fe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ql(n){return n.split("-")[1]}var bfe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function xfe(n,t){var e=n.x,i=n.y,r=t.devicePixelRatio||1;return{x:Vd(e*r)/r||0,y:Vd(i*r)/r||0}}function l6(n){var t,e=n.popper,i=n.popperRect,r=n.placement,s=n.variation,o=n.offsets,a=n.position,u=n.gpuAcceleration,h=n.adaptive,p=n.roundOffsets,v=n.isFixed,x=o.x,S=x===void 0?0:x,D=o.y,O=D===void 0?0:D,N=typeof p=="function"?p({x:S,y:O}):{x:S,y:O};S=N.x,O=N.y;var T=o.hasOwnProperty("x"),j=o.hasOwnProperty("y"),Z=ds,G=is,le=window;if(h){var K=Hc(e),oe="clientHeight",ue="clientWidth";if(K===jr(e)&&(K=go(e),aa(K).position!=="static"&&a==="absolute"&&(oe="scrollHeight",ue="scrollWidth")),K=K,r===is||(r===ds||r===Is)&&s===am){G=qs;var te=v&&K===le&&le.visualViewport?le.visualViewport.height:K[oe];O-=te-i.height,O*=u?1:-1}if(r===ds||(r===is||r===qs)&&s===am){Z=Is;var V=v&&K===le&&le.visualViewport?le.visualViewport.width:K[ue];S-=V-i.width,S*=u?1:-1}}var se=Object.assign({position:a},h&&bfe),we=p===!0?xfe({x:S,y:O},jr(e)):{x:S,y:O};if(S=we.x,O=we.y,u){var he;return Object.assign({},se,(he={},he[G]=j?"0":"",he[Z]=T?"0":"",he.transform=(le.devicePixelRatio||1)<=1?"translate("+S+"px, "+O+"px)":"translate3d("+S+"px, "+O+"px, 0)",he))}return Object.assign({},se,(t={},t[G]=j?O+"px":"",t[Z]=T?S+"px":"",t.transform="",t))}function wfe(n){var t=n.state,e=n.options,i=e.gpuAcceleration,r=i===void 0?!0:i,s=e.adaptive,o=s===void 0?!0:s,a=e.roundOffsets,u=a===void 0?!0:a,h={placement:so(t.placement),variation:ql(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,l6(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:u})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,l6(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var c6={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:wfe,data:{}};var wE={passive:!0};function Cfe(n){var t=n.state,e=n.instance,i=n.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,u=jr(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&h.forEach(function(p){p.addEventListener("scroll",e.update,wE)}),a&&u.addEventListener("resize",e.update,wE),function(){s&&h.forEach(function(p){p.removeEventListener("scroll",e.update,wE)}),a&&u.removeEventListener("resize",e.update,wE)}}var u6={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Cfe,data:{}};var Sfe={left:"right",right:"left",bottom:"top",top:"bottom"};function c0(n){return n.replace(/left|right|bottom|top/g,function(t){return Sfe[t]})}var Mfe={start:"end",end:"start"};function CE(n){return n.replace(/start|end/g,function(t){return Mfe[t]})}function hm(n){var t=jr(n),e=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:e,scrollTop:i}}function fm(n){return $l(go(n)).left+hm(n).scrollLeft}function EL(n,t){var e=jr(n),i=go(n),r=e.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,u=0;if(r){s=r.width,o=r.height;var h=Tb();(h||!h&&t==="fixed")&&(a=r.offsetLeft,u=r.offsetTop)}return{width:s,height:o,x:a+fm(n),y:u}}function TL(n){var t,e=go(n),i=hm(n),r=(t=n.ownerDocument)==null?void 0:t.body,s=zc(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=zc(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+fm(n),u=-i.scrollTop;return aa(r||e).direction==="rtl"&&(a+=zc(e.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:u}}function pm(n){var t=aa(n),e=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+r+i)}function SE(n){return["html","body","#document"].indexOf(ro(n))>=0?n.ownerDocument.body:Xs(n)&&pm(n)?n:SE(Ud(n))}function cf(n,t){var e;t===void 0&&(t=[]);var i=SE(n),r=i===((e=n.ownerDocument)==null?void 0:e.body),s=jr(i),o=r?[s].concat(s.visualViewport||[],pm(i)?i:[]):i,a=t.concat(o);return r?a:a.concat(cf(Ud(o)))}function u0(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Efe(n,t){var e=$l(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function d6(n,t,e){return t===bE?u0(EL(n,e)):Gl(t)?Efe(t,e):u0(TL(go(n)))}function Tfe(n){var t=cf(Ud(n)),e=["absolute","fixed"].indexOf(aa(n).position)>=0,i=e&&Xs(n)?Hc(n):n;return Gl(i)?t.filter(function(r){return Gl(r)&&Ab(r,i)&&ro(r)!=="body"}):[]}function AL(n,t,e,i){var r=t==="clippingParents"?Tfe(n):[].concat(t),s=[].concat(r,[e]),o=s[0],a=s.reduce(function(u,h){var p=d6(n,h,i);return u.top=zc(p.top,u.top),u.right=lm(p.right,u.right),u.bottom=lm(p.bottom,u.bottom),u.left=zc(p.left,u.left),u},d6(n,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Rb(n){var t=n.reference,e=n.element,i=n.placement,r=i?so(i):null,s=i?ql(i):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,u;switch(r){case is:u={x:o,y:t.y-e.height};break;case qs:u={x:o,y:t.y+t.height};break;case Is:u={x:t.x+t.width,y:a};break;case ds:u={x:t.x-e.width,y:a};break;default:u={x:t.x,y:t.y}}var h=r?um(r):null;if(h!=null){var p=h==="y"?"height":"width";switch(s){case Bd:u[h]=u[h]-(t[p]/2-e[p]/2);break;case am:u[h]=u[h]+(t[p]/2-e[p]/2);break;default:}}return u}function jc(n,t){t===void 0&&(t={});var e=t,i=e.placement,r=i===void 0?n.placement:i,s=e.strategy,o=s===void 0?n.strategy:s,a=e.boundary,u=a===void 0?t6:a,h=e.rootBoundary,p=h===void 0?bE:h,v=e.elementContext,x=v===void 0?o0:v,S=e.altBoundary,D=S===void 0?!1:S,O=e.padding,N=O===void 0?0:O,T=Ib(typeof N!="number"?N:Pb(N,lf)),j=x===o0?n6:o0,Z=n.rects.popper,G=n.elements[D?j:x],le=AL(Gl(G)?G:G.contextElement||go(n.elements.popper),u,p,o),K=$l(n.elements.reference),oe=Rb({reference:K,element:Z,strategy:"absolute",placement:r}),ue=u0(Object.assign({},Z,oe)),te=x===o0?ue:K,V={top:le.top-te.top+T.top,bottom:te.bottom-le.bottom+T.bottom,left:le.left-te.left+T.left,right:te.right-le.right+T.right},se=n.modifiersData.offset;if(x===o0&&se){var we=se[r];Object.keys(V).forEach(function(he){var je=[Is,qs].indexOf(he)>=0?1:-1,ze=[is,qs].indexOf(he)>=0?"y":"x";V[he]+=we[ze]*je})}return V}function DL(n,t){t===void 0&&(t={});var e=t,i=e.placement,r=e.boundary,s=e.rootBoundary,o=e.padding,a=e.flipVariations,u=e.allowedAutoPlacements,h=u===void 0?xE:u,p=ql(i),v=p?a?SL:SL.filter(function(D){return ql(D)===p}):lf,x=v.filter(function(D){return h.indexOf(D)>=0});x.length===0&&(x=v);var S=x.reduce(function(D,O){return D[O]=jc(n,{placement:O,boundary:r,rootBoundary:s,padding:o})[so(O)],D},{});return Object.keys(S).sort(function(D,O){return S[D]-S[O]})}function Afe(n){if(so(n)===_E)return[];var t=c0(n);return[CE(n),t,CE(t)]}function Dfe(n){var t=n.state,e=n.options,i=n.name;if(!t.modifiersData[i]._skip){for(var r=e.mainAxis,s=r===void 0?!0:r,o=e.altAxis,a=o===void 0?!0:o,u=e.fallbackPlacements,h=e.padding,p=e.boundary,v=e.rootBoundary,x=e.altBoundary,S=e.flipVariations,D=S===void 0?!0:S,O=e.allowedAutoPlacements,N=t.options.placement,T=so(N),j=T===N,Z=u||(j||!D?[c0(N)]:Afe(N)),G=[N].concat(Z).reduce(function(Ie,at){return Ie.concat(so(at)===_E?DL(t,{placement:at,boundary:p,rootBoundary:v,padding:h,flipVariations:D,allowedAutoPlacements:O}):at)},[]),le=t.rects.reference,K=t.rects.popper,oe=new Map,ue=!0,te=G[0],V=0;V<G.length;V++){var se=G[V],we=so(se),he=ql(se)===Bd,je=[is,qs].indexOf(we)>=0,ze=je?"width":"height",de=jc(t,{placement:se,boundary:p,rootBoundary:v,altBoundary:x,padding:h}),Re=je?he?Is:ds:he?qs:is;le[ze]>K[ze]&&(Re=c0(Re));var me=c0(Re),$e=[];if(s&&$e.push(de[we]<=0),a&&$e.push(de[Re]<=0,de[me]<=0),$e.every(function(Ie){return Ie})){te=se,ue=!1;break}oe.set(se,$e)}if(ue)for(var tt=D?3:1,xt=function(at){var Rt=G.find(function(rt){var zt=oe.get(rt);if(zt)return zt.slice(0,at).every(function(Sn){return Sn})});if(Rt)return te=Rt,"break"},Tt=tt;Tt>0;Tt--){var ut=xt(Tt);if(ut==="break")break}t.placement!==te&&(t.modifiersData[i]._skip=!0,t.placement=te,t.reset=!0)}}var h6={name:"flip",enabled:!0,phase:"main",fn:Dfe,requiresIfExists:["offset"],data:{_skip:!1}};function f6(n,t,e){return e===void 0&&(e={x:0,y:0}),{top:n.top-t.height-e.y,right:n.right-t.width+e.x,bottom:n.bottom-t.height+e.y,left:n.left-t.width-e.x}}function p6(n){return[is,Is,qs,ds].some(function(t){return n[t]>=0})}function Ife(n){var t=n.state,e=n.name,i=t.rects.reference,r=t.rects.popper,s=t.modifiersData.preventOverflow,o=jc(t,{elementContext:"reference"}),a=jc(t,{altBoundary:!0}),u=f6(o,i),h=f6(a,r,s),p=p6(u),v=p6(h);t.modifiersData[e]={referenceClippingOffsets:u,popperEscapeOffsets:h,isReferenceHidden:p,hasPopperEscaped:v},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":v})}var m6={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ife};function Pfe(n,t,e){var i=so(n),r=[ds,is].indexOf(i)>=0?-1:1,s=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[ds,Is].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function Rfe(n){var t=n.state,e=n.options,i=n.name,r=e.offset,s=r===void 0?[0,0]:r,o=xE.reduce(function(p,v){return p[v]=Pfe(v,t.rects,s),p},{}),a=o[t.placement],u=a.x,h=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=h),t.modifiersData[i]=o}var g6={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Rfe};function kfe(n){var t=n.state,e=n.name;t.modifiersData[e]=Rb({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var y6={name:"popperOffsets",enabled:!0,phase:"read",fn:kfe,data:{}};function IL(n){return n==="x"?"y":"x"}function Lfe(n){var t=n.state,e=n.options,i=n.name,r=e.mainAxis,s=r===void 0?!0:r,o=e.altAxis,a=o===void 0?!1:o,u=e.boundary,h=e.rootBoundary,p=e.altBoundary,v=e.padding,x=e.tether,S=x===void 0?!0:x,D=e.tetherOffset,O=D===void 0?0:D,N=jc(t,{boundary:u,rootBoundary:h,padding:v,altBoundary:p}),T=so(t.placement),j=ql(t.placement),Z=!j,G=um(T),le=IL(G),K=t.modifiersData.popperOffsets,oe=t.rects.reference,ue=t.rects.popper,te=typeof O=="function"?O(Object.assign({},t.rects,{placement:t.placement})):O,V=typeof te=="number"?{mainAxis:te,altAxis:te}:Object.assign({mainAxis:0,altAxis:0},te),se=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,we={x:0,y:0};if(K){if(s){var he,je=G==="y"?is:ds,ze=G==="y"?qs:Is,de=G==="y"?"height":"width",Re=K[G],me=Re+N[je],$e=Re-N[ze],tt=S?-ue[de]/2:0,xt=j===Bd?oe[de]:ue[de],Tt=j===Bd?-ue[de]:-oe[de],ut=t.elements.arrow,Ie=S&&ut?cm(ut):{width:0,height:0},at=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Db(),Rt=at[je],rt=at[ze],zt=dm(0,oe[de],Ie[de]),Sn=Z?oe[de]/2-tt-zt-Rt-V.mainAxis:xt-zt-Rt-V.mainAxis,dn=Z?-oe[de]/2+tt+zt+rt+V.mainAxis:Tt+zt+rt+V.mainAxis,Mt=t.elements.arrow&&Hc(t.elements.arrow),Zi=Mt?G==="y"?Mt.clientTop||0:Mt.clientLeft||0:0,Bn=(he=se?.[G])!=null?he:0,Me=Re+Sn-Bn-Zi,hr=Re+dn-Bn,Qn=dm(S?lm(me,Me):me,Re,S?zc($e,hr):$e);K[G]=Qn,we[G]=Qn-Re}if(a){var fi,rn=G==="x"?is:ds,ei=G==="x"?qs:Is,hn=K[le],Rn=le==="y"?"height":"width",$i=hn+N[rn],fe=hn-N[ei],J=[is,ds].indexOf(T)!==-1,Ge=(fi=se?.[le])!=null?fi:0,nt=J?$i:hn-oe[Rn]-ue[Rn]-Ge+V.altAxis,dt=J?hn+oe[Rn]+ue[Rn]-Ge-V.altAxis:fe,Qe=S&&J?o6(nt,hn,dt):dm(S?nt:$i,hn,S?dt:fe);K[le]=Qe,we[le]=Qe-hn}t.modifiersData[i]=we}}var v6={name:"preventOverflow",enabled:!0,phase:"main",fn:Lfe,requiresIfExists:["offset"]};function PL(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function RL(n){return n===jr(n)||!Xs(n)?hm(n):PL(n)}function Nfe(n){var t=n.getBoundingClientRect(),e=Vd(t.width)/n.offsetWidth||1,i=Vd(t.height)/n.offsetHeight||1;return e!==1||i!==1}function kL(n,t,e){e===void 0&&(e=!1);var i=Xs(t),r=Xs(t)&&Nfe(t),s=go(t),o=$l(n,r,e),a={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(i||!i&&!e)&&((ro(t)!=="body"||pm(s))&&(a=RL(t)),Xs(t)?(u=$l(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):s&&(u.x=fm(s))),{x:o.left+a.scrollLeft-u.x,y:o.top+a.scrollTop-u.y,width:o.width,height:o.height}}function Ofe(n){var t=new Map,e=new Set,i=[];n.forEach(function(s){t.set(s.name,s)});function r(s){e.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var u=t.get(a);u&&r(u)}}),i.push(s)}return n.forEach(function(s){e.has(s.name)||r(s)}),i}function LL(n){var t=Ofe(n);return i6.reduce(function(e,i){return e.concat(t.filter(function(r){return r.phase===i}))},[])}function NL(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function OL(n){var t=n.reduce(function(e,i){var r=e[i.name];return e[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,e},{});return Object.keys(t).map(function(e){return t[e]})}var _6={placement:"bottom",modifiers:[],strategy:"absolute"};function b6(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function x6(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,i=e===void 0?[]:e,r=t.defaultOptions,s=r===void 0?_6:r;return function(a,u,h){h===void 0&&(h=s);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},_6,s),modifiersData:{},elements:{reference:a,popper:u},attributes:{},styles:{}},v=[],x=!1,S={state:p,setOptions:function(T){var j=typeof T=="function"?T(p.options):T;O(),p.options=Object.assign({},s,p.options,j),p.scrollParents={reference:Gl(a)?cf(a):a.contextElement?cf(a.contextElement):[],popper:cf(u)};var Z=LL(OL([].concat(i,p.options.modifiers)));return p.orderedModifiers=Z.filter(function(G){return G.enabled}),D(),S.update()},forceUpdate:function(){if(!x){var T=p.elements,j=T.reference,Z=T.popper;if(b6(j,Z)){p.rects={reference:kL(j,Hc(Z),p.options.strategy==="fixed"),popper:cm(Z)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(V){return p.modifiersData[V.name]=Object.assign({},V.data)});for(var G=0;G<p.orderedModifiers.length;G++){if(p.reset===!0){p.reset=!1,G=-1;continue}var le=p.orderedModifiers[G],K=le.fn,oe=le.options,ue=oe===void 0?{}:oe,te=le.name;typeof K=="function"&&(p=K({state:p,options:ue,name:te,instance:S})||p)}}}},update:NL(function(){return new Promise(function(N){S.forceUpdate(),N(p)})}),destroy:function(){O(),x=!0}};if(!b6(a,u))return S;S.setOptions(h).then(function(N){!x&&h.onFirstUpdate&&h.onFirstUpdate(N)});function D(){p.orderedModifiers.forEach(function(N){var T=N.name,j=N.options,Z=j===void 0?{}:j,G=N.effect;if(typeof G=="function"){var le=G({state:p,name:T,instance:S,options:Z}),K=function(){};v.push(le||K)}})}function O(){v.forEach(function(N){return N()}),v=[]}return S}}var Ffe=[u6,y6,c6,r6,g6,h6,v6,a6,m6],mm=x6({defaultModifiers:Ffe});var uf=function(){return uf=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},uf.apply(this,arguments)},ME=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},df={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onShow:function(){},onHide:function(){},onToggle:function(){}},Bfe={id:null,override:!0},w6=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=df),r===void 0&&(r=Bfe),this._instanceId=r.id?r.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=uf(uf({},df),i),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Fn.addInstance("Dropdown",this,this._instanceId,r.override)}return n.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._popperInstance=this._createPopperInstance(),this._setupEventListeners(),this._initialized=!0)},n.prototype.destroy=function(){var t=this,e=this._getTriggerEvents();this._options.triggerType==="click"&&e.showEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._clickHandler)}),this._options.triggerType==="hover"&&(e.showEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._hoverShowTriggerElHandler),t._targetEl.removeEventListener(i,t._hoverShowTargetElHandler)}),e.hideEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._hoverHideHandler),t._targetEl.removeEventListener(i,t._hoverHideHandler)})),this._popperInstance.destroy(),this._initialized=!1},n.prototype.removeInstance=function(){Fn.removeInstance("Dropdown",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype._setupEventListeners=function(){var t=this,e=this._getTriggerEvents();this._clickHandler=function(){t.toggle()},this._options.triggerType==="click"&&e.showEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._clickHandler)}),this._hoverShowTriggerElHandler=function(i){i.type==="click"?t.toggle():setTimeout(function(){t.show()},t._options.delay)},this._hoverShowTargetElHandler=function(){t.show()},this._hoverHideHandler=function(){setTimeout(function(){t._targetEl.matches(":hover")||t.hide()},t._options.delay)},this._options.triggerType==="hover"&&(e.showEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._hoverShowTriggerElHandler),t._targetEl.addEventListener(i,t._hoverShowTargetElHandler)}),e.hideEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._hoverHideHandler),t._targetEl.addEventListener(i,t._hoverHideHandler)}))},n.prototype._createPopperInstance=function(){return mm(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},n.prototype._setupClickOutsideListener=function(){var t=this;this._clickOutsideEventListener=function(e){t._handleClickOutside(e,t._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._handleClickOutside=function(t,e){var i=t.target,r=this._options.ignoreClickOutsideClass,s=!1;if(r){var o=document.querySelectorAll(".".concat(r));o.forEach(function(a){if(a.contains(i)){s=!0;return}})}i!==e&&!e.contains(i)&&!this._triggerEl.contains(i)&&!s&&this.isVisible()&&this.hide()},n.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["click"],hideEvents:[]}}},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},n.prototype.isVisible=function(){return this._visible},n.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._targetEl.removeAttribute("aria-hidden"),this._popperInstance.setOptions(function(t){return uf(uf({},t),{modifiers:ME(ME([],t.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},n.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._targetEl.setAttribute("aria-hidden","true"),this._popperInstance.setOptions(function(t){return uf(uf({},t),{modifiers:ME(ME([],t.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},n.prototype.updateOnShow=function(t){this._options.onShow=t},n.prototype.updateOnHide=function(t){this._options.onHide=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function d0(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(n){var t=n.getAttribute("data-dropdown-toggle"),e=document.getElementById(t);if(e){var i=n.getAttribute("data-dropdown-placement"),r=n.getAttribute("data-dropdown-offset-skidding"),s=n.getAttribute("data-dropdown-offset-distance"),o=n.getAttribute("data-dropdown-trigger"),a=n.getAttribute("data-dropdown-delay"),u=n.getAttribute("data-dropdown-ignore-click-outside-class");new w6(e,n,{placement:i||df.placement,triggerType:o||df.triggerType,offsetSkidding:r?parseInt(r):df.offsetSkidding,offsetDistance:s?parseInt(s):df.offsetDistance,delay:a?parseInt(a):df.delay,ignoreClickOutsideClass:u||df.ignoreClickOutsideClass})}else console.error('The dropdown element with id "'.concat(t,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=w6,window.initDropdowns=d0);var EE=function(){return EE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},EE.apply(this,arguments)},TE={placement:"center",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},Vfe={id:null,override:!0},C6=function(){function n(t,e,i){t===void 0&&(t=null),e===void 0&&(e=TE),i===void 0&&(i=Vfe),this._eventListenerInstances=[],this._instanceId=i.id?i.id:t.id,this._targetEl=t,this._options=EE(EE({},TE),e),this._isHidden=!0,this._backdropEl=null,this._initialized=!1,this.init(),Fn.addInstance("Modal",this,this._instanceId,i.override)}return n.prototype.init=function(){var t=this;this._targetEl&&!this._initialized&&(this._getPlacementClasses().map(function(e){t._targetEl.classList.add(e)}),this._initialized=!0)},n.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),this._initialized=!1)},n.prototype.removeInstance=function(){Fn.removeInstance("Modal",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype._createBackdrop=function(){var t;if(this._isHidden){var e=document.createElement("div");(t=e.classList).add.apply(t,this._options.backdropClasses.split(" ")),document.querySelector("body").append(e),this._backdropEl=e}},n.prototype._destroyBackdropEl=function(){!this._isHidden&&this._backdropEl&&(this._backdropEl.remove(),this._backdropEl=null)},n.prototype._setupModalCloseEventListeners=function(){var t=this;this._options.backdrop==="dynamic"&&(this._clickOutsideEventListener=function(e){t._handleOutsideClick(e.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(e){e.key==="Escape"&&t.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},n.prototype._removeModalCloseEventListeners=function(){this._options.backdrop==="dynamic"&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},n.prototype._handleOutsideClick=function(t){(t===this._targetEl||t===this._backdropEl&&this.isVisible())&&this.hide()},n.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"];default:return["justify-center","items-center"]}},n.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},n.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,this._options.closable&&this._setupModalCloseEventListeners(),document.body.classList.add("overflow-hidden"),this._options.onShow(this))},n.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},n.prototype.isVisible=function(){return!this._isHidden},n.prototype.isHidden=function(){return this._isHidden},n.prototype.addEventListenerInstance=function(t,e,i){this._eventListenerInstances.push({element:t,type:e,handler:i})},n.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(t){t.element.removeEventListener(t.type,t.handler)}),this._eventListenerInstances=[]},n.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},n.prototype.updateOnShow=function(t){this._options.onShow=t},n.prototype.updateOnHide=function(t){this._options.onHide=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function h0(){document.querySelectorAll("[data-modal-target]").forEach(function(n){var t=n.getAttribute("data-modal-target"),e=document.getElementById(t);if(e){var i=e.getAttribute("data-modal-placement"),r=e.getAttribute("data-modal-backdrop");new C6(e,{placement:i||TE.placement,backdrop:r||TE.backdrop})}else console.error("Modal with id ".concat(t," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(n){var t=n.getAttribute("data-modal-toggle"),e=document.getElementById(t);if(e){var i=Fn.getInstance("Modal",t);if(i){var r=function(){i.toggle()};n.addEventListener("click",r),i.addEventListenerInstance(n,"click",r)}else console.error("Modal with id ".concat(t," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(t," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(n){var t=n.getAttribute("data-modal-show"),e=document.getElementById(t);if(e){var i=Fn.getInstance("Modal",t);if(i){var r=function(){i.show()};n.addEventListener("click",r),i.addEventListenerInstance(n,"click",r)}else console.error("Modal with id ".concat(t," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(t," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(n){var t=n.getAttribute("data-modal-hide"),e=document.getElementById(t);if(e){var i=Fn.getInstance("Modal",t);if(i){var r=function(){i.hide()};n.addEventListener("click",r),i.addEventListenerInstance(n,"click",r)}else console.error("Modal with id ".concat(t," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(t," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=C6,window.initModals=h0);var AE=function(){return AE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},AE.apply(this,arguments)},gm={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},Ufe={id:null,override:!0},S6=function(){function n(t,e,i){t===void 0&&(t=null),e===void 0&&(e=gm),i===void 0&&(i=Ufe),this._eventListenerInstances=[],this._instanceId=i.id?i.id:t.id,this._targetEl=t,this._options=AE(AE({},gm),e),this._visible=!1,this._initialized=!1,this.init(),Fn.addInstance("Drawer",this,this._instanceId,i.override)}return n.prototype.init=function(){var t=this;this._targetEl&&!this._initialized&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform"),this._getPlacementClasses(this._options.placement).base.map(function(e){t._targetEl.classList.add(e)}),this._handleEscapeKey=function(e){e.key==="Escape"&&t.isVisible()&&t.hide()},document.addEventListener("keydown",this._handleEscapeKey),this._initialized=!0)},n.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),document.removeEventListener("keydown",this._handleEscapeKey),this._initialized=!1)},n.prototype.removeInstance=function(){Fn.removeInstance("Drawer",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.hide=function(){var t=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(e){t._targetEl.classList.remove(e)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(e){t._targetEl.classList.add(e)})):(this._getPlacementClasses(this._options.placement).active.map(function(e){t._targetEl.classList.remove(e)}),this._getPlacementClasses(this._options.placement).inactive.map(function(e){t._targetEl.classList.add(e)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},n.prototype.show=function(){var t=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(e){t._targetEl.classList.add(e)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(e){t._targetEl.classList.remove(e)})):(this._getPlacementClasses(this._options.placement).active.map(function(e){t._targetEl.classList.add(e)}),this._getPlacementClasses(this._options.placement).inactive.map(function(e){t._targetEl.classList.remove(e)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},n.prototype._createBackdrop=function(){var t,e=this;if(!this._visible){var i=document.createElement("div");i.setAttribute("drawer-backdrop",""),(t=i.classList).add.apply(t,this._options.backdropClasses.split(" ")),document.querySelector("body").append(i),i.addEventListener("click",function(){e.hide()})}},n.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]")!==null&&document.querySelector("[drawer-backdrop]").remove()},n.prototype._getPlacementClasses=function(t){switch(t){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]};default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]}}},n.prototype.isHidden=function(){return!this._visible},n.prototype.isVisible=function(){return this._visible},n.prototype.addEventListenerInstance=function(t,e,i){this._eventListenerInstances.push({element:t,type:e,handler:i})},n.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(t){t.element.removeEventListener(t.type,t.handler)}),this._eventListenerInstances=[]},n.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},n.prototype.updateOnShow=function(t){this._options.onShow=t},n.prototype.updateOnHide=function(t){this._options.onHide=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function f0(){document.querySelectorAll("[data-drawer-target]").forEach(function(n){var t=n.getAttribute("data-drawer-target"),e=document.getElementById(t);if(e){var i=n.getAttribute("data-drawer-placement"),r=n.getAttribute("data-drawer-body-scrolling"),s=n.getAttribute("data-drawer-backdrop"),o=n.getAttribute("data-drawer-edge"),a=n.getAttribute("data-drawer-edge-offset");new S6(e,{placement:i||gm.placement,bodyScrolling:r?r==="true":gm.bodyScrolling,backdrop:s?s==="true":gm.backdrop,edge:o?o==="true":gm.edge,edgeOffset:a||gm.edgeOffset})}else console.error("Drawer with id ".concat(t," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(n){var t=n.getAttribute("data-drawer-toggle"),e=document.getElementById(t);if(e){var i=Fn.getInstance("Drawer",t);if(i){var r=function(){i.toggle()};n.addEventListener("click",r),i.addEventListenerInstance(n,"click",r)}else console.error("Drawer with id ".concat(t," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(t," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(n){var t=n.getAttribute("data-drawer-dismiss")?n.getAttribute("data-drawer-dismiss"):n.getAttribute("data-drawer-hide"),e=document.getElementById(t);if(e){var i=Fn.getInstance("Drawer",t);if(i){var r=function(){i.hide()};n.addEventListener("click",r),i.addEventListenerInstance(n,"click",r)}else console.error("Drawer with id ".concat(t," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(t," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(n){var t=n.getAttribute("data-drawer-show"),e=document.getElementById(t);if(e){var i=Fn.getInstance("Drawer",t);if(i){var r=function(){i.show()};n.addEventListener("click",r),i.addEventListenerInstance(n,"click",r)}else console.error("Drawer with id ".concat(t," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(t," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=S6,window.initDrawers=f0);var DE=function(){return DE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},DE.apply(this,arguments)},IE={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},zfe={id:null,override:!0},M6=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=[]),i===void 0&&(i=IE),r===void 0&&(r=zfe),this._instanceId=r.id?r.id:t.id,this._tabsEl=t,this._items=e,this._activeTab=i?this.getTab(i.defaultTabId):null,this._options=DE(DE({},IE),i),this._initialized=!1,this.init(),Fn.addInstance("Tabs",this,this._instanceId,r.override)}return n.prototype.init=function(){var t=this;this._items.length&&!this._initialized&&(this._activeTab||this.setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(e){e.triggerEl.addEventListener("click",function(i){i.preventDefault(),t.show(e.id)})}))},n.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},n.prototype.removeInstance=function(){this.destroy(),Fn.removeInstance("Tabs",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getActiveTab=function(){return this._activeTab},n.prototype.setActiveTab=function(t){this._activeTab=t},n.prototype.getTab=function(t){return this._items.filter(function(e){return e.id===t})[0]},n.prototype.show=function(t,e){var i,r,s=this;e===void 0&&(e=!1);var o=this.getTab(t);o===this._activeTab&&!e||(this._items.map(function(a){var u,h;a!==o&&((u=a.triggerEl.classList).remove.apply(u,s._options.activeClasses.split(" ")),(h=a.triggerEl.classList).add.apply(h,s._options.inactiveClasses.split(" ")),a.targetEl.classList.add("hidden"),a.triggerEl.setAttribute("aria-selected","false"))}),(i=o.triggerEl.classList).add.apply(i,this._options.activeClasses.split(" ")),(r=o.triggerEl.classList).remove.apply(r,this._options.inactiveClasses.split(" ")),o.triggerEl.setAttribute("aria-selected","true"),o.targetEl.classList.remove("hidden"),this.setActiveTab(o),this._options.onShow(this,o))},n.prototype.updateOnShow=function(t){this._options.onShow=t},n}();function p0(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(n){var t=[],e=n.getAttribute("data-tabs-active-classes"),i=n.getAttribute("data-tabs-inactive-classes"),r=null;n.querySelectorAll('[role="tab"]').forEach(function(s){var o=s.getAttribute("aria-selected")==="true",a={id:s.getAttribute("data-tabs-target"),triggerEl:s,targetEl:document.querySelector(s.getAttribute("data-tabs-target"))};t.push(a),o&&(r=a.id)}),new M6(n,t,{defaultTabId:r,activeClasses:e||IE.activeClasses,inactiveClasses:i||IE.inactiveClasses})})}typeof window<"u"&&(window.Tabs=M6,window.initTabs=p0);var hf=function(){return hf=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hf.apply(this,arguments)},PE=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},RE={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Hfe={id:null,override:!0},E6=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=RE),r===void 0&&(r=Hfe),this._instanceId=r.id?r.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=hf(hf({},RE),i),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Fn.addInstance("Tooltip",this,this._instanceId,r.override)}return n.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},n.prototype.destroy=function(){var t=this;if(this._initialized){var e=this._getTriggerEvents();e.showEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._showHandler)}),e.hideEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},n.prototype.removeInstance=function(){Fn.removeInstance("Tooltip",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype._setupEventListeners=function(){var t=this,e=this._getTriggerEvents();this._showHandler=function(){t.show()},this._hideHandler=function(){t.hide()},e.showEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._showHandler)}),e.hideEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._hideHandler)})},n.prototype._createPopperInstance=function(){return mm(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},n.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},n.prototype._setupKeydownListener=function(){var t=this;this._keydownEventListener=function(e){e.key==="Escape"&&t.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},n.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},n.prototype._setupClickOutsideListener=function(){var t=this;this._clickOutsideEventListener=function(e){t._handleClickOutside(e,t._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._handleClickOutside=function(t,e){var i=t.target;i!==e&&!e.contains(i)&&!this._triggerEl.contains(i)&&this.isVisible()&&this.hide()},n.prototype.isVisible=function(){return this._visible},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},n.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(t){return hf(hf({},t),{modifiers:PE(PE([],t.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},n.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(t){return hf(hf({},t),{modifiers:PE(PE([],t.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},n.prototype.updateOnShow=function(t){this._options.onShow=t},n.prototype.updateOnHide=function(t){this._options.onHide=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function m0(){document.querySelectorAll("[data-tooltip-target]").forEach(function(n){var t=n.getAttribute("data-tooltip-target"),e=document.getElementById(t);if(e){var i=n.getAttribute("data-tooltip-trigger"),r=n.getAttribute("data-tooltip-placement");new E6(e,n,{placement:r||RE.placement,triggerType:i||RE.triggerType})}else console.error('The tooltip element with id "'.concat(t,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=E6,window.initTooltips=m0);var ff=function(){return ff=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ff.apply(this,arguments)},kE=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},kb={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},jfe={id:null,override:!0},T6=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=kb),r===void 0&&(r=jfe),this._instanceId=r.id?r.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=ff(ff({},kb),i),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Fn.addInstance("Popover",this,r.id?r.id:this._targetEl.id,r.override)}return n.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},n.prototype.destroy=function(){var t=this;if(this._initialized){var e=this._getTriggerEvents();e.showEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._showHandler),t._targetEl.removeEventListener(i,t._showHandler)}),e.hideEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._hideHandler),t._targetEl.removeEventListener(i,t._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},n.prototype.removeInstance=function(){Fn.removeInstance("Popover",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype._setupEventListeners=function(){var t=this,e=this._getTriggerEvents();this._showHandler=function(){t.show()},this._hideHandler=function(){setTimeout(function(){t._targetEl.matches(":hover")||t.hide()},100)},e.showEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._showHandler),t._targetEl.addEventListener(i,t._showHandler)}),e.hideEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._hideHandler),t._targetEl.addEventListener(i,t._hideHandler)})},n.prototype._createPopperInstance=function(){return mm(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},n.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},n.prototype._setupKeydownListener=function(){var t=this;this._keydownEventListener=function(e){e.key==="Escape"&&t.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},n.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},n.prototype._setupClickOutsideListener=function(){var t=this;this._clickOutsideEventListener=function(e){t._handleClickOutside(e,t._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._handleClickOutside=function(t,e){var i=t.target;i!==e&&!e.contains(i)&&!this._triggerEl.contains(i)&&this.isVisible()&&this.hide()},n.prototype.isVisible=function(){return this._visible},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},n.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(t){return ff(ff({},t),{modifiers:kE(kE([],t.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},n.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(t){return ff(ff({},t),{modifiers:kE(kE([],t.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},n.prototype.updateOnShow=function(t){this._options.onShow=t},n.prototype.updateOnHide=function(t){this._options.onHide=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function g0(){document.querySelectorAll("[data-popover-target]").forEach(function(n){var t=n.getAttribute("data-popover-target"),e=document.getElementById(t);if(e){var i=n.getAttribute("data-popover-trigger"),r=n.getAttribute("data-popover-placement"),s=n.getAttribute("data-popover-offset");new T6(e,n,{placement:r||kb.placement,offset:s?parseInt(s):kb.offset,triggerType:i||kb.triggerType})}else console.error('The popover element with id "'.concat(t,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=T6,window.initPopovers=g0);var LE=function(){return LE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},LE.apply(this,arguments)},FL={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Wfe={id:null,override:!0},A6=function(){function n(t,e,i,r,s){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=null),r===void 0&&(r=FL),s===void 0&&(s=Wfe),this._instanceId=s.id?s.id:i.id,this._parentEl=t,this._triggerEl=e,this._targetEl=i,this._options=LE(LE({},FL),r),this._visible=!1,this._initialized=!1,this.init(),Fn.addInstance("Dial",this,this._instanceId,s.override)}return n.prototype.init=function(){var t=this;if(this._triggerEl&&this._targetEl&&!this._initialized){var e=this._getTriggerEventTypes(this._options.triggerType);this._showEventHandler=function(){t.show()},e.showEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._showEventHandler),t._targetEl.addEventListener(i,t._showEventHandler)}),this._hideEventHandler=function(){t._parentEl.matches(":hover")||t.hide()},e.hideEvents.forEach(function(i){t._parentEl.addEventListener(i,t._hideEventHandler)}),this._initialized=!0}},n.prototype.destroy=function(){var t=this;if(this._initialized){var e=this._getTriggerEventTypes(this._options.triggerType);e.showEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._showEventHandler),t._targetEl.removeEventListener(i,t._showEventHandler)}),e.hideEvents.forEach(function(i){t._parentEl.removeEventListener(i,t._hideEventHandler)}),this._initialized=!1}},n.prototype.removeInstance=function(){Fn.removeInstance("Dial",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},n.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},n.prototype.toggle=function(){this._visible?this.hide():this.show()},n.prototype.isHidden=function(){return!this._visible},n.prototype.isVisible=function(){return this._visible},n.prototype._getTriggerEventTypes=function(t){switch(t){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},n.prototype.updateOnShow=function(t){this._options.onShow=t},n.prototype.updateOnHide=function(t){this._options.onHide=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function y0(){document.querySelectorAll("[data-dial-init]").forEach(function(n){var t=n.querySelector("[data-dial-toggle]");if(t){var e=t.getAttribute("data-dial-toggle"),i=document.getElementById(e);if(i){var r=t.getAttribute("data-dial-trigger");new A6(n,t,i,{triggerType:r||FL.triggerType})}else console.error("Dial with id ".concat(e," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(n.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}typeof window<"u"&&(window.Dial=A6,window.initDials=y0);var NE=function(){return NE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NE.apply(this,arguments)},D6={minValue:null,maxValue:null,onIncrement:function(){},onDecrement:function(){}},Gfe={id:null,override:!0},I6=function(){function n(t,e,i,r,s){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=null),r===void 0&&(r=D6),s===void 0&&(s=Gfe),this._instanceId=s.id?s.id:t.id,this._targetEl=t,this._incrementEl=e,this._decrementEl=i,this._options=NE(NE({},D6),r),this._initialized=!1,this.init(),Fn.addInstance("InputCounter",this,this._instanceId,s.override)}return n.prototype.init=function(){var t=this;this._targetEl&&!this._initialized&&(this._inputHandler=function(e){{var i=e.target;/^\d*$/.test(i.value)||(i.value=i.value.replace(/[^\d]/g,"")),t._options.maxValue!==null&&parseInt(i.value)>t._options.maxValue&&(i.value=t._options.maxValue.toString()),t._options.minValue!==null&&parseInt(i.value)<t._options.minValue&&(i.value=t._options.minValue.toString())}},this._incrementClickHandler=function(){t.increment()},this._decrementClickHandler=function(){t.decrement()},this._targetEl.addEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.addEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.addEventListener("click",this._decrementClickHandler),this._initialized=!0)},n.prototype.destroy=function(){this._targetEl&&this._initialized&&(this._targetEl.removeEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.removeEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.removeEventListener("click",this._decrementClickHandler),this._initialized=!1)},n.prototype.removeInstance=function(){Fn.removeInstance("InputCounter",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getCurrentValue=function(){return parseInt(this._targetEl.value)||0},n.prototype.increment=function(){this._options.maxValue!==null&&this.getCurrentValue()>=this._options.maxValue||(this._targetEl.value=(this.getCurrentValue()+1).toString(),this._options.onIncrement(this))},n.prototype.decrement=function(){this._options.minValue!==null&&this.getCurrentValue()<=this._options.minValue||(this._targetEl.value=(this.getCurrentValue()-1).toString(),this._options.onDecrement(this))},n.prototype.updateOnIncrement=function(t){this._options.onIncrement=t},n.prototype.updateOnDecrement=function(t){this._options.onDecrement=t},n}();function v0(){document.querySelectorAll("[data-input-counter]").forEach(function(n){var t=n.id,e=document.querySelector('[data-input-counter-increment="'+t+'"]'),i=document.querySelector('[data-input-counter-decrement="'+t+'"]'),r=n.getAttribute("data-input-counter-min"),s=n.getAttribute("data-input-counter-max");n?Fn.instanceExists("InputCounter",n.getAttribute("id"))||new I6(n,e||null,i||null,{minValue:r?parseInt(r):null,maxValue:s?parseInt(s):null}):console.error('The target element with id "'.concat(t,'" does not exist. Please check the data-input-counter attribute.'))})}typeof window<"u"&&(window.InputCounter=I6,window.initInputCounters=v0);var OE=function(){return OE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},OE.apply(this,arguments)},FE={htmlEntities:!1,contentType:"input",onCopy:function(){}},$fe={id:null,override:!0},P6=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=FE),r===void 0&&(r=$fe),this._instanceId=r.id?r.id:e.id,this._triggerEl=t,this._targetEl=e,this._options=OE(OE({},FE),i),this._initialized=!1,this.init(),Fn.addInstance("CopyClipboard",this,this._instanceId,r.override)}return n.prototype.init=function(){var t=this;this._targetEl&&this._triggerEl&&!this._initialized&&(this._triggerElClickHandler=function(){t.copy()},this._triggerEl&&this._triggerEl.addEventListener("click",this._triggerElClickHandler),this._initialized=!0)},n.prototype.destroy=function(){this._triggerEl&&this._targetEl&&this._initialized&&(this._triggerEl&&this._triggerEl.removeEventListener("click",this._triggerElClickHandler),this._initialized=!1)},n.prototype.removeInstance=function(){Fn.removeInstance("CopyClipboard",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getTargetValue=function(){if(this._options.contentType==="input")return this._targetEl.value;if(this._options.contentType==="innerHTML")return this._targetEl.innerHTML;if(this._options.contentType==="textContent")return this._targetEl.textContent.replace(/\s+/g," ").trim()},n.prototype.copy=function(){var t=this.getTargetValue();this._options.htmlEntities&&(t=this.decodeHTML(t));var e=document.createElement("textarea");return e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this._options.onCopy(this),t},n.prototype.decodeHTML=function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.textContent},n.prototype.updateOnCopyCallback=function(t){this._options.onCopy=t},n}();function _0(){document.querySelectorAll("[data-copy-to-clipboard-target]").forEach(function(n){var t=n.getAttribute("data-copy-to-clipboard-target"),e=document.getElementById(t),i=n.getAttribute("data-copy-to-clipboard-content-type"),r=n.getAttribute("data-copy-to-clipboard-html-entities");e?Fn.instanceExists("CopyClipboard",e.getAttribute("id"))||new P6(n,e,{htmlEntities:r&&r==="true"?!0:FE.htmlEntities,contentType:i||FE.contentType}):console.error('The target element with id "'.concat(t,'" does not exist. Please check the data-copy-to-clipboard-target attribute.'))})}typeof window<"u"&&(window.CopyClipboard=P6,window.initClipboards=_0);function GL(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function qfe(n){if(Array.isArray(n))return n}function Xfe(n){if(Array.isArray(n))return GL(n)}function Yfe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function YL(n,t,e){return t=mf(t),epe(n,Z6()?Reflect.construct(t,e||[],mf(n).constructor):t.apply(n,e))}function _m(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function R6(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,ipe(i.key),i)}}function bm(n,t,e){return t&&R6(n.prototype,t),e&&R6(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Bb(){return Bb=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,t,e){var i=tpe(n,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?n:e):r.value}},Bb.apply(null,arguments)}function mf(n){return mf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mf(n)}function ZL(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&$L(n,t)}function Z6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z6=function(){return!!n})()}function Zfe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Kfe(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,r,s,o,a=[],u=!0,h=!1;try{if(s=(e=e.call(n)).next,t===0){if(Object(e)!==e)return;u=!1}else for(;!(u=(i=s.call(e)).done)&&(a.push(i.value),a.length!==t);u=!0);}catch(p){h=!0,r=p}finally{try{if(!u&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(h)throw r}}return a}}function Qfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function epe(n,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yfe(n)}function $L(n,t){return $L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},$L(n,t)}function cl(n,t){return qfe(n)||Kfe(n,t)||K6(n,t)||Qfe()}function tpe(n,t){for(;!{}.hasOwnProperty.call(n,t)&&(n=mf(n))!==null;);return n}function zb(n){return Xfe(n)||Zfe(n)||K6(n)||Jfe()}function npe(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function ipe(n){var t=npe(n,"string");return typeof t=="symbol"?t:t+""}function UE(n){"@babel/helpers - typeof";return UE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UE(n)}function K6(n,t){if(n){if(typeof n=="string")return GL(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?GL(n,t):void 0}}function zd(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function KL(n){return n[n.length-1]}function vm(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return e.forEach(function(r){n.includes(r)||n.push(r)}),n}function BL(n,t){return n?n.split(t):[]}function QL(n,t,e){var i=t===void 0||n>=t,r=e===void 0||n<=e;return i&&r}function Q6(n,t,e){return n<t?t:n>e?e:n}function C0(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",s=Object.keys(e).reduce(function(a,u){var h=e[u];return typeof h=="function"&&(h=h(i)),"".concat(a," ").concat(u,'="').concat(h,'"')},n);r+="<".concat(s,"></").concat(n,">");var o=i+1;return o<t?C0(n,t,e,o,r):r}function JL(n){return n.replace(/>\s+/g,">").replace(/\s+</,"<")}function qL(n){return new Date(n).setHours(0,0,0,0)}function xm(){return new Date().setHours(0,0,0,0)}function pf(){switch(arguments.length){case 0:return xm();case 1:return qL(arguments.length<=0?void 0:arguments[0])}var n=new Date(0);return n.setFullYear.apply(n,arguments),n.setHours(0,0,0,0)}function b0(n,t){var e=new Date(n);return e.setDate(e.getDate()+t)}function rpe(n,t){return b0(n,t*7)}function zE(n,t){var e=new Date(n),i=e.getMonth()+t,r=i%12;r<0&&(r+=12);var s=e.setMonth(i);return e.getMonth()!==r?e.setDate(0):s}function x0(n,t){var e=new Date(n),i=e.getMonth(),r=e.setFullYear(e.getFullYear()+t);return i===1&&e.getMonth()===2?e.setDate(0):r}function k6(n,t){return(n-t+7)%7}function HE(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=new Date(n).getDay();return b0(n,k6(t,e)-k6(i,e))}function spe(n){var t=HE(n,4,1),e=HE(new Date(t).setMonth(0,4),4,1);return Math.round((t-e)/6048e5)+1}function ym(n,t){var e=new Date(n).getFullYear();return Math.floor(e/t)*t}var XL=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,ope=/[\s!-/:-@[-`{-~年月日]+/,VL={},L6={y:function(t,e){return new Date(t).setFullYear(parseInt(e,10))},m:function(t,e,i){var r=new Date(t),s=parseInt(e,10)-1;if(isNaN(s)){if(!e)return NaN;var o=e.toLowerCase(),a=function(h){return h.toLowerCase().startsWith(o)};if(s=i.monthsShort.findIndex(a),s<0&&(s=i.months.findIndex(a)),s<0)return NaN}return r.setMonth(s),r.getMonth()!==J6(s)?r.setDate(0):r.getTime()},d:function(t,e){return new Date(t).setDate(parseInt(e,10))}},ape={d:function(t){return t.getDate()},dd:function(t){return BE(t.getDate(),2)},D:function(t,e){return e.daysShort[t.getDay()]},DD:function(t,e){return e.days[t.getDay()]},m:function(t){return t.getMonth()+1},mm:function(t){return BE(t.getMonth()+1,2)},M:function(t,e){return e.monthsShort[t.getMonth()]},MM:function(t,e){return e.months[t.getMonth()]},y:function(t){return t.getFullYear()},yy:function(t){return BE(t.getFullYear(),2).slice(-2)},yyyy:function(t){return BE(t.getFullYear(),4)}};function J6(n){return n>-1?n%12:J6(n+12)}function BE(n,t){return n.toString().padStart(t,"0")}function ej(n){if(typeof n!="string")throw new Error("Invalid date format.");if(n in VL)return VL[n];var t=n.split(XL),e=n.match(new RegExp(XL,"g"));if(t.length===0||!e)throw new Error("Invalid date format.");var i=e.map(function(s){return ape[s]}),r=Object.keys(L6).reduce(function(s,o){var a=e.find(function(u){return u[0]!=="D"&&u[0].toLowerCase()===o});return a&&s.push(o),s},[]);return VL[n]={parser:function(o,a){var u=o.split(ope).reduce(function(h,p,v){if(p.length>0&&e[v]){var x=e[v][0];x==="M"?h.m=p:x!=="D"&&(h[x]=p)}return h},{});return r.reduce(function(h,p){var v=L6[p](h,u[p],a);return isNaN(v)?h:v},xm())},formatter:function(o,a){var u=i.reduce(function(h,p,v){return h+="".concat(t[v]).concat(p(o,a))},"");return u+=KL(t)}}}function Vb(n,t,e){if(n instanceof Date||typeof n=="number"){var i=qL(n);return isNaN(i)?void 0:i}if(n){if(n==="today")return xm();if(t&&t.toValue){var r=t.toValue(n,t,e);return isNaN(r)?void 0:qL(r)}return ej(t).parser(n,e)}}function Ub(n,t,e){if(isNaN(n)||!n&&n!==0)return"";var i=typeof n=="number"?new Date(n):n;return t.toDisplay?t.toDisplay(i,t,e):ej(t).formatter(i,e)}var jE=new WeakMap,tj=EventTarget.prototype,N6=tj.addEventListener,O6=tj.removeEventListener;function eN(n,t){var e=jE.get(n);e||(e=[],jE.set(n,e)),t.forEach(function(i){N6.call.apply(N6,zb(i)),e.push(i)})}function nj(n){var t=jE.get(n);t&&(t.forEach(function(e){O6.call.apply(O6,zb(e))}),jE.delete(n))}Event.prototype.composedPath||(F6=function n(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.push(t);var i;return t.parentNode?i=t.parentNode:t.host?i=t.host:t.defaultView&&(i=t.defaultView),i?n(i,e):e},Event.prototype.composedPath=function(){return F6(this.target)});var F6;function ij(n,t,e){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=n[i];return t(r)?r:r===e||!r.parentElement?void 0:ij(n,t,e,i+1)}function rj(n,t){var e=typeof t=="function"?t:function(i){return i.matches(t)};return ij(n.composedPath(),e,n.currentTarget)}var Lb={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},Hb={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/></svg>',orientation:"auto",pickLevel:0,prevArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5H1m0 0 4 4M1 5l4-4"/></svg>',showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},UL=null;function Hd(n){return UL==null&&(UL=document.createRange()),UL.createContextualFragment(n)}function Ob(n){n.style.display!=="none"&&(n.style.display&&(n.dataset.styleDisplay=n.style.display),n.style.display="none")}function Fb(n){n.style.display==="none"&&(n.dataset.styleDisplay?(n.style.display=n.dataset.styleDisplay,delete n.dataset.styleDisplay):n.style.display="")}function WE(n){n.firstChild&&(n.removeChild(n.firstChild),WE(n))}function lpe(n,t){WE(n),t instanceof DocumentFragment?n.appendChild(t):typeof t=="string"?n.appendChild(Hd(t)):typeof t.forEach=="function"&&t.forEach(function(e){n.appendChild(e)})}var zL=Hb.language,cpe=Hb.format,upe=Hb.weekStart;function B6(n,t){return n.length<6&&t>=0&&t<7?vm(n,t):n}function V6(n){return(n+6)%7}function U6(n,t,e,i){var r=Vb(n,t,e);return r!==void 0?r:i}function HL(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,i=parseInt(n,10);return i>=0&&i<=e?i:t}function jL(n,t){var e=Object.assign({},n),i={},r=t.constructor.locales,s=t.config||{},o=s.format,a=s.language,u=s.locale,h=s.maxDate,p=s.maxView,v=s.minDate,x=s.pickLevel,S=s.startView,D=s.weekStart;if(e.language){var O;if(e.language!==a&&(r[e.language]?O=e.language:(O=e.language.split("-")[0],r[O]===void 0&&(O=!1))),delete e.language,O){a=i.language=O;var N=u||r[zL];u=Object.assign({format:cpe,weekStart:upe},r[zL]),a!==zL&&Object.assign(u,r[a]),i.locale=u,o===N.format&&(o=i.format=u.format),D===N.weekStart&&(D=i.weekStart=u.weekStart,i.weekEnd=V6(u.weekStart))}}if(e.format){var T=typeof e.format.toDisplay=="function",j=typeof e.format.toValue=="function",Z=XL.test(e.format);(T&&j||Z)&&(o=i.format=e.format),delete e.format}var G=v,le=h;if(e.minDate!==void 0&&(G=e.minDate===null?pf(0,0,1):U6(e.minDate,o,u,G),delete e.minDate),e.maxDate!==void 0&&(le=e.maxDate===null?void 0:U6(e.maxDate,o,u,le),delete e.maxDate),le<G?(v=i.minDate=le,h=i.maxDate=G):(v!==G&&(v=i.minDate=G),h!==le&&(h=i.maxDate=le)),e.datesDisabled&&(i.datesDisabled=e.datesDisabled.reduce(function(ze,de){var Re=Vb(de,o,u);return Re!==void 0?vm(ze,Re):ze},[]),delete e.datesDisabled),e.defaultViewDate!==void 0){var K=Vb(e.defaultViewDate,o,u);K!==void 0&&(i.defaultViewDate=K),delete e.defaultViewDate}if(e.weekStart!==void 0){var oe=Number(e.weekStart)%7;isNaN(oe)||(D=i.weekStart=oe,i.weekEnd=V6(oe)),delete e.weekStart}if(e.daysOfWeekDisabled&&(i.daysOfWeekDisabled=e.daysOfWeekDisabled.reduce(B6,[]),delete e.daysOfWeekDisabled),e.daysOfWeekHighlighted&&(i.daysOfWeekHighlighted=e.daysOfWeekHighlighted.reduce(B6,[]),delete e.daysOfWeekHighlighted),e.maxNumberOfDates!==void 0){var ue=parseInt(e.maxNumberOfDates,10);ue>=0&&(i.maxNumberOfDates=ue,i.multidate=ue!==1),delete e.maxNumberOfDates}e.dateDelimiter&&(i.dateDelimiter=String(e.dateDelimiter),delete e.dateDelimiter);var te=x;e.pickLevel!==void 0&&(te=HL(e.pickLevel,2),delete e.pickLevel),te!==x&&(x=i.pickLevel=te);var V=p;e.maxView!==void 0&&(V=HL(e.maxView,p),delete e.maxView),V=x>V?x:V,V!==p&&(p=i.maxView=V);var se=S;if(e.startView!==void 0&&(se=HL(e.startView,se),delete e.startView),se<x?se=x:se>p&&(se=p),se!==S&&(i.startView=se),e.prevArrow){var we=Hd(e.prevArrow);we.childNodes.length>0&&(i.prevArrow=we.childNodes),delete e.prevArrow}if(e.nextArrow){var he=Hd(e.nextArrow);he.childNodes.length>0&&(i.nextArrow=he.childNodes),delete e.nextArrow}if(e.disableTouchKeyboard!==void 0&&(i.disableTouchKeyboard="ontouchstart"in document&&!!e.disableTouchKeyboard,delete e.disableTouchKeyboard),e.orientation){var je=e.orientation.toLowerCase().split(/\s+/g);i.orientation={x:je.find(function(ze){return ze==="left"||ze==="right"})||"auto",y:je.find(function(ze){return ze==="top"||ze==="bottom"})||"auto"},delete e.orientation}if(e.todayBtnMode!==void 0){switch(e.todayBtnMode){case 0:case 1:i.todayBtnMode=e.todayBtnMode}delete e.todayBtnMode}return Object.keys(e).forEach(function(ze){e[ze]!==void 0&&zd(Hb,ze)&&(i[ze]=e[ze])}),i}var dpe=JL(`<div class="datepicker hidden">
  <div class="datepicker-picker inline-block rounded-lg bg-white dark:bg-gray-700 shadow-lg p-4">
    <div class="datepicker-header">
      <div class="datepicker-title bg-white dark:bg-gray-700 dark:text-white px-2 py-3 text-center font-semibold"></div>
      <div class="datepicker-controls flex justify-between mb-2">
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 prev-btn"></button>
        <button type="button" class="text-sm rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 font-semibold py-2.5 px-5 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-200 view-switch"></button>
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 next-btn"></button>
      </div>
    </div>
    <div class="datepicker-main p-1"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls flex space-x-2 rtl:space-x-reverse mt-2">
        <button type="button" class="%buttonClass% today-btn text-white bg-blue-700 !bg-primary-700 dark:bg-blue-600 dark:!bg-primary-600 hover:bg-blue-800 hover:!bg-primary-800 dark:hover:bg-blue-700 dark:hover:!bg-primary-700 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
        <button type="button" class="%buttonClass% clear-btn text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
      </div>
    </div>
  </div>
</div>`),hpe=JL(`<div class="days">
  <div class="days-of-week grid grid-cols-7 mb-1">`.concat(C0("span",7,{class:"dow block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
  <div class="datepicker-grid w-64 grid grid-cols-7">`).concat(C0("span",42,{class:"block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"}),`</div>
</div>`)),fpe=JL(`<div class="calendar-weeks">
  <div class="days-of-week flex"><span class="dow h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"></span></div>
  <div class="weeks">`.concat(C0("span",6,{class:"week block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
</div>`)),tN=function(){function n(t,e){_m(this,n),Object.assign(this,e,{picker:t,element:Hd('<div class="datepicker-view flex"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}return bm(n,[{key:"init",value:function(e){e.pickLevel!==void 0&&(this.isMinView=this.id===e.pickLevel),this.setOptions(e),this.updateFocus(),this.updateSelection()}},{key:"performBeforeHook",value:function(e,i,r){var s=this.beforeShow(new Date(r));switch(UE(s)){case"boolean":s={enabled:s};break;case"string":s={classes:s}}if(s){if(s.enabled===!1&&(e.classList.add("disabled"),vm(this.disabled,i)),s.classes){var o,a=s.classes.split(/\s+/);(o=e.classList).add.apply(o,zb(a)),a.includes("disabled")&&vm(this.disabled,i)}s.content&&lpe(e,s.content)}}}])}(),ppe=function(n){function t(e){return _m(this,t),YL(this,t,[e,{id:0,name:"days",cellClass:"day"}])}return ZL(t,n),bm(t,[{key:"init",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(r){var s=Hd(hpe).firstChild;this.dow=s.firstChild,this.grid=s.lastChild,this.element.appendChild(s)}Bb(mf(t.prototype),"init",this).call(this,i)}},{key:"setOptions",value:function(i){var r=this,s;if(zd(i,"minDate")&&(this.minDate=i.minDate),zd(i,"maxDate")&&(this.maxDate=i.maxDate),i.datesDisabled&&(this.datesDisabled=i.datesDisabled),i.daysOfWeekDisabled&&(this.daysOfWeekDisabled=i.daysOfWeekDisabled,s=!0),i.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=i.daysOfWeekHighlighted),i.todayHighlight!==void 0&&(this.todayHighlight=i.todayHighlight),i.weekStart!==void 0&&(this.weekStart=i.weekStart,this.weekEnd=i.weekEnd,s=!0),i.locale){var o=this.locale=i.locale;this.dayNames=o.daysMin,this.switchLabelFormat=o.titleFormat,s=!0}if(i.beforeShowDay!==void 0&&(this.beforeShow=typeof i.beforeShowDay=="function"?i.beforeShowDay:void 0),i.calendarWeeks!==void 0)if(i.calendarWeeks&&!this.calendarWeeks){var a=Hd(fpe).firstChild;this.calendarWeeks={element:a,dow:a.firstChild,weeks:a.lastChild},this.element.insertBefore(a,this.element.firstChild)}else this.calendarWeeks&&!i.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);i.showDaysOfWeek!==void 0&&(i.showDaysOfWeek?(Fb(this.dow),this.calendarWeeks&&Fb(this.calendarWeeks.dow)):(Ob(this.dow),this.calendarWeeks&&Ob(this.calendarWeeks.dow))),s&&Array.from(this.dow.children).forEach(function(u,h){var p=(r.weekStart+h)%7;u.textContent=r.dayNames[p],u.className=r.daysOfWeekDisabled.includes(p)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}},{key:"updateFocus",value:function(){var i=new Date(this.picker.viewDate),r=i.getFullYear(),s=i.getMonth(),o=pf(r,s,1),a=HE(o,this.weekStart,this.weekStart);this.first=o,this.last=pf(r,s+1,0),this.start=a,this.focused=this.picker.viewDate}},{key:"updateSelection",value:function(){var i=this.picker.datepicker,r=i.dates,s=i.rangepicker;this.selected=r,s&&(this.range=s.dates)}},{key:"render",value:function(){var i=this;this.today=this.todayHighlight?xm():void 0,this.disabled=zb(this.datesDisabled);var r=Ub(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(r),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){var s=HE(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach(function(o,a){o.textContent=spe(rpe(s,a))})}Array.from(this.grid.children).forEach(function(o,a){var u=o.classList,h=b0(i.start,a),p=new Date(h),v=p.getDay();if(o.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(i.cellClass),o.dataset.date=h,o.textContent=p.getDate(),h<i.first?u.add("prev","text-gray-500","dark:text-white"):h>i.last&&u.add("next","text-gray-500","dark:text-white"),i.today===h&&u.add("today","bg-gray-100","dark:bg-gray-600"),(h<i.minDate||h>i.maxDate||i.disabled.includes(h))&&(u.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),u.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer")),i.daysOfWeekDisabled.includes(v)&&(u.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),u.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer"),vm(i.disabled,h)),i.daysOfWeekHighlighted.includes(v)&&u.add("highlighted"),i.range){var x=cl(i.range,2),S=x[0],D=x[1];h>S&&h<D&&(u.add("range","bg-gray-200","dark:bg-gray-600"),u.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),h===S&&(u.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),u.remove("rounded-lg","rounded-r-lg")),h===D&&(u.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),u.remove("rounded-lg","rounded-l-lg"))}i.selected.includes(h)&&(u.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),u.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","dark:bg-gray-600","bg-gray-100","bg-gray-200")),h===i.focused&&u.add("focused"),i.beforeShow&&i.performBeforeHook(o,h,h)})}},{key:"refresh",value:function(){var i=this,r=this.range||[],s=cl(r,2),o=s[0],a=s[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(u){u.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white","focused"),u.classList.add("text-gray-900","rounded-lg","dark:text-white")}),Array.from(this.grid.children).forEach(function(u){var h=Number(u.dataset.date),p=u.classList;p.remove("bg-gray-200","dark:bg-gray-600","rounded-l-lg","rounded-r-lg"),h>o&&h<a&&(p.add("range","bg-gray-200","dark:bg-gray-600"),p.remove("rounded-lg")),h===o&&(p.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),p.remove("rounded-lg")),h===a&&(p.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),p.remove("rounded-lg")),i.selected.includes(h)&&(p.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),p.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","bg-gray-100","bg-gray-200","dark:bg-gray-600")),h===i.focused&&p.add("focused")})}},{key:"refreshFocus",value:function(){var i=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(function(r){r.classList.remove("focused")}),this.grid.children[i].classList.add("focused")}}])}(tN);function z6(n,t){if(!(!n||!n[0]||!n[1])){var e=cl(n,2),i=cl(e[0],2),r=i[0],s=i[1],o=cl(e[1],2),a=o[0],u=o[1];if(!(r>t||a<t))return[r===t?s:-1,a===t?u:12]}}var mpe=function(n){function t(e){return _m(this,t),YL(this,t,[e,{id:1,name:"months",cellClass:"month"}])}return ZL(t,n),bm(t,[{key:"init",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(Hd(C0("span",12,{"data-month":function(o){return o}})))),Bb(mf(t.prototype),"init",this).call(this,i)}},{key:"setOptions",value:function(i){if(i.locale&&(this.monthNames=i.locale.monthsShort),zd(i,"minDate"))if(i.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{var r=new Date(i.minDate);this.minYear=r.getFullYear(),this.minMonth=r.getMonth(),this.minDate=r.setDate(1)}if(zd(i,"maxDate"))if(i.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{var s=new Date(i.maxDate);this.maxYear=s.getFullYear(),this.maxMonth=s.getMonth(),this.maxDate=pf(this.maxYear,this.maxMonth+1,0)}i.beforeShowMonth!==void 0&&(this.beforeShow=typeof i.beforeShowMonth=="function"?i.beforeShowMonth:void 0)}},{key:"updateFocus",value:function(){var i=new Date(this.picker.viewDate);this.year=i.getFullYear(),this.focused=i.getMonth()}},{key:"updateSelection",value:function(){var i=this.picker.datepicker,r=i.dates,s=i.rangepicker;this.selected=r.reduce(function(o,a){var u=new Date(a),h=u.getFullYear(),p=u.getMonth();return o[h]===void 0?o[h]=[p]:vm(o[h],p),o},{}),s&&s.dates&&(this.range=s.dates.map(function(o){var a=new Date(o);return isNaN(a)?void 0:[a.getFullYear(),a.getMonth()]}))}},{key:"render",value:function(){var i=this;this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);var r=this.selected[this.year]||[],s=this.year<this.minYear||this.year>this.maxYear,o=this.year===this.minYear,a=this.year===this.maxYear,u=z6(this.range,this.year);Array.from(this.grid.children).forEach(function(h,p){var v=h.classList,x=pf(i.year,p,1);if(h.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(i.cellClass),i.isMinView&&(h.dataset.date=x),h.textContent=i.monthNames[p],(s||o&&p<i.minMonth||a&&p>i.maxMonth)&&v.add("disabled"),u){var S=cl(u,2),D=S[0],O=S[1];p>D&&p<O&&v.add("range"),p===D&&v.add("range-start"),p===O&&v.add("range-end")}r.includes(p)&&(v.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),v.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),p===i.focused&&v.add("focused"),i.beforeShow&&i.performBeforeHook(h,p,x)})}},{key:"refresh",value:function(){var i=this,r=this.selected[this.year]||[],s=z6(this.range,this.year)||[],o=cl(s,2),a=o[0],u=o[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(h){h.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","dark:bg-blue-600","dark:!bg-primary-700","dark:text-white","text-white","focused"),h.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")}),Array.from(this.grid.children).forEach(function(h,p){var v=h.classList;p>a&&p<u&&v.add("range"),p===a&&v.add("range-start"),p===u&&v.add("range-end"),r.includes(p)&&(v.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),v.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),p===i.focused&&v.add("focused")})}},{key:"refreshFocus",value:function(){this.grid.querySelectorAll(".focused").forEach(function(i){i.classList.remove("focused")}),this.grid.children[this.focused].classList.add("focused")}}])}(tN);function gpe(n){return zb(n).reduce(function(t,e,i){return t+=i?e:e.toUpperCase()},"")}var H6=function(n){function t(e,i){return _m(this,t),YL(this,t,[e,i])}return ZL(t,n),bm(t,[{key:"init",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r&&(this.navStep=this.step*10,this.beforeShowOption="beforeShow".concat(gpe(this.cellClass)),this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(Hd(C0("span",12)))),Bb(mf(t.prototype),"init",this).call(this,i)}},{key:"setOptions",value:function(i){if(zd(i,"minDate")&&(i.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=ym(i.minDate,this.step),this.minDate=pf(this.minYear,0,1))),zd(i,"maxDate")&&(i.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=ym(i.maxDate,this.step),this.maxDate=pf(this.maxYear,11,31))),i[this.beforeShowOption]!==void 0){var r=i[this.beforeShowOption];this.beforeShow=typeof r=="function"?r:void 0}}},{key:"updateFocus",value:function(){var i=new Date(this.picker.viewDate),r=ym(i,this.navStep),s=r+9*this.step;this.first=r,this.last=s,this.start=r-this.step,this.focused=ym(i,this.step)}},{key:"updateSelection",value:function(){var i=this,r=this.picker.datepicker,s=r.dates,o=r.rangepicker;this.selected=s.reduce(function(a,u){return vm(a,ym(u,i.step))},[]),o&&o.dates&&(this.range=o.dates.map(function(a){if(a!==void 0)return ym(a,i.step)}))}},{key:"render",value:function(){var i=this;this.disabled=[],this.picker.setViewSwitchLabel("".concat(this.first,"-").concat(this.last)),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach(function(r,s){var o=r.classList,a=i.start+s*i.step,u=pf(a,0,1);if(r.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(i.cellClass),i.isMinView&&(r.dataset.date=u),r.textContent=r.dataset.year=a,s===0?o.add("prev"):s===11&&o.add("next"),(a<i.minYear||a>i.maxYear)&&o.add("disabled"),i.range){var h=cl(i.range,2),p=h[0],v=h[1];a>p&&a<v&&o.add("range"),a===p&&o.add("range-start"),a===v&&o.add("range-end")}i.selected.includes(a)&&(o.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),o.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),a===i.focused&&o.add("focused"),i.beforeShow&&i.performBeforeHook(r,a,u)})}},{key:"refresh",value:function(){var i=this,r=this.range||[],s=cl(r,2),o=s[0],a=s[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(u){u.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark!bg-primary-600","dark:text-white","focused")}),Array.from(this.grid.children).forEach(function(u){var h=Number(u.textContent),p=u.classList;h>o&&h<a&&p.add("range"),h===o&&p.add("range-start"),h===a&&p.add("range-end"),i.selected.includes(h)&&(p.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),p.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),h===i.focused&&p.add("focused")})}},{key:"refreshFocus",value:function(){var i=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(function(r){r.classList.remove("focused")}),this.grid.children[i].classList.add("focused")}}])}(tN);function w0(n,t){var e={date:n.getDate(),viewDate:new Date(n.picker.viewDate),viewId:n.picker.currentView.id,datepicker:n};n.element.dispatchEvent(new CustomEvent(t,{detail:e}))}function GE(n,t){var e=n.config,i=e.minDate,r=e.maxDate,s=n.picker,o=s.currentView,a=s.viewDate,u;switch(o.id){case 0:u=zE(a,t);break;case 1:u=x0(a,t);break;default:u=x0(a,t*o.navStep)}u=Q6(u,i,r),n.picker.changeFocus(u).render()}function sj(n){var t=n.picker.currentView.id;t!==n.config.maxView&&n.picker.changeView(t+1).render()}function oj(n){n.config.updateOnBlur?n.update({autohide:!0}):(n.refresh("input"),n.hide())}function j6(n,t){var e=n.picker,i=new Date(e.viewDate),r=e.currentView.id,s=r===1?zE(i,t-i.getMonth()):x0(i,t-i.getFullYear());e.changeFocus(s).changeView(r-1).render()}function ype(n){var t=n.picker,e=xm();if(n.config.todayBtnMode===1){if(n.config.autohide){n.setDate(e);return}n.setDate(e,{render:!1}),t.update()}t.viewDate!==e&&t.changeFocus(e),t.changeView(0).render()}function vpe(n){n.setDate({clear:!0})}function _pe(n){sj(n)}function bpe(n){GE(n,-1)}function xpe(n){GE(n,1)}function wpe(n,t){var e=rj(t,".datepicker-cell");if(!(!e||e.classList.contains("disabled"))){var i=n.picker.currentView,r=i.id,s=i.isMinView;s?n.setDate(Number(e.dataset.date)):r===1?j6(n,Number(e.dataset.month)):j6(n,Number(e.dataset.year))}}function Cpe(n){!n.inline&&!n.config.disableTouchKeyboard&&n.inputField.focus()}function W6(n,t){if(t.title!==void 0&&(t.title?(n.controls.title.textContent=t.title,Fb(n.controls.title)):(n.controls.title.textContent="",Ob(n.controls.title))),t.prevArrow){var e=n.controls.prevBtn;WE(e),t.prevArrow.forEach(function(a){e.appendChild(a.cloneNode(!0))})}if(t.nextArrow){var i=n.controls.nextBtn;WE(i),t.nextArrow.forEach(function(a){i.appendChild(a.cloneNode(!0))})}if(t.locale&&(n.controls.todayBtn.textContent=t.locale.today,n.controls.clearBtn.textContent=t.locale.clear),t.todayBtn!==void 0&&(t.todayBtn?Fb(n.controls.todayBtn):Ob(n.controls.todayBtn)),zd(t,"minDate")||zd(t,"maxDate")){var r=n.datepicker.config,s=r.minDate,o=r.maxDate;n.controls.todayBtn.disabled=!QL(xm(),s,o)}t.clearBtn!==void 0&&(t.clearBtn?Fb(n.controls.clearBtn):Ob(n.controls.clearBtn))}function G6(n){var t=n.dates,e=n.config,i=t.length>0?KL(t):e.defaultViewDate;return Q6(i,e.minDate,e.maxDate)}function $6(n,t){var e=new Date(n.viewDate),i=new Date(t),r=n.currentView,s=r.id,o=r.year,a=r.first,u=r.last,h=i.getFullYear();switch(n.viewDate=t,h!==e.getFullYear()&&w0(n.datepicker,"changeYear"),i.getMonth()!==e.getMonth()&&w0(n.datepicker,"changeMonth"),s){case 0:return t<a||t>u;case 1:return h!==o;default:return h<a||h>u}}function WL(n){return window.getComputedStyle(n).direction}var Spe=function(){function n(t){_m(this,n),this.datepicker=t;var e=dpe.replace(/%buttonClass%/g,t.config.buttonClass),i=this.element=Hd(e).firstChild,r=cl(i.firstChild.children,3),s=r[0],o=r[1],a=r[2],u=s.firstElementChild,h=cl(s.lastElementChild.children,3),p=h[0],v=h[1],x=h[2],S=cl(a.firstChild.children,2),D=S[0],O=S[1],N={title:u,prevBtn:p,viewSwitch:v,nextBtn:x,todayBtn:D,clearBtn:O};this.main=o,this.controls=N;var T=t.inline?"inline":"dropdown";i.classList.add("datepicker-".concat(T)),T==="dropdown"&&i.classList.add("dropdown","absolute","top-0","left-0","z-50","pt-2"),W6(this,t.config),this.viewDate=G6(t),eN(t,[[i,"click",Cpe.bind(null,t),{capture:!0}],[o,"click",wpe.bind(null,t)],[N.viewSwitch,"click",_pe.bind(null,t)],[N.prevBtn,"click",bpe.bind(null,t)],[N.nextBtn,"click",xpe.bind(null,t)],[N.todayBtn,"click",ype.bind(null,t)],[N.clearBtn,"click",vpe.bind(null,t)]]),this.views=[new ppe(this),new mpe(this),new H6(this,{id:2,name:"years",cellClass:"year",step:1}),new H6(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[t.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),t.config.container.appendChild(this.element)}return bm(n,[{key:"setOptions",value:function(e){W6(this,e),this.views.forEach(function(i){i.init(e,!1)}),this.currentView.render()}},{key:"detach",value:function(){this.datepicker.config.container.removeChild(this.element)}},{key:"show",value:function(){if(!this.active){this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;var e=this.datepicker;if(!e.inline){var i=WL(e.inputField);i!==WL(e.config.container)?this.element.dir=i:this.element.dir&&this.element.removeAttribute("dir"),this.place(),e.config.disableTouchKeyboard&&e.inputField.blur()}w0(e,"show")}}},{key:"hide",value:function(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,w0(this.datepicker,"hide"))}},{key:"place",value:function(){var e=this.element,i=e.classList,r=e.style,s=this.datepicker,o=s.config,a=s.inputField,u=o.container,h=this.element.getBoundingClientRect(),p=h.width,v=h.height,x=u.getBoundingClientRect(),S=x.left,D=x.top,O=x.width,N=a.getBoundingClientRect(),T=N.left,j=N.top,Z=N.width,G=N.height,le=o.orientation,K=le.x,oe=le.y,ue,te,V;u===document.body?(ue=window.scrollY,te=T+window.scrollX,V=j+ue):(ue=u.scrollTop,te=T-S,V=j-D+ue),K==="auto"&&(te<0?(K="left",te=10):te+p>O?K="right":K=WL(a)==="rtl"?"right":"left"),K==="right"&&(te-=p-Z),oe==="auto"&&(oe=V-v<ue?"bottom":"top"),oe==="top"?V-=v:V+=G,i.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),i.add("datepicker-orient-".concat(oe),"datepicker-orient-".concat(K)),r.top=V&&"".concat(V,"px"),r.left=te&&"".concat(te,"px")}},{key:"setViewSwitchLabel",value:function(e){this.controls.viewSwitch.textContent=e}},{key:"setPrevBtnDisabled",value:function(e){this.controls.prevBtn.disabled=e}},{key:"setNextBtnDisabled",value:function(e){this.controls.nextBtn.disabled=e}},{key:"changeView",value:function(e){var i=this.currentView,r=this.views[e];return r.id!==i.id&&(this.currentView=r,this._renderMethod="render",w0(this.datepicker,"changeView"),this.main.replaceChild(r.element,i.element)),this}},{key:"changeFocus",value:function(e){return this._renderMethod=$6(this,e)?"render":"refreshFocus",this.views.forEach(function(i){i.updateFocus()}),this}},{key:"update",value:function(){var e=G6(this.datepicker);return this._renderMethod=$6(this,e)?"render":"refresh",this.views.forEach(function(i){i.updateFocus(),i.updateSelection()}),this}},{key:"render",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=e&&this._renderMethod||"render";delete this._renderMethod,this.currentView[i]()}}])}();function aj(n,t,e,i,r,s){if(QL(n,r,s)){if(i(n)){var o=t(n,e);return aj(o,t,e,i,r,s)}return n}}function VE(n,t,e,i){var r=n.picker,s=r.currentView,o=s.step||1,a=r.viewDate,u,h;switch(s.id){case 0:i?a=b0(a,e*7):t.ctrlKey||t.metaKey?a=x0(a,e):a=b0(a,e),u=b0,h=function(v){return s.disabled.includes(v)};break;case 1:a=zE(a,i?e*4:e),u=zE,h=function(v){var x=new Date(v),S=s.year,D=s.disabled;return x.getFullYear()===S&&D.includes(x.getMonth())};break;default:a=x0(a,e*(i?4:1)*o),u=x0,h=function(v){return s.disabled.includes(ym(v,o))}}a=aj(a,u,e<0?-o:o,h,s.minDate,s.maxDate),a!==void 0&&r.changeFocus(a).render()}function Mpe(n,t){if(t.key==="Tab"){oj(n);return}var e=n.picker,i=e.currentView,r=i.id,s=i.isMinView;if(e.active)if(n.editMode)switch(t.key){case"Escape":e.hide();break;case"Enter":n.exitEditMode({update:!0,autohide:n.config.autohide});break;default:return}else switch(t.key){case"Escape":e.hide();break;case"ArrowLeft":if(t.ctrlKey||t.metaKey)GE(n,-1);else if(t.shiftKey){n.enterEditMode();return}else VE(n,t,-1,!1);break;case"ArrowRight":if(t.ctrlKey||t.metaKey)GE(n,1);else if(t.shiftKey){n.enterEditMode();return}else VE(n,t,1,!1);break;case"ArrowUp":if(t.ctrlKey||t.metaKey)sj(n);else if(t.shiftKey){n.enterEditMode();return}else VE(n,t,-1,!0);break;case"ArrowDown":if(t.shiftKey&&!t.ctrlKey&&!t.metaKey){n.enterEditMode();return}VE(n,t,1,!0);break;case"Enter":s?n.setDate(e.viewDate):e.changeView(r-1).render();break;case"Backspace":case"Delete":n.enterEditMode();return;default:t.key.length===1&&!t.ctrlKey&&!t.metaKey&&n.enterEditMode();return}else switch(t.key){case"ArrowDown":case"Escape":e.show();break;case"Enter":n.update();break;default:return}t.preventDefault(),t.stopPropagation()}function Epe(n){n.config.showOnFocus&&!n._showing&&n.show()}function Tpe(n,t){var e=t.target;(n.picker.active||n.config.showOnClick)&&(e._active=e===document.activeElement,e._clicking=setTimeout(function(){delete e._active,delete e._clicking},2e3))}function Ape(n,t){var e=t.target;e._clicking&&(clearTimeout(e._clicking),delete e._clicking,e._active&&n.enterEditMode(),delete e._active,n.config.showOnClick&&n.show())}function Dpe(n,t){t.clipboardData.types.includes("text/plain")&&n.enterEditMode()}function Ipe(n,t){var e=n.element;if(e===document.activeElement){var i=n.picker.element;rj(t,function(r){return r===e||r===i})||oj(n)}}function lj(n,t){return n.map(function(e){return Ub(e,t.format,t.locale)}).join(t.dateDelimiter)}function cj(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=n.config,r=n.dates,s=n.rangepicker;if(t.length===0)return e?[]:void 0;var o=s&&n===s.datepickers[1],a=t.reduce(function(u,h){var p=Vb(h,i.format,i.locale);if(p===void 0)return u;if(i.pickLevel>0){var v=new Date(p);i.pickLevel===1?p=o?v.setMonth(v.getMonth()+1,0):v.setDate(1):p=o?v.setFullYear(v.getFullYear()+1,0,0):v.setMonth(0,1)}return QL(p,i.minDate,i.maxDate)&&!u.includes(p)&&!i.datesDisabled.includes(p)&&!i.daysOfWeekDisabled.includes(new Date(p).getDay())&&u.push(p),u},[]);if(a.length!==0)return i.multidate&&!e&&(a=a.reduce(function(u,h){return r.includes(h)||u.push(h),u},r.filter(function(u){return!a.includes(u)}))),i.maxNumberOfDates&&a.length>i.maxNumberOfDates?a.slice(i.maxNumberOfDates*-1):a}function $E(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=n.config,r=n.picker,s=n.inputField;if(t&2){var o=r.active?i.pickLevel:i.startView;r.update().changeView(o).render(e)}t&1&&s&&(s.value=lj(n.dates,i))}function q6(n,t,e){var i=e.clear,r=e.render,s=e.autohide;r===void 0&&(r=!0),r?s===void 0&&(s=n.config.autohide):s=!1;var o=cj(n,t,i);o&&(o.toString()!==n.dates.toString()?(n.dates=o,$E(n,r?3:1),w0(n,"changeDate")):$E(n,1),s&&n.hide())}var jb=function(){function n(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;_m(this,n),t.datepicker=this,this.element=t;var r=this.config=Object.assign({buttonClass:e.buttonClass&&String(e.buttonClass)||"button",container:document.body,defaultViewDate:xm(),maxDate:void 0,minDate:void 0},jL(Hb,this));this._options=e,Object.assign(r,jL(e,this));var s=this.inline=t.tagName!=="INPUT",o,a;if(s)r.container=t,a=BL(t.dataset.date,r.dateDelimiter),delete t.dataset.date;else{var u=e.container?document.querySelector(e.container):null;u&&(r.container=u),o=this.inputField=t,o.classList.add("datepicker-input"),a=BL(o.value,r.dateDelimiter)}if(i){var h=i.inputs.indexOf(o),p=i.datepickers;if(h<0||h>1||!Array.isArray(p))throw Error("Invalid rangepicker object.");p[h]=this,Object.defineProperty(this,"rangepicker",{get:function(){return i}})}this.dates=[];var v=cj(this,a);v&&v.length>0&&(this.dates=v),o&&(o.value=lj(this.dates,r));var x=this.picker=new Spe(this);if(s)this.show();else{var S=Ipe.bind(null,this),D=[[o,"keydown",Mpe.bind(null,this)],[o,"focus",Epe.bind(null,this)],[o,"mousedown",Tpe.bind(null,this)],[o,"click",Ape.bind(null,this)],[o,"paste",Dpe.bind(null,this)],[document,"mousedown",S],[document,"touchstart",S],[window,"resize",x.place.bind(x)]];eN(this,D)}}return bm(n,[{key:"active",get:function(){return!!(this.picker&&this.picker.active)}},{key:"pickerElement",get:function(){return this.picker?this.picker.element:void 0}},{key:"setOptions",value:function(e){var i=this.picker,r=jL(e,this);Object.assign(this._options,e),Object.assign(this.config,r),i.setOptions(r),$E(this,3)}},{key:"show",value:function(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}},{key:"hide",value:function(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}},{key:"destroy",value:function(){return this.hide(),nj(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}},{key:"getDate",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,r=i?function(s){return Ub(s,i,e.config.locale)}:function(s){return new Date(s)};if(this.config.multidate)return this.dates.map(r);if(this.dates.length>0)return r(this.dates[0])}},{key:"setDate",value:function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];var s=[].concat(i),o={},a=KL(i);UE(a)==="object"&&!Array.isArray(a)&&!(a instanceof Date)&&a&&Object.assign(o,s.pop());var u=Array.isArray(s[0])?s[0]:s;q6(this,u,o)}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!this.inline){var i={clear:!0,autohide:!!(e&&e.autohide)},r=BL(this.inputField.value,this.config.dateDelimiter);q6(this,r,i)}}},{key:"refresh",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e&&typeof e!="string"&&(i=e,e=void 0);var r;e==="picker"?r=2:e==="input"?r=1:r=3,$E(this,r,!i)}},{key:"enterEditMode",value:function(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700","!border-primary-700"))}},{key:"exitEditMode",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!(this.inline||!this.editMode)){var i=Object.assign({update:!1},e);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700","!border-primary-700"),i.update&&this.update(i)}}}],[{key:"formatDate",value:function(e,i,r){return Ub(e,i,r&&Lb[r]||Lb.en)}},{key:"parseDate",value:function(e,i,r){return Vb(e,i,r&&Lb[r]||Lb.en)}},{key:"locales",get:function(){return Lb}}])}();function X6(n){var t=Object.assign({},n);return delete t.inputs,delete t.allowOneSidedRange,delete t.maxNumberOfDates,t}function Y6(n,t,e,i){eN(n,[[e,"changeDate",t]]),new jb(e,i,n)}function Nb(n,t){if(!n._updating){n._updating=!0;var e=t.target;if(e.datepicker!==void 0){var i=n.datepickers,r={render:!1},s=n.inputs.indexOf(e),o=s===0?1:0,a=i[s].dates[0],u=i[o].dates[0];a!==void 0&&u!==void 0?s===0&&a>u?(i[0].setDate(u,r),i[1].setDate(a,r)):s===1&&a<u&&(i[0].setDate(a,r),i[1].setDate(u,r)):n.allowOneSidedRange||(a!==void 0||u!==void 0)&&(r.clear=!0,i[o].setDate(i[s].dates,r)),i[0].picker.update().render(),i[1].picker.update().render(),delete n._updating}}}var qE=function(){function n(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_m(this,n);var i=Array.isArray(e.inputs)?e.inputs:Array.from(t.querySelectorAll("input"));if(!(i.length<2)){t.rangepicker=this,this.element=t,this.inputs=i.slice(0,2),this.allowOneSidedRange=!!e.allowOneSidedRange;var r=Nb.bind(null,this),s=X6(e),o=[];Object.defineProperty(this,"datepickers",{get:function(){return o}}),Y6(this,r,this.inputs[0],s),Y6(this,r,this.inputs[1],s),Object.freeze(o),o[0].dates.length>0?Nb(this,{target:this.inputs[0]}):o[1].dates.length>0&&Nb(this,{target:this.inputs[1]})}}return bm(n,[{key:"dates",get:function(){return this.datepickers.length===2?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}},{key:"setOptions",value:function(e){this.allowOneSidedRange=!!e.allowOneSidedRange;var i=X6(e);this.datepickers[0].setOptions(i),this.datepickers[1].setOptions(i)}},{key:"destroy",value:function(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),nj(this),delete this.element.rangepicker}},{key:"getDates",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,r=i?function(s){return Ub(s,i,e.datepickers[0].config.locale)}:function(s){return new Date(s)};return this.dates.map(function(s){return s===void 0?s:r(s)})}},{key:"setDates",value:function(e,i){var r=cl(this.datepickers,2),s=r[0],o=r[1],a=this.dates;this._updating=!0,s.setDate(e),o.setDate(i),delete this._updating,o.dates[0]!==a[1]?Nb(this,{target:this.inputs[1]}):s.dates[0]!==a[0]&&Nb(this,{target:this.inputs[0]})}}])}();var XE=function(){return XE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},XE.apply(this,arguments)},Xl={defaultDatepickerId:null,autohide:!1,format:"mm/dd/yyyy",maxDate:null,minDate:null,orientation:"bottom",buttons:!1,autoSelectToday:0,title:null,language:"en",rangePicker:!1,onShow:function(){},onHide:function(){}},Ppe={id:null,override:!0},uj=function(){function n(t,e,i){t===void 0&&(t=null),e===void 0&&(e=Xl),i===void 0&&(i=Ppe),this._instanceId=i.id?i.id:t.id,this._datepickerEl=t,this._datepickerInstance=null,this._options=XE(XE({},Xl),e),this._initialized=!1,this.init(),Fn.addInstance("Datepicker",this,this._instanceId,i.override)}return n.prototype.init=function(){this._datepickerEl&&!this._initialized&&(this._options.rangePicker?this._datepickerInstance=new qE(this._datepickerEl,this._getDatepickerOptions(this._options)):this._datepickerInstance=new jb(this._datepickerEl,this._getDatepickerOptions(this._options)),this._initialized=!0)},n.prototype.destroy=function(){this._initialized&&(this._initialized=!1,this._datepickerInstance.destroy())},n.prototype.removeInstance=function(){this.destroy(),Fn.removeInstance("Datepicker",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getDatepickerInstance=function(){return this._datepickerInstance},n.prototype.getDate=function(){if(this._options.rangePicker&&this._datepickerInstance instanceof qE)return this._datepickerInstance.getDates();if(!this._options.rangePicker&&this._datepickerInstance instanceof jb)return this._datepickerInstance.getDate()},n.prototype.setDate=function(t){if(this._options.rangePicker&&this._datepickerInstance instanceof qE)return this._datepickerInstance.setDates(t);if(!this._options.rangePicker&&this._datepickerInstance instanceof jb)return this._datepickerInstance.setDate(t)},n.prototype.show=function(){this._datepickerInstance.show(),this._options.onShow(this)},n.prototype.hide=function(){this._datepickerInstance.hide(),this._options.onHide(this)},n.prototype._getDatepickerOptions=function(t){var e={};return t.buttons&&(e.todayBtn=!0,e.clearBtn=!0,t.autoSelectToday&&(e.todayBtnMode=1)),t.autohide&&(e.autohide=!0),t.format&&(e.format=t.format),t.maxDate&&(e.maxDate=t.maxDate),t.minDate&&(e.minDate=t.minDate),t.orientation&&(e.orientation=t.orientation),t.title&&(e.title=t.title),t.language&&(e.language=t.language),e},n.prototype.updateOnShow=function(t){this._options.onShow=t},n.prototype.updateOnHide=function(t){this._options.onHide=t},n}();function S0(){document.querySelectorAll("[datepicker], [inline-datepicker], [date-rangepicker]").forEach(function(n){if(n){var t=n.hasAttribute("datepicker-buttons"),e=n.hasAttribute("datepicker-autoselect-today"),i=n.hasAttribute("datepicker-autohide"),r=n.getAttribute("datepicker-format"),s=n.getAttribute("datepicker-max-date"),o=n.getAttribute("datepicker-min-date"),a=n.getAttribute("datepicker-orientation"),u=n.getAttribute("datepicker-title"),h=n.getAttribute("datepicker-language"),p=n.hasAttribute("date-rangepicker");new uj(n,{buttons:t||Xl.buttons,autoSelectToday:e||Xl.autoSelectToday,autohide:i||Xl.autohide,format:r||Xl.format,maxDate:s||Xl.maxDate,minDate:o||Xl.minDate,orientation:a||Xl.orientation,title:u||Xl.title,language:h||Xl.language,rangePicker:p||Xl.rangePicker})}else console.error("The datepicker element does not exist. Please check the datepicker attribute.")})}typeof window<"u"&&(window.Datepicker=uj,window.initDatepickers=S0);function YE(){n0(),i0(),r0(),s0(),d0(),h0(),f0(),p0(),m0(),g0(),y0(),v0(),_0(),S0()}typeof window<"u"&&(window.initFlowbite=YE);var Rpe=new X9("load",[n0,i0,r0,s0,d0,h0,f0,p0,m0,g0,y0,v0,_0,S0]);Rpe.init();var dj=(()=>{class n{ngOnInit(){YE()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=bt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){i&1&&it(0,"router-outlet")},dependencies:[o_,xp],encapsulation:2})}return n})();rP(dj,q9).catch(n=>console.error(n));
