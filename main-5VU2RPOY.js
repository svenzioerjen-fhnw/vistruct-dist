var g6=Object.create;var X0=Object.defineProperty,y6=Object.defineProperties,v6=Object.getOwnPropertyDescriptor,_6=Object.getOwnPropertyDescriptors,b6=Object.getOwnPropertyNames,dx=Object.getOwnPropertySymbols,x6=Object.getPrototypeOf,MT=Object.prototype.hasOwnProperty,tO=Object.prototype.propertyIsEnumerable;var eO=(n,t,e)=>t in n?X0(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Je=(n,t)=>{for(var e in t||={})MT.call(t,e)&&eO(n,e,t[e]);if(dx)for(var e of dx(t))tO.call(t,e)&&eO(n,e,t[e]);return n},Mn=(n,t)=>y6(n,_6(t));var nO=(n,t)=>{var e={};for(var i in n)MT.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&dx)for(var i of dx(n))t.indexOf(i)<0&&tO.call(n,i)&&(e[i]=n[i]);return e};var fx=(n,t)=>()=>(n&&(t=n(n=0)),t);var px=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),iO=(n,t)=>{for(var e in t)X0(n,e,{get:t[e],enumerable:!0})},rO=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of b6(t))!MT.call(n,r)&&r!==e&&X0(n,r,{get:()=>t[r],enumerable:!(i=v6(t,r))||i.enumerable});return n};var jm=(n,t,e)=>(e=n!=null?g6(x6(n)):{},rO(t||!n||!n.__esModule?X0(e,"default",{value:n,enumerable:!0}):e,n)),sO=n=>rO(X0({},"__esModule",{value:!0}),n);var Wm=(n,t,e)=>new Promise((i,r)=>{var s=u=>{try{a(e.next(u))}catch(d){r(d)}},o=u=>{try{a(e.throw(u))}catch(d){r(d)}},a=u=>u.done?i(u.value):Promise.resolve(u.value).then(s,o);a((e=e.apply(n,t)).next())});var YR=px((b_,XR)=>{"use strict";(function(n,t){typeof b_=="object"&&typeof XR=="object"?(n._Highcharts=t(),XR.exports=n._Highcharts):typeof define=="function"&&define.amd?define("highcharts/highcharts",[],t):typeof b_=="object"?(n._Highcharts=t(),b_.highcharts=n._Highcharts):(n.Highcharts&&n.Highcharts.error(16,!0),n.Highcharts=t())})(typeof window>"u"?b_:window,()=>(()=>{"use strict";let n,t;var e,i,r,s,o,a,u,d,g,v,x,C,A,O,N,T,j,Z,$={};$.d=(M,l)=>{for(var h in l)$.o(l,h)&&!$.o(M,h)&&Object.defineProperty(M,h,{enumerable:!0,get:l[h]})},$.o=(M,l)=>Object.prototype.hasOwnProperty.call(M,l);var le={};$.d(le,{default:()=>m6}),function(M){M.SVG_NS="http://www.w3.org/2000/svg",M.product="Highcharts",M.version="12.3.0",M.win=typeof window<"u"?window:{},M.doc=M.win.document,M.svg=!!M.doc?.createElementNS?.(M.SVG_NS,"svg")?.createSVGRect,M.pageLang=M.doc?.documentElement?.closest("[lang]")?.lang,M.userAgent=M.win.navigator?.userAgent||"",M.isChrome=M.win.chrome,M.isFirefox=M.userAgent.indexOf("Firefox")!==-1,M.isMS=/(edge|msie|trident)/i.test(M.userAgent)&&!M.win.opera,M.isSafari=!M.isChrome&&M.userAgent.indexOf("Safari")!==-1,M.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(M.userAgent),M.isWebKit=M.userAgent.indexOf("AppleWebKit")!==-1,M.deg2rad=2*Math.PI/360,M.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],M.noop=function(){},M.supportsPassiveEvents=function(){let l=!1;if(!M.isMS){let h=Object.defineProperty({},"passive",{get:function(){l=!0}});M.win.addEventListener&&M.win.removeEventListener&&(M.win.addEventListener("testPassive",M.noop,h),M.win.removeEventListener("testPassive",M.noop,h))}return l}(),M.charts=[],M.composed=[],M.dateFormats={},M.seriesTypes={},M.symbolSizes={},M.chartCount=0}(e||(e={}));let K=e,{charts:oe,doc:ue,win:te}=K;function V(M,l,h,f){let m=l?"Highcharts error":"Highcharts warning";M===32&&(M=`${m}: Deprecated member`);let y=Pe(M),_=y?`${m} #${M}: www.highcharts.com/errors/${M}/`:M.toString();if(f!==void 0){let b="";y&&(_+="?"),rt(f,function(S,D){b+=`
 - ${D}: ${S}`,y&&(_+=encodeURI(D)+"="+encodeURI(S))}),_+=b}Cn(K,"displayError",{chart:h,code:M,message:_,params:f},function(){if(l)throw Error(_);te.console&&V.messages.indexOf(_)===-1&&console.warn(_)}),V.messages.push(_)}function se(M,l){return parseInt(M,l||10)}function we(M){return typeof M=="string"}function de(M){let l=Object.prototype.toString.call(M);return l==="[object Array]"||l==="[object Array Iterator]"}function je(M,l){return!!M&&typeof M=="object"&&(!l||!de(M))}function Ue(M){return je(M)&&typeof M.nodeType=="number"}function he(M){let l=M?.constructor;return!!(je(M,!0)&&!Ue(M)&&l?.name&&l.name!=="Object")}function Pe(M){return typeof M=="number"&&!isNaN(M)&&M<1/0&&M>-1/0}function me(M){return M!=null}function $e(M,l,h){let f,m=we(l)&&!me(h),y=(_,b)=>{me(_)?M.setAttribute(b,_):m?(f=M.getAttribute(b))||b!=="class"||(f=M.getAttribute(b+"Name")):M.removeAttribute(b)};return we(l)?y(h,l):rt(l,y),f}function nt(M){return de(M)?M:[M]}function xt(M,l){let h;for(h in M||(M={}),l)M[h]=l[h];return M}function Tt(){let M=arguments,l=M.length;for(let h=0;h<l;h++){let f=M[h];if(f!=null)return f}}function ut(M,l){xt(M.style,l)}function Ie(M){return Math.pow(10,Math.floor(Math.log(M)/Math.LN10))}function at(M,l){return M>1e14?M:parseFloat(M.toPrecision(l||14))}(V||(V={})).messages=[],Math.easeInOutSine=function(M){return-.5*(Math.cos(Math.PI*M)-1)};let Pt=Array.prototype.find?function(M,l){return M.find(l)}:function(M,l){let h,f=M.length;for(h=0;h<f;h++)if(l(M[h],h))return M[h]};function rt(M,l,h){for(let f in M)Object.hasOwnProperty.call(M,f)&&l.call(h||M[f],M[f],f,M)}function Ut(M,l,h){function f(_,b){let S=M.removeEventListener;S&&S.call(M,_,b,!1)}function m(_){let b,S;M.nodeName&&(l?(b={})[l]=!0:b=_,rt(b,function(D,P){if(_[P])for(S=_[P].length;S--;)f(P,_[P][S].fn)}))}let y=typeof M=="function"&&M.prototype||M;if(Object.hasOwnProperty.call(y,"hcEvents")){let _=y.hcEvents;if(l){let b=_[l]||[];h?(_[l]=b.filter(function(S){return h!==S.fn}),f(l,h)):(m(_),_[l]=[])}else m(_),delete y.hcEvents}}function Cn(M,l,h,f){if(h=h||{},ue?.createEvent&&(M.dispatchEvent||M.fireEvent&&M!==K)){let m=ue.createEvent("Events");m.initEvent(l,!0,!0),h=xt(m,h),M.dispatchEvent?M.dispatchEvent(h):M.fireEvent(l,h)}else if(M.hcEvents){h.target||xt(h,{preventDefault:function(){h.defaultPrevented=!0},target:M,type:l});let m=[],y=M,_=!1;for(;y.hcEvents;)Object.hasOwnProperty.call(y,"hcEvents")&&y.hcEvents[l]&&(m.length&&(_=!0),m.unshift.apply(m,y.hcEvents[l])),y=Object.getPrototypeOf(y);_&&m.sort((b,S)=>b.order-S.order),m.forEach(b=>{b.fn.call(M,h)===!1&&h.preventDefault()})}f&&!h.defaultPrevented&&f.call(M,h)}let hn=function(){let M=Math.random().toString(36).substring(2,9)+"-",l=0;return function(){return"highcharts-"+(n?"":M)+l++}}();te.jQuery&&(te.jQuery.fn.highcharts=function(){let M=[].slice.call(arguments);if(this[0])return M[0]?(new K[we(M[0])?M.shift():"Chart"](this[0],M[0],M[1]),this):oe[$e(this[0],"data-highcharts-chart")]});let Mt={addEvent:function(M,l,h,f={}){let m=typeof M=="function"&&M.prototype||M;Object.hasOwnProperty.call(m,"hcEvents")||(m.hcEvents={});let y=m.hcEvents;K.Point&&M instanceof K.Point&&M.series&&M.series.chart&&(M.series.chart.runTrackerClick=!0);let _=M.addEventListener;_&&_.call(M,l,h,!!K.supportsPassiveEvents&&{passive:f.passive===void 0?l.indexOf("touch")!==-1:f.passive,capture:!1}),y[l]||(y[l]=[]);let b={fn:h,order:typeof f.order=="number"?f.order:1/0};return y[l].push(b),y[l].sort((S,D)=>S.order-D.order),function(){Ut(M,l,h)}},arrayMax:function(M){let l=M.length,h=M[0];for(;l--;)M[l]>h&&(h=M[l]);return h},arrayMin:function(M){let l=M.length,h=M[0];for(;l--;)M[l]<h&&(h=M[l]);return h},attr:$e,clamp:function(M,l,h){return M>l?M<h?M:h:l},clearTimeout:function(M){me(M)&&clearTimeout(M)},correctFloat:at,createElement:function(M,l,h,f,m){let y=ue.createElement(M);return l&&xt(y,l),m&&ut(y,{padding:"0",border:"none",margin:"0"}),h&&ut(y,h),f&&f.appendChild(y),y},crisp:function(M,l=0,h){let f=l%2/2,m=h?-1:1;return(Math.round(M*m-f)+f)*m},css:ut,defined:me,destroyObjectProperties:function(M,l,h){rt(M,function(f,m){f!==l&&f?.destroy&&f.destroy(),(f?.destroy||!h)&&delete M[m]})},diffObjects:function(M,l,h,f){let m={};return function y(_,b,S,D){let P=h?b:_;rt(_,function(I,F){if(!D&&f&&f.indexOf(F)>-1&&b[F]){I=nt(I),S[F]=[];for(let z=0;z<Math.max(I.length,b[F].length);z++)b[F][z]&&(I[z]===void 0?S[F][z]=b[F][z]:(S[F][z]={},y(I[z],b[F][z],S[F][z],D+1)))}else je(I,!0)&&!I.nodeType?(S[F]=de(I)?[]:{},y(I,b[F]||{},S[F],D+1),Object.keys(S[F]).length===0&&(F!=="colorAxis"||D!==0)&&delete S[F]):(_[F]!==b[F]||F in _&&!(F in b))&&F!=="__proto__"&&F!=="constructor"&&(S[F]=P[F])})}(M,l,m,0),m},discardElement:function(M){M?.parentElement?.removeChild(M)},erase:function(M,l){let h=M.length;for(;h--;)if(M[h]===l){M.splice(h,1);break}},error:V,extend:xt,extendClass:function(M,l){let h=function(){};return h.prototype=new M,xt(h.prototype,l),h},find:Pt,fireEvent:Cn,getAlignFactor:(M="")=>({center:.5,right:1,middle:.5,bottom:1})[M]||0,getClosestDistance:function(M,l){let h,f,m,y,_=!l;return M.forEach(b=>{if(b.length>1)for(y=f=b.length-1;y>0;y--)(m=b[y]-b[y-1])<0&&!_?(l?.(),l=void 0):m&&(h===void 0||m<h)&&(h=m)}),h},getMagnitude:Ie,getNestedProperty:function(M,l){let h=M.split(".");for(;h.length&&me(l);){let f=h.shift();if(f===void 0||f==="__proto__")return;if(f==="this"){let y;return je(l)&&(y=l["@this"]),y??l}let m=l[f.replace(/[\\'"]/g,"")];if(!me(m)||typeof m=="function"||typeof m.nodeType=="number"||m===te)return;l=m}return l},getStyle:function M(l,h,f){let m;if(h==="width"){let _=Math.min(l.offsetWidth,l.scrollWidth),b=l.getBoundingClientRect?.().width;return b<_&&b>=_-1&&(_=Math.floor(b)),Math.max(0,_-(M(l,"padding-left",!0)||0)-(M(l,"padding-right",!0)||0))}if(h==="height")return Math.max(0,Math.min(l.offsetHeight,l.scrollHeight)-(M(l,"padding-top",!0)||0)-(M(l,"padding-bottom",!0)||0));let y=te.getComputedStyle(l,void 0);return y&&(m=y.getPropertyValue(h),Tt(f,h!=="opacity")&&(m=se(m))),m},insertItem:function(M,l){let h,f=M.options.index,m=l.length;for(h=M.options.isInternal?m:0;h<m+1;h++)if(!l[h]||Pe(f)&&f<Tt(l[h].options.index,l[h]._i)||l[h].options.isInternal){l.splice(h,0,M);break}return h},isArray:de,isClass:he,isDOMElement:Ue,isFunction:function(M){return typeof M=="function"},isNumber:Pe,isObject:je,isString:we,merge:function(M,...l){let h,f=[M,...l],m={},y=function(b,S){return typeof b!="object"&&(b={}),rt(S,function(D,P){P!=="__proto__"&&P!=="constructor"&&(!je(D,!0)||he(D)||Ue(D)?b[P]=S[P]:b[P]=y(b[P]||{},D))}),b};M===!0&&(m=f[1],f=Array.prototype.slice.call(f,2));let _=f.length;for(h=0;h<_;h++)m=y(m,f[h]);return m},normalizeTickInterval:function(M,l,h,f,m){let y,_=M;h=Tt(h,Ie(M));let b=M/h;for(!l&&(l=m?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],f===!1&&(h===1?l=l.filter(function(S){return S%1==0}):h<=.1&&(l=[1/h]))),y=0;y<l.length&&(_=l[y],(!m||!(_*h>=M))&&(m||!(b<=(l[y]+(l[y+1]||l[y]))/2)));y++);return at(_*h,-Math.round(Math.log(.001)/Math.LN10))},objectEach:rt,offset:function(M){let l=ue.documentElement,h=M.parentElement||M.parentNode?M.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:h.top+(te.pageYOffset||l.scrollTop)-(l.clientTop||0),left:h.left+(te.pageXOffset||l.scrollLeft)-(l.clientLeft||0),width:h.width,height:h.height}},pad:function(M,l,h){return Array((l||2)+1-String(M).replace("-","").length).join(h||"0")+M},pick:Tt,pInt:se,pushUnique:function(M,l){return 0>M.indexOf(l)&&!!M.push(l)},relativeLength:function(M,l,h){return/%$/.test(M)?l*parseFloat(M)/100+(h||0):parseFloat(M)},removeEvent:Ut,replaceNested:function(M,...l){let h,f;do for(f of(h=M,l))M=M.replace(f[0],f[1]);while(M!==h);return M},splat:nt,stableSort:function(M,l){let h,f,m=M.length;for(f=0;f<m;f++)M[f].safeI=f;for(M.sort(function(y,_){return(h=l(y,_))===0?y.safeI-_.safeI:h}),f=0;f<m;f++)delete M[f].safeI},syncTimeout:function(M,l,h){return l>0?setTimeout(M,l,h):(M.call(0,h),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},ucfirst:function(M){return we(M)?M.substring(0,1).toUpperCase()+M.substring(1):String(M)},uniqueKey:hn,useSerialIds:function(M){return n=Tt(M,n)},wrap:function(M,l,h){let f=M[l];M[l]=function(){let m=arguments,y=this;return h.apply(this,[function(){return f.apply(y,arguments.length?arguments:m)}].concat([].slice.call(arguments)))}}},{pageLang:Xi,win:Fn}=K,{defined:Me,error:hr,extend:Kn,isNumber:hi,isObject:rn,isString:Jn,merge:dn,objectEach:In,pad:Gi,splat:fe,timeUnits:J,ucfirst:Ge}=Mt,it=K.isSafari&&Fn.Intl&&!Fn.Intl.DateTimeFormat.prototype.formatRange,ht=M=>M.main===void 0,Ke=class{constructor(M,l){this.options={timezone:"UTC"},this.variableTimezone=!1,this.Date=Fn.Date,this.update(M),this.lang=l}update(M={}){this.dTLCache={},this.options=M=dn(!0,this.options,M);let{timezoneOffset:l,useUTC:h,locale:f}=M;this.Date=M.Date||Fn.Date||Date;let m=M.timezone;Me(h)&&(m=h?"UTC":void 0),l&&l%60==0&&(m="Etc/GMT"+(l>0?"+":"")+l/60),this.variableTimezone=m!=="UTC"&&m?.indexOf("Etc/GMT")!==0,this.timezone=m,this.lang&&f&&(this.lang.locale=f),["months","shortMonths","weekdays","shortWeekdays"].forEach(y=>{let _=/months/i.test(y),b=/short/.test(y),S={timeZone:"UTC"};S[_?"month":"weekday"]=b?"short":"long",this[y]=(_?[0,1,2,3,4,5,6,7,8,9,10,11]:[3,4,5,6,7,8,9]).map(D=>this.dateFormat(S,(_?31:1)*24*36e5*D))})}toParts(M){let[l,h,f,m,y,_,b]=this.dateTimeFormat({weekday:"narrow",day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},M,"es").split(/(?:, | |\/|:)/g);return[m,f-1,h,y,_,b,Math.floor(Number(M)||0)%1e3,"DLMXJVS".indexOf(l)].map(Number)}dateTimeFormat(M,l,h=this.options.locale||Xi){let f=JSON.stringify(M)+h;Jn(M)&&(M=this.str2dtf(M));let m=this.dTLCache[f];if(!m){M.timeZone??(M.timeZone=this.timezone);try{m=new Intl.DateTimeFormat(h,M)}catch(y){/Invalid time zone/i.test(y.message)?(hr(34),M.timeZone="UTC",m=new Intl.DateTimeFormat(h,M)):hr(y.message,!1)}}return this.dTLCache[f]=m,m?.format(l)||""}str2dtf(M,l={}){let h={L:{fractionalSecondDigits:3},S:{second:"2-digit"},M:{minute:"numeric"},H:{hour:"2-digit"},k:{hour:"numeric"},E:{weekday:"narrow"},a:{weekday:"short"},A:{weekday:"long"},d:{day:"2-digit"},e:{day:"numeric"},b:{month:"short"},B:{month:"long"},m:{month:"2-digit"},o:{month:"numeric"},y:{year:"2-digit"},Y:{year:"numeric"}};return Object.keys(h).forEach(f=>{M.indexOf(f)!==-1&&Kn(l,h[f])}),l}makeTime(M,l,h=1,f=0,m,y,_){let b=this.Date.UTC(M,l,h,f,m||0,y||0,_||0);if(this.timezone!=="UTC"){let S=this.getTimezoneOffset(b);if(b+=S,[2,3,8,9,10,11].indexOf(l)!==-1&&(f<5||f>20)){let D=this.getTimezoneOffset(b);S!==D?b+=D-S:S-36e5!==this.getTimezoneOffset(b-36e5)||it||(b-=36e5)}}return b}parse(M){if(!Jn(M))return M??void 0;let l=(M=M.replace(/\//g,"-").replace(/(GMT|UTC)/,"")).indexOf("Z")>-1||/([+-][0-9]{2}):?[0-9]{2}$/.test(M),h=/^[0-9]{4}-[0-9]{2}(-[0-9]{2}|)$/.test(M);l||h||(M+="Z");let f=Date.parse(M);if(hi(f))return f+(!l||h?this.getTimezoneOffset(f):0)}getTimezoneOffset(M){if(this.timezone!=="UTC"){let[l,h,f,m,y=0]=this.dateTimeFormat({timeZoneName:"shortOffset"},M,"en").split(/(GMT|:)/).map(Number),_=-(60*(f+y/60)*6e4);if(hi(_))return _}return 0}dateFormat(M,l,h){let f=this.lang;if(!Me(l)||isNaN(l))return f?.invalidDate||"";if(Jn(M=M??"%Y-%m-%d %H:%M:%S")){let m,y=/%\[([a-zA-Z]+)\]/g;for(;m=y.exec(M);)M=M.replace(m[0],this.dateTimeFormat(m[1],l,f?.locale))}if(Jn(M)&&M.indexOf("%")!==-1){let m=this,[y,_,b,S,D,P,I,F]=this.toParts(l),z=f?.weekdays||this.weekdays,H=f?.shortWeekdays||this.shortWeekdays,G=f?.months||this.months,X=f?.shortMonths||this.shortMonths;In(Kn({a:H?H[F]:z[F].substr(0,3),A:z[F],d:Gi(b),e:Gi(b,2," "),w:F,v:f?.weekFrom??"",b:X[_],B:G[_],m:Gi(_+1),o:_+1,y:y.toString().substr(2,2),Y:y,H:Gi(S),k:S,I:Gi(S%12||12),l:S%12||12,M:Gi(D),p:S<12?"AM":"PM",P:S<12?"am":"pm",S:Gi(P),L:Gi(I,3)},K.dateFormats),function(q,ie){if(Jn(M))for(;M.indexOf("%"+ie)!==-1;)M=M.replace("%"+ie,typeof q=="function"?q.call(m,l):q)})}else if(rn(M)){let m=(this.getTimezoneOffset(l)||0)/36e5,y=this.timezone||"Etc/GMT"+(m>=0?"+":"")+m,{prefix:_="",suffix:b=""}=M;M=_+this.dateTimeFormat(Kn({timeZone:y},M),l)+b}return h?Ge(M):M}resolveDTLFormat(M){return rn(M,!0)?rn(M,!0)&&ht(M)?{main:M}:M:{main:(M=fe(M))[0],from:M[1],to:M[2]}}getDateFormat(M,l,h,f){let m=this.dateFormat("%m-%d %H:%M:%S.%L",l),y="01-01 00:00:00.000",_={millisecond:15,second:12,minute:9,hour:6,day:3},b="millisecond",S=b;for(b in J){if(M&&M===J.week&&+this.dateFormat("%w",l)===h&&m.substr(6)===y.substr(6)){b="week";break}if(M&&J[b]>M){b=S;break}if(_[b]&&m.substr(_[b])!==y.substr(_[b]))break;b!=="week"&&(S=b)}return this.resolveDTLFormat(f[b]).main}},{defined:yn,extend:Ht,timeUnits:kt}=Mt,fn=class extends Ke{getTimeTicks(M,l,h,f){let m=this,y=[],_={},{count:b=1,unitRange:S}=M,[D,P,I,F,z,H]=m.toParts(l),G=(l||0)%1e3,X;if(f??(f=1),yn(l)){if(G=S>=kt.second?0:b*Math.floor(G/b),S>=kt.second&&(H=S>=kt.minute?0:b*Math.floor(H/b)),S>=kt.minute&&(z=S>=kt.hour?0:b*Math.floor(z/b)),S>=kt.hour&&(F=S>=kt.day?0:b*Math.floor(F/b)),S>=kt.day&&(I=S>=kt.month?1:Math.max(1,b*Math.floor(I/b))),S>=kt.month&&(P=S>=kt.year?0:b*Math.floor(P/b)),S>=kt.year&&(D-=D%b),S===kt.week){b&&(l=m.makeTime(D,P,I,F,z,H,G));let ae=this.dateTimeFormat({timeZone:this.timezone,weekday:"narrow"},l,"es"),pe="DLMXJVS".indexOf(ae);I+=-pe+f+(pe<f?-7:0)}l=m.makeTime(D,P,I,F,z,H,G),m.variableTimezone&&yn(h)&&(X=h-l>4*kt.month||m.getTimezoneOffset(l)!==m.getTimezoneOffset(h));let q=l,ie=1;for(;q<h;)y.push(q),S===kt.year?q=m.makeTime(D+ie*b,0):S===kt.month?q=m.makeTime(D,P+ie*b):X&&(S===kt.day||S===kt.week)?q=m.makeTime(D,P,I+ie*b*(S===kt.day?1:7)):X&&S===kt.hour&&b>1?q=m.makeTime(D,P,I,F+ie*b):q+=S*b,ie++;y.push(q),S<=kt.hour&&y.length<1e4&&y.forEach(ae=>{ae%18e5==0&&m.dateFormat("%H%M%S%L",ae)==="000000000"&&(_[ae]="day")})}return y.info=Ht(M,{higherRanks:_,totalRange:S*b}),y}},{isTouchDevice:mt}=K,{fireEvent:Jt,merge:pn}=Mt,vn={colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{weekFrom:"week from",chartTitle:"Chart title",locale:void 0,loading:"Loading...",months:void 0,seriesName:"Series {add index 1}",shortMonths:void 0,weekdays:void 0,numericSymbols:["k","M","G","T","P","E"],pieSliceName:"Slice",resetZoom:"Reset zoom",yAxisTitle:"Values",resetZoomTitle:"Reset zoom level 1:1"},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,timezone:"UTC",timezoneOffset:0,useUTC:void 0},chart:{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",margin:15,minScale:.67},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:""},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{color:"#333333",fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:M=>Math.sqrt(1-Math.pow(M-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%[AebHMSL]",second:"%[AebHMS]",minute:"%[AebHM]",hour:"%[AebHM]",day:"%[AebY]",week:"%v %[AebY]",month:"%[BY]",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,position:{x:0,y:3},shared:!1,snap:mt?25:10,headerFormat:'<span style="font-size: 0.8em">{ucfirst point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25CF</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}},Ft=new fn(vn.time,vn.lang),_n={defaultOptions:vn,defaultTime:Ft,getOptions:function(){return vn},setOptions:function(M){return Jt(K,"setOptions",{options:M}),pn(!0,vn,M),M.time&&Ft.update(vn.time),M.lang&&"locale"in M.lang&&Ft.update({locale:M.lang.locale}),M.lang?.chartTitle&&(vn.title=Mn(Je({},vn.title),{text:M.lang.chartTitle})),vn}},{win:Re}=K,{isNumber:Lt,isString:wt,merge:nn,pInt:pt,defined:ct}=Mt,sn=(M,l,h)=>`color-mix(in srgb,${M},${l} ${100*h}%)`,Bn=M=>wt(M)&&!!M&&M!=="none";class An{static parse(l){return l?new An(l):An.None}constructor(l){let h,f,m,y;this.rgba=[NaN,NaN,NaN,NaN],this.input=l;let _=K.Color;if(_&&_!==An)return new _(l);if(typeof l=="object"&&l.stops!==void 0)this.stops=l.stops.map(b=>new An(b[1]));else if(typeof l=="string")for(this.input=l=An.names[l.toLowerCase()]||l,m=An.parsers.length;m--&&!f;)(h=(y=An.parsers[m]).regex.exec(l))&&(f=y.parse(h));f&&(this.rgba=f)}get(l){let h=this.input,f=this.rgba;if(this.output)return this.output;if(typeof h=="object"&&this.stops!==void 0){let m=nn(h);return m.stops=[].slice.call(m.stops),this.stops.forEach((y,_)=>{m.stops[_]=[m.stops[_][0],y.get(l)]}),m}return f&&Lt(f[0])?l!=="rgb"&&(l||f[3]!==1)?l==="a"?`${f[3]}`:"rgba("+f.join(",")+")":"rgb("+f[0]+","+f[1]+","+f[2]+")":h}brighten(l){let h=this.rgba;if(this.stops)this.stops.forEach(function(f){f.brighten(l)});else if(Lt(l)&&l!==0)if(Lt(h[0]))for(let f=0;f<3;f++)h[f]+=pt(255*l),h[f]<0&&(h[f]=0),h[f]>255&&(h[f]=255);else An.useColorMix&&Bn(this.input)&&(this.output=sn(this.input,l>0?"white":"black",Math.abs(l)));return this}setOpacity(l){return this.rgba[3]=l,this}tweenTo(l,h){let f=this.rgba,m=l.rgba;if(!Lt(f[0])||!Lt(m[0]))return An.useColorMix&&Bn(this.input)&&Bn(l.input)&&h<.99?sn(this.input,l.input,h):l.input||"none";let y=m[3]!==1||f[3]!==1,_=(S,D)=>S+(f[D]-S)*(1-h),b=m.slice(0,3).map(_).map(Math.round);return y&&b.push(_(m[3],3)),(y?"rgba(":"rgb(")+b.join(",")+")"}}An.names={white:"#ffffff",black:"#000000"},An.parsers=[{regex:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?(?:\.\d+)?)\s*\)/,parse:function(M){return[pt(M[1]),pt(M[2]),pt(M[3]),parseFloat(M[4],10)]}},{regex:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,parse:function(M){return[pt(M[1]),pt(M[2]),pt(M[3]),1]}},{regex:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?$/i,parse:function(M){return[pt(M[1]+M[1],16),pt(M[2]+M[2],16),pt(M[3]+M[3],16),ct(M[4])?pt(M[4]+M[4],16)/255:1]}},{regex:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?$/i,parse:function(M){return[pt(M[1],16),pt(M[2],16),pt(M[3],16),ct(M[4])?pt(M[4],16)/255:1]}}],An.useColorMix=Re.CSS?.supports("color","color-mix(in srgb,red,blue 9%)"),An.None=new An("");let{parse:Li}=An,{win:ns}=K,{isNumber:is,objectEach:Gh}=Mt,jr=(()=>{class M{constructor(h,f,m){this.pos=NaN,this.options=f,this.elem=h,this.prop=m}dSetter(){let h=this.paths,f=h?.[0],m=h?.[1],y=this.now||0,_=[];if(y!==1&&f&&m)if(f.length===m.length&&y<1)for(let b=0;b<m.length;b++){let S=f[b],D=m[b],P=[];for(let I=0;I<D.length;I++){let F=S[I],z=D[I];is(F)&&is(z)&&(D[0]!=="A"||I!==4&&I!==5)?P[I]=F+y*(z-F):P[I]=z}_.push(P)}else _=m;else _=this.toD||[];this.elem.attr("d",_,void 0,!0)}update(){let h=this.elem,f=this.prop,m=this.now,y=this.options.step;this[f+"Setter"]?this[f+"Setter"]():h.attr?h.element&&h.attr(f,m,null,!0):h.style[f]=m+this.unit,y&&y.call(h,m,this)}run(h,f,m){let y=this,_=y.options,b=function(P){return!b.stopped&&y.step(P)},S=ns.requestAnimationFrame||function(P){setTimeout(P,13)},D=function(){for(let P=0;P<M.timers.length;P++)M.timers[P]()||M.timers.splice(P--,1);M.timers.length&&S(D)};h!==f||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=h,this.end=f,this.unit=m,this.now=this.start,this.pos=0,b.elem=this.elem,b.prop=this.prop,b()&&M.timers.push(b)===1&&S(D)):(delete _.curAnim[this.prop],_.complete&&Object.keys(_.curAnim).length===0&&_.complete.call(this.elem))}step(h){let f,m,y=+new Date,_=this.options,b=this.elem,S=_.complete,D=_.duration,P=_.curAnim;return b.attr&&!b.element?f=!1:h||y>=D+this.startTime?(this.now=this.end,this.pos=1,this.update(),P[this.prop]=!0,m=!0,Gh(P,function(I){I!==!0&&(m=!1)}),m&&S&&S.call(b),f=!1):(this.pos=_.easing((y-this.startTime)/D),this.now=this.start+(this.end-this.start)*this.pos,this.update(),f=!0),f}initPath(h,f,m){let y=h.startX,_=h.endX,b=m.slice(),S=h.isArea,D=S?2:1,P=f&&m.length>f.length&&m.hasStackedCliffs,I,F,z,H,G=f?.slice();if(!G||P)return[b,b];function X(ie,ae){for(;ie.length<F;){let pe=ie[0],ke=ae[F-ie.length];if(ke&&pe[0]==="M"&&(ke[0]==="C"?ie[0]=["C",pe[1],pe[2],pe[1],pe[2],pe[1],pe[2]]:ie[0]=["L",pe[1],pe[2]]),ie.unshift(pe),S){let Te=ie.pop();ie.push(ie[ie.length-1],Te)}}}function q(ie){for(;ie.length<F;){let ae=ie[Math.floor(ie.length/D)-1].slice();if(ae[0]==="C"&&(ae[1]=ae[5],ae[2]=ae[6]),S){let pe=ie[Math.floor(ie.length/D)].slice();ie.splice(ie.length/2,0,ae,pe)}else ie.push(ae)}}if(y&&_&&_.length){for(z=0;z<y.length;z++)if(y[z]===_[0]){I=z;break}else if(y[0]===_[_.length-y.length+z]){I=z,H=!0;break}else if(y[y.length-1]===_[_.length-y.length+z]){I=y.length-z;break}I===void 0&&(G=[])}return G.length&&is(I)&&(F=b.length+I*D,H?(X(G,b),q(b)):(X(b,G),q(G))),[G,b]}fillSetter(){M.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,Li(this.start).tweenTo(Li(this.end),this.pos),void 0,!0)}}return M.timers=[],M})(),{defined:on,getStyle:Wc,isArray:Gc,isNumber:Uu,isObject:ka,merge:Yl,objectEach:Zl,pick:Do}=Mt;function hl(M){return ka(M)?Yl({duration:500,defer:0},M):{duration:500*!!M,defer:0}}function $h(M,l){let h=jr.timers.length;for(;h--;)jr.timers[h].elem!==M||l&&l!==jr.timers[h].prop||(jr.timers[h].stopped=!0)}let Wr={animate:function(M,l,h){let f,m="",y,_,b;ka(h)||(b=arguments,h={duration:b[2],easing:b[3],complete:b[4]}),Uu(h.duration)||(h.duration=400),h.easing=typeof h.easing=="function"?h.easing:Math[h.easing]||Math.easeInOutSine,h.curAnim=Yl(l),Zl(l,function(S,D){$h(M,D),_=new jr(M,h,D),y=void 0,D==="d"&&Gc(l.d)?(_.paths=_.initPath(M,M.pathArray,l.d),_.toD=l.d,f=0,y=1):M.attr?f=M.attr(D):(f=parseFloat(Wc(M,D))||0,D!=="opacity"&&(m="px")),y||(y=S),typeof y=="string"&&y.match("px")&&(y=y.replace(/px/g,"")),_.run(f,y,m)})},animObject:hl,getDeferredAnimation:function(M,l,h){let f=hl(l),m=h?[h]:M.series,y=0,_=0;return m.forEach(b=>{let S=hl(b.options.animation);y=ka(l)&&on(l.defer)?f.defer:Math.max(y,S.duration+S.defer),_=Math.min(f.duration,S.duration)}),M.renderer.forExport&&(y=0),{defer:Math.max(0,y-_),duration:Math.min(y,_)}},setAnimation:function(M,l){l.renderer.globalAnimation=Do(M,l.options.chart.animation,!0)},stop:$h},{SVG_NS:Hu,win:gf}=K,{attr:qh,createElement:La,css:re,error:Fe,isFunction:qe,isString:Xe,objectEach:Be,splat:At}=Mt,{trustedTypes:zt}=gf,$t=zt&&qe(zt.createPolicy)&&zt.createPolicy("highcharts",{createHTML:M=>M}),qt=$t?$t.createHTML(""):"";class Wt{static filterUserAttributes(l){return Be(l,(h,f)=>{let m=!0;Wt.allowedAttributes.indexOf(f)===-1&&(m=!1),["background","dynsrc","href","lowsrc","src"].indexOf(f)!==-1&&(m=Xe(h)&&Wt.allowedReferences.some(y=>h.indexOf(y)===0)),m||(Fe(33,!1,void 0,{"Invalid attribute in config":`${f}`}),delete l[f]),Xe(h)&&l[f]&&(l[f]=h.replace(/</g,"&lt;"))}),l}static parseStyle(l){return l.split(";").reduce((h,f)=>{let m=f.split(":").map(_=>_.trim()),y=m.shift();return y&&m.length&&(h[y.replace(/-([a-z])/g,_=>_[1].toUpperCase())]=m.join(":")),h},{})}static setElementHTML(l,h){l.innerHTML=Wt.emptyHTML,h&&new Wt(h).addToDOM(l)}constructor(l){this.nodes=typeof l=="string"?this.parseMarkup(l):l}addToDOM(l){return function h(f,m){let y;return At(f).forEach(function(_){let b,S=_.tagName,D=_.textContent?K.doc.createTextNode(_.textContent):void 0,P=Wt.bypassHTMLFiltering;if(S)if(S==="#text")b=D;else if(Wt.allowedTags.indexOf(S)!==-1||P){let I=S==="svg"?Hu:m.namespaceURI||Hu,F=K.doc.createElementNS(I,S),z=_.attributes||{};Be(_,function(H,G){G!=="tagName"&&G!=="attributes"&&G!=="children"&&G!=="style"&&G!=="textContent"&&(z[G]=H)}),qh(F,P?z:Wt.filterUserAttributes(z)),_.style&&re(F,_.style),D&&F.appendChild(D),h(_.children||[],F),b=F}else Fe(33,!1,void 0,{"Invalid tagName in config":S});b&&m.appendChild(b),y=b}),y}(this.nodes,l)}parseMarkup(l){let h,f=[];l=l.trim().replace(/ style=(["'])/g," data-style=$1");try{h=new DOMParser().parseFromString($t?$t.createHTML(l):l,"text/html")}catch{}if(!h){let y=La("div");y.innerHTML=l,h={body:y}}let m=(y,_)=>{let b=y.nodeName.toLowerCase(),S={tagName:b};b==="#text"&&(S.textContent=y.textContent||"");let D=y.attributes;if(D){let P={};[].forEach.call(D,I=>{I.name==="data-style"?S.style=Wt.parseStyle(I.value):P[I.name]=I.value}),S.attributes=P}if(y.childNodes.length){let P=[];[].forEach.call(y.childNodes,I=>{m(I,P)}),P.length&&(S.children=P)}_.push(S)};return[].forEach.call(h.body.childNodes,y=>m(y,f)),f}}Wt.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","disabled","dx","dy","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","result","role","rowspan","scope","slope","src","startOffset","stdDeviation","stroke-linecap","stroke-width","stroke","style","summary","tabindex","tableValues","target","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],Wt.allowedReferences=["https://","http://","mailto:","/","../","./","#"],Wt.allowedTags=["#text","a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","tbody","td","text","textPath","th","thead","title","tr","tspan","u","ul"],Wt.emptyHTML=qt,Wt.bypassHTMLFiltering=!1;let{defaultOptions:Tn,defaultTime:Rt}=_n,{pageLang:gn}=K,{extend:ri,getNestedProperty:Yi,isArray:Ai,isNumber:yi,isObject:Dt,isString:oi,pick:ai,ucfirst:hs}=Mt,Sr={add:(M,l)=>M+l,divide:(M,l)=>l!==0?M/l:"",eq:(M,l)=>M==l,each:function(M){let l=arguments[arguments.length-1];return!!Ai(M)&&M.map((h,f)=>Mi(l.body,ri(Dt(h)?h:{"@this":h},{"@index":f,"@first":f===0,"@last":f===M.length-1}))).join("")},ge:(M,l)=>M>=l,gt:(M,l)=>M>l,if:M=>!!M,le:(M,l)=>M<=l,lt:(M,l)=>M<l,multiply:(M,l)=>M*l,ne:(M,l)=>M!=l,subtract:(M,l)=>M-l,ucfirst:hs,unless:M=>!M},ds={},Io=M=>/^["'].+["']$/.test(M);function Mi(M="",l,h){let f=/\{([a-zA-Z\u00C0-\u017F\d:\.,;\-\/<>\[\]%_@+"'â€™= #\(\)]+)\}/g,m=/\(([a-zA-Z\u00C0-\u017F\d:\.,;\-\/<>\[\]%_@+"'= ]+)\)/g,y=[],_=/f$/,b=/\.(\d)/,S=h?.options?.lang||Tn.lang,D=h?.time||Rt,P=h?.numberFormatter||Di.bind(h),I=(X="")=>{let q;return X==="true"||X!=="false"&&((q=Number(X)).toString()===X?q:Io(X)?X.slice(1,-1):Yi(X,l))},F,z,H=0,G;for(;(F=f.exec(M))!==null;){let X=F,q=m.exec(F[1]);q&&(F=q,G=!0),z?.isBlock||(z={ctx:l,expression:F[1],find:F[0],isBlock:F[1].charAt(0)==="#",start:F.index,startInner:F.index+F[0].length,length:F[0].length});let ie=(z.isBlock?X:F)[1].split(" ")[0].replace("#","");Sr[ie]&&(z.isBlock&&ie===z.fn&&H++,z.fn||(z.fn=ie));let ae=F[1]==="else";if(z.isBlock&&z.fn&&(F[1]===`/${z.fn}`||ae))if(H)!ae&&H--;else{let pe=z.startInner,ke=M.substr(pe,F.index-pe);z.body===void 0?(z.body=ke,z.startInner=F.index+F[0].length):z.elseBody=ke,z.find+=ke+F[0],ae||(y.push(z),z=void 0)}else z.isBlock||y.push(z);if(q&&!z?.isBlock)break}return y.forEach(X=>{let q,ie,{body:ae,elseBody:pe,expression:ke,fn:Te}=X;if(Te){let Ce=[X],De=[],Ye=ke.length,Qe=0,st;for(ie=0;ie<=Ye;ie++){let Gt=ke.charAt(ie);st||Gt!=='"'&&Gt!=="'"?st===Gt&&(st=""):st=Gt,st||Gt!==" "&&ie!==Ye||(De.push(ke.substr(Qe,ie-Qe)),Qe=ie+1)}for(ie=Sr[Te].length;ie--;)Ce.unshift(I(De[ie+1]));q=Sr[Te].apply(l,Ce),X.isBlock&&typeof q=="boolean"&&(q=Mi(q?ae:pe,l,h))}else{let Ce=Io(ke)?[ke]:ke.split(":"),De=(q=I(Ce.shift()||""))%1!=0;if(typeof q=="number"&&(Ce.length||De)){let Ye=Ce.join(":");if(_.test(Ye)||De){let Qe=parseInt((Ye.match(b)||["","-1"])[1],10);q!==null&&(q=P(q,Qe,S.decimalPoint,Ye.indexOf(",")>-1?S.thousandsSep:""))}else q=D.dateFormat(Ye,q)}m.lastIndex=0,m.test(X.find)&&oi(q)&&(q=`"${q}"`)}M=M.replace(X.find,ai(q,""))}),G?Mi(M,l,h):M}function Di(M,l,h,f){l*=1;let m,y,[_,b]=(M=+M||0).toString().split("e").map(Number),S=this?.options?.lang||Tn.lang,D=(M.toString().split(".")[1]||"").split("e")[0].length,P=l,I={};h??(h=S.decimalPoint),f??(f=S.thousandsSep),l===-1?l=Math.min(D,20):yi(l)?l&&b<0&&((y=l+b)>=0?(_=+_.toExponential(y).split("e")[0],l=y):(_=Math.floor(_),M=l<20?+(_*Math.pow(10,b)).toFixed(l):0,b=0)):l=2,b&&(l??(l=2),M=_),yi(l)&&l>=0&&(I.minimumFractionDigits=l,I.maximumFractionDigits=l),f===""&&(I.useGrouping=!1);let F=f||h,z=F?"en":this?.locale||S.locale||gn,H=JSON.stringify(I)+z;return m=(ds[H]??(ds[H]=new Intl.NumberFormat(z,I))).format(M),F&&(m=m.replace(/([,\.])/g,"_$1").replace(/_\,/g,f??",").replace("_.",h??".")),(l||+m!=0)&&(!(b<0)||P)||(m="0"),b&&+m!=0&&(m+="e"+(b<0?"":"+")+b),m}let Ni={dateFormat:function(M,l,h){return Rt.dateFormat(M,l,h)},format:Mi,helpers:Sr,numberFormat:Di};(function(M){let l;M.rendererTypes={},M.getRendererType=function(h=l){return M.rendererTypes[h]||M.rendererTypes[l]},M.registerRendererType=function(h,f,m){M.rendererTypes[h]=f,(!l||m)&&(l=h,K.Renderer=f)}})(i||(i={}));let lr=i,{clamp:er,pick:Kl,pushUnique:qs,stableSort:ju}=Mt;(r||(r={})).distribute=function M(l,h,f){let m=l,y=m.reducedLen||h,_=(ae,pe)=>ae.target-pe.target,b=[],S=l.length,D=[],P=b.push,I,F,z,H=!0,G,X,q=0,ie;for(I=S;I--;)q+=l[I].size;if(q>y){for(ju(l,(ae,pe)=>(pe.rank||0)-(ae.rank||0)),z=(ie=l[0].rank===l[l.length-1].rank)?S/2:-1,F=ie?z:S-1;z&&q>y;)G=l[I=Math.floor(F)],qs(D,I)&&(q-=G.size),F+=z,ie&&F>=l.length&&(z/=2,F=z);D.sort((ae,pe)=>pe-ae).forEach(ae=>P.apply(b,l.splice(ae,1)))}for(ju(l,_),l=l.map(ae=>({size:ae.size,targets:[ae.target],align:Kl(ae.align,.5)}));H;){for(I=l.length;I--;)G=l[I],X=(Math.min.apply(0,G.targets)+Math.max.apply(0,G.targets))/2,G.pos=er(X-G.size*G.align,0,h-G.size);for(I=l.length,H=!1;I--;)I>0&&l[I-1].pos+l[I-1].size>l[I].pos&&(l[I-1].size+=l[I].size,l[I-1].targets=l[I-1].targets.concat(l[I].targets),l[I-1].align=.5,l[I-1].pos+l[I-1].size>h&&(l[I-1].pos=h-l[I-1].size),l.splice(I,1),H=!0)}return P.apply(m,b),I=0,l.some(ae=>{let pe=0;return(ae.targets||[]).some(()=>(m[I].pos=ae.pos+pe,f!==void 0&&Math.abs(m[I].pos-m[I].target)>f?(m.slice(0,I+1).forEach(ke=>delete ke.pos),m.reducedLen=(m.reducedLen||h)-.1*h,m.reducedLen>.1*h&&M(m,h,f),!0):(pe+=m[I].size,I++,!1)))}),ju(m,_),m};let Ql=r,{animate:$c,animObject:yf,stop:dl}=Wr,{deg2rad:qc,doc:Jl,svg:vf,SVG_NS:Xc,win:ei,isFirefox:Ro}=K,{addEvent:or,attr:Xh,createElement:_f,crisp:Na,css:Yh,defined:fs,erase:Yc,extend:Oa,fireEvent:Gr,getAlignFactor:aa,isArray:bf,isFunction:Wu,isNumber:T0,isObject:Zh,isString:Kh,merge:Gu,objectEach:ec,pick:ni,pInt:Qh,pushUnique:Is,replaceNested:$u,syncTimeout:_m,uniqueKey:Zc}=Mt;class Ar{_defaultGetter(l){let h=ni(this[l+"Value"],this[l],this.element?this.element.getAttribute(l):null,0);return/^-?[\d\.]+$/.test(h)&&(h=parseFloat(h)),h}_defaultSetter(l,h,f){f.setAttribute(h,l)}add(l){let h,f=this.renderer,m=this.element;return l&&(this.parentGroup=l),this.textStr!==void 0&&this.element.nodeName==="text"&&f.buildText(this),this.added=!0,(!l||l.handleZ||this.zIndex)&&(h=this.zIndexSetter()),h||(l?l.element:f.box).appendChild(m),this.onAdd&&this.onAdd(),this}addClass(l,h){let f=h?"":this.attr("class")||"";return(l=(l||"").split(/ /g).reduce(function(m,y){return f.indexOf(y)===-1&&m.push(y),m},f?[f]:[]).join(" "))!==f&&this.attr("class",l),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(l,h,f,m=!0){let y=this.renderer,_=y.alignedObjects,b=!!l;l?(this.alignOptions=l,this.alignByTranslate=h,this.alignTo=f):(l=this.alignOptions||{},h=this.alignByTranslate,f=this.alignTo);let S=!f||Kh(f)?f||"renderer":void 0;S&&(b&&Is(_,this),f=void 0);let D=ni(f,y[S],y),P=(D.x||0)+(l.x||0)+((D.width||0)-(l.width||0))*aa(l.align),I=(D.y||0)+(l.y||0)+((D.height||0)-(l.height||0))*aa(l.verticalAlign),F={"text-align":l?.align};return F[h?"translateX":"x"]=Math.round(P),F[h?"translateY":"y"]=Math.round(I),m&&(this[this.placed?"animate":"attr"](F),this.placed=!0),this.alignAttr=F,this}alignSetter(l){let h={left:"start",center:"middle",right:"end"};h[l]&&(this.alignValue=l,this.element.setAttribute("text-anchor",h[l]))}animate(l,h,f){let m=yf(ni(h,this.renderer.globalAnimation,!0)),y=m.defer;return Jl.hidden&&(m.duration=0),m.duration!==0?(f&&(m.complete=f),_m(()=>{this.element&&$c(this,l,m)},y)):(this.attr(l,void 0,f||m.complete),ec(l,function(_,b){m.step&&m.step.call(this,_,{prop:b,pos:1,elem:this})},this)),this}applyTextOutline(l){let h=this.element;l.indexOf("contrast")!==-1&&(l=l.replace(/contrast/g,this.renderer.getContrast(h.style.fill)));let f=l.indexOf(" "),m=l.substring(f+1),y=l.substring(0,f);if(y&&y!=="none"&&K.svg){this.fakeTS=!0,y=y.replace(/(^[\d\.]+)(.*?)$/g,function(P,I,F){return 2*Number(I)+F}),this.removeTextOutline();let _=Jl.createElementNS(Xc,"tspan");Xh(_,{class:"highcharts-text-outline",fill:m,stroke:m,"stroke-width":y,"stroke-linejoin":"round"});let b=h.querySelector("textPath")||h;[].forEach.call(b.childNodes,P=>{let I=P.cloneNode(!0);I.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(F=>I.removeAttribute(F)),_.appendChild(I)});let S=0;[].forEach.call(b.querySelectorAll("text tspan"),P=>{S+=Number(P.getAttribute("dy"))});let D=Jl.createElementNS(Xc,"tspan");D.textContent="\u200B",Xh(D,{x:Number(h.getAttribute("x")),dy:-S}),_.appendChild(D),b.insertBefore(_,b.firstChild)}}attr(l,h,f,m){let{element:y}=this,_=Ar.symbolCustomAttribs,b,S,D=this,P;return typeof l=="string"&&h!==void 0&&(b=l,(l={})[b]=h),typeof l=="string"?D=(this[l+"Getter"]||this._defaultGetter).call(this,l,y):(ec(l,function(I,F){P=!1,m||dl(this,F),this.symbolName&&_.indexOf(F)!==-1&&(S||(this.symbolAttr(l),S=!0),P=!0),this.rotation&&(F==="x"||F==="y")&&(this.doTransform=!0),P||(this[F+"Setter"]||this._defaultSetter).call(this,I,F,y)},this),this.afterSetters()),f&&f.call(this),D}clip(l){if(l&&!l.clipPath){let h=Zc()+"-",f=this.renderer.createElement("clipPath").attr({id:h}).add(this.renderer.defs);Oa(l,{clipPath:f,id:h,count:0}),l.add(f)}return this.attr("clip-path",l?`url(${this.renderer.url}#${l.id})`:"none")}crisp(l,h){h=Math.round(h||l.strokeWidth||0);let f=l.x||this.x||0,m=l.y||this.y||0,y=(l.width||this.width||0)+f,_=(l.height||this.height||0)+m,b=Na(f,h),S=Na(m,h);return Oa(l,{x:b,y:S,width:Na(y,h)-b,height:Na(_,h)-S}),fs(l.strokeWidth)&&(l.strokeWidth=h),l}complexColor(l,h,f){let m=this.renderer,y,_,b,S,D,P,I,F,z,H,G=[],X;Gr(this.renderer,"complexColor",{args:arguments},function(){if(l.radialGradient?_="radialGradient":l.linearGradient&&(_="linearGradient"),_){if(b=l[_],D=m.gradients,P=l.stops,z=f.radialReference,bf(b)&&(l[_]=b={x1:b[0],y1:b[1],x2:b[2],y2:b[3],gradientUnits:"userSpaceOnUse"}),_==="radialGradient"&&z&&!fs(b.gradientUnits)&&(S=b,b=Gu(b,m.getRadialAttr(z,S),{gradientUnits:"userSpaceOnUse"})),ec(b,function(q,ie){ie!=="id"&&G.push(ie,q)}),ec(P,function(q){G.push(q)}),D[G=G.join(",")])H=D[G].attr("id");else{b.id=H=Zc();let q=D[G]=m.createElement(_).attr(b).add(m.defs);q.radAttr=S,q.stops=[],P.forEach(function(ie){ie[1].indexOf("rgba")===0?(I=(y=An.parse(ie[1])).get("rgb"),F=y.get("a")):(I=ie[1],F=1);let ae=m.createElement("stop").attr({offset:ie[0],"stop-color":I,"stop-opacity":F}).add(q);q.stops.push(ae)})}X="url("+m.url+"#"+H+")",f.setAttribute(h,X),f.gradient=G,l.toString=function(){return X}}})}css(l){let h=this.styles,f={},m=this.element,y,_=!h;if(h&&ec(l,function(b,S){h&&h[S]!==b&&(f[S]=b,_=!0)}),_){h&&(l=Oa(h,f)),l.width===null||l.width==="auto"?delete this.textWidth:m.nodeName.toLowerCase()==="text"&&l.width&&(y=this.textWidth=Qh(l.width)),Oa(this.styles,l),y&&!vf&&this.renderer.forExport&&delete l.width;let b=Ro&&l.fontSize||null;b&&(T0(b)||/^\d+$/.test(b))&&(l.fontSize+="px");let S=Gu(l);m.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","whiteSpace","width"].forEach(D=>S&&delete S[D]),S.color&&(S.fill=S.color,delete S.color)),Yh(m,S)}return this.added&&(this.element.nodeName==="text"&&this.renderer.buildText(this),l.textOutline&&this.applyTextOutline(l.textOutline)),this}dashstyleSetter(l){let h,f=this["stroke-width"];if(f==="inherit"&&(f=1),l){let m=(l=l.toLowerCase()).replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(h=m.length;h--;)m[h]=""+Qh(m[h])*ni(f,NaN);l=m.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",l)}}destroy(){let l=this,h=l.element||{},f=l.renderer,m=h.ownerSVGElement,y=h.nodeName==="SPAN"&&l.parentGroup||void 0,_,b;if(h.onclick=h.onmouseout=h.onmouseover=h.onmousemove=h.point=null,dl(l),l.clipPath&&m){let S=l.clipPath;[].forEach.call(m.querySelectorAll("[clip-path],[CLIP-PATH]"),function(D){D.getAttribute("clip-path").indexOf(S.element.id)>-1&&D.removeAttribute("clip-path")}),l.clipPath=S.destroy()}if(l.stops){for(b=0;b<l.stops.length;b++)l.stops[b].destroy();l.stops.length=0,l.stops=void 0}for(l.safeRemoveChild(h);y?.div&&y.div.childNodes.length===0;)_=y.parentGroup,l.safeRemoveChild(y.div),delete y.div,y=_;l.alignOptions&&Yc(f.alignedObjects,l),ec(l,(S,D)=>{(l[D]?.parentGroup===l||["connector","foreignObject"].indexOf(D)!==-1)&&l[D]?.destroy?.(),delete l[D]})}dSetter(l,h,f){bf(l)&&(typeof l[0]=="string"&&(l=this.renderer.pathToSegments(l)),this.pathArray=l,l=l.reduce((m,y,_)=>y?.join?(_?m+" ":"")+y.join(" "):(y||"").toString(),"")),/(NaN| {2}|^$)/.test(l)&&(l="M 0 0"),this[h]!==l&&(f.setAttribute(h,l),this[h]=l)}fillSetter(l,h,f){typeof l=="string"?f.setAttribute(h,l):l&&this.complexColor(l,h,f)}hrefSetter(l,h,f){f.setAttributeNS("http://www.w3.org/1999/xlink",h,l)}getBBox(l,h){let f,m,y,_,{alignValue:b,element:S,renderer:D,styles:P,textStr:I}=this,{cache:F,cacheKeys:z}=D,H=S.namespaceURI===this.SVG_NS,G=ni(h,this.rotation,0),X=D.styledMode?S&&Ar.prototype.getStyle.call(S,"font-size"):P.fontSize;if(fs(I)&&((_=I.toString()).indexOf("<")===-1&&(_=_.replace(/\d/g,"0")),_+=["",D.rootFontSize,X,G,this.textWidth,b,P.lineClamp,P.textOverflow,P.fontWeight].join(",")),_&&!l&&(f=F[_]),!f||f.polygon){if(H||D.forExport){try{y=this.fakeTS&&function(ie){let ae=S.querySelector(".highcharts-text-outline");ae&&Yh(ae,{display:ie})},Wu(y)&&y("none"),f=S.getBBox?Oa({},S.getBBox()):{width:S.offsetWidth,height:S.offsetHeight,x:0,y:0},Wu(y)&&y("")}catch{}(!f||f.width<0)&&(f={x:0,y:0,width:0,height:0})}else f=this.htmlGetBBox();m=f.height,H&&(f.height=m={"11px,17":14,"13px,20":16}[`${X||""},${Math.round(m)}`]||m),G&&(f=this.getRotatedBox(f,G));let q={bBox:f};Gr(this,"afterGetBBox",q),f=q.bBox}if(_&&(I===""||f.height>0)){for(;z.length>250;)delete F[z.shift()];F[_]||z.push(_),F[_]=f}return f}getRotatedBox(l,h){let{x:f,y:m,width:y,height:_}=l,{alignValue:b,translateY:S,rotationOriginX:D=0,rotationOriginY:P=0}=this,I=aa(b),F=Number(this.element.getAttribute("y")||0)-(S?0:m),z=h*qc,H=(h-90)*qc,G=Math.cos(z),X=Math.sin(z),q=y*G,ie=y*X,ae=Math.cos(H),pe=Math.sin(H),[[ke,Te],[Ce,De]]=[D,P].map(Gn=>[Gn-Gn*G,Gn*X]),Ye=f+I*(y-q)+ke+De+F*ae,Qe=Ye+q,st=Qe-_*ae,Gt=st-q,xn=m+F-I*ie-Te+Ce+F*pe,Sn=xn+ie,Xt=Sn-_*pe,Bt=Xt-ie,ln=Math.min(Ye,Qe,st,Gt),Er=Math.min(xn,Sn,Xt,Bt),Ki=Math.max(Ye,Qe,st,Gt)-ln,Uo=Math.max(xn,Sn,Xt,Bt)-Er;return{x:ln,y:Er,width:Ki,height:Uo,polygon:[[Ye,xn],[Qe,Sn],[st,Xt],[Gt,Bt]]}}getStyle(l){return ei.getComputedStyle(this.element||this,"").getPropertyValue(l)}hasClass(l){return(""+this.attr("class")).split(" ").indexOf(l)!==-1}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(l,h){this.onEvents={},this.opacity=1,this.SVG_NS=Xc,this.element=h==="span"||h==="body"?_f(h):Jl.createElementNS(this.SVG_NS,h),this.renderer=l,this.styles={},Gr(this,"afterInit")}on(l,h){let{onEvents:f}=this;return f[l]&&f[l](),f[l]=or(this.element,l,h),this}opacitySetter(l,h,f){let m=Number(Number(l).toFixed(3));this.opacity=m,f.setAttribute(h,m)}reAlign(){this.alignOptions?.width&&this.alignOptions.align!=="left"&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(l){return this.attr("class",(""+this.attr("class")).replace(Kh(l)?RegExp(`(^| )${l}( |$)`):l," ").replace(/ +/g," ").trim())}removeTextOutline(){let l=this.element.querySelector("tspan.highcharts-text-outline");l&&this.safeRemoveChild(l)}safeRemoveChild(l){let h=l.parentNode;h&&h.removeChild(l)}setRadialReference(l){let h=this.element.gradient&&this.renderer.gradients[this.element.gradient]||void 0;return this.element.radialReference=l,h?.radAttr&&h.animate(this.renderer.getRadialAttr(l,h.radAttr)),this}shadow(l){let{renderer:h}=this,f=Gu(this.parentGroup?.rotation===90?{offsetX:-1,offsetY:-1}:{},Zh(l)?l:{}),m=h.shadowDefinition(f);return this.attr({filter:l?`url(${h.url}#${m})`:"none"})}show(l=!0){return this.attr({visibility:l?"inherit":"visible"})}"stroke-widthSetter"(l,h,f){this[h]=l,f.setAttribute(h,l)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let l=this.getStyle("stroke-width"),h=0,f;return/px$/.test(l)?h=Qh(l):l!==""&&(Xh(f=Jl.createElementNS(Xc,"rect"),{width:l,"stroke-width":0}),this.element.parentNode.appendChild(f),h=f.getBBox().width,f.parentNode.removeChild(f)),h}symbolAttr(l){let h=this;Ar.symbolCustomAttribs.forEach(function(f){h[f]=ni(l[f],h[f])}),h.attr({d:h.renderer.symbols[h.symbolName](h.x,h.y,h.width,h.height,h)})}textSetter(l){l!==this.textStr&&(delete this.textPxLength,this.textStr=l,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(l){let h=this.element,f=h.getElementsByTagName("title")[0]||Jl.createElementNS(this.SVG_NS,"title");h.insertBefore?h.insertBefore(f,h.firstChild):h.appendChild(f),f.textContent=$u(ni(l,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let l=this.element;return l.parentNode.appendChild(l),this}translate(l,h){return this.attr({translateX:l,translateY:h})}updateTransform(l="transform"){let{element:h,foreignObject:f,matrix:m,padding:y,rotation:_=0,rotationOriginX:b,rotationOriginY:S,scaleX:D,scaleY:P,text:I,translateX:F=0,translateY:z=0}=this,H=["translate("+F+","+z+")"];fs(m)&&H.push("matrix("+m.join(",")+")"),_&&(H.push("rotate("+_+" "+(b??h.getAttribute("x")??this.x??0)+" "+(S??h.getAttribute("y")??this.y??0)+")"),I?.element.tagName!=="SPAN"||I?.foreignObject||I.attr({rotation:_,rotationOriginX:(b||0)-y,rotationOriginY:(S||0)-y})),(fs(D)||fs(P))&&H.push("scale("+ni(D,1)+" "+ni(P,1)+")"),H.length&&!(I||this).textPath&&(f?.element||h).setAttribute(l,H.join(" "))}visibilitySetter(l,h,f){l==="inherit"?f.removeAttribute(h):this[h]!==l&&f.setAttribute(h,l),this[h]=l}xGetter(l){return this.element.nodeName==="circle"&&(l==="x"?l="cx":l==="y"&&(l="cy")),this._defaultGetter(l)}zIndexSetter(l,h){let f=this.renderer,m=this.parentGroup,y=(m||f).element||f.box,_=this.element,b=y===f.box,S,D,P,I=!1,F,z=this.added,H;if(fs(l)?(_.setAttribute("data-z-index",l),l*=1,this[h]===l&&(z=!1)):fs(this[h])&&_.removeAttribute("data-z-index"),this[h]=l,z){for((l=this.zIndex)&&m&&(m.handleZ=!0),H=(S=y.childNodes).length-1;H>=0&&!I;H--)F=!fs(P=(D=S[H]).getAttribute("data-z-index")),D!==_&&(l<0&&F&&!b&&!H?(y.insertBefore(_,S[H]),I=!0):(Qh(P)<=l||F&&(!fs(l)||l>=0))&&(y.insertBefore(_,S[H+1]),I=!0));I||(y.insertBefore(_,S[3*!!b]),I=!0)}return I}}Ar.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],Ar.prototype.strokeSetter=Ar.prototype.fillSetter,Ar.prototype.yGetter=Ar.prototype.xGetter,Ar.prototype.matrixSetter=Ar.prototype.rotationOriginXSetter=Ar.prototype.rotationOriginYSetter=Ar.prototype.rotationSetter=Ar.prototype.scaleXSetter=Ar.prototype.scaleYSetter=Ar.prototype.translateXSetter=Ar.prototype.translateYSetter=Ar.prototype.verticalAlignSetter=function(M,l){this[l]=M,this.doTransform=!0};let la=Ar,{defined:Kc,extend:A0,getAlignFactor:bm,isNumber:tc,merge:D0,pick:io,removeEvent:Po}=Mt;class fl extends la{constructor(l,h,f,m,y,_,b,S,D,P){let I;super(l,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.doUpdate=!1,this.textStr=h,this.x=f,this.y=m,this.anchorX=_,this.anchorY=b,this.baseline=D,this.className=P,this.addClass(P==="button"?"highcharts-no-tooltip":"highcharts-label"),P&&this.addClass("highcharts-"+P),this.text=l.text(void 0,0,0,S).attr({zIndex:1}),typeof y=="string"&&((I=/^url\((.*?)\)$/.test(y))||this.renderer.symbols[y])&&(this.symbolKey=y),this.bBox=fl.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=l.styledMode||I,this.deferredAttr={},this.alignFactor=0}alignSetter(l){let h=bm(l);this.textAlign=l,h!==this.alignFactor&&(this.alignFactor=h,this.bBox&&tc(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(l,h){this.anchorX=l,this.boxAttr(h,Math.round(l)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(l,h){this.anchorY=l,this.boxAttr(h,l-this.ySetting)}boxAttr(l,h){this.box?this.box.attr(l,h):this.deferredAttr[l]=h}css(l){if(l){let h={};l=D0(l),fl.textProps.forEach(f=>{l[f]!==void 0&&(h[f]=l[f],delete l[f])}),this.text.css(h),"fontSize"in h||"fontWeight"in h?this.updateTextPadding():("width"in h||"textOverflow"in h)&&this.updateBoxSize()}return la.prototype.css.call(this,l)}destroy(){Po(this.element,"mouseenter"),Po(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),la.prototype.destroy.call(this)}fillSetter(l,h){l&&(this.needsBox=!0),this.fill=l,this.boxAttr(h,l)}getBBox(l,h){this.textStr&&this.bBox.width===0&&this.bBox.height===0&&this.updateBoxSize();let{padding:f,height:m=0,translateX:y=0,translateY:_=0,width:b=0}=this,S=io(this.paddingLeft,f),D=h??(this.rotation||0),P={width:b,height:m,x:y+this.bBox.x-S,y:_+this.bBox.y-f+this.baselineOffset};return D&&(P=this.getRotatedBox(P,D)),P}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(l){this.heightSetting=l,this.doUpdate=!0}afterSetters(){super.afterSetters(),this.doUpdate&&(this.updateBoxSize(),this.doUpdate=!1)}onAdd(){this.text.add(this),this.attr({text:io(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&Kc(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(l,h){tc(l)?l!==this[h]&&(this[h]=l,this.updateTextPadding()):this[h]=void 0}rSetter(l,h){this.boxAttr(h,l)}strokeSetter(l,h){this.stroke=l,this.boxAttr(h,l)}"stroke-widthSetter"(l,h){l&&(this.needsBox=!0),this["stroke-width"]=l,this.boxAttr(h,l)}"text-alignSetter"(l){this.textAlign=this["text-align"]=l,this.updateTextPadding()}textSetter(l){l!==void 0&&this.text.attr({text:l}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let l,h=this.text,f={},m=this.padding,y=this.bBox=(!tc(this.widthSetting)||!tc(this.heightSetting)||this.textAlign)&&Kc(h.textStr)?h.getBBox(void 0,0):fl.emptyBBox;this.width=this.getPaddedWidth(),this.height=(this.heightSetting||y.height||0)+2*m;let _=this.renderer.fontMetrics(h);if(this.baselineOffset=m+Math.min((this.text.firstLineMetrics||_).b,y.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-_.h)/2),this.needsBox&&!h.textPath){if(!this.box){let b=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();b.addClass((this.className==="button"?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),b.add(this)}f.x=l=this.getCrispAdjust(),f.y=(this.baseline?-this.baselineOffset:0)+l,f.width=Math.round(this.width),f.height=Math.round(this.height),this.box.attr(A0(f,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let l=this.text,h=l.styles.textAlign||this.textAlign;if(!l.textPath){this.updateBoxSize();let f=this.baseline?0:this.baselineOffset,m=(this.paddingLeft??this.padding)+bm(h)*(this.widthSetting??this.bBox.width);(m!==l.x||f!==l.y)&&(l.attr({align:h,x:m}),f!==void 0&&l.attr("y",f)),l.x=m,l.y=f}}widthSetter(l){this.widthSetting=tc(l)?l:void 0,this.doUpdate=!0}getPaddedWidth(){let l=this.padding,h=io(this.paddingLeft,l),f=io(this.paddingRight,l);return(this.widthSetting||this.bBox.width||0)+h+f}xSetter(l){this.x=l,this.alignFactor&&(l-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(l),this.attr("translateX",this.xSetting)}ySetter(l){this.ySetting=this.y=Math.round(l),this.attr("translateY",this.ySetting)}}fl.emptyBBox={width:0,height:0,x:0,y:0},fl.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineClamp","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"];let{defined:Fa,isNumber:xm,pick:Qc}=Mt;function Jh(M,l,h,f,m){let y=[];if(m){let _=m.start||0,b=m.end||0,S=Qc(m.r,h),D=Qc(m.r,f||h),P=2e-4/(m.borderRadius?1:Math.max(S,1)),I=Math.abs(b-_-2*Math.PI)<P;I&&(_=Math.PI/2,b=2.5*Math.PI-P);let F=m.innerR,z=Qc(m.open,I),H=Math.cos(_),G=Math.sin(_),X=Math.cos(b),q=Math.sin(b),ie=Qc(m.longArc,b-_-Math.PI<P?0:1),ae=["A",S,D,0,ie,Qc(m.clockwise,1),M+S*X,l+D*q];ae.params={start:_,end:b,cx:M,cy:l},y.push(["M",M+S*H,l+D*G],ae),Fa(F)&&((ae=["A",F,F,0,ie,Fa(m.clockwise)?1-m.clockwise:0,M+F*H,l+F*G]).params={start:b,end:_,cx:M,cy:l},y.push(z?["M",M+F*X,l+F*q]:["L",M+F*X,l+F*q],ae)),z||y.push(["Z"])}return y}function xf(M,l,h,f,m){return m?.r?ed(M,l,h,f,m):[["M",M,l],["L",M+h,l],["L",M+h,l+f],["L",M,l+f],["Z"]]}function ed(M,l,h,f,m){let y=m?.r||0;return[["M",M+y,l],["L",M+h-y,l],["A",y,y,0,0,1,M+h,l+y],["L",M+h,l+f-y],["A",y,y,0,0,1,M+h-y,l+f],["L",M+y,l+f],["A",y,y,0,0,1,M,l+f-y],["L",M,l+y],["A",y,y,0,0,1,M+y,l],["Z"]]}let wf={arc:Jh,callout:function(M,l,h,f,m){let y=Math.min(m?.r||0,h,f),_=y+6,b=m?.anchorX,S=m?.anchorY||0,D=ed(M,l,h,f,{r:y});if(!xm(b)||b<h&&b>0&&S<f&&S>0)return D;if(M+b>h-_)if(S>l+_&&S<l+f-_)D.splice(3,1,["L",M+h,S-6],["L",M+h+6,S],["L",M+h,S+6],["L",M+h,l+f-y]);else if(b<h){let P=S<l+_,I=P?l:l+f;D.splice(P?2:5,0,["L",b,S],["L",M+h-y,I])}else D.splice(3,1,["L",M+h,f/2],["L",b,S],["L",M+h,f/2],["L",M+h,l+f-y]);else if(M+b<_)if(S>l+_&&S<l+f-_)D.splice(7,1,["L",M,S+6],["L",M-6,S],["L",M,S-6],["L",M,l+y]);else if(b>0){let P=S<l+_,I=P?l:l+f;D.splice(P?1:6,0,["L",b,S],["L",M+y,I])}else D.splice(7,1,["L",M,f/2],["L",b,S],["L",M,f/2],["L",M,l+y]);else S>f&&b<h-_?D.splice(5,1,["L",b+6,l+f],["L",b,l+f+6],["L",b-6,l+f],["L",M+y,l+f]):S<0&&b>_&&D.splice(1,1,["L",b-6,l],["L",b,l-6],["L",b+6,l],["L",h-y,l]);return D},circle:function(M,l,h,f){return Jh(M+h/2,l+f/2,h/2,f/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(M,l,h,f){return[["M",M+h/2,l],["L",M+h,l+f/2],["L",M+h/2,l+f],["L",M,l+f/2],["Z"]]},rect:xf,roundedRect:ed,square:xf,triangle:function(M,l,h,f){return[["M",M+h/2,l],["L",M+h,l+f],["L",M,l+f],["Z"]]},"triangle-down":function(M,l,h,f){return[["M",M,l],["L",M+h,l],["L",M+h/2,l+f],["Z"]]}},{doc:Sf,SVG_NS:nc,win:td}=K,{attr:qu,extend:Cf,fireEvent:Mf,isString:nd,objectEach:ic,pick:pl}=Mt,Ba=(M,l)=>M.substring(0,l)+"\u2026",ro=class{constructor(M){let l=M.styles;this.renderer=M.renderer,this.svgElement=M,this.width=M.textWidth,this.textLineHeight=l?.lineHeight,this.textOutline=l?.textOutline,this.ellipsis=l?.textOverflow==="ellipsis",this.lineClamp=l?.lineClamp,this.noWrap=l?.whiteSpace==="nowrap"}buildSVG(){let M=this.svgElement,l=M.element,h=M.renderer,f=pl(M.textStr,"").toString(),m=f.indexOf("<")!==-1,y=l.childNodes,_=!M.added&&h.box,b=[f,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,M.getStyle("font-size"),M.styles.lineClamp,this.width].join(",");if(b!==M.textCache){M.textCache=b,delete M.actualWidth;for(let S=y.length;S--;)l.removeChild(y[S]);if(m||this.ellipsis||this.width||M.textPath||f.indexOf(" ")!==-1&&(!this.noWrap||/<br.*?>/g.test(f))){if(f!==""){_&&_.appendChild(l);let S=new Wt(f);this.modifyTree(S.nodes),S.addToDOM(l),this.modifyDOM(),this.ellipsis&&(l.textContent||"").indexOf("\u2026")!==-1&&M.attr("title",this.unescapeEntities(M.textStr||"",["&lt;","&gt;"])),_&&_.removeChild(l)}}else l.appendChild(Sf.createTextNode(this.unescapeEntities(f)));nd(this.textOutline)&&M.applyTextOutline&&M.applyTextOutline(this.textOutline)}}modifyDOM(){let M,l=this.svgElement,h=qu(l.element,"x");for(l.firstLineMetrics=void 0;(M=l.element.firstChild)&&/^[\s\u200B]*$/.test(M.textContent||" ");)l.element.removeChild(M);[].forEach.call(l.element.querySelectorAll("tspan.highcharts-br"),(_,b)=>{_.nextSibling&&_.previousSibling&&(b===0&&_.previousSibling.nodeType===1&&(l.firstLineMetrics=l.renderer.fontMetrics(_.previousSibling)),qu(_,{dy:this.getLineHeight(_.nextSibling),x:h}))});let f=this.width||0;if(!f)return;let m=(_,b)=>{let S=_.textContent||"",D=S.replace(/([^\^])-/g,"$1- ").split(" "),P=!this.noWrap&&(D.length>1||l.element.childNodes.length>1),I=this.getLineHeight(b),F=Math.max(0,f-.8*I),z=0,H=l.actualWidth;if(P){let G=[],X=[];for(;b.firstChild&&b.firstChild!==_;)X.push(b.firstChild),b.removeChild(b.firstChild);for(;D.length;)if(D.length&&!this.noWrap&&z>0&&(G.push(_.textContent||""),_.textContent=D.join(" ").replace(/- /g,"-")),this.truncate(_,void 0,D,z===0&&H||0,f,F,(q,ie)=>D.slice(0,ie).join(" ").replace(/- /g,"-")),H=l.actualWidth,z++,this.lineClamp&&z>=this.lineClamp){D.length&&(this.truncate(_,_.textContent||"",void 0,0,f,F,Ba),_.textContent=_.textContent?.replace("\u2026","")+"\u2026");break}X.forEach(q=>{b.insertBefore(q,_)}),G.forEach(q=>{b.insertBefore(Sf.createTextNode(q),_);let ie=Sf.createElementNS(nc,"tspan");ie.textContent="\u200B",qu(ie,{dy:I,x:h}),b.insertBefore(ie,_)})}else this.ellipsis&&S&&this.truncate(_,S,void 0,0,f,F,Ba)},y=_=>{[].slice.call(_.childNodes).forEach(b=>{b.nodeType===td.Node.TEXT_NODE?m(b,_):(b.className.baseVal.indexOf("highcharts-br")!==-1&&(l.actualWidth=0),y(b))})};y(l.element)}getLineHeight(M){let l=M.nodeType===td.Node.TEXT_NODE?M.parentElement:M;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(l||this.svgElement.element).h}modifyTree(M){let l=(h,f)=>{let{attributes:m={},children:y,style:_={},tagName:b}=h,S=this.renderer.styledMode;if(b==="b"||b==="strong"?S?m.class="highcharts-strong":_.fontWeight="bold":(b==="i"||b==="em")&&(S?m.class="highcharts-emphasized":_.fontStyle="italic"),_?.color&&(_.fill=_.color),b==="br"){m.class="highcharts-br",h.textContent="\u200B";let D=M[f+1];D?.textContent&&(D.textContent=D.textContent.replace(/^ +/gm,""))}else b==="a"&&y&&y.some(D=>D.tagName==="#text")&&(h.children=[{children:y,tagName:"tspan"}]);b!=="#text"&&b!=="a"&&(h.tagName="tspan"),Cf(h,{attributes:m,style:_}),y&&y.filter(D=>D.tagName!=="#text").forEach(l)};M.forEach(l),Mf(this.svgElement,"afterModifyTree",{nodes:M})}truncate(M,l,h,f,m,y,_){let b,S,D=this.svgElement,{rotation:P}=D,I=[],F=h&&!f?1:0,z=(l||h||"").length,H=z;h||(m=y);let G=function(X,q){let ie=q||X,ae=M.parentNode;if(ae&&I[ie]===void 0&&ae.getSubStringLength)try{I[ie]=f+ae.getSubStringLength(0,h?ie+1:ie)}catch{}return I[ie]};if(D.rotation=0,f+(S=G(M.textContent.length))>m){for(;F<=z;)H=Math.ceil((F+z)/2),h&&(b=_(h,H)),S=G(H,b&&b.length-1),F===z?F=z+1:S>m?z=H-1:F=H;z===0?M.textContent="":l&&z===l.length-1||(M.textContent=b||_(l||h,H)),this.ellipsis&&S>m&&this.truncate(M,M.textContent||"",void 0,0,m,y,Ba)}h&&h.splice(0,H),D.actualWidth=S,D.rotation=P}unescapeEntities(M,l){return ic(this.renderer.escapes,function(h,f){l&&l.indexOf(h)!==-1||(M=M.toString().replace(RegExp(h,"g"),f))}),M}},{defaultOptions:wm}=_n,{charts:Sm,deg2rad:Ef,doc:ml,isFirefox:id,isMS:Xu,isWebKit:I0,noop:Cm,SVG_NS:R0,symbolSizes:so,win:gl}=K,{addEvent:rd,attr:Xs,createElement:P0,crisp:rc,css:Yu,defined:ko,destroyObjectProperties:Mm,extend:ca,isArray:k0,isNumber:Ys,isObject:Va,isString:yl,merge:sc,pick:Tf,pInt:za,replaceNested:L0,uniqueKey:oc}=Mt;class Lo{constructor(l,h,f,m,y,_,b){let S,D;this.x=0,this.y=0;let P=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),I=P.element;b||P.css(this.getStyle(m||{})),l.appendChild(I),Xs(l,"dir","ltr"),l.innerHTML.indexOf("xmlns")===-1&&Xs(I,"xmlns",this.SVG_NS),this.box=I,this.boxWrapper=P,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(ml.createTextNode("Created with Highcharts 12.3.0")),this.defs=this.createElement("defs").add(),this.allowHTML=_,this.forExport=y,this.styledMode=b,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=P.getStyle("font-size"),this.setSize(h,f,!1),id&&l.getBoundingClientRect&&((S=function(){Yu(l,{left:0,top:0}),D=l.getBoundingClientRect(),Yu(l,{left:Math.ceil(D.left)-D.left+"px",top:Math.ceil(D.top)-D.top+"px"})})(),this.unSubPixelFix=rd(gl,"resize",S))}definition(l){return new Wt([l]).addToDOM(this.defs.element)}getReferenceURL(){if((id||I0)&&ml.getElementsByTagName("base").length){if(!ko(t)){let l=oc(),h=new Wt([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:l},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${l})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(ml.body);Yu(h,{position:"fixed",top:0,left:0,zIndex:9e5}),t=ml.elementFromPoint(6,6)?.id==="hitme",ml.body.removeChild(h)}if(t)return L0(gl.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(l){return this.style=ca({fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif',fontSize:"1rem"},l),this.style}setStyle(l){this.boxWrapper.css(this.getStyle(l))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let l=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),Mm(this.gradients||{}),this.gradients=null,this.defs=l.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(l){return new this.Element(this,l)}getRadialAttr(l,h){return{cx:l[0]-l[2]/2+(h.cx||0)*l[2],cy:l[1]-l[2]/2+(h.cy||0)*l[2],r:(h.r||0)*l[2]}}shadowDefinition(l){let h=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(l).map(m=>`${m}-${l[m]}`)].join("-").toLowerCase().replace(/[^a-z\d\-]/g,""),f=sc({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},l);return this.defs.element.querySelector(`#${h}`)||this.definition({tagName:"filter",attributes:{id:h,filterUnits:f.filterUnits},children:this.getShadowFilterContent(f)}),h}getShadowFilterContent(l){return[{tagName:"feDropShadow",attributes:{dx:l.offsetX,dy:l.offsetY,"flood-color":l.color,"flood-opacity":Math.min(5*l.opacity,1),stdDeviation:l.width/2}}]}buildText(l){new ro(l).buildSVG()}getContrast(l){if(l==="transparent")return"#000000";let h=An.parse(l).rgba,f=" clamp(0,calc(9e9*(0.5 - (0.2126*r + 0.7152*g + 0.0722*b))),1)";if(Ys(h[0])||!An.useColorMix){let m=h.map(_=>{let b=_/255;return b<=.04?b/12.92:Math.pow((b+.055)/1.055,2.4)}),y=.2126*m[0]+.7152*m[1]+.0722*m[2];return 1.05/(y+.05)>(y+.05)/.05?"#FFFFFF":"#000000"}return"color(from "+l+" srgb"+f+f+f+")"}button(l,h,f,m,y={},_,b,S,D,P){let I=this.label(l,h,f,D,void 0,void 0,P,void 0,"button"),F=this.styledMode,z=arguments,H=0;y=sc(wm.global.buttonTheme,y),F&&(delete y.fill,delete y.stroke,delete y["stroke-width"]);let G=y.states||{},X=y.style||{};delete y.states,delete y.style;let q=[Wt.filterUserAttributes(y)],ie=[X];return F||["hover","select","disabled"].forEach((ae,pe)=>{q.push(sc(q[0],Wt.filterUserAttributes(z[pe+5]||G[ae]||{}))),ie.push(q[pe+1].style),delete q[pe+1].style}),rd(I.element,Xu?"mouseover":"mouseenter",function(){H!==3&&I.setState(1)}),rd(I.element,Xu?"mouseout":"mouseleave",function(){H!==3&&I.setState(H)}),I.setState=(ae=0)=>{if(ae!==1&&(I.state=H=ae),I.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][ae]),!F){I.attr(q[ae]);let pe=ie[ae];Va(pe)&&I.css(pe)}},I.attr(q[0]),!F&&(I.css(ca({cursor:"default"},X)),P&&I.text.css({pointerEvents:"none"})),I.on("touchstart",ae=>ae.stopPropagation()).on("click",function(ae){H!==3&&m?.call(I,ae)})}crispLine(l,h){let[f,m]=l;return ko(f[1])&&f[1]===m[1]&&(f[1]=m[1]=rc(f[1],h)),ko(f[2])&&f[2]===m[2]&&(f[2]=m[2]=rc(f[2],h)),l}path(l){let h=this.styledMode?{}:{fill:"none"};return k0(l)?h.d=l:Va(l)&&ca(h,l),this.createElement("path").attr(h)}circle(l,h,f){let m=Va(l)?l:l===void 0?{}:{x:l,y:h,r:f},y=this.createElement("circle");return y.xSetter=y.ySetter=function(_,b,S){S.setAttribute("c"+b,_)},y.attr(m)}arc(l,h,f,m,y,_){let b;Va(l)?(h=(b=l).y,f=b.r,m=b.innerR,y=b.start,_=b.end,l=b.x):b={innerR:m,start:y,end:_};let S=this.symbol("arc",l,h,f,f,b);return S.r=f,S}rect(l,h,f,m,y,_){let b=Va(l)?l:l===void 0?{}:{x:l,y:h,r:y,width:Math.max(f||0,0),height:Math.max(m||0,0)},S=this.createElement("rect");return this.styledMode||(_!==void 0&&(b["stroke-width"]=_,ca(b,S.crisp(b))),b.fill="none"),S.rSetter=function(D,P,I){S.r=D,Xs(I,{rx:D,ry:D})},S.rGetter=function(){return S.r||0},S.attr(b)}roundedRect(l){return this.symbol("roundedRect").attr(l)}setSize(l,h,f){this.width=l,this.height=h,this.boxWrapper.animate({width:l,height:h},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:Tf(f,!0)?void 0:0}),this.alignElements()}g(l){let h=this.createElement("g");return l?h.attr({class:"highcharts-"+l}):h}image(l,h,f,m,y,_){let b={preserveAspectRatio:"none"};Ys(h)&&(b.x=h),Ys(f)&&(b.y=f),Ys(m)&&(b.width=m),Ys(y)&&(b.height=y);let S=this.createElement("image").attr(b),D=function(P){S.attr({href:l}),_.call(S,P)};if(_){S.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let P=new gl.Image;rd(P,"load",D),P.src=l,P.complete&&D({})}else S.attr({href:l});return S}symbol(l,h,f,m,y,_){let b,S,D,P,I=this,F=/^url\((.*?)\)$/,z=F.test(l),H=!z&&(this.symbols[l]?l:"circle"),G=H&&this.symbols[H];if(G)typeof h=="number"&&(S=G.call(this.symbols,h||0,f||0,m||0,y||0,_)),b=this.path(S),I.styledMode||b.attr("fill","none"),ca(b,{symbolName:H||void 0,x:h,y:f,width:m,height:y}),_&&ca(b,_);else if(z){D=l.match(F)[1];let X=b=this.image(D);X.imgwidth=Tf(_?.width,so[D]?.width),X.imgheight=Tf(_?.height,so[D]?.height),P=q=>q.attr({width:q.width,height:q.height}),["width","height"].forEach(q=>{X[`${q}Setter`]=function(ie,ae){this[ae]=ie;let{alignByTranslate:pe,element:ke,width:Te,height:Ce,imgwidth:De,imgheight:Ye}=this,Qe=ae==="width"?De:Ye,st=1;_&&_.backgroundSize==="within"&&Te&&Ce&&De&&Ye?(st=Math.min(Te/De,Ce/Ye),Xs(ke,{width:Math.round(De*st),height:Math.round(Ye*st)})):ke&&Qe&&ke.setAttribute(ae,Qe),!pe&&De&&Ye&&this.translate(((Te||0)-De*st)/2,((Ce||0)-Ye*st)/2)}}),ko(h)&&X.attr({x:h,y:f}),X.isImg=!0,X.symbolUrl=l,ko(X.imgwidth)&&ko(X.imgheight)?P(X):(X.attr({width:0,height:0}),P0("img",{onload:function(){let q=Sm[I.chartIndex];this.width===0&&(Yu(this,{position:"absolute",top:"-999em"}),ml.body.appendChild(this)),so[D]={width:this.width,height:this.height},X.imgwidth=this.width,X.imgheight=this.height,X.element&&P(X),this.parentNode&&this.parentNode.removeChild(this),I.imgCount--,I.imgCount||!q||q.hasLoaded||q.onload()},src:D}),this.imgCount++)}return b}clipRect(l,h,f,m){return this.rect(l,h,f,m,0)}text(l,h,f,m){let y={};if(m&&(this.allowHTML||!this.forExport))return this.html(l,h,f);y.x=Math.round(h||0),f&&(y.y=Math.round(f)),ko(l)&&(y.text=l);let _=this.createElement("text").attr(y);return m&&(!this.forExport||this.allowHTML)||(_.xSetter=function(b,S,D){let P=D.getElementsByTagName("tspan"),I=D.getAttribute(S);for(let F=0,z;F<P.length;F++)(z=P[F]).getAttribute(S)===I&&z.setAttribute(S,b);D.setAttribute(S,b)}),_}fontMetrics(l){let h=za(la.prototype.getStyle.call(l,"font-size")||0),f=h<24?h+3:Math.round(1.2*h),m=Math.round(.8*f);return{h:f,b:m,f:h}}rotCorr(l,h,f){let m=l;return h&&f&&(m=Math.max(m*Math.cos(h*Ef),4)),{x:-l/3*Math.sin(h*Ef),y:m}}pathToSegments(l){let h=[],f=[],m={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let y=0;y<l.length;y++)yl(f[0])&&Ys(l[y])&&f.length===m[f[0].toUpperCase()]&&l.splice(y,0,f[0].replace("M","L").replace("m","l")),typeof l[y]=="string"&&(f.length&&h.push(f.slice(0)),f.length=0),f.push(l[y]);return h.push(f.slice(0)),h}label(l,h,f,m,y,_,b,S,D){return new fl(this,l,h,f,m,y,_,b,S,D)}alignElements(){this.alignedObjects.forEach(l=>l.align())}}ca(Lo.prototype,{Element:la,SVG_NS:R0,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:wf,draw:Cm}),lr.registerRendererType("svg",Lo,!0);let{composed:ua,isFirefox:sd}=K,{attr:Af,css:No,createElement:vl,defined:ac,extend:lc,getAlignFactor:Jc,isNumber:cc,pInt:od,pushUnique:Df}=Mt;function Em(M,l,h){let f=this.div?.style;la.prototype[`${l}Setter`].call(this,M,l,h),f&&(h.style[l]=f[l]=M)}let ad=(M,l)=>{if(!M.div){let h=Af(M.element,"class"),f=M.css,m=vl("div",h?{className:h}:void 0,Mn(Je({position:"absolute",left:`${M.translateX||0}px`,top:`${M.translateY||0}px`},M.styles),{display:M.display,opacity:M.opacity,visibility:M.visibility}),M.parentGroup?.div||l);M.classSetter=(y,_,b)=>{b.setAttribute("class",y),m.className=y},M.translateXSetter=M.translateYSetter=(y,_)=>{M[_]=y,m.style[_==="translateX"?"left":"top"]=`${y}px`,M.doTransform=!0},M.scaleXSetter=M.scaleYSetter=(y,_)=>{M[_]=y,M.doTransform=!0},M.opacitySetter=M.visibilitySetter=Em,M.css=y=>(f.call(M,y),y.cursor&&(m.style.cursor=y.cursor),y.pointerEvents&&(m.style.pointerEvents=y.pointerEvents),M),M.on=function(){return la.prototype.on.apply({element:m,onEvents:M.onEvents},arguments),M},M.div=m}return M.div};class _l extends la{static compose(l){Df(ua,this.compose)&&(l.prototype.html=function(h,f,m){return new _l(this,"span").attr({text:h,x:Math.round(f),y:Math.round(m)})})}constructor(l,h){super(l,h),_l.useForeignObject?this.foreignObject=l.createElement("foreignObject").attr({zIndex:2}):this.css(Je({position:"absolute"},l.styledMode?{}:{fontFamily:l.style.fontFamily,fontSize:l.style.fontSize})),this.element.style.whiteSpace="nowrap"}getSpanCorrection(l,h,f){this.xCorr=-l*f,this.yCorr=-h}css(l){let h,{element:f}=this,m=f.tagName==="SPAN"&&l&&"width"in l,y=m&&l.width;return m&&(delete l.width,this.textWidth=od(y)||void 0,h=!0),l?.textOverflow==="ellipsis"&&(l.overflow="hidden",l.whiteSpace="nowrap"),l?.lineClamp&&(l.display="-webkit-box",l.WebkitLineClamp=l.lineClamp,l.WebkitBoxOrient="vertical",l.overflow="hidden"),cc(Number(l?.fontSize))&&(l.fontSize+="px"),lc(this.styles,l),No(f,l),h&&this.updateTransform(),this}htmlGetBBox(){let{element:l}=this;return{x:l.offsetLeft,y:l.offsetTop,width:l.offsetWidth,height:l.offsetHeight}}updateTransform(){if(!this.added){this.alignOnAdd=!0;return}let{element:l,foreignObject:h,oldTextWidth:f,renderer:m,rotation:y,rotationOriginX:_,rotationOriginY:b,scaleX:S,scaleY:D,styles:{display:P="inline-block",whiteSpace:I},textAlign:F="left",textWidth:z,translateX:H=0,translateY:G=0,x:X=0,y:q=0}=this;if(h||No(l,{marginLeft:`${H}px`,marginTop:`${G}px`}),l.tagName==="SPAN"){let ie,ae=[y,F,l.innerHTML,z,this.textAlign].join(","),pe=-(this.parentGroup?.padding*1)||0;if(z!==f){let De=this.textPxLength?this.textPxLength:(No(l,{width:"",whiteSpace:I||"nowrap"}),l.offsetWidth),Ye=z||0,Qe=l.style.textOverflow===""&&l.style.webkitLineClamp;(Ye>f||De>Ye||Qe)&&(/[\-\s\u00AD]/.test(l.textContent||l.innerText)||l.style.textOverflow==="ellipsis")&&(No(l,{width:(y||S||De>Ye||Qe)&&cc(z)?z+"px":"auto",display:P,whiteSpace:I||"normal"}),this.oldTextWidth=z)}h&&(No(l,{display:"inline-block",verticalAlign:"top"}),h.attr({width:m.width,height:m.height})),ae!==this.cTT&&(ie=m.fontMetrics(l).b,ac(y)&&!h&&(y!==(this.oldRotation||0)||F!==this.oldAlign)&&No(l,{transform:`rotate(${y}deg)`,transformOrigin:`${pe}% ${pe}px`}),this.getSpanCorrection(!ac(y)&&!this.textWidth&&this.textPxLength||l.offsetWidth,ie,Jc(F)));let{xCorr:ke=0,yCorr:Te=0}=this,Ce={left:`${X+ke}px`,top:`${q+Te}px`,textAlign:F,transformOrigin:`${(_??X)-ke-X-pe}px ${(b??q)-Te-q-pe}px`};(S||D)&&(Ce.transform=`scale(${S??1},${D??1})`),h?(super.updateTransform(),cc(X)&&cc(q)?(h.attr({x:X+ke,y:q+Te,width:l.offsetWidth+3,height:l.offsetHeight,"transform-origin":l.getAttribute("transform-origin")||"0 0"}),No(l,{display:P,textAlign:F})):sd&&h.attr({width:0,height:0})):No(l,Ce),this.cTT=ae,this.oldRotation=y,this.oldAlign=F}}add(l){let{foreignObject:h,renderer:f}=this,m=f.box.parentNode,y=[];if(h)h.add(l),super.add(f.createElement("body").attr({xmlns:"http://www.w3.org/1999/xhtml"}).css({background:"transparent",margin:"0 3px 0 0"}).add(h));else{let _;if(this.parentGroup=l,l&&!(_=l.div)){let b=l;for(;b;)y.push(b),b=b.parentGroup;for(let S of y.reverse())_=ad(S,m)}(_||m).appendChild(this.element)}return this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(l){l!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,Wt.setElementHTML(this.element,l??""),this.textStr=l,this.doTransform=!0)}alignSetter(l){this.alignValue=this.textAlign=l,this.doTransform=!0}xSetter(l,h){this[h]=l,this.doTransform=!0}}let bl=_l.prototype;bl.visibilitySetter=bl.opacitySetter=Em,bl.ySetter=bl.rotationSetter=bl.rotationOriginXSetter=bl.rotationOriginYSetter=bl.xSetter,function(M){M.xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%[HMSL]",range:!1},second:{main:"%[HMS]",range:!1},minute:{main:"%[HM]",range:!1},hour:{main:"%[HM]",range:!1},day:{main:"%[eb]"},week:{main:"%[eb]"},month:{main:"%[bY]"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em",textOverflow:"ellipsis"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},M.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:l}=this.axis.chart;return l(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0}}(s||(s={}));let eu=s,{addEvent:Tm,isFunction:Zu,objectEach:rs,removeEvent:Ku}=Mt;(o||(o={})).registerEventOptions=function(M,l){M.eventOptions=M.eventOptions||{},rs(l.events,function(h,f){M.eventOptions[f]!==h&&(M.eventOptions[f]&&(Ku(M,f,M.eventOptions[f]),delete M.eventOptions[f]),Zu(h)&&(M.eventOptions[f]=h,Tm(M,f,h,{order:0})))})};let ha=o,{deg2rad:tu}=K,{clamp:N0,correctFloat:Qu,defined:Ua,destroyObjectProperties:Rs,extend:Am,fireEvent:mo,getAlignFactor:Dm,isNumber:Ju,merge:Im,objectEach:Ha,pick:Oo}=Mt,Ps=class{constructor(M,l,h,f,m){this.isNew=!0,this.isNewLabel=!0,this.axis=M,this.pos=l,this.type=h||"",this.parameters=m||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,mo(this,"init"),h||f||this.addLabel()}addLabel(){let M=this,l=M.axis,h=l.options,f=l.chart,m=l.categories,y=l.logarithmic,_=l.names,b=M.pos,S=Oo(M.options?.labels,h.labels),D=l.tickPositions,P=b===D[0],I=b===D[D.length-1],F=(!S.step||S.step===1)&&l.tickInterval===1,z=D.info,H=M.label,G,X,q,ie=this.parameters.category||(m?Oo(m[b],_[b],b):b);y&&Ju(ie)&&(ie=Qu(y.lin2log(ie))),l.dateTime&&(z?G=(X=f.time.resolveDTLFormat(h.dateTimeLabelFormats[!h.grid?.enabled&&z.higherRanks[b]||z.unitName])).main:Ju(ie)&&(G=l.dateTime.getXDateFormat(ie,h.dateTimeLabelFormats||{}))),M.isFirst=P,M.isLast=I;let ae={axis:l,chart:f,dateTimeLabelFormat:G,isFirst:P,isLast:I,pos:b,tick:M,tickPositionInfo:z,value:ie};mo(this,"labelFormat",ae);let pe=Ce=>S.formatter?S.formatter.call(Ce,Ce):S.format?(Ce.text=l.defaultLabelFormatter.call(Ce),Ni.format(S.format,Ce,f)):l.defaultLabelFormatter.call(Ce),ke=pe.call(ae,ae),Te=X?.list;Te?M.shortenLabel=function(){for(q=0;q<Te.length;q++)if(Am(ae,{dateTimeLabelFormat:Te[q]}),H.attr({text:pe.call(ae,ae)}),H.getBBox().width<l.getSlotWidth(M)-2*(S.padding||0))return;H.attr({text:""})}:M.shortenLabel=void 0,F&&l._addedPlotLB&&M.moveLabel(ke,S),Ua(H)||M.movedLabel?H&&H.textStr!==ke&&!F&&(!H.textWidth||S.style.width||H.styles.width||H.css({width:null}),H.attr({text:ke}),H.textPxLength=H.getBBox().width):(M.label=H=M.createLabel(ke,S),M.rotation=0)}createLabel(M,l,h){let f=this.axis,{renderer:m,styledMode:y}=f.chart,_=l.style.whiteSpace,b=Ua(M)&&l.enabled?m.text(M,h?.x,h?.y,l.useHTML).add(f.labelGroup):void 0;return b&&(y||b.css(Im(l.style)),b.textPxLength=b.getBBox().width,!y&&_&&b.css({whiteSpace:_})),b}destroy(){Rs(this,this.axis)}getPosition(M,l,h,f){let m=this.axis,y=m.chart,_=f&&y.oldChartHeight||y.chartHeight,b={x:M?Qu(m.translate(l+h,void 0,void 0,f)+m.transB):m.left+m.offset+(m.opposite?(f&&y.oldChartWidth||y.chartWidth)-m.right-m.left:0),y:M?_-m.bottom+m.offset-(m.opposite?m.height:0):Qu(_-m.translate(l+h,void 0,void 0,f)-m.transB)};return b.y=N0(b.y,-1e9,1e9),mo(this,"afterGetPosition",{pos:b}),b}getLabelPosition(M,l,h,f,m,y,_,b){let S,D,P=this.axis,I=P.transA,F=P.isLinked&&P.linkedParent?P.linkedParent.reversed:P.reversed,z=P.staggerLines,H=P.tickRotCorr||{x:0,y:0},G=f||P.reserveSpaceDefault?0:-P.labelOffset*(P.labelAlign==="center"?.5:1),X=m.distance,q={};return S=P.side===0?h.rotation?-X:-h.getBBox().height:P.side===2?H.y+X:Math.cos(h.rotation*tu)*(H.y-h.getBBox(!1,0).height/2),Ua(m.y)&&(S=P.side===0&&P.horiz?m.y+S:m.y),M=M+Oo(m.x,[0,1,0,-1][P.side]*X)+G+H.x-(y&&f?y*I*(F?-1:1):0),l=l+S-(y&&!f?y*I*(F?1:-1):0),z&&(D=_/(b||1)%z,P.opposite&&(D=z-D-1),l+=D*(P.labelOffset/z)),q.x=M,q.y=Math.round(l),mo(this,"afterGetLabelPosition",{pos:q,tickmarkOffset:y,index:_}),q}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(M,l,h,f,m=!1,y){return y.crispLine([["M",M,l],["L",M+(m?0:-h),l+(m?h:0)]],f)}handleOverflow(M){let l=this.axis,h=l.options.labels,f=M.x,m=l.chart.chartWidth,y=l.chart.spacing,_=Oo(l.labelLeft,Math.min(l.pos,y[3])),b=Oo(l.labelRight,Math.max(l.isRadial?0:l.pos+l.len,m-y[1])),S=this.label,D=this.rotation,P=Dm(l.labelAlign||S.attr("align")),I=S.getBBox().width,F=l.getSlotWidth(this),z=F,H=1,G;D||h.overflow!=="justify"?D<0&&f-P*I<_?G=Math.round(f/Math.cos(D*tu)-_):D>0&&f+P*I>b&&(G=Math.round((m-f)/Math.cos(D*tu))):(f-P*I<_?z=M.x+z*(1-P)-_:f+(1-P)*I>b&&(z=b-M.x+z*P,H=-1),(z=Math.min(F,z))<F&&l.labelAlign==="center"&&(M.x+=H*(F-z-P*(F-Math.min(I,z)))),(I>z||l.autoRotation&&S?.styles?.width)&&(G=z)),G&&S&&(this.shortenLabel?this.shortenLabel():S.css(Am({},{width:Math.floor(G)+"px",lineClamp:+!l.isRadial})))}moveLabel(M,l){let h=this,f=h.label,m=h.axis,y=!1,_;f&&f.textStr===M?(h.movedLabel=f,y=!0,delete h.label):Ha(m.ticks,function(b){y||b.isNew||b===h||!b.label||b.label.textStr!==M||(h.movedLabel=b.label,y=!0,b.labelPos=h.movedLabel.xy,delete b.label)}),!y&&(h.labelPos||f)&&(_=h.labelPos||f.xy,h.movedLabel=h.createLabel(M,l,_),h.movedLabel&&h.movedLabel.attr({opacity:0}))}render(M,l,h){let f=this.axis,m=f.horiz,y=this.pos,_=Oo(this.tickmarkOffset,f.tickmarkOffset),b=this.getPosition(m,y,_,l),S=b.x,D=b.y,P=f.pos,I=P+f.len,F=m?S:D,z=Oo(h,this.label?.newOpacity,1);!f.chart.polar&&(Qu(F)<P||F>I)&&(h=0),h??(h=1),this.isActive=!0,this.renderGridLine(l,h),this.renderMark(b,h),this.renderLabel(b,l,z,M),this.isNew=!1,mo(this,"afterRender")}renderGridLine(M,l){let h=this.axis,f=h.options,m={},y=this.pos,_=this.type,b=Oo(this.tickmarkOffset,h.tickmarkOffset),S=h.chart.renderer,D=this.gridLine,P,I=f.gridLineWidth,F=f.gridLineColor,z=f.gridLineDashStyle;this.type==="minor"&&(I=f.minorGridLineWidth,F=f.minorGridLineColor,z=f.minorGridLineDashStyle),D||(h.chart.styledMode||(m.stroke=F,m["stroke-width"]=I||0,m.dashstyle=z),_||(m.zIndex=1),M&&(l=0),this.gridLine=D=S.path().attr(m).addClass("highcharts-"+(_?_+"-":"")+"grid-line").add(h.gridGroup)),D&&(P=h.getPlotLinePath({value:y+b,lineWidth:D.strokeWidth(),force:"pass",old:M,acrossPanes:!1}))&&D[M||this.isNew?"attr":"animate"]({d:P,opacity:l})}renderMark(M,l){let h=this.axis,f=h.options,m=h.chart.renderer,y=this.type,_=h.tickSize(y?y+"Tick":"tick"),b=M.x,S=M.y,D=Oo(f[y!=="minor"?"tickWidth":"minorTickWidth"],!y&&h.isXAxis?1:0),P=f[y!=="minor"?"tickColor":"minorTickColor"],I=this.mark,F=!I;_&&(h.opposite&&(_[0]=-_[0]),!I&&(this.mark=I=m.path().addClass("highcharts-"+(y?y+"-":"")+"tick").add(h.axisGroup),h.chart.styledMode||I.attr({stroke:P,"stroke-width":D})),I[F?"attr":"animate"]({d:this.getMarkPath(b,S,_[0],I.strokeWidth(),h.horiz,m),opacity:l}))}renderLabel(M,l,h,f){let m=this.axis,y=m.horiz,_=m.options,b=this.label,S=_.labels,D=S.step,P=Oo(this.tickmarkOffset,m.tickmarkOffset),I=M.x,F=M.y,z=!0;b&&Ju(I)&&(b.xy=M=this.getLabelPosition(I,F,b,y,S,P,f,D),(!this.isFirst||this.isLast||_.showFirstLabel)&&(!this.isLast||this.isFirst||_.showLastLabel)?!y||S.step||S.rotation||l||h===0||this.handleOverflow(M):z=!1,D&&f%D&&(z=!1),z&&Ju(M.y)?(M.opacity=h,b[this.isNewLabel?"attr":"animate"](M).show(!0),this.isNewLabel=!1):(b.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let M=this.label,l=this.axis;M&&!this.isNew&&(M.animate({opacity:0},void 0,M.destroy),delete this.label),l.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}},{animObject:ja}=Wr,{xAxis:ld,yAxis:go}=eu,{defaultOptions:xl}=_n,{registerEventOptions:uc}=ha,{deg2rad:Rm}=K,{arrayMax:Pm,arrayMin:If,clamp:cd,correctFloat:Cr,defined:tr,destroyObjectProperties:km,erase:Lm,error:ud,extend:eh,fireEvent:dr,getClosestDistance:c,insertItem:p,isArray:w,isNumber:R,isString:U,merge:ee,normalizeTickInterval:_e,objectEach:Ve,pick:Oe,relativeLength:dt,removeEvent:Zt,splat:Ln,syncTimeout:li}=Mt,ps=(M,l)=>_e(l,void 0,void 0,Oe(M.options.allowDecimals,l<.5||M.tickAmount!==void 0),!!M.tickAmount);eh(xl,{xAxis:ld,yAxis:ee(ld,go)});let Dr=(()=>{class M{constructor(h,f,m){this.init(h,f,m)}init(h,f,m=this.coll){let y=m==="xAxis",_=this.isZAxis||(h.inverted?!y:y);this.chart=h,this.horiz=_,this.isXAxis=y,this.coll=m,dr(this,"init",{userOptions:f}),this.opposite=Oe(f.opposite,this.opposite),this.side=Oe(f.side,this.side,_?2*!this.opposite:this.opposite?1:3),this.setOptions(f);let b=this.options,S=b.labels;this.type??(this.type=b.type||"linear"),this.uniqueNames??(this.uniqueNames=b.uniqueNames??!0),dr(this,"afterSetType"),this.userOptions=f,this.minPixelPadding=0,this.reversed=Oe(b.reversed,this.reversed),this.visible=b.visible,this.zoomEnabled=b.zoomEnabled,this.hasNames=this.type==="category"||b.categories===!0,this.categories=w(b.categories)&&b.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=tr(b.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len??(this.len=0),this.minRange=this.userMinRange=b.minRange||b.maxZoom,this.range=b.range,this.offset=b.offset||0,this.max=void 0,this.min=void 0;let D=Oe(b.crosshair,Ln(h.options.tooltip.crosshairs)[+!y]);this.crosshair=D===!0?{}:D,h.axes.indexOf(this)===-1&&(y?h.axes.splice(h.xAxis.length,0,this):h.axes.push(this),p(this,h[this.coll])),h.orderItems(this.coll),this.series=this.series||[],h.inverted&&!this.isZAxis&&y&&!tr(this.reversed)&&(this.reversed=!0),this.labelRotation=R(S.rotation)?S.rotation:void 0,uc(this,b),dr(this,"afterInit")}setOptions(h){let f=this.horiz?{labels:{autoRotation:[-45],padding:3},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=ee(f,this.coll==="yAxis"?{title:{text:this.chart.options.lang.yAxisTitle}}:{},xl[this.coll],h),dr(this,"afterSetOptions",{userOptions:h})}defaultLabelFormatter(){let h=this.axis,{numberFormatter:f}=this.chart,m=R(this.value)?this.value:NaN,y=h.chart.time,_=h.categories,b=this.dateTimeLabelFormat,S=xl.lang,D=S.numericSymbols,P=S.numericSymbolMagnitude||1e3,I=h.logarithmic?Math.abs(m):h.tickInterval,F=D?.length,z,H;if(_)H=`${this.value}`;else if(b)H=y.dateFormat(b,m,!0);else if(F&&D&&I>=1e3)for(;F--&&H===void 0;)I>=(z=Math.pow(P,F+1))&&10*m%z==0&&D[F]!==null&&m!==0&&(H=f(m/z,-1)+D[F]);return H===void 0&&(H=Math.abs(m)>=1e4?f(m,-1):f(m,-1,void 0,"")),H}getSeriesExtremes(){let h,f=this;dr(this,"getSeriesExtremes",null,function(){f.hasVisibleSeries=!1,f.dataMin=f.dataMax=f.threshold=void 0,f.softThreshold=!f.isXAxis,f.series.forEach(m=>{if(m.reserveSpace()){let y=m.options,_,b=y.threshold,S,D;if(f.hasVisibleSeries=!0,f.positiveValuesOnly&&0>=(b||0)&&(b=void 0),f.isXAxis)(_=m.getColumn("x")).length&&(_=f.logarithmic?_.filter(P=>P>0):_,S=(h=m.getXExtremes(_)).min,D=h.max,R(S)||S instanceof Date||(_=_.filter(R),S=(h=m.getXExtremes(_)).min,D=h.max),_.length&&(f.dataMin=Math.min(Oe(f.dataMin,S),S),f.dataMax=Math.max(Oe(f.dataMax,D),D)));else{let P=m.applyExtremes();R(P.dataMin)&&(S=P.dataMin,f.dataMin=Math.min(Oe(f.dataMin,S),S)),R(P.dataMax)&&(D=P.dataMax,f.dataMax=Math.max(Oe(f.dataMax,D),D)),tr(b)&&(f.threshold=b),(!y.softThreshold||f.positiveValuesOnly)&&(f.softThreshold=!1)}}})}),dr(this,"afterGetSeriesExtremes")}translate(h,f,m,y,_,b){let S=this.linkedParent||this,D=y&&S.old?S.old.min:S.min;if(!R(D))return NaN;let P=S.minPixelPadding,I=(S.isOrdinal||S.brokenAxis?.hasBreaks||S.logarithmic&&_)&&S.lin2val,F=1,z=0,H=y&&S.old?S.old.transA:S.transA,G=0;return H||(H=S.transA),m&&(F*=-1,z=S.len),S.reversed&&(F*=-1,z-=F*(S.sector||S.len)),f?(G=(h=h*F+z-P)/H+D,I&&(G=S.lin2val(G))):(I&&(h=S.val2lin(h)),G=F*(h-D)*H+z+F*P+(R(b)?H*b:0),S.isRadial||(G=Cr(G))),G}toPixels(h,f){return this.translate(this.chart?.time.parse(h)??NaN,!1,!this.horiz,void 0,!0)+(f?0:this.pos)}toValue(h,f){return this.translate(h-(f?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(h){let f=this,m=f.chart,y=f.left,_=f.top,b=h.old,S=h.value,D=h.lineWidth,P=b&&m.oldChartHeight||m.chartHeight,I=b&&m.oldChartWidth||m.chartWidth,F=f.transB,z=h.translatedValue,H=h.force,G,X,q,ie,ae;function pe(Te,Ce,De){return H!=="pass"&&(Te<Ce||Te>De)&&(H?Te=cd(Te,Ce,De):ae=!0),Te}let ke={value:S,lineWidth:D,old:b,force:H,acrossPanes:h.acrossPanes,translatedValue:z};return dr(this,"getPlotLinePath",ke,function(Te){G=q=(z=cd(z=Oe(z,f.translate(S,void 0,void 0,b)),-1e9,1e9))+F,X=ie=P-z-F,R(z)?f.horiz?(X=_,ie=P-f.bottom+(f.options.isInternal?0:m.scrollablePixelsY||0),G=q=pe(G,y,y+f.width)):(G=y,q=I-f.right+(m.scrollablePixelsX||0),X=ie=pe(X,_,_+f.height)):(ae=!0,H=!1),Te.path=ae&&!H?void 0:m.renderer.crispLine([["M",G,X],["L",q,ie]],D||1)}),ke.path}getLinearTickPositions(h,f,m){let y,_,b,S=Cr(Math.floor(f/h)*h),D=Cr(Math.ceil(m/h)*h),P=[];if(Cr(S+h)===S&&(b=20),this.single)return[f];for(y=S;y<=D&&(P.push(y),(y=Cr(y+h,b))!==_);)_=y;return P}getMinorTickInterval(){let{minorTicks:h,minorTickInterval:f}=this.options;return h===!0?Oe(f,"auto"):h!==!1?f:void 0}getMinorTickPositions(){let h=this.options,f=this.tickPositions,m=this.minorTickInterval,y=this.pointRangePadding||0,_=(this.min||0)-y,b=(this.max||0)+y,S=this.brokenAxis?.hasBreaks?this.brokenAxis.unitLength:b-_,D=[],P;if(S&&S/m<this.len/3){let I=this.logarithmic;if(I)this.paddedTicks.forEach(function(F,z,H){z&&D.push.apply(D,I.getLogTickPositions(m,H[z-1],H[z],!0))});else if(this.dateTime&&this.getMinorTickInterval()==="auto")D=D.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(m),_,b,h.startOfWeek));else for(P=_+(f[0]-_)%m;P<=b&&P!==D[0];P+=m)D.push(P)}return D.length!==0&&this.trimTicks(D),D}adjustForMinRange(){let h=this.options,f=this.logarithmic,m=this.chart.time,{max:y,min:_,minRange:b}=this,S,D,P,I;this.isXAxis&&b===void 0&&!f&&(b=tr(h.min)||tr(h.max)||tr(h.floor)||tr(h.ceiling)?null:Math.min(5*(c(this.series.map(F=>{let z=F.getColumn("x");return F.xIncrement?z.slice(0,2):z}))||0),this.dataMax-this.dataMin)),R(y)&&R(_)&&R(b)&&y-_<b&&(D=this.dataMax-this.dataMin>=b,S=(b-y+_)/2,P=[_-S,m.parse(h.min)??_-S],D&&(P[2]=f?f.log2lin(this.dataMin):this.dataMin),I=[(_=Pm(P))+b,m.parse(h.max)??_+b],D&&(I[2]=f?f.log2lin(this.dataMax):this.dataMax),(y=If(I))-_<b&&(P[0]=y-b,P[1]=m.parse(h.min)??y-b,_=Pm(P))),this.minRange=b,this.min=_,this.max=y}getClosest(){let h,f;if(this.categories)f=1;else{let m=[];this.series.forEach(function(y){let _=y.closestPointRange,b=y.getColumn("x");b.length===1?m.push(b[0]):y.sorted&&tr(_)&&y.reserveSpace()&&(f=tr(f)?Math.min(f,_):_)}),m.length&&(m.sort((y,_)=>y-_),h=c([m]))}return h&&f?Math.min(h,f):h||f}nameToX(h){let f=w(this.options.categories),m=f?this.categories:this.names,y=h.options.x,_;return h.series.requireSorting=!1,tr(y)||(y=this.uniqueNames&&m?f?m.indexOf(h.name):Oe(m.keys[h.name],-1):h.series.autoIncrement()),y===-1?!f&&m&&(_=m.length):R(y)&&(_=y),_!==void 0?(this.names[_]=h.name,this.names.keys[h.name]=_):h.x&&(_=h.x),_}updateNames(){let h=this,f=this.names;f.length>0&&(Object.keys(f.keys).forEach(function(m){delete f.keys[m]}),f.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(m=>{m.xIncrement=null,(!m.points||m.isDirtyData)&&(h.max=Math.max(h.max||0,m.dataTable.rowCount-1),m.processData(),m.generatePoints());let y=m.getColumn("x").slice();m.data.forEach((_,b)=>{let S=y[b];_?.options&&_.name!==void 0&&(S=h.nameToX(_))!==void 0&&S!==_.x&&(y[b]=_.x=S)}),m.dataTable.setColumn("x",y)}))}setAxisTranslation(){let h=this,f=h.max-h.min,m=h.linkedParent,y=!!h.categories,_=h.isXAxis,b=h.axisPointRange||0,S,D=0,P=0,I,F=h.transA;(_||y||b)&&(S=h.getClosest(),m?(D=m.minPointOffset,P=m.pointRangePadding):h.series.forEach(function(z){let H=y?1:_?Oe(z.options.pointRange,S,0):h.axisPointRange||0,G=z.options.pointPlacement;if(b=Math.max(b,H),!h.single||y){let X=z.is("xrange")?!_:_;D=Math.max(D,X&&U(G)?0:H/2),P=Math.max(P,X&&G==="on"?0:H)}}),I=h.ordinal?.slope&&S?h.ordinal.slope/S:1,h.minPointOffset=D*=I,h.pointRangePadding=P*=I,h.pointRange=Math.min(b,h.single&&y?1:f),_&&(h.closestPointRange=S)),h.translationSlope=h.transA=F=h.staticScale||h.len/(f+P||1),h.transB=h.horiz?h.left:h.bottom,h.minPixelPadding=F*D,dr(this,"afterSetAxisTranslation")}minFromRange(){let{max:h,min:f}=this;return R(h)&&R(f)&&h-f||void 0}setTickInterval(h){let{categories:f,chart:m,dataMax:y,dataMin:_,dateTime:b,isXAxis:S,logarithmic:D,options:P,softThreshold:I}=this,F=m.time,z=R(this.threshold)?this.threshold:void 0,H=this.minRange||0,{ceiling:G,floor:X,linkedTo:q,softMax:ie,softMin:ae}=P,pe=R(q)&&m[this.coll]?.[q],ke=P.tickPixelInterval,Te=P.maxPadding,Ce=P.minPadding,De=0,Ye,Qe=R(P.tickInterval)&&P.tickInterval>=0?P.tickInterval:void 0,st,Gt,xn,Sn;if(b||f||pe||this.getTickAmount(),xn=Oe(this.userMin,F.parse(P.min)),Sn=Oe(this.userMax,F.parse(P.max)),pe?(this.linkedParent=pe,Ye=pe.getExtremes(),this.min=Oe(Ye.min,Ye.dataMin),this.max=Oe(Ye.max,Ye.dataMax),this.type!==pe.type&&ud(11,!0,m)):(I&&tr(z)&&R(y)&&R(_)&&(_>=z?(st=z,Ce=0):y<=z&&(Gt=z,Te=0)),this.min=Oe(xn,st,_),this.max=Oe(Sn,Gt,y)),R(this.max)&&R(this.min)&&(D&&(this.positiveValuesOnly&&!h&&0>=Math.min(this.min,Oe(_,this.min))&&ud(10,!0,m),this.min=Cr(D.log2lin(this.min),16),this.max=Cr(D.log2lin(this.max),16)),this.range&&R(_)&&(this.userMin=this.min=xn=Math.max(_,this.minFromRange()||0),this.userMax=Sn=this.max,this.range=void 0)),dr(this,"foundExtremes"),this.adjustForMinRange(),R(this.min)&&R(this.max)){if(!R(this.userMin)&&R(ae)&&ae<this.min&&(this.min=xn=ae),!R(this.userMax)&&R(ie)&&ie>this.max&&(this.max=Sn=ie),f||this.axisPointRange||this.stacking?.usePercentage||pe||(De=this.max-this.min)&&(!tr(xn)&&Ce&&(this.min-=De*Ce),!tr(Sn)&&Te&&(this.max+=De*Te)),!R(this.userMin)&&R(X)&&(this.min=Math.max(this.min,X)),!R(this.userMax)&&R(G)&&(this.max=Math.min(this.max,G)),I&&R(_)&&R(y)){let Bt=z||0;!tr(xn)&&this.min<Bt&&_>=Bt?this.min=P.minRange?Math.min(Bt,this.max-H):Bt:!tr(Sn)&&this.max>Bt&&y<=Bt&&(this.max=P.minRange?Math.max(Bt,this.min+H):Bt)}!m.polar&&this.min>this.max&&(tr(P.min)?this.max=this.min:tr(P.max)&&(this.min=this.max)),De=this.max-this.min}if(this.min!==this.max&&R(this.min)&&R(this.max)?pe&&!Qe&&ke===pe.options.tickPixelInterval?this.tickInterval=Qe=pe.tickInterval:this.tickInterval=Oe(Qe,this.tickAmount?De/Math.max(this.tickAmount-1,1):void 0,f?1:De*ke/Math.max(this.len,ke)):this.tickInterval=1,S&&!h){let Bt=this.min!==this.old?.min||this.max!==this.old?.max;this.series.forEach(function(ln){ln.forceCrop=ln.forceCropping?.(),ln.processData(Bt)}),dr(this,"postProcessData",{hasExtremesChanged:Bt})}this.setAxisTranslation(),dr(this,"initialAxisTranslation"),this.pointRange&&!Qe&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let Xt=Oe(P.minTickInterval,b&&!this.series.some(Bt=>!Bt.sorted)?this.closestPointRange:0);!Qe&&Xt&&this.tickInterval<Xt&&(this.tickInterval=Xt),b||D||Qe||(this.tickInterval=ps(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){let h=this.options,f=h.tickPositions,m=h.tickPositioner,y=this.getMinorTickInterval(),_=!this.isPanning,b=_&&h.startOnTick,S=_&&h.endOnTick,D=[],P;if(this.tickmarkOffset=this.categories&&h.tickmarkPlacement==="between"&&this.tickInterval===1?.5:0,this.single=this.min===this.max&&tr(this.min)&&!this.tickAmount&&(this.min%1==0||h.allowDecimals!==!1),f)D=f.slice();else if(R(this.min)&&R(this.max)){if(!this.ordinal?.positions&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))D=[this.min,this.max],ud(19,!1,this.chart);else if(this.dateTime)D=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,h.units),this.min,this.max,h.startOfWeek,this.ordinal?.positions,this.closestPointRange,!0);else if(this.logarithmic)D=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let I=this.tickInterval,F=I;for(;F<=2*I&&(D=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&D.length>this.tickAmount);)this.tickInterval=ps(this,F*=1.1)}D.length>this.len&&(D=[D[0],D[D.length-1]])[0]===D[1]&&(D.length=1),m&&(this.tickPositions=D,(P=m.apply(this,[this.min,this.max]))&&(D=P))}this.tickPositions=D,this.minorTickInterval=y==="auto"&&this.tickInterval?this.tickInterval/h.minorTicksPerMajor:y,this.paddedTicks=D.slice(0),this.trimTicks(D,b,S),!this.isLinked&&R(this.min)&&R(this.max)&&(this.single&&D.length<2&&!this.categories&&!this.series.some(I=>I.is("heatmap")&&I.options.pointPlacement==="between")&&(this.min-=.5,this.max+=.5),f||P||this.adjustTickAmount()),dr(this,"afterSetTickPositions")}trimTicks(h,f,m){let y=h[0],_=h[h.length-1],b=!this.isOrdinal&&this.minPointOffset||0;if(dr(this,"trimTicks"),!this.isLinked||!this.grid){if(f&&y!==-1/0)this.min=y;else for(;this.min-b>h[0];)h.shift();if(m)this.max=_;else for(;this.max+b<h[h.length-1];)h.pop();h.length===0&&tr(y)&&!this.options.tickPositions&&h.push((_+y)/2)}}alignToOthers(){let h,f=this,m=f.chart,y=[this],_=f.options,b=m.options.chart,S=this.coll==="yAxis"&&b.alignThresholds,D=[];if(f.thresholdAlignment=void 0,(b.alignTicks!==!1&&_.alignTicks||S)&&_.startOnTick!==!1&&_.endOnTick!==!1&&!f.logarithmic){let P=F=>{let{horiz:z,options:H}=F;return[z?H.left:H.top,H.width,H.height,H.pane].join(",")},I=P(this);m[this.coll].forEach(function(F){let{series:z}=F;z.length&&z.some(H=>H.visible)&&F!==f&&P(F)===I&&(h=!0,y.push(F))})}if(h&&S){y.forEach(I=>{let F=I.getThresholdAlignment(f);R(F)&&D.push(F)});let P=D.length>1?D.reduce((I,F)=>I+=F,0)/D.length:void 0;y.forEach(I=>{I.thresholdAlignment=P})}return h}getThresholdAlignment(h){if((!R(this.dataMin)||this!==h&&this.series.some(f=>f.isDirty||f.isDirtyData))&&this.getSeriesExtremes(),R(this.threshold)){let f=cd((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(f=1-f),f}}getTickAmount(){let h=this.options,f=h.tickPixelInterval,m=h.tickAmount;tr(h.tickInterval)||m||!(this.len<f)||this.isRadial||this.logarithmic||!h.startOnTick||!h.endOnTick||(m=2),!m&&this.alignToOthers()&&(m=Math.ceil(this.len/f)+1),m<4&&(this.finalTickAmt=m,m=5),this.tickAmount=m}adjustTickAmount(){let h=this,{finalTickAmt:f,max:m,min:y,options:_,tickPositions:b,tickAmount:S,thresholdAlignment:D}=h,P=b?.length,I=Oe(h.threshold,h.softThreshold?0:null),F,z,H=h.tickInterval,G,X=()=>b.push(Cr(b[b.length-1]+H)),q=()=>b.unshift(Cr(b[0]-H));if(R(D)&&(G=D<.5?Math.ceil(D*(S-1)):Math.floor(D*(S-1)),_.reversed&&(G=S-1-G)),h.hasData()&&R(y)&&R(m)){let ie=()=>{h.transA*=(P-1)/(S-1),h.min=_.startOnTick?b[0]:Math.min(y,b[0]),h.max=_.endOnTick?b[b.length-1]:Math.max(m,b[b.length-1])};if(R(G)&&R(h.threshold)){for(;b[G]!==I||b.length!==S||b[0]>y||b[b.length-1]<m;){for(b.length=0,b.push(h.threshold);b.length<S;)b[G]===void 0||b[G]>h.threshold?q():X();if(H>8*h.tickInterval)break;H*=2}ie()}else if(P<S){for(;b.length<S;)b.length%2||y===I?X():q();ie()}if(tr(f)){for(z=F=b.length;z--;)(f===3&&z%2==1||f<=2&&z>0&&z<F-1)&&b.splice(z,1);h.finalTickAmt=void 0}}}setScale(){let{coll:h,stacking:f}=this,m=!1,y=!1;this.series.forEach(b=>{m=m||b.isDirtyData||b.isDirty,y=y||b.xAxis?.isDirty||!1}),this.setAxisSize();let _=this.len!==this.old?.len;_||m||y||this.isLinked||this.forceRedraw||this.userMin!==this.old?.userMin||this.userMax!==this.old?.userMax||this.alignToOthers()?(f&&h==="yAxis"&&f.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),f&&h==="xAxis"&&f.buildStacks(),this.isDirty||(this.isDirty=_||this.min!==this.old?.min||this.max!==this.old?.max)):f&&f.cleanStacks(),m&&delete this.allExtremes,dr(this,"afterSetScale")}setExtremes(h,f,m=!0,y,_){let b=this.chart;this.series.forEach(S=>{delete S.kdTree}),h=b.time.parse(h),f=b.time.parse(f),dr(this,"setExtremes",_=eh(_,{min:h,max:f}),S=>{this.userMin=S.min,this.userMax=S.max,this.eventArgs=S,m&&b.redraw(y)})}setAxisSize(){let h=this.chart,f=this.options,m=f.offsets||[0,0,0,0],y=this.horiz,_=this.width=Math.round(dt(Oe(f.width,h.plotWidth-m[3]+m[1]),h.plotWidth)),b=this.height=Math.round(dt(Oe(f.height,h.plotHeight-m[0]+m[2]),h.plotHeight)),S=this.top=Math.round(dt(Oe(f.top,h.plotTop+m[0]),h.plotHeight,h.plotTop)),D=this.left=Math.round(dt(Oe(f.left,h.plotLeft+m[3]),h.plotWidth,h.plotLeft));this.bottom=h.chartHeight-b-S,this.right=h.chartWidth-_-D,this.len=Math.max(y?_:b,0),this.pos=y?D:S}getExtremes(){let h=this.logarithmic;return{min:h?Cr(h.lin2log(this.min)):this.min,max:h?Cr(h.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(h){let f=this.logarithmic,m=f?f.lin2log(this.min):this.min,y=f?f.lin2log(this.max):this.max;return h===null||h===-1/0?h=m:h===1/0?h=y:m>h?h=m:y<h&&(h=y),this.translate(h,0,1,0,1)}autoLabelAlign(h){let f=(Oe(h,0)-90*this.side+720)%360,m={align:"center"};return dr(this,"autoLabelAlign",m,function(y){f>15&&f<165?y.align="right":f>195&&f<345&&(y.align="left")}),m.align}tickSize(h){let f=this.options,m=Oe(f[h==="tick"?"tickWidth":"minorTickWidth"],h==="tick"&&this.isXAxis&&!this.categories?1:0),y=f[h==="tick"?"tickLength":"minorTickLength"],_;m&&y&&(f[h+"Position"]==="inside"&&(y=-y),_=[y,m]);let b={tickSize:_};return dr(this,"afterTickSize",b),b.tickSize}labelMetrics(){let h=this.chart.renderer,f=this.ticks,m=f[Object.keys(f)[0]]||{};return this.chart.renderer.fontMetrics(m.label||m.movedLabel||h.box)}unsquish(){let h=this.options.labels,f=h.padding||0,m=this.horiz,y=this.tickInterval,_=this.len/((+!!this.categories+this.max-this.min)/y),b=h.rotation,S=Cr(.8*this.labelMetrics().h),D=Math.max(this.max-this.min,0),P=function(G){let X=(G+2*f)/(_||1);return(X=X>1?Math.ceil(X):1)*y>D&&G!==1/0&&_!==1/0&&D&&(X=Math.ceil(D/y)),Cr(X*y)},I=y,F,z=Number.MAX_VALUE,H;if(m){if(!h.staggerLines&&(R(b)?H=[b]:_<h.autoRotationLimit&&(H=h.autoRotation)),H){let G,X;for(let q of H)(q===b||q&&q>=-90&&q<=90)&&(X=(G=P(Math.abs(S/Math.sin(Rm*q))))+Math.abs(q/360))<z&&(z=X,F=q,I=G)}}else I=P(.75*S);return this.autoRotation=H,this.labelRotation=Oe(F,R(b)?b:0),h.step?y:I}getSlotWidth(h){let f=this.chart,m=this.horiz,y=this.options.labels,_=Math.max(this.tickPositions.length-!this.categories,1),b=f.margin[3];if(h&&R(h.slotWidth))return h.slotWidth;if(m&&y.step<2&&!this.isRadial)return y.rotation?0:(this.staggerLines||1)*this.len/_;if(!m){let S=y.style.width;if(S!==void 0)return parseInt(String(S),10);if(b)return b-f.spacing[3]}return .33*f.chartWidth}renderUnsquish(){let h=this.chart,f=h.renderer,m=this.tickPositions,y=this.ticks,_=this.options.labels,b=_.style,S=this.horiz,D=this.getSlotWidth(),P=Math.max(1,Math.round(D-(S?2*(_.padding||0):_.distance||0))),I={},F=this.labelMetrics(),z=b.lineClamp,H,G=z??(Math.floor(this.len/(m.length*F.h))||1),X=0;U(_.rotation)||(I.rotation=_.rotation||0),m.forEach(function(q){let ie=y[q];ie.movedLabel&&ie.replaceMovedLabel();let ae=ie.label?.textPxLength||0;ae>X&&(X=ae)}),this.maxLabelLength=X,this.autoRotation?X>P&&X>F.h?I.rotation=this.labelRotation:this.labelRotation=0:D&&(H=P),I.rotation&&(H=X>.5*h.chartHeight?.33*h.chartHeight:X,z||(G=1)),this.labelAlign=_.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(I.align=this.labelAlign),m.forEach(function(q){let ie=y[q],ae=ie?.label,pe=b.width,ke={};ae&&(ae.attr(I),ie.shortenLabel?ie.shortenLabel():H&&!pe&&b.whiteSpace!=="nowrap"&&(H<(ae.textPxLength||0)||ae.element.tagName==="SPAN")?ae.css(eh(ke,{width:`${H}px`,lineClamp:G})):!ae.styles.width||ke.width||pe||ae.css({width:"auto"}),ie.rotation=I.rotation)},this),this.tickRotCorr=f.rotCorr(F.b,this.labelRotation||0,this.side!==0)}hasData(){return this.series.some(function(h){return h.hasData()})||this.options.showEmpty&&tr(this.min)&&tr(this.max)}addTitle(h){let f,m=this.chart.renderer,y=this.horiz,_=this.opposite,b=this.options.title,S=this.chart.styledMode;this.axisTitle||((f=b.textAlign)||(f=(y?{low:"left",middle:"center",high:"right"}:{low:_?"right":"left",middle:"center",high:_?"left":"right"})[b.align]),this.axisTitle=m.text(b.text||"",0,0,b.useHTML).attr({zIndex:7,rotation:b.rotation||0,align:f}).addClass("highcharts-axis-title"),S||this.axisTitle.css(ee(b.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),S||b.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[h?"show":"hide"](h)}generateTick(h){let f=this.ticks;f[h]?f[h].addLabel():f[h]=new Ps(this,h)}createGroups(){let{axisParent:h,chart:f,coll:m,options:y}=this,_=f.renderer,b=(S,D,P)=>_.g(S).attr({zIndex:P}).addClass(`highcharts-${m.toLowerCase()}${D} `+(this.isRadial?`highcharts-radial-axis${D} `:"")+(y.className||"")).add(h);this.axisGroup||(this.gridGroup=b("grid","-grid",y.gridZIndex),this.axisGroup=b("axis","",y.zIndex),this.labelGroup=b("axis-labels","-labels",y.labels.zIndex))}getOffset(){let h=this,{chart:f,horiz:m,options:y,side:_,ticks:b,tickPositions:S,coll:D}=h,P=f.inverted&&!h.isZAxis?[1,0,3,2][_]:_,I=h.hasData(),F=y.title,z=y.labels,H=R(y.crossing),G=f.axisOffset,X=f.clipOffset,q=[-1,1,1,-1][_],ie,ae=0,pe,ke=0,Te=0,Ce,De;if(h.showAxis=ie=I||y.showEmpty,h.staggerLines=h.horiz&&z.staggerLines||void 0,h.createGroups(),I||h.isLinked?(S.forEach(function(Ye){h.generateTick(Ye)}),h.renderUnsquish(),h.reserveSpaceDefault=_===0||_===2||{1:"left",3:"right"}[_]===h.labelAlign,Oe(z.reserveSpace,!H&&null,h.labelAlign==="center"||null,h.reserveSpaceDefault)&&S.forEach(function(Ye){Te=Math.max(b[Ye].getLabelSize(),Te)}),h.staggerLines&&(Te*=h.staggerLines),h.labelOffset=Te*(h.opposite?-1:1)):Ve(b,function(Ye,Qe){Ye.destroy(),delete b[Qe]}),F?.text&&F.enabled!==!1&&(h.addTitle(ie),ie&&!H&&F.reserveSpace!==!1&&(h.titleOffset=ae=h.axisTitle.getBBox()[m?"height":"width"],ke=tr(pe=F.offset)?0:Oe(F.margin,m?5:10))),h.renderLine(),h.offset=q*Oe(y.offset,G[_]?G[_]+(y.margin||0):0),h.tickRotCorr=h.tickRotCorr||{x:0,y:0},De=_===0?-h.labelMetrics().h:_===2?h.tickRotCorr.y:0,Ce=Math.abs(Te)+ke,Te&&(Ce-=De,Ce+=q*(m?Oe(z.y,h.tickRotCorr.y+q*z.distance):Oe(z.x,q*z.distance))),h.axisTitleMargin=Oe(pe,Ce),h.getMaxLabelDimensions&&(h.maxLabelDimensions=h.getMaxLabelDimensions(b,S)),D!=="colorAxis"&&X){let Ye=this.tickSize("tick");G[_]=Math.max(G[_],(h.axisTitleMargin||0)+ae+q*h.offset,Ce,S?.length&&Ye?Ye[0]+q*h.offset:0);let Qe=!h.axisLine||y.offset?0:h.axisLine.strokeWidth()/2;X[P]=Math.max(X[P],Qe)}dr(this,"afterGetOffset")}getLinePath(h){let f=this.chart,m=this.opposite,y=this.offset,_=this.horiz,b=this.left+(m?this.width:0)+y,S=f.chartHeight-this.bottom-(m?this.height:0)+y;return m&&(h*=-1),f.renderer.crispLine([["M",_?this.left:b,_?S:this.top],["L",_?f.chartWidth-this.right:b,_?S:f.chartHeight-this.bottom]],h)}renderLine(){!this.axisLine&&(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(h){let f=this.horiz,m=this.left,y=this.top,_=this.len,b=this.options.title,S=f?m:y,D=this.opposite,P=this.offset,I=b.x,F=b.y,z=this.chart.renderer.fontMetrics(h),H=h?Math.max(h.getBBox(!1,0).height-z.h-1,0):0,G={low:S+(f?0:_),middle:S+_/2,high:S+(f?_:0)}[b.align],X=(f?y+this.height:m)+(f?1:-1)*(D?-1:1)*(this.axisTitleMargin||0)+[-H,H,z.f,-H][this.side],q={x:f?G+I:X+(D?this.width:0)+P+I,y:f?X+F-(D?this.height:0)+P:G+F};return dr(this,"afterGetTitlePosition",{titlePosition:q}),q}renderMinorTick(h,f){let m=this.minorTicks;m[h]||(m[h]=new Ps(this,h,"minor")),f&&m[h].isNew&&m[h].render(null,!0),m[h].render(null,!1,1)}renderTick(h,f,m){let y=this.isLinked,_=this.ticks;(!y||h>=this.min&&h<=this.max||this.grid?.isColumn)&&(_[h]||(_[h]=new Ps(this,h)),m&&_[h].isNew&&_[h].render(f,!0,-1),_[h].render(f))}render(){let h,f,m=this,y=m.chart,_=m.logarithmic,b=y.renderer,S=m.options,D=m.isLinked,P=m.tickPositions,I=m.axisTitle,F=m.ticks,z=m.minorTicks,H=m.alternateBands,G=S.stackLabels,X=S.alternateGridColor,q=S.crossing,ie=m.tickmarkOffset,ae=m.axisLine,pe=m.showAxis,ke=ja(b.globalAnimation);if(m.labelEdge.length=0,m.overlap=!1,[F,z,H].forEach(function(Te){Ve(Te,function(Ce){Ce.isActive=!1})}),R(q)){let Te=this.isXAxis?y.yAxis[0]:y.xAxis[0],Ce=[1,-1,-1,1][this.side];if(Te){let De=Te.toPixels(q,!0);m.horiz&&(De=Te.len-De),m.offset=Ce*De}}if(m.hasData()||D){let Te=m.chart.hasRendered&&m.old&&R(m.old.min);m.minorTickInterval&&!m.categories&&m.getMinorTickPositions().forEach(function(Ce){m.renderMinorTick(Ce,Te)}),P.length&&(P.forEach(function(Ce,De){m.renderTick(Ce,De,Te)}),ie&&(m.min===0||m.single)&&(F[-1]||(F[-1]=new Ps(m,-1,null,!0)),F[-1].render(-1))),X&&P.forEach(function(Ce,De){f=P[De+1]!==void 0?P[De+1]+ie:m.max-ie,De%2==0&&Ce<m.max&&f<=m.max+(y.polar?-ie:ie)&&(H[Ce]||(H[Ce]=new K.PlotLineOrBand(m,{})),h=Ce+ie,H[Ce].options={from:_?_.lin2log(h):h,to:_?_.lin2log(f):f,color:X,className:"highcharts-alternate-grid"},H[Ce].render(),H[Ce].isActive=!0)}),m._addedPlotLB||(m._addedPlotLB=!0,(S.plotLines||[]).concat(S.plotBands||[]).forEach(function(Ce){m.addPlotBandOrLine(Ce)}))}[F,z,H].forEach(function(Te){let Ce=[],De=ke.duration;Ve(Te,function(Ye,Qe){Ye.isActive||(Ye.render(Qe,!1,0),Ye.isActive=!1,Ce.push(Qe))}),li(function(){let Ye=Ce.length;for(;Ye--;)Te[Ce[Ye]]&&!Te[Ce[Ye]].isActive&&(Te[Ce[Ye]].destroy(),delete Te[Ce[Ye]])},Te!==H&&y.hasRendered&&De?De:0)}),ae&&(ae[ae.isPlaced?"animate":"attr"]({d:this.getLinePath(ae.strokeWidth())}),ae.isPlaced=!0,ae[pe?"show":"hide"](pe)),I&&pe&&(I[I.isNew?"attr":"animate"](m.getTitlePosition(I)),I.isNew=!1),G?.enabled&&m.stacking&&m.stacking.renderStackTotals(),m.old={len:m.len,max:m.max,min:m.min,transA:m.transA,userMax:m.userMax,userMin:m.userMin},m.isDirty=!1,dr(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(h){h.render()})),this.series.forEach(function(h){h.isDirty=!0})}getKeepProps(){return this.keepProps||M.keepProps}destroy(h){let f=this,m=f.plotLinesAndBands,y=this.eventOptions;if(dr(this,"destroy",{keepEvents:h}),h||Zt(f),[f.ticks,f.minorTicks,f.alternateBands].forEach(function(_){km(_)}),m){let _=m.length;for(;_--;)m[_].destroy()}for(let _ in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach(function(b){f[b]&&(f[b]=f[b].destroy())}),f.plotLinesAndBandsGroups)f.plotLinesAndBandsGroups[_]=f.plotLinesAndBandsGroups[_].destroy();Ve(f,function(_,b){f.getKeepProps().indexOf(b)===-1&&delete f[b]}),this.eventOptions=y}drawCrosshair(h,f){let m=this.crosshair,y=m?.snap??!0,_=this.chart,b,S,D,P=this.cross,I;if(dr(this,"drawCrosshair",{e:h,point:f}),h||(h=this.cross?.e),m&&(tr(f)||!y)!==!1){if(y?tr(f)&&(S=Oe(this.coll!=="colorAxis"?f.crosshairPos:null,this.isXAxis?f.plotX:this.len-f.plotY)):S=h&&(this.horiz?h.chartX-this.pos:this.len-h.chartY+this.pos),tr(S)&&(I={value:f&&(this.isXAxis?f.x:Oe(f.stackY,f.y)),translatedValue:S},_.polar&&eh(I,{isCrosshair:!0,chartX:h?.chartX,chartY:h?.chartY,point:f}),b=this.getPlotLinePath(I)||null),!tr(b))return void this.hideCrosshair();D=this.categories&&!this.isRadial,P||(this.cross=P=_.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(D?"category ":"thin ")+(m.className||"")).attr({zIndex:Oe(m.zIndex,2)}).add(),!_.styledMode&&(P.attr({stroke:m.color||(D?An.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":Oe(m.width,1)}).css({"pointer-events":"none"}),m.dashStyle&&P.attr({dashstyle:m.dashStyle}))),P.show().attr({d:b}),D&&!m.width&&P.attr({"stroke-width":this.transA}),this.cross.e=h}else this.hideCrosshair();dr(this,"afterDrawCrosshair",{e:h,point:f})}hideCrosshair(){this.cross&&this.cross.hide(),dr(this,"afterHideCrosshair")}update(h,f){let m=this.chart;h=ee(this.userOptions,h),this.destroy(!0),this.init(m,h),m.isDirtyBox=!0,Oe(f,!0)&&m.redraw()}remove(h){let f=this.chart,m=this.coll,y=this.series,_=y.length;for(;_--;)y[_]&&y[_].remove(!1);Lm(f.axes,this),Lm(f[m]||[],this),f.orderItems(m),this.destroy(),f.isDirtyBox=!0,Oe(h,!0)&&f.redraw()}setTitle(h,f){this.update({title:h},f)}setCategories(h,f){this.update({categories:h},f)}}return M.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"],M})(),{addEvent:yo,getMagnitude:ss,normalizeTickInterval:hc,timeUnits:hd}=Mt;(function(M){function l(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function h(){if(this.type!=="datetime"){this.dateTime=void 0;return}this.dateTime||(this.dateTime=new f(this))}M.compose=function(m){return m.keepProps.includes("dateTime")||(m.keepProps.push("dateTime"),m.prototype.getTimeTicks=l,yo(m,"afterSetType",h)),m};class f{constructor(y){this.axis=y}normalizeTimeTickInterval(y,_){let b=_||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],S=b[b.length-1],D=hd[S[0]],P=S[1],I;for(I=0;I<b.length&&(D=hd[(S=b[I])[0]],P=S[1],!b[I+1]||!(y<=(D*P[P.length-1]+hd[b[I+1][0]])/2));I++);D===hd.year&&y<5*D&&(P=[1,2,5]);let F=hc(y/D,P,S[0]==="year"?Math.max(ss(y/D),1):1);return{unitRange:D,count:F,unitName:S[0]}}getXDateFormat(y,_){let{axis:b}=this,S=b.chart.time;return b.closestPointRange?S.getDateFormat(b.closestPointRange,y,b.options.startOfWeek,_)||S.resolveDTLFormat(_.year).main:S.resolveDTLFormat(_.day).main}}M.Additions=f})(a||(a={}));let O0=a,{addEvent:Nm,normalizeTickInterval:Om,pick:dd}=Mt;(function(M){function l(){this.type!=="logarithmic"?this.logarithmic=void 0:this.logarithmic??(this.logarithmic=new f(this))}function h(){let m=this.logarithmic;m&&(this.lin2val=function(y){return m.lin2log(y)},this.val2lin=function(y){return m.log2lin(y)})}M.compose=function(m){return m.keepProps.includes("logarithmic")||(m.keepProps.push("logarithmic"),Nm(m,"afterSetType",l),Nm(m,"afterInit",h)),m};class f{constructor(y){this.axis=y}getLogTickPositions(y,_,b,S){let D=this.axis,P=D.len,I=D.options,F=[];if(S||(this.minorAutoInterval=void 0),y>=.5)y=Math.round(y),F=D.getLinearTickPositions(y,_,b);else if(y>=.08){let z,H,G,X,q,ie,ae,pe=Math.floor(_);for(z=y>.3?[1,2,4]:y>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],H=pe;H<b+1&&!ae;H++)for(G=0,X=z.length;G<X&&!ae;G++)(q=this.log2lin(this.lin2log(H)*z[G]))>_&&(!S||ie<=b)&&ie!==void 0&&F.push(ie),ie>b&&(ae=!0),ie=q}else{let z=this.lin2log(_),H=this.lin2log(b),G=S?D.getMinorTickInterval():I.tickInterval,X=I.tickPixelInterval/(S?5:1),q=S?P/D.tickPositions.length:P;y=Om(y=dd(G==="auto"?null:G,this.minorAutoInterval,(H-z)*X/(q||1))),F=D.getLinearTickPositions(y,z,H).map(this.log2lin),S||(this.minorAutoInterval=y/5)}return S||(D.tickInterval=y),F}lin2log(y){return Math.pow(10,y)}log2lin(y){return Math.log(y)/Math.LN10}}M.Additions=f})(u||(u={}));let Fm=u,{erase:Lr,extend:th,isNumber:Rf}=Mt;(function(M){let l;function h(D){return this.addPlotBandOrLine(D,"plotBands")}function f(D,P){let I=this.userOptions,F=new l(this,D);if(this.visible&&(F=F.render()),F){if(this._addedPlotLB||(this._addedPlotLB=!0,(I.plotLines||[]).concat(I.plotBands||[]).forEach(z=>{this.addPlotBandOrLine(z)})),P){let z=I[P]||[];z.push(D),I[P]=z}this.plotLinesAndBands.push(F)}return F}function m(D){return this.addPlotBandOrLine(D,"plotLines")}function y(D,P,I){I=I||this.options;let F=this.getPlotLinePath({value:P,force:!0,acrossPanes:I.acrossPanes}),z=[],H=this.horiz,G=!Rf(this.min)||!Rf(this.max)||D<this.min&&P<this.min||D>this.max&&P>this.max,X=this.getPlotLinePath({value:D,force:!0,acrossPanes:I.acrossPanes}),q,ie=1,ae;if(X&&F)for(G&&(ae=X.toString()===F.toString(),ie=0),q=0;q<X.length;q+=2){let pe=X[q],ke=X[q+1],Te=F[q],Ce=F[q+1];(pe[0]==="M"||pe[0]==="L")&&(ke[0]==="M"||ke[0]==="L")&&(Te[0]==="M"||Te[0]==="L")&&(Ce[0]==="M"||Ce[0]==="L")&&(H&&Te[1]===pe[1]?(Te[1]+=ie,Ce[1]+=ie):H||Te[2]!==pe[2]||(Te[2]+=ie,Ce[2]+=ie),z.push(["M",pe[1],pe[2]],["L",ke[1],ke[2]],["L",Ce[1],Ce[2]],["L",Te[1],Te[2]],["Z"])),z.isFlat=ae}return z}function _(D){this.removePlotBandOrLine(D)}function b(D){let P=this.plotLinesAndBands,I=this.options,F=this.userOptions;if(P){let z=P.length;for(;z--;)P[z].id===D&&P[z].destroy();[I.plotLines||[],F.plotLines||[],I.plotBands||[],F.plotBands||[]].forEach(function(H){for(z=H.length;z--;)H[z]?.id===D&&Lr(H,H[z])})}}function S(D){this.removePlotBandOrLine(D)}M.compose=function(D,P){let I=P.prototype;return I.addPlotBand||(l=D,th(I,{addPlotBand:h,addPlotLine:m,addPlotBandOrLine:f,getPlotBandPath:y,removePlotBand:_,removePlotLine:S,removePlotBandOrLine:b})),P}})(d||(d={}));let Pf=d,{addEvent:fd,arrayMax:nh,arrayMin:wl,defined:Fo,destroyObjectProperties:Gb,erase:jE,fireEvent:Bm,merge:ih,objectEach:ms,pick:WE}=Mt;class W{static compose(l,h){return fd(l,"afterInit",function(){this.labelCollectors.push(()=>{let f=[];for(let m of this.axes)for(let{label:y,options:_}of m.plotLinesAndBands)y&&!_?.label?.allowOverlap&&f.push(y);return f})}),Pf.compose(W,h)}constructor(l,h){this.axis=l,this.options=h,this.id=h.id}render(){Bm(this,"render");let{axis:l,options:h}=this,{horiz:f,logarithmic:m}=l,{color:y,events:_,zIndex:b=0}=h,{renderer:S,time:D}=l.chart,P={},I=D.parse(h.to),F=D.parse(h.from),z=D.parse(h.value),H=h.borderWidth,G=h.label,{label:X,svgElem:q}=this,ie=[],ae,pe=Fo(F)&&Fo(I),ke=Fo(z),Te=!q,Ce={class:"highcharts-plot-"+(pe?"band ":"line ")+(h.className||"")},De=pe?"bands":"lines";if(!l.chart.styledMode&&(ke?(Ce.stroke=y||"#999999",Ce["stroke-width"]=WE(h.width,1),h.dashStyle&&(Ce.dashstyle=h.dashStyle)):pe&&(Ce.fill=y||"#e6e9ff",H&&(Ce.stroke=h.borderColor,Ce["stroke-width"]=H))),P.zIndex=b,De+="-"+b,(ae=l.plotLinesAndBandsGroups[De])||(l.plotLinesAndBandsGroups[De]=ae=S.g("plot-"+De).attr(P).add()),q||(this.svgElem=q=S.path().attr(Ce).add(ae)),Fo(z))ie=l.getPlotLinePath({value:m?.log2lin(z)??z,lineWidth:q.strokeWidth(),acrossPanes:h.acrossPanes});else{if(!(Fo(F)&&Fo(I)))return;ie=l.getPlotBandPath(m?.log2lin(F)??F,m?.log2lin(I)??I,h)}return!this.eventsAdded&&_&&(ms(_,(Ye,Qe)=>{q?.on(Qe,st=>{_[Qe].apply(this,[st])})}),this.eventsAdded=!0),(Te||!q.d)&&ie?.length?q.attr({d:ie}):q&&(ie?(q.show(),q.animate({d:ie})):q.d&&(q.hide(),X&&(this.label=X=X.destroy()))),G&&(Fo(G.text)||Fo(G.formatter))&&ie?.length&&l.width>0&&l.height>0&&!ie.isFlat?(G=ih(Je({align:f&&pe?"center":void 0,x:f?!pe&&4:10,verticalAlign:!f&&pe?"middle":void 0,y:f?pe?16:10:pe?6:-4,rotation:f&&!pe?90:0},pe?{inside:!0}:{}),G),this.renderLabel(G,ie,pe,b)):X&&X.hide(),this}renderLabel(l,h,f,m){let y=this.axis,_=y.chart.renderer,b=l.inside,S=this.label;S||(this.label=S=_.text(this.getLabelText(l),0,0,l.useHTML).attr({align:l.textAlign||l.align,rotation:l.rotation,class:"highcharts-plot-"+(f?"band":"line")+"-label "+(l.className||""),zIndex:m}),y.chart.styledMode||S.css(ih({color:y.chart.options.title?.style.color,fontSize:"0.8em",textOverflow:f&&!b?"":"ellipsis"},l.style)),S.add());let D=h.xBounds||[h[0][1],h[1][1],f?h[2][1]:h[0][1]],P=h.yBounds||[h[0][2],h[1][2],f?h[2][2]:h[0][2]],I=wl(D),F=wl(P),z=nh(D)-I;S.align(l,!1,{x:I,y:F,width:z,height:nh(P)-F}),S.alignAttr.y-=_.fontMetrics(S).b,(!S.alignValue||S.alignValue==="left"||Fo(b))&&S.css({width:(l.style?.width||(f&&b?z:S.rotation===90?y.height-(S.alignAttr.y-y.top):(l.clip?y.width:y.chart.chartWidth)-(S.alignAttr.x-y.left)))+"px"}),S.show(!0)}getLabelText(l){return Fo(l.formatter)?l.formatter.call(this):l.text}destroy(){jE(this.axis.plotLinesAndBands,this),delete this.axis,Gb(this)}}let{animObject:E}=Wr,{format:k}=Ni,{composed:B,dateFormats:Y,doc:ne,isSafari:Q}=K,{distribute:ce}=Ql,{addEvent:ve,clamp:Se,css:Ee,discardElement:be,extend:We,fireEvent:He,getAlignFactor:lt,isArray:Ct,isNumber:et,isObject:Et,isString:Ze,merge:Wn,pick:tn,pushUnique:vi,splat:ti,syncTimeout:bn}=Mt;class _i{constructor(l,h,f){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=l,this.init(l,h),this.pointer=f}bodyFormatter(l){return l.map(h=>{let f=h.series.tooltipOptions,m=h.formatPrefix||"point";return(f[m+"Formatter"]||h.tooltipFormatter).call(h,f[m+"Format"]||"")})}cleanSplit(l){this.chart.series.forEach(function(h){let f=h?.tt;f&&(!f.isActive||l?h.tt=f.destroy():f.isActive=!1)})}defaultFormatter(l){let h,f=this.points||ti(this);return(h=(h=[l.headerFooterFormatter(f[0])]).concat(l.bodyFormatter(f))).push(l.headerFooterFormatter(f[0],!0)),h}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),be(this.container)),Mt.clearTimeout(this.hideTimer)}getAnchor(l,h){let f,{chart:m,pointer:y}=this,_=m.inverted,b=m.plotTop,S=m.plotLeft;if(l=ti(l),l[0].series?.yAxis&&!l[0].series.yAxis.options.reversedStacks&&(l=l.slice().reverse()),this.followPointer&&h)h.chartX===void 0&&(h=y.normalize(h)),f=[h.chartX-S,h.chartY-b];else if(l[0].tooltipPos)f=l[0].tooltipPos;else{let P=0,I=0;l.forEach(function(F){let z=F.pos(!0);z&&(P+=z[0],I+=z[1])}),P/=l.length,I/=l.length,this.shared&&l.length>1&&h&&(_?P=h.chartX:I=h.chartY),f=[P-S,I-b]}let D={point:l[0],ret:f};return He(this,"getAnchor",D),D.ret.map(Math.round)}getClassName(l,h,f){let m=this.options,y=l.series,_=y.options;return[m.className,"highcharts-label",f&&"highcharts-tooltip-header",h?"highcharts-tooltip-box":"highcharts-tooltip",!f&&"highcharts-color-"+tn(l.colorIndex,y.colorIndex),_?.className].filter(Ze).join(" ")}getLabel({anchorX:l,anchorY:h}={anchorX:0,anchorY:0}){let f=this,m=this.chart.styledMode,y=this.options,_=this.split&&this.allowShared,b=this.container,S=this.chart.renderer;if(this.label){let D=!this.label.hasClass("highcharts-label");(!_&&D||_&&!D)&&this.destroy()}if(!this.label){if(this.outside){let D=this.chart,P=D.options.chart.style,I=lr.getRendererType();this.container=b=K.doc.createElement("div"),b.className="highcharts-tooltip-container "+(D.renderTo.className.match(/(highcharts[a-zA-Z0-9-]+)\s?/gm)||""),Ee(b,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(P?.zIndex||0)+3)}),this.renderer=S=new I(b,0,0,P,void 0,void 0,S.styledMode)}if(_?this.label=S.g("tooltip"):(this.label=S.label("",l,h,y.shape||"callout",void 0,void 0,y.useHTML,void 0,"tooltip").attr({padding:y.padding,r:y.borderRadius}),m||this.label.attr({fill:y.backgroundColor,"stroke-width":y.borderWidth||0}).css(y.style).css({pointerEvents:y.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),f.outside){let D=this.label;[D.xSetter,D.ySetter].forEach((P,I)=>{D[I?"ySetter":"xSetter"]=F=>{P.call(D,f.distance),D[I?"y":"x"]=F,b&&(b.style[I?"top":"left"]=`${F}px`)}})}this.label.attr({zIndex:8}).shadow(y.shadow??!y.fixed).add()}return b&&!b.parentElement&&K.doc.body.appendChild(b),this.label}getPlayingField(){let{body:l,documentElement:h}=ne,{chart:f,distance:m,outside:y}=this;return{width:y?Math.max(l.scrollWidth,h.scrollWidth,l.offsetWidth,h.offsetWidth,h.clientWidth)-2*m-2:f.chartWidth,height:y?Math.max(l.scrollHeight,h.scrollHeight,l.offsetHeight,h.offsetHeight,h.clientHeight):f.chartHeight}}getPosition(l,h,f){let{distance:m,chart:y,outside:_,pointer:b}=this,{inverted:S,plotLeft:D,plotTop:P,polar:I}=y,{plotX:F=0,plotY:z=0}=f,H={},G=S&&f.h||0,{height:X,width:q}=this.getPlayingField(),ie=b.getChartPosition(),ae=Xt=>Xt*ie.scaleX,pe=Xt=>Xt*ie.scaleY,ke=Xt=>{let Bt=Xt==="x";return[Xt,Bt?q:X,Bt?l:h].concat(_?[Bt?ae(l):pe(h),Bt?ie.left-m+ae(F+D):ie.top-m+pe(z+P),0,Bt?q:X]:[Bt?l:h,Bt?F+D:z+P,Bt?D:P,Bt?D+y.plotWidth:P+y.plotHeight])},Te=ke("y"),Ce=ke("x"),De,Ye=!!f.negative;!I&&y.hoverSeries?.yAxis?.reversed&&(Ye=!Ye);let Qe=!this.followPointer&&tn(f.ttBelow,!I&&!S===Ye),st=function(Xt,Bt,ln,Er,Ki,Uo,Gn){let Vn=_?Xt==="y"?pe(m):ae(m):m,qi=(ln-Er)/2,bi=Er<Ki-m,pr=Ki+m+Er<Bt,mr=Ki-Vn-ln+qi,Qi=Ki+Vn-qi;if(Qe&&pr)H[Xt]=Qi;else if(!Qe&&bi)H[Xt]=mr;else if(bi)H[Xt]=Math.min(Gn-Er,mr-G<0?mr:mr-G);else{if(!pr)return H[Xt]=0,!1;H[Xt]=Math.max(Uo,Qi+G+ln>Bt?Qi:Qi+G)}},Gt=function(Xt,Bt,ln,Er,Ki){if(Ki<m||Ki>Bt-m)return!1;Ki<ln/2?H[Xt]=1:Ki>Bt-Er/2?H[Xt]=Bt-Er-2:H[Xt]=Ki-ln/2},xn=function(Xt){[Te,Ce]=[Ce,Te],De=Xt},Sn=()=>{st.apply(0,Te)!==!1?Gt.apply(0,Ce)!==!1||De||(xn(!0),Sn()):De?H.x=H.y=0:(xn(!0),Sn())};return(S&&!I||this.len>1)&&xn(),Sn(),H}getFixedPosition(l,h,f){let m=f.series,{chart:y,options:_,split:b}=this,S=_.position,D=S.relativeTo,P=_.shared||m?.yAxis?.isRadial&&(D==="pane"||!D)?"plotBox":D,I=P==="chart"?y.renderer:y[P]||y.getClipBox(m,!0);return{x:I.x+(I.width-l)*lt(S.align)+S.x,y:I.y+(I.height-h)*lt(S.verticalAlign)+(!b&&S.y||0)}}hide(l){let h=this;Mt.clearTimeout(this.hideTimer),l=tn(l,this.options.hideDelay),this.isHidden||(this.hideTimer=bn(function(){let f=h.getLabel();h.getLabel().animate({opacity:0},{duration:l&&150,complete:()=>{f.hide(),h.container&&h.container.remove()}}),h.isHidden=!0},l))}init(l,h){this.chart=l,this.options=h,this.crosshairs=[],this.isHidden=!0,this.split=h.split&&!l.inverted&&!l.polar,this.shared=h.shared||this.split,this.outside=tn(h.outside,!!(l.scrollablePixelsX||l.scrollablePixelsY))}shouldStickOnContact(l){return!!(!this.followPointer&&this.options.stickOnContact&&(!l||this.pointer.inClass(l.target,"highcharts-tooltip")))}move(l,h,f,m){let{followPointer:y,options:_}=this,b=E(!y&&!this.isHidden&&!_.fixed&&_.animation),S=y||(this.len||0)>1,D={x:l,y:h};S?D.anchorX=D.anchorY=NaN:(D.anchorX=f,D.anchorY=m),b.step=()=>this.drawTracker(),this.getLabel().animate(D,b)}refresh(l,h){let{chart:f,options:m,pointer:y,shared:_}=this,b=ti(l),S=b[0],D=m.format,P=m.formatter||this.defaultFormatter,I=f.styledMode,F=this.allowShared;if(!m.enabled||!S.series)return;Mt.clearTimeout(this.hideTimer),this.allowShared=!(!Ct(l)&&l.series&&l.series.noSharedTooltip),F=F&&!this.allowShared,this.followPointer=!this.split&&S.series.tooltipOptions.followPointer;let z=this.getAnchor(l,h),H=z[0],G=z[1];_&&this.allowShared&&(y.applyInactiveState(b),b.forEach(ie=>ie.setState("hover")),S.points=b),this.len=b.length;let X=Ze(D)?k(D,S,f):P.call(S,this);S.points=void 0;let q=S.series;if(this.distance=tn(q.tooltipOptions.distance,16),X===!1)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(X,b);else{let ie=H,ae=G;if(h&&y.isDirectTouch&&(ie=h.chartX-f.plotLeft,ae=h.chartY-f.plotTop),!(f.polar||q.options.clip===!1||b.some(pe=>y.isDirectTouch||pe.series.shouldShowTooltip(ie,ae))))return void this.hide();{let pe=this.getLabel(F&&this.tt||{});(!m.style.width||I)&&pe.css({width:(this.outside?this.getPlayingField():f.spacingBox).width+"px"}),pe.attr({class:this.getClassName(S),text:X&&X.join?X.join(""):X}),this.outside&&pe.attr({x:Se(pe.x||0,0,this.getPlayingField().width-(pe.width||0)-1)}),I||pe.attr({stroke:m.borderColor||S.color||q.color||"#666666"}),this.updatePosition({plotX:H,plotY:G,negative:S.negative,ttBelow:S.ttBelow,series:q,h:z[2]||0})}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}He(this,"refresh")}renderSplit(l,h){let f=this,{chart:m,chart:{chartWidth:y,chartHeight:_,plotHeight:b,plotLeft:S,plotTop:D,scrollablePixelsY:P=0,scrollablePixelsX:I,styledMode:F},distance:z,options:H,options:{fixed:G,position:X,positioner:q},pointer:ie}=f,{scrollLeft:ae=0,scrollTop:pe=0}=m.scrollablePlotArea?.scrollingContainer||{},ke=f.outside&&typeof I!="number"?ne.documentElement.getBoundingClientRect():{left:ae,right:ae+y,top:pe,bottom:pe+_},Te=f.getLabel(),Ce=this.renderer||m.renderer,De=!!m.xAxis[0]?.opposite,{left:Ye,top:Qe}=ie.getChartPosition(),st=q||G,Gt=D+pe,xn=0,Sn=b-P,Xt=function(Gn,Vn,qi,bi=[0,0],pr=!0){let mr,Qi;if(qi.isHeader)Qi=De?0:Sn,mr=Se(bi[0]-Gn/2,ke.left,ke.right-Gn-(f.outside?Ye:0));else if(G&&qi){let Fr=f.getFixedPosition(Gn,Vn,qi);mr=Fr.x,Qi=Fr.y-Gt}else Qi=bi[1]-Gt,mr=Se(mr=pr?bi[0]-Gn-z:bi[0]+z,pr?mr:ke.left,ke.right);return{x:mr,y:Qi}};Ze(l)&&(l=[!1,l]);let Bt=l.slice(0,h.length+1).reduce(function(Gn,Vn,qi){if(Vn!==!1&&Vn!==""){let bi=h[qi-1]||{isHeader:!0,plotX:h[0].plotX,plotY:b,series:{}},pr=bi.isHeader,mr=pr?f:bi.series,Qi=mr.tt=function(mc,jo,ou){let xd=mc,{isHeader:Bf,series:q0}=jo,gc=q0.tooltipOptions||H;if(!xd){let Hm={padding:gc.padding,r:gc.borderRadius};F||(Hm.fill=gc.backgroundColor,Hm["stroke-width"]=gc.borderWidth??(G&&!Bf?0:1)),xd=Ce.label("",0,0,gc[Bf?"headerShape":"shape"]||(G&&!Bf?"rect":"callout"),void 0,void 0,gc.useHTML).addClass(f.getClassName(jo,!0,Bf)).attr(Hm).add(Te)}return xd.isActive=!0,xd.attr({text:ou}),F||xd.css(gc.style).attr({stroke:gc.borderColor||jo.color||q0.color||"#333333"}),xd}(mr.tt,bi,Vn.toString()),Fr=Qi.getBBox(),Ho=Fr.width+Qi.strokeWidth();pr&&(xn=Fr.height,Sn+=xn,De&&(Gt-=xn));let{anchorX:fa,anchorY:bd}=function(mc){let jo,ou,{isHeader:xd,plotX:Bf=0,plotY:q0=0,series:gc}=mc;if(xd)jo=Math.max(S+Bf,S),ou=D+b/2;else{let{xAxis:Hm,yAxis:JN}=gc;jo=Hm.pos+Se(Bf,-z,Hm.len+z),gc.shouldShowTooltip(0,JN.pos-D+q0,{ignoreX:!0})&&(ou=JN.pos+q0)}return{anchorX:jo=Se(jo,ke.left-z,ke.right+z),anchorY:ou}}(bi);if(typeof bd=="number"){let mc=Fr.height+1,jo=(q||Xt).call(f,Ho,mc,bi,[fa,bd]);Gn.push({align:st?0:void 0,anchorX:fa,anchorY:bd,boxWidth:Ho,point:bi,rank:tn(jo.rank,+!!pr),size:mc,target:jo.y,tt:Qi,x:jo.x})}else Qi.isActive=!1}return Gn},[]);!st&&Bt.some(Gn=>{let{outside:Vn}=f,qi=(Vn?Ye:0)+Gn.anchorX;return qi<ke.left&&qi+Gn.boxWidth<ke.right||qi<Ye-ke.left+Gn.boxWidth&&ke.right-qi>qi})&&(Bt=Bt.map(Gn=>{let{x:Vn,y:qi}=Xt.call(this,Gn.boxWidth,Gn.size,Gn.point,[Gn.anchorX,Gn.anchorY],!1);return We(Gn,{target:qi,x:Vn})})),f.cleanSplit(),ce(Bt,Sn);let ln={left:Ye,right:Ye};Bt.forEach(function(Gn){let{x:Vn,boxWidth:qi,isHeader:bi}=Gn;!bi&&(f.outside&&Ye+Vn<ln.left&&(ln.left=Ye+Vn),!bi&&f.outside&&ln.left+qi>ln.right&&(ln.right=Ye+Vn))}),Bt.forEach(function(Gn){let{x:Vn,anchorX:qi,anchorY:bi,pos:pr,point:{isHeader:mr}}=Gn,Qi={visibility:pr===void 0?"hidden":"inherit",x:Vn,y:(pr||0)+Gt+(G&&X.y||0),anchorX:qi,anchorY:bi};if(f.outside&&Vn<qi){let Fr=Ye-ln.left;Fr>0&&(mr||(Qi.x=Vn+Fr,Qi.anchorX=qi+Fr),mr&&(Qi.x=(ln.right-ln.left)/2,Qi.anchorX=qi+Fr))}Gn.tt.attr(Qi)});let{container:Er,outside:Ki,renderer:Uo}=f;if(Ki&&Er&&Uo){let{width:Gn,height:Vn,x:qi,y:bi}=Te.getBBox();Uo.setSize(Gn+qi,Vn+bi,!1),Er.style.left=ln.left+"px",Er.style.top=Qe+"px"}Q&&Te.attr({opacity:Te.opacity===1?.999:1})}drawTracker(){if(!this.shouldStickOnContact()){this.tracker&&(this.tracker=this.tracker.destroy());return}let l=this.chart,h=this.label,f=this.shared?l.hoverPoints:l.hoverPoint;if(!h||!f)return;let m={x:0,y:0,width:0,height:0},y=this.getAnchor(f),_=h.getBBox();y[0]+=l.plotLeft-(h.translateX||0),y[1]+=l.plotTop-(h.translateY||0),m.x=Math.min(0,y[0]),m.y=Math.min(0,y[1]),m.width=y[0]<0?Math.max(Math.abs(y[0]),_.width-y[0]):Math.max(Math.abs(y[0]),_.width),m.height=y[1]<0?Math.max(Math.abs(y[1]),_.height-Math.abs(y[1])):Math.max(Math.abs(y[1]),_.height),this.tracker?this.tracker.attr(m):(this.tracker=h.renderer.rect(m).addClass("highcharts-tracker").add(h),l.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat(l){return l.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}headerFooterFormatter(l,h){let f=l.series,m=f.tooltipOptions,y=f.xAxis,_=y?.dateTime,b={isFooter:h,point:l},S=m.xDateFormat||"",D=m[h?"footerFormat":"headerFormat"];return He(this,"headerFormatter",b,function(P){if(_&&!S&&et(l.key)&&(S=_.getXDateFormat(l.key,m.dateTimeLabelFormats)),_&&S){if(Et(S)){let I=S;Y[0]=F=>f.chart.time.dateFormat(I,F),S="%0"}(l.tooltipDateKeys||["key"]).forEach(I=>{D=D.replace(RegExp("point\\."+I+"([ \\)}])"),`(point.${I}:${S})$1`)})}f.chart.styledMode&&(D=this.styledModeFormat(D)),P.text=k(D,l,this.chart)}),b.text||""}update(l){this.destroy(),this.init(this.chart,Wn(!0,this.options,l))}updatePosition(l){let{chart:h,container:f,distance:m,options:y,pointer:_,renderer:b}=this,{height:S=0,width:D=0}=this.getLabel(),{fixed:P,positioner:I}=y,{left:F,top:z,scaleX:H,scaleY:G}=_.getChartPosition(),X=(I||P&&this.getFixedPosition||this.getPosition).call(this,D,S,l),q=K.doc,ie=(l.plotX||0)+h.plotLeft,ae=(l.plotY||0)+h.plotTop,pe;if(b&&f){if(I||P){let{scrollLeft:ke=0,scrollTop:Te=0}=h.scrollablePlotArea?.scrollingContainer||{};X.x+=ke+F-m,X.y+=Te+z-m}pe=(y.borderWidth||0)+2*m+2,b.setSize(Se(D+pe,0,q.documentElement.clientWidth)-1,S+pe,!1),(H!==1||G!==1)&&(Ee(f,{transform:`scale(${H}, ${G})`}),ie*=H,ae*=G),ie+=F-X.x,ae+=z-X.y}this.move(Math.round(X.x),Math.round(X.y||0),ie,ae)}}(function(M){M.compose=function(l){vi(B,"Core.Tooltip")&&ve(l,"afterInit",function(){let h=this.chart;h.options.tooltip&&(h.tooltip=new M(h,h.options.tooltip,this))})}})(_i||(_i={}));let fr=_i,{animObject:ft}=Wr,{defaultOptions:Qt}=_n,{format:Ot}=Ni,{addEvent:an,crisp:Qn,erase:Rn,extend:Pn,fireEvent:$i,getNestedProperty:Mr,isArray:_r,isFunction:vo,isNumber:os,isObject:gs,merge:Zi,pick:Vi,syncTimeout:Kr,removeEvent:Bo,uniqueKey:nu}=Mt;class Zs{animateBeforeDestroy(){let l=this,h={x:l.startXPos,opacity:0},f=l.getGraphicalProps();f.singular.forEach(function(m){l[m]=l[m].animate(m==="dataLabel"?{x:l[m].startXPos,y:l[m].startYPos,opacity:0}:h)}),f.plural.forEach(function(m){l[m].forEach(function(y){y.element&&y.animate(Pn({x:l.startXPos},y.startYPos?{x:y.startXPos,y:y.startYPos}:{}))})})}applyOptions(l,h){let f=this.series,m=f.options.pointValKey||f.pointValKey;return Pn(this,l=Zs.prototype.optionsToObject.call(this,l)),this.options=this.options?Pn(this.options,l):l,l.group&&delete this.group,l.dataLabels&&delete this.dataLabels,m&&(this.y=Zs.prototype.getNestedProperty.call(this,m)),this.selected&&(this.state="select"),"name"in this&&h===void 0&&f.xAxis&&f.xAxis.hasNames&&(this.x=f.xAxis.nameToX(this)),this.x===void 0&&f?this.x=h??f.autoIncrement():os(l.x)&&f.options.relativeXValue?this.x=f.autoIncrement(l.x):typeof this.x=="string"&&(h??(h=f.chart.time.parse(this.x)),os(h)&&(this.x=h)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let l=this,h=l.series,f=h.chart,m=h.options.dataSorting,y=f.hoverPoints,_=ft(l.series.chart.renderer.globalAnimation),b=()=>{for(let S in(l.graphic||l.graphics||l.dataLabel||l.dataLabels)&&(Bo(l),l.destroyElements()),l)delete l[S]};l.legendItem&&f.legend.destroyItem(l),y&&(l.setState(),Rn(y,l),y.length||(f.hoverPoints=null)),l===f.hoverPoint&&l.onMouseOut(),m?.enabled?(this.animateBeforeDestroy(),Kr(b,_.duration)):b(),f.pointCount--}this.destroyed=!0}destroyElements(l){let h=this,f=h.getGraphicalProps(l);f.singular.forEach(function(m){h[m]=h[m].destroy()}),f.plural.forEach(function(m){h[m].forEach(function(y){y?.element&&y.destroy()}),delete h[m]})}firePointEvent(l,h,f){let m=this,y=this.series.options;m.manageEvent(l),l==="click"&&y.allowPointSelect&&(f=function(_){!m.destroyed&&m.select&&m.select(null,_.ctrlKey||_.metaKey||_.shiftKey)}),$i(m,l,h,f)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(this.colorIndex!==void 0?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone?.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(l){let h,f,m=this,y=[],_={singular:[],plural:[]};for((l=l||{graphic:1,dataLabel:1}).graphic&&y.push("graphic","connector"),l.dataLabel&&y.push("dataLabel","dataLabelPath","dataLabelUpper"),f=y.length;f--;)m[h=y[f]]&&_.singular.push(h);return["graphic","dataLabel"].forEach(function(b){let S=b+"s";l[b]&&m[S]&&_.plural.push(S)}),_}getNestedProperty(l){if(l)return l.indexOf("custom.")===0?Mr(l,this.options):this[l]}getZone(){let l=this.series,h=l.zones,f=l.zoneAxis||"y",m,y=0;for(m=h[0];this[f]>=m.value;)m=h[++y];return this.nonZonedColor||(this.nonZonedColor=this.color),m?.color&&!this.options.color?this.color=m.color:this.color=this.nonZonedColor,m}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor(l,h,f){this.formatPrefix="point",this.visible=!0,this.point=this,this.series=l,this.applyOptions(h,f),this.id??(this.id=nu()),this.resolveColor(),this.dataLabelOnNull??(this.dataLabelOnNull=l.options.nullInteraction),l.chart.pointCount++,$i(this,"afterInit")}isValid(){return(os(this.x)||this.x instanceof Date)&&os(this.y)}optionsToObject(l){let h=this.series,f=h.options.keys,m=f||h.pointArrayMap||["y"],y=m.length,_={},b,S=0,D=0;if(os(l)||l===null)_[m[0]]=l;else if(_r(l))for(!f&&l.length>y&&((b=typeof l[0])=="string"?h.xAxis?.dateTime?_.x=h.chart.time.parse(l[0]):_.name=l[0]:b==="number"&&(_.x=l[0]),S++);D<y;)f&&l[S]===void 0||(m[D].indexOf(".")>0?Zs.prototype.setNestedProperty(_,l[S],m[D]):_[m[D]]=l[S]),S++,D++;else typeof l=="object"&&(_=l,l.dataLabels&&(h.hasDataLabels=()=>!0),l.marker&&(h._hasPointMarkers=!0));return _}pos(l,h=this.plotY){if(!this.destroyed){let{plotX:f,series:m}=this,{chart:y,xAxis:_,yAxis:b}=m,S=0,D=0;if(os(f)&&os(h))return l&&(S=_?_.pos:y.plotLeft,D=b?b.pos:y.plotTop),y.inverted&&_&&b?[b.len-h+D,_.len-f+S]:[f+S,h+D]}}resolveColor(){let l=this.series,h=l.chart.options.chart,f=l.chart.styledMode,m,y,_=h.colorCount,b;delete this.nonZonedColor,l.options.colorByPoint?(f||(m=(y=l.options.colors||l.chart.options.colors)[l.colorCounter],_=y.length),b=l.colorCounter,l.colorCounter++,l.colorCounter===_&&(l.colorCounter=0)):(f||(m=l.color),b=l.colorIndex),this.colorIndex=Vi(this.options.colorIndex,b),this.color=Vi(this.options.color,m)}setNestedProperty(l,h,f){return f.split(".").reduce(function(m,y,_,b){let S=b.length-1===_;return m[y]=S?h:gs(m[y],!0)?m[y]:{},m[y]},l),l}shouldDraw(){return!this.isNull}tooltipFormatter(l){let{chart:h,pointArrayMap:f=["y"],tooltipOptions:m}=this.series,{valueDecimals:y="",valuePrefix:_="",valueSuffix:b=""}=m;return h.styledMode&&(l=h.tooltip?.styledModeFormat(l)||l),f.forEach(S=>{S="{point."+S,(_||b)&&(l=l.replace(RegExp(S+"}","g"),_+S+"}"+b)),l=l.replace(RegExp(S+"}","g"),S+":,."+y+"f}")}),Ot(l,this,h)}update(l,h,f,m){let y,_=this,b=_.series,S=_.graphic,D=b.chart,P=b.options;function I(){_.applyOptions(l);let F=S&&_.hasMockGraphic,z=_.y===null?!F:F;S&&z&&(_.graphic=S.destroy(),delete _.hasMockGraphic),gs(l,!0)&&(S?.element&&l&&l.marker&&l.marker.symbol!==void 0&&(_.graphic=S.destroy()),l?.dataLabels&&_.dataLabel&&(_.dataLabel=_.dataLabel.destroy())),y=_.index;let H={};for(let G of b.dataColumnKeys())H[G]=_[G];b.dataTable.setRow(H,y),P.data[y]=gs(P.data[y],!0)||gs(l,!0)?_.options:Vi(l,P.data[y]),b.isDirty=b.isDirtyData=!0,!b.fixedBox&&b.hasCartesianSeries&&(D.isDirtyBox=!0),P.legendType==="point"&&(D.isDirtyLegend=!0),h&&D.redraw(f)}h=Vi(h,!0),m===!1?I():_.firePointEvent("update",{options:l},I)}remove(l,h){this.series.removePoint(this.series.data.indexOf(this),l,h)}select(l,h){let f=this,m=f.series,y=m.chart;l=Vi(l,!f.selected),this.selectedStaging=l,f.firePointEvent(l?"select":"unselect",{accumulate:h},function(){f.selected=f.options.selected=l,m.options.data[m.data.indexOf(f)]=f.options,f.setState(l&&"select"),h||y.getSelectedPoints().forEach(function(_){let b=_.series;_.selected&&_!==f&&(_.selected=_.options.selected=!1,b.options.data[b.data.indexOf(_)]=_.options,_.setState(y.hoverPoints&&b.options.inactiveOtherPoints?"inactive":""),_.firePointEvent("unselect"))})}),delete this.selectedStaging}onMouseOver(l){let{inverted:h,pointer:f}=this.series.chart;f&&(l=l?f.normalize(l):f.getChartCoordinatesFromPoint(this,h),f.runPointActions(l,this))}onMouseOut(){let l=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(l.hoverPoints||[]).forEach(function(h){h.setState()}),l.hoverPoints=l.hoverPoint=null}manageEvent(l){let h=Zi(this.series.options.point,this.options),f=h.events?.[l];vo(f)&&(!this.hcEvents?.[l]||this.hcEvents?.[l]?.map(m=>m.fn).indexOf(f)===-1)?(this.importedUserEvent?.(),this.importedUserEvent=an(this,l,f),this.hcEvents&&(this.hcEvents[l].userEvent=!0)):this.importedUserEvent&&!f&&this.hcEvents?.[l]&&this.hcEvents?.[l].userEvent&&(Bo(this,l),delete this.hcEvents[l],Object.keys(this.hcEvents)||delete this.importedUserEvent)}setState(l,h){let f=this.series,m=this.state,y=f.options.states[l||"normal"]||{},_=Qt.plotOptions[f.type].marker&&f.options.marker,b=_&&_.enabled===!1,S=_?.states?.[l||"normal"]||{},D=S.enabled===!1,P=this.marker||{},I=f.chart,F=_&&f.markerAttribs,z=f.halo,H,G,X,q=f.stateMarkerGraphic,ie;if((l=l||"")===this.state&&!h||this.selected&&l!=="select"||y.enabled===!1||l&&(D||b&&S.enabled===!1)||l&&P.states&&P.states[l]&&P.states[l].enabled===!1)return;if(this.state=l,F&&(H=f.markerAttribs(this,l)),this.graphic&&!this.hasMockGraphic){if(m&&this.graphic.removeClass("highcharts-point-"+m),l&&this.graphic.addClass("highcharts-point-"+l),!I.styledMode){G=f.pointAttribs(this,l),X=Vi(I.options.chart.animation,y.animation);let Te=G.opacity;f.options.inactiveOtherPoints&&os(Te)&&(this.dataLabels||[]).forEach(function(Ce){Ce&&!Ce.hasClass("highcharts-data-label-hidden")&&(Ce.animate({opacity:Te},X),Ce.connector&&Ce.connector.animate({opacity:Te},X))}),this.graphic.animate(G,X)}H&&this.graphic.animate(H,Vi(I.options.chart.animation,S.animation,_.animation)),q&&q.hide()}else l&&S&&(ie=P.symbol||f.symbol,q&&q.currentSymbol!==ie&&(q=q.destroy()),H&&(q?q[h?"animate":"attr"]({x:H.x,y:H.y}):ie&&(f.stateMarkerGraphic=q=I.renderer.symbol(ie,H.x,H.y,H.width,H.height,Zi(_,S)).add(f.markerGroup),q.currentSymbol=ie)),!I.styledMode&&q&&this.state!=="inactive"&&q.attr(f.pointAttribs(this,l))),q&&(q[l&&this.isInside?"show":"hide"](),q.element.point=this,q.addClass(this.getClassName(),!0));let ae=y.halo,pe=this.graphic||q,ke=pe?.visibility||"inherit";ae?.size&&pe&&ke!=="hidden"&&!this.isCluster?(z||(f.halo=z=I.renderer.path().add(pe.parentGroup)),z.show()[h?"animate":"attr"]({d:this.haloPath(ae.size)}),z.attr({class:"highcharts-halo highcharts-color-"+Vi(this.colorIndex,f.colorIndex)+(this.className?" "+this.className:""),visibility:ke,zIndex:-1}),z.point=this,I.styledMode||z.attr(Pn({fill:this.color||f.color,"fill-opacity":ae.opacity},Wt.filterUserAttributes(ae.attributes||{})))):z?.point?.haloPath&&!z.point.destroyed&&z.animate({d:z.point.haloPath(0)},null,z.hide),$i(this,"afterSetState",{state:l})}haloPath(l){let h=this.pos();return h?this.series.chart.renderer.symbols.circle(Qn(h[0],1)-l,h[1]-l,2*l,2*l):[]}}let ys=Zs,{parse:iu}=An,{charts:Vo,composed:Wa,isTouchDevice:da}=K,{addEvent:zo,attr:kf,css:rh,extend:dc,find:zL,fireEvent:pd,isNumber:$b,isObject:qb,objectEach:Gj,offset:$j,pick:ru,pushUnique:qj,splat:UL}=Mt;class ks{applyInactiveState(l=[]){let h=[];l.forEach(f=>{let m=f.series;h.push(m),m.linkedParent&&h.push(m.linkedParent),m.linkedSeries&&h.push.apply(h,m.linkedSeries),m.navigatorSeries&&h.push(m.navigatorSeries),m.boosted&&m.markerGroup&&h.push.apply(h,this.chart.series.filter(y=>y.markerGroup===m.markerGroup))}),this.chart.series.forEach(f=>{h.indexOf(f)===-1?f.setState("inactive",!0):f.options.inactiveOtherPoints&&f.setAllPointsToState("inactive")})}destroy(){let l=this;this.eventsToUnbind.forEach(h=>h()),this.eventsToUnbind=[],!K.chartCount&&(ks.unbindDocumentMouseUp.forEach(h=>h.unbind()),ks.unbindDocumentMouseUp.length=0,ks.unbindDocumentTouchEnd&&(ks.unbindDocumentTouchEnd=ks.unbindDocumentTouchEnd())),clearInterval(l.tooltipTimeout),Gj(l,function(h,f){l[f]=void 0})}getSelectionMarkerAttrs(l,h){let f={args:{chartX:l,chartY:h},attrs:{},shapeType:"rect"};return pd(this,"getSelectionMarkerAttrs",f,m=>{let y,{chart:_,zoomHor:b,zoomVert:S}=this,{mouseDownX:D=0,mouseDownY:P=0}=_,I=m.attrs;I.x=_.plotLeft,I.y=_.plotTop,I.width=b?1:_.plotWidth,I.height=S?1:_.plotHeight,b&&(I.width=Math.max(1,Math.abs(y=l-D)),I.x=(y>0?0:y)+D),S&&(I.height=Math.max(1,Math.abs(y=h-P)),I.y=(y>0?0:y)+P)}),f}drag(l){let{chart:h}=this,{mouseDownX:f=0,mouseDownY:m=0}=h,{panning:y,panKey:_,selectionMarkerFill:b}=h.options.chart,S=h.plotLeft,D=h.plotTop,P=h.plotWidth,I=h.plotHeight,F=qb(y)?y.enabled:y,z=_&&l[`${_}Key`],H=l.chartX,G=l.chartY,X,q=this.selectionMarker;if((!q||!q.touch)&&(H<S?H=S:H>S+P&&(H=S+P),G<D?G=D:G>D+I&&(G=D+I),this.hasDragged=Math.sqrt(Math.pow(f-H,2)+Math.pow(m-G,2)),this.hasDragged>10)){X=h.isInsidePlot(f-S,m-D,{visiblePlotOnly:!0});let{shapeType:ie,attrs:ae}=this.getSelectionMarkerAttrs(H,G);this.hasZoom&&X&&!z&&!q&&(this.selectionMarker=q=h.renderer[ie](),q.attr({class:"highcharts-selection-marker",zIndex:7}).add(),h.styledMode||q.attr({fill:b||iu("#334eff").setOpacity(.25).get()})),q&&q.attr(ae),X&&!q&&F&&h.pan(l,y)}}dragStart(l){let h=this.chart;h.mouseIsDown=l.type,h.cancelClick=!1,h.mouseDownX=l.chartX,h.mouseDownY=l.chartY}getSelectionBox(l){let h={args:{marker:l},result:l.getBBox()};return pd(this,"getSelectionBox",h),h.result}drop(l){let h,{chart:f,selectionMarker:m}=this;for(let y of f.axes)y.isPanning&&(y.isPanning=!1,(y.options.startOnTick||y.options.endOnTick||y.series.some(_=>_.boosted))&&(y.forceRedraw=!0,y.setExtremes(y.userMin,y.userMax,!1),h=!0));if(h&&f.redraw(),m&&l){if(this.hasDragged){let y=this.getSelectionBox(m);f.transform({axes:f.axes.filter(_=>_.zoomEnabled&&(_.coll==="xAxis"&&this.zoomX||_.coll==="yAxis"&&this.zoomY)),selection:Je({originalEvent:l,xAxis:[],yAxis:[]},y),from:y})}$b(f.index)&&(this.selectionMarker=m.destroy())}f&&$b(f.index)&&(rh(f.container,{cursor:f._cursor}),f.cancelClick=this.hasDragged>10,f.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[])}findNearestKDPoint(l,h,f){let m;return l.forEach(function(y){let _=!(y.noSharedTooltip&&h)&&0>y.options.findNearestPointBy.indexOf("y"),b=y.searchPoint(f,_);qb(b,!0)&&b.series&&(!qb(m,!0)||function(S,D){let P,I=S.distX-D.distX,F=S.dist-D.dist,z=D.series.group?.zIndex-S.series.group?.zIndex;return I!==0&&h?I:F!==0?F:z!==0?z:S.series.index>D.series.index?-1:1}(m,b)>0)&&(m=b)}),m}getChartCoordinatesFromPoint(l,h){let{xAxis:f,yAxis:m}=l.series,y=l.shapeArgs;if(f&&m){let _=l.clientX??l.plotX??0,b=l.plotY||0;return l.isNode&&y&&$b(y.x)&&$b(y.y)&&(_=y.x,b=y.y),h?{chartX:m.len+m.pos-b,chartY:f.len+f.pos-_}:{chartX:_+f.pos,chartY:b+m.pos}}if(y?.x&&y.y)return{chartX:y.x,chartY:y.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:l}=this.chart,h=$j(l);this.chartPosition={left:h.left,top:h.top,scaleX:1,scaleY:1};let{offsetHeight:f,offsetWidth:m}=l;return m>2&&f>2&&(this.chartPosition.scaleX=h.width/m,this.chartPosition.scaleY=h.height/f),this.chartPosition}getCoordinates(l){let h={xAxis:[],yAxis:[]};for(let f of this.chart.axes)h[f.isXAxis?"xAxis":"yAxis"].push({axis:f,value:f.toValue(l[f.horiz?"chartX":"chartY"])});return h}getHoverData(l,h,f,m,y,_){let b=[],S=function(z){return z.visible&&!(!y&&z.directTouch)&&ru(z.options.enableMouseTracking,!0)},D=h,P,I={chartX:_?_.chartX:void 0,chartY:_?_.chartY:void 0,shared:y};pd(this,"beforeGetHoverData",I),P=D&&!D.stickyTracking?[D]:f.filter(z=>z.stickyTracking&&(I.filter||S)(z));let F=m&&l||!_?l:this.findNearestKDPoint(P,y,_);return D=F?.series,F&&(y&&!D.noSharedTooltip?(P=f.filter(function(z){return I.filter?I.filter(z):S(z)&&!z.noSharedTooltip})).forEach(function(z){let H=z.options?.nullInteraction,G=zL(z.points,function(X){return X.x===F.x&&(!X.isNull||!!H)});qb(G)&&(z.boosted&&z.boost&&(G=z.boost.getPoint(G)),b.push(G))}):b.push(F)),pd(this,"afterGetHoverData",I={hoverPoint:F}),{hoverPoint:I.hoverPoint,hoverSeries:D,hoverPoints:b}}getPointFromEvent(l){let h=l.target,f;for(;h&&!f;)f=h.point,h=h.parentNode;return f}onTrackerMouseOut(l){let h=this.chart,f=l.relatedTarget,m=h.hoverSeries;this.isDirectTouch=!1,!m||!f||m.stickyTracking||this.inClass(f,"highcharts-tooltip")||this.inClass(f,"highcharts-series-"+m.index)&&this.inClass(f,"highcharts-tracker")||m.onMouseOut()}inClass(l,h){let f=l,m;for(;f;){if(m=kf(f,"class")){if(m.indexOf(h)!==-1)return!0;if(m.indexOf("highcharts-container")!==-1)return!1}f=f.parentElement}}constructor(l,h){this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=h,this.chart=l,this.runChartClick=!!h.chart.events?.click,this.pinchDown=[],this.setDOMEvents(),pd(this,"afterInit")}normalize(l,h){let f=l.touches,m=f?f.length?f.item(0):ru(f.changedTouches,l.changedTouches)[0]:l;h||(h=this.getChartPosition());let y=m.pageX-h.left,_=m.pageY-h.top;return dc(l,{chartX:Math.round(y/=h.scaleX),chartY:Math.round(_/=h.scaleY)})}onContainerClick(l){let h=this.chart,f=h.hoverPoint,m=this.normalize(l),y=h.plotLeft,_=h.plotTop;!h.cancelClick&&(f&&this.inClass(m.target,"highcharts-tracker")?(pd(f.series,"click",dc(m,{point:f})),h.hoverPoint&&f.firePointEvent("click",m)):(dc(m,this.getCoordinates(m)),h.isInsidePlot(m.chartX-y,m.chartY-_,{visiblePlotOnly:!0})&&pd(h,"click",m)))}onContainerMouseDown(l){let h=(1&(l.buttons||l.button))==1;l=this.normalize(l),K.isFirefox&&l.button!==0&&this.onContainerMouseMove(l),(l.button===void 0||h)&&(this.zoomOption(l),h&&l.preventDefault?.(),this.dragStart(l))}onContainerMouseLeave(l){let{pointer:h}=Vo[ru(ks.hoverChartIndex,-1)]||{};l=this.normalize(l),this.onContainerMouseMove(l),h&&!this.inClass(l.relatedTarget,"highcharts-tooltip")&&(h.reset(),h.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(l){let h=this.chart,f=h.tooltip,m=this.normalize(l);this.setHoverChartIndex(l),(h.mouseIsDown==="mousedown"||this.touchSelect(m))&&this.drag(m),!h.exporting?.openMenu&&(this.inClass(m.target,"highcharts-tracker")||h.isInsidePlot(m.chartX-h.plotLeft,m.chartY-h.plotTop,{visiblePlotOnly:!0}))&&!f?.shouldStickOnContact(m)&&(this.inClass(m.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(m))}onDocumentTouchEnd(l){this.onDocumentMouseUp(l)}onContainerTouchMove(l){this.touchSelect(l)?this.onContainerMouseMove(l):this.touch(l)}onContainerTouchStart(l){this.touchSelect(l)?this.onContainerMouseDown(l):(this.zoomOption(l),this.touch(l,!0))}onDocumentMouseMove(l){let h=this.chart,f=h.tooltip,m=this.chartPosition,y=this.normalize(l,m);!m||h.isInsidePlot(y.chartX-h.plotLeft,y.chartY-h.plotTop,{visiblePlotOnly:!0})||f?.shouldStickOnContact(y)||y.target!==h.container.ownerDocument&&this.inClass(y.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(l){Vo[ru(ks.hoverChartIndex,-1)]?.pointer?.drop(l)}pinch(l){let h=this,{chart:f,hasZoom:m,lastTouches:y}=h,_=[].map.call(l.touches||[],I=>h.normalize(I)),b=_.length,S=b===1&&(h.inClass(l.target,"highcharts-tracker")&&f.runTrackerClick||h.runChartClick),D=f.tooltip,P=b===1&&ru(D?.options.followTouchMove,!0);b>1?h.initiated=!0:P&&(h.initiated=!1),m&&h.initiated&&!S&&l.cancelable!==!1&&l.preventDefault(),l.type==="touchstart"?(h.pinchDown=_,h.res=!0,f.mouseDownX=l.chartX):P?this.runPointActions(h.normalize(l)):y&&(pd(f,"touchpan",{originalEvent:l,touches:_},()=>{let I=F=>{let z=F[0],H=F[1]||z;return{x:z.chartX,y:z.chartY,width:H.chartX-z.chartX,height:H.chartY-z.chartY}};f.transform({axes:f.axes.filter(F=>F.zoomEnabled&&(this.zoomHor&&F.horiz||this.zoomVert&&!F.horiz)),to:I(_),from:I(y),trigger:l.type})}),h.res&&(h.res=!1,this.reset(!1,0))),h.lastTouches=_}reset(l,h){let f=this.chart,m=f.hoverSeries,y=f.hoverPoint,_=f.hoverPoints,b=f.tooltip,S=b?.shared?_:y;l&&S&&UL(S).forEach(function(D){D.series.isCartesian&&D.plotX===void 0&&(l=!1)}),l?b&&S&&UL(S).length&&(b.refresh(S),b.shared&&_?_.forEach(function(D){D.setState(D.state,!0),D.series.isCartesian&&(D.series.xAxis.crosshair&&D.series.xAxis.drawCrosshair(null,D),D.series.yAxis.crosshair&&D.series.yAxis.drawCrosshair(null,D))}):y&&(y.setState(y.state,!0),f.axes.forEach(function(D){D.crosshair&&y.series[D.coll]===D&&D.drawCrosshair(null,y)}))):(y&&y.onMouseOut(),_&&_.forEach(function(D){D.setState()}),m&&m.onMouseOut(),b&&b.hide(h),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),f.axes.forEach(function(D){D.hideCrosshair()}),f.hoverPoints=f.hoverPoint=void 0)}runPointActions(l,h,f){let m=this.chart,y=m.series,_=m.tooltip?.options.enabled?m.tooltip:void 0,b=!!_&&_.shared,S=h||m.hoverPoint,D=S?.series||m.hoverSeries,P=(!l||l.type!=="touchmove")&&(!!h||D?.directTouch&&this.isDirectTouch),I=this.getHoverData(S,D,y,P,b,l);S=I.hoverPoint,D=I.hoverSeries;let F=I.hoverPoints,z=D?.tooltipOptions.followPointer&&!D.tooltipOptions.split,H=b&&D&&!D.noSharedTooltip;if(S&&(f||S!==m.hoverPoint||_?.isHidden)){if((m.hoverPoints||[]).forEach(function(G){F.indexOf(G)===-1&&G.setState()}),m.hoverSeries!==D&&D.onMouseOver(),this.applyInactiveState(F),(F||[]).forEach(function(G){G.setState("hover")}),m.hoverPoint&&m.hoverPoint.firePointEvent("mouseOut"),!S.series)return;m.hoverPoints=F,m.hoverPoint=S,S.firePointEvent("mouseOver",void 0,()=>{_&&S&&_.refresh(H?F:S,l)})}else if(z&&_&&!_.isHidden){let G=_.getAnchor([{}],l);m.isInsidePlot(G[0],G[1],{visiblePlotOnly:!0})&&_.updatePosition({plotX:G[0],plotY:G[1]})}this.unDocMouseMove||(this.unDocMouseMove=zo(m.container.ownerDocument,"mousemove",G=>Vo[ks.hoverChartIndex??-1]?.pointer?.onDocumentMouseMove(G)),this.eventsToUnbind.push(this.unDocMouseMove)),m.axes.forEach(function(G){let X,q=G.crosshair?.snap??!0;q&&((X=m.hoverPoint)&&X.series[G.coll]===G||(X=zL(F,ie=>ie.series?.[G.coll]===G))),X||!q?G.drawCrosshair(l,X):G.hideCrosshair()})}setDOMEvents(){let l=this.chart.container,h=l.ownerDocument;l.onmousedown=this.onContainerMouseDown.bind(this),l.onmousemove=this.onContainerMouseMove.bind(this),l.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(zo(l,"mouseenter",this.onContainerMouseEnter.bind(this)),zo(l,"mouseleave",this.onContainerMouseLeave.bind(this))),ks.unbindDocumentMouseUp.some(m=>m.doc===h)||ks.unbindDocumentMouseUp.push({doc:h,unbind:zo(h,"mouseup",this.onDocumentMouseUp.bind(this))});let f=this.chart.renderTo.parentElement;for(;f&&f.tagName!=="BODY";)this.eventsToUnbind.push(zo(f,"scroll",()=>{delete this.chartPosition})),f=f.parentElement;this.eventsToUnbind.push(zo(l,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),zo(l,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),ks.unbindDocumentTouchEnd||(ks.unbindDocumentTouchEnd=zo(h,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),zo(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){if(!da)return;let l=this.pointerCaptureEventsToUnbind,h=this.chart,f=h.container,m=ru(h.options.tooltip?.followTouchMove,!0)&&h.series.some(y=>y.options.findNearestPointBy.indexOf("y")>-1);!this.hasPointerCapture&&m?(l.push(zo(f,"pointerdown",y=>{y.target?.hasPointerCapture(y.pointerId)&&y.target?.releasePointerCapture(y.pointerId)}),zo(f,"pointermove",y=>{h.pointer?.getPointFromEvent(y)?.onMouseOver(y)})),h.styledMode||rh(f,{"touch-action":"none"}),f.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!m&&(l.forEach(y=>y()),l.length=0,h.styledMode||rh(f,{"touch-action":ru(h.options.chart.style?.["touch-action"],"manipulation")}),f.className=f.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(l){let h=this.chart,f=K.charts[ru(ks.hoverChartIndex,-1)];if(f&&f!==h){let m={relatedTarget:h.container};l&&!l?.relatedTarget&&Object.assign({},l,m),f.pointer?.onContainerMouseLeave(l||m)}f?.mouseIsDown||(ks.hoverChartIndex=h.index)}touch(l,h){let f,{chart:m,pinchDown:y=[]}=this;this.setHoverChartIndex(),(l=this.normalize(l)).touches.length===1?m.isInsidePlot(l.chartX-m.plotLeft,l.chartY-m.plotTop,{visiblePlotOnly:!0})&&!m.exporting?.openMenu?(h&&this.runPointActions(l),l.type==="touchmove"&&(f=!!y[0]&&Math.pow(y[0].chartX-l.chartX,2)+Math.pow(y[0].chartY-l.chartY,2)>=16),ru(f,!0)&&this.pinch(l)):h&&this.reset():l.touches.length===2&&this.pinch(l)}touchSelect(l){return!!(this.chart.zooming.singleTouch&&l.touches&&l.touches.length===1)}zoomOption(l){let h=this.chart,f=h.inverted,m=h.zooming.type||"",y,_;/touch/.test(l.type)&&(m=ru(h.zooming.pinchType,m)),this.zoomX=y=/x/.test(m),this.zoomY=_=/y/.test(m),this.zoomHor=y&&!f||_&&f,this.zoomVert=_&&!f||y&&f,this.hasZoom=y||_}}ks.unbindDocumentMouseUp=[],function(M){M.compose=function(l){qj(Wa,"Core.Pointer")&&zo(l,"beforeRender",function(){this.pointer=new M(this,this.options)})}}(ks||(ks={}));let HL=ks;(function(M){M.setLength=function(l,h,f){return Array.isArray(l)?(l.length=h,l):l[f?"subarray":"slice"](0,h)},M.splice=function(l,h,f,m,y=[]){if(Array.isArray(l))return Array.isArray(y)||(y=Array.from(y)),{removed:l.splice(h,f,...y),array:l};let _=Object.getPrototypeOf(l).constructor,b=l[m?"subarray":"slice"](h,h+f),S=new _(l.length-f+y.length);return S.set(l.subarray(0,h),0),S.set(y,h),S.set(l.subarray(h+f),h+y.length),{removed:b,array:S}}})(g||(g={}));let{setLength:Xj,splice:jL}=g,{fireEvent:GE,objectEach:F0,uniqueKey:B0}=Mt,Xb=class{constructor(M={}){this.autoId=!M.id,this.columns={},this.id=M.id||B0(),this.modified=this,this.rowCount=0,this.versionTag=B0();let l=0;F0(M.columns||{},(h,f)=>{this.columns[f]=h.slice(),l=Math.max(l,h.length)}),this.applyRowCount(l)}applyRowCount(M){this.rowCount=M,F0(this.columns,(l,h)=>{l.length!==M&&(this.columns[h]=Xj(l,M))})}deleteRows(M,l=1){if(l>0&&M<this.rowCount){let h=0;F0(this.columns,(f,m)=>{this.columns[m]=jL(f,M,l).array,h=f.length}),this.rowCount=h}GE(this,"afterDeleteRows",{rowIndex:M,rowCount:l}),this.versionTag=B0()}getColumn(M,l){return this.columns[M]}getColumns(M,l){return(M||Object.keys(this.columns)).reduce((h,f)=>(h[f]=this.columns[f],h),{})}getRow(M,l){return(l||Object.keys(this.columns)).map(h=>this.columns[h]?.[M])}setColumn(M,l=[],h=0,f){this.setColumns({[M]:l},h,f)}setColumns(M,l,h){let f=this.rowCount;F0(M,(m,y)=>{this.columns[y]=m.slice(),f=m.length}),this.applyRowCount(f),h?.silent||(GE(this,"afterSetColumns"),this.versionTag=B0())}setRow(M,l=this.rowCount,h,f){let{columns:m}=this,y=h?this.rowCount+1:l+1;F0(M,(_,b)=>{let S=m[b]||f?.addColumns!==!1&&Array(y);S&&(h?S=jL(S,l,0,!0,[_]).array:S[l]=_,m[b]=S)}),y>this.rowCount&&this.applyRowCount(y),f?.silent||(GE(this,"afterSetRows"),this.versionTag=B0())}},{extend:Yj,merge:Zj,pick:WL}=Mt;(function(M){function l(h,f,m){let y=this.legendItem=this.legendItem||{},{chart:_,options:b}=this,{baseline:S=0,symbolWidth:D,symbolHeight:P}=h,I=this.symbol||"circle",F=P/2,z=_.renderer,H=y.group,G=S-Math.round((h.fontMetrics?.b||P)*(m?.4:.3)),X={},q,ie=b.marker,ae=0;if(_.styledMode||(X["stroke-width"]=Math.min(b.lineWidth||0,24),b.dashStyle?X.dashstyle=b.dashStyle:b.linecap!=="square"&&(X["stroke-linecap"]="round")),y.line=z.path().addClass("highcharts-graph").attr(X).add(H),m&&(y.area=z.path().addClass("highcharts-area").add(H)),X["stroke-linecap"]&&(ae=Math.min(y.line.strokeWidth(),D)/2),D){let pe=[["M",ae,G],["L",D-ae,G]];y.line.attr({d:pe}),y.area?.attr({d:[...pe,["L",D-ae,S],["L",ae,S]]})}if(ie&&ie.enabled!==!1&&D){let pe=Math.min(WL(ie.radius,F),F);I.indexOf("url")===0&&(ie=Zj(ie,{width:P,height:P}),pe=0),y.symbol=q=z.symbol(I,D/2-pe,G-pe,2*pe,2*pe,Yj({context:"legend"},ie)).addClass("highcharts-point").add(H),q.isMarker=!0}}M.areaMarker=function(h,f){l.call(this,h,f,!0)},M.lineMarker=l,M.rectangle=function(h,f){let m=f.legendItem||{},y=h.options,_=h.symbolHeight,b=y.squareSymbol,S=b?_:h.symbolWidth;m.symbol=this.chart.renderer.rect(b?(h.symbolWidth-_)/2:0,h.baseline-_+1,S,_,WL(h.options.symbolRadius,_/2)).addClass("highcharts-point").attr({zIndex:3}).add(m.group)}})(v||(v={}));let GL=v,{defaultOptions:$L}=_n,{extend:Kj,extendClass:Qj,merge:Jj}=Mt;(function(M){function l(h,f){let m=$L.plotOptions||{},y=f.defaultOptions,_=f.prototype;return _.type=h,_.pointClass||(_.pointClass=ys),!M.seriesTypes[h]&&(y&&(m[h]=y),M.seriesTypes[h]=f,!0)}M.seriesTypes=K.seriesTypes,M.registerSeriesType=l,M.seriesType=function(h,f,m,y,_){let b=$L.plotOptions||{};if(f=f||"",b[h]=Jj(b[f],m),delete M.seriesTypes[h],l(h,Qj(M.seriesTypes[f]||function(){},y)),M.seriesTypes[h].prototype.type=h,_){class S extends ys{}Kj(S.prototype,_),M.seriesTypes[h].prototype.pointClass=S}return M.seriesTypes[h]}})(x||(x={}));let $r=x,{animObject:qL,setAnimation:eW}=Wr,{defaultOptions:Yb}=_n,{registerEventOptions:tW}=ha,{svg:nW,win:iW}=K,{seriesTypes:Vm}=$r,{format:rW}=Ni,{arrayMax:$E,arrayMin:XL,clamp:YL,correctFloat:ZL,crisp:sW,defined:vs,destroyObjectProperties:oW,diffObjects:aW,erase:KL,error:Zb,extend:zm,find:lW,fireEvent:Nr,getClosestDistance:cW,getNestedProperty:QL,insertItem:JL,isArray:eN,isNumber:Ls,isString:uW,merge:V0,objectEach:qE,pick:Or,removeEvent:hW,syncTimeout:tN}=Mt;class fc{constructor(){this.zoneAxis="y"}init(l,h){let f;Nr(this,"init",{options:h}),this.dataTable??(this.dataTable=new Xb);let m=l.series;this.eventsToUnbind=[],this.chart=l,this.options=this.setOptions(h);let y=this.options,_=y.visible!==!1;this.linkedSeries=[],this.bindAxes(),zm(this,{name:y.name,state:"",visible:_,selected:y.selected===!0}),tW(this,y),(y.events?.click||y.point?.events?.click||y.allowPointSelect)&&(l.runTrackerClick=!0),this.getColor(),this.getSymbol(),this.isCartesian&&(l.hasCartesianSeries=!0),m.length&&(f=m[m.length-1]),this._i=Or(f?._i,-1)+1,this.opacity=this.options.opacity,l.orderItems("series",JL(this,m)),y.dataSorting?.enabled?this.setDataSortingOptions():this.points||this.data||this.setData(y.data,!1),Nr(this,"afterInit")}is(l){return Vm[l]&&this instanceof Vm[l]}bindAxes(){let l,h=this,f=h.options,m=h.chart;Nr(this,"bindAxes",null,function(){(h.axisTypes||[]).forEach(function(y){(m[y]||[]).forEach(function(_){l=_.options,(Or(f[y],0)===_.index||f[y]!==void 0&&f[y]===l.id)&&(JL(h,_.series),h[y]=_,_.isDirty=!0)}),h[y]||h.optionalAxis===y||Zb(18,!0,m)})}),Nr(this,"afterBindAxes")}hasData(){return this.visible&&this.dataMax!==void 0&&this.dataMin!==void 0||this.visible&&this.dataTable.rowCount>0}hasMarkerChanged(l,h){let f=l.marker,m=h.marker||{};return f&&(m.enabled&&!f.enabled||m.symbol!==f.symbol||m.height!==f.height||m.width!==f.width)}autoIncrement(l){let h,f=this.options,{pointIntervalUnit:m,relativeXValue:y}=this.options,_=this.chart.time,b=this.xIncrement??_.parse(f.pointStart)??0;if(this.pointInterval=h=Or(this.pointInterval,f.pointInterval,1),y&&Ls(l)&&(h*=l),m){let S=_.toParts(b);m==="day"?S[2]+=h:m==="month"?S[1]+=h:m==="year"&&(S[0]+=h),h=_.makeTime.apply(_,S)-b}return y&&Ls(l)?b+h:(this.xIncrement=b+h,b)}setDataSortingOptions(){let l=this.options;zm(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),vs(l.pointRange)||(l.pointRange=1)}setOptions(l){let h,f=this.chart,m=f.options.plotOptions,y=f.userOptions||{},_=V0(l),b=f.styledMode,S={plotOptions:m,userOptions:_};Nr(this,"setOptions",S);let D=S.plotOptions[this.type],P=y.plotOptions||{},I=P.series||{},F=Yb.plotOptions[this.type]||{},z=P[this.type]||{};D.dataLabels=this.mergeArrays(F.dataLabels,D.dataLabels),this.userOptions=S.userOptions;let H=V0(D,m.series,z,_);this.tooltipOptions=V0(Yb.tooltip,Yb.plotOptions.series?.tooltip,F?.tooltip,f.userOptions.tooltip,P.series?.tooltip,z.tooltip,_.tooltip),this.stickyTracking=Or(_.stickyTracking,z.stickyTracking,I.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||H.stickyTracking),D.marker===null&&delete H.marker,this.zoneAxis=H.zoneAxis||"y";let G=this.zones=(H.zones||[]).map(X=>Je({},X));return(H.negativeColor||H.negativeFillColor)&&!H.zones&&(h={value:H[this.zoneAxis+"Threshold"]||H.threshold||0,className:"highcharts-negative"},b||(h.color=H.negativeColor,h.fillColor=H.negativeFillColor),G.push(h)),G.length&&vs(G[G.length-1].value)&&G.push(b?{}:{color:this.color,fillColor:this.fillColor}),Nr(this,"afterSetOptions",{options:H}),H}getName(){return this.options.name??rW(this.chart.options.lang.seriesName,this,this.chart)}getCyclic(l,h,f){let m,y,_=this.chart,b=`${l}Index`,S=`${l}Counter`,D=f?.length||_.options.chart.colorCount;!h&&(vs(y=Or(l==="color"?this.options.colorIndex:void 0,this[b]))?m=y:(_.series.length||(_[S]=0),m=_[S]%D,_[S]+=1),f&&(h=f[m])),m!==void 0&&(this[b]=m),this[l]=h}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||Yb.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let l=this.options.marker;this.getCyclic("symbol",l.symbol,this.chart.options.symbols)}getColumn(l,h){return(h?this.dataTable.modified:this.dataTable).getColumn(l,!0)||[]}findPointIndex(l,h){let f,m,y,{id:_,x:b}=l,S=this.points,D=this.options.dataSorting,P=this.cropStart||0;if(_){let I=this.chart.get(_);I instanceof ys&&(f=I)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let I=F=>!F.touched&&F.index===l.index;if(D?.matchByName?I=F=>!F.touched&&F.name===l.name:this.options.relativeXValue&&(I=F=>!F.touched&&F.options.x===l.x),!(f=lW(S,I)))return}return f&&(y=f?.index)!==void 0&&(m=!0),y===void 0&&Ls(b)&&(y=this.getColumn("x").indexOf(b,h)),y!==-1&&y!==void 0&&this.cropped&&(y=y>=P?y-P:y),!m&&Ls(y)&&S[y]?.touched&&(y=void 0),y}updateData(l,h){let{options:f,requireSorting:m}=this,y=f.dataSorting,_=this.points,b=[],S=l.length===_.length,D,P,I,F,z=!0;if(this.xIncrement=null,l.forEach((G,X)=>{let q,ie=vs(G)&&this.pointClass.prototype.optionsToObject.call({series:this},G)||{},{id:ae,x:pe}=ie;ae||Ls(pe)?((q=this.findPointIndex(ie,F))===-1||q===void 0?b.push(G):_[q]&&G!==f.data?.[q]?(_[q].update(G,!1,void 0,!1),_[q].touched=!0,m&&(F=q+1)):_[q]&&(_[q].touched=!0),(!S||X!==q||y?.enabled||this.hasDerivedData)&&(D=!0)):b.push(G)},this),D)for(P=_.length;P--;)(I=_[P])&&!I.touched&&I.remove?.(!1,h);else S&&!y?.enabled?(l.forEach((G,X)=>{G===_[X].y||_[X].destroyed||_[X].update(G,!1,void 0,!1)}),b.length=0):z=!1;if(_.forEach(G=>{G&&(G.touched=!1)}),!z)return!1;b.forEach(G=>{this.addPoint(G,!1,void 0,void 0,!1)},this);let H=this.getColumn("x");return this.xIncrement===null&&H.length&&(this.xIncrement=$E(H),this.autoIncrement()),!0}dataColumnKeys(){return["x",...this.pointArrayMap||["y"]]}setData(l,h=!0,f,m){let y=this.points,_=y?.length||0,b=this.options,S=this.chart,D=b.dataSorting,P=this.xAxis,I=b.turboThreshold,F=this.dataTable,z=this.dataColumnKeys(),H=this.pointValKey||"y",G=(this.pointArrayMap||[]).length,X=b.keys,q,ie,ae=0,pe=1,ke;S.options.chart.allowMutatingData||(b.data&&delete this.options.data,this.userOptions.data&&delete this.userOptions.data,ke=V0(!0,l));let Te=(l=ke||l||[]).length;if(D?.enabled&&(l=this.sortData(l)),S.options.chart.allowMutatingData&&m!==!1&&Te&&_&&!this.cropped&&!this.hasGroupedData&&this.visible&&!this.boosted&&(ie=this.updateData(l,f)),!ie){this.xIncrement=null,this.colorCounter=0;let Ce=I&&!b.relativeXValue&&Te>I;if(Ce){let De=this.getFirstValidPoint(l),Ye=this.getFirstValidPoint(l,Te-1,-1),Qe=st=>!!(eN(st)&&(X||Ls(st[0])));if(Ls(De)&&Ls(Ye)){let st=[],Gt=[];for(let xn of l)st.push(this.autoIncrement()),Gt.push(xn);F.setColumns({x:st,[H]:Gt})}else if(Qe(De)&&Qe(Ye))if(G){let st=+(De.length===G),Gt=Array(z.length).fill(0).map(()=>[]);for(let xn of l){st&&Gt[0].push(this.autoIncrement());for(let Sn=st;Sn<=G;Sn++)Gt[Sn]?.push(xn[Sn-st])}F.setColumns(z.reduce((xn,Sn,Xt)=>(xn[Sn]=Gt[Xt],xn),{}))}else{X&&(ae=X.indexOf("x"),pe=X.indexOf("y"),ae=ae>=0?ae:0,pe=pe>=0?pe:1),De.length===1&&(pe=0);let st=[],Gt=[];if(ae===pe)for(let xn of l)st.push(this.autoIncrement()),Gt.push(xn[pe]);else for(let xn of l)st.push(xn[ae]),Gt.push(xn[pe]);F.setColumns({x:st,[H]:Gt})}else Ce=!1}if(!Ce){let De=z.reduce((Ye,Qe)=>(Ye[Qe]=[],Ye),{});for(q=0;q<Te;q++){let Ye=this.pointClass.prototype.applyOptions.apply({series:this},[l[q]]);for(let Qe of z)De[Qe][q]=Ye[Qe]}F.setColumns(De)}for(uW(this.getColumn("y")[0])&&Zb(14,!0,S),this.data=[],this.options.data=this.userOptions.data=l,q=_;q--;)y[q]?.destroy();P&&(P.minRange=P.userMinRange),this.isDirty=S.isDirtyBox=!0,this.isDirtyData=!!y,f=!1}b.legendType==="point"&&(this.processData(),this.generatePoints()),h&&S.redraw(f)}sortData(l){let h=this,f=h.options.dataSorting.sortKey||"y",m=function(y,_){return vs(_)&&y.pointClass.prototype.optionsToObject.call({series:y},_)||{}};return l.forEach(function(y,_){l[_]=m(h,y),l[_].index=_},this),l.concat().sort((y,_)=>{let b=QL(f,y),S=QL(f,_);return S<b?-1:+(S>b)}).forEach(function(y,_){y.x=_},this),h.linkedSeries&&h.linkedSeries.forEach(function(y){let _=y.options,b=_.data;!_.dataSorting?.enabled&&b&&(b.forEach(function(S,D){b[D]=m(y,S),l[D]&&(b[D].x=l[D].x,b[D].index=D)}),y.setData(b,!1))}),l}getProcessedData(l){let h=this,{dataTable:f,isCartesian:m,options:y,xAxis:_}=h,b=y.cropThreshold,S=l||h.getExtremesFromAll,D=_?.logarithmic,P=f.rowCount,I,F,z=0,H,G,X,q=h.getColumn("x"),ie=f,ae=!1;return _&&(G=(H=_.getExtremes()).min,X=H.max,ae=!!(_.categories&&!_.names.length),m&&h.sorted&&!S&&(!b||P>b||h.forceCrop)&&(q[P-1]<G||q[0]>X?ie=new Xb:h.getColumn(h.pointValKey||"y").length&&(q[0]<G||q[P-1]>X)&&(ie=(I=this.cropData(f,G,X)).modified,z=I.start,F=!0))),q=ie.getColumn("x")||[],{modified:ie,cropped:F,cropStart:z,closestPointRange:cW([D?q.map(D.log2lin):q],()=>h.requireSorting&&!ae&&Zb(15,!1,h.chart))}}processData(l){let h=this.xAxis,f=this.dataTable;if(this.isCartesian&&!this.isDirty&&!h.isDirty&&!this.yAxis.isDirty&&!l)return!1;let m=this.getProcessedData();f.modified=m.modified,this.cropped=m.cropped,this.cropStart=m.cropStart,this.closestPointRange=this.basePointRange=m.closestPointRange,Nr(this,"afterProcessData")}cropData(l,h,f){let m=l.getColumn("x",!0)||[],y=m.length,_={},b,S,D=0,P=y;for(b=0;b<y;b++)if(m[b]>=h){D=Math.max(0,b-1);break}for(S=b;S<y;S++)if(m[S]>f){P=S+1;break}for(let I of this.dataColumnKeys()){let F=l.getColumn(I,!0);F&&(_[I]=F.slice(D,P))}return{modified:new Xb({columns:_}),start:D,end:P}}generatePoints(){let l=this.options,h=this.processedData||l.data,f=this.dataTable.modified,m=this.getColumn("x",!0),y=this.pointClass,_=f.rowCount,b=this.cropStart||0,S=this.hasGroupedData,D=l.keys,P=[],I=l.dataGrouping?.groupAll?b:0,F=this.xAxis?.categories,z=this.pointArrayMap||["y"],H=this.dataColumnKeys(),G,X,q,ie,ae=this.data,pe;if(!ae&&!S){let ke=[];ke.length=h?.length||0,ae=this.data=ke}for(D&&S&&(this.options.keys=!1),ie=0;ie<_;ie++)X=b+ie,S?((q=new y(this,f.getRow(ie,H)||[])).dataGroup=this.groupMap[I+ie],q.dataGroup?.options&&(q.options=q.dataGroup.options,zm(q,q.dataGroup.options),delete q.dataLabels)):(q=ae[X],pe=h?h[X]:f.getRow(ie,z),q||pe===void 0||(ae[X]=q=new y(this,pe,m[ie]))),q&&(q.index=S?I+ie:X,P[ie]=q,q.category=F?.[q.x]??q.x,q.key=q.name??q.category);if(this.options.keys=D,ae&&(_!==(G=ae.length)||S))for(ie=0;ie<G;ie++)ie!==b||S||(ie+=_),ae[ie]&&(ae[ie].destroyElements(),ae[ie].plotX=void 0);this.data=ae,this.points=P,Nr(this,"afterGeneratePoints")}getXExtremes(l){return{min:XL(l),max:$E(l)}}getExtremes(l,h){let{xAxis:f,yAxis:m}=this,y=h||this.getExtremesFromAll||this.options.getExtremesFromAll,_=y&&this.cropped?this.dataTable:this.dataTable.modified,b=_.rowCount,S=l||this.stackedYData,D=S?[S]:(this.keysAffectYAxis||this.pointArrayMap||["y"])?.map(ke=>_.getColumn(ke,!0)||[])||[],P=this.getColumn("x",!0),I=[],F=this.requireSorting&&!this.is("column")?1:0,z=!!m&&m.positiveValuesOnly,H=y||this.cropped||!f,G,X,q,ie=0,ae=0;for(f&&(ie=(G=f.getExtremes()).min,ae=G.max),q=0;q<b;q++)if(X=P[q],H||(P[q+F]||X)>=ie&&(P[q-F]||X)<=ae)for(let ke of D){let Te=ke[q];Ls(Te)&&(Te>0||!z)&&I.push(Te)}let pe={activeYData:I,dataMin:XL(I),dataMax:$E(I)};return Nr(this,"afterGetExtremes",{dataExtremes:pe}),pe}applyExtremes(){let l=this.getExtremes();return this.dataMin=l.dataMin,this.dataMax=l.dataMax,l}getFirstValidPoint(l,h=0,f=1){let m=l.length,y=h;for(;y>=0&&y<m;){if(vs(l[y]))return l[y];y+=f}}translate(){this.generatePoints();let l=this.options,h=l.stacking,f=this.xAxis,m=this.enabledDataSorting,y=this.yAxis,_=this.points,b=_.length,S=this.pointPlacementToXValue(),D=!!S,P=l.threshold,I=l.startFromThreshold?P:0,F=l?.nullInteraction&&y.len,z,H,G,X,q=Number.MAX_VALUE;function ie(ae){return YL(ae,-1e9,1e9)}for(z=0;z<b;z++){let ae,pe=_[z],ke=pe.x,Te,Ce,De=pe.y,Ye=pe.low,Qe=h&&y.stacking?.stacks[(this.negStacks&&De<(I?0:P)?"-":"")+this.stackKey];pe.plotX=Ls(H=f.translate(ke,!1,!1,!1,!0,S))?ZL(ie(H)):void 0,h&&this.visible&&Qe&&Qe[ke]&&(X=this.getStackIndicator(X,ke,this.index),!pe.isNull&&X.key&&(Ce=(Te=Qe[ke]).points[X.key]),Te&&eN(Ce)&&(Ye=Ce[0],De=Ce[1],Ye===I&&X.key===Qe[ke].base&&(Ye=Or(Ls(P)?P:y.min)),y.positiveValuesOnly&&vs(Ye)&&Ye<=0&&(Ye=void 0),pe.total=pe.stackTotal=Or(Te.total),pe.percentage=vs(pe.y)&&Te.total?pe.y/Te.total*100:void 0,pe.stackY=De,this.irregularWidths||Te.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),pe.yBottom=vs(Ye)?ie(y.translate(Ye,!1,!0,!1,!0)):void 0,this.dataModify&&(De=this.dataModify.modifyValue(De,z)),Ls(De)&&pe.plotX!==void 0?ae=Ls(ae=y.translate(De,!1,!0,!1,!0))?ie(ae):void 0:!Ls(De)&&F&&(ae=F),pe.plotY=ae,pe.isInside=this.isPointInside(pe),pe.clientX=D?ZL(f.translate(ke,!1,!1,!1,!0,S)):H,pe.negative=(pe.y||0)<(P||0),pe.isNull||pe.visible===!1||(G!==void 0&&(q=Math.min(q,Math.abs(H-G))),G=H),pe.zone=this.zones.length?pe.getZone():void 0,!pe.graphic&&this.group&&m&&(pe.isNew=!0)}this.closestPointRangePx=q,Nr(this,"afterTranslate")}getValidPoints(l,h,f){let m=this.chart;return(l||this.points||[]).filter(function(y){let{plotX:_,plotY:b}=y;return(!!f||!y.isNull&&!!Ls(b))&&(!h||!!m.isInsidePlot(_,b,{inverted:m.inverted}))&&y.visible!==!1})}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:l,group:h,markerGroup:f}=this,m=l.sharedClips,y=l.renderer,_=l.getClipBox(this),b=this.getSharedClipKey(),S=m[b];S?S.animate(_):m[b]=S=y.clipRect(_),h&&h.clip(this.options.clip===!1?void 0:S),f&&f.clip()}animate(l){let{chart:h,group:f,markerGroup:m}=this,y=h.inverted,_=qL(this.options.animation),b=[this.getSharedClipKey(),_.duration,_.easing,_.defer].join(","),S=h.sharedClips[b],D=h.sharedClips[b+"m"];if(l&&f){let P=h.getClipBox(this);if(S)S.attr("height",P.height);else{P.width=0,y&&(P.x=h.plotHeight),S=h.renderer.clipRect(P),h.sharedClips[b]=S;let I={x:-99,y:-99,width:y?h.plotWidth+199:99,height:y?99:h.plotHeight+199};D=h.renderer.clipRect(I),h.sharedClips[b+"m"]=D}f.clip(S),m?.clip(D)}else if(S&&!S.hasClass("highcharts-animating")){let P=h.getClipBox(this),I=_.step;(m?.element.childNodes.length||h.series.length>1)&&(_.step=function(F,z){I&&I.apply(z,arguments),z.prop==="width"&&D?.element&&D.attr(y?"height":"width",F+99)}),S.addClass("highcharts-animating").animate(P,_)}}afterAnimate(){this.setClip(),qE(this.chart.sharedClips,(l,h,f)=>{l&&!this.chart.container.querySelector(`[clip-path="url(#${l.id})"]`)&&(l.destroy(),delete f[h])}),this.finishedAnimating=!0,Nr(this,"afterAnimate")}drawPoints(l=this.points){let h,f,m,y,_,b,S,D=this.chart,P=D.styledMode,{colorAxis:I,options:F}=this,z=F.marker,H=F.nullInteraction,G=this[this.specialGroup||"markerGroup"],X=this.xAxis,q=Or(z.enabled,!X||!!X.isRadial||null,this.closestPointRangePx>=z.enabledThreshold*z.radius);if(z.enabled!==!1||this._hasPointMarkers)for(h=0;h<l.length;h++){y=(m=(f=l[h]).graphic)?"animate":"attr",_=f.marker||{},b=!!f.marker;let ie=f.isNull;if((q&&!vs(_.enabled)||_.enabled)&&(!ie||H)&&f.visible!==!1){let ae=Or(_.symbol,this.symbol,"rect");S=this.markerAttribs(f,f.selected&&"select"),this.enabledDataSorting&&(f.startXPos=X.reversed?-(S.width||0):X.width);let pe=f.isInside!==!1;if(!m&&pe&&((S.width||0)>0||f.hasImage)&&(f.graphic=m=D.renderer.symbol(ae,S.x,S.y,S.width,S.height,b?_:z).add(G),this.enabledDataSorting&&D.hasRendered&&(m.attr({x:f.startXPos}),y="animate")),m&&y==="animate"&&m[pe?"show":"hide"](pe).animate(S),m){let ke=this.pointAttribs(f,P||!f.selected?void 0:"select");P?I&&m.css({fill:ke.fill}):m[y](ke)}m&&m.addClass(f.getClassName(),!0)}else m&&(f.graphic=m.destroy())}}markerAttribs(l,h){let f=this.options,m=f.marker,y=l.marker||{},_=y.symbol||m.symbol,b={},S,D,P=Or(y.radius,m?.radius);h&&(S=m.states[h],D=y.states&&y.states[h],P=Or(D?.radius,S?.radius,P&&P+(S?.radiusPlus||0))),l.hasImage=_&&_.indexOf("url")===0,l.hasImage&&(P=0);let I=l.pos();return Ls(P)&&I&&(f.crisp&&(I[0]=sW(I[0],l.hasImage?0:_==="rect"?m?.lineWidth||0:1)),b.x=I[0]-P,b.y=I[1]-P),P&&(b.width=b.height=2*P),b}pointAttribs(l,h){let f=this.options,m=f.marker,y=l?.options,_=y?.marker||{},b=y?.color,S=l?.color,D=l?.zone?.color,P,I,F=this.color,z,H,G=Or(_.lineWidth,m.lineWidth),X=l?.isNull&&f.nullInteraction?0:1;return F=b||D||S||F,z=_.fillColor||m.fillColor||F,H=_.lineColor||m.lineColor||F,h=h||"normal",P=m.states[h]||{},G=Or((I=_.states&&_.states[h]||{}).lineWidth,P.lineWidth,G+Or(I.lineWidthPlus,P.lineWidthPlus,0)),z=I.fillColor||P.fillColor||z,H=I.lineColor||P.lineColor||H,{stroke:H,"stroke-width":G,fill:z,opacity:X=Or(I.opacity,P.opacity,X)}}destroy(l){let h,f,m=this,y=m.chart,_=/AppleWebKit\/533/.test(iW.navigator.userAgent),b=m.data||[];for(Nr(m,"destroy",{keepEventsForUpdate:l}),this.removeEvents(l),(m.axisTypes||[]).forEach(function(S){f=m[S],f?.series&&(KL(f.series,m),f.isDirty=f.forceRedraw=!0)}),m.legendItem&&m.chart.legend.destroyItem(m),h=b.length;h--;)b[h]?.destroy?.();for(let S of m.zones)oW(S,void 0,!0);Mt.clearTimeout(m.animationTimeout),qE(m,function(S,D){S instanceof la&&!S.survive&&S[_&&D==="group"?"hide":"destroy"]()}),y.hoverSeries===m&&(y.hoverSeries=void 0),KL(y.series,m),y.orderItems("series"),qE(m,function(S,D){l&&D==="hcEvents"||delete m[D]})}applyZones(){let{area:l,chart:h,graph:f,zones:m,points:y,xAxis:_,yAxis:b,zoneAxis:S}=this,{inverted:D,renderer:P}=h,I=this[`${S}Axis`],{isXAxis:F,len:z=0,minPointOffset:H=0}=I||{},G=(f?.strokeWidth()||0)/2+1,X=(q,ie=0,ae=0)=>{D&&(ae=z-ae);let{translated:pe=0,lineClip:ke}=q,Te=ae-pe;ke?.push(["L",ie,Math.abs(Te)<G?ae-G*(Te<=0?-1:1):pe])};if(m.length&&(f||l)&&I&&Ls(I.min)){let q=I.getExtremes().max+H,ie=ke=>{ke.forEach((Te,Ce)=>{(Te[0]==="M"||Te[0]==="L")&&(ke[Ce]=[Te[0],F?z-Te[1]:Te[1],F?Te[2]:z-Te[2]])})};if(m.forEach(ke=>{ke.lineClip=[],ke.translated=YL(I.toPixels(Or(ke.value,q),!0)||0,0,z)}),f&&!this.showLine&&f.hide(),l&&l.hide(),S==="y"&&y.length<_.len)for(let ke of y){let{plotX:Te,plotY:Ce,zone:De}=ke,Ye=De&&m[m.indexOf(De)-1];De&&X(De,Te,Ce),Ye&&X(Ye,Te,Ce)}let ae=[],pe=I.toPixels(I.getExtremes().min-H,!0);m.forEach(ke=>{let Te=ke.lineClip||[],Ce=Math.round(ke.translated||0);_.reversed&&Te.reverse();let{clip:De,simpleClip:Ye}=ke,Qe=0,st=0,Gt=_.len,xn=b.len;F?(Qe=Ce,Gt=pe):(st=Ce,xn=pe);let Sn=[["M",Qe,st],["L",Gt,st],["L",Gt,xn],["L",Qe,xn],["Z"]],Xt=[Sn[0],...Te,Sn[1],Sn[2],...ae,Sn[3],Sn[4]];ae=Te.reverse(),pe=Ce,D&&(ie(Xt),l&&ie(Sn)),De?(De.animate({d:Xt}),Ye?.animate({d:Sn})):(De=ke.clip=P.path(Xt),l&&(Ye=ke.simpleClip=P.path(Sn))),f&&ke.graph?.clip(De),l&&ke.area?.clip(Ye)})}else this.visible&&(f&&f.show(),l&&l.show())}plotGroup(l,h,f,m,y){let _=this[l],b=!_,S={visibility:f,zIndex:m||.1};return vs(this.opacity)&&!this.chart.styledMode&&this.state!=="inactive"&&(S.opacity=this.opacity),_||(this[l]=_=this.chart.renderer.g().add(y)),_.addClass("highcharts-"+h+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(vs(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(_.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),_.attr(S)[b?"attr":"animate"](this.getPlotBox(h)),_}getPlotBox(l){let h=this.xAxis,f=this.yAxis,m=this.chart,y=m.inverted&&!m.polar&&h&&this.invertible&&l==="series";m.inverted&&(h=f,f=this.xAxis);let _={scale:1,translateX:h?h.left:m.plotLeft,translateY:f?f.top:m.plotTop,name:l};Nr(this,"getPlotBox",_);let{scale:b,translateX:S,translateY:D}=_;return{translateX:S,translateY:D,rotation:90*!!y,rotationOriginX:y?b*(h.len-f.len)/2:0,rotationOriginY:y?b*(h.len+f.len)/2:0,scaleX:y?-b:b,scaleY:b}}removeEvents(l){let{eventsToUnbind:h}=this;l||hW(this),h.length&&(h.forEach(f=>{f()}),h.length=0)}render(){let l=this,{chart:h,options:f,hasRendered:m}=l,y=qL(f.animation),_=l.visible?"inherit":"hidden",b=f.zIndex,S=h.seriesGroup,D=l.finishedAnimating?0:y.duration;Nr(this,"render"),l.plotGroup("group","series",_,b,S),l.markerGroup=l.plotGroup("markerGroup","markers",_,b,S),f.clip!==!1&&l.setClip(),D&&l.animate?.(!0),l.drawGraph&&(l.drawGraph(),l.applyZones()),l.visible&&l.drawPoints(),l.drawDataLabels?.(),l.redrawPoints?.(),f.enableMouseTracking&&l.drawTracker?.(),D&&l.animate?.(),m||(D&&y.defer&&(D+=y.defer),l.animationTimeout=tN(()=>{l.afterAnimate()},D||0)),l.isDirty=!1,l.hasRendered=!0,Nr(l,"afterRender")}redraw(){let l=this.isDirty||this.isDirtyData;this.translate(),this.render(),l&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(l,h){let{xAxis:f,yAxis:m}=this,y=this.chart.inverted;return this.searchKDTree({clientX:y?f.len-l.chartY+f.pos:l.chartX-f.pos,plotY:y?m.len-l.chartX+m.pos:l.chartY-m.pos},h,l)}buildKDTree(l){this.buildingKdTree=!0;let h=this,f=h.options,m=f.findNearestPointBy.indexOf("y")>-1?2:1;delete h.kdTree,tN(function(){h.kdTree=function y(_,b,S){let D,P,I=_?.length;if(I)return D=h.kdAxisArray[b%S],_.sort((F,z)=>(F[D]||0)-(z[D]||0)),{point:_[P=Math.floor(I/2)],left:y(_.slice(0,P),b+1,S),right:y(_.slice(P+1),b+1,S)}}(h.getValidPoints(void 0,!h.directTouch,f?.nullInteraction),m,m),h.buildingKdTree=!1},f.kdNow||l?.type==="touchstart"?0:1)}searchKDTree(l,h,f,m,y){let _=this,[b,S]=this.kdAxisArray,D=h?"distX":"dist",P=(_.options.findNearestPointBy||"").indexOf("y")>-1?2:1,I=!!_.isBubble,F=m||((H,G,X)=>{let q=H[X]||0,ie=G[X]||0;return[q===ie&&H.index>G.index||q<ie?H:G,!1]}),z=y||((H,G)=>H<G);if(this.kdTree||this.buildingKdTree||this.buildKDTree(f),this.kdTree)return function H(G,X,q,ie){let ae=X.point,pe=_.kdAxisArray[q%ie],ke=ae,Te=!1;(function(Qe,st){let Gt=Qe[b],xn=st[b],Sn=vs(Gt)&&vs(xn)?Gt-xn:null,Xt=Qe[S],Bt=st[S],ln=vs(Xt)&&vs(Bt)?Xt-Bt:0,Er=I&&st.marker?.radius||0;st.dist=Math.sqrt((Sn&&Sn*Sn||0)+ln*ln)-Er,st.distX=vs(Sn)?Math.abs(Sn)-Er:Number.MAX_VALUE})(G,ae);let Ce=(G[pe]||0)-(ae[pe]||0)+(I&&ae.marker?.radius||0),De=Ce<0?"left":"right",Ye=Ce<0?"right":"left";return X[De]&&([ke,Te]=F(ae,H(G,X[De],q+1,ie),D)),X[Ye]&&z(Math.sqrt(Ce*Ce),ke[D],Te)&&(ke=F(ke,H(G,X[Ye],q+1,ie),D)[0]),ke}(l,this.kdTree,P,P)}pointPlacementToXValue(){let{options:l,xAxis:h}=this,f=l.pointPlacement;return f==="between"&&(f=h.reversed?-.5:.5),Ls(f)?f*(l.pointRange||h.pointRange):0}isPointInside(l){let{chart:h,xAxis:f,yAxis:m}=this,{plotX:y=-1,plotY:_=-1}=l;return _>=0&&_<=(m?m.len:h.plotHeight)&&y>=0&&y<=(f?f.len:h.plotWidth)}drawTracker(){let l=this,h=l.options,f=h.trackByArea,m=[].concat((f?l.areaPath:l.graphPath)||[]),y=l.chart,_=y.pointer,b=y.renderer,S=y.options.tooltip?.snap||0,D=()=>{h.enableMouseTracking&&y.hoverSeries!==l&&l.onMouseOver()},P="rgba(192,192,192,"+(nW?1e-4:.002)+")",I=l.tracker;I?I.attr({d:m}):l.graph&&(l.tracker=I=b.path(m).attr({visibility:l.visible?"inherit":"hidden",zIndex:2}).addClass(f?"highcharts-tracker-area":"highcharts-tracker-line").add(l.group),y.styledMode||I.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:P,fill:f?P:"none","stroke-width":l.graph.strokeWidth()+(f?0:2*S)}),[l.tracker,l.markerGroup,l.dataLabelsGroup].forEach(F=>{F&&(F.addClass("highcharts-tracker").on("mouseover",D).on("mouseout",z=>{_?.onTrackerMouseOut(z)}),h.cursor&&!y.styledMode&&F.css({cursor:h.cursor}),F.on("touchstart",D))})),Nr(this,"afterDrawTracker")}addPoint(l,h,f,m,y){let _,b,S=this.options,{chart:D,data:P,dataTable:I,xAxis:F}=this,z=F?.hasNames&&F.names,H=S.data,G=this.getColumn("x");h=Or(h,!0);let X={series:this};this.pointClass.prototype.applyOptions.apply(X,[l]);let q=X.x;if(b=G.length,this.requireSorting&&q<G[b-1])for(_=!0;b&&G[b-1]>q;)b--;I.setRow(X,b,!0,{addColumns:!1}),z&&X.name&&(z[q]=X.name),H?.splice(b,0,l),(_||this.processedData)&&(this.data.splice(b,0,null),this.processData()),S.legendType==="point"&&this.generatePoints(),f&&(P[0]&&P[0].remove?P[0].remove(!1):([P,H].filter(vs).forEach(ie=>{ie.shift()}),I.deleteRows(0))),y!==!1&&Nr(this,"addPoint",{point:X}),this.isDirty=!0,this.isDirtyData=!0,h&&D.redraw(m)}removePoint(l,h,f){let m=this,{chart:y,data:_,points:b,dataTable:S}=m,D=_[l],P=function(){[b?.length===_.length?b:void 0,_,m.options.data].filter(vs).forEach(I=>{I.splice(l,1)}),S.deleteRows(l),D?.destroy(),m.isDirty=!0,m.isDirtyData=!0,h&&y.redraw()};eW(f,y),h=Or(h,!0),D?D.firePointEvent("remove",null,P):P()}remove(l,h,f,m){let y=this,_=y.chart;function b(){y.destroy(m),_.isDirtyLegend=_.isDirtyBox=!0,_.linkSeries(m),Or(l,!0)&&_.redraw(h)}f!==!1?Nr(y,"remove",null,b):b()}update(l,h){Nr(this,"update",{options:l=aW(l,this.userOptions)});let f=this,m=f.chart,y=f.userOptions,_=f.initialType||f.type,b=m.options.plotOptions,S=Vm[_].prototype,D=f.finishedAnimating&&{animation:!1},P={},I,F,z=fc.keepProps.slice(),H=l.type||y.type||m.options.chart.type,G=!(this.hasDerivedData||H&&H!==this.type||l.keys!==void 0||l.pointStart!==void 0||l.pointInterval!==void 0||l.relativeXValue!==void 0||l.joinBy||l.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some(q=>f.hasOptionChanged(q)));H=H||_,G?(z.push.apply(z,fc.keepPropsForPoints),l.visible!==!1&&z.push("area","graph"),f.parallelArrays.forEach(function(q){z.push(q+"Data")}),l.data&&(l.dataSorting&&zm(f.options.dataSorting,l.dataSorting),this.setData(l.data,!1))):this.dataTable.modified=this.dataTable,l=V0(y,{index:y.index===void 0?f.index:y.index,pointStart:b?.series?.pointStart??y.pointStart??f.getColumn("x")[0]},!G&&{data:f.options.data},l,D),G&&l.data&&(l.data=f.options.data),(z=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(z)).forEach(function(q){z[q]=f[q],delete f[q]});let X=!1;if(Vm[H]){if(X=H!==f.type,f.remove(!1,!1,!1,!0),X)if(m.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(f,Vm[H].prototype);else{let q=Object.hasOwnProperty.call(f,"hcEvents")&&f.hcEvents;for(F in S)f[F]=void 0;zm(f,Vm[H].prototype),q?f.hcEvents=q:delete f.hcEvents}}else Zb(17,!0,m,{missingModuleFor:H});if(z.forEach(function(q){f[q]=z[q]}),f.init(m,l),G&&this.points)for(let q of((I=f.options).visible===!1?(P.graphic=1,P.dataLabel=1):(this.hasMarkerChanged(I,y)&&(P.graphic=1),f.hasDataLabels?.()||(P.dataLabel=1)),this.points))q?.series&&(q.resolveColor(),Object.keys(P).length&&q.destroyElements(P),I.showInLegend===!1&&q.legendItem&&m.legend.destroyItem(q));f.initialType=_,m.linkSeries(),m.setSortedData(),X&&f.linkedSeries.length&&(f.isDirtyData=!0),Nr(this,"afterUpdate"),Or(h,!0)&&m.redraw(!!G&&void 0)}setName(l){this.name=this.options.name=this.userOptions.name=l,this.chart.isDirtyLegend=!0}hasOptionChanged(l){let h=this.chart,f=this.options[l],m=h.options.plotOptions,y=this.userOptions[l],_=Or(m?.[this.type]?.[l],m?.series?.[l]);return y&&!vs(_)?f!==y:f!==Or(_,f)}onMouseOver(){let l=this.chart,h=l.hoverSeries;l.pointer?.setHoverChartIndex(),h&&h!==this&&h.onMouseOut(),this.options.events.mouseOver&&Nr(this,"mouseOver"),this.setState("hover"),l.hoverSeries=this}onMouseOut(){let l=this.options,h=this.chart,f=h.tooltip,m=h.hoverPoint;h.hoverSeries=null,m&&m.onMouseOut(),this&&l.events.mouseOut&&Nr(this,"mouseOut"),f&&!this.stickyTracking&&(!f.shared||this.noSharedTooltip)&&f.hide(),h.series.forEach(function(y){y.setState("",!0)})}setState(l,h){let f=this,m=f.options,y=f.graph,_=m.inactiveOtherPoints,b=m.states,S=Or(b[l||"normal"]&&b[l||"normal"].animation,f.chart.options.chart.animation),D=m.lineWidth,P=m.opacity;if(l=l||"",f.state!==l&&([f.group,f.markerGroup,f.dataLabelsGroup].forEach(function(I){I&&(f.state&&I.removeClass("highcharts-series-"+f.state),l&&I.addClass("highcharts-series-"+l))}),f.state=l,!f.chart.styledMode)){if(b[l]&&b[l].enabled===!1)return;if(l&&(D=b[l].lineWidth||D+(b[l].lineWidthPlus||0),P=Or(b[l].opacity,P)),y&&!y.dashstyle&&Ls(D))for(let I of[y,...this.zones.map(F=>F.graph)])I?.animate({"stroke-width":D},S);_||[f.group,f.markerGroup,f.dataLabelsGroup,f.labelBySeries].forEach(function(I){I&&I.animate({opacity:P},S)})}h&&_&&f.points&&f.setAllPointsToState(l||void 0)}setAllPointsToState(l){this.points.forEach(function(h){h.setState&&h.setState(l)})}setVisible(l,h){let f=this,m=f.chart,y=m.options.chart.ignoreHiddenSeries,_=f.visible;f.visible=l=f.options.visible=f.userOptions.visible=l===void 0?!_:l;let b=l?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(S=>{f[S]?.[b]()}),(m.hoverSeries===f||m.hoverPoint?.series===f)&&f.onMouseOut(),f.legendItem&&m.legend.colorizeItem(f,l),f.isDirty=!0,f.options.stacking&&m.series.forEach(S=>{S.options.stacking&&S.visible&&(S.isDirty=!0)}),f.linkedSeries.forEach(S=>{S.setVisible(l,!1)}),y&&(m.isDirtyBox=!0),Nr(f,b),h!==!1&&m.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(l){this.selected=l=this.options.selected=l===void 0?!this.selected:l,this.checkbox&&(this.checkbox.checked=l),Nr(this,l?"select":"unselect")}shouldShowTooltip(l,h,f={}){return f.series=this,f.visiblePlotOnly=!0,this.chart.isInsidePlot(l,h,f)}drawLegendSymbol(l,h){GL[this.options.legendSymbol||"rectangle"]?.call(this,l,h)}}fc.defaultOptions={lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:M}=this.series.chart;return typeof this.y!="number"?"":M(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"},fc.types=$r.seriesTypes,fc.registerType=$r.registerSeriesType,fc.keepProps=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],fc.keepPropsForPoints=["data","isDirtyData","isDirtyCanvas","points","dataTable","processedData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"],zm(fc.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:ys,requireSorting:!0,sorted:!0}),$r.series=fc;let Ga=fc,{animObject:dW,setAnimation:fW}=Wr,{registerEventOptions:nN}=ha,{composed:pW,marginNames:iN}=K,{distribute:mW}=Ql,{format:gW}=Ni,{addEvent:Kb,createElement:yW,css:vW,defined:XE,discardElement:_W,find:bW,fireEvent:sh,isNumber:rN,merge:Lf,pick:Sl,pushUnique:xW,relativeLength:wW,stableSort:SW,syncTimeout:CW}=Mt;class YE{constructor(l,h){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=l,this.setOptions(h),h.enabled&&(this.render(),nN(this,h),Kb(this.chart,"endResize",function(){this.legend.positionCheckboxes()})),Kb(this.chart,"render",()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())})}setOptions(l){let h=Sl(l.padding,8);this.options=l,this.chart.styledMode||(this.itemStyle=l.itemStyle,this.itemHiddenStyle=Lf(this.itemStyle,l.itemHiddenStyle)),this.itemMarginTop=l.itemMarginTop,this.itemMarginBottom=l.itemMarginBottom,this.padding=h,this.initialItemY=h-5,this.symbolWidth=Sl(l.symbolWidth,16),this.pages=[],this.proximate=l.layout==="proximate"&&!this.chart.inverted,this.baseline=void 0}update(l,h){let f=this.chart;this.setOptions(Lf(!0,this.options,l)),"events"in this.options&&nN(this,this.options),this.destroy(),f.isDirtyLegend=f.isDirtyBox=!0,Sl(h,!0)&&f.redraw(),sh(this,"afterUpdate",{redraw:h})}colorizeItem(l,h){let f=l.color,{area:m,group:y,label:_,line:b,symbol:S}=l.legendItem||{};if((l instanceof Ga||l instanceof ys)&&(l.color=l.options?.legendSymbolColor||f),y?.[h?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:D={}}=this,P=D.color,{fillColor:I,fillOpacity:F,lineColor:z,marker:H}=l.options,G=X=>(!h&&(X.fill&&(X.fill=P),X.stroke&&(X.stroke=P)),X);_?.css(Lf(h?this.itemStyle:D)),b?.attr(G({stroke:z||l.color})),S&&S.attr(G(H&&S.isMarker?l.pointAttribs():{fill:l.color})),m?.attr(G({fill:I||l.color,"fill-opacity":I?1:F??.75}))}l.color=f,sh(this,"afterColorizeItem",{item:l,visible:h})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(l){let{group:h,x:f=0,y:m=0}=l.legendItem||{},y=this.options,_=y.symbolPadding,b=!y.rtl,S=l.checkbox;if(h?.element){let D={translateX:b?f:this.legendWidth-f-2*_-4,translateY:m};h[XE(h.translateY)?"animate":"attr"](D,void 0,()=>{sh(this,"afterPositionItem",{item:l})})}S&&(S.x=f,S.y=m)}destroyItem(l){let h=l.checkbox,f=l.legendItem||{};for(let m of["group","label","line","symbol"])f[m]&&(f[m]=f[m].destroy());h&&_W(h),l.legendItem=void 0}destroy(){for(let l of this.getAllItems())this.destroyItem(l);for(let l of["clipRect","up","down","pager","nav","box","title","group"])this[l]&&(this[l]=this[l].destroy());this.display=null}positionCheckboxes(){let l,h=this.group?.alignAttr,f=this.clipHeight||this.legendHeight,m=this.titleHeight;h&&(l=h.translateY,this.allItems.forEach(function(y){let _,b=y.checkbox;b&&(_=l+m+b.y+(this.scrollOffset||0)+3,vW(b,{left:h.translateX+y.checkboxOffset+b.x-20+"px",top:_+"px",display:this.proximate||_>l-6&&_<l+f-6?"":"none"}))},this))}renderTitle(){let l=this.options,h=this.padding,f=l.title,m,y=0;f.text&&(this.title||(this.title=this.chart.renderer.label(f.text,h-3,h-4,void 0,void 0,void 0,l.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(f.style),this.title.add(this.group)),f.width||this.title.css({width:this.maxLegendWidth+"px"}),y=(m=this.title.getBBox()).height,this.offsetWidth=m.width,this.contentGroup.attr({translateY:y})),this.titleHeight=y}setText(l){let h=this.options;l.legendItem.label.attr({text:h.labelFormat?gW(h.labelFormat,l,this.chart):h.labelFormatter.call(l)})}renderItem(l){let h=l.legendItem=l.legendItem||{},f=this.chart,m=f.renderer,y=this.options,_=y.layout==="horizontal",b=this.symbolWidth,S=y.symbolPadding||0,D=this.itemStyle,P=this.itemHiddenStyle,I=_?Sl(y.itemDistance,20):0,F=!y.rtl,z=!l.series,H=!z&&l.series.drawLegendSymbol?l.series:l,G=H.options,X=!!this.createCheckboxForItem&&G&&G.showCheckbox,q=y.useHTML,ie=l.options.className,ae=h.label,pe=b+S+I+20*!!X;!ae&&(h.group=m.g("legend-item").addClass("highcharts-"+H.type+"-series highcharts-color-"+l.colorIndex+(ie?" "+ie:"")+(z?" highcharts-series-"+l.index:"")).attr({zIndex:1}).add(this.scrollGroup),h.label=ae=m.text("",F?b+S:-S,this.baseline||0,q),f.styledMode||ae.css(Lf(l.visible?D:P)),ae.attr({align:F?"left":"right",zIndex:2}).add(h.group),!this.baseline&&(this.fontMetrics=m.fontMetrics(ae),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,ae.attr("y",this.baseline),this.symbolHeight=Sl(y.symbolHeight,this.fontMetrics.f),y.squareSymbol&&(this.symbolWidth=Sl(y.symbolWidth,Math.max(this.symbolHeight,16)),pe=this.symbolWidth+S+I+20*!!X,F&&ae.attr("x",this.symbolWidth+S))),H.drawLegendSymbol(this,l),this.setItemEvents&&this.setItemEvents(l,ae,q)),X&&!l.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(l),this.colorizeItem(l,l.visible),(f.styledMode||!D.width)&&ae.css({width:(y.itemWidth||this.widthOption||f.spacingBox.width)-pe+"px"}),this.setText(l);let ke=ae.getBBox(),Te=this.fontMetrics?.h||0;l.itemWidth=l.checkboxOffset=y.itemWidth||h.labelWidth||ke.width+pe,this.maxItemWidth=Math.max(this.maxItemWidth,l.itemWidth),this.totalItemWidth+=l.itemWidth,this.itemHeight=l.itemHeight=Math.round(h.labelHeight||(ke.height>1.5*Te?ke.height:Te))}layoutItem(l){let h=this.options,f=this.padding,m=h.layout==="horizontal",y=l.itemHeight,_=this.itemMarginBottom,b=this.itemMarginTop,S=m?Sl(h.itemDistance,20):0,D=this.maxLegendWidth,P=h.alignColumns&&this.totalItemWidth>D?this.maxItemWidth:l.itemWidth,I=l.legendItem||{};m&&this.itemX-f+P>D&&(this.itemX=f,this.lastLineHeight&&(this.itemY+=b+this.lastLineHeight+_),this.lastLineHeight=0),this.lastItemY=b+this.itemY+_,this.lastLineHeight=Math.max(y,this.lastLineHeight),I.x=this.itemX,I.y=this.itemY,m?this.itemX+=P:(this.itemY+=b+y+_,this.lastLineHeight=y),this.offsetWidth=this.widthOption||Math.max((m?this.itemX-f-(l.checkbox?0:S):P)+f,this.offsetWidth)}getAllItems(){let l=[];return this.chart.series.forEach(function(h){let f=h?.options;h&&Sl(f.showInLegend,!XE(f.linkedTo)&&void 0,!0)&&(l=l.concat(h.legendItem?.labels||(f.legendType==="point"?h.data:h)))}),sh(this,"afterGetAllItems",{allItems:l}),l}getAlignment(){let l=this.options;return this.proximate?l.align.charAt(0)+"tv":l.floating?"":l.align.charAt(0)+l.verticalAlign.charAt(0)+l.layout.charAt(0)}adjustMargins(l,h){let f=this.chart,m=this.options,y=this.getAlignment();y&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(_,b){_.test(y)&&!XE(l[b])&&(f[iN[b]]=Math.max(f[iN[b]],f.legend[(b+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][b]*m[b%2?"x":"y"]+Sl(m.margin,12)+h[b]+(f.titleOffset[b]||0)))})}proximatePositions(){let l,h=this.chart,f=[],m=this.options.align==="left";for(let y of(this.allItems.forEach(function(_){let b,S,D=m,P,I;_.yAxis&&(_.xAxis.options.reversed&&(D=!D),_.points&&(b=bW(D?_.points:_.points.slice(0).reverse(),function(F){return rN(F.plotY)})),S=this.itemMarginTop+_.legendItem.label.getBBox().height+this.itemMarginBottom,I=_.yAxis.top-h.plotTop,P=_.visible?(b?b.plotY:_.yAxis.height)+(I-.3*S):I+_.yAxis.height,f.push({target:P,size:S,item:_}))},this),mW(f,h.plotHeight)))l=y.item.legendItem||{},rN(y.pos)&&(l.y=h.plotTop-h.spacing[0]+y.pos)}render(){let l=this.chart,h=l.renderer,f=this.options,m=this.padding,y=this.getAllItems(),_,b,S,D=this.group,P,I=this.box;this.itemX=m,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=wW(f.width,l.spacingBox.width-m),P=l.spacingBox.width-2*m-f.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(P/=2),this.maxLegendWidth=this.widthOption||P,D||(this.group=D=h.g("legend").addClass(f.className||"").attr({zIndex:7}).add(),this.contentGroup=h.g().attr({zIndex:1}).add(D),this.scrollGroup=h.g().add(this.contentGroup)),this.renderTitle(),SW(y,(F,z)=>(F.options?.legendIndex||0)-(z.options?.legendIndex||0)),f.reversed&&y.reverse(),this.allItems=y,this.display=_=!!y.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,y.forEach(this.renderItem,this),y.forEach(this.layoutItem,this),b=(this.widthOption||this.offsetWidth)+m,S=this.lastItemY+this.lastLineHeight+this.titleHeight,S=this.handleOverflow(S)+m,I||(this.box=I=h.rect().addClass("highcharts-legend-box").attr({r:f.borderRadius}).add(D)),l.styledMode||I.attr({stroke:f.borderColor,"stroke-width":f.borderWidth||0,fill:f.backgroundColor||"none"}).shadow(f.shadow),b>0&&S>0&&I[I.placed?"animate":"attr"](I.crisp.call({},{x:0,y:0,width:b,height:S},I.strokeWidth())),D[_?"show":"hide"](),l.styledMode&&D.getStyle("display")==="none"&&(b=S=0),this.legendWidth=b,this.legendHeight=S,_&&this.align(),this.proximate||this.positionItems(),sh(this,"afterRender")}align(l=this.chart.spacingBox){let h=this.chart,f=this.options,m=l.y;/(lth|ct|rth)/.test(this.getAlignment())&&h.titleOffset[0]>0?m+=h.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&h.titleOffset[2]>0&&(m-=h.titleOffset[2]),m!==l.y&&(l=Lf(l,{y:m})),h.hasRendered||(this.group.placed=!1),this.group.align(Lf(f,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":f.verticalAlign}),!0,l)}handleOverflow(l){let h=this,f=this.chart,m=f.renderer,y=this.options,_=y.y,b=y.verticalAlign==="top",S=this.padding,D=y.maxHeight,P=y.navigation,I=Sl(P.animation,!0),F=P.arrowSize||12,z=this.pages,H=this.allItems,G=function(De){typeof De=="number"?Ce.attr({height:De}):Ce&&(h.clipRect=Ce.destroy(),h.contentGroup.clip()),h.contentGroup.div&&(h.contentGroup.div.style.clip=De?"rect("+S+"px,9999px,"+(S+De)+"px,0)":"auto")},X=function(De){return h[De]=m.circle(0,0,1.3*F).translate(F/2,F/2).add(Te),f.styledMode||h[De].attr("fill","rgba(0,0,0,0.0001)"),h[De]},q,ie,ae,pe,ke=f.spacingBox.height+(b?-_:_)-S,Te=this.nav,Ce=this.clipRect;return y.layout!=="horizontal"||y.verticalAlign==="middle"||y.floating||(ke/=2),D&&(ke=Math.min(ke,D)),z.length=0,l&&ke>0&&l>ke&&P.enabled!==!1?(this.clipHeight=q=Math.max(ke-20-this.titleHeight-S,0),this.currentPage=Sl(this.currentPage,1),this.fullHeight=l,H.forEach((De,Ye)=>{let Qe=(ae=De.legendItem||{}).y||0,st=Math.round(ae.label.getBBox().height),Gt=z.length;(!Gt||Qe-z[Gt-1]>q&&(ie||Qe)!==z[Gt-1])&&(z.push(ie||Qe),Gt++),ae.pageIx=Gt-1,ie&&pe&&(pe.pageIx=Gt-1),Ye===H.length-1&&Qe+st-z[Gt-1]>q&&Qe>z[Gt-1]&&(z.push(Qe),ae.pageIx=Gt),Qe!==ie&&(ie=Qe),pe=ae}),Ce||(Ce=h.clipRect=m.clipRect(0,S-2,9999,0),h.contentGroup.clip(Ce)),G(q),Te||(this.nav=Te=m.g().attr({zIndex:1}).add(this.group),this.up=m.symbol("triangle",0,0,F,F).add(Te),X("upTracker").on("click",function(){h.scroll(-1,I)}),this.pager=m.text("",15,10).addClass("highcharts-legend-navigation"),!f.styledMode&&P.style&&this.pager.css(P.style),this.pager.add(Te),this.down=m.symbol("triangle-down",0,0,F,F).add(Te),X("downTracker").on("click",function(){h.scroll(1,I)})),h.scroll(0),l=ke):Te&&(G(),this.nav=Te.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),l}scroll(l,h){let f=this.chart,m=this.pages,y=m.length,_=this.clipHeight,b=this.options.navigation,S=this.pager,D=this.padding,P=this.currentPage+l;P>y&&(P=y),P>0&&(h!==void 0&&fW(h,f),this.nav.attr({translateX:D,translateY:_+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(I){I.attr({class:P===1?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),S.attr({text:P+"/"+y}),[this.down,this.downTracker].forEach(function(I){I.attr({x:18+this.pager.getBBox().width,class:P===y?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),f.styledMode||(this.up.attr({fill:P===1?b.inactiveColor:b.activeColor}),this.upTracker.css({cursor:P===1?"default":"pointer"}),this.down.attr({fill:P===y?b.inactiveColor:b.activeColor}),this.downTracker.css({cursor:P===y?"default":"pointer"})),this.scrollOffset=-m[P-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=P,this.positionCheckboxes(),CW(()=>{sh(this,"afterScroll",{currentPage:P})},dW(Sl(h,f.renderer.globalAnimation,!0)).duration))}setItemEvents(l,h,f){let m=this,y=l.legendItem||{},_=m.chart.renderer.boxWrapper,b=l instanceof ys,S=l instanceof Ga,D="highcharts-legend-"+(b?"point":"series")+"-active",P=m.chart.styledMode,I=f?[h,y.symbol]:[y.group],F=z=>{m.allItems.forEach(H=>{l!==H&&[H].concat(H.linkedSeries||[]).forEach(G=>{G.setState(z,!b)})})};for(let z of I)z&&z.on("mouseover",function(){l.visible&&F("inactive"),l.setState("hover"),l.visible&&_.addClass(D),P||h.css(m.options.itemHoverStyle)}).on("mouseout",function(){m.chart.styledMode||h.css(Lf(l.visible?m.itemStyle:m.itemHiddenStyle)),F(""),_.removeClass(D),l.setState()}).on("click",function(H){let G=function(){l.setVisible&&l.setVisible(),F(l.visible?"inactive":"")};_.removeClass(D),sh(m,"itemClick",{browserEvent:H,legendItem:l},G),b?l.firePointEvent("legendItemClick",{browserEvent:H}):S&&sh(l,"legendItemClick",{browserEvent:H})})}createCheckboxForItem(l){l.checkbox=yW("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:l.selected,defaultChecked:l.selected},this.options.itemCheckboxStyle,this.chart.container),Kb(l.checkbox,"click",function(h){let f=h.target;sh(l.series||l,"checkboxClick",{checked:f.checked,item:l},function(){l.select()})})}}(function(M){M.compose=function(l){xW(pW,"Core.Legend")&&Kb(l,"beforeMargins",function(){this.legend=new M(this,this.options.legend)})}})(YE||(YE={}));let sN=YE,{animate:ZE,animObject:MW,setAnimation:KE}=Wr,{defaultOptions:QE}=_n,{numberFormat:EW}=Ni,{registerEventOptions:oN}=ha,{charts:Nf,doc:z0,marginNames:aN,svg:TW,win:lN}=K,{seriesTypes:JE}=$r,{addEvent:eT,attr:cN,createElement:tT,css:pc,defined:md,diffObjects:uN,discardElement:AW,erase:DW,error:nT,extend:gd,find:iT,fireEvent:zi,getAlignFactor:IW,getStyle:rT,isArray:RW,isNumber:Um,isObject:PW,isString:Qb,merge:su,objectEach:sT,pick:oo,pInt:kW,relativeLength:hN,removeEvent:dN,splat:Jb,syncTimeout:LW,uniqueKey:NW}=Mt;class yd{static chart(l,h,f){return new yd(l,h,f)}constructor(l,h,f){this.sharedClips={};let m=[...arguments];(Qb(l)||l.nodeName)&&(this.renderTo=m.shift()),this.init(m[0],m[1])}setZoomOptions(){let l=this.options.chart,h=l.zooming;this.zooming=Mn(Je({},h),{type:oo(l.zoomType,h.type),key:oo(l.zoomKey,h.key),pinchType:oo(l.pinchType,h.pinchType),singleTouch:oo(l.zoomBySingleTouch,h.singleTouch,!1),resetButton:su(h.resetButton,l.resetZoomButton)})}init(l,h){zi(this,"init",{args:arguments},function(){let f=su(QE,l),m=f.chart,y=this.renderTo||m.renderTo;this.userOptions=gd({},l),(this.renderTo=Qb(y)?z0.getElementById(y):y)||nT(13,!0,this),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=h,this.isResizing=0,this.options=f,this.axes=[],this.series=[],this.locale=f.lang.locale??this.renderTo.closest("[lang]")?.lang,this.time=new fn(gd(f.time||{},{locale:this.locale}),f.lang),f.time=this.time.options,this.numberFormatter=(m.numberFormatter||EW).bind(this),this.styledMode=m.styledMode,this.hasCartesianSeries=m.showAxes,this.index=Nf.length,Nf.push(this),K.chartCount++,oN(this,m),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),zi(this,"afterInit"),this.firstRender()})}initSeries(l){let h=this.options.chart,f=l.type||h.type,m=JE[f];m||nT(17,!0,this,{missingModuleFor:f});let y=new m;return typeof y.init=="function"&&y.init(this,l),y}setSortedData(){this.getSeriesOrderByLinks().forEach(function(l){l.points||l.data||!l.enabledDataSorting||l.setData(l.options.data,!1)})}getSeriesOrderByLinks(){return this.series.concat().sort(function(l,h){return l.linkedSeries.length||h.linkedSeries.length?h.linkedSeries.length-l.linkedSeries.length:0})}orderItems(l,h=0){let f=this[l],m=this.options[l]=Jb(this.options[l]).slice(),y=this.userOptions[l]=this.userOptions[l]?Jb(this.userOptions[l]).slice():[];if(this.hasRendered&&(m.splice(h),y.splice(h)),f)for(let _=h,b=f.length;_<b;++_){let S=f[_];S&&(S.index=_,S instanceof Ga&&(S.name=S.getName()),S.options.isInternal||(m[_]=S.options,y[_]=S.userOptions))}}getClipBox(l,h){let f=this.inverted,{xAxis:m,yAxis:y}=l||{},{x:_,y:b,width:S,height:D}=su(this.clipBox);return l&&(m&&m.len!==this.plotSizeX&&(S=m.len),y&&y.len!==this.plotSizeY&&(D=y.len),f&&!l.invertible&&([S,D]=[D,S])),h&&(_+=(f?y:m)?.pos??this.plotLeft,b+=(f?m:y)?.pos??this.plotTop),{x:_,y:b,width:S,height:D}}isInsidePlot(l,h,f={}){let{inverted:m,plotBox:y,plotLeft:_,plotTop:b,scrollablePlotBox:S}=this,{scrollLeft:D=0,scrollTop:P=0}=f.visiblePlotOnly&&this.scrollablePlotArea?.scrollingContainer||{},I=f.series,F=f.visiblePlotOnly&&S||y,z=f.inverted?h:l,H=f.inverted?l:h,G={x:z,y:H,isInsidePlot:!0,options:f};if(!f.ignoreX){let X=I&&(m&&!this.polar?I.yAxis:I.xAxis)||{pos:_,len:1/0},q=f.paneCoordinates?X.pos+z:_+z;q>=Math.max(D+_,X.pos)&&q<=Math.min(D+_+F.width,X.pos+X.len)||(G.isInsidePlot=!1)}if(!f.ignoreY&&G.isInsidePlot){let X=!m&&f.axis&&!f.axis.isXAxis&&f.axis||I&&(m?I.xAxis:I.yAxis)||{pos:b,len:1/0},q=f.paneCoordinates?X.pos+H:b+H;q>=Math.max(P+b,X.pos)&&q<=Math.min(P+b+F.height,X.pos+X.len)||(G.isInsidePlot=!1)}return zi(this,"afterIsInsidePlot",G),G.isInsidePlot}redraw(l){zi(this,"beforeRedraw");let h=this.hasCartesianSeries?this.axes:this.colorAxis||[],f=this.series,m=this.pointer,y=this.legend,_=this.userOptions.legend,b=this.renderer,S=b.isHidden(),D=[],P,I,F,z=this.isDirtyBox,H=this.isDirtyLegend,G;for(b.rootFontSize=b.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),KE(!!this.hasRendered&&l,this),S&&this.temporaryDisplay(),this.layOutTitles(!1),F=f.length;F--;)if(((G=f[F]).options.stacking||G.options.centerInCategory)&&(I=!0,G.isDirty)){P=!0;break}if(P)for(F=f.length;F--;)(G=f[F]).options.stacking&&(G.isDirty=!0);f.forEach(function(X){X.isDirty&&(X.options.legendType==="point"?(typeof X.updateTotals=="function"&&X.updateTotals(),H=!0):_&&(_.labelFormatter||_.labelFormat)&&(H=!0)),X.isDirtyData&&zi(X,"updatedData")}),H&&y&&y.options.enabled&&(y.render(),this.isDirtyLegend=!1),I&&this.getStacks(),h.forEach(function(X){X.updateNames(),X.setScale()}),this.getMargins(),h.forEach(function(X){X.isDirty&&(z=!0)}),h.forEach(function(X){let q=X.min+","+X.max;X.extKey!==q&&(X.extKey=q,D.push(function(){zi(X,"afterSetExtremes",gd(X.eventArgs,X.getExtremes())),delete X.eventArgs})),(z||I)&&X.redraw()}),z&&this.drawChartBox(),zi(this,"predraw"),f.forEach(function(X){(z||X.isDirty)&&X.visible&&X.redraw(),X.isDirtyData=!1}),m&&m.reset(!0),b.draw(),zi(this,"redraw"),zi(this,"render"),S&&this.temporaryDisplay(!0),D.forEach(function(X){X.call()})}get(l){let h=this.series;function f(y){return y.id===l||y.options&&y.options.id===l}let m=iT(this.axes,f)||iT(this.series,f);for(let y=0;!m&&y<h.length;y++)m=iT(h[y].points||[],f);return m}createAxes(){let l=this.userOptions;for(let h of(zi(this,"createAxes"),["xAxis","yAxis"]))for(let f of l[h]=Jb(l[h]||{}))new Dr(this,f,h);zi(this,"afterCreateAxes")}getSelectedPoints(){return this.series.reduce((l,h)=>(h.getPointsCollection().forEach(f=>{oo(f.selectedStaging,f.selected)&&l.push(f)}),l),[])}getSelectedSeries(){return this.series.filter(l=>l.selected)}setTitle(l,h,f){this.applyDescription("title",l),this.applyDescription("subtitle",h),this.applyDescription("caption",void 0),this.layOutTitles(f)}applyDescription(l,h){let f=this,m=this.options[l]=su(this.options[l],h),y=this[l];y&&h&&(this[l]=y=y.destroy()),m&&!y&&((y=this.renderer.text(m.text,0,0,m.useHTML).attr({align:m.align,class:"highcharts-"+l,zIndex:m.zIndex||4}).css({textOverflow:"ellipsis",whiteSpace:"nowrap"}).add()).update=function(_,b){f.applyDescription(l,_),f.layOutTitles(b)},this.styledMode||y.css(gd(l==="title"?{fontSize:this.options.isStock?"1em":"1.2em"}:{},m.style)),y.textPxLength=y.getBBox().width,y.css({whiteSpace:m.style?.whiteSpace}),this[l]=y)}layOutTitles(l=!0){let h=[0,0,0],{options:f,renderer:m,spacingBox:y}=this;["title","subtitle","caption"].forEach(b=>{let S=this[b],D=this.options[b],P=su(y),I=S?.textPxLength||0;if(S&&D){zi(this,"layOutTitle",{alignTo:P,key:b,textPxLength:I});let F=m.fontMetrics(S),z=F.b,H=F.h,G=D.verticalAlign||"top",X=G==="top",q=X&&D.minScale||1,ie=b==="title"?X?-3:0:X?h[0]+2:0,ae=Math.min(P.width/I,1),pe=Math.max(q,ae),ke=su({y:G==="bottom"?z:ie+z},{align:b==="title"?ae<q?"left":"center":this.title?.alignValue},D),Te=(D.width||(ae>q?this.chartWidth:P.width)/pe)+"px";S.alignValue!==ke.align&&(S.placed=!1);let Ce=Math.round(S.css({width:Te}).getBBox(D.useHTML).height);if(ke.height=Ce,S.align(ke,!1,P).attr({align:ke.align,scaleX:pe,scaleY:pe,"transform-origin":`${P.x+I*pe*IW(ke.align)} ${H}`}),!D.floating){let De=Ce*(Ce<1.2*H?1:pe);G==="top"?h[0]=Math.ceil(h[0]+De):G==="bottom"&&(h[2]=Math.ceil(h[2]+De))}}},this),h[0]&&(f.title?.verticalAlign||"top")==="top"&&(h[0]+=f.title?.margin||0),h[2]&&f.caption?.verticalAlign==="bottom"&&(h[2]+=f.caption?.margin||0);let _=!this.titleOffset||this.titleOffset.join(",")!==h.join(",");this.titleOffset=h,zi(this,"afterLayOutTitles"),!this.isDirtyBox&&_&&(this.isDirtyBox=this.isDirtyLegend=_,this.hasRendered&&l&&this.isDirtyBox&&this.redraw())}getContainerBox(){let l=[].map.call(this.renderTo.children,f=>{if(f!==this.container){let m=f.style.display;return f.style.display="none",[f,m]}}),h={width:rT(this.renderTo,"width",!0)||0,height:rT(this.renderTo,"height",!0)||0};return l.filter(Boolean).forEach(([f,m])=>{f.style.display=m}),h}getChartSize(){let l=this.options.chart,h=l.width,f=l.height,m=this.getContainerBox(),y=m.height<=1||!this.renderTo.parentElement?.style.height&&this.renderTo.style.height==="100%";this.chartWidth=Math.max(0,h||m.width||600),this.chartHeight=Math.max(0,hN(f,this.chartWidth)||(y?400:m.height)),this.containerBox=m}temporaryDisplay(l){let h=this.renderTo,f;if(l)for(;h?.style;)h.hcOrigStyle&&(pc(h,h.hcOrigStyle),delete h.hcOrigStyle),h.hcOrigDetached&&(z0.body.removeChild(h),h.hcOrigDetached=!1),h=h.parentNode;else for(;h?.style&&(z0.body.contains(h)||h.parentNode||(h.hcOrigDetached=!0,z0.body.appendChild(h)),(rT(h,"display",!1)==="none"||h.hcOricDetached)&&(h.hcOrigStyle={display:h.style.display,height:h.style.height,overflow:h.style.overflow},f={display:"block",overflow:"hidden"},h!==this.renderTo&&(f.height=0),pc(h,f),h.offsetWidth||h.style.setProperty("display","block","important")),(h=h.parentNode)!==z0.body););}setClassName(l){this.container.className="highcharts-container "+(l||"")}getContainer(){let l,h=this.options,f=h.chart,m="data-highcharts-chart",y=NW(),_=this.renderTo,b=kW(cN(_,m));Um(b)&&Nf[b]&&Nf[b].hasRendered&&Nf[b].destroy(),cN(_,m,this.index),_.innerHTML=Wt.emptyHTML,f.skipClone||_.offsetWidth||this.temporaryDisplay(),this.getChartSize();let S=this.chartHeight,D=this.chartWidth;pc(_,{overflow:"hidden"}),this.styledMode||(l=gd({position:"relative",overflow:"hidden",width:D+"px",height:S+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none",padding:"0px"},f.style||{}));let P=tT("div",{id:y},l,_);this.container=P,this.getChartSize(),D!==this.chartWidth&&(D=this.chartWidth,this.styledMode||pc(P,{width:oo(f.style?.width,D+"px")})),this.containerBox=this.getContainerBox(),this._cursor=P.style.cursor;let I=f.renderer||!TW?lr.getRendererType(f.renderer):Lo;if(this.renderer=new I(P,D,S,void 0,f.forExport,h.exporting?.allowHTML,this.styledMode),KE(void 0,this),this.setClassName(f.className),this.styledMode)for(let F in h.defs)this.renderer.definition(h.defs[F]);else this.renderer.setStyle(f.style);this.renderer.chartIndex=this.index,zi(this,"afterGetContainer")}getMargins(l){let{spacing:h,margin:f,titleOffset:m}=this;this.resetMargins(),m[0]&&!md(f[0])&&(this.plotTop=Math.max(this.plotTop,m[0]+h[0])),m[2]&&!md(f[2])&&(this.marginBottom=Math.max(this.marginBottom,m[2]+h[2])),this.legend?.display&&this.legend.adjustMargins(f,h),zi(this,"getMargins"),l||this.getAxisMargins()}getAxisMargins(){let l=this,h=l.axisOffset=[0,0,0,0],f=l.colorAxis,m=l.margin,y=function(_){_.forEach(function(b){b.visible&&b.getOffset()})};l.hasCartesianSeries?y(l.axes):f?.length&&y(f),aN.forEach(function(_,b){md(m[b])||(l[_]+=h[b])}),l.setChartSize()}getOptions(){return uN(this.userOptions,QE)}reflow(l){let h=this,f=h.containerBox,m=h.getContainerBox();delete h.pointer?.chartPosition,!h.exporting?.isPrinting&&!h.isResizing&&f&&m.width&&((m.width!==f.width||m.height!==f.height)&&(Mt.clearTimeout(h.reflowTimeout),h.reflowTimeout=LW(function(){h.container&&h.setSize(void 0,void 0,!1)},100*!!l)),h.containerBox=m)}setReflow(){let l=this,h=f=>{l.options?.chart.reflow&&l.hasLoaded&&l.reflow(f)};if(typeof ResizeObserver=="function")new ResizeObserver(h).observe(l.renderTo);else{let f=eT(lN,"resize",h);eT(this,"destroy",f)}}setSize(l,h,f){let m=this,y=m.renderer;m.isResizing+=1,KE(f,m);let _=y.globalAnimation;m.oldChartHeight=m.chartHeight,m.oldChartWidth=m.chartWidth,l!==void 0&&(m.options.chart.width=l),h!==void 0&&(m.options.chart.height=h),m.getChartSize();let{chartWidth:b,chartHeight:S,scrollablePixelsX:D=0,scrollablePixelsY:P=0}=m;(m.isDirtyBox||b!==m.oldChartWidth||S!==m.oldChartHeight)&&(m.styledMode||(_?ZE:pc)(m.container,{width:`${b+D}px`,height:`${S+P}px`},_),m.setChartSize(!0),y.setSize(b,S,_),m.axes.forEach(function(I){I.isDirty=!0,I.setScale()}),m.isDirtyLegend=!0,m.isDirtyBox=!0,m.layOutTitles(),m.getMargins(),m.redraw(_),m.oldChartHeight=void 0,zi(m,"resize"),setTimeout(()=>{m&&zi(m,"endResize")},MW(_).duration)),m.isResizing-=1}setChartSize(l){let h,f,m,y,{chartHeight:_,chartWidth:b,inverted:S,spacing:D,renderer:P}=this,I=this.clipOffset,F=Math[S?"floor":"round"];this.plotLeft=h=Math.round(this.plotLeft),this.plotTop=f=Math.round(this.plotTop),this.plotWidth=m=Math.max(0,Math.round(b-h-(this.marginRight??0))),this.plotHeight=y=Math.max(0,Math.round(_-f-(this.marginBottom??0))),this.plotSizeX=S?y:m,this.plotSizeY=S?m:y,this.spacingBox=P.spacingBox={x:D[3],y:D[0],width:b-D[3]-D[1],height:_-D[0]-D[2]},this.plotBox=P.plotBox={x:h,y:f,width:m,height:y},I&&(this.clipBox={x:F(I[3]),y:F(I[0]),width:F(this.plotSizeX-I[1]-I[3]),height:F(this.plotSizeY-I[0]-I[2])}),l||(this.axes.forEach(function(z){z.setAxisSize(),z.setAxisTranslation()}),P.alignElements()),zi(this,"afterSetChartSize",{skipAxes:l})}resetMargins(){zi(this,"resetMargins");let l=this,h=l.options.chart,f=h.plotBorderWidth||0,m=Math.round(f)/2;["margin","spacing"].forEach(function(y){let _=h[y],b=PW(_)?_:[_,_,_,_];["Top","Right","Bottom","Left"].forEach(function(S,D){l[y][D]=oo(h[y+S],b[D])})}),aN.forEach(function(y,_){l[y]=oo(l.margin[_],l.spacing[_])}),l.axisOffset=[0,0,0,0],l.clipOffset=[m,m,m,m],l.plotBorderWidth=f}drawChartBox(){let l=this.options.chart,h=this.renderer,f=this.chartWidth,m=this.chartHeight,y=this.styledMode,_=this.plotBGImage,b=l.backgroundColor,S=l.plotBackgroundColor,D=l.plotBackgroundImage,P=this.plotLeft,I=this.plotTop,F=this.plotWidth,z=this.plotHeight,H=this.plotBox,G=this.clipRect,X=this.clipBox,q=this.chartBackground,ie=this.plotBackground,ae=this.plotBorder,pe,ke,Te,Ce="animate";q||(this.chartBackground=q=h.rect().addClass("highcharts-background").add(),Ce="attr"),y?pe=ke=q.strokeWidth():(ke=(pe=l.borderWidth||0)+8*!!l.shadow,Te={fill:b||"none"},(pe||q["stroke-width"])&&(Te.stroke=l.borderColor,Te["stroke-width"]=pe),q.attr(Te).shadow(l.shadow)),q[Ce]({x:ke/2,y:ke/2,width:f-ke-pe%2,height:m-ke-pe%2,r:l.borderRadius}),Ce="animate",ie||(Ce="attr",this.plotBackground=ie=h.rect().addClass("highcharts-plot-background").add()),ie[Ce](H),!y&&(ie.attr({fill:S||"none"}).shadow(l.plotShadow),D&&(_?(D!==_.attr("href")&&_.attr("href",D),_.animate(H)):this.plotBGImage=h.image(D,P,I,F,z).add())),G?G.animate({width:X.width,height:X.height}):this.clipRect=h.clipRect(X),Ce="animate",ae||(Ce="attr",this.plotBorder=ae=h.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),y||ae.attr({stroke:l.plotBorderColor,"stroke-width":l.plotBorderWidth||0,fill:"none"}),ae[Ce](ae.crisp(H,-ae.strokeWidth())),this.isDirtyBox=!1,zi(this,"afterDrawChartBox")}propFromSeries(){let l,h,f,m=this,y=m.options.chart,_=m.options.series;["inverted","angular","polar"].forEach(function(b){for(h=JE[y.type],f=y[b]||h&&h.prototype[b],l=_?.length;!f&&l--;)(h=JE[_[l].type])&&h.prototype[b]&&(f=!0);m[b]=f})}linkSeries(l){let h=this,f=h.series;f.forEach(function(m){m.linkedSeries.length=0}),f.forEach(function(m){let{linkedTo:y}=m.options;if(Qb(y)){let _;(_=y===":previous"?h.series[m.index-1]:h.get(y))&&_.linkedParent!==m&&(_.linkedSeries.push(m),m.linkedParent=_,_.enabledDataSorting&&m.setDataSortingOptions(),m.visible=oo(m.options.visible,_.options.visible,m.visible))}}),zi(this,"afterLinkSeries",{isUpdating:l})}renderSeries(){this.series.forEach(function(l){l.translate(),l.render()})}render(){let l=this.axes,h=this.colorAxis,f=this.renderer,m=this.options.chart.axisLayoutRuns||2,y=P=>{P.forEach(I=>{I.visible&&I.render()})},_=0,b=!0,S,D=0;for(let P of(this.setTitle(),zi(this,"beforeMargins"),this.getStacks?.(),this.getMargins(!0),this.setChartSize(),l)){let{options:I}=P,{labels:F}=I;if(this.hasCartesianSeries&&P.horiz&&P.visible&&F.enabled&&P.series.length&&P.coll!=="colorAxis"&&!this.polar){_=I.tickLength,P.createGroups();let z=new Ps(P,0,"",!0),H=z.createLabel("x",F);if(z.destroy(),H&&oo(F.reserveSpace,!Um(I.crossing))&&(_=H.getBBox().height+F.distance+Math.max(I.offset||0,0)),_){H?.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-_,0);(b||S||m>1)&&D<m;){let P=this.plotWidth,I=this.plotHeight;for(let F of l)D===0?F.setScale():(F.horiz&&b||!F.horiz&&S)&&F.setTickInterval(!0);D===0?this.getAxisMargins():this.getMargins(),b=P/this.plotWidth>(D?1:1.1),S=I/this.plotHeight>(D?1:1.05),D++}this.drawChartBox(),this.hasCartesianSeries?y(l):h?.length&&y(h),this.seriesGroup||(this.seriesGroup=f.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.dataLabelsGroup||(this.dataLabelsGroup=f.g("datalabels-group").attr({zIndex:6}).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(l){let h=this,f=su(!0,this.options.credits,l);f.enabled&&!this.credits&&(this.credits=this.renderer.text(f.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){f.href&&(lN.location.href=f.href)}).attr({align:f.position.align,zIndex:8}),h.styledMode||this.credits.css(f.style),this.credits.add().align(f.position),this.credits.update=function(m){h.credits=h.credits.destroy(),h.addCredits(m)})}destroy(){let l,h=this,f=h.axes,m=h.series,y=h.container,_=y?.parentNode;for(zi(h,"destroy"),h.renderer.forExport?DW(Nf,h):Nf[h.index]=void 0,K.chartCount--,h.renderTo.removeAttribute("data-highcharts-chart"),dN(h),l=f.length;l--;)f[l]=f[l].destroy();for(this.scroller?.destroy?.(),l=m.length;l--;)m[l]=m[l].destroy();["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach(b=>{h[b]=h[b]?.destroy?.()}),y&&(y.innerHTML=Wt.emptyHTML,dN(y),_&&AW(y)),sT(h,function(b,S){delete h[S]})}firstRender(){let l=this,h=l.options;l.getContainer(),l.resetMargins(),l.setChartSize(),l.propFromSeries(),l.createAxes();let f=RW(h.series)?h.series:[];h.series=[],f.forEach(function(m){l.initSeries(m)}),l.linkSeries(),l.setSortedData(),zi(l,"beforeRender"),l.render(),l.pointer?.getChartPosition(),l.renderer.imgCount||l.hasLoaded||l.onload(),l.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach(function(l){l&&this.index!==void 0&&l.apply(this,[this])},this),zi(this,"load"),zi(this,"render"),md(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:l,title:h}=this;l&&!this.accessibility&&(this.renderer.boxWrapper.attr({role:"img","aria-label":(h?.element.textContent||"").replace(/</g,"&lt;")}),l.accessibility&&l.accessibility.enabled===!1||nT('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(l,h,f){let m,y=this;return l&&(h=oo(h,!0),zi(y,"addSeries",{options:l},function(){m=y.initSeries(l),y.isDirtyLegend=!0,y.linkSeries(),m.enabledDataSorting&&m.setData(l.data,!1),zi(y,"afterAddSeries",{series:m}),h&&y.redraw(f)})),m}addAxis(l,h,f,m){return this.createAxis(h?"xAxis":"yAxis",{axis:l,redraw:f,animation:m})}addColorAxis(l,h,f){return this.createAxis("colorAxis",{axis:l,redraw:h,animation:f})}createAxis(l,h){let f=new Dr(this,h.axis,l);return oo(h.redraw,!0)&&this.redraw(h.animation),f}showLoading(l){let h=this,f=h.options,m=f.loading,y=function(){_&&pc(_,{left:h.plotLeft+"px",top:h.plotTop+"px",width:h.plotWidth+"px",height:h.plotHeight+"px"})},_=h.loadingDiv,b=h.loadingSpan;_||(h.loadingDiv=_=tT("div",{className:"highcharts-loading highcharts-loading-hidden"},null,h.container)),b||(h.loadingSpan=b=tT("span",{className:"highcharts-loading-inner"},null,_),eT(h,"redraw",y)),_.className="highcharts-loading",Wt.setElementHTML(b,oo(l,f.lang.loading,"")),!h.styledMode&&(pc(_,gd(m.style,{zIndex:10})),pc(b,m.labelStyle),h.loadingShown||(pc(_,{opacity:0,display:""}),ZE(_,{opacity:m.style.opacity||.5},{duration:m.showDuration||0}))),h.loadingShown=!0,y()}hideLoading(){let l=this.options,h=this.loadingDiv;h&&(h.className="highcharts-loading highcharts-loading-hidden",this.styledMode||ZE(h,{opacity:0},{duration:l.loading.hideDuration||100,complete:function(){pc(h,{display:"none"})}})),this.loadingShown=!1}update(l,h,f,m){let y,_,b,S=this,D={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},P=l.isResponsiveOptions,I=[];zi(S,"update",{options:l}),P||S.setResponsive(!1,!0),l=uN(l,S.options),S.userOptions=su(S.userOptions,l);let F=l.chart;F&&(su(!0,S.options.chart,F),this.setZoomOptions(),"className"in F&&S.setClassName(F.className),("inverted"in F||"polar"in F||"type"in F)&&(S.propFromSeries(),y=!0),"alignTicks"in F&&(y=!0),"events"in F&&oN(this,F),sT(F,function(G,X){S.propsRequireUpdateSeries.indexOf("chart."+X)!==-1&&(_=!0),S.propsRequireDirtyBox.indexOf(X)!==-1&&(S.isDirtyBox=!0),S.propsRequireReflow.indexOf(X)!==-1&&(S.isDirtyBox=!0,P||(b=!0))}),!S.styledMode&&F.style&&S.renderer.setStyle(S.options.chart.style||{})),!S.styledMode&&l.colors&&(this.options.colors=l.colors),sT(l,function(G,X){S[X]&&typeof S[X].update=="function"?S[X].update(G,!1):typeof S[D[X]]=="function"?S[D[X]](G):X!=="colors"&&S.collectionsWithUpdate.indexOf(X)===-1&&su(!0,S.options[X],l[X]),X!=="chart"&&S.propsRequireUpdateSeries.indexOf(X)!==-1&&(_=!0)}),this.collectionsWithUpdate.forEach(function(G){l[G]&&(Jb(l[G]).forEach(function(X,q){let ie,ae=md(X.id);ae&&(ie=S.get(X.id)),!ie&&S[G]&&(ie=S[G][oo(X.index,q)])&&(ae&&md(ie.options.id)||ie.options.isInternal)&&(ie=void 0),ie&&ie.coll===G&&(ie.update(X,!1),f&&(ie.touched=!0)),!ie&&f&&S.collectionsWithInit[G]&&(S.collectionsWithInit[G][0].apply(S,[X].concat(S.collectionsWithInit[G][1]||[]).concat([!1])).touched=!0)}),f&&S[G].forEach(function(X){X.touched||X.options.isInternal?delete X.touched:I.push(X)}))}),I.forEach(function(G){G.chart&&G.remove&&G.remove(!1)}),y&&S.axes.forEach(function(G){G.update({},!1)}),_&&S.getSeriesOrderByLinks().forEach(function(G){G.chart&&G.update({},!1)},this);let z=F?.width,H=F&&(Qb(F.height)?hN(F.height,z||S.chartWidth):F.height);b||Um(z)&&z!==S.chartWidth||Um(H)&&H!==S.chartHeight?S.setSize(z,H,m):oo(h,!0)&&S.redraw(m),zi(S,"afterUpdate",{options:l,redraw:h,animation:m})}setSubtitle(l,h){this.applyDescription("subtitle",l),this.layOutTitles(h)}setCaption(l,h){this.applyDescription("caption",l),this.layOutTitles(h)}showResetZoom(){let l=this,h=QE.lang,f=l.zooming.resetButton,m=f.theme,y=f.relativeTo==="chart"||f.relativeTo==="spacingBox"?null:"plotBox";function _(){l.zoomOut()}zi(this,"beforeShowResetZoom",null,function(){l.resetZoomButton=l.renderer.button(h.resetZoom,null,null,_,m).attr({align:f.position.align,title:h.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(f.position,!1,y)}),zi(this,"afterShowResetZoom")}zoomOut(){zi(this,"selection",{resetSelection:!0},()=>this.transform({reset:!0,trigger:"zoom"}))}pan(l,h){let f=this,m=typeof h=="object"?h:{enabled:h,type:"x"},y=m.type,_=y&&f[{x:"xAxis",xy:"axes",y:"yAxis"}[y]].filter(S=>S.options.panningEnabled&&!S.options.isInternal),b=f.options.chart;b?.panning&&(b.panning=m),zi(this,"pan",{originalEvent:l},()=>{f.transform({axes:_,event:l,to:{x:l.chartX-(f.mouseDownX||0),y:l.chartY-(f.mouseDownY||0)},trigger:"pan"}),pc(f.container,{cursor:"move"})})}transform(l){let{axes:h=this.axes,event:f,from:m={},reset:y,selection:_,to:b={},trigger:S}=l,{inverted:D,time:P}=this;this.hoverPoints?.forEach(H=>H.setState()),zi(this,"transform",l);let I=l.hasZoomed||!1,F,z;for(let H of h){let{horiz:G,len:X,minPointOffset:q=0,options:ie,reversed:ae}=H,pe=G?"width":"height",ke=G?"x":"y",Te=oo(b[pe],H.len),Ce=oo(m[pe],H.len),De=10>Math.abs(Te)?1:Te/Ce,Ye=(m[ke]||0)+Ce/2-H.pos,Qe=Ye-((b[ke]??H.pos)+Te/2-H.pos)/De,st=ae&&!D||!ae&&D?-1:1;if(!y&&(Ye<0||Ye>H.len))continue;let Gt=H.chart.polar||H.isOrdinal?0:q*st||0,xn=H.toValue(Qe,!0),Sn=H.toValue(Qe+X/De,!0),Xt=xn+Gt,Bt=Sn-Gt,ln=H.allExtremes;if(_&&_[H.coll].push({axis:H,min:Math.min(xn,Sn),max:Math.max(xn,Sn)}),Xt>Bt&&([Xt,Bt]=[Bt,Xt]),De===1&&!y&&H.coll==="yAxis"&&!ln){for(let jo of H.series){let ou=jo.getExtremes(jo.getProcessedData(!0).modified.getColumn("y")||[],!0);ln??(ln={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),Um(ou.dataMin)&&Um(ou.dataMax)&&(ln.dataMin=Math.min(ou.dataMin,ln.dataMin),ln.dataMax=Math.max(ou.dataMax,ln.dataMax))}H.allExtremes=ln}let{dataMin:Er,dataMax:Ki,min:Uo,max:Gn}=gd(H.getExtremes(),ln||{}),Vn=P.parse(ie.min),qi=P.parse(ie.max),bi=Er??Vn,pr=Ki??qi,mr=Bt-Xt,Qi=H.categories?0:Math.min(mr,pr-bi),Fr=bi-Qi*(md(Vn)?0:ie.minPadding),Ho=pr+Qi*(md(qi)?0:ie.maxPadding),fa=H.allowZoomOutside||De===1||S!=="zoom"&&De>1,bd=Math.min(Vn??Fr,Fr,fa?Uo:Fr),mc=Math.max(qi??Ho,Ho,fa?Gn:Ho);(!H.isOrdinal||De!==1||y)&&(Xt<bd&&(Xt=bd,De>=1&&(Bt=Xt+mr)),Bt>mc&&(Bt=mc,De>=1&&(Xt=Bt-mr)),(y||H.series.length&&(Xt!==Uo||Bt!==Gn)&&Xt>=bd&&Bt<=mc)&&(_?_[H.coll].push({axis:H,min:Xt,max:Bt}):(H.isPanning=S!=="zoom",H.isPanning&&(z=!0),H.setExtremes(y?void 0:Xt,y?void 0:Bt,!1,!1,{move:Qe,trigger:S,scale:De}),!y&&(Xt>bd||Bt<mc)&&S!=="mousewheel"&&(F=!0)),I=!0),this.hasCartesianSeries||y||S==="mousewheel"||(F=!0),f&&(this[G?"mouseDownX":"mouseDownY"]=f[G?"chartX":"chartY"]))}return I&&(_?zi(this,"selection",_,()=>{delete l.selection,l.trigger="zoom",this.transform(l)}):(!F||z||this.resetZoomButton?!F&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()):this.showResetZoom(),this.redraw(S==="zoom"&&(this.options.chart.animation??this.pointCount<100)))),I}}gd(yd.prototype,{callbacks:[],collectionsWithInit:{xAxis:[yd.prototype.addAxis,[!0]],yAxis:[yd.prototype.addAxis,[!1]],series:[yd.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]});let{stop:OW}=Wr,{composed:FW}=K,{addEvent:vd,createElement:ex,css:oT,defined:aT,erase:BW,merge:fN,pushUnique:pN}=Mt;function VW(){let M=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!M&&(this.scrollablePlotArea=M=new gN(this)),M?.applyFixed()}function mN(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}let gN=(()=>{class M{static compose(h,f,m){pN(FW,this.compose)&&(vd(h,"afterInit",mN),vd(f,"afterSetChartSize",y=>this.afterSetSize(y.target,y)),vd(f,"render",VW),vd(m,"show",mN))}static afterSetSize(h,f){let m,y,_,{minWidth:b,minHeight:S}=h.options.chart.scrollablePlotArea||{},{clipBox:D,plotBox:P,inverted:I,renderer:F}=h;if(!F.forExport&&(b?(h.scrollablePixelsX=m=Math.max(0,b-h.chartWidth),m&&(h.scrollablePlotBox=fN(h.plotBox),P.width=h.plotWidth+=m,D[I?"height":"width"]+=m,_=!0)):S&&(h.scrollablePixelsY=y=Math.max(0,S-h.chartHeight),aT(y)&&(h.scrollablePlotBox=fN(h.plotBox),P.height=h.plotHeight+=y,D[I?"width":"height"]+=y,_=!1)),aT(_)&&!f.skipAxes))for(let z of h.axes)(z.horiz===_||h.hasParallelCoordinates&&z.coll==="yAxis")&&(z.setAxisSize(),z.setAxisTranslation())}constructor(h){let f,m=h.options.chart,y=lr.getRendererType(),_=m.scrollablePlotArea||{},b=this.moveFixedElements.bind(this),S={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};h.scrollablePixelsX&&(S.overflowX="auto"),h.scrollablePixelsY&&(S.overflowY="auto"),this.chart=h;let D=this.parentDiv=ex("div",{className:"highcharts-scrolling-parent"},{position:"relative"},h.renderTo),P=this.scrollingContainer=ex("div",{className:"highcharts-scrolling"},S,D),I=this.innerContainer=ex("div",{className:"highcharts-inner-container"},void 0,P),F=this.fixedDiv=ex("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(m.style?.zIndex||0)+2,top:0},void 0,!0),z=this.fixedRenderer=new y(F,h.chartWidth,h.chartHeight,m.style);this.mask=z.path().attr({fill:m.backgroundColor||"#fff","fill-opacity":_.opacity??.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),P.parentNode.insertBefore(F,P),oT(h.renderTo,{overflow:"visible"}),vd(h,"afterShowResetZoom",b),vd(h,"afterApplyDrilldown",b),vd(h,"afterLayOutTitles",b),vd(P,"scroll",()=>{let{pointer:H,hoverPoint:G}=h;H&&(delete H.chartPosition,G&&(f=G),H.runPointActions(void 0,f,!0))}),I.appendChild(h.container)}applyFixed(){let{chart:h,fixedRenderer:f,isDirty:m,scrollingContainer:y}=this,{axisOffset:_,chartWidth:b,chartHeight:S,container:D,plotHeight:P,plotLeft:I,plotTop:F,plotWidth:z,scrollablePixelsX:H=0,scrollablePixelsY:G=0}=h,{scrollPositionX:X=0,scrollPositionY:q=0}=h.options.chart.scrollablePlotArea||{},ie=b+H,ae=S+G;f.setSize(b,S),(m??!0)&&(this.isDirty=!1,this.moveFixedElements()),OW(h.container),oT(D,{width:`${ie}px`,height:`${ae}px`}),h.renderer.boxWrapper.attr({width:ie,height:ae,viewBox:[0,0,ie,ae].join(" ")}),h.chartBackground?.attr({width:ie,height:ae}),oT(y,{width:`${b}px`,height:`${S}px`}),aT(m)||(y.scrollLeft=H*X,y.scrollTop=G*q);let pe=F-_[0]-1,ke=I-_[3]-1,Te=F+P+_[2]+1,Ce=I+z+_[1]+1,De=I+z-H,Ye=F+P-G,Qe=[["M",0,0]];H?Qe=[["M",0,pe],["L",I-1,pe],["L",I-1,Te],["L",0,Te],["Z"],["M",De,pe],["L",b,pe],["L",b,Te],["L",De,Te],["Z"]]:G&&(Qe=[["M",ke,0],["L",ke,F-1],["L",Ce,F-1],["L",Ce,0],["Z"],["M",ke,Ye],["L",ke,S],["L",Ce,S],["L",Ce,Ye],["Z"]]),h.redrawTrigger!=="adjustHeight"&&this.mask.attr({d:Qe})}moveFixedElements(){let h,{container:f,inverted:m,scrollablePixelsX:y,scrollablePixelsY:_}=this.chart,b=this.fixedRenderer,S=M.fixedSelectors;if(y&&!m?h=".highcharts-yaxis":y&&m||_&&!m?h=".highcharts-xaxis":_&&m&&(h=".highcharts-yaxis"),h&&!(this.chart.hasParallelCoordinates&&h===".highcharts-yaxis"))for(let D of[`${h}:not(.highcharts-radial-axis)`,`${h}-labels:not(.highcharts-radial-axis-labels)`])pN(S,D);else for(let D of[".highcharts-xaxis",".highcharts-yaxis"])for(let P of[`${D}:not(.highcharts-radial-axis)`,`${D}-labels:not(.highcharts-radial-axis-labels)`])BW(S,P);for(let D of S)[].forEach.call(f.querySelectorAll(D),P=>{(P.namespaceURI===b.SVG_NS?b.box:b.box.parentNode).appendChild(P),P.style.pointerEvents="auto"})}}return M.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"],M})(),{format:zW}=Ni,{series:UW}=$r,{destroyObjectProperties:HW,fireEvent:yN,getAlignFactor:lT,isNumber:cT,pick:U0}=Mt,vN=class{constructor(M,l,h,f,m){let y=M.chart.inverted,_=M.reversed;this.axis=M;let b=this.isNegative=!!h!=!!_;this.options=l=l||{},this.x=f,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=m,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:l.align||(y?b?"left":"right":"center"),verticalAlign:l.verticalAlign||(y?"middle":b?"bottom":"top"),y:l.y,x:l.x},this.textAlign=l.textAlign||(y?b?"right":"left":"center")}destroy(){HW(this,this.axis)}render(M){let l=this.axis.chart,h=this.options,f=h.format,m=f?zW(f,this,l):h.formatter.call(this);if(this.label)this.label.attr({text:m,visibility:"hidden"});else{this.label=l.renderer.label(m,null,void 0,h.shape,void 0,void 0,h.useHTML,!1,"stack-labels");let y={r:h.borderRadius||0,text:m,padding:U0(h.padding,5),visibility:"hidden"};l.styledMode||(y.fill=h.backgroundColor,y.stroke=h.borderColor,y["stroke-width"]=h.borderWidth,this.label.css(h.style||{})),this.label.attr(y),this.label.added||this.label.add(M)}this.label.labelrank=l.plotSizeY,yN(this,"afterRender")}setOffset(M,l,h,f,m,y){let{alignOptions:_,axis:b,label:S,options:D,textAlign:P}=this,I=b.chart,F=this.getStackBox({xOffset:M,width:l,boxBottom:h,boxTop:f,defaultX:m,xAxis:y}),{verticalAlign:z}=_;if(S&&F){let H=S.getBBox(void 0,0),G=S.padding,X=U0(D.overflow,"justify")==="justify",q;_.x=D.x||0,_.y=D.y||0;let{x:ie,y:ae}=this.adjustStackPosition({labelBox:H,verticalAlign:z,textAlign:P});F.x-=ie,F.y-=ae,S.align(_,!1,F),(q=I.isInsidePlot(S.alignAttr.x+_.x+ie,S.alignAttr.y+_.y+ae))||(X=!1),X&&UW.prototype.justifyDataLabel.call(b,S,_,S.alignAttr,H,F),S.attr({x:S.alignAttr.x,y:S.alignAttr.y,rotation:D.rotation,rotationOriginX:H.width*lT(D.textAlign||"center"),rotationOriginY:H.height/2}),U0(!X&&D.crop,!0)&&(q=cT(S.x)&&cT(S.y)&&I.isInsidePlot(S.x-G+(S.width||0),S.y)&&I.isInsidePlot(S.x+G,S.y)),S[q?"show":"hide"]()}yN(this,"afterSetOffset",{xOffset:M,width:l})}adjustStackPosition({labelBox:M,verticalAlign:l,textAlign:h}){return{x:M.width/2+M.width/2*(2*lT(h)-1),y:M.height/2*2*(1-lT(l))}}getStackBox(M){let l=this.axis,h=l.chart,{boxTop:f,defaultX:m,xOffset:y,width:_,boxBottom:b}=M,S=l.stacking.usePercentage?100:U0(f,this.total,0),D=l.toPixels(S),P=M.xAxis||h.xAxis[0],I=U0(m,P.translate(this.x))+y,F=Math.abs(D-l.toPixels(b||cT(l.min)&&l.logarithmic&&l.logarithmic.lin2log(l.min)||0)),z=h.inverted,H=this.isNegative;return z?{x:(H?D:D-F)-h.plotLeft,y:P.height-I-_+P.top-h.plotTop,width:F,height:_}:{x:I+P.transB-h.plotLeft,y:(H?D-F:D)-h.plotTop,width:_,height:F}}},{getDeferredAnimation:jW}=Wr,{series:{prototype:WW}}=$r,{addEvent:_N,correctFloat:H0,defined:bN,destroyObjectProperties:GW,fireEvent:$W,isNumber:uT,objectEach:Of,pick:hT}=Mt;function qW(){let M=this.inverted;this.axes.forEach(l=>{l.stacking?.stacks&&l.hasVisibleSeries&&(l.stacking.oldStacks=l.stacking.stacks)}),this.series.forEach(l=>{let h=l.xAxis?.options||{};l.options.stacking&&l.reserveSpace()&&(l.stackKey=[l.type,hT(l.options.stack,""),M?h.top:h.left,M?h.height:h.width].join(","))})}function XW(){let M=this.stacking;if(M){let l=M.stacks;Of(l,(h,f)=>{GW(h),delete l[f]}),M.stackTotalGroup?.destroy()}}function YW(){this.stacking||(this.stacking=new tG(this))}function ZW(M,l,h,f){return!bN(M)||M.x!==l||f&&M.stackKey!==f?M={x:l,index:0,key:f,stackKey:f}:M.index++,M.key=[h,l,M.index].join(","),M}function KW(){let M,l=this,h=l.yAxis,f=l.stackKey||"",m=h.stacking.stacks,y=l.getColumn("x",!0),_=l.options.stacking,b=l[_+"Stacker"];b&&[f,"-"+f].forEach(S=>{let D=y.length,P,I,F;for(;D--;)P=y[D],M=l.getStackIndicator(M,P,l.index,S),I=m[S]?.[P],(F=I?.points[M.key||""])&&b.call(l,F,I,D)})}function QW(M,l,h){let f=l.total?100/l.total:0;M[0]=H0(M[0]*f),M[1]=H0(M[1]*f),this.stackedYData[h]=M[1]}function JW(M){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&this.chart.series.length>1?WW.setStackedPoints.call(this,M,"group"):M.stacking.resetStacks())}function eG(M,l){let h,f,m,y,_,b,S,D=l||this.options.stacking;if(!D||!this.reserveSpace()||({group:"xAxis"}[D]||"yAxis")!==M.coll)return;let P=this.getColumn("x",!0),I=this.getColumn(this.pointValKey||"y",!0),F=[],z=I.length,H=this.options,G=H.threshold||0,X=H.startFromThreshold?G:0,q=H.stack,ie=l?`${this.type},${D}`:this.stackKey||"",ae="-"+ie,pe=this.negStacks,ke=M.stacking,Te=ke.stacks,Ce=ke.oldStacks;for(ke.stacksTouched+=1,S=0;S<z;S++){let De=P[S]||0,Ye=I[S],Qe=uT(Ye)&&Ye||0;b=(h=this.getStackIndicator(h,De,this.index)).key||"",Te[_=(f=pe&&Qe<(X?0:G))?ae:ie]||(Te[_]={}),Te[_][De]||(Ce[_]?.[De]?(Te[_][De]=Ce[_][De],Te[_][De].total=null):Te[_][De]=new vN(M,M.options.stackLabels,!!f,De,q)),m=Te[_][De],Ye!==null?(m.points[b]=m.points[this.index]=[hT(m.cumulative,X)],bN(m.cumulative)||(m.base=b),m.touched=ke.stacksTouched,h.index>0&&this.singleStacks===!1&&(m.points[b][0]=m.points[this.index+","+De+",0"][0])):(delete m.points[b],delete m.points[this.index]);let st=m.total||0;D==="percent"?(y=f?ie:ae,st=pe&&Te[y]?.[De]?(y=Te[y][De]).total=Math.max(y.total||0,st)+Math.abs(Qe):H0(st+Math.abs(Qe))):D==="group"?uT(Ye)&&st++:st=H0(st+Qe),D==="group"?m.cumulative=(st||1)-1:m.cumulative=H0(hT(m.cumulative,X)+Qe),m.total=st,Ye!==null&&(m.points[b].push(m.cumulative),F[S]=m.cumulative,m.hasValidPoints=!0)}D==="percent"&&(ke.usePercentage=!0),D!=="group"&&(this.stackedYData=F),ke.oldStacks={}}class tG{constructor(l){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=l}buildStacks(){let l,h,f=this.axis,m=f.series,y=f.coll==="xAxis",_=f.options.reversedStacks,b=m.length;for(this.resetStacks(),this.usePercentage=!1,h=b;h--;)l=m[_?h:b-h-1],y&&l.setGroupedPoints(f),l.setStackedPoints(f);if(!y)for(h=0;h<b;h++)m[h].modifyStacks();$W(f,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,Of(this.stacks,l=>{Of(l,h=>{h.cumulative=h.total})}))}resetStacks(){Of(this.stacks,l=>{Of(l,(h,f)=>{uT(h.touched)&&h.touched<this.stacksTouched?(h.destroy(),delete l[f]):(h.total=null,h.cumulative=null)})})}renderStackTotals(){let l=this.axis,h=l.chart,f=h.renderer,m=this.stacks,y=jW(h,l.options.stackLabels?.animation||!1),_=this.stackTotalGroup=this.stackTotalGroup||f.g("stack-labels").attr({zIndex:6,opacity:0}).add();_.translate(h.plotLeft,h.plotTop),Of(m,b=>{Of(b,S=>{S.render(_)})}),_.animate({opacity:1},y)}}(C||(C={})).compose=function(M,l,h){let f=l.prototype,m=h.prototype;f.getStacks||(_N(M,"init",YW),_N(M,"destroy",XW),f.getStacks=qW,m.getStackIndicator=ZW,m.modifyStacks=KW,m.percentStacker=QW,m.setGroupedPoints=JW,m.setStackedPoints=eG)};let nG=C,{defined:iG,merge:xN,isObject:rG}=Mt;class wN extends Ga{drawGraph(){let l=this.options,h=(this.gappedPath||this.getGraphPath).call(this),f=this.chart.styledMode;[this,...this.zones].forEach((m,y)=>{let _,b=m.graph,S=b?"animate":"attr",D=m.dashStyle||l.dashStyle;b?(b.endX=this.preventGraphAnimation?null:h.xMap,b.animate({d:h})):h.length&&(m.graph=b=this.chart.renderer.path(h).addClass("highcharts-graph"+(y?` highcharts-zone-graph-${y-1} `:" ")+(y&&m.className||"")).attr({zIndex:1}).add(this.group)),b&&!f&&(_={stroke:!y&&l.lineColor||m.color||this.color||"#cccccc","stroke-width":l.lineWidth||0,fill:this.fillGraph&&this.color||"none"},D?_.dashstyle=D:l.linecap!=="square"&&(_["stroke-linecap"]=_["stroke-linejoin"]="round"),b[S](_).shadow(l.shadow&&xN({filterUnits:"userSpaceOnUse"},rG(l.shadow)?l.shadow:{}))),b&&(b.startX=h.xMap,b.isArea=h.isArea)})}getGraphPath(l,h,f){let m=this,y=m.options,_=[],b=[],S,D=y.step,P=(l=l||m.points).reversed;return P&&l.reverse(),(D={right:1,center:2}[D]||D&&3)&&P&&(D=4-D),(l=this.getValidPoints(l,!1,y.nullInteraction||!(y.connectNulls&&!h&&!f))).forEach(function(I,F){let z,H=I.plotX,G=I.plotY,X=l[F-1],q=I.isNull||typeof G!="number";(I.leftCliff||X?.rightCliff)&&!f&&(S=!0),q&&!iG(h)&&F>0?S=!y.connectNulls:q&&!h?S=!0:(F===0||S?z=[["M",I.plotX,I.plotY]]:m.getPointSpline?z=[m.getPointSpline(l,I,F)]:D?(z=D===1?[["L",X.plotX,G]]:D===2?[["L",(X.plotX+H)/2,X.plotY],["L",(X.plotX+H)/2,G]]:[["L",H,X.plotY]]).push(["L",H,G]):z=[["L",H,G]],b.push(I.x),D&&(b.push(I.x),D===2&&b.push(I.x)),_.push.apply(_,z),S=!1)}),_.xMap=b,m.graphPath=_,_}}wN.defaultOptions=xN(Ga.defaultOptions,{legendSymbol:"lineMarker"}),$r.registerSeriesType("line",wN);let{seriesTypes:{line:dT}}=$r,{extend:sG,merge:oG,objectEach:aG,pick:tx}=Mt;class fT extends dT{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:l,options:h}=this;[this,...this.zones].forEach((f,m)=>{let y={},_=f.fillColor||h.fillColor,b=f.area,S=b?"animate":"attr";b?(b.endX=this.preventGraphAnimation?null:l.xMap,b.animate({d:l})):(y.zIndex=0,(b=f.area=this.chart.renderer.path(l).addClass("highcharts-area"+(m?` highcharts-zone-area-${m-1} `:" ")+(m&&f.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(y.fill=_||f.color||this.color,y["fill-opacity"]=_?1:h.fillOpacity??.75,b.css({pointerEvents:this.stickyTracking?"none":"auto"})),b[S](y),b.startX=l.xMap,b.shiftUnit=h.step?2:1})}getGraphPath(l){let h,f,m,y=dT.prototype.getGraphPath,_=this.options,b=_.stacking,S=this.yAxis,D=[],P=[],I=this.index,F=S.stacking.stacks[this.stackKey],z=_.threshold,H=Math.round(S.getThreshold(_.threshold)),G=tx(_.connectNulls,b==="percent"),X=function(Te,Ce,De){let Ye=l[Te],Qe=b&&F[Ye.x].points[I],st=Ye[De+"Null"]||0,Gt=Ye[De+"Cliff"]||0,xn,Sn,Xt=!0;Gt||st?(xn=(st?Qe[0]:Qe[1])+Gt,Sn=Qe[0]+Gt,Xt=!!st):!b&&l[Ce]&&l[Ce].isNull&&(xn=Sn=z),xn!==void 0&&(P.push({plotX:h,plotY:xn===null?H:S.getThreshold(xn),isNull:Xt,isCliff:!0}),D.push({plotX:h,plotY:Sn===null?H:S.getThreshold(Sn),doCurve:!1}))};l=l||this.points,b&&(l=this.getStackPoints(l));for(let Te=0,Ce=l.length;Te<Ce;++Te)b||(l[Te].leftCliff=l[Te].rightCliff=l[Te].leftNull=l[Te].rightNull=void 0),f=l[Te].isNull,h=tx(l[Te].rectPlotX,l[Te].plotX),m=b?tx(l[Te].yBottom,H):H,(!f||G)&&(G||X(Te,Te-1,"left"),f&&!b&&G||(P.push(l[Te]),D.push({x:Te,plotX:h,plotY:m})),G||X(Te,Te+1,"right"));let q=y.call(this,P,!0,!0);D.reversed=!0;let ie=y.call(this,D,!0,!0),ae=ie[0];ae&&ae[0]==="M"&&(ie[0]=["L",ae[1],ae[2]]);let pe=q.concat(ie);pe.length&&pe.push(["Z"]);let ke=y.call(this,P,!1,G);return this.chart.series.length>1&&b&&P.some(Te=>Te.isCliff)&&(pe.hasStackedCliffs=ke.hasStackedCliffs=!0),pe.xMap=q.xMap,this.areaPath=pe,ke}getStackPoints(l){let h=this,f=[],m=[],y=this.xAxis,_=this.yAxis,b=_.stacking.stacks[this.stackKey],S={},D=_.series,P=D.length,I=_.options.reversedStacks?1:-1,F=D.indexOf(h);if(l=l||this.points,this.options.stacking){for(let H=0;H<l.length;H++)l[H].leftNull=l[H].rightNull=void 0,S[l[H].x]=l[H];aG(b,function(H,G){H.total!==null&&m.push(G)}),m.sort(function(H,G){return H-G});let z=D.map(H=>H.visible);m.forEach(function(H,G){let X=0,q,ie;if(S[H]&&!S[H].isNull)f.push(S[H]),[-1,1].forEach(function(ae){let pe=ae===1?"rightNull":"leftNull",ke=b[m[G+ae]],Te=0;if(ke){let Ce=F;for(;Ce>=0&&Ce<P;){let De=D[Ce].index;!(q=ke.points[De])&&(De===h.index?S[H][pe]=!0:z[Ce]&&(ie=b[H].points[De])&&(Te-=ie[1]-ie[0])),Ce+=I}}S[H][ae===1?"rightCliff":"leftCliff"]=Te});else{let ae=F;for(;ae>=0&&ae<P;){let pe=D[ae].index;if(q=b[H].points[pe]){X=q[1];break}ae+=I}X=tx(X,0),X=_.translate(X,0,1,0,1),f.push({isNull:!0,plotX:y.translate(H,0,0,0,1),x:H,plotY:X,yBottom:X})}})}return f}}fT.defaultOptions=oG(dT.defaultOptions,{threshold:0,legendSymbol:"areaMarker"}),sG(fT.prototype,{singleStacks:!1}),$r.registerSeriesType("area",fT);let{line:SN}=$r.seriesTypes,{merge:lG,pick:nx}=Mt;class pT extends SN{getPointSpline(l,h,f){let m,y,_,b,S=h.plotX||0,D=h.plotY||0,P=l[f-1],I=l[f+1];function F(H){return H&&!H.isNull&&H.doCurve!==!1&&!h.isCliff}if(F(P)&&F(I)){let H=P.plotX||0,G=P.plotY||0,X=I.plotX||0,q=I.plotY||0,ie=0;m=(1.5*S+H)/2.5,y=(1.5*D+G)/2.5,_=(1.5*S+X)/2.5,b=(1.5*D+q)/2.5,_!==m&&(ie=(b-y)*(_-S)/(_-m)+D-b),y+=ie,b+=ie,y>G&&y>D?(y=Math.max(G,D),b=2*D-y):y<G&&y<D&&(y=Math.min(G,D),b=2*D-y),b>q&&b>D?(b=Math.max(q,D),y=2*D-b):b<q&&b<D&&(b=Math.min(q,D),y=2*D-b),h.rightContX=_,h.rightContY=b,h.controlPoints={low:[m,y],high:[_,b]}}let z=["C",nx(P.rightContX,P.plotX,0),nx(P.rightContY,P.plotY,0),nx(m,S,0),nx(y,D,0),S,D];return P.rightContX=P.rightContY=void 0,z}}pT.defaultOptions=lG(SN.defaultOptions),$r.registerSeriesType("spline",pT);let CN=pT,{area:cG,area:{prototype:mT}}=$r.seriesTypes,{extend:uG,merge:hG}=Mt;class gT extends CN{}gT.defaultOptions=hG(CN.defaultOptions,cG.defaultOptions),uG(gT.prototype,{getGraphPath:mT.getGraphPath,getStackPoints:mT.getStackPoints,drawGraph:mT.drawGraph}),$r.registerSeriesType("areaspline",gT);let{animObject:dG}=Wr,{parse:fG}=An,{noop:pG}=K,{clamp:ix,crisp:rx,defined:MN,extend:EN,fireEvent:TN,isArray:AN,isNumber:sx,merge:yT,pick:j0,objectEach:mG}=Mt;class ox extends Ga{animate(l){let h,f,m=this,y=this.yAxis,_=y.pos,b=y.reversed,S=m.options,{clipOffset:D,inverted:P}=this.chart,I={},F=P?"translateX":"translateY";l&&D?(I.scaleY=.001,f=ix(y.toPixels(S.threshold||0),_,_+y.len),P?I.translateX=(f+=b?-Math.floor(D[0]):Math.ceil(D[2]))-y.len:I.translateY=f+=b?Math.ceil(D[0]):-Math.floor(D[2]),m.clipBox&&m.setClip(),m.group.attr(I)):(h=Number(m.group.attr(F)),m.group.animate({scaleY:1},EN(dG(m.options.animation),{step:function(z,H){m.group&&(I[F]=h+H.pos*(_-h),m.group.attr(I))}})))}init(l,h){super.init.apply(this,arguments);let f=this;(l=f.chart).hasRendered&&l.series.forEach(function(m){m.type===f.type&&(m.isDirty=!0)})}getColumnMetrics(){let l=this,h=l.options,f=l.xAxis,m=l.yAxis,y=f.options.reversedStacks,_=f.reversed&&!y||!f.reversed&&y,b={},S,D=0;h.grouping===!1?D=1:l.chart.series.forEach(function(G){let X,q=G.yAxis,ie=G.options;G.type===l.type&&G.reserveSpace()&&m.len===q.len&&m.pos===q.pos&&(ie.stacking&&ie.stacking!=="group"?(b[S=G.stackKey]===void 0&&(b[S]=D++),X=b[S]):ie.grouping!==!1&&(X=D++),G.columnIndex=X)});let P=Math.min(Math.abs(f.transA)*(!f.brokenAxis?.hasBreaks&&f.ordinal?.slope||h.pointRange||f.closestPointRange||f.tickInterval||1),f.len),I=P*h.groupPadding,F=(P-2*I)/(D||1),z=Math.min(h.maxPointWidth||f.len,j0(h.pointWidth,F*(1-2*h.pointPadding))),H=(l.columnIndex||0)+ +!!_;return l.columnMetrics={width:z,offset:(F-z)/2+(I+H*F-P/2)*(_?-1:1),paddedWidth:F,columnCount:D},l.columnMetrics}crispCol(l,h,f,m){let y=this.borderWidth,_=this.chart.inverted;return m=rx(h+m,y,_)-(h=rx(h,y,_)),this.options.crisp&&(f=rx(l+f,y)-(l=rx(l,y))),{x:l,y:h,width:f,height:m}}adjustForMissingColumns(l,h,f,m){if(!f.isNull&&m.columnCount>1){let y=this.xAxis.series.filter(D=>D.visible).map(D=>D.index),_=0,b=0;mG(this.xAxis.stacking?.stacks,D=>{let P=typeof f.x=="number"?D[f.x.toString()]?.points:void 0,I=P?.[this.index],F={};if(P&&AN(I)){let z=this.index,H=Object.keys(P).filter(G=>!G.match(",")&&P[G]&&P[G].length>1).map(parseFloat).filter(G=>y.indexOf(G)!==-1).filter(G=>{let X=this.chart.series[G].options,q=X.stacking&&X.stack;if(MN(q)){if(sx(F[q]))return z===G&&(z=F[q]),!1;F[q]=G}return!0}).sort((G,X)=>X-G);_=H.indexOf(z),b=H.length}}),_=this.xAxis.reversed?b-1-_:_;let S=(b-1)*m.paddedWidth+h;l=(f.plotX||0)+S/2-h-_*m.paddedWidth}return l}translate(){let l=this,h=l.chart,f=l.options,m=l.dense=l.closestPointRange*l.xAxis.transA<2,y=l.borderWidth=j0(f.borderWidth,+!m),_=l.xAxis,b=l.yAxis,S=f.threshold,D=j0(f.minPointLength,5),P=l.getColumnMetrics(),I=P.width,F=l.pointXOffset=P.offset,z=l.dataMin,H=l.dataMax,G=l.translatedThreshold=b.getThreshold(S),X=l.barW=Math.max(I,1+2*y);f.pointPadding&&f.crisp&&(X=Math.ceil(X)),Ga.prototype.translate.apply(l),l.points.forEach(function(q){let ie=j0(q.yBottom,G),ae=999+Math.abs(ie),pe=q.plotX||0,ke=ix(q.plotY,-ae,b.len+ae),Te,Ce=Math.min(ke,ie),De=Math.max(ke,ie)-Ce,Ye=I,Qe=pe+F,st=X;D&&Math.abs(De)<D&&(De=D,Te=!b.reversed&&!q.negative||b.reversed&&q.negative,sx(S)&&sx(H)&&q.y===S&&H<=S&&(b.min||0)<S&&(z!==H||(b.max||0)<=S)&&(Te=!Te,q.negative=!q.negative),Ce=Math.abs(Ce-G)>D?ie-D:G-(Te?D:0)),MN(q.options.pointWidth)&&(Qe-=Math.round(((Ye=st=Math.ceil(q.options.pointWidth))-I)/2)),f.centerInCategory&&(Qe=l.adjustForMissingColumns(Qe,Ye,q,P)),q.barX=Qe,q.pointWidth=Ye,q.tooltipPos=h.inverted?[ix(b.len+b.pos-h.plotLeft-ke,b.pos-h.plotLeft,b.len+b.pos-h.plotLeft),_.len+_.pos-h.plotTop-Qe-st/2,De]:[_.left-h.plotLeft+Qe+st/2,ix(ke+b.pos-h.plotTop,b.pos-h.plotTop,b.len+b.pos-h.plotTop),De],q.shapeType=l.pointClass.prototype.shapeType||"roundedRect",q.shapeArgs=l.crispCol(Qe,Ce,st,q.isNull?0:De)}),TN(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(l,h){let f=this.options,m=this.pointAttrToOptions||{},y=m.stroke||"borderColor",_=m["stroke-width"]||"borderWidth",b,S,D,P=l&&l.color||this.color,I=l&&l[y]||f[y]||P,F=l&&l.options.dashStyle||f.dashStyle,z=l&&l[_]||f[_]||this[_]||0,H=l?.isNull&&f.nullInteraction?0:l?.opacity??f.opacity??1;l&&this.zones.length&&(S=l.getZone(),P=l.options.color||S&&(S.color||l.nonZonedColor)||this.color,S&&(I=S.borderColor||I,F=S.dashStyle||F,z=S.borderWidth||z)),h&&l&&(D=(b=yT(f.states[h],l.options.states&&l.options.states[h]||{})).brightness,P=b.color||D!==void 0&&fG(P).brighten(b.brightness).get()||P,I=b[y]||I,z=b[_]||z,F=b.dashStyle||F,H=j0(b.opacity,H));let G={fill:P,stroke:I,"stroke-width":z,opacity:H};return F&&(G.dashstyle=F),G}drawPoints(l=this.points){let h,f=this,m=this.chart,y=f.options,_=y.nullInteraction,b=m.renderer,S=y.animationLimit||250;l.forEach(function(D){let P=D.plotY,I=D.graphic,F=!!I,z=I&&m.pointCount<S?"animate":"attr";sx(P)&&(D.y!==null||_)?(h=D.shapeArgs,I&&D.hasNewShapeType()&&(I=I.destroy()),f.enabledDataSorting&&(D.startXPos=f.xAxis.reversed?-(h&&h.width||0):f.xAxis.width),!I&&(D.graphic=I=b[D.shapeType](h).add(D.group||f.group),I&&f.enabledDataSorting&&m.hasRendered&&m.pointCount<S&&(I.attr({x:D.startXPos}),F=!0,z="animate")),I&&F&&I[z](yT(h)),m.styledMode||I[z](f.pointAttribs(D,D.selected&&"select")).shadow(D.allowShadow!==!1&&y.shadow),I&&(I.addClass(D.getClassName(),!0),I.attr({visibility:D.visible?"inherit":"hidden"}))):I&&(D.graphic=I.destroy())})}drawTracker(l=this.points){let h,f=this,m=f.chart,y=m.pointer,_=function(b){y?.normalize(b);let S=y?.getPointFromEvent(b);y&&S&&f.options.enableMouseTracking&&(m.isInsidePlot(b.chartX-m.plotLeft,b.chartY-m.plotTop,{visiblePlotOnly:!0})||y?.inClass(b.target,"highcharts-data-label"))&&(y.isDirectTouch=!0,S.onMouseOver(b))};l.forEach(function(b){h=AN(b.dataLabels)?b.dataLabels:b.dataLabel?[b.dataLabel]:[],b.graphic&&(b.graphic.element.point=b),h.forEach(function(S){(S.div||S.element).point=b})}),f._hasTracking||(f.trackerGroups.forEach(function(b){f[b]&&(f[b].addClass("highcharts-tracker").on("mouseover",_).on("mouseout",function(S){y?.onTrackerMouseOut(S)}).on("touchstart",_),!m.styledMode&&f.options.cursor&&f[b].css({cursor:f.options.cursor}))}),f._hasTracking=!0),TN(this,"afterDrawTracker")}remove(){let l=this,h=l.chart;h.hasRendered&&h.series.forEach(function(f){f.type===l.type&&(f.isDirty=!0)}),Ga.prototype.remove.apply(l,arguments)}}ox.defaultOptions=yT(Ga.defaultOptions,{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}),EN(ox.prototype,{directTouch:!0,getSymbol:pG,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),$r.registerSeriesType("column",ox);let ax=ox,{getDeferredAnimation:gG}=Wr,{format:yG}=Ni,{defined:Ff,extend:DN,fireEvent:vT,getAlignFactor:IN,isArray:_d,isString:W0,merge:G0,objectEach:vG,pick:$0,pInt:_G,splat:RN}=Mt;(function(M){function l(){return S(this).some(P=>P?.enabled)}function h(P,I,F,z,H){let{chart:G,enabledDataSorting:X}=this,q=this.isCartesian&&G.inverted,ie=P.plotX,ae=P.plotY,pe=F.rotation||0,ke=Ff(ie)&&Ff(ae)&&G.isInsidePlot(ie,Math.round(ae),{inverted:q,paneCoordinates:!0,series:this}),Te=pe===0&&$0(F.overflow,X?"none":"justify")==="justify",Ce=this.visible&&P.visible!==!1&&Ff(ie)&&(P.series.forceDL||X&&!Te||ke||$0(F.inside,!!this.options.stacking)&&z&&G.isInsidePlot(ie,q?z.x+1:z.y+z.height-1,{inverted:q,paneCoordinates:!0,series:this})),De=P.pos();if(Ce&&De){var Ye;let Qe=I.getBBox(),st=I.getBBox(void 0,0);if(z=DN({x:De[0],y:Math.round(De[1]),width:0,height:0},z||{}),F.alignTo==="plotEdges"&&this.isCartesian&&(z[q?"x":"y"]=0,z[q?"width":"height"]=this.yAxis?.len||0),DN(F,{width:Qe.width,height:Qe.height}),Ye=z,X&&this.xAxis&&!Te&&this.setDataLabelStartPos(P,I,H,ke,Ye),I.align(G0(F,{width:st.width,height:st.height}),!1,z,!1),I.alignAttr.x+=IN(F.align)*(st.width-Qe.width),I.alignAttr.y+=IN(F.verticalAlign)*(st.height-Qe.height),I[I.placed?"animate":"attr"]({"text-align":I.alignAttr["text-align"]||"center",x:I.alignAttr.x+(Qe.width-st.width)/2,y:I.alignAttr.y+(Qe.height-st.height)/2,rotationOriginX:(I.width||0)/2,rotationOriginY:(I.height||0)/2}),Te&&z.height>=0)this.justifyDataLabel(I,F,I.alignAttr,Qe,z,H);else if($0(F.crop,!0)){let{x:Gt,y:xn}=I.alignAttr;Ce=G.isInsidePlot(Gt,xn,{paneCoordinates:!0,series:this})&&G.isInsidePlot(Gt+Qe.width-1,xn+Qe.height-1,{paneCoordinates:!0,series:this})}F.shape&&!pe&&I[H?"attr":"animate"]({anchorX:De[0],anchorY:De[1]})}H&&X&&(I.placed=!1),Ce||X&&!Te?(I.show(),I.placed=!0):(I.hide(),I.placed=!1)}function f(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6,this.chart.dataLabelsGroup)}function m(P){let I=this.hasRendered||0,F=this.initDataLabelsGroup().attr({opacity:+I});return!I&&F&&(this.visible&&F.show(),this.options.animation?F.animate({opacity:1},P):F.attr({opacity:1})),F}function y(P){let I;P=P||this.points;let F=this,z=F.chart,H=F.options,G=z.renderer,{backgroundColor:X,plotBackgroundColor:q}=z.options.chart,ie=G.getContrast(W0(q)&&q||W0(X)&&X||"#000000"),ae=S(F),{animation:pe,defer:ke}=ae[0],Te=ke?gG(z,pe,F):{defer:0,duration:0};vT(this,"drawDataLabels"),F.hasDataLabels?.()&&(I=this.initDataLabels(Te),P.forEach(Ce=>{let De=Ce.dataLabels||[],Ye=Ce.color||F.color;RN(b(ae,Ce.dlOptions||Ce.options?.dataLabels)).forEach((st,Gt)=>{let xn=st.enabled&&(Ce.visible||Ce.dataLabelOnHidden)&&(!Ce.isNull||Ce.dataLabelOnNull)&&function(pr,mr){let Qi=mr.filter;if(Qi){let Fr=Qi.operator,Ho=pr[Qi.property],fa=Qi.value;return Fr===">"&&Ho>fa||Fr==="<"&&Ho<fa||Fr===">="&&Ho>=fa||Fr==="<="&&Ho<=fa||Fr==="=="&&Ho==fa||Fr==="==="&&Ho===fa||Fr==="!="&&Ho!=fa||Fr==="!=="&&Ho!==fa||!1}return!0}(Ce,st),{backgroundColor:Sn,borderColor:Xt,distance:Bt,style:ln={}}=st,Er,Ki,Uo,Gn={},Vn=De[Gt],qi=!Vn,bi;xn&&(Ki=Ff(Er=$0(st[Ce.formatPrefix+"Format"],st.format))?yG(Er,Ce,z):(st[Ce.formatPrefix+"Formatter"]||st.formatter).call(Ce,st),Uo=st.rotation,!z.styledMode&&(ln.color=$0(st.color,ln.color,W0(F.color)?F.color:void 0,"#000000"),ln.color==="contrast"?(Sn!=="none"&&(bi=Sn),Ce.contrastColor=G.getContrast(bi!=="auto"&&W0(bi)&&bi||(W0(Ye)?Ye:"")),ln.color=bi||!Ff(Bt)&&st.inside||0>_G(Bt||0)||H.stacking?Ce.contrastColor:ie):delete Ce.contrastColor,H.cursor&&(ln.cursor=H.cursor)),Gn={r:st.borderRadius||0,rotation:Uo,padding:st.padding,zIndex:1},z.styledMode||(Gn.fill=Sn==="auto"?Ce.color:Sn,Gn.stroke=Xt==="auto"?Ce.color:Xt,Gn["stroke-width"]=st.borderWidth),vG(Gn,(pr,mr)=>{pr===void 0&&delete Gn[mr]})),!Vn||xn&&Ff(Ki)&&!!(Vn.div||Vn.text?.foreignObject)==!!st.useHTML&&(Vn.rotation&&st.rotation||Vn.rotation===st.rotation)||(Vn=void 0,qi=!0),xn&&Ff(Ki)&&Ki!==""&&(Vn?Gn.text=Ki:(Vn=G.label(Ki,0,0,st.shape,void 0,void 0,st.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+Ce.colorIndex+" "+(st.className||"")+(st.useHTML?" highcharts-tracker":"")),Vn&&(Vn.options=st,Vn.attr(Gn),z.styledMode?ln.width&&Vn.css({width:ln.width,textOverflow:ln.textOverflow,whiteSpace:ln.whiteSpace}):Vn.css(ln).shadow(st.shadow),vT(Vn,"beforeAddingDataLabel",{labelOptions:st,point:Ce}),Vn.added||Vn.add(I),F.alignDataLabel(Ce,Vn,st,void 0,qi),Vn.isActive=!0,De[Gt]&&De[Gt]!==Vn&&De[Gt].destroy(),De[Gt]=Vn))});let Qe=De.length;for(;Qe--;)De[Qe]?.isActive?De[Qe].isActive=!1:(De[Qe]?.destroy(),De.splice(Qe,1));Ce.dataLabel=De[0],Ce.dataLabels=De})),vT(this,"afterDrawDataLabels")}function _(P,I,F,z,H,G){let X=this.chart,q=I.align,ie=I.verticalAlign,ae=P.box?0:P.padding||0,pe=X.inverted?this.yAxis:this.xAxis,ke=pe?pe.left-X.plotLeft:0,Te=X.inverted?this.xAxis:this.yAxis,Ce=Te?Te.top-X.plotTop:0,{x:De=0,y:Ye=0}=I,Qe,st;return(Qe=(F.x||0)+ae+ke)<0&&(q==="right"&&De>=0?(I.align="left",I.inside=!0):De-=Qe,st=!0),(Qe=(F.x||0)+z.width-ae+ke)>X.plotWidth&&(q==="left"&&De<=0?(I.align="right",I.inside=!0):De+=X.plotWidth-Qe,st=!0),(Qe=F.y+ae+Ce)<0&&(ie==="bottom"&&Ye>=0?(I.verticalAlign="top",I.inside=!0):Ye-=Qe,st=!0),(Qe=(F.y||0)+z.height-ae+Ce)>X.plotHeight&&(ie==="top"&&Ye<=0?(I.verticalAlign="bottom",I.inside=!0):Ye+=X.plotHeight-Qe,st=!0),st&&(I.x=De,I.y=Ye,P.placed=!G,P.align(I,void 0,H)),st}function b(P,I){let F=[],z;if(_d(P)&&!_d(I))F=P.map(function(H){return G0(H,I)});else if(_d(I)&&!_d(P))F=I.map(function(H){return G0(P,H)});else if(_d(P)||_d(I)){if(_d(P)&&_d(I))for(z=Math.max(P.length,I.length);z--;)F[z]=G0(P[z],I[z])}else F=G0(P,I);return F}function S(P){let I=P.chart.options.plotOptions;return RN(b(b(I?.series?.dataLabels,I?.[P.type]?.dataLabels),P.options.dataLabels))}function D(P,I,F,z,H){let G=this.chart,X=G.inverted,q=this.xAxis,ie=q.reversed,ae=((X?I.height:I.width)||0)/2,pe=P.pointWidth,ke=pe?pe/2:0;I.startXPos=X?H.x:ie?-ae-ke:q.width-ae+ke,I.startYPos=X?ie?this.yAxis.height-ae+ke:-ae-ke:H.y,z?I.visibility==="hidden"&&(I.show(),I.attr({opacity:0}).animate({opacity:1})):I.attr({opacity:1}).animate({opacity:0},void 0,I.hide),G.hasRendered&&(F&&I.attr({x:I.startXPos,y:I.startYPos}),I.placed=!0)}M.compose=function(P){let I=P.prototype;I.initDataLabels||(I.initDataLabels=m,I.initDataLabelsGroup=f,I.alignDataLabel=h,I.drawDataLabels=y,I.justifyDataLabel=_,I.mergeArrays=b,I.setDataLabelStartPos=D,I.hasDataLabels=l)}})(A||(A={}));let lx=A,{composed:bG}=K,{series:PN}=$r,{merge:xG,pushUnique:wG}=Mt;(function(M){function l(h,f,m,y,_){let{chart:b,options:S}=this,D=b.inverted,P=this.xAxis?.len||b.plotSizeX||0,I=this.yAxis?.len||b.plotSizeY||0,F=h.dlBox||h.shapeArgs,z=h.below??(h.plotY||0)>(this.translatedThreshold??I),H=m.inside??!!S.stacking;if(F){if(y=xG(F),m.overflow!=="allow"||m.crop!==!1||S.clip!==!1){y.y<0&&(y.height+=y.y,y.y=0);let G=y.y+y.height-I;G>0&&G<y.height-1&&(y.height-=G)}D&&(y={x:I-y.y-y.height,y:P-y.x-y.width,width:y.height,height:y.width}),H||(D?(y.x+=z?0:y.width,y.width=0):(y.y+=z?y.height:0,y.height=0))}m.align??(m.align=!D||H?"center":z?"right":"left"),m.verticalAlign??(m.verticalAlign=D||H?"middle":z?"top":"bottom"),PN.prototype.alignDataLabel.call(this,h,f,m,y,_),m.inside&&h.contrastColor&&f.css({color:h.contrastColor})}M.compose=function(h){lx.compose(PN),wG(bG,"ColumnDataLabel")&&(h.prototype.alignDataLabel=l)}})(O||(O={}));let SG=O,{extend:CG,merge:MG}=Mt;class _T extends ax{}_T.defaultOptions=MG(ax.defaultOptions,{}),CG(_T.prototype,{inverted:!0}),$r.registerSeriesType("bar",_T);let{column:EG,line:kN}=$r.seriesTypes,{addEvent:TG,extend:AG,merge:DG}=Mt;class cx extends kN{applyJitter(){let l=this,h=this.options.jitter,f=this.points.length;h&&this.points.forEach(function(m,y){["x","y"].forEach(function(_,b){if(h[_]&&!m.isNull){let S=`plot${_.toUpperCase()}`,D=l[`${_}Axis`],P=h[_]*D.transA;if(D&&!D.logarithmic){let I=Math.max(0,(m[S]||0)-P),F=Math.min(D.len,(m[S]||0)+P);m[S]=I+(F-I)*function(z){let H=1e4*Math.sin(z);return H-Math.floor(H)}(y+b*f),_==="x"&&(m.clientX=m.plotX)}}})})}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}cx.defaultOptions=DG(kN.defaultOptions,{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25CF</span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}),AG(cx.prototype,{drawTracker:EG.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),TG(cx,"afterTranslate",function(){this.applyJitter()}),$r.registerSeriesType("scatter",cx);let{deg2rad:LN}=K,{fireEvent:IG,isNumber:bT,pick:ux,relativeLength:RG}=Mt;(function(M){M.getCenter=function(){let l=this.options,h=this.chart,f=2*(l.slicedOffset||0),m=h.plotWidth-2*f,y=h.plotHeight-2*f,_=l.center,b=Math.min(m,y),S=l.thickness,D,P=l.size,I=l.innerSize||0,F,z;typeof P=="string"&&(P=parseFloat(P)),typeof I=="string"&&(I=parseFloat(I));let H=[ux(_?.[0],"50%"),ux(_?.[1],"50%"),ux(P&&P<0?void 0:l.size,"100%"),ux(I&&I<0?void 0:l.innerSize||0,"0%")];for(!h.angular||this instanceof Ga||(H[3]=0),F=0;F<4;++F)z=H[F],D=F<2||F===2&&/%$/.test(z),H[F]=RG(z,[m,y,b,H[2]][F])+(D?f:0);return H[3]>H[2]&&(H[3]=H[2]),bT(S)&&2*S<H[2]&&S>0&&(H[3]=H[2]-2*S),IG(this,"afterGetCenter",{positions:H}),H},M.getStartAndEndRadians=function(l,h){let f=bT(l)?l:0,m=bT(h)&&h>f&&h-f<360?h:f+360;return{start:LN*(f+-90),end:LN*(m+-90)}}})(N||(N={}));let NN=N,{setAnimation:PG}=Wr,{addEvent:ON,defined:kG,extend:LG,isNumber:NG,pick:OG,relativeLength:FG}=Mt;class FN extends ys{getConnectorPath(l){let h=l.dataLabelPosition,f=l.options||{},m=f.connectorShape,y=this.connectorShapes[m]||m;return h&&y.call(this,Mn(Je({},h.computed),{alignment:h.alignment}),h.connectorPosition,f)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(l){let h=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(h.x,h.y,h.r+l,h.r+l,{innerR:h.r-1,start:h.start,end:h.end,borderRadius:h.borderRadius})}constructor(l,h,f){super(l,h,f),this.half=0,this.name??(this.name=l.chart.options.lang.pieSliceName);let m=y=>{this.slice(y.type==="select")};ON(this,"select",m),ON(this,"unselect",m)}isValid(){return NG(this.y)&&this.y>=0}setVisible(l,h=!0){l!==this.visible&&this.update({visible:l??!this.visible},h,void 0,!1)}slice(l,h,f){let m=this.series;PG(f,m.chart),h=OG(h,!0),this.sliced=this.options.sliced=l=kG(l)?l:!this.sliced,m.options.data[m.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}LG(FN.prototype,{connectorShapes:{fixedOffset:function(M,l,h){let f=l.breakAt,m=l.touchingSliceAt,y=h.softConnector?["C",M.x+(M.alignment==="left"?-5:5),M.y,2*f.x-m.x,2*f.y-m.y,f.x,f.y]:["L",f.x,f.y];return[["M",M.x,M.y],y,["L",m.x,m.y]]},straight:function(M,l){let h=l.touchingSliceAt;return[["M",M.x,M.y],["L",h.x,h.y]]},crookedLine:function(M,l,h){let{angle:f=this.angle||0,breakAt:m,touchingSliceAt:y}=l,{series:_}=this,[b,S,D]=_.center,P=D/2,{plotLeft:I,plotWidth:F}=_.chart,z=M.alignment==="left",{x:H,y:G}=M,X=m.x;if(h.crookDistance){let ie=FG(h.crookDistance,1);X=z?b+P+(F+I-b-P)*(1-ie):I+(b-P)*ie}else X=b+(S-G)*Math.tan(f-Math.PI/2);let q=[["M",H,G]];return(z?X<=H&&X>=m.x:X>=H&&X<=m.x)&&q.push(["L",X,G]),q.push(["L",m.x,m.y],["L",y.x,y.y]),q}}});let{getStartAndEndRadians:BG}=NN,{noop:BN}=K,{clamp:VG,extend:zG,fireEvent:VN,merge:xT,pick:UG}=Mt;class wT extends Ga{animate(l){let h=this,f=h.points,m=h.startAngleRad;l||f.forEach(function(y){let _=y.graphic,b=y.shapeArgs;_&&b&&(_.attr({r:UG(y.startR,h.center&&h.center[3]/2),start:m,end:m}),_.animate({r:b.r,start:b.start,end:b.end},h.options.animation))})}drawEmpty(){let l,h,f=this.startAngleRad,m=this.endAngleRad,y=this.options;this.total===0&&this.center?(l=this.center[0],h=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(l,h,this.center[1]/2,0,f,m).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:wf.arc(l,h,this.center[2]/2,0,{start:f,end:m,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":y.borderWidth,fill:y.fillColor||"none",stroke:y.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let l=this.chart.renderer;this.points.forEach(function(h){h.graphic&&h.hasNewShapeType()&&(h.graphic=h.graphic.destroy()),h.graphic||(h.graphic=l[h.shapeType](h.shapeArgs).add(h.series.group),h.delayedRendering=!0)})}generatePoints(){super.generatePoints(),this.updateTotals()}getX(l,h,f,m){let y=this.center,_=this.radii?this.radii[f.index]||0:y[2]/2,b=m.dataLabelPosition,S=b?.distance||0,D=Math.asin(VG((l-y[1])/(_+S),-1,1));return y[0]+Math.cos(D)*(_+S)*(h?-1:1)+(S>0?(h?-1:1)*(m.padding||0):0)}hasData(){return!!this.dataTable.rowCount}redrawPoints(){let l,h,f,m,y=this,_=y.chart;this.drawEmpty(),y.group&&!_.styledMode&&y.group.shadow(y.options.shadow),y.points.forEach(function(b){let S={};h=b.graphic,!b.isNull&&h?(m=b.shapeArgs,l=b.getTranslate(),_.styledMode||(f=y.pointAttribs(b,b.selected&&"select")),b.delayedRendering?(h.setRadialReference(y.center).attr(m).attr(l),_.styledMode||h.attr(f).attr({"stroke-linejoin":"round"}),b.delayedRendering=!1):(h.setRadialReference(y.center),_.styledMode||xT(!0,S,f),xT(!0,S,m,l),h.animate(S)),h.attr({visibility:b.visible?"inherit":"hidden"}),h.addClass(b.getClassName(),!0)):h&&(b.graphic=h.destroy())})}sortByAngle(l,h){l.sort(function(f,m){return f.angle!==void 0&&(m.angle-f.angle)*h})}translate(l){VN(this,"translate"),this.generatePoints();let h=this.options,f=h.slicedOffset,m=BG(h.startAngle,h.endAngle),y=this.startAngleRad=m.start,_=(this.endAngleRad=m.end)-y,b=this.points,S=h.ignoreHiddenPoint,D=b.length,P,I,F,z,H,G,X,q=0;for(l||(this.center=l=this.getCenter()),G=0;G<D;G++){X=b[G],P=y+q*_,X.isValid()&&(!S||X.visible)&&(q+=X.percentage/100),I=y+q*_;let ie={x:l[0],y:l[1],r:l[2]/2,innerR:l[3]/2,start:Math.round(1e3*P)/1e3,end:Math.round(1e3*I)/1e3};X.shapeType="arc",X.shapeArgs=ie,(F=(I+P)/2)>1.5*Math.PI?F-=2*Math.PI:F<-Math.PI/2&&(F+=2*Math.PI),X.slicedTranslation={translateX:Math.round(Math.cos(F)*f),translateY:Math.round(Math.sin(F)*f)},z=Math.cos(F)*l[2]/2,H=Math.sin(F)*l[2]/2,X.tooltipPos=[l[0]+.7*z,l[1]+.7*H],X.half=+(F<-Math.PI/2||F>Math.PI/2),X.angle=F}VN(this,"afterTranslate")}updateTotals(){let l=this.points,h=l.length,f=this.options.ignoreHiddenPoint,m,y,_=0;for(m=0;m<h;m++)(y=l[m]).isValid()&&(!f||y.visible)&&(_+=y.y);for(m=0,this.total=_;m<h;m++)(y=l[m]).percentage=_>0&&(y.visible||!f)?y.y/_*100:0,y.total=_}}wT.defaultOptions=xT(Ga.defaultOptions,{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.isNull?void 0:this.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}),zG(wT.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:ax.prototype.drawTracker,getCenter:NN.getCenter,getSymbol:BN,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:ax.prototype.pointAttribs,pointClass:FN,requireSorting:!1,searchPoint:BN,trackerGroups:["group","dataLabelsGroup"]}),$r.registerSeriesType("pie",wT);let{composed:HG,noop:jG}=K,{distribute:WG}=Ql,{series:zN}=$r,{arrayMax:GG,clamp:UN,defined:HN,pick:$G,pushUnique:qG,relativeLength:jN}=Mt;(function(M){let l={radialDistributionY:function(_,b){return(b.dataLabelPosition?.top||0)+_.distributeBox.pos},radialDistributionX:function(_,b,S,D,P){let I=P.dataLabelPosition;return _.getX(S<(I?.top||0)+2||S>(I?.bottom||0)-2?D:S,b.half,b,P)},justify:function(_,b,S,D){return D[0]+(_.half?-1:1)*(S+(b.dataLabelPosition?.distance||0))},alignToPlotEdges:function(_,b,S,D){let P=_.getBBox().width;return b?P+D:S-P-D},alignToConnectors:function(_,b,S,D){let P=0,I;return _.forEach(function(F){(I=F.dataLabel.getBBox().width)>P&&(P=I)}),b?P+D:S-P-D}};function h(_,b){let S=Math.PI/2,{start:D=0,end:P=0}=_.shapeArgs||{},I=_.angle||0;b>0&&D<S&&P>S&&I>S/2&&I<1.5*S&&(I=I<=S?Math.max(S/2,(D+S)/2):Math.min(1.5*S,(S+P)/2));let{center:F,options:z}=this,H=F[2]/2,G=Math.cos(I),X=Math.sin(I),q=F[0]+G*H,ie=F[1]+X*H,ae=Math.min((z.slicedOffset||0)+(z.borderWidth||0),b/5);return{natural:{x:q+G*b,y:ie+X*b},computed:{},alignment:b<0?"center":_.half?"right":"left",connectorPosition:{angle:I,breakAt:{x:q+G*ae,y:ie+X*ae},touchingSliceAt:{x:q,y:ie}},distance:b}}function f(){let _=this,b=_.points,S=_.chart,D=S.plotWidth,P=S.plotHeight,I=S.plotLeft,F=Math.round(S.chartWidth/3),z=_.center,H=z[2]/2,G=z[1],X=[[],[]],q=[0,0,0,0],ie=_.dataLabelPositioners,ae,pe,ke,Te=0;_.visible&&_.hasDataLabels?.()&&(b.forEach(Ce=>{(Ce.dataLabels||[]).forEach(De=>{De.shortened&&(De.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),De.shortened=!1)})}),zN.prototype.drawDataLabels.apply(_),b.forEach(Ce=>{(Ce.dataLabels||[]).forEach((De,Ye)=>{let Qe=z[2]/2,st=De.options,Gt=jN(st?.distance||0,Qe);Ye===0&&X[Ce.half].push(Ce),!HN(st?.style?.width)&&De.getBBox().width>F&&(De.css({width:Math.round(.7*F)+"px"}),De.shortened=!0),De.dataLabelPosition=this.getDataLabelPosition(Ce,Gt),Te=Math.max(Te,Gt)})}),X.forEach((Ce,De)=>{let Ye=Ce.length,Qe=[],st,Gt,xn=0,Sn;Ye&&(_.sortByAngle(Ce,De-.5),Te>0&&(st=Math.max(0,G-H-Te),Gt=Math.min(G+H+Te,S.plotHeight),Ce.forEach(Xt=>{(Xt.dataLabels||[]).forEach(Bt=>{let ln=Bt.dataLabelPosition;ln&&ln.distance>0&&(ln.top=Math.max(0,G-H-ln.distance),ln.bottom=Math.min(G+H+ln.distance,S.plotHeight),xn=Bt.getBBox().height||21,Bt.lineHeight=S.renderer.fontMetrics(Bt.text||Bt).h+2*Bt.padding,Xt.distributeBox={target:(Bt.dataLabelPosition?.natural.y||0)-ln.top+Bt.lineHeight/2,size:xn,rank:Xt.y},Qe.push(Xt.distributeBox))})}),WG(Qe,Sn=Gt+xn-st,Sn/5)),Ce.forEach(Xt=>{(Xt.dataLabels||[]).forEach(Bt=>{let ln=Bt.options||{},Er=Xt.distributeBox,Ki=Bt.dataLabelPosition,Uo=Ki?.natural.y||0,Gn=ln.connectorPadding||0,Vn=Bt.lineHeight||21,qi=(Vn-Bt.getBBox().height)/2,bi=0,pr=Uo,mr="inherit";if(Ki){if(Qe&&HN(Er)&&Ki.distance>0&&(Er.pos===void 0?mr="hidden":(ke=Er.size,pr=ie.radialDistributionY(Xt,Bt))),ln.justify)bi=ie.justify(Xt,Bt,H,z);else switch(ln.alignTo){case"connectors":bi=ie.alignToConnectors(Ce,De,D,I);break;case"plotEdges":bi=ie.alignToPlotEdges(Bt,De,D,I);break;default:bi=ie.radialDistributionX(_,Xt,pr-qi,Uo,Bt)}if(Ki.attribs={visibility:mr,align:Ki.alignment},Ki.posAttribs={x:bi+(ln.x||0)+({left:Gn,right:-Gn}[Ki.alignment]||0),y:pr+(ln.y||0)-Vn/2},Ki.computed.x=bi,Ki.computed.y=pr-qi,$G(ln.crop,!0)){let Qi;bi-(pe=Bt.getBBox().width)<Gn&&De===1?(Qi=Math.round(pe-bi+Gn),q[3]=Math.max(Qi,q[3])):bi+pe>D-Gn&&De===0&&(Qi=Math.round(bi+pe-D+Gn),q[1]=Math.max(Qi,q[1])),pr-ke/2<0?q[0]=Math.max(Math.round(-pr+ke/2),q[0]):pr+ke/2>P&&(q[2]=Math.max(Math.round(pr+ke/2-P),q[2])),Ki.sideOverflow=Qi}}})}))}),(GG(q)===0||this.verifyDataLabelOverflow(q))&&(this.placeDataLabels(),this.points.forEach(Ce=>{(Ce.dataLabels||[]).forEach(De=>{let{connectorColor:Ye,connectorWidth:Qe=1}=De.options||{},st=De.dataLabelPosition;if(Qe){let Gt;ae=De.connector,st&&st.distance>0?(Gt=!ae,ae||(De.connector=ae=S.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+Ce.colorIndex+(Ce.className?" "+Ce.className:"")).add(_.dataLabelsGroup)),S.styledMode||ae.attr({"stroke-width":Qe,stroke:Ye||Ce.color||"#666666"}),ae[Gt?"attr":"animate"]({d:Ce.getConnectorPath(De)}),ae.attr({visibility:st.attribs?.visibility})):ae&&(De.connector=ae.destroy())}})})))}function m(){this.points.forEach(_=>{(_.dataLabels||[]).forEach(b=>{let S=b.dataLabelPosition;S?(S.sideOverflow&&(b.css({width:Math.max(b.getBBox().width-S.sideOverflow,0)+"px",textOverflow:b.options?.style?.textOverflow||"ellipsis"}),b.shortened=!0),b.attr(S.attribs),b[b.moved?"animate":"attr"](S.posAttribs),b.moved=!0):b&&b.attr({y:-9999})}),delete _.distributeBox},this)}function y(_){let b=this.center,S=this.options,D=S.center,P=S.minSize||80,I=P,F=S.size!==null;return!F&&(D[0]!==null?I=Math.max(b[2]-Math.max(_[1],_[3]),P):(I=Math.max(b[2]-_[1]-_[3],P),b[0]+=(_[3]-_[1])/2),D[1]!==null?I=UN(I,P,b[2]-Math.max(_[0],_[2])):(I=UN(I,P,b[2]-_[0]-_[2]),b[1]+=(_[0]-_[2])/2),I<b[2]?(b[2]=I,b[3]=Math.min(S.thickness?Math.max(0,I-2*S.thickness):Math.max(0,jN(S.innerSize||0,I)),I),this.translate(b),this.drawDataLabels&&this.drawDataLabels()):F=!0),F}M.compose=function(_){if(lx.compose(zN),qG(HG,"PieDataLabel")){let b=_.prototype;b.dataLabelPositioners=l,b.alignDataLabel=jG,b.drawDataLabels=f,b.getDataLabelPosition=h,b.placeDataLabels=m,b.verifyDataLabelOverflow=y}}})(T||(T={}));let XG=T;(function(M){M.getCenterOfPoints=function(l){let h=l.reduce((f,m)=>(f.x+=m.x,f.y+=m.y,f),{x:0,y:0});return{x:h.x/l.length,y:h.y/l.length}},M.getDistanceBetweenPoints=function(l,h){return Math.sqrt(Math.pow(h.x-l.x,2)+Math.pow(h.y-l.y,2))},M.getAngleBetweenPoints=function(l,h){return Math.atan2(h.x-l.x,h.y-l.y)},M.pointInPolygon=function({x:l,y:h},f){let m=f.length,y,_,b=!1;for(y=0,_=m-1;y<m;_=y++){let[S,D]=f[y],[P,I]=f[_];D>h!=I>h&&l<(P-S)*(h-D)/(I-D)+S&&(b=!b)}return b}})(j||(j={}));let{pointInPolygon:YG}=j,{addEvent:ZG,getAlignFactor:KG,fireEvent:WN,objectEach:GN,pick:QG}=Mt;function JG(M){let l=M.length,h=(P,I)=>!(I.x>=P.x+P.width||I.x+I.width<=P.x||I.y>=P.y+P.height||I.y+I.height<=P.y),f=(P,I)=>{for(let F of P)if(YG({x:F[0],y:F[1]},I))return!0;return!1},m,y,_,b,S,D=!1;for(let P=0;P<l;P++)(m=M[P])&&(m.oldOpacity=m.opacity,m.newOpacity=1,m.absoluteBox=function(I){if(I&&(!I.alignAttr||I.placed)){let F=I.box?0:I.padding||0,z=I.alignAttr||{x:I.attr("x"),y:I.attr("y")},{height:H,polygon:G,width:X}=I.getBBox(),q=KG(I.alignValue)*X;return I.width=X,I.height=H,{x:z.x+(I.parentGroup?.translateX||0)+F-q,y:z.y+(I.parentGroup?.translateY||0)+F,width:X-2*F,height:H-2*F,polygon:G}}}(m));M.sort((P,I)=>(I.labelrank||0)-(P.labelrank||0));for(let P=0;P<l;++P){b=(y=M[P])&&y.absoluteBox;let I=b?.polygon;for(let F=P+1;F<l;++F){S=(_=M[F])&&_.absoluteBox;let z=!1;if(b&&S&&y!==_&&y.newOpacity!==0&&_.newOpacity!==0&&y.visibility!=="hidden"&&_.visibility!=="hidden"){let H=S.polygon;if(I&&H&&I!==H?f(I,H)&&(z=!0):h(b,S)&&(z=!0),z){let G=y.labelrank<_.labelrank?y:_,X=G.text;G.newOpacity=0,X?.element.querySelector("textPath")&&X.hide()}}}}for(let P of M)$N(P,this)&&(D=!0);D&&WN(this,"afterHideAllOverlappingLabels")}function $N(M,l){let h,f=!1;return M&&(h=M.newOpacity,M.oldOpacity!==h&&(M.hasClass("highcharts-data-label")?(M[h?"removeClass":"addClass"]("highcharts-data-label-hidden"),f=!0,M[M.isOld?"animate":"attr"]({opacity:h},void 0,function(){l.styledMode||M.css({pointerEvents:h?"auto":"none"})}),WN(l,"afterHideOverlappingLabel")):M.attr({opacity:h})),M.isOld=!0),f}function e6(){let M=this,l=[];for(let h of M.labelCollectors||[])l=l.concat(h());for(let h of M.yAxis||[])h.stacking&&h.options.stackLabels&&!h.options.stackLabels.allowOverlap&&GN(h.stacking.stacks,f=>{GN(f,m=>{m.label&&l.push(m.label)})});for(let h of M.series||[])if(h.visible&&h.hasDataLabels?.()){let f=m=>{for(let y of m)y.visible&&(y.dataLabels||[]).forEach(_=>{let b=_.options||{};_.labelrank=QG(b.labelrank,y.labelrank,y.shapeArgs?.height),b.allowOverlap??Number(b.distance)>0?(_.oldOpacity=_.opacity,_.newOpacity=1,$N(_,M)):l.push(_)})};f(h.nodes||[]),f(h.points)}this.hideOverlappingLabels(l)}let qN={compose:function(M){let l=M.prototype;l.hideOverlappingLabels||(l.hideOverlappingLabels=JG,ZG(M,"render",e6))}},{defaultOptions:t6}=_n,{noop:XN}=K,{addEvent:YN,extend:n6,isObject:ZN,merge:i6,relativeLength:ST}=Mt,r6={radius:0,scope:"stack",where:void 0},KN=XN,QN=XN;function s6(M,l,h,f,m={}){let y=KN(M,l,h,f,m),{innerR:_=0,r:b=h,start:S=0,end:D=0}=m;if(m.open||!m.borderRadius)return y;let P=D-S,I=Math.sin(P/2),F=Math.max(Math.min(ST(m.borderRadius||0,b-_),(b-_)/2,b*I/(1+I)),0),z=Math.min(F,P/Math.PI*2*_),H=y.length-1;for(;H--;)(function(G,X,q){let ie,ae,pe,ke=G[X],Te=G[X+1];if(Te[0]==="Z"&&(Te=G[0]),(ke[0]==="M"||ke[0]==="L")&&Te[0]==="A"?(ie=ke,ae=Te,pe=!0):ke[0]==="A"&&(Te[0]==="M"||Te[0]==="L")&&(ie=Te,ae=ke),ie&&ae&&ae.params){let Ce=ae[1],De=ae[5],Ye=ae.params,{start:Qe,end:st,cx:Gt,cy:xn}=Ye,Sn=De?Ce-q:Ce+q,Xt=Sn?Math.asin(q/Sn):0,Bt=De?Xt:-Xt,ln=Math.cos(Xt)*Sn;pe?(Ye.start=Qe+Bt,ie[1]=Gt+ln*Math.cos(Qe),ie[2]=xn+ln*Math.sin(Qe),G.splice(X+1,0,["A",q,q,0,0,1,Gt+Ce*Math.cos(Ye.start),xn+Ce*Math.sin(Ye.start)])):(Ye.end=st-Bt,ae[6]=Gt+Ce*Math.cos(Ye.end),ae[7]=xn+Ce*Math.sin(Ye.end),G.splice(X+1,0,["A",q,q,0,0,1,Gt+ln*Math.cos(st),xn+ln*Math.sin(st)])),ae[4]=Math.abs(Ye.end-Ye.start)<Math.PI?0:1}})(y,H,H>1?z:F);return y}function o6(){if(this.options.borderRadius&&!(this.chart.is3d&&this.chart.is3d())){let{options:M,yAxis:l}=this,h=M.stacking==="percent",f=t6.plotOptions?.[this.type]?.borderRadius,m=CT(M.borderRadius,ZN(f)?f:{}),y=l.options.reversed;for(let _ of this.points){let{shapeArgs:b}=_;if(_.shapeType==="roundedRect"&&b){let{width:S=0,height:D=0,y:P=0}=b,I=P,F=D;if(m.scope==="stack"&&_.stackTotal){let X=l.translate(h?100:_.stackTotal,!1,!0,!1,!0),q=l.translate(M.threshold||0,!1,!0,!1,!0),ie=this.crispCol(0,Math.min(X,q),0,Math.abs(X-q));I=ie.y,F=ie.height}let z=(_.negative?-1:1)*(y?-1:1)==-1,H=m.where;!H&&this.is("waterfall")&&Math.abs((_.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(H="all"),H||(H="end");let G=Math.min(ST(m.radius,S),S/2,H==="all"?D/2:1/0)||0;H==="end"&&(z&&(I-=G),F+=G),n6(b,{brBoxHeight:F,brBoxY:I,r:G})}}}}function CT(M,l){return ZN(M)||(M={radius:M||0}),i6(r6,l,M)}function a6(){let M=CT(this.options.borderRadius);for(let l of this.points){let h=l.shapeArgs;h&&(h.borderRadius=ST(M.radius,(h.r||0)-(h.innerR||0)))}}function l6(M,l,h,f,m={}){let y=QN(M,l,h,f,m),{r:_=0,brBoxHeight:b=f,brBoxY:S=l}=m,D=l-S,P=S+b-(l+f),I=D-_>-.1?0:_,F=P-_>-.1?0:_,z=Math.max(I&&D,0),H=Math.max(F&&P,0),G=[M+I,l],X=[M+h-I,l],q=[M+h,l+I],ie=[M+h,l+f-F],ae=[M+h-F,l+f],pe=[M+F,l+f],ke=[M,l+f-F],Te=[M,l+I],Ce=(De,Ye)=>Math.sqrt(Math.pow(De,2)-Math.pow(Ye,2));if(z){let De=Ce(I,I-z);G[0]-=De,X[0]+=De,q[1]=Te[1]=l+I-z}if(f<I-z){let De=Ce(I,I-z-f);q[0]=ie[0]=M+h-I+De,ae[0]=Math.min(q[0],ae[0]),pe[0]=Math.max(ie[0],pe[0]),ke[0]=Te[0]=M+I-De,q[1]=Te[1]=l+f}if(H){let De=Ce(F,F-H);ae[0]+=De,pe[0]-=De,ie[1]=ke[1]=l+f-F+H}if(f<F-H){let De=Ce(F,F-H-f);q[0]=ie[0]=M+h-F+De,X[0]=Math.min(q[0],X[0]),G[0]=Math.max(ie[0],G[0]),ke[0]=Te[0]=M+F-De,ie[1]=ke[1]=l}return y.length=0,y.push(["M",...G],["L",...X],["A",I,I,0,0,1,...q],["L",...ie],["A",F,F,0,0,1,...ae],["L",...pe],["A",F,F,0,0,1,...ke],["L",...Te],["A",I,I,0,0,1,...G],["Z"]),y}let{diffObjects:c6,extend:u6,find:h6,merge:d6,pick:hx,uniqueKey:f6}=Mt;(function(M){function l(f,m){let y=f.condition;(y.callback||function(){return this.chartWidth<=hx(y.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=hx(y.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=hx(y.minWidth,0)&&this.chartHeight>=hx(y.minHeight,0)}).call(this)&&m.push(f._id)}function h(f,m){let y=this.options.responsive,_=this.currentResponsive,b=[],S;!m&&y&&y.rules&&y.rules.forEach(I=>{I._id===void 0&&(I._id=f6()),this.matchResponsiveRule(I,b)},this);let D=d6(...b.map(I=>h6(y?.rules||[],F=>F._id===I)).map(I=>I?.chartOptions));D.isResponsiveOptions=!0,b=b.toString()||void 0;let P=_?.ruleIds;b!==P&&(_&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(_.undoOptions,f,!0),this.updatingResponsive=!1),b?((S=c6(D,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:b,mergedOptions:D,undoOptions:S},this.updatingResponsive||this.update(D,f,!0)):this.currentResponsive=void 0)}M.compose=function(f){let m=f.prototype;return m.matchResponsiveRule||u6(m,{matchResponsiveRule:l,setResponsive:h}),f}})(Z||(Z={}));let p6=Z;K.AST=Wt,K.Axis=Dr,K.Chart=yd,K.Color=An,K.DataLabel=lx,K.DataTableCore=Xb,K.Fx=jr,K.HTMLElement=_l,K.Legend=sN,K.LegendSymbol=GL,K.OverlappingDataLabels=K.OverlappingDataLabels||qN,K.PlotLineOrBand=W,K.Point=ys,K.Pointer=HL,K.RendererRegistry=lr,K.Series=Ga,K.SeriesRegistry=$r,K.StackItem=vN,K.SVGElement=la,K.SVGRenderer=Lo,K.Templating=Ni,K.Tick=Ps,K.Time=fn,K.Tooltip=fr,K.animate=Wr.animate,K.animObject=Wr.animObject,K.chart=yd.chart,K.color=An.parse,K.dateFormat=Ni.dateFormat,K.defaultOptions=_n.defaultOptions,K.distribute=Ql.distribute,K.format=Ni.format,K.getDeferredAnimation=Wr.getDeferredAnimation,K.getOptions=_n.getOptions,K.numberFormat=Ni.numberFormat,K.seriesType=$r.seriesType,K.setAnimation=Wr.setAnimation,K.setOptions=_n.setOptions,K.stop=Wr.stop,K.time=_n.defaultTime,K.timers=jr.timers,{compose:function(M,l,h){let f=M.types.pie;if(!l.symbolCustomAttribs.includes("borderRadius")){let m=h.prototype.symbols;YN(M,"afterColumnTranslate",o6,{order:9}),YN(f,"afterTranslate",a6),l.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY"),KN=m.arc,QN=m.roundedRect,m.arc=s6,m.roundedRect=l6}},optionsToObject:CT}.compose(K.Series,K.SVGElement,K.SVGRenderer),SG.compose(K.Series.types.column),lx.compose(K.Series),O0.compose(K.Axis),_l.compose(K.SVGRenderer),sN.compose(K.Chart),Fm.compose(K.Axis),qN.compose(K.Chart),XG.compose(K.Series.types.pie),W.compose(K.Chart,K.Axis),HL.compose(K.Chart),p6.compose(K.Chart),gN.compose(K.Axis,K.Chart,K.Series),nG.compose(K.Axis,K.Chart,K.Series),fr.compose(K.Pointer),Mt.extend(K,Mt);let m6=K;return le.default})())});var mH={};iO(mH,{isAnyArray:()=>il});function il(n){let t=Fie.call(n);return t.endsWith("Array]")&&!t.includes("Big")}var Fie,Mp=fx(()=>{"use strict";Fie=Object.prototype.toString});function gH(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!il(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,i=e===void 0?0:e,r=t.toIndex,s=r===void 0?n.length:r;if(i<0||i>=n.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=i||s>n.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=n[i],a=i+1;a<s;a++)n[a]>o&&(o=n[a]);return o}var yH=fx(()=>{"use strict";Mp()});function vH(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!il(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,i=e===void 0?0:e,r=t.toIndex,s=r===void 0?n.length:r;if(i<0||i>=n.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=i||s>n.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=n[i],a=i+1;a<s;a++)n[a]<o&&(o=n[a]);return o}var _H=fx(()=>{"use strict";Mp()});var bH={};iO(bH,{default:()=>Bie});function Bie(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(il(n)){if(n.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var e;if(t.output!==void 0){if(!il(t.output))throw new TypeError("output option must be an array if specified");e=t.output}else e=new Array(n.length);var i=vH(n),r=gH(n);if(i===r)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var s=t.min,o=s===void 0?t.autoMinMax?i:0:s,a=t.max,u=a===void 0?t.autoMinMax?r:1:a;if(o>=u)throw new RangeError("min option must be smaller than max option");for(var d=(u-o)/(r-i),g=0;g<n.length;g++)e[g]=(n[g]-i)*d+o;return e}var xH=fx(()=>{"use strict";Mp();yH();_H()});var AH=px(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});var Ca=(Mp(),sO(mH)),wH=(xH(),sO(bH)),IC=" ".repeat(2),MH=" ".repeat(4);function Vie(){return EH(this)}function EH(n,t={}){let{maxRows:e=15,maxColumns:i=10,maxNumSize:r=8,padMinus:s="auto"}=t;return`${n.constructor.name} {
${IC}[
${MH}${zie(n,e,i,r,s)}
${IC}]
${IC}rows: ${n.rows}
${IC}columns: ${n.columns}
}`}function zie(n,t,e,i,r){let{rows:s,columns:o}=n,a=Math.min(s,t),u=Math.min(o,e),d=[];if(r==="auto"){r=!1;e:for(let g=0;g<a;g++)for(let v=0;v<u;v++)if(n.get(g,v)<0){r=!0;break e}}for(let g=0;g<a;g++){let v=[];for(let x=0;x<u;x++)v.push(Uie(n.get(g,x),i,r));d.push(`${v.join(" ")}`)}return u!==o&&(d[d.length-1]+=` ... ${o-e} more columns`),a!==s&&d.push(`... ${s-t} more rows`),d.join(`
${MH}`)}function Uie(n,t,e){return(n>=0&&e?` ${SH(n,t-1)}`:SH(n,t)).padEnd(t)}function SH(n,t){let e=n.toString();if(e.length<=t)return e;let i=n.toFixed(t);if(i.length>t&&(i=n.toFixed(Math.max(0,t-(i.length-t)))),i.length<=t&&!i.startsWith("0.000")&&!i.startsWith("-0.000"))return i;let r=n.toExponential(t);return r.length>t&&(r=n.toExponential(Math.max(0,t-(r.length-t)))),r.slice(0)}function Hie(n,t){n.prototype.add=function(i){return typeof i=="number"?this.addS(i):this.addM(i)},n.prototype.addS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)+i);return this},n.prototype.addM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)+i.get(r,s));return this},n.add=function(i,r){return new t(i).add(r)},n.prototype.sub=function(i){return typeof i=="number"?this.subS(i):this.subM(i)},n.prototype.subS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)-i);return this},n.prototype.subM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)-i.get(r,s));return this},n.sub=function(i,r){return new t(i).sub(r)},n.prototype.subtract=n.prototype.sub,n.prototype.subtractS=n.prototype.subS,n.prototype.subtractM=n.prototype.subM,n.subtract=n.sub,n.prototype.mul=function(i){return typeof i=="number"?this.mulS(i):this.mulM(i)},n.prototype.mulS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)*i);return this},n.prototype.mulM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)*i.get(r,s));return this},n.mul=function(i,r){return new t(i).mul(r)},n.prototype.multiply=n.prototype.mul,n.prototype.multiplyS=n.prototype.mulS,n.prototype.multiplyM=n.prototype.mulM,n.multiply=n.mul,n.prototype.div=function(i){return typeof i=="number"?this.divS(i):this.divM(i)},n.prototype.divS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)/i);return this},n.prototype.divM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)/i.get(r,s));return this},n.div=function(i,r){return new t(i).div(r)},n.prototype.divide=n.prototype.div,n.prototype.divideS=n.prototype.divS,n.prototype.divideM=n.prototype.divM,n.divide=n.div,n.prototype.mod=function(i){return typeof i=="number"?this.modS(i):this.modM(i)},n.prototype.modS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)%i);return this},n.prototype.modM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)%i.get(r,s));return this},n.mod=function(i,r){return new t(i).mod(r)},n.prototype.modulus=n.prototype.mod,n.prototype.modulusS=n.prototype.modS,n.prototype.modulusM=n.prototype.modM,n.modulus=n.mod,n.prototype.and=function(i){return typeof i=="number"?this.andS(i):this.andM(i)},n.prototype.andS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)&i);return this},n.prototype.andM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)&i.get(r,s));return this},n.and=function(i,r){return new t(i).and(r)},n.prototype.or=function(i){return typeof i=="number"?this.orS(i):this.orM(i)},n.prototype.orS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)|i);return this},n.prototype.orM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)|i.get(r,s));return this},n.or=function(i,r){return new t(i).or(r)},n.prototype.xor=function(i){return typeof i=="number"?this.xorS(i):this.xorM(i)},n.prototype.xorS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)^i);return this},n.prototype.xorM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)^i.get(r,s));return this},n.xor=function(i,r){return new t(i).xor(r)},n.prototype.leftShift=function(i){return typeof i=="number"?this.leftShiftS(i):this.leftShiftM(i)},n.prototype.leftShiftS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)<<i);return this},n.prototype.leftShiftM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)<<i.get(r,s));return this},n.leftShift=function(i,r){return new t(i).leftShift(r)},n.prototype.signPropagatingRightShift=function(i){return typeof i=="number"?this.signPropagatingRightShiftS(i):this.signPropagatingRightShiftM(i)},n.prototype.signPropagatingRightShiftS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>i);return this},n.prototype.signPropagatingRightShiftM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>i.get(r,s));return this},n.signPropagatingRightShift=function(i,r){return new t(i).signPropagatingRightShift(r)},n.prototype.rightShift=function(i){return typeof i=="number"?this.rightShiftS(i):this.rightShiftM(i)},n.prototype.rightShiftS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>>i);return this},n.prototype.rightShiftM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)>>>i.get(r,s));return this},n.rightShift=function(i,r){return new t(i).rightShift(r)},n.prototype.zeroFillRightShift=n.prototype.rightShift,n.prototype.zeroFillRightShiftS=n.prototype.rightShiftS,n.prototype.zeroFillRightShiftM=n.prototype.rightShiftM,n.zeroFillRightShift=n.rightShift,n.prototype.not=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,~this.get(i,r));return this},n.not=function(i){return new t(i).not()},n.prototype.abs=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.abs(this.get(i,r)));return this},n.abs=function(i){return new t(i).abs()},n.prototype.acos=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.acos(this.get(i,r)));return this},n.acos=function(i){return new t(i).acos()},n.prototype.acosh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.acosh(this.get(i,r)));return this},n.acosh=function(i){return new t(i).acosh()},n.prototype.asin=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.asin(this.get(i,r)));return this},n.asin=function(i){return new t(i).asin()},n.prototype.asinh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.asinh(this.get(i,r)));return this},n.asinh=function(i){return new t(i).asinh()},n.prototype.atan=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.atan(this.get(i,r)));return this},n.atan=function(i){return new t(i).atan()},n.prototype.atanh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.atanh(this.get(i,r)));return this},n.atanh=function(i){return new t(i).atanh()},n.prototype.cbrt=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.cbrt(this.get(i,r)));return this},n.cbrt=function(i){return new t(i).cbrt()},n.prototype.ceil=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.ceil(this.get(i,r)));return this},n.ceil=function(i){return new t(i).ceil()},n.prototype.clz32=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.clz32(this.get(i,r)));return this},n.clz32=function(i){return new t(i).clz32()},n.prototype.cos=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.cos(this.get(i,r)));return this},n.cos=function(i){return new t(i).cos()},n.prototype.cosh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.cosh(this.get(i,r)));return this},n.cosh=function(i){return new t(i).cosh()},n.prototype.exp=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.exp(this.get(i,r)));return this},n.exp=function(i){return new t(i).exp()},n.prototype.expm1=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.expm1(this.get(i,r)));return this},n.expm1=function(i){return new t(i).expm1()},n.prototype.floor=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.floor(this.get(i,r)));return this},n.floor=function(i){return new t(i).floor()},n.prototype.fround=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.fround(this.get(i,r)));return this},n.fround=function(i){return new t(i).fround()},n.prototype.log=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.log(this.get(i,r)));return this},n.log=function(i){return new t(i).log()},n.prototype.log1p=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.log1p(this.get(i,r)));return this},n.log1p=function(i){return new t(i).log1p()},n.prototype.log10=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.log10(this.get(i,r)));return this},n.log10=function(i){return new t(i).log10()},n.prototype.log2=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.log2(this.get(i,r)));return this},n.log2=function(i){return new t(i).log2()},n.prototype.round=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.round(this.get(i,r)));return this},n.round=function(i){return new t(i).round()},n.prototype.sign=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.sign(this.get(i,r)));return this},n.sign=function(i){return new t(i).sign()},n.prototype.sin=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.sin(this.get(i,r)));return this},n.sin=function(i){return new t(i).sin()},n.prototype.sinh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.sinh(this.get(i,r)));return this},n.sinh=function(i){return new t(i).sinh()},n.prototype.sqrt=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.sqrt(this.get(i,r)));return this},n.sqrt=function(i){return new t(i).sqrt()},n.prototype.tan=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.tan(this.get(i,r)));return this},n.tan=function(i){return new t(i).tan()},n.prototype.tanh=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.tanh(this.get(i,r)));return this},n.tanh=function(i){return new t(i).tanh()},n.prototype.trunc=function(){for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.set(i,r,Math.trunc(this.get(i,r)));return this},n.trunc=function(i){return new t(i).trunc()},n.pow=function(i,r){return new t(i).pow(r)},n.prototype.pow=function(i){return typeof i=="number"?this.powS(i):this.powM(i)},n.prototype.powS=function(i){for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)**i);return this},n.prototype.powM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)**i.get(r,s));return this}}function Ol(n,t,e){let i=e?n.rows:n.rows-1;if(t<0||t>i)throw new RangeError("Row index out of range")}function Fl(n,t,e){let i=e?n.columns:n.columns-1;if(t<0||t>i)throw new RangeError("Column index out of range")}function ny(n,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==n.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function iy(n,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==n.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function sP(n,t){if(!Ca.isAnyArray(t))throw new TypeError("row indices must be an array");for(let e=0;e<t.length;e++)if(t[e]<0||t[e]>=n.rows)throw new RangeError("row indices are out of range")}function oP(n,t){if(!Ca.isAnyArray(t))throw new TypeError("column indices must be an array");for(let e=0;e<t.length;e++)if(t[e]<0||t[e]>=n.columns)throw new RangeError("column indices are out of range")}function ZR(n,t,e,i,r){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(RC("startRow",t),RC("endRow",e),RC("startColumn",i),RC("endColumn",r),t>e||i>r||t<0||t>=n.rows||e<0||e>=n.rows||i<0||i>=n.columns||r<0||r>=n.columns)throw new RangeError("Submatrix indices are out of range")}function VC(n,t=0){let e=[];for(let i=0;i<n;i++)e.push(t);return e}function RC(n,t){if(typeof t!="number")throw new TypeError(`${n} must be a number`)}function ty(n){if(n.isEmpty())throw new Error("Empty matrix has no elements to index")}function jie(n){let t=VC(n.rows);for(let e=0;e<n.rows;++e)for(let i=0;i<n.columns;++i)t[e]+=n.get(e,i);return t}function Wie(n){let t=VC(n.columns);for(let e=0;e<n.rows;++e)for(let i=0;i<n.columns;++i)t[i]+=n.get(e,i);return t}function Gie(n){let t=0;for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)t+=n.get(e,i);return t}function $ie(n){let t=VC(n.rows,1);for(let e=0;e<n.rows;++e)for(let i=0;i<n.columns;++i)t[e]*=n.get(e,i);return t}function qie(n){let t=VC(n.columns,1);for(let e=0;e<n.rows;++e)for(let i=0;i<n.columns;++i)t[i]*=n.get(e,i);return t}function Xie(n){let t=1;for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)t*=n.get(e,i);return t}function Yie(n,t,e){let i=n.rows,r=n.columns,s=[];for(let o=0;o<i;o++){let a=0,u=0,d=0;for(let g=0;g<r;g++)d=n.get(o,g)-e[o],a+=d,u+=d*d;t?s.push((u-a*a/r)/(r-1)):s.push((u-a*a/r)/r)}return s}function Zie(n,t,e){let i=n.rows,r=n.columns,s=[];for(let o=0;o<r;o++){let a=0,u=0,d=0;for(let g=0;g<i;g++)d=n.get(g,o)-e[o],a+=d,u+=d*d;t?s.push((u-a*a/i)/(i-1)):s.push((u-a*a/i)/i)}return s}function Kie(n,t,e){let i=n.rows,r=n.columns,s=i*r,o=0,a=0,u=0;for(let d=0;d<i;d++)for(let g=0;g<r;g++)u=n.get(d,g)-e,o+=u,a+=u*u;return t?(a-o*o/s)/(s-1):(a-o*o/s)/s}function Qie(n,t){for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)n.set(e,i,n.get(e,i)-t[e])}function Jie(n,t){for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)n.set(e,i,n.get(e,i)-t[i])}function ere(n,t){for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)n.set(e,i,n.get(e,i)-t)}function tre(n){let t=[];for(let e=0;e<n.rows;e++){let i=0;for(let r=0;r<n.columns;r++)i+=n.get(e,r)**2/(n.columns-1);t.push(Math.sqrt(i))}return t}function nre(n,t){for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)n.set(e,i,n.get(e,i)/t[e])}function ire(n){let t=[];for(let e=0;e<n.columns;e++){let i=0;for(let r=0;r<n.rows;r++)i+=n.get(r,e)**2/(n.rows-1);t.push(Math.sqrt(i))}return t}function rre(n,t){for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)n.set(e,i,n.get(e,i)/t[i])}function sre(n){let t=n.size-1,e=0;for(let i=0;i<n.columns;i++)for(let r=0;r<n.rows;r++)e+=n.get(r,i)**2/t;return Math.sqrt(e)}function ore(n,t){for(let e=0;e<n.rows;e++)for(let i=0;i<n.columns;i++)n.set(e,i,n.get(e,i)/t)}var kr=class n{static from1DArray(t,e,i){if(t*e!==i.length)throw new RangeError("data length does not match given dimensions");let s=new jt(t,e);for(let o=0;o<t;o++)for(let a=0;a<e;a++)s.set(o,a,i[o*e+a]);return s}static rowVector(t){let e=new jt(1,t.length);for(let i=0;i<t.length;i++)e.set(0,i,t[i]);return e}static columnVector(t){let e=new jt(t.length,1);for(let i=0;i<t.length;i++)e.set(i,0,t[i]);return e}static zeros(t,e){return new jt(t,e)}static ones(t,e){return new jt(t,e).fill(1)}static rand(t,e,i={}){if(typeof i!="object")throw new TypeError("options must be an object");let{random:r=Math.random}=i,s=new jt(t,e);for(let o=0;o<t;o++)for(let a=0;a<e;a++)s.set(o,a,r());return s}static randInt(t,e,i={}){if(typeof i!="object")throw new TypeError("options must be an object");let{min:r=0,max:s=1e3,random:o=Math.random}=i;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(s))throw new TypeError("max must be an integer");if(r>=s)throw new RangeError("min must be smaller than max");let a=s-r,u=new jt(t,e);for(let d=0;d<t;d++)for(let g=0;g<e;g++){let v=r+Math.round(o()*a);u.set(d,g,v)}return u}static eye(t,e,i){e===void 0&&(e=t),i===void 0&&(i=1);let r=Math.min(t,e),s=this.zeros(t,e);for(let o=0;o<r;o++)s.set(o,o,i);return s}static diag(t,e,i){let r=t.length;e===void 0&&(e=r),i===void 0&&(i=e);let s=Math.min(r,e,i),o=this.zeros(e,i);for(let a=0;a<s;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let i=t.rows,r=t.columns,s=new jt(i,r);for(let o=0;o<i;o++)for(let a=0;a<r;a++)s.set(o,a,Math.min(t.get(o,a),e.get(o,a)));return s}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let i=t.rows,r=t.columns,s=new this(i,r);for(let o=0;o<i;o++)for(let a=0;a<r;a++)s.set(o,a,Math.max(t.get(o,a),e.get(o,a)));return s}static checkMatrix(t){return n.isMatrix(t)?t:new jt(t)}static isMatrix(t){return t!=null&&t.klass==="Matrix"}get size(){return this.rows*this.columns}apply(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)t.call(this,e,i);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)t.push(this.get(e,i));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let i=0;i<this.columns;i++)t[e].push(this.get(e,i))}return t}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let t=0;t<this.rows;t++)if(this.get(t,t)!==0)return!1;return!0}isEchelonForm(){let t=0,e=0,i=-1,r=!0,s=!1;for(;t<this.rows&&r;){for(e=0,s=!1;e<this.columns&&s===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>i?(s=!0,i=e):(r=!1,s=!0);t++}return r}isReducedEchelonForm(){let t=0,e=0,i=-1,r=!0,s=!1;for(;t<this.rows&&r;){for(e=0,s=!1;e<this.columns&&s===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>i?(s=!0,i=e):(r=!1,s=!0);for(let o=e+1;o<this.rows;o++)this.get(t,o)!==0&&(r=!1);t++}return r}echelonForm(){let t=this.clone(),e=0,i=0;for(;e<t.rows&&i<t.columns;){let r=e;for(let s=e;s<t.rows;s++)t.get(s,i)>t.get(r,i)&&(r=s);if(t.get(r,i)===0)i++;else{t.swapRows(e,r);let s=t.get(e,i);for(let o=i;o<t.columns;o++)t.set(e,o,t.get(e,o)/s);for(let o=e+1;o<t.rows;o++){let a=t.get(o,i)/t.get(e,i);t.set(o,i,0);for(let u=i+1;u<t.columns;u++)t.set(o,u,t.get(o,u)-t.get(e,u)*a)}e++,i++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,i=t.rows,r=i-1;for(;r>=0;)if(t.maxRow(r)===0)r--;else{let s=0,o=!1;for(;s<i&&o===!1;)t.get(r,s)===1?o=!0:s++;for(let a=0;a<r;a++){let u=t.get(a,s);for(let d=s;d<e;d++){let g=t.get(a,d)-u*t.get(r,d);t.set(a,d,g)}}r--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if(typeof t!="object")throw new TypeError("options must be an object");let{rows:e=1,columns:i=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(i)||i<=0)throw new TypeError("columns must be a positive integer");let r=new jt(this.rows*e,this.columns*i);for(let s=0;s<e;s++)for(let o=0;o<i;o++)r.setSubMatrix(this,this.rows*s,this.columns*o);return r}fill(t){for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,t);return this}neg(){return this.mulS(-1)}getRow(t){Ol(this,t);let e=[];for(let i=0;i<this.columns;i++)e.push(this.get(t,i));return e}getRowVector(t){return jt.rowVector(this.getRow(t))}setRow(t,e){Ol(this,t),e=ny(this,e);for(let i=0;i<this.columns;i++)this.set(t,i,e[i]);return this}swapRows(t,e){Ol(this,t),Ol(this,e);for(let i=0;i<this.columns;i++){let r=this.get(t,i);this.set(t,i,this.get(e,i)),this.set(e,i,r)}return this}getColumn(t){Fl(this,t);let e=[];for(let i=0;i<this.rows;i++)e.push(this.get(i,t));return e}getColumnVector(t){return jt.columnVector(this.getColumn(t))}setColumn(t,e){Fl(this,t),e=iy(this,e);for(let i=0;i<this.rows;i++)this.set(i,t,e[i]);return this}swapColumns(t,e){Fl(this,t),Fl(this,e);for(let i=0;i<this.rows;i++){let r=this.get(i,t);this.set(i,t,this.get(i,e)),this.set(i,e,r)}return this}addRowVector(t){t=ny(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)+t[i]);return this}subRowVector(t){t=ny(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)-t[i]);return this}mulRowVector(t){t=ny(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)*t[i]);return this}divRowVector(t){t=ny(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)/t[i]);return this}addColumnVector(t){t=iy(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)+t[e]);return this}subColumnVector(t){t=iy(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)-t[e]);return this}mulColumnVector(t){t=iy(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)*t[e]);return this}divColumnVector(t){t=iy(this,t);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)/t[e]);return this}mulRow(t,e){Ol(this,t);for(let i=0;i<this.columns;i++)this.set(t,i,this.get(t,i)*e);return this}mulColumn(t,e){Fl(this,t);for(let i=0;i<this.rows;i++)this.set(i,t,this.get(i,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{let e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)>e[i]&&(e[i]=this.get(i,r));return e}case"column":{let e=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)>e[r]&&(e[r]=this.get(i,r));return e}case void 0:{let e=this.get(0,0);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)>e&&(e=this.get(i,r));return e}default:throw new Error(`invalid option: ${t}`)}}maxIndex(){ty(this);let t=this.get(0,0),e=[0,0];for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)>t&&(t=this.get(i,r),e[0]=i,e[1]=r);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{let e=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)<e[i]&&(e[i]=this.get(i,r));return e}case"column":{let e=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)<e[r]&&(e[r]=this.get(i,r));return e}case void 0:{let e=this.get(0,0);for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)<e&&(e=this.get(i,r));return e}default:throw new Error(`invalid option: ${t}`)}}minIndex(){ty(this);let t=this.get(0,0),e=[0,0];for(let i=0;i<this.rows;i++)for(let r=0;r<this.columns;r++)this.get(i,r)<t&&(t=this.get(i,r),e[0]=i,e[1]=r);return e}maxRow(t){if(Ol(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let i=1;i<this.columns;i++)this.get(t,i)>e&&(e=this.get(t,i));return e}maxRowIndex(t){Ol(this,t),ty(this);let e=this.get(t,0),i=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),i[1]=r);return i}minRow(t){if(Ol(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let i=1;i<this.columns;i++)this.get(t,i)<e&&(e=this.get(t,i));return e}minRowIndex(t){Ol(this,t),ty(this);let e=this.get(t,0),i=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),i[1]=r);return i}maxColumn(t){if(Fl(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let i=1;i<this.rows;i++)this.get(i,t)>e&&(e=this.get(i,t));return e}maxColumnIndex(t){Fl(this,t),ty(this);let e=this.get(0,t),i=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),i[0]=r);return i}minColumn(t){if(Fl(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let i=1;i<this.rows;i++)this.get(i,t)<e&&(e=this.get(i,t));return e}minColumnIndex(t){Fl(this,t),ty(this);let e=this.get(0,t),i=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),i[0]=r);return i}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let i=0;i<t;i++)e.push(this.get(i,i));return e}norm(t="frobenius"){switch(t){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${t}`)}}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)t+=this.get(e,i),this.set(e,i,t);return this}dot(t){n.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let i=0;for(let r=0;r<e.length;r++)i+=e[r]*t[r];return i}mmul(t){t=jt.checkMatrix(t);let e=this.rows,i=this.columns,r=t.columns,s=new jt(e,r),o=new Float64Array(i);for(let a=0;a<r;a++){for(let u=0;u<i;u++)o[u]=t.get(u,a);for(let u=0;u<e;u++){let d=0;for(let g=0;g<i;g++)d+=this.get(u,g)*o[g];s.set(u,a,d)}}return s}mpow(t){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(t)||t<0)throw new RangeError("Exponent must be a non-negative integer");let e=jt.eye(this.rows),i=this;for(let r=t;r>=1;r/=2)(r&1)!==0&&(e=e.mmul(i)),i=i.mmul(i);return e}strassen2x2(t){t=jt.checkMatrix(t);let e=new jt(2,2),i=this.get(0,0),r=t.get(0,0),s=this.get(0,1),o=t.get(0,1),a=this.get(1,0),u=t.get(1,0),d=this.get(1,1),g=t.get(1,1),v=(i+d)*(r+g),x=(a+d)*r,C=i*(o-g),A=d*(u-r),O=(i+s)*g,N=(a-i)*(r+o),T=(s-d)*(u+g),j=v+A-O+T,Z=C+O,$=x+A,le=v-x+C+N;return e.set(0,0,j),e.set(0,1,Z),e.set(1,0,$),e.set(1,1,le),e}strassen3x3(t){t=jt.checkMatrix(t);let e=new jt(3,3),i=this.get(0,0),r=this.get(0,1),s=this.get(0,2),o=this.get(1,0),a=this.get(1,1),u=this.get(1,2),d=this.get(2,0),g=this.get(2,1),v=this.get(2,2),x=t.get(0,0),C=t.get(0,1),A=t.get(0,2),O=t.get(1,0),N=t.get(1,1),T=t.get(1,2),j=t.get(2,0),Z=t.get(2,1),$=t.get(2,2),le=(i+r+s-o-a-g-v)*N,K=(i-o)*(-C+N),oe=a*(-x+C+O-N-T-j+$),ue=(-i+o+a)*(x-C+N),te=(o+a)*(-x+C),V=i*x,se=(-i+d+g)*(x-A+T),we=(-i+d)*(A-T),de=(d+g)*(-x+A),je=(i+r+s-a-u-d-g)*T,Ue=g*(-x+A+O-N-T-j+Z),he=(-s+g+v)*(N+j-Z),Pe=(s-v)*(N-Z),me=s*j,$e=(g+v)*(-j+Z),nt=(-s+a+u)*(T+j-$),xt=(s-u)*(T-$),Tt=(a+u)*(-j+$),ut=r*O,Ie=u*Z,at=o*A,Pt=d*C,rt=v*$,Ut=V+me+ut,Cn=le+ue+te+V+he+me+$e,hn=V+se+de+je+me+nt+Tt,Mt=K+oe+ue+V+me+nt+xt,Xi=K+ue+te+V+Ie,Fn=me+nt+xt+Tt+at,Me=V+se+we+Ue+he+Pe+me,hr=he+Pe+me+$e+Pt,Kn=V+se+we+de+rt;return e.set(0,0,Ut),e.set(0,1,Cn),e.set(0,2,hn),e.set(1,0,Mt),e.set(1,1,Xi),e.set(1,2,Fn),e.set(2,0,Me),e.set(2,1,hr),e.set(2,2,Kn),e}mmulStrassen(t){t=jt.checkMatrix(t);let e=this.clone(),i=e.rows,r=e.columns,s=t.rows,o=t.columns;r!==s&&console.warn(`Multiplying ${i} x ${r} and ${s} x ${o} matrix: dimensions do not match.`);function a(v,x,C){let A=v.rows,O=v.columns;if(A===x&&O===C)return v;{let N=n.zeros(x,C);return N=N.setSubMatrix(v,0,0),N}}let u=Math.max(i,s),d=Math.max(r,o);e=a(e,u,d),t=a(t,u,d);function g(v,x,C,A){if(C<=512||A<=512)return v.mmul(x);C%2===1&&A%2===1?(v=a(v,C+1,A+1),x=a(x,C+1,A+1)):C%2===1?(v=a(v,C+1,A),x=a(x,C+1,A)):A%2===1&&(v=a(v,C,A+1),x=a(x,C,A+1));let O=parseInt(v.rows/2,10),N=parseInt(v.columns/2,10),T=v.subMatrix(0,O-1,0,N-1),j=x.subMatrix(0,O-1,0,N-1),Z=v.subMatrix(0,O-1,N,v.columns-1),$=x.subMatrix(0,O-1,N,x.columns-1),le=v.subMatrix(O,v.rows-1,0,N-1),K=x.subMatrix(O,x.rows-1,0,N-1),oe=v.subMatrix(O,v.rows-1,N,v.columns-1),ue=x.subMatrix(O,x.rows-1,N,x.columns-1),te=g(n.add(T,oe),n.add(j,ue),O,N),V=g(n.add(le,oe),j,O,N),se=g(T,n.sub($,ue),O,N),we=g(oe,n.sub(K,j),O,N),de=g(n.add(T,Z),ue,O,N),je=g(n.sub(le,T),n.add(j,$),O,N),Ue=g(n.sub(Z,oe),n.add(K,ue),O,N),he=n.add(te,we);he.sub(de),he.add(Ue);let Pe=n.add(se,de),me=n.add(V,we),$e=n.sub(te,V);$e.add(se),$e.add(je);let nt=n.zeros(2*he.rows,2*he.columns);return nt=nt.setSubMatrix(he,0,0),nt=nt.setSubMatrix(Pe,he.rows,0),nt=nt.setSubMatrix(me,0,he.columns),nt=nt.setSubMatrix($e,he.rows,he.columns),nt.subMatrix(0,C-1,0,A-1)}return g(e,t,u,d)}scaleRows(t={}){if(typeof t!="object")throw new TypeError("options must be an object");let{min:e=0,max:i=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(e>=i)throw new RangeError("min must be smaller than max");let r=new jt(this.rows,this.columns);for(let s=0;s<this.rows;s++){let o=this.getRow(s);o.length>0&&wH(o,{min:e,max:i,output:o}),r.setRow(s,o)}return r}scaleColumns(t={}){if(typeof t!="object")throw new TypeError("options must be an object");let{min:e=0,max:i=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(e>=i)throw new RangeError("min must be smaller than max");let r=new jt(this.rows,this.columns);for(let s=0;s<this.columns;s++){let o=this.getColumn(s);o.length&&wH(o,{min:e,max:i,output:o}),r.setColumn(s,o)}return r}flipRows(){let t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let i=0;i<t;i++){let r=this.get(e,i),s=this.get(e,this.columns-1-i);this.set(e,i,s),this.set(e,this.columns-1-i,r)}return this}flipColumns(){let t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let i=0;i<t;i++){let r=this.get(i,e),s=this.get(this.rows-1-i,e);this.set(i,e,s),this.set(this.rows-1-i,e,r)}return this}kroneckerProduct(t){t=jt.checkMatrix(t);let e=this.rows,i=this.columns,r=t.rows,s=t.columns,o=new jt(e*r,i*s);for(let a=0;a<e;a++)for(let u=0;u<i;u++)for(let d=0;d<r;d++)for(let g=0;g<s;g++)o.set(r*a+d,s*u+g,this.get(a,u)*t.get(d,g));return o}kroneckerSum(t){if(t=jt.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,i=t.rows,r=this.kroneckerProduct(jt.eye(i,i)),s=jt.eye(e,e).kroneckerProduct(t);return r.add(s)}transpose(){let t=new jt(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let i=0;i<this.columns;i++)t.set(i,e,this.get(e,i));return t}sortRows(t=CH){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=CH){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,i,r){ZR(this,t,e,i,r);let s=new jt(e-t+1,r-i+1);for(let o=t;o<=e;o++)for(let a=i;a<=r;a++)s.set(o-t,a-i,this.get(o,a));return s}subMatrixRow(t,e,i){if(e===void 0&&(e=0),i===void 0&&(i=this.columns-1),e>i||e<0||e>=this.columns||i<0||i>=this.columns)throw new RangeError("Argument out of range");let r=new jt(t.length,i-e+1);for(let s=0;s<t.length;s++)for(let o=e;o<=i;o++){if(t[s]<0||t[s]>=this.rows)throw new RangeError(`Row index out of range: ${t[s]}`);r.set(s,o-e,this.get(t[s],o))}return r}subMatrixColumn(t,e,i){if(e===void 0&&(e=0),i===void 0&&(i=this.rows-1),e>i||e<0||e>=this.rows||i<0||i>=this.rows)throw new RangeError("Argument out of range");let r=new jt(i-e+1,t.length);for(let s=0;s<t.length;s++)for(let o=e;o<=i;o++){if(t[s]<0||t[s]>=this.columns)throw new RangeError(`Column index out of range: ${t[s]}`);r.set(o-e,s,this.get(o,t[s]))}return r}setSubMatrix(t,e,i){if(t=jt.checkMatrix(t),t.isEmpty())return this;let r=e+t.rows-1,s=i+t.columns-1;ZR(this,e,r,i,s);for(let o=0;o<t.rows;o++)for(let a=0;a<t.columns;a++)this.set(e+o,i+a,t.get(o,a));return this}selection(t,e){sP(this,t),oP(this,e);let i=new jt(t.length,e.length);for(let r=0;r<t.length;r++){let s=t[r];for(let o=0;o<e.length;o++){let a=e[o];i.set(r,o,this.get(s,a))}}return i}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let i=0;i<t;i++)e+=this.get(i,i);return e}clone(){return this.constructor.copy(this,new jt(this.rows,this.columns))}static copy(t,e){for(let[i,r,s]of t.entries())e.set(i,r,s);return e}sum(t){switch(t){case"row":return jie(this);case"column":return Wie(this);case void 0:return Gie(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return $ie(this);case"column":return qie(this);case void 0:return Xie(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){let e=this.sum(t);switch(t){case"row":{for(let i=0;i<this.rows;i++)e[i]/=this.columns;return e}case"column":{for(let i=0;i<this.columns;i++)e[i]/=this.rows;return e}case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");let{unbiased:i=!0,mean:r=this.mean(t)}=e;if(typeof i!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":{if(!Ca.isAnyArray(r))throw new TypeError("mean must be an array");return Yie(this,i,r)}case"column":{if(!Ca.isAnyArray(r))throw new TypeError("mean must be an array");return Zie(this,i,r)}case void 0:{if(typeof r!="number")throw new TypeError("mean must be a number");return Kie(this,i,r)}default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){typeof t=="object"&&(e=t,t=void 0);let i=this.variance(t,e);if(t===void 0)return Math.sqrt(i);for(let r=0;r<i.length;r++)i[r]=Math.sqrt(i[r]);return i}center(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");let{center:i=this.mean(t)}=e;switch(t){case"row":{if(!Ca.isAnyArray(i))throw new TypeError("center must be an array");return Qie(this,i),this}case"column":{if(!Ca.isAnyArray(i))throw new TypeError("center must be an array");return Jie(this,i),this}case void 0:{if(typeof i!="number")throw new TypeError("center must be a number");return ere(this,i),this}default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");let i=e.scale;switch(t){case"row":{if(i===void 0)i=tre(this);else if(!Ca.isAnyArray(i))throw new TypeError("scale must be an array");return nre(this,i),this}case"column":{if(i===void 0)i=ire(this);else if(!Ca.isAnyArray(i))throw new TypeError("scale must be an array");return rre(this,i),this}case void 0:{if(i===void 0)i=sre(this);else if(typeof i!="number")throw new TypeError("scale must be a number");return ore(this,i),this}default:throw new Error(`invalid option: ${t}`)}}toString(t){return EH(this,t)}[Symbol.iterator](){return this.entries()}*entries(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield[t,e,this.get(t,e)]}*values(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield this.get(t,e)}};kr.prototype.klass="Matrix";typeof Symbol<"u"&&(kr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Vie);function CH(n,t){return n-t}function are(n){return n.every(t=>typeof t=="number")}kr.random=kr.rand;kr.randomInt=kr.randInt;kr.diagonal=kr.diag;kr.prototype.diagonal=kr.prototype.diag;kr.identity=kr.eye;kr.prototype.negate=kr.prototype.neg;kr.prototype.tensorProduct=kr.prototype.kroneckerProduct;var jt=class n extends kr{data;#e(t,e){if(this.data=[],Number.isInteger(e)&&e>=0)for(let i=0;i<t;i++)this.data.push(new Float64Array(e));else throw new TypeError("nColumns must be a positive integer");this.rows=t,this.columns=e}constructor(t,e){if(super(),n.isMatrix(t))this.#e(t.rows,t.columns),n.copy(t,this);else if(Number.isInteger(t)&&t>=0)this.#e(t,e);else if(Ca.isAnyArray(t)){let i=t;if(t=i.length,e=t?i[0].length:0,typeof e!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let r=0;r<t;r++){if(i[r].length!==e)throw new RangeError("Inconsistent array dimensions");if(!are(i[r]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(i[r]))}this.rows=t,this.columns=e}else throw new TypeError("First argument must be a positive number or an array")}set(t,e,i){return this.data[t][e]=i,this}get(t,e){return this.data[t][e]}removeRow(t){return Ol(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return e===void 0&&(e=t,t=this.rows),Ol(this,t,!0),e=Float64Array.from(ny(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){Fl(this,t);for(let e=0;e<this.rows;e++){let i=new Float64Array(this.columns-1);for(let r=0;r<t;r++)i[r]=this.data[e][r];for(let r=t+1;r<this.columns;r++)i[r-1]=this.data[e][r];this.data[e]=i}return this.columns-=1,this}addColumn(t,e){typeof e>"u"&&(e=t,t=this.columns),Fl(this,t,!0),e=iy(this,e);for(let i=0;i<this.rows;i++){let r=new Float64Array(this.columns+1),s=0;for(;s<t;s++)r[s]=this.data[i][s];for(r[s++]=e[i];s<this.columns+1;s++)r[s]=this.data[i][s-1];this.data[i]=r}return this.columns+=1,this}};Hie(kr,jt);var Ep=class n extends kr{#e;get size(){return this.#e.size}get rows(){return this.#e.rows}get columns(){return this.#e.columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(t){return jt.isMatrix(t)&&t.klassType==="SymmetricMatrix"}static zeros(t){return new this(t)}static ones(t){return new this(t).fill(1)}constructor(t){if(super(),jt.isMatrix(t)){if(!t.isSymmetric())throw new TypeError("not symmetric data");this.#e=jt.copy(t,new jt(t.rows,t.rows))}else if(Number.isInteger(t)&&t>=0)this.#e=new jt(t,t);else if(this.#e=new jt(t),!this.isSymmetric())throw new TypeError("not symmetric data")}clone(){let t=new n(this.diagonalSize);for(let[e,i,r]of this.upperRightEntries())t.set(e,i,r);return t}toMatrix(){return new jt(this)}get(t,e){return this.#e.get(t,e)}set(t,e,i){return this.#e.set(t,e,i),this.#e.set(e,t,i),this}removeCross(t){return this.#e.removeRow(t),this.#e.removeColumn(t),this}addCross(t,e){e===void 0&&(e=t,t=this.diagonalSize);let i=e.slice();return i.splice(t,1),this.#e.addRow(t,i),this.#e.addColumn(t,e),this}applyMask(t){if(t.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");let e=[];for(let[i,r]of t.entries())r||e.push(i);e.reverse();for(let i of e)this.removeCross(i);return this}toCompact(){let{diagonalSize:t}=this,e=new Array(t*(t+1)/2);for(let i=0,r=0,s=0;s<e.length;s++)e[s]=this.get(r,i),++i>=t&&(i=++r);return e}static fromCompact(t){let e=t.length,i=(Math.sqrt(8*e+1)-1)/2;if(!Number.isInteger(i))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(t)}`);let r=new n(i);for(let s=0,o=0,a=0;a<e;a++)r.set(s,o,t[a]),++s>=i&&(s=++o);return r}*upperRightEntries(){for(let t=0,e=0;t<this.diagonalSize;void 0){let i=this.get(t,e);yield[t,e,i],++e>=this.diagonalSize&&(e=++t)}}*upperRightValues(){for(let t=0,e=0;t<this.diagonalSize;void 0)yield this.get(t,e),++e>=this.diagonalSize&&(e=++t)}};Ep.prototype.klassType="SymmetricMatrix";var LC=class n extends Ep{static isDistanceMatrix(t){return Ep.isSymmetricMatrix(t)&&t.klassSubType==="DistanceMatrix"}constructor(t){if(super(t),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(t,e,i){return t===e&&(i=0),super.set(t,e,i)}addCross(t,e){return e===void 0&&(e=t,t=this.diagonalSize),e=e.slice(),e[t]=0,super.addCross(t,e)}toSymmetricMatrix(){return new Ep(this)}clone(){let t=new n(this.diagonalSize);for(let[e,i,r]of this.upperRightEntries())e!==i&&t.set(e,i,r);return t}toCompact(){let{diagonalSize:t}=this,e=(t-1)*t/2,i=new Array(e);for(let r=1,s=0,o=0;o<i.length;o++)i[o]=this.get(s,r),++r>=t&&(r=++s+1);return i}static fromCompact(t){let e=t.length;if(e===0)return new this(0);let i=(Math.sqrt(8*e+1)+1)/2;if(!Number.isInteger(i))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(t)}`);let r=new this(i);for(let s=1,o=0,a=0;a<e;a++)r.set(s,o,t[a]),++s>=i&&(s=++o+1);return r}};LC.prototype.klassSubType="DistanceMatrix";var Mc=class extends kr{constructor(t,e,i){super(),this.matrix=t,this.rows=e,this.columns=i}},KR=class extends Mc{constructor(t,e){Fl(t,e),super(t,t.rows,1),this.column=e}set(t,e,i){return this.matrix.set(t,this.column,i),this}get(t){return this.matrix.get(t,this.column)}},QR=class extends Mc{constructor(t,e){oP(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,i){return this.matrix.set(t,this.columnIndices[e],i),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}},JR=class extends Mc{constructor(t){super(t,t.rows,t.columns)}set(t,e,i){return this.matrix.set(t,this.columns-e-1,i),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}},eP=class extends Mc{constructor(t){super(t,t.rows,t.columns)}set(t,e,i){return this.matrix.set(this.rows-t-1,e,i),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}},tP=class extends Mc{constructor(t,e){Ol(t,e),super(t,1,t.columns),this.row=e}set(t,e,i){return this.matrix.set(this.row,e,i),this}get(t,e){return this.matrix.get(this.row,e)}},nP=class extends Mc{constructor(t,e){sP(t,e),super(t,e.length,t.columns),this.rowIndices=e}set(t,e,i){return this.matrix.set(this.rowIndices[t],e,i),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}},ry=class extends Mc{constructor(t,e,i){sP(t,e),oP(t,i),super(t,e.length,i.length),this.rowIndices=e,this.columnIndices=i}set(t,e,i){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],i),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}},iP=class extends Mc{constructor(t,e,i,r,s){ZR(t,e,i,r,s),super(t,i-e+1,s-r+1),this.startRow=e,this.startColumn=r}set(t,e,i){return this.matrix.set(this.startRow+t,this.startColumn+e,i),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}},rP=class extends Mc{constructor(t){super(t,t.columns,t.rows)}set(t,e,i){return this.matrix.set(e,t,i),this}get(t,e){return this.matrix.get(e,t)}},NC=class extends kr{constructor(t,e={}){let{rows:i=1}=e;if(t.length%i!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=i,this.columns=t.length/i,this.data=t}set(t,e,i){let r=this._calculateIndex(t,e);return this.data[r]=i,this}get(t,e){let i=this._calculateIndex(t,e);return this.data[i]}_calculateIndex(t,e){return t*this.columns+e}},ea=class extends kr{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,i){return this.data[t][e]=i,this}get(t,e){return this.data[t][e]}};function lre(n,t){if(Ca.isAnyArray(n))return n[0]&&Ca.isAnyArray(n[0])?new ea(n):new NC(n,t);throw new Error("the argument is not an array")}var sy=class{constructor(t){t=ea.checkMatrix(t);let e=t.clone(),i=e.rows,r=e.columns,s=new Float64Array(i),o=1,a,u,d,g,v,x,C,A,O;for(a=0;a<i;a++)s[a]=a;for(A=new Float64Array(i),u=0;u<r;u++){for(a=0;a<i;a++)A[a]=e.get(a,u);for(a=0;a<i;a++){for(O=Math.min(a,u),v=0,d=0;d<O;d++)v+=e.get(a,d)*A[d];A[a]-=v,e.set(a,u,A[a])}for(g=u,a=u+1;a<i;a++)Math.abs(A[a])>Math.abs(A[g])&&(g=a);if(g!==u){for(d=0;d<r;d++)x=e.get(g,d),e.set(g,d,e.get(u,d)),e.set(u,d,x);C=s[g],s[g]=s[u],s[u]=C,o=-o}if(u<i&&e.get(u,u)!==0)for(a=u+1;a<i;a++)e.set(a,u,e.get(a,u)/e.get(u,u))}this.LU=e,this.pivotVector=s,this.pivotSign=o}isSingular(){let t=this.LU,e=t.columns;for(let i=0;i<e;i++)if(t.get(i,i)===0)return!0;return!1}solve(t){t=jt.checkMatrix(t);let e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let r=t.columns,s=t.subMatrixRow(this.pivotVector,0,r-1),o=e.columns,a,u,d;for(d=0;d<o;d++)for(a=d+1;a<o;a++)for(u=0;u<r;u++)s.set(a,u,s.get(a,u)-s.get(d,u)*e.get(a,d));for(d=o-1;d>=0;d--){for(u=0;u<r;u++)s.set(d,u,s.get(d,u)/e.get(d,d));for(a=0;a<d;a++)for(u=0;u<r;u++)s.set(a,u,s.get(a,u)-s.get(d,u)*e.get(a,d))}return s}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,i=t.columns;for(let r=0;r<i;r++)e*=t.get(r,r);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,i=t.columns,r=new jt(e,i);for(let s=0;s<e;s++)for(let o=0;o<i;o++)s>o?r.set(s,o,t.get(s,o)):s===o?r.set(s,o,1):r.set(s,o,0);return r}get upperTriangularMatrix(){let t=this.LU,e=t.rows,i=t.columns,r=new jt(e,i);for(let s=0;s<e;s++)for(let o=0;o<i;o++)s<=o?r.set(s,o,t.get(s,o)):r.set(s,o,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}};function bh(n,t){let e=0;return Math.abs(n)>Math.abs(t)?(e=t/n,Math.abs(n)*Math.sqrt(1+e*e)):t!==0?(e=n/t,Math.abs(t)*Math.sqrt(1+e*e)):0}var x_=class{constructor(t){t=ea.checkMatrix(t);let e=t.clone(),i=t.rows,r=t.columns,s=new Float64Array(r),o,a,u,d;for(u=0;u<r;u++){let g=0;for(o=u;o<i;o++)g=bh(g,e.get(o,u));if(g!==0){for(e.get(u,u)<0&&(g=-g),o=u;o<i;o++)e.set(o,u,e.get(o,u)/g);for(e.set(u,u,e.get(u,u)+1),a=u+1;a<r;a++){for(d=0,o=u;o<i;o++)d+=e.get(o,u)*e.get(o,a);for(d=-d/e.get(u,u),o=u;o<i;o++)e.set(o,a,e.get(o,a)+d*e.get(o,u))}}s[u]=-g}this.QR=e,this.Rdiag=s}solve(t){t=jt.checkMatrix(t);let e=this.QR,i=e.rows;if(t.rows!==i)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r=t.columns,s=t.clone(),o=e.columns,a,u,d,g;for(d=0;d<o;d++)for(u=0;u<r;u++){for(g=0,a=d;a<i;a++)g+=e.get(a,d)*s.get(a,u);for(g=-g/e.get(d,d),a=d;a<i;a++)s.set(a,u,s.get(a,u)+g*e.get(a,d))}for(d=o-1;d>=0;d--){for(u=0;u<r;u++)s.set(d,u,s.get(d,u)/this.Rdiag[d]);for(a=0;a<d;a++)for(u=0;u<r;u++)s.set(a,u,s.get(a,u)-s.get(d,u)*e.get(a,d))}return s.subMatrix(0,o-1,0,r-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(this.Rdiag[e]===0)return!1;return!0}get upperTriangularMatrix(){let t=this.QR,e=t.columns,i=new jt(e,e),r,s;for(r=0;r<e;r++)for(s=0;s<e;s++)r<s?i.set(r,s,t.get(r,s)):r===s?i.set(r,s,this.Rdiag[r]):i.set(r,s,0);return i}get orthogonalMatrix(){let t=this.QR,e=t.rows,i=t.columns,r=new jt(e,i),s,o,a,u;for(a=i-1;a>=0;a--){for(s=0;s<e;s++)r.set(s,a,0);for(r.set(a,a,1),o=a;o<i;o++)if(t.get(a,a)!==0){for(u=0,s=a;s<e;s++)u+=t.get(s,a)*r.get(s,o);for(u=-u/t.get(a,a),s=a;s<e;s++)r.set(s,o,r.get(s,o)+u*t.get(s,a))}}return r}},zd=class{constructor(t,e={}){if(t=ea.checkMatrix(t),t.isEmpty())throw new Error("Matrix must be non-empty");let i=t.rows,r=t.columns,{computeLeftSingularVectors:s=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=e,u=!!s,d=!!o,g=!1,v;if(i<r)if(!a)v=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{v=t.transpose(),i=v.rows,r=v.columns,g=!0;let V=u;u=d,d=V}else v=t.clone();let x=Math.min(i,r),C=Math.min(i+1,r),A=new Float64Array(C),O=new jt(i,x),N=new jt(r,r),T=new Float64Array(r),j=new Float64Array(i),Z=new Float64Array(C);for(let V=0;V<C;V++)Z[V]=V;let $=Math.min(i-1,r),le=Math.max(0,Math.min(r-2,i)),K=Math.max($,le);for(let V=0;V<K;V++){if(V<$){A[V]=0;for(let se=V;se<i;se++)A[V]=bh(A[V],v.get(se,V));if(A[V]!==0){v.get(V,V)<0&&(A[V]=-A[V]);for(let se=V;se<i;se++)v.set(se,V,v.get(se,V)/A[V]);v.set(V,V,v.get(V,V)+1)}A[V]=-A[V]}for(let se=V+1;se<r;se++){if(V<$&&A[V]!==0){let we=0;for(let de=V;de<i;de++)we+=v.get(de,V)*v.get(de,se);we=-we/v.get(V,V);for(let de=V;de<i;de++)v.set(de,se,v.get(de,se)+we*v.get(de,V))}T[se]=v.get(V,se)}if(u&&V<$)for(let se=V;se<i;se++)O.set(se,V,v.get(se,V));if(V<le){T[V]=0;for(let se=V+1;se<r;se++)T[V]=bh(T[V],T[se]);if(T[V]!==0){T[V+1]<0&&(T[V]=0-T[V]);for(let se=V+1;se<r;se++)T[se]/=T[V];T[V+1]+=1}if(T[V]=-T[V],V+1<i&&T[V]!==0){for(let se=V+1;se<i;se++)j[se]=0;for(let se=V+1;se<i;se++)for(let we=V+1;we<r;we++)j[se]+=T[we]*v.get(se,we);for(let se=V+1;se<r;se++){let we=-T[se]/T[V+1];for(let de=V+1;de<i;de++)v.set(de,se,v.get(de,se)+we*j[de])}}if(d)for(let se=V+1;se<r;se++)N.set(se,V,T[se])}}let oe=Math.min(r,i+1);if($<r&&(A[$]=v.get($,$)),i<oe&&(A[oe-1]=0),le+1<oe&&(T[le]=v.get(le,oe-1)),T[oe-1]=0,u){for(let V=$;V<x;V++){for(let se=0;se<i;se++)O.set(se,V,0);O.set(V,V,1)}for(let V=$-1;V>=0;V--)if(A[V]!==0){for(let se=V+1;se<x;se++){let we=0;for(let de=V;de<i;de++)we+=O.get(de,V)*O.get(de,se);we=-we/O.get(V,V);for(let de=V;de<i;de++)O.set(de,se,O.get(de,se)+we*O.get(de,V))}for(let se=V;se<i;se++)O.set(se,V,-O.get(se,V));O.set(V,V,1+O.get(V,V));for(let se=0;se<V-1;se++)O.set(se,V,0)}else{for(let se=0;se<i;se++)O.set(se,V,0);O.set(V,V,1)}}if(d)for(let V=r-1;V>=0;V--){if(V<le&&T[V]!==0)for(let se=V+1;se<r;se++){let we=0;for(let de=V+1;de<r;de++)we+=N.get(de,V)*N.get(de,se);we=-we/N.get(V+1,V);for(let de=V+1;de<r;de++)N.set(de,se,N.get(de,se)+we*N.get(de,V))}for(let se=0;se<r;se++)N.set(se,V,0);N.set(V,V,1)}let ue=oe-1,te=Number.EPSILON;for(;oe>0;){let V,se;for(V=oe-2;V>=-1&&V!==-1;V--){let we=Number.MIN_VALUE+te*Math.abs(A[V]+Math.abs(A[V+1]));if(Math.abs(T[V])<=we||Number.isNaN(T[V])){T[V]=0;break}}if(V===oe-2)se=4;else{let we;for(we=oe-1;we>=V&&we!==V;we--){let de=(we!==oe?Math.abs(T[we]):0)+(we!==V+1?Math.abs(T[we-1]):0);if(Math.abs(A[we])<=te*de){A[we]=0;break}}we===V?se=3:we===oe-1?se=1:(se=2,V=we)}switch(V++,se){case 1:{let we=T[oe-2];T[oe-2]=0;for(let de=oe-2;de>=V;de--){let je=bh(A[de],we),Ue=A[de]/je,he=we/je;if(A[de]=je,de!==V&&(we=-he*T[de-1],T[de-1]=Ue*T[de-1]),d)for(let Pe=0;Pe<r;Pe++)je=Ue*N.get(Pe,de)+he*N.get(Pe,oe-1),N.set(Pe,oe-1,-he*N.get(Pe,de)+Ue*N.get(Pe,oe-1)),N.set(Pe,de,je)}break}case 2:{let we=T[V-1];T[V-1]=0;for(let de=V;de<oe;de++){let je=bh(A[de],we),Ue=A[de]/je,he=we/je;if(A[de]=je,we=-he*T[de],T[de]=Ue*T[de],u)for(let Pe=0;Pe<i;Pe++)je=Ue*O.get(Pe,de)+he*O.get(Pe,V-1),O.set(Pe,V-1,-he*O.get(Pe,de)+Ue*O.get(Pe,V-1)),O.set(Pe,de,je)}break}case 3:{let we=Math.max(Math.abs(A[oe-1]),Math.abs(A[oe-2]),Math.abs(T[oe-2]),Math.abs(A[V]),Math.abs(T[V])),de=A[oe-1]/we,je=A[oe-2]/we,Ue=T[oe-2]/we,he=A[V]/we,Pe=T[V]/we,me=((je+de)*(je-de)+Ue*Ue)/2,$e=de*Ue*(de*Ue),nt=0;(me!==0||$e!==0)&&(me<0?nt=0-Math.sqrt(me*me+$e):nt=Math.sqrt(me*me+$e),nt=$e/(me+nt));let xt=(he+de)*(he-de)+nt,Tt=he*Pe;for(let ut=V;ut<oe-1;ut++){let Ie=bh(xt,Tt);Ie===0&&(Ie=Number.MIN_VALUE);let at=xt/Ie,Pt=Tt/Ie;if(ut!==V&&(T[ut-1]=Ie),xt=at*A[ut]+Pt*T[ut],T[ut]=at*T[ut]-Pt*A[ut],Tt=Pt*A[ut+1],A[ut+1]=at*A[ut+1],d)for(let rt=0;rt<r;rt++)Ie=at*N.get(rt,ut)+Pt*N.get(rt,ut+1),N.set(rt,ut+1,-Pt*N.get(rt,ut)+at*N.get(rt,ut+1)),N.set(rt,ut,Ie);if(Ie=bh(xt,Tt),Ie===0&&(Ie=Number.MIN_VALUE),at=xt/Ie,Pt=Tt/Ie,A[ut]=Ie,xt=at*T[ut]+Pt*A[ut+1],A[ut+1]=-Pt*T[ut]+at*A[ut+1],Tt=Pt*T[ut+1],T[ut+1]=at*T[ut+1],u&&ut<i-1)for(let rt=0;rt<i;rt++)Ie=at*O.get(rt,ut)+Pt*O.get(rt,ut+1),O.set(rt,ut+1,-Pt*O.get(rt,ut)+at*O.get(rt,ut+1)),O.set(rt,ut,Ie)}T[oe-2]=xt;break}case 4:{if(A[V]<=0&&(A[V]=A[V]<0?-A[V]:0,d))for(let we=0;we<=ue;we++)N.set(we,V,-N.get(we,V));for(;V<ue&&!(A[V]>=A[V+1]);){let we=A[V];if(A[V]=A[V+1],A[V+1]=we,d&&V<r-1)for(let de=0;de<r;de++)we=N.get(de,V+1),N.set(de,V+1,N.get(de,V)),N.set(de,V,we);if(u&&V<i-1)for(let de=0;de<i;de++)we=O.get(de,V+1),O.set(de,V+1,O.get(de,V)),O.set(de,V,we);V++}oe--;break}}}if(g){let V=N;N=O,O=V}this.m=i,this.n=r,this.s=A,this.U=O,this.V=N}solve(t){let e=t,i=this.threshold,r=this.s.length,s=jt.zeros(r,r);for(let x=0;x<r;x++)Math.abs(this.s[x])<=i?s.set(x,x,0):s.set(x,x,1/this.s[x]);let o=this.U,a=this.rightSingularVectors,u=a.mmul(s),d=a.rows,g=o.rows,v=jt.zeros(d,g);for(let x=0;x<d;x++)for(let C=0;C<g;C++){let A=0;for(let O=0;O<r;O++)A+=u.get(x,O)*o.get(C,O);v.set(x,C,A)}return v.mmul(e)}solveForDiagonal(t){return this.solve(jt.diag(t))}inverse(){let t=this.V,e=this.threshold,i=t.rows,r=t.columns,s=new jt(i,this.s.length);for(let g=0;g<i;g++)for(let v=0;v<r;v++)Math.abs(this.s[v])>e&&s.set(g,v,t.get(g,v)/this.s[v]);let o=this.U,a=o.rows,u=o.columns,d=new jt(i,a);for(let g=0;g<i;g++)for(let v=0;v<a;v++){let x=0;for(let C=0;C<u;C++)x+=s.get(g,C)*o.get(v,C);d.set(g,v,x)}return d}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,i=this.s;for(let r=0,s=i.length;r<s;r++)i[r]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return jt.diag(this.s)}};function cre(n,t=!1){return n=ea.checkMatrix(n),t?new zd(n).inverse():TH(n,jt.eye(n.rows))}function TH(n,t,e=!1){return n=ea.checkMatrix(n),t=ea.checkMatrix(t),e?new zd(n).solve(t):n.isSquare()?new sy(n).solve(t):new x_(n).solve(t)}function kC(n){if(n=jt.checkMatrix(n),n.isSquare()){if(n.columns===0)return 1;let t,e,i,r;if(n.columns===2)return t=n.get(0,0),e=n.get(0,1),i=n.get(1,0),r=n.get(1,1),t*r-e*i;if(n.columns===3){let s,o,a;return s=new ry(n,[1,2],[1,2]),o=new ry(n,[1,2],[0,2]),a=new ry(n,[1,2],[0,1]),t=n.get(0,0),e=n.get(0,1),i=n.get(0,2),t*kC(s)-e*kC(o)+i*kC(a)}else return new sy(n).determinant}else throw Error("determinant can only be calculated for a square matrix")}function ure(n,t){let e=[];for(let i=0;i<n;i++)i!==t&&e.push(i);return e}function hre(n,t,e,i=1e-9,r=1e-9){if(n>r)return new Array(t.rows+1).fill(0);{let s=t.addRow(e,[0]);for(let o=0;o<s.rows;o++)Math.abs(s.get(o,0))<i&&s.set(o,0,0);return s.to1DArray()}}function dre(n,t={}){let{thresholdValue:e=1e-9,thresholdError:i=1e-9}=t;n=jt.checkMatrix(n);let r=n.rows,s=new jt(r,r);for(let o=0;o<r;o++){let a=jt.columnVector(n.getRow(o)),u=n.subMatrixRow(ure(r,o)).transpose(),g=new zd(u).solve(a),v=jt.sub(a,u.mmul(g)).abs().max();s.setRow(o,hre(v,g,o,e,i))}return s}function fre(n,t=Number.EPSILON){if(n=jt.checkMatrix(n),n.isEmpty())return n.transpose();let e=new zd(n,{autoTranspose:!0}),i=e.leftSingularVectors,r=e.rightSingularVectors,s=e.diagonal;for(let o=0;o<s.length;o++)Math.abs(s[o])>t?s[o]=1/s[o]:s[o]=0;return r.mmul(jt.diag(s).mmul(i.transpose()))}function pre(n,t=n,e={}){n=new jt(n);let i=!1;if(typeof t=="object"&&!jt.isMatrix(t)&&!Ca.isAnyArray(t)?(e=t,t=n,i=!0):t=new jt(t),n.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");let{center:r=!0}=e;r&&(n=n.center("column"),i||(t=t.center("column")));let s=n.transpose().mmul(t);for(let o=0;o<s.rows;o++)for(let a=0;a<s.columns;a++)s.set(o,a,s.get(o,a)*(1/(n.rows-1)));return s}function mre(n,t=n,e={}){n=new jt(n);let i=!1;if(typeof t=="object"&&!jt.isMatrix(t)&&!Ca.isAnyArray(t)?(e=t,t=n,i=!0):t=new jt(t),n.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");let{center:r=!0,scale:s=!0}=e;r&&(n.center("column"),i||t.center("column")),s&&(n.scale("column"),i||t.scale("column"));let o=n.standardDeviation("column",{unbiased:!0}),a=i?o:t.standardDeviation("column",{unbiased:!0}),u=n.transpose().mmul(t);for(let d=0;d<u.rows;d++)for(let g=0;g<u.columns;g++)u.set(d,g,u.get(d,g)*(1/(o[d]*a[g]))*(1/(n.rows-1)));return u}var OC=class{constructor(t,e={}){let{assumeSymmetric:i=!1}=e;if(t=ea.checkMatrix(t),!t.isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");let r=t.columns,s=new jt(r,r),o=new Float64Array(r),a=new Float64Array(r),u=t,d,g,v=!1;if(i?v=!0:v=t.isSymmetric(),v){for(d=0;d<r;d++)for(g=0;g<r;g++)s.set(d,g,u.get(d,g));gre(r,a,o,s),yre(r,a,o,s)}else{let x=new jt(r,r),C=new Float64Array(r);for(g=0;g<r;g++)for(d=0;d<r;d++)x.set(d,g,u.get(d,g));vre(r,x,C,s),_re(r,a,o,s,x)}this.n=r,this.e=a,this.d=o,this.V=s}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t=this.n,e=this.e,i=this.d,r=new jt(t,t),s,o;for(s=0;s<t;s++){for(o=0;o<t;o++)r.set(s,o,0);r.set(s,s,i[s]),e[s]>0?r.set(s,s+1,e[s]):e[s]<0&&r.set(s,s-1,e[s])}return r}};function gre(n,t,e,i){let r,s,o,a,u,d,g,v;for(u=0;u<n;u++)e[u]=i.get(n-1,u);for(a=n-1;a>0;a--){for(v=0,o=0,d=0;d<a;d++)v=v+Math.abs(e[d]);if(v===0)for(t[a]=e[a-1],u=0;u<a;u++)e[u]=i.get(a-1,u),i.set(a,u,0),i.set(u,a,0);else{for(d=0;d<a;d++)e[d]/=v,o+=e[d]*e[d];for(r=e[a-1],s=Math.sqrt(o),r>0&&(s=-s),t[a]=v*s,o=o-r*s,e[a-1]=r-s,u=0;u<a;u++)t[u]=0;for(u=0;u<a;u++){for(r=e[u],i.set(u,a,r),s=t[u]+i.get(u,u)*r,d=u+1;d<=a-1;d++)s+=i.get(d,u)*e[d],t[d]+=i.get(d,u)*r;t[u]=s}for(r=0,u=0;u<a;u++)t[u]/=o,r+=t[u]*e[u];for(g=r/(o+o),u=0;u<a;u++)t[u]-=g*e[u];for(u=0;u<a;u++){for(r=e[u],s=t[u],d=u;d<=a-1;d++)i.set(d,u,i.get(d,u)-(r*t[d]+s*e[d]));e[u]=i.get(a-1,u),i.set(a,u,0)}}e[a]=o}for(a=0;a<n-1;a++){if(i.set(n-1,a,i.get(a,a)),i.set(a,a,1),o=e[a+1],o!==0){for(d=0;d<=a;d++)e[d]=i.get(d,a+1)/o;for(u=0;u<=a;u++){for(s=0,d=0;d<=a;d++)s+=i.get(d,a+1)*i.get(d,u);for(d=0;d<=a;d++)i.set(d,u,i.get(d,u)-s*e[d])}}for(d=0;d<=a;d++)i.set(d,a+1,0)}for(u=0;u<n;u++)e[u]=i.get(n-1,u),i.set(n-1,u,0);i.set(n-1,n-1,1),t[0]=0}function yre(n,t,e,i){let r,s,o,a,u,d,g,v,x,C,A,O,N,T,j,Z;for(o=1;o<n;o++)t[o-1]=t[o];t[n-1]=0;let $=0,le=0,K=Number.EPSILON;for(d=0;d<n;d++){for(le=Math.max(le,Math.abs(e[d])+Math.abs(t[d])),g=d;g<n&&!(Math.abs(t[g])<=K*le);)g++;if(g>d)do{for(r=e[d],v=(e[d+1]-r)/(2*t[d]),x=bh(v,1),v<0&&(x=-x),e[d]=t[d]/(v+x),e[d+1]=t[d]*(v+x),C=e[d+1],s=r-e[d],o=d+2;o<n;o++)e[o]-=s;for($=$+s,v=e[g],A=1,O=A,N=A,T=t[d+1],j=0,Z=0,o=g-1;o>=d;o--)for(N=O,O=A,Z=j,r=A*t[o],s=A*v,x=bh(v,t[o]),t[o+1]=j*x,j=t[o]/x,A=v/x,v=A*e[o]-j*r,e[o+1]=s+j*(A*r+j*e[o]),u=0;u<n;u++)s=i.get(u,o+1),i.set(u,o+1,j*i.get(u,o)+A*s),i.set(u,o,A*i.get(u,o)-j*s);v=-j*Z*N*T*t[d]/C,t[d]=j*v,e[d]=A*v}while(Math.abs(t[d])>K*le);e[d]=e[d]+$,t[d]=0}for(o=0;o<n-1;o++){for(u=o,v=e[o],a=o+1;a<n;a++)e[a]<v&&(u=a,v=e[a]);if(u!==o)for(e[u]=e[o],e[o]=v,a=0;a<n;a++)v=i.get(a,o),i.set(a,o,i.get(a,u)),i.set(a,u,v)}}function vre(n,t,e,i){let r=0,s=n-1,o,a,u,d,g,v,x;for(v=r+1;v<=s-1;v++){for(x=0,d=v;d<=s;d++)x=x+Math.abs(t.get(d,v-1));if(x!==0){for(u=0,d=s;d>=v;d--)e[d]=t.get(d,v-1)/x,u+=e[d]*e[d];for(a=Math.sqrt(u),e[v]>0&&(a=-a),u=u-e[v]*a,e[v]=e[v]-a,g=v;g<n;g++){for(o=0,d=s;d>=v;d--)o+=e[d]*t.get(d,g);for(o=o/u,d=v;d<=s;d++)t.set(d,g,t.get(d,g)-o*e[d])}for(d=0;d<=s;d++){for(o=0,g=s;g>=v;g--)o+=e[g]*t.get(d,g);for(o=o/u,g=v;g<=s;g++)t.set(d,g,t.get(d,g)-o*e[g])}e[v]=x*e[v],t.set(v,v-1,x*a)}}for(d=0;d<n;d++)for(g=0;g<n;g++)i.set(d,g,d===g?1:0);for(v=s-1;v>=r+1;v--)if(t.get(v,v-1)!==0){for(d=v+1;d<=s;d++)e[d]=t.get(d,v-1);for(g=v;g<=s;g++){for(a=0,d=v;d<=s;d++)a+=e[d]*i.get(d,g);for(a=a/e[v]/t.get(v,v-1),d=v;d<=s;d++)i.set(d,g,i.get(d,g)+a*e[d])}}}function _re(n,t,e,i,r){let s=n-1,o=0,a=n-1,u=Number.EPSILON,d=0,g=0,v=0,x=0,C=0,A=0,O=0,N=0,T,j,Z,$,le,K,oe,ue,te,V,se,we,de,je,Ue;for(T=0;T<n;T++)for((T<o||T>a)&&(e[T]=r.get(T,T),t[T]=0),j=Math.max(T-1,0);j<n;j++)g=g+Math.abs(r.get(T,j));for(;s>=o;){for($=s;$>o&&(A=Math.abs(r.get($-1,$-1))+Math.abs(r.get($,$)),A===0&&(A=g),!(Math.abs(r.get($,$-1))<u*A));)$--;if($===s)r.set(s,s,r.get(s,s)+d),e[s]=r.get(s,s),t[s]=0,s--,N=0;else if($===s-1){if(oe=r.get(s,s-1)*r.get(s-1,s),v=(r.get(s-1,s-1)-r.get(s,s))/2,x=v*v+oe,O=Math.sqrt(Math.abs(x)),r.set(s,s,r.get(s,s)+d),r.set(s-1,s-1,r.get(s-1,s-1)+d),ue=r.get(s,s),x>=0){for(O=v>=0?v+O:v-O,e[s-1]=ue+O,e[s]=e[s-1],O!==0&&(e[s]=ue-oe/O),t[s-1]=0,t[s]=0,ue=r.get(s,s-1),A=Math.abs(ue)+Math.abs(O),v=ue/A,x=O/A,C=Math.sqrt(v*v+x*x),v=v/C,x=x/C,j=s-1;j<n;j++)O=r.get(s-1,j),r.set(s-1,j,x*O+v*r.get(s,j)),r.set(s,j,x*r.get(s,j)-v*O);for(T=0;T<=s;T++)O=r.get(T,s-1),r.set(T,s-1,x*O+v*r.get(T,s)),r.set(T,s,x*r.get(T,s)-v*O);for(T=o;T<=a;T++)O=i.get(T,s-1),i.set(T,s-1,x*O+v*i.get(T,s)),i.set(T,s,x*i.get(T,s)-v*O)}else e[s-1]=ue+v,e[s]=ue+v,t[s-1]=O,t[s]=-O;s=s-2,N=0}else{if(ue=r.get(s,s),te=0,oe=0,$<s&&(te=r.get(s-1,s-1),oe=r.get(s,s-1)*r.get(s-1,s)),N===10){for(d+=ue,T=o;T<=s;T++)r.set(T,T,r.get(T,T)-ue);A=Math.abs(r.get(s,s-1))+Math.abs(r.get(s-1,s-2)),ue=te=.75*A,oe=-.4375*A*A}if(N===30&&(A=(te-ue)/2,A=A*A+oe,A>0)){for(A=Math.sqrt(A),te<ue&&(A=-A),A=ue-oe/((te-ue)/2+A),T=o;T<=s;T++)r.set(T,T,r.get(T,T)-A);d+=A,ue=te=oe=.964}for(N=N+1,le=s-2;le>=$&&(O=r.get(le,le),C=ue-O,A=te-O,v=(C*A-oe)/r.get(le+1,le)+r.get(le,le+1),x=r.get(le+1,le+1)-O-C-A,C=r.get(le+2,le+1),A=Math.abs(v)+Math.abs(x)+Math.abs(C),v=v/A,x=x/A,C=C/A,!(le===$||Math.abs(r.get(le,le-1))*(Math.abs(x)+Math.abs(C))<u*(Math.abs(v)*(Math.abs(r.get(le-1,le-1))+Math.abs(O)+Math.abs(r.get(le+1,le+1))))));)le--;for(T=le+2;T<=s;T++)r.set(T,T-2,0),T>le+2&&r.set(T,T-3,0);for(Z=le;Z<=s-1&&(je=Z!==s-1,Z!==le&&(v=r.get(Z,Z-1),x=r.get(Z+1,Z-1),C=je?r.get(Z+2,Z-1):0,ue=Math.abs(v)+Math.abs(x)+Math.abs(C),ue!==0&&(v=v/ue,x=x/ue,C=C/ue)),ue!==0);Z++)if(A=Math.sqrt(v*v+x*x+C*C),v<0&&(A=-A),A!==0){for(Z!==le?r.set(Z,Z-1,-A*ue):$!==le&&r.set(Z,Z-1,-r.get(Z,Z-1)),v=v+A,ue=v/A,te=x/A,O=C/A,x=x/v,C=C/v,j=Z;j<n;j++)v=r.get(Z,j)+x*r.get(Z+1,j),je&&(v=v+C*r.get(Z+2,j),r.set(Z+2,j,r.get(Z+2,j)-v*O)),r.set(Z,j,r.get(Z,j)-v*ue),r.set(Z+1,j,r.get(Z+1,j)-v*te);for(T=0;T<=Math.min(s,Z+3);T++)v=ue*r.get(T,Z)+te*r.get(T,Z+1),je&&(v=v+O*r.get(T,Z+2),r.set(T,Z+2,r.get(T,Z+2)-v*C)),r.set(T,Z,r.get(T,Z)-v),r.set(T,Z+1,r.get(T,Z+1)-v*x);for(T=o;T<=a;T++)v=ue*i.get(T,Z)+te*i.get(T,Z+1),je&&(v=v+O*i.get(T,Z+2),i.set(T,Z+2,i.get(T,Z+2)-v*C)),i.set(T,Z,i.get(T,Z)-v),i.set(T,Z+1,i.get(T,Z+1)-v*x)}}}if(g!==0){for(s=n-1;s>=0;s--)if(v=e[s],x=t[s],x===0)for($=s,r.set(s,s,1),T=s-1;T>=0;T--){for(oe=r.get(T,T)-v,C=0,j=$;j<=s;j++)C=C+r.get(T,j)*r.get(j,s);if(t[T]<0)O=oe,A=C;else if($=T,t[T]===0?r.set(T,s,oe!==0?-C/oe:-C/(u*g)):(ue=r.get(T,T+1),te=r.get(T+1,T),x=(e[T]-v)*(e[T]-v)+t[T]*t[T],K=(ue*A-O*C)/x,r.set(T,s,K),r.set(T+1,s,Math.abs(ue)>Math.abs(O)?(-C-oe*K)/ue:(-A-te*K)/O)),K=Math.abs(r.get(T,s)),u*K*K>1)for(j=T;j<=s;j++)r.set(j,s,r.get(j,s)/K)}else if(x<0)for($=s-1,Math.abs(r.get(s,s-1))>Math.abs(r.get(s-1,s))?(r.set(s-1,s-1,x/r.get(s,s-1)),r.set(s-1,s,-(r.get(s,s)-v)/r.get(s,s-1))):(Ue=PC(0,-r.get(s-1,s),r.get(s-1,s-1)-v,x),r.set(s-1,s-1,Ue[0]),r.set(s-1,s,Ue[1])),r.set(s,s-1,0),r.set(s,s,1),T=s-2;T>=0;T--){for(V=0,se=0,j=$;j<=s;j++)V=V+r.get(T,j)*r.get(j,s-1),se=se+r.get(T,j)*r.get(j,s);if(oe=r.get(T,T)-v,t[T]<0)O=oe,C=V,A=se;else if($=T,t[T]===0?(Ue=PC(-V,-se,oe,x),r.set(T,s-1,Ue[0]),r.set(T,s,Ue[1])):(ue=r.get(T,T+1),te=r.get(T+1,T),we=(e[T]-v)*(e[T]-v)+t[T]*t[T]-x*x,de=(e[T]-v)*2*x,we===0&&de===0&&(we=u*g*(Math.abs(oe)+Math.abs(x)+Math.abs(ue)+Math.abs(te)+Math.abs(O))),Ue=PC(ue*C-O*V+x*se,ue*A-O*se-x*V,we,de),r.set(T,s-1,Ue[0]),r.set(T,s,Ue[1]),Math.abs(ue)>Math.abs(O)+Math.abs(x)?(r.set(T+1,s-1,(-V-oe*r.get(T,s-1)+x*r.get(T,s))/ue),r.set(T+1,s,(-se-oe*r.get(T,s)-x*r.get(T,s-1))/ue)):(Ue=PC(-C-te*r.get(T,s-1),-A-te*r.get(T,s),O,x),r.set(T+1,s-1,Ue[0]),r.set(T+1,s,Ue[1]))),K=Math.max(Math.abs(r.get(T,s-1)),Math.abs(r.get(T,s))),u*K*K>1)for(j=T;j<=s;j++)r.set(j,s-1,r.get(j,s-1)/K),r.set(j,s,r.get(j,s)/K)}for(T=0;T<n;T++)if(T<o||T>a)for(j=T;j<n;j++)i.set(T,j,r.get(T,j));for(j=n-1;j>=o;j--)for(T=o;T<=a;T++){for(O=0,Z=o;Z<=Math.min(j,a);Z++)O=O+i.get(T,Z)*r.get(Z,j);i.set(T,j,O)}}}function PC(n,t,e,i){let r,s;return Math.abs(e)>Math.abs(i)?(r=i/e,s=e+r*i,[(n+r*t)/s,(t-r*n)/s]):(r=e/i,s=i+r*e,[(r*n+t)/s,(r*t-n)/s])}var FC=class{constructor(t){if(t=ea.checkMatrix(t),!t.isSymmetric())throw new Error("Matrix is not symmetric");let e=t,i=e.rows,r=new jt(i,i),s=!0,o,a,u;for(a=0;a<i;a++){let d=0;for(u=0;u<a;u++){let g=0;for(o=0;o<u;o++)g+=r.get(u,o)*r.get(a,o);g=(e.get(a,u)-g)/r.get(u,u),r.set(a,u,g),d=d+g*g}for(d=e.get(a,a)-d,s&&=d>0,r.set(a,a,Math.sqrt(Math.max(d,0))),u=a+1;u<i;u++)r.set(a,u,0)}this.L=r,this.positiveDefinite=s}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=ea.checkMatrix(t);let e=this.L,i=e.rows;if(t.rows!==i)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let r=t.columns,s=t.clone(),o,a,u;for(u=0;u<i;u++)for(a=0;a<r;a++){for(o=0;o<u;o++)s.set(u,a,s.get(u,a)-s.get(o,a)*e.get(u,o));s.set(u,a,s.get(u,a)/e.get(u,u))}for(u=i-1;u>=0;u--)for(a=0;a<r;a++){for(o=u+1;o<i;o++)s.set(u,a,s.get(u,a)-s.get(o,a)*e.get(o,u));s.set(u,a,s.get(u,a)/e.get(u,u))}return s}get lowerTriangularMatrix(){return this.L}},BC=class{constructor(t,e={}){t=ea.checkMatrix(t);let{Y:i}=e,{scaleScores:r=!1,maxIterations:s=1e3,terminationCriteria:o=1e-10}=e,a;if(i){if(Ca.isAnyArray(i)&&typeof i[0]=="number"?i=jt.columnVector(i):i=ea.checkMatrix(i),i.rows!==t.rows)throw new Error("Y should have the same number of rows as X");a=i.getColumnVector(0)}else a=t.getColumnVector(0);let u=1,d,g,v,x;for(let C=0;C<s&&u>o;C++)v=t.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),v=v.div(v.norm()),d=t.mmul(v).div(v.transpose().mmul(v).get(0,0)),C>0&&(u=d.clone().sub(x).pow(2).sum()),x=d.clone(),i?(g=i.transpose().mmul(d).div(d.transpose().mmul(d).get(0,0)),g=g.div(g.norm()),a=i.mmul(g).div(g.transpose().mmul(g).get(0,0))):a=d;if(i){let C=t.transpose().mmul(d).div(d.transpose().mmul(d).get(0,0));C=C.div(C.norm());let A=t.clone().sub(d.clone().mmul(C.transpose())),O=a.transpose().mmul(d).div(d.transpose().mmul(d).get(0,0)),N=i.clone().sub(d.clone().mulS(O.get(0,0)).mmul(g.transpose()));this.t=d,this.p=C.transpose(),this.w=v.transpose(),this.q=g,this.u=a,this.s=d.transpose().mmul(d),this.xResidual=A,this.yResidual=N,this.betas=O}else this.w=v.transpose(),this.s=d.transpose().mmul(d).sqrt(),r?this.t=d.clone().div(this.s.get(0,0)):this.t=d,this.xResidual=t.sub(d.mmul(v.transpose()))}};ki.AbstractMatrix=kr;ki.CHO=FC;ki.CholeskyDecomposition=FC;ki.DistanceMatrix=LC;ki.EVD=OC;ki.EigenvalueDecomposition=OC;ki.LU=sy;ki.LuDecomposition=sy;ki.Matrix=jt;ki.MatrixColumnSelectionView=QR;ki.MatrixColumnView=KR;ki.MatrixFlipColumnView=JR;ki.MatrixFlipRowView=eP;ki.MatrixRowSelectionView=nP;ki.MatrixRowView=tP;ki.MatrixSelectionView=ry;ki.MatrixSubView=iP;ki.MatrixTransposeView=rP;ki.NIPALS=BC;ki.Nipals=BC;ki.QR=x_;ki.QrDecomposition=x_;ki.SVD=zd;ki.SingularValueDecomposition=zd;ki.SymmetricMatrix=Ep;ki.WrapperMatrix1D=NC;ki.WrapperMatrix2D=ea;ki.correlation=mre;ki.covariance=pre;ki.default=jt;ki.determinant=kC;ki.inverse=cre;ki.linearDependencies=dre;ki.pseudoInverse=fre;ki.solve=TH;ki.wrap=lre});var uP=px(($C,LH)=>{"use strict";(function(n,t){typeof $C=="object"&&typeof LH<"u"?t($C):typeof define=="function"&&define.amd?define(["exports"],t):(n=typeof globalThis<"u"?globalThis:n||self,t(n.leaflet={}))})($C,function(n){"use strict";var t="1.9.4";function e(c){var p,w,R,U;for(w=1,R=arguments.length;w<R;w++){U=arguments[w];for(p in U)c[p]=U[p]}return c}var i=Object.create||function(){function c(){}return function(p){return c.prototype=p,new c}}();function r(c,p){var w=Array.prototype.slice;if(c.bind)return c.bind.apply(c,w.call(arguments,1));var R=w.call(arguments,2);return function(){return c.apply(p,R.length?R.concat(w.call(arguments)):arguments)}}var s=0;function o(c){return"_leaflet_id"in c||(c._leaflet_id=++s),c._leaflet_id}function a(c,p,w){var R,U,ee,_e;return _e=function(){R=!1,U&&(ee.apply(w,U),U=!1)},ee=function(){R?U=arguments:(c.apply(w,arguments),setTimeout(_e,p),R=!0)},ee}function u(c,p,w){var R=p[1],U=p[0],ee=R-U;return c===R&&w?c:((c-U)%ee+ee)%ee+U}function d(){return!1}function g(c,p){if(p===!1)return c;var w=Math.pow(10,p===void 0?6:p);return Math.round(c*w)/w}function v(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function x(c){return v(c).split(/\s+/)}function C(c,p){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?i(c.options):{});for(var w in p)c.options[w]=p[w];return c.options}function A(c,p,w){var R=[];for(var U in c)R.push(encodeURIComponent(w?U.toUpperCase():U)+"="+encodeURIComponent(c[U]));return(!p||p.indexOf("?")===-1?"?":"&")+R.join("&")}var O=/\{ *([\w_ -]+) *\}/g;function N(c,p){return c.replace(O,function(w,R){var U=p[R];if(U===void 0)throw new Error("No value provided for variable "+w);return typeof U=="function"&&(U=U(p)),U})}var T=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function j(c,p){for(var w=0;w<c.length;w++)if(c[w]===p)return w;return-1}var Z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var le=0;function K(c){var p=+new Date,w=Math.max(0,16-(p-le));return le=p+w,window.setTimeout(c,w)}var oe=window.requestAnimationFrame||$("RequestAnimationFrame")||K,ue=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function te(c,p,w){if(w&&oe===K)c.call(p);else return oe.call(window,r(c,p))}function V(c){c&&ue.call(window,c)}var se={__proto__:null,extend:e,create:i,bind:r,get lastId(){return s},stamp:o,throttle:a,wrapNum:u,falseFn:d,formatNum:g,trim:v,splitWords:x,setOptions:C,getParamString:A,template:N,isArray:T,indexOf:j,emptyImageUrl:Z,requestFn:oe,cancelFn:ue,requestAnimFrame:te,cancelAnimFrame:V};function we(){}we.extend=function(c){var p=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},w=p.__super__=this.prototype,R=i(w);R.constructor=p,p.prototype=R;for(var U in this)Object.prototype.hasOwnProperty.call(this,U)&&U!=="prototype"&&U!=="__super__"&&(p[U]=this[U]);return c.statics&&e(p,c.statics),c.includes&&(de(c.includes),e.apply(null,[R].concat(c.includes))),e(R,c),delete R.statics,delete R.includes,R.options&&(R.options=w.options?i(w.options):{},e(R.options,c.options)),R._initHooks=[],R.callInitHooks=function(){if(!this._initHooksCalled){w.callInitHooks&&w.callInitHooks.call(this),this._initHooksCalled=!0;for(var ee=0,_e=R._initHooks.length;ee<_e;ee++)R._initHooks[ee].call(this)}},p},we.include=function(c){var p=this.prototype.options;return e(this.prototype,c),c.options&&(this.prototype.options=p,this.mergeOptions(c.options)),this},we.mergeOptions=function(c){return e(this.prototype.options,c),this},we.addInitHook=function(c){var p=Array.prototype.slice.call(arguments,1),w=typeof c=="function"?c:function(){this[c].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(w),this};function de(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=T(c)?c:[c];for(var p=0;p<c.length;p++)c[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var je={on:function(c,p,w){if(typeof c=="object")for(var R in c)this._on(R,c[R],p);else{c=x(c);for(var U=0,ee=c.length;U<ee;U++)this._on(c[U],p,w)}return this},off:function(c,p,w){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var R in c)this._off(R,c[R],p);else{c=x(c);for(var U=arguments.length===1,ee=0,_e=c.length;ee<_e;ee++)U?this._off(c[ee]):this._off(c[ee],p,w)}return this},_on:function(c,p,w,R){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(c,p,w)===!1){w===this&&(w=void 0);var U={fn:p,ctx:w};R&&(U.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(U)}},_off:function(c,p,w){var R,U,ee;if(this._events&&(R=this._events[c],!!R)){if(arguments.length===1){if(this._firingCount)for(U=0,ee=R.length;U<ee;U++)R[U].fn=d;delete this._events[c];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var _e=this._listens(c,p,w);if(_e!==!1){var Ve=R[_e];this._firingCount&&(Ve.fn=d,this._events[c]=R=R.slice()),R.splice(_e,1)}}},fire:function(c,p,w){if(!this.listens(c,w))return this;var R=e({},p,{type:c,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var U=this._events[c];if(U){this._firingCount=this._firingCount+1||1;for(var ee=0,_e=U.length;ee<_e;ee++){var Ve=U[ee],Oe=Ve.fn;Ve.once&&this.off(c,Oe,Ve.ctx),Oe.call(Ve.ctx||this,R)}this._firingCount--}}return w&&this._propagateEvent(R),this},listens:function(c,p,w,R){typeof c!="string"&&console.warn('"string" type argument expected');var U=p;typeof p!="function"&&(R=!!p,U=void 0,w=void 0);var ee=this._events&&this._events[c];if(ee&&ee.length&&this._listens(c,U,w)!==!1)return!0;if(R){for(var _e in this._eventParents)if(this._eventParents[_e].listens(c,p,w,R))return!0}return!1},_listens:function(c,p,w){if(!this._events)return!1;var R=this._events[c]||[];if(!p)return!!R.length;w===this&&(w=void 0);for(var U=0,ee=R.length;U<ee;U++)if(R[U].fn===p&&R[U].ctx===w)return U;return!1},once:function(c,p,w){if(typeof c=="object")for(var R in c)this._on(R,c[R],p,!0);else{c=x(c);for(var U=0,ee=c.length;U<ee;U++)this._on(c[U],p,w,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[o(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[o(c)],this},_propagateEvent:function(c){for(var p in this._eventParents)this._eventParents[p].fire(c.type,e({layer:c.target,propagatedFrom:c.target},c),!0)}};je.addEventListener=je.on,je.removeEventListener=je.clearAllEventListeners=je.off,je.addOneTimeEventListener=je.once,je.fireEvent=je.fire,je.hasEventListeners=je.listens;var Ue=we.extend(je);function he(c,p,w){this.x=w?Math.round(c):c,this.y=w?Math.round(p):p}var Pe=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};he.prototype={clone:function(){return new he(this.x,this.y)},add:function(c){return this.clone()._add(me(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(me(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new he(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new he(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Pe(this.x),this.y=Pe(this.y),this},distanceTo:function(c){c=me(c);var p=c.x-this.x,w=c.y-this.y;return Math.sqrt(p*p+w*w)},equals:function(c){return c=me(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=me(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function me(c,p,w){return c instanceof he?c:T(c)?new he(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new he(c.x,c.y):new he(c,p,w)}function $e(c,p){if(c)for(var w=p?[c,p]:c,R=0,U=w.length;R<U;R++)this.extend(w[R])}$e.prototype={extend:function(c){var p,w;if(!c)return this;if(c instanceof he||typeof c[0]=="number"||"x"in c)p=w=me(c);else if(c=nt(c),p=c.min,w=c.max,!p||!w)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=w.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(w.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(w.y,this.max.y)),this},getCenter:function(c){return me((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return me(this.min.x,this.max.y)},getTopRight:function(){return me(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var p,w;return typeof c[0]=="number"||c instanceof he?c=me(c):c=nt(c),c instanceof $e?(p=c.min,w=c.max):p=w=c,p.x>=this.min.x&&w.x<=this.max.x&&p.y>=this.min.y&&w.y<=this.max.y},intersects:function(c){c=nt(c);var p=this.min,w=this.max,R=c.min,U=c.max,ee=U.x>=p.x&&R.x<=w.x,_e=U.y>=p.y&&R.y<=w.y;return ee&&_e},overlaps:function(c){c=nt(c);var p=this.min,w=this.max,R=c.min,U=c.max,ee=U.x>p.x&&R.x<w.x,_e=U.y>p.y&&R.y<w.y;return ee&&_e},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var p=this.min,w=this.max,R=Math.abs(p.x-w.x)*c,U=Math.abs(p.y-w.y)*c;return nt(me(p.x-R,p.y-U),me(w.x+R,w.y+U))},equals:function(c){return c?(c=nt(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function nt(c,p){return!c||c instanceof $e?c:new $e(c,p)}function xt(c,p){if(c)for(var w=p?[c,p]:c,R=0,U=w.length;R<U;R++)this.extend(w[R])}xt.prototype={extend:function(c){var p=this._southWest,w=this._northEast,R,U;if(c instanceof ut)R=c,U=c;else if(c instanceof xt){if(R=c._southWest,U=c._northEast,!R||!U)return this}else return c?this.extend(Ie(c)||Tt(c)):this;return!p&&!w?(this._southWest=new ut(R.lat,R.lng),this._northEast=new ut(U.lat,U.lng)):(p.lat=Math.min(R.lat,p.lat),p.lng=Math.min(R.lng,p.lng),w.lat=Math.max(U.lat,w.lat),w.lng=Math.max(U.lng,w.lng)),this},pad:function(c){var p=this._southWest,w=this._northEast,R=Math.abs(p.lat-w.lat)*c,U=Math.abs(p.lng-w.lng)*c;return new xt(new ut(p.lat-R,p.lng-U),new ut(w.lat+R,w.lng+U))},getCenter:function(){return new ut((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ut(this.getNorth(),this.getWest())},getSouthEast:function(){return new ut(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof ut||"lat"in c?c=Ie(c):c=Tt(c);var p=this._southWest,w=this._northEast,R,U;return c instanceof xt?(R=c.getSouthWest(),U=c.getNorthEast()):R=U=c,R.lat>=p.lat&&U.lat<=w.lat&&R.lng>=p.lng&&U.lng<=w.lng},intersects:function(c){c=Tt(c);var p=this._southWest,w=this._northEast,R=c.getSouthWest(),U=c.getNorthEast(),ee=U.lat>=p.lat&&R.lat<=w.lat,_e=U.lng>=p.lng&&R.lng<=w.lng;return ee&&_e},overlaps:function(c){c=Tt(c);var p=this._southWest,w=this._northEast,R=c.getSouthWest(),U=c.getNorthEast(),ee=U.lat>p.lat&&R.lat<w.lat,_e=U.lng>p.lng&&R.lng<w.lng;return ee&&_e},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,p){return c?(c=Tt(c),this._southWest.equals(c.getSouthWest(),p)&&this._northEast.equals(c.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Tt(c,p){return c instanceof xt?c:new xt(c,p)}function ut(c,p,w){if(isNaN(c)||isNaN(p))throw new Error("Invalid LatLng object: ("+c+", "+p+")");this.lat=+c,this.lng=+p,w!==void 0&&(this.alt=+w)}ut.prototype={equals:function(c,p){if(!c)return!1;c=Ie(c);var w=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return w<=(p===void 0?1e-9:p)},toString:function(c){return"LatLng("+g(this.lat,c)+", "+g(this.lng,c)+")"},distanceTo:function(c){return Pt.distance(this,Ie(c))},wrap:function(){return Pt.wrapLatLng(this)},toBounds:function(c){var p=180*c/40075017,w=p/Math.cos(Math.PI/180*this.lat);return Tt([this.lat-p,this.lng-w],[this.lat+p,this.lng+w])},clone:function(){return new ut(this.lat,this.lng,this.alt)}};function Ie(c,p,w){return c instanceof ut?c:T(c)&&typeof c[0]!="object"?c.length===3?new ut(c[0],c[1],c[2]):c.length===2?new ut(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new ut(c.lat,"lng"in c?c.lng:c.lon,c.alt):p===void 0?null:new ut(c,p,w)}var at={latLngToPoint:function(c,p){var w=this.projection.project(c),R=this.scale(p);return this.transformation._transform(w,R)},pointToLatLng:function(c,p){var w=this.scale(p),R=this.transformation.untransform(c,w);return this.projection.unproject(R)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var p=this.projection.bounds,w=this.scale(c),R=this.transformation.transform(p.min,w),U=this.transformation.transform(p.max,w);return new $e(R,U)},infinite:!1,wrapLatLng:function(c){var p=this.wrapLng?u(c.lng,this.wrapLng,!0):c.lng,w=this.wrapLat?u(c.lat,this.wrapLat,!0):c.lat,R=c.alt;return new ut(w,p,R)},wrapLatLngBounds:function(c){var p=c.getCenter(),w=this.wrapLatLng(p),R=p.lat-w.lat,U=p.lng-w.lng;if(R===0&&U===0)return c;var ee=c.getSouthWest(),_e=c.getNorthEast(),Ve=new ut(ee.lat-R,ee.lng-U),Oe=new ut(_e.lat-R,_e.lng-U);return new xt(Ve,Oe)}},Pt=e({},at,{wrapLng:[-180,180],R:6371e3,distance:function(c,p){var w=Math.PI/180,R=c.lat*w,U=p.lat*w,ee=Math.sin((p.lat-c.lat)*w/2),_e=Math.sin((p.lng-c.lng)*w/2),Ve=ee*ee+Math.cos(R)*Math.cos(U)*_e*_e,Oe=2*Math.atan2(Math.sqrt(Ve),Math.sqrt(1-Ve));return this.R*Oe}}),rt=6378137,Ut={R:rt,MAX_LATITUDE:85.0511287798,project:function(c){var p=Math.PI/180,w=this.MAX_LATITUDE,R=Math.max(Math.min(w,c.lat),-w),U=Math.sin(R*p);return new he(this.R*c.lng*p,this.R*Math.log((1+U)/(1-U))/2)},unproject:function(c){var p=180/Math.PI;return new ut((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*p,c.x*p/this.R)},bounds:function(){var c=rt*Math.PI;return new $e([-c,-c],[c,c])}()};function Cn(c,p,w,R){if(T(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=p,this._c=w,this._d=R}Cn.prototype={transform:function(c,p){return this._transform(c.clone(),p)},_transform:function(c,p){return p=p||1,c.x=p*(this._a*c.x+this._b),c.y=p*(this._c*c.y+this._d),c},untransform:function(c,p){return p=p||1,new he((c.x/p-this._b)/this._a,(c.y/p-this._d)/this._c)}};function hn(c,p,w,R){return new Cn(c,p,w,R)}var Mt=e({},Pt,{code:"EPSG:3857",projection:Ut,transformation:function(){var c=.5/(Math.PI*Ut.R);return hn(c,.5,-c,.5)}()}),Xi=e({},Mt,{code:"EPSG:900913"});function Fn(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function Me(c,p){var w="",R,U,ee,_e,Ve,Oe;for(R=0,ee=c.length;R<ee;R++){for(Ve=c[R],U=0,_e=Ve.length;U<_e;U++)Oe=Ve[U],w+=(U?"L":"M")+Oe.x+" "+Oe.y;w+=p?on.svg?"z":"x":""}return w||"M0 0"}var hr=document.documentElement.style,Kn="ActiveXObject"in window,hi=Kn&&!document.addEventListener,rn="msLaunchUri"in navigator&&!("documentMode"in document),Jn=jr("webkit"),dn=jr("android"),In=jr("android 2")||jr("android 3"),Gi=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),fe=dn&&jr("Google")&&Gi<537&&!("AudioNode"in window),J=!!window.opera,Ge=!rn&&jr("chrome"),it=jr("gecko")&&!Jn&&!J&&!Kn,ht=!Ge&&jr("safari"),Ke=jr("phantom"),yn="OTransition"in hr,Ht=navigator.platform.indexOf("Win")===0,kt=Kn&&"transition"in hr,fn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!In,mt="MozPerspective"in hr,Jt=!window.L_DISABLE_3D&&(kt||fn||mt)&&!yn&&!Ke,pn=typeof orientation<"u"||jr("mobile"),vn=pn&&Jn,Ft=pn&&fn,_n=!window.PointerEvent&&window.MSPointerEvent,Re=!!(window.PointerEvent||_n),Lt="ontouchstart"in window||!!window.TouchEvent,wt=!window.L_NO_TOUCH&&(Lt||Re),nn=pn&&J,pt=pn&&it,ct=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,sn=function(){var c=!1;try{var p=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",d,p),window.removeEventListener("testPassiveEventSupport",d,p)}catch{}return c}(),Bn=function(){return!!document.createElement("canvas").getContext}(),An=!!(document.createElementNS&&Fn("svg").createSVGRect),Li=!!An&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ns=!An&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var p=c.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}}(),is=navigator.platform.indexOf("Mac")===0,Gh=navigator.platform.indexOf("Linux")===0;function jr(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var on={ie:Kn,ielt9:hi,edge:rn,webkit:Jn,android:dn,android23:In,androidStock:fe,opera:J,chrome:Ge,gecko:it,safari:ht,phantom:Ke,opera12:yn,win:Ht,ie3d:kt,webkit3d:fn,gecko3d:mt,any3d:Jt,mobile:pn,mobileWebkit:vn,mobileWebkit3d:Ft,msPointer:_n,pointer:Re,touch:wt,touchNative:Lt,mobileOpera:nn,mobileGecko:pt,retina:ct,passiveEvents:sn,canvas:Bn,svg:An,vml:ns,inlineSvg:Li,mac:is,linux:Gh},Wc=on.msPointer?"MSPointerDown":"pointerdown",Gc=on.msPointer?"MSPointerMove":"pointermove",Uu=on.msPointer?"MSPointerUp":"pointerup",ka=on.msPointer?"MSPointerCancel":"pointercancel",Yl={touchstart:Wc,touchmove:Gc,touchend:Uu,touchcancel:ka},Zl={touchstart:Fe,touchmove:re,touchend:re,touchcancel:re},Do={},hl=!1;function $h(c,p,w){return p==="touchstart"&&La(),Zl[p]?(w=Zl[p].bind(this,w),c.addEventListener(Yl[p],w,!1),w):(console.warn("wrong event specified:",p),d)}function Wr(c,p,w){if(!Yl[p]){console.warn("wrong event specified:",p);return}c.removeEventListener(Yl[p],w,!1)}function Hu(c){Do[c.pointerId]=c}function gf(c){Do[c.pointerId]&&(Do[c.pointerId]=c)}function qh(c){delete Do[c.pointerId]}function La(){hl||(document.addEventListener(Wc,Hu,!0),document.addEventListener(Gc,gf,!0),document.addEventListener(Uu,qh,!0),document.addEventListener(ka,qh,!0),hl=!0)}function re(c,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var w in Do)p.touches.push(Do[w]);p.changedTouches=[p],c(p)}}function Fe(c,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&Gr(p),re(c,p)}function qe(c){var p={},w,R;for(R in c)w=c[R],p[R]=w&&w.bind?w.bind(c):w;return c=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var Xe=200;function Be(c,p){c.addEventListener("dblclick",p);var w=0,R;function U(ee){if(ee.detail!==1){R=ee.detail;return}if(!(ee.pointerType==="mouse"||ee.sourceCapabilities&&!ee.sourceCapabilities.firesTouchEvents)){var _e=bf(ee);if(!(_e.some(function(Oe){return Oe instanceof HTMLLabelElement&&Oe.attributes.for})&&!_e.some(function(Oe){return Oe instanceof HTMLInputElement||Oe instanceof HTMLSelectElement}))){var Ve=Date.now();Ve-w<=Xe?(R++,R===2&&p(qe(ee))):R=1,w=Ve}}}return c.addEventListener("click",U),{dblclick:p,simDblclick:U}}function At(c,p){c.removeEventListener("dblclick",p.dblclick),c.removeEventListener("click",p.simDblclick)}var zt=Io(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$t=Io(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),qt=$t==="webkitTransition"||$t==="OTransition"?$t+"End":"transitionend";function Wt(c){return typeof c=="string"?document.getElementById(c):c}function Tn(c,p){var w=c.style[p]||c.currentStyle&&c.currentStyle[p];if((!w||w==="auto")&&document.defaultView){var R=document.defaultView.getComputedStyle(c,null);w=R?R[p]:null}return w==="auto"?null:w}function Rt(c,p,w){var R=document.createElement(c);return R.className=p||"",w&&w.appendChild(R),R}function gn(c){var p=c.parentNode;p&&p.removeChild(c)}function ri(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function Yi(c){var p=c.parentNode;p&&p.lastChild!==c&&p.appendChild(c)}function Ai(c){var p=c.parentNode;p&&p.firstChild!==c&&p.insertBefore(c,p.firstChild)}function yi(c,p){if(c.classList!==void 0)return c.classList.contains(p);var w=hs(c);return w.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(w)}function Dt(c,p){if(c.classList!==void 0)for(var w=x(p),R=0,U=w.length;R<U;R++)c.classList.add(w[R]);else if(!yi(c,p)){var ee=hs(c);ai(c,(ee?ee+" ":"")+p)}}function oi(c,p){c.classList!==void 0?c.classList.remove(p):ai(c,v((" "+hs(c)+" ").replace(" "+p+" "," ")))}function ai(c,p){c.className.baseVal===void 0?c.className=p:c.className.baseVal=p}function hs(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function Sr(c,p){"opacity"in c.style?c.style.opacity=p:"filter"in c.style&&ds(c,p)}function ds(c,p){var w=!1,R="DXImageTransform.Microsoft.Alpha";try{w=c.filters.item(R)}catch{if(p===1)return}p=Math.round(p*100),w?(w.Enabled=p!==100,w.Opacity=p):c.style.filter+=" progid:"+R+"(opacity="+p+")"}function Io(c){for(var p=document.documentElement.style,w=0;w<c.length;w++)if(c[w]in p)return c[w];return!1}function Mi(c,p,w){var R=p||new he(0,0);c.style[zt]=(on.ie3d?"translate("+R.x+"px,"+R.y+"px)":"translate3d("+R.x+"px,"+R.y+"px,0)")+(w?" scale("+w+")":"")}function Di(c,p){c._leaflet_pos=p,on.any3d?Mi(c,p):(c.style.left=p.x+"px",c.style.top=p.y+"px")}function Ni(c){return c._leaflet_pos||new he(0,0)}var lr,er,Kl;if("onselectstart"in document)lr=function(){ei(window,"selectstart",Gr)},er=function(){or(window,"selectstart",Gr)};else{var qs=Io(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);lr=function(){if(qs){var c=document.documentElement.style;Kl=c[qs],c[qs]="none"}},er=function(){qs&&(document.documentElement.style[qs]=Kl,Kl=void 0)}}function ju(){ei(window,"dragstart",Gr)}function Ql(){or(window,"dragstart",Gr)}var $c,yf;function dl(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(qc(),$c=c,yf=c.style.outlineStyle,c.style.outlineStyle="none",ei(window,"keydown",qc))}function qc(){$c&&($c.style.outlineStyle=yf,$c=void 0,yf=void 0,or(window,"keydown",qc))}function Jl(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function vf(c){var p=c.getBoundingClientRect();return{x:p.width/c.offsetWidth||1,y:p.height/c.offsetHeight||1,boundingClientRect:p}}var Xc={__proto__:null,TRANSFORM:zt,TRANSITION:$t,TRANSITION_END:qt,get:Wt,getStyle:Tn,create:Rt,remove:gn,empty:ri,toFront:Yi,toBack:Ai,hasClass:yi,addClass:Dt,removeClass:oi,setClass:ai,getClass:hs,setOpacity:Sr,testProp:Io,setTransform:Mi,setPosition:Di,getPosition:Ni,get disableTextSelection(){return lr},get enableTextSelection(){return er},disableImageDrag:ju,enableImageDrag:Ql,preventOutline:dl,restoreOutline:qc,getSizedParentNode:Jl,getScale:vf};function ei(c,p,w,R){if(p&&typeof p=="object")for(var U in p)Na(c,U,p[U],w);else{p=x(p);for(var ee=0,_e=p.length;ee<_e;ee++)Na(c,p[ee],w,R)}return this}var Ro="_leaflet_events";function or(c,p,w,R){if(arguments.length===1)Xh(c),delete c[Ro];else if(p&&typeof p=="object")for(var U in p)Yh(c,U,p[U],w);else if(p=x(p),arguments.length===2)Xh(c,function(Ve){return j(p,Ve)!==-1});else for(var ee=0,_e=p.length;ee<_e;ee++)Yh(c,p[ee],w,R);return this}function Xh(c,p){for(var w in c[Ro]){var R=w.split(/\d/)[0];(!p||p(R))&&Yh(c,R,null,null,w)}}var _f={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Na(c,p,w,R){var U=p+o(w)+(R?"_"+o(R):"");if(c[Ro]&&c[Ro][U])return this;var ee=function(Ve){return w.call(R||c,Ve||window.event)},_e=ee;!on.touchNative&&on.pointer&&p.indexOf("touch")===0?ee=$h(c,p,ee):on.touch&&p==="dblclick"?ee=Be(c,ee):"addEventListener"in c?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?c.addEventListener(_f[p]||p,ee,on.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(ee=function(Ve){Ve=Ve||window.event,Kh(c,Ve)&&_e(Ve)},c.addEventListener(_f[p],ee,!1)):c.addEventListener(p,_e,!1):c.attachEvent("on"+p,ee),c[Ro]=c[Ro]||{},c[Ro][U]=ee}function Yh(c,p,w,R,U){U=U||p+o(w)+(R?"_"+o(R):"");var ee=c[Ro]&&c[Ro][U];if(!ee)return this;!on.touchNative&&on.pointer&&p.indexOf("touch")===0?Wr(c,p,ee):on.touch&&p==="dblclick"?At(c,ee):"removeEventListener"in c?c.removeEventListener(_f[p]||p,ee,!1):c.detachEvent("on"+p,ee),c[Ro][U]=null}function fs(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function Yc(c){return Na(c,"wheel",fs),this}function Oa(c){return ei(c,"mousedown touchstart dblclick contextmenu",fs),c._leaflet_disable_click=!0,this}function Gr(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function aa(c){return Gr(c),fs(c),this}function bf(c){if(c.composedPath)return c.composedPath();for(var p=[],w=c.target;w;)p.push(w),w=w.parentNode;return p}function Wu(c,p){if(!p)return new he(c.clientX,c.clientY);var w=vf(p),R=w.boundingClientRect;return new he((c.clientX-R.left)/w.x-p.clientLeft,(c.clientY-R.top)/w.y-p.clientTop)}var T0=on.linux&&on.chrome?window.devicePixelRatio:on.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Zh(c){return on.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/T0:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function Kh(c,p){var w=p.relatedTarget;if(!w)return!0;try{for(;w&&w!==c;)w=w.parentNode}catch{return!1}return w!==c}var Gu={__proto__:null,on:ei,off:or,stopPropagation:fs,disableScrollPropagation:Yc,disableClickPropagation:Oa,preventDefault:Gr,stop:aa,getPropagationPath:bf,getMousePosition:Wu,getWheelDelta:Zh,isExternalTarget:Kh,addListener:ei,removeListener:or},ec=Ue.extend({run:function(c,p,w,R){this.stop(),this._el=c,this._inProgress=!0,this._duration=w||.25,this._easeOutPower=1/Math.max(R||.5,.2),this._startPos=Ni(c),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=te(this._animate,this),this._step()},_step:function(c){var p=+new Date-this._startTime,w=this._duration*1e3;p<w?this._runFrame(this._easeOut(p/w),c):(this._runFrame(1),this._complete())},_runFrame:function(c,p){var w=this._startPos.add(this._offset.multiplyBy(c));p&&w._round(),Di(this._el,w),this.fire("step")},_complete:function(){V(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),ni=Ue.extend({options:{crs:Mt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,p){p=C(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(Ie(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$t&&on.any3d&&!on.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ei(this._proxy,qt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,p,w){if(p=p===void 0?this._zoom:this._limitZoom(p),c=this._limitCenter(Ie(c),p,this.options.maxBounds),w=w||{},this._stop(),this._loaded&&!w.reset&&w!==!0){w.animate!==void 0&&(w.zoom=e({animate:w.animate},w.zoom),w.pan=e({animate:w.animate,duration:w.duration},w.pan));var R=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,p,w.zoom):this._tryAnimatedPan(c,w.pan);if(R)return clearTimeout(this._sizeTimer),this}return this._resetView(c,p,w.pan&&w.pan.noMoveStart),this},setZoom:function(c,p){return this._loaded?this.setView(this.getCenter(),c,{zoom:p}):(this._zoom=c,this)},zoomIn:function(c,p){return c=c||(on.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,p)},zoomOut:function(c,p){return c=c||(on.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,p)},setZoomAround:function(c,p,w){var R=this.getZoomScale(p),U=this.getSize().divideBy(2),ee=c instanceof he?c:this.latLngToContainerPoint(c),_e=ee.subtract(U).multiplyBy(1-1/R),Ve=this.containerPointToLatLng(U.add(_e));return this.setView(Ve,p,{zoom:w})},_getBoundsCenterZoom:function(c,p){p=p||{},c=c.getBounds?c.getBounds():Tt(c);var w=me(p.paddingTopLeft||p.padding||[0,0]),R=me(p.paddingBottomRight||p.padding||[0,0]),U=this.getBoundsZoom(c,!1,w.add(R));if(U=typeof p.maxZoom=="number"?Math.min(p.maxZoom,U):U,U===1/0)return{center:c.getCenter(),zoom:U};var ee=R.subtract(w).divideBy(2),_e=this.project(c.getSouthWest(),U),Ve=this.project(c.getNorthEast(),U),Oe=this.unproject(_e.add(Ve).divideBy(2).add(ee),U);return{center:Oe,zoom:U}},fitBounds:function(c,p){if(c=Tt(c),!c.isValid())throw new Error("Bounds are not valid.");var w=this._getBoundsCenterZoom(c,p);return this.setView(w.center,w.zoom,p)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,p){return this.setView(c,this._zoom,{pan:p})},panBy:function(c,p){if(c=me(c).round(),p=p||{},!c.x&&!c.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ec,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){Dt(this._mapPane,"leaflet-pan-anim");var w=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,w,p.duration||.25,p.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,p,w){if(w=w||{},w.animate===!1||!on.any3d)return this.setView(c,p,w);this._stop();var R=this.project(this.getCenter()),U=this.project(c),ee=this.getSize(),_e=this._zoom;c=Ie(c),p=p===void 0?_e:p;var Ve=Math.max(ee.x,ee.y),Oe=Ve*this.getZoomScale(_e,p),dt=U.distanceTo(R)||1,Zt=1.42,Ln=Zt*Zt;function li(Lr){var th=Lr?-1:1,Rf=Lr?Oe:Ve,Pf=Oe*Oe-Ve*Ve+th*Ln*Ln*dt*dt,fd=2*Rf*Ln*dt,nh=Pf/fd,wl=Math.sqrt(nh*nh+1)-nh,Fo=wl<1e-9?-18:Math.log(wl);return Fo}function ps(Lr){return(Math.exp(Lr)-Math.exp(-Lr))/2}function Dr(Lr){return(Math.exp(Lr)+Math.exp(-Lr))/2}function yo(Lr){return ps(Lr)/Dr(Lr)}var ss=li(0);function hc(Lr){return Ve*(Dr(ss)/Dr(ss+Zt*Lr))}function hd(Lr){return Ve*(Dr(ss)*yo(ss+Zt*Lr)-ps(ss))/Ln}function O0(Lr){return 1-Math.pow(1-Lr,1.5)}var Nm=Date.now(),Om=(li(1)-ss)/Zt,dd=w.duration?1e3*w.duration:1e3*Om*.8;function Fm(){var Lr=(Date.now()-Nm)/dd,th=O0(Lr)*Om;Lr<=1?(this._flyToFrame=te(Fm,this),this._move(this.unproject(R.add(U.subtract(R).multiplyBy(hd(th)/dt)),_e),this.getScaleZoom(Ve/hc(th),_e),{flyTo:!0})):this._move(c,p)._moveEnd(!0)}return this._moveStart(!0,w.noMoveStart),Fm.call(this),this},flyToBounds:function(c,p){var w=this._getBoundsCenterZoom(c,p);return this.flyTo(w.center,w.zoom,p)},setMaxBounds:function(c){return c=Tt(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var p=this.options.minZoom;return this.options.minZoom=c,this._loaded&&p!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var p=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&p!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,p){this._enforcingBounds=!0;var w=this.getCenter(),R=this._limitCenter(w,this._zoom,Tt(c));return w.equals(R)||this.panTo(R,p),this._enforcingBounds=!1,this},panInside:function(c,p){p=p||{};var w=me(p.paddingTopLeft||p.padding||[0,0]),R=me(p.paddingBottomRight||p.padding||[0,0]),U=this.project(this.getCenter()),ee=this.project(c),_e=this.getPixelBounds(),Ve=nt([_e.min.add(w),_e.max.subtract(R)]),Oe=Ve.getSize();if(!Ve.contains(ee)){this._enforcingBounds=!0;var dt=ee.subtract(Ve.getCenter()),Zt=Ve.extend(ee).getSize().subtract(Oe);U.x+=dt.x<0?-Zt.x:Zt.x,U.y+=dt.y<0?-Zt.y:Zt.y,this.panTo(this.unproject(U),p),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=e({animate:!1,pan:!0},c===!0?{animate:!0}:c);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var w=this.getSize(),R=p.divideBy(2).round(),U=w.divideBy(2).round(),ee=R.subtract(U);return!ee.x&&!ee.y?this:(c.animate&&c.pan?this.panBy(ee):(c.pan&&this._rawPanBy(ee),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:w}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=e({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=r(this._handleGeolocationResponse,this),w=r(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,w,c):navigator.geolocation.getCurrentPosition(p,w,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var p=c.code,w=c.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+w+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var p=c.coords.latitude,w=c.coords.longitude,R=new ut(p,w),U=R.toBounds(c.coords.accuracy*2),ee=this._locateOptions;if(ee.setView){var _e=this.getBoundsZoom(U);this.setView(R,ee.maxZoom?Math.min(_e,ee.maxZoom):_e)}var Ve={latlng:R,bounds:U,timestamp:c.timestamp};for(var Oe in c.coords)typeof c.coords[Oe]=="number"&&(Ve[Oe]=c.coords[Oe]);this.fire("locationfound",Ve)}},addHandler:function(c,p){if(!p)return this;var w=this[c]=new p(this);return this._handlers.push(w),this.options[c]&&w.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),gn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(V(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)gn(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,p){var w="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),R=Rt("div",w,p||this._mapPane);return c&&(this._panes[c]=R),R},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),p=this.unproject(c.getBottomLeft()),w=this.unproject(c.getTopRight());return new xt(p,w)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,p,w){c=Tt(c),w=me(w||[0,0]);var R=this.getZoom()||0,U=this.getMinZoom(),ee=this.getMaxZoom(),_e=c.getNorthWest(),Ve=c.getSouthEast(),Oe=this.getSize().subtract(w),dt=nt(this.project(Ve,R),this.project(_e,R)).getSize(),Zt=on.any3d?this.options.zoomSnap:1,Ln=Oe.x/dt.x,li=Oe.y/dt.y,ps=p?Math.max(Ln,li):Math.min(Ln,li);return R=this.getScaleZoom(ps,R),Zt&&(R=Math.round(R/(Zt/100))*(Zt/100),R=p?Math.ceil(R/Zt)*Zt:Math.floor(R/Zt)*Zt),Math.max(U,Math.min(ee,R))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new he(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,p){var w=this._getTopLeftPoint(c,p);return new $e(w,w.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,p){var w=this.options.crs;return p=p===void 0?this._zoom:p,w.scale(c)/w.scale(p)},getScaleZoom:function(c,p){var w=this.options.crs;p=p===void 0?this._zoom:p;var R=w.zoom(c*w.scale(p));return isNaN(R)?1/0:R},project:function(c,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(Ie(c),p)},unproject:function(c,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(me(c),p)},layerPointToLatLng:function(c){var p=me(c).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(c){var p=this.project(Ie(c))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(Ie(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(Tt(c))},distance:function(c,p){return this.options.crs.distance(Ie(c),Ie(p))},containerPointToLayerPoint:function(c){return me(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return me(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var p=this.containerPointToLayerPoint(me(c));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ie(c)))},mouseEventToContainerPoint:function(c){return Wu(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var p=this._container=Wt(c);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ei(p,"scroll",this._onScroll,this),this._containerId=o(p)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&on.any3d,Dt(c,"leaflet-container"+(on.touch?" leaflet-touch":"")+(on.retina?" leaflet-retina":"")+(on.ielt9?" leaflet-oldie":"")+(on.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=Tn(c,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Di(this._mapPane,new he(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Dt(c.markerPane,"leaflet-zoom-hide"),Dt(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,p,w){Di(this._mapPane,new he(0,0));var R=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var U=this._zoom!==p;this._moveStart(U,w)._move(c,p)._moveEnd(U),this.fire("viewreset"),R&&this.fire("load")},_moveStart:function(c,p){return c&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(c,p,w,R){p===void 0&&(p=this._zoom);var U=this._zoom!==p;return this._zoom=p,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),R?w&&w.pinch&&this.fire("zoom",w):((U||w&&w.pinch)&&this.fire("zoom",w),this.fire("move",w)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return V(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){Di(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[o(this._container)]=this;var p=c?or:ei;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),on.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){V(this._resizeRequest),this._resizeRequest=te(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,p){for(var w=[],R,U=p==="mouseout"||p==="mouseover",ee=c.target||c.srcElement,_e=!1;ee;){if(R=this._targets[o(ee)],R&&(p==="click"||p==="preclick")&&this._draggableMoved(R)){_e=!0;break}if(R&&R.listens(p,!0)&&(U&&!Kh(ee,c)||(w.push(R),U))||ee===this._container)break;ee=ee.parentNode}return!w.length&&!_e&&!U&&this.listens(p,!0)&&(w=[this]),w},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var p=c.target||c.srcElement;if(!(!this._loaded||p._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(p))){var w=c.type;w==="mousedown"&&dl(p),this._fireDOMEvent(c,w)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,p,w){if(c.type==="click"){var R=e({},c);R.type="preclick",this._fireDOMEvent(R,R.type,w)}var U=this._findEventTargets(c,p);if(w){for(var ee=[],_e=0;_e<w.length;_e++)w[_e].listens(p,!0)&&ee.push(w[_e]);U=ee.concat(U)}if(U.length){p==="contextmenu"&&Gr(c);var Ve=U[0],Oe={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var dt=Ve.getLatLng&&(!Ve._radius||Ve._radius<=10);Oe.containerPoint=dt?this.latLngToContainerPoint(Ve.getLatLng()):this.mouseEventToContainerPoint(c),Oe.layerPoint=this.containerPointToLayerPoint(Oe.containerPoint),Oe.latlng=dt?Ve.getLatLng():this.layerPointToLatLng(Oe.layerPoint)}for(_e=0;_e<U.length;_e++)if(U[_e].fire(p,Oe,!0),Oe.originalEvent._stopped||U[_e].options.bubblingMouseEvents===!1&&j(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,p=this._handlers.length;c<p;c++)this._handlers[c].disable()},whenReady:function(c,p){return this._loaded?c.call(p||this,{target:this}):this.on("load",c,p),this},_getMapPanePos:function(){return Ni(this._mapPane)||new he(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,p){var w=c&&p!==void 0?this._getNewPixelOrigin(c,p):this.getPixelOrigin();return w.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,p){var w=this.getSize()._divideBy(2);return this.project(c,p)._subtract(w)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,p,w){var R=this._getNewPixelOrigin(w,p);return this.project(c,p)._subtract(R)},_latLngBoundsToNewLayerBounds:function(c,p,w){var R=this._getNewPixelOrigin(w,p);return nt([this.project(c.getSouthWest(),p)._subtract(R),this.project(c.getNorthWest(),p)._subtract(R),this.project(c.getSouthEast(),p)._subtract(R),this.project(c.getNorthEast(),p)._subtract(R)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,p,w){if(!w)return c;var R=this.project(c,p),U=this.getSize().divideBy(2),ee=new $e(R.subtract(U),R.add(U)),_e=this._getBoundsOffset(ee,w,p);return Math.abs(_e.x)<=1&&Math.abs(_e.y)<=1?c:this.unproject(R.add(_e),p)},_limitOffset:function(c,p){if(!p)return c;var w=this.getPixelBounds(),R=new $e(w.min.add(c),w.max.add(c));return c.add(this._getBoundsOffset(R,p))},_getBoundsOffset:function(c,p,w){var R=nt(this.project(p.getNorthEast(),w),this.project(p.getSouthWest(),w)),U=R.min.subtract(c.min),ee=R.max.subtract(c.max),_e=this._rebound(U.x,-ee.x),Ve=this._rebound(U.y,-ee.y);return new he(_e,Ve)},_rebound:function(c,p){return c+p>0?Math.round(c-p)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(p))},_limitZoom:function(c){var p=this.getMinZoom(),w=this.getMaxZoom(),R=on.any3d?this.options.zoomSnap:1;return R&&(c=Math.round(c/R)*R),Math.max(p,Math.min(w,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){oi(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,p){var w=this._getCenterOffset(c)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(w)?!1:(this.panBy(w,p),!0)},_createAnimProxy:function(){var c=this._proxy=Rt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(p){var w=zt,R=this._proxy.style[w];Mi(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),R===this._proxy.style[w]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){gn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),p=this.getZoom();Mi(this._proxy,this.project(c,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,p,w){if(this._animatingZoom)return!0;if(w=w||{},!this._zoomAnimated||w.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var R=this.getZoomScale(p),U=this._getCenterOffset(c)._divideBy(1-1/R);return w.animate!==!0&&!this.getSize().contains(U)?!1:(te(function(){this._moveStart(!0,w.noMoveStart||!1)._animateZoom(c,p,!0)},this),!0)},_animateZoom:function(c,p,w,R){this._mapPane&&(w&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=p,Dt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:p,noUpdate:R}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&oi(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Qh(c,p){return new ni(c,p)}var Is=we.extend({options:{position:"topright"},initialize:function(c){C(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var p=this._map;return p&&p.removeControl(this),this.options.position=c,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var p=this._container=this.onAdd(c),w=this.getPosition(),R=c._controlCorners[w];return Dt(p,"leaflet-control"),w.indexOf("bottom")!==-1?R.insertBefore(p,R.firstChild):R.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(gn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),$u=function(c){return new Is(c)};ni.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},p="leaflet-",w=this._controlContainer=Rt("div",p+"control-container",this._container);function R(U,ee){var _e=p+U+" "+p+ee;c[U+ee]=Rt("div",_e,w)}R("top","left"),R("top","right"),R("bottom","left"),R("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)gn(this._controlCorners[c]);gn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var _m=Is.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,p,w,R){return w<R?-1:R<w?1:0}},initialize:function(c,p,w){C(this,w),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var R in c)this._addLayer(c[R],R);for(R in p)this._addLayer(p[R],R,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return Is.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,p){return this._addLayer(c,p),this._map?this._update():this},addOverlay:function(c,p){return this._addLayer(c,p,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var p=this._getLayer(o(c));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){Dt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(Dt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):oi(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return oi(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",p=this._container=Rt("div",c),w=this.options.collapsed;p.setAttribute("aria-haspopup",!0),Oa(p),Yc(p);var R=this._section=Rt("section",c+"-list");w&&(this._map.on("click",this.collapse,this),ei(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var U=this._layersLink=Rt("a",c+"-toggle",p);U.href="#",U.title="Layers",U.setAttribute("role","button"),ei(U,{keydown:function(ee){ee.keyCode===13&&this._expandSafely()},click:function(ee){Gr(ee),this._expandSafely()}},this),w||this.expand(),this._baseLayersList=Rt("div",c+"-base",R),this._separator=Rt("div",c+"-separator",R),this._overlaysList=Rt("div",c+"-overlays",R),p.appendChild(R)},_getLayer:function(c){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&o(this._layers[p].layer)===c)return this._layers[p]},_addLayer:function(c,p,w){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:p,overlay:w}),this.options.sortLayers&&this._layers.sort(r(function(R,U){return this.options.sortFunction(R.layer,U.layer,R.name,U.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ri(this._baseLayersList),ri(this._overlaysList),this._layerControlInputs=[];var c,p,w,R,U=0;for(w=0;w<this._layers.length;w++)R=this._layers[w],this._addItem(R),p=p||R.overlay,c=c||!R.overlay,U+=R.overlay?0:1;return this.options.hideSingleBase&&(c=c&&U>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=p&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var p=this._getLayer(o(c.target)),w=p.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;w&&this._map.fire(w,p)},_createRadioElement:function(c,p){var w='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(p?' checked="checked"':"")+"/>",R=document.createElement("div");return R.innerHTML=w,R.firstChild},_addItem:function(c){var p=document.createElement("label"),w=this._map.hasLayer(c.layer),R;c.overlay?(R=document.createElement("input"),R.type="checkbox",R.className="leaflet-control-layers-selector",R.defaultChecked=w):R=this._createRadioElement("leaflet-base-layers_"+o(this),w),this._layerControlInputs.push(R),R.layerId=o(c.layer),ei(R,"click",this._onInputClick,this);var U=document.createElement("span");U.innerHTML=" "+c.name;var ee=document.createElement("span");p.appendChild(ee),ee.appendChild(R),ee.appendChild(U);var _e=c.overlay?this._overlaysList:this._baseLayersList;return _e.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,p,w,R=[],U=[];this._handlingClick=!0;for(var ee=c.length-1;ee>=0;ee--)p=c[ee],w=this._getLayer(p.layerId).layer,p.checked?R.push(w):p.checked||U.push(w);for(ee=0;ee<U.length;ee++)this._map.hasLayer(U[ee])&&this._map.removeLayer(U[ee]);for(ee=0;ee<R.length;ee++)this._map.hasLayer(R[ee])||this._map.addLayer(R[ee]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,p,w,R=this._map.getZoom(),U=c.length-1;U>=0;U--)p=c[U],w=this._getLayer(p.layerId).layer,p.disabled=w.options.minZoom!==void 0&&R<w.options.minZoom||w.options.maxZoom!==void 0&&R>w.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,ei(c,"click",Gr),this.expand();var p=this;setTimeout(function(){or(c,"click",Gr),p._preventClick=!1})}}),Zc=function(c,p,w){return new _m(c,p,w)},Ar=Is.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var p="leaflet-control-zoom",w=Rt("div",p+" leaflet-bar"),R=this.options;return this._zoomInButton=this._createButton(R.zoomInText,R.zoomInTitle,p+"-in",w,this._zoomIn),this._zoomOutButton=this._createButton(R.zoomOutText,R.zoomOutTitle,p+"-out",w,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),w},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,p,w,R,U){var ee=Rt("a",w,R);return ee.innerHTML=c,ee.href="#",ee.title=p,ee.setAttribute("role","button"),ee.setAttribute("aria-label",p),Oa(ee),ei(ee,"click",aa),ei(ee,"click",U,this),ei(ee,"click",this._refocusOnMap,this),ee},_updateDisabled:function(){var c=this._map,p="leaflet-disabled";oi(this._zoomInButton,p),oi(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(Dt(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(Dt(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});ni.mergeOptions({zoomControl:!0}),ni.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ar,this.addControl(this.zoomControl))});var la=function(c){return new Ar(c)},Kc=Is.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var p="leaflet-control-scale",w=Rt("div",p),R=this.options;return this._addScales(R,p+"-line",w),c.on(R.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),w},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,p,w){c.metric&&(this._mScale=Rt("div",p,w)),c.imperial&&(this._iScale=Rt("div",p,w))},_update:function(){var c=this._map,p=c.getSize().y/2,w=c.distance(c.containerPointToLatLng([0,p]),c.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(w)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var p=this._getRoundNum(c),w=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,w,p/c)},_updateImperial:function(c){var p=c*3.2808399,w,R,U;p>5280?(w=p/5280,R=this._getRoundNum(w),this._updateScale(this._iScale,R+" mi",R/w)):(U=this._getRoundNum(p),this._updateScale(this._iScale,U+" ft",U/p))},_updateScale:function(c,p,w){c.style.width=Math.round(this.options.maxWidth*w)+"px",c.innerHTML=p},_getRoundNum:function(c){var p=Math.pow(10,(Math.floor(c)+"").length-1),w=c/p;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:1,p*w}}),A0=function(c){return new Kc(c)},bm='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',tc=Is.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(on.inlineSvg?bm+" ":"")+"Leaflet</a>"},initialize:function(c){C(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=Rt("div","leaflet-control-attribution"),Oa(this._container);for(var p in c._layers)c._layers[p].getAttribution&&this.addAttribution(c._layers[p].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var p in this._attributions)this._attributions[p]&&c.push(p);var w=[];this.options.prefix&&w.push(this.options.prefix),c.length&&w.push(c.join(", ")),this._container.innerHTML=w.join(' <span aria-hidden="true">|</span> ')}}});ni.mergeOptions({attributionControl:!0}),ni.addInitHook(function(){this.options.attributionControl&&new tc().addTo(this)});var D0=function(c){return new tc(c)};Is.Layers=_m,Is.Zoom=Ar,Is.Scale=Kc,Is.Attribution=tc,$u.layers=Zc,$u.zoom=la,$u.scale=A0,$u.attribution=D0;var io=we.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});io.addTo=function(c,p){return c.addHandler(p,this),this};var Po={Events:je},fl=on.touch?"touchstart mousedown":"mousedown",Fa=Ue.extend({options:{clickTolerance:3},initialize:function(c,p,w,R){C(this,R),this._element=c,this._dragStartTarget=p||c,this._preventOutline=w},enable:function(){this._enabled||(ei(this._dragStartTarget,fl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Fa._dragging===this&&this.finishDrag(!0),or(this._dragStartTarget,fl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!yi(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){Fa._dragging===this&&this.finishDrag();return}if(!(Fa._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(Fa._dragging=this,this._preventOutline&&dl(this._element),ju(),lr(),!this._moving)){this.fire("down");var p=c.touches?c.touches[0]:c,w=Jl(this._element);this._startPoint=new he(p.clientX,p.clientY),this._startPos=Ni(this._element),this._parentScale=vf(w);var R=c.type==="mousedown";ei(document,R?"mousemove":"touchmove",this._onMove,this),ei(document,R?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var p=c.touches&&c.touches.length===1?c.touches[0]:c,w=new he(p.clientX,p.clientY)._subtract(this._startPoint);!w.x&&!w.y||Math.abs(w.x)+Math.abs(w.y)<this.options.clickTolerance||(w.x/=this._parentScale.x,w.y/=this._parentScale.y,Gr(c),this._moved||(this.fire("dragstart"),this._moved=!0,Dt(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Dt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(w),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),Di(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){oi(document.body,"leaflet-dragging"),this._lastTarget&&(oi(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),or(document,"mousemove touchmove",this._onMove,this),or(document,"mouseup touchend touchcancel",this._onUp,this),Ql(),er();var p=this._moved&&this._moving;this._moving=!1,Fa._dragging=!1,p&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function xm(c,p,w){var R,U=[1,4,2,8],ee,_e,Ve,Oe,dt,Zt,Ln,li;for(ee=0,Zt=c.length;ee<Zt;ee++)c[ee]._code=ic(c[ee],p);for(Ve=0;Ve<4;Ve++){for(Ln=U[Ve],R=[],ee=0,Zt=c.length,_e=Zt-1;ee<Zt;_e=ee++)Oe=c[ee],dt=c[_e],Oe._code&Ln?dt._code&Ln||(li=nd(dt,Oe,Ln,p,w),li._code=ic(li,p),R.push(li)):(dt._code&Ln&&(li=nd(dt,Oe,Ln,p,w),li._code=ic(li,p),R.push(li)),R.push(Oe));c=R}return c}function Qc(c,p){var w,R,U,ee,_e,Ve,Oe,dt,Zt;if(!c||c.length===0)throw new Error("latlngs not passed");ro(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Ln=Ie([0,0]),li=Tt(c),ps=li.getNorthWest().distanceTo(li.getSouthWest())*li.getNorthEast().distanceTo(li.getNorthWest());ps<1700&&(Ln=Jh(c));var Dr=c.length,yo=[];for(w=0;w<Dr;w++){var ss=Ie(c[w]);yo.push(p.project(Ie([ss.lat-Ln.lat,ss.lng-Ln.lng])))}for(Ve=Oe=dt=0,w=0,R=Dr-1;w<Dr;R=w++)U=yo[w],ee=yo[R],_e=U.y*ee.x-ee.y*U.x,Oe+=(U.x+ee.x)*_e,dt+=(U.y+ee.y)*_e,Ve+=_e*3;Ve===0?Zt=yo[0]:Zt=[Oe/Ve,dt/Ve];var hc=p.unproject(me(Zt));return Ie([hc.lat+Ln.lat,hc.lng+Ln.lng])}function Jh(c){for(var p=0,w=0,R=0,U=0;U<c.length;U++){var ee=Ie(c[U]);p+=ee.lat,w+=ee.lng,R++}return Ie([p/R,w/R])}var xf={__proto__:null,clipPolygon:xm,polygonCenter:Qc,centroid:Jh};function ed(c,p){if(!p||!c.length)return c.slice();var w=p*p;return c=qu(c,w),c=nc(c,w),c}function wf(c,p,w){return Math.sqrt(Ba(c,p,w,!0))}function Sf(c,p,w){return Ba(c,p,w)}function nc(c,p){var w=c.length,R=typeof Uint8Array<"u"?Uint8Array:Array,U=new R(w);U[0]=U[w-1]=1,td(c,U,p,0,w-1);var ee,_e=[];for(ee=0;ee<w;ee++)U[ee]&&_e.push(c[ee]);return _e}function td(c,p,w,R,U){var ee=0,_e,Ve,Oe;for(Ve=R+1;Ve<=U-1;Ve++)Oe=Ba(c[Ve],c[R],c[U],!0),Oe>ee&&(_e=Ve,ee=Oe);ee>w&&(p[_e]=1,td(c,p,w,R,_e),td(c,p,w,_e,U))}function qu(c,p){for(var w=[c[0]],R=1,U=0,ee=c.length;R<ee;R++)pl(c[R],c[U])>p&&(w.push(c[R]),U=R);return U<ee-1&&w.push(c[ee-1]),w}var Cf;function Mf(c,p,w,R,U){var ee=R?Cf:ic(c,w),_e=ic(p,w),Ve,Oe,dt;for(Cf=_e;;){if(!(ee|_e))return[c,p];if(ee&_e)return!1;Ve=ee||_e,Oe=nd(c,p,Ve,w,U),dt=ic(Oe,w),Ve===ee?(c=Oe,ee=dt):(p=Oe,_e=dt)}}function nd(c,p,w,R,U){var ee=p.x-c.x,_e=p.y-c.y,Ve=R.min,Oe=R.max,dt,Zt;return w&8?(dt=c.x+ee*(Oe.y-c.y)/_e,Zt=Oe.y):w&4?(dt=c.x+ee*(Ve.y-c.y)/_e,Zt=Ve.y):w&2?(dt=Oe.x,Zt=c.y+_e*(Oe.x-c.x)/ee):w&1&&(dt=Ve.x,Zt=c.y+_e*(Ve.x-c.x)/ee),new he(dt,Zt,U)}function ic(c,p){var w=0;return c.x<p.min.x?w|=1:c.x>p.max.x&&(w|=2),c.y<p.min.y?w|=4:c.y>p.max.y&&(w|=8),w}function pl(c,p){var w=p.x-c.x,R=p.y-c.y;return w*w+R*R}function Ba(c,p,w,R){var U=p.x,ee=p.y,_e=w.x-U,Ve=w.y-ee,Oe=_e*_e+Ve*Ve,dt;return Oe>0&&(dt=((c.x-U)*_e+(c.y-ee)*Ve)/Oe,dt>1?(U=w.x,ee=w.y):dt>0&&(U+=_e*dt,ee+=Ve*dt)),_e=c.x-U,Ve=c.y-ee,R?_e*_e+Ve*Ve:new he(U,ee)}function ro(c){return!T(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function wm(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ro(c)}function Sm(c,p){var w,R,U,ee,_e,Ve,Oe,dt;if(!c||c.length===0)throw new Error("latlngs not passed");ro(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Zt=Ie([0,0]),Ln=Tt(c),li=Ln.getNorthWest().distanceTo(Ln.getSouthWest())*Ln.getNorthEast().distanceTo(Ln.getNorthWest());li<1700&&(Zt=Jh(c));var ps=c.length,Dr=[];for(w=0;w<ps;w++){var yo=Ie(c[w]);Dr.push(p.project(Ie([yo.lat-Zt.lat,yo.lng-Zt.lng])))}for(w=0,R=0;w<ps-1;w++)R+=Dr[w].distanceTo(Dr[w+1])/2;if(R===0)dt=Dr[0];else for(w=0,ee=0;w<ps-1;w++)if(_e=Dr[w],Ve=Dr[w+1],U=_e.distanceTo(Ve),ee+=U,ee>R){Oe=(ee-R)/U,dt=[Ve.x-Oe*(Ve.x-_e.x),Ve.y-Oe*(Ve.y-_e.y)];break}var ss=p.unproject(me(dt));return Ie([ss.lat+Zt.lat,ss.lng+Zt.lng])}var Ef={__proto__:null,simplify:ed,pointToSegmentDistance:wf,closestPointOnSegment:Sf,clipSegment:Mf,_getEdgeIntersection:nd,_getBitCode:ic,_sqClosestPointOnSegment:Ba,isFlat:ro,_flat:wm,polylineCenter:Sm},ml={project:function(c){return new he(c.lng,c.lat)},unproject:function(c){return new ut(c.y,c.x)},bounds:new $e([-180,-90],[180,90])},id={R:6378137,R_MINOR:6356752314245179e-9,bounds:new $e([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var p=Math.PI/180,w=this.R,R=c.lat*p,U=this.R_MINOR/w,ee=Math.sqrt(1-U*U),_e=ee*Math.sin(R),Ve=Math.tan(Math.PI/4-R/2)/Math.pow((1-_e)/(1+_e),ee/2);return R=-w*Math.log(Math.max(Ve,1e-10)),new he(c.lng*p*w,R)},unproject:function(c){for(var p=180/Math.PI,w=this.R,R=this.R_MINOR/w,U=Math.sqrt(1-R*R),ee=Math.exp(-c.y/w),_e=Math.PI/2-2*Math.atan(ee),Ve=0,Oe=.1,dt;Ve<15&&Math.abs(Oe)>1e-7;Ve++)dt=U*Math.sin(_e),dt=Math.pow((1-dt)/(1+dt),U/2),Oe=Math.PI/2-2*Math.atan(ee*dt)-_e,_e+=Oe;return new ut(_e*p,c.x*p/w)}},Xu={__proto__:null,LonLat:ml,Mercator:id,SphericalMercator:Ut},I0=e({},Pt,{code:"EPSG:3395",projection:id,transformation:function(){var c=.5/(Math.PI*id.R);return hn(c,.5,-c,.5)}()}),Cm=e({},Pt,{code:"EPSG:4326",projection:ml,transformation:hn(1/180,1,-1/180,.5)}),R0=e({},at,{projection:ml,transformation:hn(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,p){var w=p.lng-c.lng,R=p.lat-c.lat;return Math.sqrt(w*w+R*R)},infinite:!0});at.Earth=Pt,at.EPSG3395=I0,at.EPSG3857=Mt,at.EPSG900913=Xi,at.EPSG4326=Cm,at.Simple=R0;var so=Ue.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[o(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[o(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var p=c.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var w=this.getEvents();p.on(w,this),this.once("remove",function(){p.off(w,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});ni.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var p=o(c);return this._layers[p]?this:(this._layers[p]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var p=o(c);return this._layers[p]?(this._loaded&&c.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return o(c)in this._layers},eachLayer:function(c,p){for(var w in this._layers)c.call(p,this._layers[w]);return this},_addLayers:function(c){c=c?T(c)?c:[c]:[];for(var p=0,w=c.length;p<w;p++)this.addLayer(c[p])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[o(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var p=o(c);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,p=-1/0,w=this._getZoomSpan();for(var R in this._zoomBoundLayers){var U=this._zoomBoundLayers[R].options;c=U.minZoom===void 0?c:Math.min(c,U.minZoom),p=U.maxZoom===void 0?p:Math.max(p,U.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=c===1/0?void 0:c,w!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var gl=so.extend({initialize:function(c,p){C(this,p),this._layers={};var w,R;if(c)for(w=0,R=c.length;w<R;w++)this.addLayer(c[w])},addLayer:function(c){var p=this.getLayerId(c);return this._layers[p]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var p=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(c){var p=typeof c=="number"?c:this.getLayerId(c);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var p=Array.prototype.slice.call(arguments,1),w,R;for(w in this._layers)R=this._layers[w],R[c]&&R[c].apply(R,p);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,p){for(var w in this._layers)c.call(p,this._layers[w]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return o(c)}}),rd=function(c,p){return new gl(c,p)},Xs=gl.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),gl.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),gl.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new xt;for(var p in this._layers){var w=this._layers[p];c.extend(w.getBounds?w.getBounds():w.getLatLng())}return c}}),P0=function(c,p){return new Xs(c,p)},rc=we.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){C(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,p){var w=this._getIconUrl(c);if(!w){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var R=this._createImg(w,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(R,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(R.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),R},_setIconStyles:function(c,p){var w=this.options,R=w[p+"Size"];typeof R=="number"&&(R=[R,R]);var U=me(R),ee=me(p==="shadow"&&w.shadowAnchor||w.iconAnchor||U&&U.divideBy(2,!0));c.className="leaflet-marker-"+p+" "+(w.className||""),ee&&(c.style.marginLeft=-ee.x+"px",c.style.marginTop=-ee.y+"px"),U&&(c.style.width=U.x+"px",c.style.height=U.y+"px")},_createImg:function(c,p){return p=p||document.createElement("img"),p.src=c,p},_getIconUrl:function(c){return on.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function Yu(c){return new rc(c)}var ko=rc.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof ko.imagePath!="string"&&(ko.imagePath=this._detectIconPath()),(this.options.imagePath||ko.imagePath)+rc.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var p=function(w,R,U){var ee=R.exec(w);return ee&&ee[U]};return c=p(c,/^url\((['"])?(.+)\1\)$/,2),c&&p(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=Rt("div","leaflet-default-icon-path",document.body),p=Tn(c,"background-image")||Tn(c,"backgroundImage");if(document.body.removeChild(c),p=this._stripUrl(p),p)return p;var w=document.querySelector('link[href$="leaflet.css"]');return w?w.href.substring(0,w.href.length-11-1):""}}),Mm=io.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new Fa(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Dt(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&oi(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var p=this._marker,w=p._map,R=this._marker.options.autoPanSpeed,U=this._marker.options.autoPanPadding,ee=Ni(p._icon),_e=w.getPixelBounds(),Ve=w.getPixelOrigin(),Oe=nt(_e.min._subtract(Ve).add(U),_e.max._subtract(Ve).subtract(U));if(!Oe.contains(ee)){var dt=me((Math.max(Oe.max.x,ee.x)-Oe.max.x)/(_e.max.x-Oe.max.x)-(Math.min(Oe.min.x,ee.x)-Oe.min.x)/(_e.min.x-Oe.min.x),(Math.max(Oe.max.y,ee.y)-Oe.max.y)/(_e.max.y-Oe.max.y)-(Math.min(Oe.min.y,ee.y)-Oe.min.y)/(_e.min.y-Oe.min.y)).multiplyBy(R);w.panBy(dt,{animate:!1}),this._draggable._newPos._add(dt),this._draggable._startPos._add(dt),Di(p._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=te(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(V(this._panRequest),this._panRequest=te(this._adjustPan.bind(this,c)))},_onDrag:function(c){var p=this._marker,w=p._shadow,R=Ni(p._icon),U=p._map.layerPointToLatLng(R);w&&Di(w,R),p._latlng=U,c.latlng=U,c.oldLatLng=this._oldLatLng,p.fire("move",c).fire("drag",c)},_onDragEnd:function(c){V(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),ca=so.extend({options:{icon:new ko,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,p){C(this,p),this._latlng=Ie(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var p=this._latlng;return this._latlng=Ie(c),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),w=c.icon.createIcon(this._icon),R=!1;w!==this._icon&&(this._icon&&this._removeIcon(),R=!0,c.title&&(w.title=c.title),w.tagName==="IMG"&&(w.alt=c.alt||"")),Dt(w,p),c.keyboard&&(w.tabIndex="0",w.setAttribute("role","button")),this._icon=w,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ei(w,"focus",this._panOnFocus,this);var U=c.icon.createShadow(this._shadow),ee=!1;U!==this._shadow&&(this._removeShadow(),ee=!0),U&&(Dt(U,p),U.alt=""),this._shadow=U,c.opacity<1&&this._updateOpacity(),R&&this.getPane().appendChild(this._icon),this._initInteraction(),U&&ee&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&or(this._icon,"focus",this._panOnFocus,this),gn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&gn(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&Di(this._icon,c),this._shadow&&Di(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var p=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(Dt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Mm)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Mm(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&Sr(this._icon,c),this._shadow&&Sr(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var p=this.options.icon.options,w=p.iconSize?me(p.iconSize):me(0,0),R=p.iconAnchor?me(p.iconAnchor):me(0,0);c.panInside(this._latlng,{paddingTopLeft:R,paddingBottomRight:w.subtract(R)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function k0(c,p){return new ca(c,p)}var Ys=so.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return C(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Va=Ys.extend({options:{fill:!0,radius:10},initialize:function(c,p){C(this,p),this._latlng=Ie(c),this._radius=this.options.radius},setLatLng:function(c){var p=this._latlng;return this._latlng=Ie(c),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var p=c&&c.radius||this._radius;return Ys.prototype.setStyle.call(this,c),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,p=this._radiusY||c,w=this._clickTolerance(),R=[c+w,p+w];this._pxBounds=new $e(this._point.subtract(R),this._point.add(R))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function yl(c,p){return new Va(c,p)}var sc=Va.extend({initialize:function(c,p,w){if(typeof p=="number"&&(p=e({},w,{radius:p})),C(this,p),this._latlng=Ie(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new xt(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:Ys.prototype.setStyle,_project:function(){var c=this._latlng.lng,p=this._latlng.lat,w=this._map,R=w.options.crs;if(R.distance===Pt.distance){var U=Math.PI/180,ee=this._mRadius/Pt.R/U,_e=w.project([p+ee,c]),Ve=w.project([p-ee,c]),Oe=_e.add(Ve).divideBy(2),dt=w.unproject(Oe).lat,Zt=Math.acos((Math.cos(ee*U)-Math.sin(p*U)*Math.sin(dt*U))/(Math.cos(p*U)*Math.cos(dt*U)))/U;(isNaN(Zt)||Zt===0)&&(Zt=ee/Math.cos(Math.PI/180*p)),this._point=Oe.subtract(w.getPixelOrigin()),this._radius=isNaN(Zt)?0:Oe.x-w.project([dt,c-Zt]).x,this._radiusY=Oe.y-_e.y}else{var Ln=R.unproject(R.project(this._latlng).subtract([this._mRadius,0]));this._point=w.latLngToLayerPoint(this._latlng),this._radius=this._point.x-w.latLngToLayerPoint(Ln).x}this._updateBounds()}});function Tf(c,p,w){return new sc(c,p,w)}var za=Ys.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,p){C(this,p),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var p=1/0,w=null,R=Ba,U,ee,_e=0,Ve=this._parts.length;_e<Ve;_e++)for(var Oe=this._parts[_e],dt=1,Zt=Oe.length;dt<Zt;dt++){U=Oe[dt-1],ee=Oe[dt];var Ln=R(c,U,ee,!0);Ln<p&&(p=Ln,w=R(c,U,ee))}return w&&(w.distance=Math.sqrt(p)),w},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Sm(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,p){return p=p||this._defaultShape(),c=Ie(c),p.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new xt,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return ro(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var p=[],w=ro(c),R=0,U=c.length;R<U;R++)w?(p[R]=Ie(c[R]),this._bounds.extend(p[R])):p[R]=this._convertLatLngs(c[R]);return p},_project:function(){var c=new $e;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),p=new he(c,c);this._rawPxBounds&&(this._pxBounds=new $e([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(c,p,w){var R=c[0]instanceof ut,U=c.length,ee,_e;if(R){for(_e=[],ee=0;ee<U;ee++)_e[ee]=this._map.latLngToLayerPoint(c[ee]),w.extend(_e[ee]);p.push(_e)}else for(ee=0;ee<U;ee++)this._projectLatlngs(c[ee],p,w)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,w,R,U,ee,_e,Ve,Oe;for(w=0,U=0,ee=this._rings.length;w<ee;w++)for(Oe=this._rings[w],R=0,_e=Oe.length;R<_e-1;R++)Ve=Mf(Oe[R],Oe[R+1],c,R,!0),Ve&&(p[U]=p[U]||[],p[U].push(Ve[0]),(Ve[1]!==Oe[R+1]||R===_e-2)&&(p[U].push(Ve[1]),U++))}},_simplifyPoints:function(){for(var c=this._parts,p=this.options.smoothFactor,w=0,R=c.length;w<R;w++)c[w]=ed(c[w],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,p){var w,R,U,ee,_e,Ve,Oe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(w=0,ee=this._parts.length;w<ee;w++)for(Ve=this._parts[w],R=0,_e=Ve.length,U=_e-1;R<_e;U=R++)if(!(!p&&R===0)&&wf(c,Ve[U],Ve[R])<=Oe)return!0;return!1}});function L0(c,p){return new za(c,p)}za._flat=wm;var oc=za.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Qc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var p=za.prototype._convertLatLngs.call(this,c),w=p.length;return w>=2&&p[0]instanceof ut&&p[0].equals(p[w-1])&&p.pop(),p},_setLatLngs:function(c){za.prototype._setLatLngs.call(this,c),ro(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ro(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,p=this.options.weight,w=new he(p,p);if(c=new $e(c.min.subtract(w),c.max.add(w)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var R=0,U=this._rings.length,ee;R<U;R++)ee=xm(this._rings[R],c,!0),ee.length&&this._parts.push(ee)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var p=!1,w,R,U,ee,_e,Ve,Oe,dt;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(ee=0,Oe=this._parts.length;ee<Oe;ee++)for(w=this._parts[ee],_e=0,dt=w.length,Ve=dt-1;_e<dt;Ve=_e++)R=w[_e],U=w[Ve],R.y>c.y!=U.y>c.y&&c.x<(U.x-R.x)*(c.y-R.y)/(U.y-R.y)+R.x&&(p=!p);return p||za.prototype._containsPoint.call(this,c,!0)}});function Lo(c,p){return new oc(c,p)}var ua=Xs.extend({initialize:function(c,p){C(this,p),this._layers={},c&&this.addData(c)},addData:function(c){var p=T(c)?c:c.features,w,R,U;if(p){for(w=0,R=p.length;w<R;w++)U=p[w],(U.geometries||U.geometry||U.features||U.coordinates)&&this.addData(U);return this}var ee=this.options;if(ee.filter&&!ee.filter(c))return this;var _e=sd(c,ee);return _e?(_e.feature=cc(c),_e.defaultOptions=_e.options,this.resetStyle(_e),ee.onEachFeature&&ee.onEachFeature(c,_e),this.addLayer(_e)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=e({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(p){this._setLayerStyle(p,c)},this)},_setLayerStyle:function(c,p){c.setStyle&&(typeof p=="function"&&(p=p(c.feature)),c.setStyle(p))}});function sd(c,p){var w=c.type==="Feature"?c.geometry:c,R=w?w.coordinates:null,U=[],ee=p&&p.pointToLayer,_e=p&&p.coordsToLatLng||No,Ve,Oe,dt,Zt;if(!R&&!w)return null;switch(w.type){case"Point":return Ve=_e(R),Af(ee,c,Ve,p);case"MultiPoint":for(dt=0,Zt=R.length;dt<Zt;dt++)Ve=_e(R[dt]),U.push(Af(ee,c,Ve,p));return new Xs(U);case"LineString":case"MultiLineString":return Oe=vl(R,w.type==="LineString"?0:1,_e),new za(Oe,p);case"Polygon":case"MultiPolygon":return Oe=vl(R,w.type==="Polygon"?1:2,_e),new oc(Oe,p);case"GeometryCollection":for(dt=0,Zt=w.geometries.length;dt<Zt;dt++){var Ln=sd({geometry:w.geometries[dt],type:"Feature",properties:c.properties},p);Ln&&U.push(Ln)}return new Xs(U);case"FeatureCollection":for(dt=0,Zt=w.features.length;dt<Zt;dt++){var li=sd(w.features[dt],p);li&&U.push(li)}return new Xs(U);default:throw new Error("Invalid GeoJSON object.")}}function Af(c,p,w,R){return c?c(p,w):new ca(w,R&&R.markersInheritOptions&&R)}function No(c){return new ut(c[1],c[0],c[2])}function vl(c,p,w){for(var R=[],U=0,ee=c.length,_e;U<ee;U++)_e=p?vl(c[U],p-1,w):(w||No)(c[U]),R.push(_e);return R}function ac(c,p){return c=Ie(c),c.alt!==void 0?[g(c.lng,p),g(c.lat,p),g(c.alt,p)]:[g(c.lng,p),g(c.lat,p)]}function lc(c,p,w,R){for(var U=[],ee=0,_e=c.length;ee<_e;ee++)U.push(p?lc(c[ee],ro(c[ee])?0:p-1,w,R):ac(c[ee],R));return!p&&w&&U.length>0&&U.push(U[0].slice()),U}function Jc(c,p){return c.feature?e({},c.feature,{geometry:p}):cc(p)}function cc(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var od={toGeoJSON:function(c){return Jc(this,{type:"Point",coordinates:ac(this.getLatLng(),c)})}};ca.include(od),sc.include(od),Va.include(od),za.include({toGeoJSON:function(c){var p=!ro(this._latlngs),w=lc(this._latlngs,p?1:0,!1,c);return Jc(this,{type:(p?"Multi":"")+"LineString",coordinates:w})}}),oc.include({toGeoJSON:function(c){var p=!ro(this._latlngs),w=p&&!ro(this._latlngs[0]),R=lc(this._latlngs,w?2:p?1:0,!0,c);return p||(R=[R]),Jc(this,{type:(w?"Multi":"")+"Polygon",coordinates:R})}}),gl.include({toMultiPoint:function(c){var p=[];return this.eachLayer(function(w){p.push(w.toGeoJSON(c).geometry.coordinates)}),Jc(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(c){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(c);var w=p==="GeometryCollection",R=[];return this.eachLayer(function(U){if(U.toGeoJSON){var ee=U.toGeoJSON(c);if(w)R.push(ee.geometry);else{var _e=cc(ee);_e.type==="FeatureCollection"?R.push.apply(R,_e.features):R.push(_e)}}}),w?Jc(this,{geometries:R,type:"GeometryCollection"}):{type:"FeatureCollection",features:R}}});function Df(c,p){return new ua(c,p)}var Em=Df,ad=so.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,p,w){this._url=c,this._bounds=Tt(p),C(this,w)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Dt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){gn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&Yi(this._image),this},bringToBack:function(){return this._map&&Ai(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=Tt(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",p=this._image=c?this._url:Rt("img");if(Dt(p,"leaflet-image-layer"),this._zoomAnimated&&Dt(p,"leaflet-zoom-animated"),this.options.className&&Dt(p,this.options.className),p.onselectstart=d,p.onmousemove=d,p.onload=r(this.fire,this,"load"),p.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(c){var p=this._map.getZoomScale(c.zoom),w=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;Mi(this._image,w,p)},_reset:function(){var c=this._image,p=new $e(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),w=p.getSize();Di(c,p.min),c.style.width=w.x+"px",c.style.height=w.y+"px"},_updateOpacity:function(){Sr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),_l=function(c,p,w){return new ad(c,p,w)},bl=ad.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",p=this._image=c?this._url:Rt("video");if(Dt(p,"leaflet-image-layer"),this._zoomAnimated&&Dt(p,"leaflet-zoom-animated"),this.options.className&&Dt(p,this.options.className),p.onselectstart=d,p.onmousemove=d,p.onloadeddata=r(this.fire,this,"load"),c){for(var w=p.getElementsByTagName("source"),R=[],U=0;U<w.length;U++)R.push(w[U].src);this._url=w.length>0?R:[p.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var ee=0;ee<this._url.length;ee++){var _e=Rt("source");_e.src=this._url[ee],p.appendChild(_e)}}});function eu(c,p,w){return new bl(c,p,w)}var Tm=ad.extend({_initImage:function(){var c=this._image=this._url;Dt(c,"leaflet-image-layer"),this._zoomAnimated&&Dt(c,"leaflet-zoom-animated"),this.options.className&&Dt(c,this.options.className),c.onselectstart=d,c.onmousemove=d}});function Zu(c,p,w){return new Tm(c,p,w)}var rs=so.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,p){c&&(c instanceof ut||T(c))?(this._latlng=Ie(c),C(this,p)):(C(this,c),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&Sr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&Sr(this._container,1),this.bringToFront(),this.options.interactive&&(Dt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(Sr(this._container,0),this._removeTimeout=setTimeout(r(gn,void 0,this._container),200)):gn(this._container),this.options.interactive&&(oi(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=Ie(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Yi(this._container),this},bringToBack:function(){return this._map&&Ai(this._container),this},_prepareOpen:function(c){var p=this._source;if(!p._map)return!1;if(p instanceof Xs){p=null;var w=this._source._layers;for(var R in w)if(w[R]._map){p=w[R];break}if(!p)return!1;this._source=p}if(!c)if(p.getCenter)c=p.getCenter();else if(p.getLatLng)c=p.getLatLng();else if(p.getBounds)c=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")c.innerHTML=p;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),p=me(this.options.offset),w=this._getAnchor();this._zoomAnimated?Di(this._container,c.add(w)):p=p.add(c).add(w);var R=this._containerBottom=-p.y,U=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=R+"px",this._container.style.left=U+"px"}},_getAnchor:function(){return[0,0]}});ni.include({_initOverlay:function(c,p,w,R){var U=p;return U instanceof c||(U=new c(R).setContent(p)),w&&U.setLatLng(w),U}}),so.include({_initOverlay:function(c,p,w,R){var U=w;return U instanceof c?(C(U,R),U._source=this):(U=p&&!R?p:new c(R,this),U.setContent(w)),U}});var Ku=rs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,rs.prototype.openOn.call(this,c)},onAdd:function(c){rs.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ys||this._source.on("preclick",fs))},onRemove:function(c){rs.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ys||this._source.off("preclick",fs))},getEvents:function(){var c=rs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",p=this._container=Rt("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),w=this._wrapper=Rt("div",c+"-content-wrapper",p);if(this._contentNode=Rt("div",c+"-content",w),Oa(p),Yc(this._contentNode),ei(p,"contextmenu",fs),this._tipContainer=Rt("div",c+"-tip-container",p),this._tip=Rt("div",c+"-tip",this._tipContainer),this.options.closeButton){var R=this._closeButton=Rt("a",c+"-close-button",p);R.setAttribute("role","button"),R.setAttribute("aria-label","Close popup"),R.href="#close",R.innerHTML='<span aria-hidden="true">&#215;</span>',ei(R,"click",function(U){Gr(U),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,p=c.style;p.width="",p.whiteSpace="nowrap";var w=c.offsetWidth;w=Math.min(w,this.options.maxWidth),w=Math.max(w,this.options.minWidth),p.width=w+1+"px",p.whiteSpace="",p.height="";var R=c.offsetHeight,U=this.options.maxHeight,ee="leaflet-popup-scrolled";U&&R>U?(p.height=U+"px",Dt(c,ee)):oi(c,ee),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var p=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),w=this._getAnchor();Di(this._container,p.add(w))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,p=parseInt(Tn(this._container,"marginBottom"),10)||0,w=this._container.offsetHeight+p,R=this._containerWidth,U=new he(this._containerLeft,-w-this._containerBottom);U._add(Ni(this._container));var ee=c.layerPointToContainerPoint(U),_e=me(this.options.autoPanPadding),Ve=me(this.options.autoPanPaddingTopLeft||_e),Oe=me(this.options.autoPanPaddingBottomRight||_e),dt=c.getSize(),Zt=0,Ln=0;ee.x+R+Oe.x>dt.x&&(Zt=ee.x+R-dt.x+Oe.x),ee.x-Zt-Ve.x<0&&(Zt=ee.x-Ve.x),ee.y+w+Oe.y>dt.y&&(Ln=ee.y+w-dt.y+Oe.y),ee.y-Ln-Ve.y<0&&(Ln=ee.y-Ve.y),(Zt||Ln)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([Zt,Ln]))}},_getAnchor:function(){return me(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ha=function(c,p){return new Ku(c,p)};ni.mergeOptions({closePopupOnClick:!0}),ni.include({openPopup:function(c,p,w){return this._initOverlay(Ku,c,p,w).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),so.include({bindPopup:function(c,p){return this._popup=this._initOverlay(Ku,this._popup,c,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof Xs||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){aa(c);var p=c.layer||c.target;if(this._popup._source===p&&!(p instanceof Ys)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=p,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var tu=rs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){rs.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){rs.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=rs.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",p=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Rt("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var p,w,R=this._map,U=this._container,ee=R.latLngToContainerPoint(R.getCenter()),_e=R.layerPointToContainerPoint(c),Ve=this.options.direction,Oe=U.offsetWidth,dt=U.offsetHeight,Zt=me(this.options.offset),Ln=this._getAnchor();Ve==="top"?(p=Oe/2,w=dt):Ve==="bottom"?(p=Oe/2,w=0):Ve==="center"?(p=Oe/2,w=dt/2):Ve==="right"?(p=0,w=dt/2):Ve==="left"?(p=Oe,w=dt/2):_e.x<ee.x?(Ve="right",p=0,w=dt/2):(Ve="left",p=Oe+(Zt.x+Ln.x)*2,w=dt/2),c=c.subtract(me(p,w,!0)).add(Zt).add(Ln),oi(U,"leaflet-tooltip-right"),oi(U,"leaflet-tooltip-left"),oi(U,"leaflet-tooltip-top"),oi(U,"leaflet-tooltip-bottom"),Dt(U,"leaflet-tooltip-"+Ve),Di(U,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&Sr(this._container,c)},_animateZoom:function(c){var p=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(p)},_getAnchor:function(){return me(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),N0=function(c,p){return new tu(c,p)};ni.include({openTooltip:function(c,p,w){return this._initOverlay(tu,c,p,w).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),so.include({bindTooltip:function(c,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(tu,this._tooltip,c,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var p=c?"off":"on",w={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?w.add=this._openTooltip:(w.mouseover=this._openTooltip,w.mouseout=this.closeTooltip,w.click=this._openTooltip,this._map?this._addFocusListeners():w.add=this._addFocusListeners),this._tooltip.options.sticky&&(w.mousemove=this._moveTooltip),this[p](w),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof Xs||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var p=typeof c.getElement=="function"&&c.getElement();p&&(ei(p,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),ei(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var p=typeof c.getElement=="function"&&c.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var p=c.latlng,w,R;this._tooltip.options.sticky&&c.originalEvent&&(w=this._map.mouseEventToContainerPoint(c.originalEvent),R=this._map.containerPointToLayerPoint(w),p=this._map.layerPointToLatLng(R)),this._tooltip.setLatLng(p)}});var Qu=rc.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var p=c&&c.tagName==="DIV"?c:document.createElement("div"),w=this.options;if(w.html instanceof Element?(ri(p),p.appendChild(w.html)):p.innerHTML=w.html!==!1?w.html:"",w.bgPos){var R=me(w.bgPos);p.style.backgroundPosition=-R.x+"px "+-R.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function Ua(c){return new Qu(c)}rc.Default=ko;var Rs=so.extend({options:{tileSize:256,opacity:1,updateWhenIdle:on.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){C(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),gn(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Yi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ai(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof he?c:new he(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var p=this.getPane().children,w=-c(-1/0,1/0),R=0,U=p.length,ee;R<U;R++)ee=p[R].style.zIndex,p[R]!==this._container&&ee&&(w=c(w,+ee));isFinite(w)&&(this.options.zIndex=w+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!on.ielt9){Sr(this._container,this.options.opacity);var c=+new Date,p=!1,w=!1;for(var R in this._tiles){var U=this._tiles[R];if(!(!U.current||!U.loaded)){var ee=Math.min(1,(c-U.loaded)/200);Sr(U.el,ee),ee<1?p=!0:(U.active?w=!0:this._onOpaqueTile(U),U.active=!0)}}w&&!this._noPrune&&this._pruneTiles(),p&&(V(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=Rt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,p=this.options.maxZoom;if(c!==void 0){for(var w in this._levels)w=Number(w),this._levels[w].el.children.length||w===c?(this._levels[w].el.style.zIndex=p-Math.abs(c-w),this._onUpdateLevel(w)):(gn(this._levels[w].el),this._removeTilesAtZoom(w),this._onRemoveLevel(w),delete this._levels[w]);var R=this._levels[c],U=this._map;return R||(R=this._levels[c]={},R.el=Rt("div","leaflet-tile-container leaflet-zoom-animated",this._container),R.el.style.zIndex=p,R.origin=U.project(U.unproject(U.getPixelOrigin()),c).round(),R.zoom=c,this._setZoomTransform(R,U.getCenter(),U.getZoom()),d(R.el.offsetWidth),this._onCreateLevel(R)),this._level=R,R}},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){if(this._map){var c,p,w=this._map.getZoom();if(w>this.options.maxZoom||w<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)p=this._tiles[c],p.retain=p.current;for(c in this._tiles)if(p=this._tiles[c],p.current&&!p.active){var R=p.coords;this._retainParent(R.x,R.y,R.z,R.z-5)||this._retainChildren(R.x,R.y,R.z,R.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var p in this._tiles)this._tiles[p].coords.z===c&&this._removeTile(p)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)gn(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,p,w,R){var U=Math.floor(c/2),ee=Math.floor(p/2),_e=w-1,Ve=new he(+U,+ee);Ve.z=+_e;var Oe=this._tileCoordsToKey(Ve),dt=this._tiles[Oe];return dt&&dt.active?(dt.retain=!0,!0):(dt&&dt.loaded&&(dt.retain=!0),_e>R?this._retainParent(U,ee,_e,R):!1)},_retainChildren:function(c,p,w,R){for(var U=2*c;U<2*c+2;U++)for(var ee=2*p;ee<2*p+2;ee++){var _e=new he(U,ee);_e.z=w+1;var Ve=this._tileCoordsToKey(_e),Oe=this._tiles[Ve];if(Oe&&Oe.active){Oe.retain=!0;continue}else Oe&&Oe.loaded&&(Oe.retain=!0);w+1<R&&this._retainChildren(U,ee,w+1,R)}},_resetView:function(c){var p=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var p=this.options;return p.minNativeZoom!==void 0&&c<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<c?p.maxNativeZoom:c},_setView:function(c,p,w,R){var U=Math.round(p);this.options.maxZoom!==void 0&&U>this.options.maxZoom||this.options.minZoom!==void 0&&U<this.options.minZoom?U=void 0:U=this._clampZoom(U);var ee=this.options.updateWhenZooming&&U!==this._tileZoom;(!R||ee)&&(this._tileZoom=U,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),U!==void 0&&this._update(c),w||this._pruneTiles(),this._noPrune=!!w),this._setZoomTransforms(c,p)},_setZoomTransforms:function(c,p){for(var w in this._levels)this._setZoomTransform(this._levels[w],c,p)},_setZoomTransform:function(c,p,w){var R=this._map.getZoomScale(w,c.zoom),U=c.origin.multiplyBy(R).subtract(this._map._getNewPixelOrigin(p,w)).round();on.any3d?Mi(c.el,U,R):Di(c.el,U)},_resetGrid:function(){var c=this._map,p=c.options.crs,w=this._tileSize=this.getTileSize(),R=this._tileZoom,U=this._map.getPixelWorldBounds(this._tileZoom);U&&(this._globalTileRange=this._pxBoundsToTileRange(U)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,p.wrapLng[0]],R).x/w.x),Math.ceil(c.project([0,p.wrapLng[1]],R).x/w.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([p.wrapLat[0],0],R).y/w.x),Math.ceil(c.project([p.wrapLat[1],0],R).y/w.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var p=this._map,w=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),R=p.getZoomScale(w,this._tileZoom),U=p.project(c,this._tileZoom).floor(),ee=p.getSize().divideBy(R*2);return new $e(U.subtract(ee),U.add(ee))},_update:function(c){var p=this._map;if(p){var w=this._clampZoom(p.getZoom());if(c===void 0&&(c=p.getCenter()),this._tileZoom!==void 0){var R=this._getTiledPixelBounds(c),U=this._pxBoundsToTileRange(R),ee=U.getCenter(),_e=[],Ve=this.options.keepBuffer,Oe=new $e(U.getBottomLeft().subtract([Ve,-Ve]),U.getTopRight().add([Ve,-Ve]));if(!(isFinite(U.min.x)&&isFinite(U.min.y)&&isFinite(U.max.x)&&isFinite(U.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var dt in this._tiles){var Zt=this._tiles[dt].coords;(Zt.z!==this._tileZoom||!Oe.contains(new he(Zt.x,Zt.y)))&&(this._tiles[dt].current=!1)}if(Math.abs(w-this._tileZoom)>1){this._setView(c,w);return}for(var Ln=U.min.y;Ln<=U.max.y;Ln++)for(var li=U.min.x;li<=U.max.x;li++){var ps=new he(li,Ln);if(ps.z=this._tileZoom,!!this._isValidTile(ps)){var Dr=this._tiles[this._tileCoordsToKey(ps)];Dr?Dr.current=!0:_e.push(ps)}}if(_e.sort(function(ss,hc){return ss.distanceTo(ee)-hc.distanceTo(ee)}),_e.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yo=document.createDocumentFragment();for(li=0;li<_e.length;li++)this._addTile(_e[li],yo);this._level.el.appendChild(yo)}}}},_isValidTile:function(c){var p=this._map.options.crs;if(!p.infinite){var w=this._globalTileRange;if(!p.wrapLng&&(c.x<w.min.x||c.x>w.max.x)||!p.wrapLat&&(c.y<w.min.y||c.y>w.max.y))return!1}if(!this.options.bounds)return!0;var R=this._tileCoordsToBounds(c);return Tt(this.options.bounds).overlaps(R)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var p=this._map,w=this.getTileSize(),R=c.scaleBy(w),U=R.add(w),ee=p.unproject(R,c.z),_e=p.unproject(U,c.z);return[ee,_e]},_tileCoordsToBounds:function(c){var p=this._tileCoordsToNwSe(c),w=new xt(p[0],p[1]);return this.options.noWrap||(w=this._map.wrapLatLngBounds(w)),w},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var p=c.split(":"),w=new he(+p[0],+p[1]);return w.z=+p[2],w},_removeTile:function(c){var p=this._tiles[c];p&&(gn(p.el),delete this._tiles[c],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){Dt(c,"leaflet-tile");var p=this.getTileSize();c.style.width=p.x+"px",c.style.height=p.y+"px",c.onselectstart=d,c.onmousemove=d,on.ielt9&&this.options.opacity<1&&Sr(c,this.options.opacity)},_addTile:function(c,p){var w=this._getTilePos(c),R=this._tileCoordsToKey(c),U=this.createTile(this._wrapCoords(c),r(this._tileReady,this,c));this._initTile(U),this.createTile.length<2&&te(r(this._tileReady,this,c,null,U)),Di(U,w),this._tiles[R]={el:U,coords:c,current:!0},p.appendChild(U),this.fire("tileloadstart",{tile:U,coords:c})},_tileReady:function(c,p,w){p&&this.fire("tileerror",{error:p,tile:w,coords:c});var R=this._tileCoordsToKey(c);w=this._tiles[R],w&&(w.loaded=+new Date,this._map._fadeAnimated?(Sr(w.el,0),V(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this)):(w.active=!0,this._pruneTiles()),p||(Dt(w.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:w.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),on.ielt9||!this._map._fadeAnimated?te(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var p=new he(this._wrapX?u(c.x,this._wrapX):c.x,this._wrapY?u(c.y,this._wrapY):c.y);return p.z=c.z,p},_pxBoundsToTileRange:function(c){var p=this.getTileSize();return new $e(c.min.unscaleBy(p).floor(),c.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function Am(c){return new Rs(c)}var mo=Rs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,p){this._url=c,p=C(this,p),p.detectRetina&&on.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,p){return this._url===c&&p===void 0&&(p=!0),this._url=c,p||this.redraw(),this},createTile:function(c,p){var w=document.createElement("img");return ei(w,"load",r(this._tileOnLoad,this,p,w)),ei(w,"error",r(this._tileOnError,this,p,w)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(w.referrerPolicy=this.options.referrerPolicy),w.alt="",w.src=this.getTileUrl(c),w},getTileUrl:function(c){var p={r:on.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var w=this._globalTileRange.max.y-c.y;this.options.tms&&(p.y=w),p["-y"]=w}return N(this._url,e(p,this.options))},_tileOnLoad:function(c,p){on.ielt9?setTimeout(r(c,this,null,p),0):c(null,p)},_tileOnError:function(c,p,w){var R=this.options.errorTileUrl;R&&p.getAttribute("src")!==R&&(p.src=R),c(w,p)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,p=this.options.maxZoom,w=this.options.zoomReverse,R=this.options.zoomOffset;return w&&(c=p-c),c+R},_getSubdomain:function(c){var p=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var c,p;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(p=this._tiles[c].el,p.onload=d,p.onerror=d,!p.complete)){p.src=Z;var w=this._tiles[c].coords;gn(p),delete this._tiles[c],this.fire("tileabort",{tile:p,coords:w})}},_removeTile:function(c){var p=this._tiles[c];if(p)return p.el.setAttribute("src",Z),Rs.prototype._removeTile.call(this,c)},_tileReady:function(c,p,w){if(!(!this._map||w&&w.getAttribute("src")===Z))return Rs.prototype._tileReady.call(this,c,p,w)}});function Dm(c,p){return new mo(c,p)}var Ju=mo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,p){this._url=c;var w=e({},this.defaultWmsParams);for(var R in p)R in this.options||(w[R]=p[R]);p=C(this,p);var U=p.detectRetina&&on.retina?2:1,ee=this.getTileSize();w.width=ee.x*U,w.height=ee.y*U,this.wmsParams=w},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,mo.prototype.onAdd.call(this,c)},getTileUrl:function(c){var p=this._tileCoordsToNwSe(c),w=this._crs,R=nt(w.project(p[0]),w.project(p[1])),U=R.min,ee=R.max,_e=(this._wmsVersion>=1.3&&this._crs===Cm?[U.y,U.x,ee.y,ee.x]:[U.x,U.y,ee.x,ee.y]).join(","),Ve=mo.prototype.getTileUrl.call(this,c);return Ve+A(this.wmsParams,Ve,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+_e},setParams:function(c,p){return e(this.wmsParams,c),p||this.redraw(),this}});function Im(c,p){return new Ju(c,p)}mo.WMS=Ju,Dm.wms=Im;var Ha=so.extend({options:{padding:.1},initialize:function(c){C(this,c),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Dt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,p){var w=this._map.getZoomScale(p,this._zoom),R=this._map.getSize().multiplyBy(.5+this.options.padding),U=this._map.project(this._center,p),ee=R.multiplyBy(-w).add(U).subtract(this._map._getNewPixelOrigin(c,p));on.any3d?Mi(this._container,ee,w):Di(this._container,ee)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,p=this._map.getSize(),w=this._map.containerPointToLayerPoint(p.multiplyBy(-c)).round();this._bounds=new $e(w,w.add(p.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Oo=Ha.extend({options:{tolerance:0},getEvents:function(){var c=Ha.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ha.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");ei(c,"mousemove",this._onMouseMove,this),ei(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ei(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){V(this._redrawRequest),delete this._ctx,gn(this._container),or(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var p in this._layers)c=this._layers[p],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ha.prototype._update.call(this);var c=this._bounds,p=this._container,w=c.getSize(),R=on.retina?2:1;Di(p,c.min),p.width=R*w.x,p.height=R*w.y,p.style.width=w.x+"px",p.style.height=w.y+"px",on.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){Ha.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[o(c)]=c;var p=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var p=c._order,w=p.next,R=p.prev;w?w.prev=R:this._drawLast=R,R?R.next=w:this._drawFirst=w,delete c._order,delete this._layers[o(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var p=c.options.dashArray.split(/[, ]+/),w=[],R,U;for(U=0;U<p.length;U++){if(R=Number(p[U]),isNaN(R))return;w.push(R)}c.options._dashArray=w}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||te(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var p=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new $e,this._redrawBounds.extend(c._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(c._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var p=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,p=this._redrawBounds;if(this._ctx.save(),p){var w=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,w.x,w.y),this._ctx.clip()}this._drawing=!0;for(var R=this._drawFirst;R;R=R.next)c=R.layer,(!p||c._pxBounds&&c._pxBounds.intersects(p))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,p){if(this._drawing){var w,R,U,ee,_e=c._parts,Ve=_e.length,Oe=this._ctx;if(Ve){for(Oe.beginPath(),w=0;w<Ve;w++){for(R=0,U=_e[w].length;R<U;R++)ee=_e[w][R],Oe[R?"lineTo":"moveTo"](ee.x,ee.y);p&&Oe.closePath()}this._fillStroke(Oe,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var p=c._point,w=this._ctx,R=Math.max(Math.round(c._radius),1),U=(Math.max(Math.round(c._radiusY),1)||R)/R;U!==1&&(w.save(),w.scale(1,U)),w.beginPath(),w.arc(p.x,p.y/U,R,0,Math.PI*2,!1),U!==1&&w.restore(),this._fillStroke(w,c)}},_fillStroke:function(c,p){var w=p.options;w.fill&&(c.globalAlpha=w.fillOpacity,c.fillStyle=w.fillColor||w.color,c.fill(w.fillRule||"evenodd")),w.stroke&&w.weight!==0&&(c.setLineDash&&c.setLineDash(p.options&&p.options._dashArray||[]),c.globalAlpha=w.opacity,c.lineWidth=w.weight,c.strokeStyle=w.color,c.lineCap=w.lineCap,c.lineJoin=w.lineJoin,c.stroke())},_onClick:function(c){for(var p=this._map.mouseEventToLayerPoint(c),w,R,U=this._drawFirst;U;U=U.next)w=U.layer,w.options.interactive&&w._containsPoint(p)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(w))&&(R=w);this._fireEvent(R?[R]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,p)}},_handleMouseOut:function(c){var p=this._hoveredLayer;p&&(oi(this._container,"leaflet-interactive"),this._fireEvent([p],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,p){if(!this._mouseHoverThrottled){for(var w,R,U=this._drawFirst;U;U=U.next)w=U.layer,w.options.interactive&&w._containsPoint(p)&&(R=w);R!==this._hoveredLayer&&(this._handleMouseOut(c),R&&(Dt(this._container,"leaflet-interactive"),this._fireEvent([R],c,"mouseover"),this._hoveredLayer=R)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,p,w){this._map._fireDOMEvent(p,w||p.type,c)},_bringToFront:function(c){var p=c._order;if(p){var w=p.next,R=p.prev;if(w)w.prev=R;else return;R?R.next=w:w&&(this._drawFirst=w),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(c)}},_bringToBack:function(c){var p=c._order;if(p){var w=p.next,R=p.prev;if(R)R.next=w;else return;w?w.prev=R:R&&(this._drawLast=R),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(c)}}});function Ps(c){return on.canvas?new Oo(c):null}var ja=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ld={_initContainer:function(){this._container=Rt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ha.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var p=c._container=ja("shape");Dt(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",c._path=ja("path"),p.appendChild(c._path),this._updateStyle(c),this._layers[o(c)]=c},_addPath:function(c){var p=c._container;this._container.appendChild(p),c.options.interactive&&c.addInteractiveTarget(p)},_removePath:function(c){var p=c._container;gn(p),c.removeInteractiveTarget(p),delete this._layers[o(c)]},_updateStyle:function(c){var p=c._stroke,w=c._fill,R=c.options,U=c._container;U.stroked=!!R.stroke,U.filled=!!R.fill,R.stroke?(p||(p=c._stroke=ja("stroke")),U.appendChild(p),p.weight=R.weight+"px",p.color=R.color,p.opacity=R.opacity,R.dashArray?p.dashStyle=T(R.dashArray)?R.dashArray.join(" "):R.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=R.lineCap.replace("butt","flat"),p.joinstyle=R.lineJoin):p&&(U.removeChild(p),c._stroke=null),R.fill?(w||(w=c._fill=ja("fill")),U.appendChild(w),w.color=R.fillColor||R.color,w.opacity=R.fillOpacity):w&&(U.removeChild(w),c._fill=null)},_updateCircle:function(c){var p=c._point.round(),w=Math.round(c._radius),R=Math.round(c._radiusY||w);this._setPath(c,c._empty()?"M0 0":"AL "+p.x+","+p.y+" "+w+","+R+" 0,"+65535*360)},_setPath:function(c,p){c._path.v=p},_bringToFront:function(c){Yi(c._container)},_bringToBack:function(c){Ai(c._container)}},go=on.vml?ja:Fn,xl=Ha.extend({_initContainer:function(){this._container=go("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=go("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){gn(this._container),or(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ha.prototype._update.call(this);var c=this._bounds,p=c.getSize(),w=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,w.setAttribute("width",p.x),w.setAttribute("height",p.y)),Di(w,c.min),w.setAttribute("viewBox",[c.min.x,c.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(c){var p=c._path=go("path");c.options.className&&Dt(p,c.options.className),c.options.interactive&&Dt(p,"leaflet-interactive"),this._updateStyle(c),this._layers[o(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){gn(c._path),c.removeInteractiveTarget(c._path),delete this._layers[o(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var p=c._path,w=c.options;p&&(w.stroke?(p.setAttribute("stroke",w.color),p.setAttribute("stroke-opacity",w.opacity),p.setAttribute("stroke-width",w.weight),p.setAttribute("stroke-linecap",w.lineCap),p.setAttribute("stroke-linejoin",w.lineJoin),w.dashArray?p.setAttribute("stroke-dasharray",w.dashArray):p.removeAttribute("stroke-dasharray"),w.dashOffset?p.setAttribute("stroke-dashoffset",w.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),w.fill?(p.setAttribute("fill",w.fillColor||w.color),p.setAttribute("fill-opacity",w.fillOpacity),p.setAttribute("fill-rule",w.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(c,p){this._setPath(c,Me(c._parts,p))},_updateCircle:function(c){var p=c._point,w=Math.max(Math.round(c._radius),1),R=Math.max(Math.round(c._radiusY),1)||w,U="a"+w+","+R+" 0 1,0 ",ee=c._empty()?"M0 0":"M"+(p.x-w)+","+p.y+U+w*2+",0 "+U+-w*2+",0 ";this._setPath(c,ee)},_setPath:function(c,p){c._path.setAttribute("d",p)},_bringToFront:function(c){Yi(c._path)},_bringToBack:function(c){Ai(c._path)}});on.vml&&xl.include(ld);function uc(c){return on.svg||on.vml?new xl(c):null}ni.include({getRenderer:function(c){var p=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var p=this._paneRenderers[c];return p===void 0&&(p=this._createRenderer({pane:c}),this._paneRenderers[c]=p),p},_createRenderer:function(c){return this.options.preferCanvas&&Ps(c)||uc(c)}});var Rm=oc.extend({initialize:function(c,p){oc.prototype.initialize.call(this,this._boundsToLatLngs(c),p)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=Tt(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function Pm(c,p){return new Rm(c,p)}xl.create=go,xl.pointsToPath=Me,ua.geometryToLayer=sd,ua.coordsToLatLng=No,ua.coordsToLatLngs=vl,ua.latLngToCoords=ac,ua.latLngsToCoords=lc,ua.getFeature=Jc,ua.asFeature=cc,ni.mergeOptions({boxZoom:!0});var If=io.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){ei(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){or(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){gn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),lr(),ju(),this._startPoint=this._map.mouseEventToContainerPoint(c),ei(document,{contextmenu:aa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=Rt("div","leaflet-zoom-box",this._container),Dt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var p=new $e(this._point,this._startPoint),w=p.getSize();Di(this._box,p.min),this._box.style.width=w.x+"px",this._box.style.height=w.y+"px"},_finish:function(){this._moved&&(gn(this._box),oi(this._container,"leaflet-crosshair")),er(),Ql(),or(document,{contextmenu:aa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var p=new xt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ni.addInitHook("addHandler","boxZoom",If),ni.mergeOptions({doubleClickZoom:!0});var cd=io.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var p=this._map,w=p.getZoom(),R=p.options.zoomDelta,U=c.originalEvent.shiftKey?w-R:w+R;p.options.doubleClickZoom==="center"?p.setZoom(U):p.setZoomAround(c.containerPoint,U)}});ni.addInitHook("addHandler","doubleClickZoom",cd),ni.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Cr=io.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new Fa(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}Dt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){oi(this._map._container,"leaflet-grab"),oi(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=Tt(this._map.options.maxBounds);this._offsetLimit=nt(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var p=this._lastTime=+new Date,w=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(w),this._times.push(p),this._prunePositions(p)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,p){return c-(c-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;c.x<p.min.x&&(c.x=this._viscousLimit(c.x,p.min.x)),c.y<p.min.y&&(c.y=this._viscousLimit(c.y,p.min.y)),c.x>p.max.x&&(c.x=this._viscousLimit(c.x,p.max.x)),c.y>p.max.y&&(c.y=this._viscousLimit(c.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,p=Math.round(c/2),w=this._initialWorldOffset,R=this._draggable._newPos.x,U=(R-p+w)%c+p-w,ee=(R+p+w)%c-p-w,_e=Math.abs(U+w)<Math.abs(ee+w)?U:ee;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=_e},_onDragEnd:function(c){var p=this._map,w=p.options,R=!w.inertia||c.noInertia||this._times.length<2;if(p.fire("dragend",c),R)p.fire("moveend");else{this._prunePositions(+new Date);var U=this._lastPos.subtract(this._positions[0]),ee=(this._lastTime-this._times[0])/1e3,_e=w.easeLinearity,Ve=U.multiplyBy(_e/ee),Oe=Ve.distanceTo([0,0]),dt=Math.min(w.inertiaMaxSpeed,Oe),Zt=Ve.multiplyBy(dt/Oe),Ln=dt/(w.inertiaDeceleration*_e),li=Zt.multiplyBy(-Ln/2).round();!li.x&&!li.y?p.fire("moveend"):(li=p._limitOffset(li,p.options.maxBounds),te(function(){p.panBy(li,{duration:Ln,easeLinearity:_e,noMoveStart:!0,animate:!0})}))}}});ni.addInitHook("addHandler","dragging",Cr),ni.mergeOptions({keyboard:!0,keyboardPanDelta:80});var tr=io.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),ei(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),or(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,p=document.documentElement,w=c.scrollTop||p.scrollTop,R=c.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(R,w)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var p=this._panKeys={},w=this.keyCodes,R,U;for(R=0,U=w.left.length;R<U;R++)p[w.left[R]]=[-1*c,0];for(R=0,U=w.right.length;R<U;R++)p[w.right[R]]=[c,0];for(R=0,U=w.down.length;R<U;R++)p[w.down[R]]=[0,c];for(R=0,U=w.up.length;R<U;R++)p[w.up[R]]=[0,-1*c]},_setZoomDelta:function(c){var p=this._zoomKeys={},w=this.keyCodes,R,U;for(R=0,U=w.zoomIn.length;R<U;R++)p[w.zoomIn[R]]=c;for(R=0,U=w.zoomOut.length;R<U;R++)p[w.zoomOut[R]]=-c},_addHooks:function(){ei(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){or(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var p=c.keyCode,w=this._map,R;if(p in this._panKeys){if(!w._panAnim||!w._panAnim._inProgress)if(R=this._panKeys[p],c.shiftKey&&(R=me(R).multiplyBy(3)),w.options.maxBounds&&(R=w._limitOffset(me(R),w.options.maxBounds)),w.options.worldCopyJump){var U=w.wrapLatLng(w.unproject(w.project(w.getCenter()).add(R)));w.panTo(U)}else w.panBy(R)}else if(p in this._zoomKeys)w.setZoom(w.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&w._popup&&w._popup.options.closeOnEscapeKey)w.closePopup();else return;aa(c)}}});ni.addInitHook("addHandler","keyboard",tr),ni.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var km=io.extend({addHooks:function(){ei(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){or(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var p=Zh(c),w=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var R=Math.max(w-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),R),aa(c)},_performZoom:function(){var c=this._map,p=c.getZoom(),w=this._map.options.zoomSnap||0;c._stop();var R=this._delta/(this._map.options.wheelPxPerZoomLevel*4),U=4*Math.log(2/(1+Math.exp(-Math.abs(R))))/Math.LN2,ee=w?Math.ceil(U/w)*w:U,_e=c._limitZoom(p+(this._delta>0?ee:-ee))-p;this._delta=0,this._startTime=null,_e&&(c.options.scrollWheelZoom==="center"?c.setZoom(p+_e):c.setZoomAround(this._lastMousePos,p+_e))}});ni.addInitHook("addHandler","scrollWheelZoom",km);var Lm=600;ni.mergeOptions({tapHold:on.touchNative&&on.safari&&on.mobile,tapTolerance:15});var ud=io.extend({addHooks:function(){ei(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){or(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var p=c.touches[0];this._startPos=this._newPos=new he(p.clientX,p.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(ei(document,"touchend",Gr),ei(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),Lm),ei(document,"touchend touchcancel contextmenu",this._cancel,this),ei(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){or(document,"touchend",Gr),or(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),or(document,"touchend touchcancel contextmenu",this._cancel,this),or(document,"touchmove",this._onMove,this)},_onMove:function(c){var p=c.touches[0];this._newPos=new he(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,p){var w=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});w._simulated=!0,p.target.dispatchEvent(w)}});ni.addInitHook("addHandler","tapHold",ud),ni.mergeOptions({touchZoom:on.touch,bounceAtZoomLimits:!0});var eh=io.extend({addHooks:function(){Dt(this._map._container,"leaflet-touch-zoom"),ei(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){oi(this._map._container,"leaflet-touch-zoom"),or(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var p=this._map;if(!(!c.touches||c.touches.length!==2||p._animatingZoom||this._zooming)){var w=p.mouseEventToContainerPoint(c.touches[0]),R=p.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(w.add(R)._divideBy(2))),this._startDist=w.distanceTo(R),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),ei(document,"touchmove",this._onTouchMove,this),ei(document,"touchend touchcancel",this._onTouchEnd,this),Gr(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var p=this._map,w=p.mouseEventToContainerPoint(c.touches[0]),R=p.mouseEventToContainerPoint(c.touches[1]),U=w.distanceTo(R)/this._startDist;if(this._zoom=p.getScaleZoom(U,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&U<1||this._zoom>p.getMaxZoom()&&U>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,U===1)return}else{var ee=w._add(R)._divideBy(2)._subtract(this._centerPoint);if(U===1&&ee.x===0&&ee.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(ee),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),V(this._animRequest);var _e=r(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=te(_e,this,!0),Gr(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,V(this._animRequest),or(document,"touchmove",this._onTouchMove,this),or(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ni.addInitHook("addHandler","touchZoom",eh),ni.BoxZoom=If,ni.DoubleClickZoom=cd,ni.Drag=Cr,ni.Keyboard=tr,ni.ScrollWheelZoom=km,ni.TapHold=ud,ni.TouchZoom=eh,n.Bounds=$e,n.Browser=on,n.CRS=at,n.Canvas=Oo,n.Circle=sc,n.CircleMarker=Va,n.Class=we,n.Control=Is,n.DivIcon=Qu,n.DivOverlay=rs,n.DomEvent=Gu,n.DomUtil=Xc,n.Draggable=Fa,n.Evented=Ue,n.FeatureGroup=Xs,n.GeoJSON=ua,n.GridLayer=Rs,n.Handler=io,n.Icon=rc,n.ImageOverlay=ad,n.LatLng=ut,n.LatLngBounds=xt,n.Layer=so,n.LayerGroup=gl,n.LineUtil=Ef,n.Map=ni,n.Marker=ca,n.Mixin=Po,n.Path=Ys,n.Point=he,n.PolyUtil=xf,n.Polygon=oc,n.Polyline=za,n.Popup=Ku,n.PosAnimation=ec,n.Projection=Xu,n.Rectangle=Rm,n.Renderer=Ha,n.SVG=xl,n.SVGOverlay=Tm,n.TileLayer=mo,n.Tooltip=tu,n.Transformation=Cn,n.Util=se,n.VideoOverlay=bl,n.bind=r,n.bounds=nt,n.canvas=Ps,n.circle=Tf,n.circleMarker=yl,n.control=$u,n.divIcon=Ua,n.extend=e,n.featureGroup=P0,n.geoJSON=Df,n.geoJson=Em,n.gridLayer=Am,n.icon=Yu,n.imageOverlay=_l,n.latLng=Ie,n.latLngBounds=Tt,n.layerGroup=rd,n.map=Qh,n.marker=k0,n.point=me,n.polygon=Lo,n.polyline=L0,n.popup=ha,n.rectangle=Pm,n.setOptions=C,n.stamp=o,n.svg=uc,n.svgOverlay=Zu,n.tileLayer=Dm,n.tooltip=N0,n.transformation=hn,n.version=t,n.videoOverlay=eu;var dr=window.L;n.noConflict=function(){return window.L=dr,this},window.L=n})});var VH=px((w_,hP)=>{"use strict";(function(n,t){typeof w_=="object"&&typeof hP=="object"?hP.exports=t(n._Highcharts,n._Highcharts.SeriesRegistry,n._Highcharts.Series,n._Highcharts.Series.types.column,n._Highcharts.Templating,n._Highcharts.Point,n._Highcharts.Color,n._Highcharts.Chart,n._Highcharts.SVGElement,n._Highcharts.StackItem):typeof define=="function"&&define.amd?define("highcharts/highcharts-more",["highcharts/highcharts"],function(e){return t(e,e.SeriesRegistry,e.Series,e.Series,["types"],["column"],e.Templating,e.Point,e.Color,e.Chart,e.SVGElement,e.StackItem)}):typeof w_=="object"?w_["highcharts/highcharts-more"]=t(n._Highcharts,n._Highcharts.SeriesRegistry,n._Highcharts.Series,n._Highcharts.Series.types.column,n._Highcharts.Templating,n._Highcharts.Point,n._Highcharts.Color,n._Highcharts.Chart,n._Highcharts.SVGElement,n._Highcharts.StackItem):n.Highcharts=t(n.Highcharts,n.Highcharts.SeriesRegistry,n.Highcharts.Series,n.Highcharts.Series.types.column,n.Highcharts.Templating,n.Highcharts.Point,n.Highcharts.Color,n.Highcharts.Chart,n.Highcharts.SVGElement,n.Highcharts.StackItem)})(typeof window>"u"?w_:window,(n,t,e,i,r,s,o,a,u,d)=>(()=>{"use strict";var g,v,x,C={28:W=>{W.exports=u},184:W=>{W.exports=d},260:W=>{W.exports=s},448:W=>{W.exports=i},512:W=>{W.exports=t},620:W=>{W.exports=o},820:W=>{W.exports=e},944:W=>{W.exports=n},960:W=>{W.exports=a},984:W=>{W.exports=r}},A={};function O(W){var E=A[W];if(E!==void 0)return E.exports;var k=A[W]={exports:{}};return C[W](k,k.exports,O),k.exports}O.n=W=>{var E=W&&W.__esModule?()=>W.default:()=>W;return O.d(E,{a:E}),E},O.d=(W,E)=>{for(var k in E)O.o(E,k)&&!O.o(W,k)&&Object.defineProperty(W,k,{enumerable:!0,get:E[k]})},O.o=(W,E)=>Object.prototype.hasOwnProperty.call(W,E);var N={};O.d(N,{default:()=>WE});var T=O(944),j=O.n(T),Z=O(512),$=O.n(Z),le=O(820),K=O.n(le);let{deg2rad:oe}=j(),{fireEvent:ue,isNumber:te,pick:V,relativeLength:se}=j();(function(W){W.getCenter=function(){let E=this.options,k=this.chart,B=2*(E.slicedOffset||0),Y=k.plotWidth-2*B,ne=k.plotHeight-2*B,Q=E.center,ce=Math.min(Y,ne),ve=E.thickness,Se,Ee=E.size,be=E.innerSize||0,We,He;typeof Ee=="string"&&(Ee=parseFloat(Ee)),typeof be=="string"&&(be=parseFloat(be));let lt=[V(Q?.[0],"50%"),V(Q?.[1],"50%"),V(Ee&&Ee<0?void 0:E.size,"100%"),V(be&&be<0?void 0:E.innerSize||0,"0%")];for(!k.angular||this instanceof K()||(lt[3]=0),We=0;We<4;++We)He=lt[We],Se=We<2||We===2&&/%$/.test(He),lt[We]=se(He,[Y,ne,ce,lt[2]][We])+(Se?B:0);return lt[3]>lt[2]&&(lt[3]=lt[2]),te(ve)&&2*ve<lt[2]&&ve>0&&(lt[3]=lt[2]-2*ve),ue(this,"afterGetCenter",{positions:lt}),lt},W.getStartAndEndRadians=function(E,k){let B=te(E)?E:0,Y=te(k)&&k>B&&k-B<360?k:B+360;return{start:oe*(B+-90),end:oe*(Y+-90)}}})(g||(g={}));let we=g,{addEvent:de,correctFloat:je,defined:Ue,pick:he}=j();function Pe(W){let E,k=this;return W&&k.pane.forEach(B=>{me(W.chartX-k.plotLeft,W.chartY-k.plotTop,B.center)&&(E=B)}),E}function me(W,E,k,B,Y){let ne=!0,Q=k[0],ce=k[1],ve=Math.sqrt(Math.pow(W-Q,2)+Math.pow(E-ce,2));if(Ue(B)&&Ue(Y)){let Se=Math.atan2(je(E-ce,8),je(W-Q,8));Y!==B&&(ne=B>Y?Se>=B&&Se<=Math.PI||Se<=Y&&Se>=-Math.PI:Se>=B&&Se<=je(Y,8))}return ve<=Math.ceil(k[2]/2)&&ne}function $e(W){this.polar&&(W.options.inverted&&([W.x,W.y]=[W.y,W.x]),W.isInsidePlot=this.pane.some(E=>me(W.x,W.y,E.center,E.axis&&E.axis.normalizedStartAngleRad,E.axis&&E.axis.normalizedEndAngleRad)))}function nt(W){let E=this.chart;W.hoverPoint&&W.hoverPoint.plotX&&W.hoverPoint.plotY&&E.hoverPane&&!me(W.hoverPoint.plotX,W.hoverPoint.plotY,E.hoverPane.center)&&(W.hoverPoint=void 0)}function xt(W){let E=this.chart;E.polar?(E.hoverPane=E.getHoverPane(W),W.filter=function(k){return k.visible&&!(!W.shared&&k.directTouch)&&he(k.options.enableMouseTracking,!0)&&(!E.hoverPane||k.xAxis.pane===E.hoverPane)}):E.hoverPane=void 0}let{defaultOptions:Tt}=j(),ut={shape:"circle",borderRadius:0,borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"},Ie={background:ut,center:["50%","50%"],size:"85%",innerSize:"0%",startAngle:0};Tt.pane=Ie;let at={pane:Ie,background:ut},{extend:Pt,merge:rt,splat:Ut}=j(),Cn=(()=>{class W{constructor(k,B){this.coll="pane",this.init(k,B)}init(k,B){this.chart=B,this.background=[],B.pane.push(this),this.setOptions(k)}setOptions(k){this.options=k=rt(at.pane,{background:this.chart.angular?{}:void 0},k)}render(){let k=this.options,B=this.chart.renderer;this.group||(this.group=B.g("pane-group").attr({zIndex:k.zIndex||0}).add()),this.updateCenter();let Y=this.options.background;if(Y){let ne=Math.max((Y=Ut(Y)).length,this.background.length||0);for(let Q=0;Q<ne;Q++)Y[Q]&&this.axis?this.renderBackground(rt(at.background,Y[Q]),Q):this.background[Q]&&(this.background[Q]=this.background[Q].destroy(),this.background.splice(Q,1))}}renderBackground(k,B){let Y={class:"highcharts-pane "+(k.className||"")},ne="animate";this.chart.styledMode||Pt(Y,{fill:k.backgroundColor,stroke:k.borderColor,"stroke-width":k.borderWidth}),this.background[B]||(this.background[B]=this.chart.renderer.path().add(this.group),ne="attr"),this.background[B][ne]({d:this.axis.getPlotBandPath(k.from,k.to,k)}).attr(Y)}updateCenter(k){this.center=(k||this.axis||{}).center=we.getCenter.call(this)}update(k,B){rt(!0,this.options,k),this.setOptions(this.options),this.render(),this.chart.axes.forEach(function(Y){Y.pane===this&&(Y.pane=null,Y.update({},B))},this)}}return W.compose=function(E,k){let B=E.prototype;B.getHoverPane||(B.collectionsWithUpdate.push("pane"),B.getHoverPane=Pe,de(E,"afterIsInsidePlot",$e),de(k,"afterGetHoverData",nt),de(k,"beforeGetHoverData",xt))},W})(),{area:{prototype:{pointClass:hn,pointClass:{prototype:Mt}}}}=$().seriesTypes,{defined:Xi,isNumber:Fn}=j(),Me=class extends hn{setState(){let W=this.state,E=this.series,k=E.chart.polar;Xi(this.plotHigh)||(this.plotHigh=E.yAxis.toPixels(this.high,!0)),Xi(this.plotLow)||(this.plotLow=this.plotY=E.yAxis.toPixels(this.low,!0)),E.lowerStateMarkerGraphic=E.stateMarkerGraphic,E.stateMarkerGraphic=E.upperStateMarkerGraphic,this.graphic=this.graphics&&this.graphics[1],this.plotY=this.plotHigh,k&&Fn(this.plotHighX)&&(this.plotX=this.plotHighX),Mt.setState.apply(this,arguments),this.state=W,this.plotY=this.plotLow,this.graphic=this.graphics&&this.graphics[0],k&&Fn(this.plotLowX)&&(this.plotX=this.plotLowX),E.upperStateMarkerGraphic=E.stateMarkerGraphic,E.stateMarkerGraphic=E.lowerStateMarkerGraphic,E.lowerStateMarkerGraphic=void 0;let B=E.modifyMarkerSettings();Mt.setState.apply(this,arguments),E.restoreMarkerSettings(B)}haloPath(){let W=this.series.chart.polar,E=[];return this.plotY=this.plotLow,W&&Fn(this.plotLowX)&&(this.plotX=this.plotLowX),this.isInside&&(E=Mt.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,W&&Fn(this.plotHighX)&&(this.plotX=this.plotHighX),this.isTopInside&&(E=E.concat(Mt.haloPath.apply(this,arguments))),E}isValid(){return Fn(this.low)&&Fn(this.high)}},{noop:hr}=j(),{area:Kn,area:{prototype:hi},column:{prototype:rn}}=$().seriesTypes,{addEvent:Jn,defined:dn,extend:In,isArray:Gi,isNumber:fe,pick:J,merge:Ge}=j();class it extends Kn{toYData(E){return[E.low,E.high]}highToXY(E){let k=this.chart,B=this.xAxis.postTranslate(E.rectPlotX||0,this.yAxis.len-(E.plotHigh||0));E.plotHighX=B.x-k.plotLeft,E.plotHigh=B.y-k.plotTop,E.plotLowX=E.plotX}getGraphPath(E){let k=[],B=[],Y=hi.getGraphPath,ne=this.options,Q=this.chart.polar,ce=Q&&ne.connectEnds!==!1,ve=ne.connectNulls,Se,Ee,be,We=ne.step;for(Se=(E=E||this.points).length;Se--;){Ee=E[Se];let Et=Q?{plotX:Ee.rectPlotX,plotY:Ee.yBottom,doCurve:!1}:{plotX:Ee.plotX,plotY:Ee.plotY,doCurve:!1};Ee.isNull||ce||ve||E[Se+1]&&!E[Se+1].isNull||B.push(Et),be={polarPlotY:Ee.polarPlotY,rectPlotX:Ee.rectPlotX,yBottom:Ee.yBottom,plotX:J(Ee.plotHighX,Ee.plotX),plotY:Ee.plotHigh,isNull:Ee.isNull},B.push(be),k.push(be),Ee.isNull||ce||ve||E[Se-1]&&!E[Se-1].isNull||B.push(Et)}let He=Y.call(this,E);We&&(We===!0&&(We="left"),ne.step={left:"right",center:"center",right:"left"}[We]);let lt=Y.call(this,k),Ct=Y.call(this,B);ne.step=We;let et=[].concat(He,lt);return!this.chart.polar&&Ct[0]&&Ct[0][0]==="M"&&(Ct[0]=["L",Ct[0][1],Ct[0][2]]),this.graphPath=et,this.areaPath=He.concat(Ct),et.isArea=!0,et.xMap=He.xMap,this.areaPath.xMap=He.xMap,et}drawDataLabels(){let E,k,B,Y,ne,Q=this.points,ce=Q.length,ve=[],Se=this.options.dataLabels,Ee=this.chart.inverted;if(Se){if(Gi(Se)?(Y=Se[0]||{enabled:!1},ne=Se[1]||{enabled:!1}):((Y=In({},Se)).x=Se.xHigh,Y.y=Se.yHigh,(ne=In({},Se)).x=Se.xLow,ne.y=Se.yLow),Y.enabled||this.hasDataLabels?.()){for(E=ce;E--;)if(k=Q[E]){let{plotHigh:be=0,plotLow:We=0}=k;B=Y.inside?be<We:be>We,k.y=k.high,k._plotY=k.plotY,k.plotY=be,ve[E]=k.dataLabel,k.dataLabel=k.dataLabelUpper,k.below=B,Ee?Y.align||(Y.align=B?"right":"left"):Y.verticalAlign||(Y.verticalAlign=B?"top":"bottom")}for(this.options.dataLabels=Y,hi.drawDataLabels&&hi.drawDataLabels.apply(this,arguments),E=ce;E--;)(k=Q[E])&&(k.dataLabelUpper=k.dataLabel,k.dataLabel=ve[E],delete k.dataLabels,k.y=k.low,k.plotY=k._plotY)}if(ne.enabled||this.hasDataLabels?.()){for(E=ce;E--;)if(k=Q[E]){let{plotHigh:be=0,plotLow:We=0}=k;B=ne.inside?be<We:be>We,k.below=!B,Ee?ne.align||(ne.align=B?"left":"right"):ne.verticalAlign||(ne.verticalAlign=B?"bottom":"top")}this.options.dataLabels=ne,hi.drawDataLabels&&hi.drawDataLabels.apply(this,arguments)}if(Y.enabled)for(E=ce;E--;)(k=Q[E])&&(k.dataLabels=[k.dataLabelUpper,k.dataLabel].filter(function(be){return!!be}));this.options.dataLabels=Se}}alignDataLabel(){rn.alignDataLabel.apply(this,arguments)}modifyMarkerSettings(){let E={marker:this.options.marker,symbol:this.symbol};if(this.options.lowMarker){let{options:{marker:k,lowMarker:B}}=this;this.options.marker=Ge(k,B),B.symbol&&(this.symbol=B.symbol)}return E}restoreMarkerSettings(E){this.options.marker=E.marker,this.symbol=E.symbol}drawPoints(){let E,k,B=this.points.length,Y=this.modifyMarkerSettings();for(hi.drawPoints.apply(this,arguments),this.restoreMarkerSettings(Y),E=0;E<B;)(k=this.points[E]).graphics=k.graphics||[],k.origProps={plotY:k.plotY,plotX:k.plotX,isInside:k.isInside,negative:k.negative,zone:k.zone,y:k.y},(k.graphic||k.graphics[0])&&(k.graphics[0]=k.graphic),k.graphic=k.graphics[1],k.plotY=k.plotHigh,dn(k.plotHighX)&&(k.plotX=k.plotHighX),k.y=J(k.high,k.origProps.y),k.negative=k.y<(this.options.threshold||0),this.zones.length&&(k.zone=k.getZone()),this.chart.polar||(k.isInside=k.isTopInside=k.plotY!==void 0&&k.plotY>=0&&k.plotY<=this.yAxis.len&&k.plotX>=0&&k.plotX<=this.xAxis.len),E++;for(hi.drawPoints.apply(this,arguments),E=0;E<B;)(k=this.points[E]).graphics=k.graphics||[],(k.graphic||k.graphics[1])&&(k.graphics[1]=k.graphic),k.graphic=k.graphics[0],k.origProps&&(In(k,k.origProps),delete k.origProps),E++}hasMarkerChanged(E,k){let B=E.lowMarker,Y=k.lowMarker||{};return B&&(B.enabled===!1||Y.symbol!==B.symbol||Y.height!==B.height||Y.width!==B.width)||super.hasMarkerChanged(E,k)}}it.defaultOptions=Ge(Kn.defaultOptions,{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">\u25CF</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:void 0,verticalAlign:void 0,xLow:0,xHigh:0,yLow:0,yHigh:0}}),Jn(it,"afterTranslate",function(){this.pointArrayMap.join(",")==="low,high"&&this.points.forEach(W=>{let E=W.high,k=W.plotY;W.isNull?W.plotY=void 0:(W.plotLow=k,W.plotHigh=fe(E)?this.yAxis.translate(this.dataModify?this.dataModify.modifyValue(E):E,!1,!0,void 0,!0):void 0,this.dataModify&&(W.yBottom=W.plotHigh))})},{order:0}),Jn(it,"afterTranslate",function(){this.points.forEach(W=>{if(this.chart.polar)this.highToXY(W),W.plotLow=W.plotY,W.tooltipPos=[((W.plotHighX||0)+(W.plotLowX||0))/2,((W.plotHigh||0)+(W.plotLow||0))/2];else{let E=W.pos(!1,W.plotLow),k=W.pos(!1,W.plotHigh);E&&k&&(E[0]=(E[0]+k[0])/2,E[1]=(E[1]+k[1])/2),W.tooltipPos=E}})},{order:3}),In(it.prototype,{deferTranslatePolar:!0,pointArrayMap:["low","high"],pointClass:Me,pointValKey:"low",setStackedPoints:hr}),$().registerSeriesType("arearange",it);let ht=it,{spline:{prototype:Ke}}=$().seriesTypes,{merge:yn,extend:Ht}=j();class kt extends ht{}kt.defaultOptions=yn(ht.defaultOptions),Ht(kt.prototype,{getPointSpline:Ke.getPointSpline}),$().registerSeriesType("areasplinerange",kt);var fn=O(448),mt=O.n(fn);let{noop:Jt}=j(),{crisp:pn,extend:vn,merge:Ft,pick:_n,relativeLength:Re}=j();class Lt extends mt(){pointAttribs(){return{}}getWhiskerPair(E,k,B,Y,ne){let Q=ne.whiskers.strokeWidth(),ce=(ve,Se)=>{let Ee=Re(ve,2*E)/2,be=pn(Se,Q);return[["M",pn(k-Ee),be],["L",pn(k+Ee),be]]};return[...ce(B,ne.highPlot),...ce(Y,ne.lowPlot)]}translate(){let E=this.yAxis,k=this.pointArrayMap;super.translate.apply(this),this.points.forEach(function(B){k.forEach(function(Y){B[Y]!==null&&(B[Y+"Plot"]=E.translate(B[Y],0,1,0,1))}),B.plotHigh=B.highPlot})}drawPoints(){let E,k,B,Y,ne,Q,ce,ve,Se,Ee,be,We=this.points,He=this.options,lt=this.chart,Ct=lt.renderer,et=this.doQuartiles!==!1,Et=this.options.whiskerLength;for(let Ze of We){let Wn=(ve=Ze.graphic)?"animate":"attr",tn=Ze.shapeArgs,vi={},ti={},bn={},_i={},fr=Ze.color||this.color,ft=Ze.options.whiskerLength||Et;if(Ze.plotY!==void 0){let Qt;Se=tn.width,be=(Ee=tn.x)+Se,E=et?Ze.q1Plot:Ze.lowPlot,k=et?Ze.q3Plot:Ze.lowPlot,B=Ze.highPlot,Y=Ze.lowPlot,ve||(Ze.graphic=ve=Ct.g("point").add(this.group),Ze.stem=Ct.path().addClass("highcharts-boxplot-stem").add(ve),Et&&(Ze.whiskers=Ct.path().addClass("highcharts-boxplot-whisker").add(ve)),et&&(Ze.box=Ct.path(ce).addClass("highcharts-boxplot-box").add(ve)),Ze.medianShape=Ct.path(Q).addClass("highcharts-boxplot-median").add(ve)),lt.styledMode||(ti.stroke=Ze.stemColor||He.stemColor||fr,ti["stroke-width"]=_n(Ze.stemWidth,He.stemWidth,He.lineWidth),ti.dashstyle=Ze.stemDashStyle||He.stemDashStyle||He.dashStyle,Ze.stem.attr(ti),ft&&(bn.stroke=Ze.whiskerColor||He.whiskerColor||fr,bn["stroke-width"]=_n(Ze.whiskerWidth,He.whiskerWidth,He.lineWidth),bn.dashstyle=Ze.whiskerDashStyle||He.whiskerDashStyle||He.dashStyle,Ze.whiskers.attr(bn)),et&&(vi.fill=Ze.fillColor||He.fillColor||fr,vi.stroke=He.lineColor||fr,vi["stroke-width"]=He.lineWidth||0,vi.dashstyle=Ze.boxDashStyle||He.boxDashStyle||He.dashStyle,Ze.box.attr(vi)),_i.stroke=Ze.medianColor||He.medianColor||fr,_i["stroke-width"]=_n(Ze.medianWidth,He.medianWidth,He.lineWidth),_i.dashstyle=Ze.medianDashStyle||He.medianDashStyle||He.dashStyle,Ze.medianShape.attr(_i));let Ot=pn((Ze.plotX||0)+(this.pointXOffset||0)+(this.barW||0)/2,Ze.stem.strokeWidth());if(Qt=[["M",Ot,k],["L",Ot,B],["M",Ot,E],["L",Ot,Y]],Ze.stem[Wn]({d:Qt}),et){let an=Ze.box.strokeWidth();E=pn(E,an),k=pn(k,an),Qt=[["M",Ee=pn(Ee,an),k],["L",Ee,E],["L",be=pn(be,an),E],["L",be,k],["L",Ee,k],["Z"]],Ze.box[Wn]({d:Qt})}if(ft){let an=Se/2,Qn=this.getWhiskerPair(an,Ot,Ze.upperWhiskerLength??He.upperWhiskerLength??ft,Ze.lowerWhiskerLength??He.lowerWhiskerLength??ft,Ze);Ze.whiskers[Wn]({d:Qn})}Qt=[["M",Ee,ne=pn(Ze.medianPlot,Ze.medianShape.strokeWidth())],["L",be,ne]],Ze.medianShape[Wn]({d:Qt})}}}toYData(E){return[E.low,E.q1,E.median,E.q3,E.high]}}Lt.defaultOptions=Ft(mt().defaultOptions,{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> <b>{series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2}),vn(Lt.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:Jt,setStackedPoints:Jt}),$().registerSeriesType("boxplot",Lt);let wt=Lt,nn={borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0};var pt=O(984),ct=O.n(pt);let{noop:sn}=j(),{arrayMax:Bn,arrayMin:An,isNumber:Li,merge:ns,pick:is,stableSort:Gh}=j(),jr=class{constructor(W,E){this.setState=sn,this.init(W,E)}init(W,E){this.options=W,this.visible=!0,this.chart=E.chart,this.legend=E}addToLegend(W){W.splice(this.options.legendIndex,0,this)}drawLegendSymbol(W){let E,k=is(W.options.itemDistance,20),B=this.legendItem||{},Y=this.options,ne=Y.ranges,Q=Y.connectorDistance;if(!ne||!ne.length||!Li(ne[0].value)){W.options.bubbleLegend.autoRanges=!0;return}Gh(ne,function(Ee,be){return be.value-Ee.value}),this.ranges=ne,this.setOptions(),this.render();let ce=this.getMaxLabelSize(),ve=this.ranges[0].radius,Se=2*ve;E=(E=Q-ve+ce.width)>0?E:0,this.maxLabel=ce,this.movementX=Y.labels.align==="left"?E:0,B.labelWidth=Se+E+k,B.labelHeight=Se+ce.height/2}setOptions(){let W=this.ranges,E=this.options,k=this.chart.series[E.seriesIndex],B=this.legend.baseline,Y={zIndex:E.zIndex,"stroke-width":E.borderWidth},ne={zIndex:E.zIndex,"stroke-width":E.connectorWidth},Q={align:this.legend.options.rtl||E.labels.align==="left"?"right":"left",zIndex:E.zIndex},ce=k.options.marker.fillOpacity,ve=this.chart.styledMode;W.forEach(function(Se,Ee){ve||(Y.stroke=is(Se.borderColor,E.borderColor,k.color),Y.fill=Se.color||E.color,Y.fill||(Y.fill=k.color,Y["fill-opacity"]=ce??1),ne.stroke=is(Se.connectorColor,E.connectorColor,k.color)),W[Ee].radius=this.getRangeRadius(Se.value),W[Ee]=ns(W[Ee],{center:W[0].radius-W[Ee].radius+B}),ve||ns(!0,W[Ee],{bubbleAttribs:ns(Y),connectorAttribs:ns(ne),labelAttribs:Q})},this)}getRangeRadius(W){let E=this.options,k=this.options.seriesIndex,B=this.chart.series[k],Y=E.ranges[0].value,ne=E.ranges[E.ranges.length-1].value,Q=E.minSize,ce=E.maxSize;return B.getRadius.call(this,ne,Y,Q,ce,W)}render(){let W=this.legendItem||{},E=this.chart.renderer,k=this.options.zThreshold;for(let B of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),W.symbol=E.g("bubble-legend"),W.label=E.g("bubble-legend-item").css(this.legend.itemStyle||{}),W.symbol.translateX=0,W.symbol.translateY=0,W.symbol.add(W.label),W.label.add(W.group),this.ranges))B.value>=k&&this.renderRange(B);this.hideOverlappingLabels()}renderRange(W){let E=this.ranges[0],k=this.legend,B=this.options,Y=B.labels,ne=this.chart,Q=ne.series[B.seriesIndex],ce=ne.renderer,ve=this.symbols,Se=ve.labels,Ee=W.center,be=Math.abs(W.radius),We=B.connectorDistance||0,He=Y.align,lt=k.options.rtl,Ct=B.borderWidth,et=B.connectorWidth,Et=E.radius||0,Ze=Ee-be-Ct/2+et/2,Wn=(Ze%1?1:.5)-(et%2?0:.5),tn=ce.styledMode,vi=lt||He==="left"?-We:We;He==="center"&&(vi=0,B.connectorDistance=0,W.labelAttribs.align="center"),ve.bubbleItems.push(ce.circle(Et,Ee+Wn,be).attr(tn?{}:W.bubbleAttribs).addClass((tn?"highcharts-color-"+Q.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(B.className||"")).add(this.legendItem.symbol)),ve.connectors.push(ce.path(ce.crispLine([["M",Et,Ze],["L",Et+vi,Ze]],B.connectorWidth)).attr(tn?{}:W.connectorAttribs).addClass((tn?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(B.connectorClassName||"")).add(this.legendItem.symbol));let ti=ce.text(this.formatLabel(W)).attr(tn?{}:W.labelAttribs).css(tn?{}:Y.style).addClass("highcharts-bubble-legend-labels "+(B.labels.className||"")).add(this.legendItem.symbol),bn={x:Et+vi+B.labels.x,y:Ze+B.labels.y+.4*ti.getBBox().height};ti.attr(bn),Se.push(ti),ti.placed=!0,ti.alignAttr=bn}getMaxLabelSize(){let W,E;return this.symbols.labels.forEach(function(k){E=k.getBBox(!0),W=W?E.width>W.width?E:W:E}),W||{}}formatLabel(W){let E=this.options,k=E.labels.formatter,B=E.labels.format,{numberFormatter:Y}=this.chart;return B?ct().format(B,W,this.chart):k?k.call(W):Y(W.value,1)}hideOverlappingLabels(){let W=this.chart,E=this.options.labels.allowOverlap,k=this.symbols;!E&&k&&(W.hideOverlappingLabels(k.labels),k.labels.forEach(function(B,Y){B.newOpacity?B.newOpacity!==B.oldOpacity&&k.connectors[Y].show():k.connectors[Y].hide()}))}getRanges(){let W=this.legend.bubbleLegend,E=W.chart.series,k=W.options.ranges,B,Y,ne=Number.MAX_VALUE,Q=-Number.MAX_VALUE;return E.forEach(function(ce){ce.isBubble&&!ce.ignoreSeries&&(Y=ce.getColumn("z").filter(Li)).length&&(ne=is(ce.options.zMin,Math.min(ne,Math.max(An(Y),ce.options.displayNegative===!1?ce.options.zThreshold:-Number.MAX_VALUE))),Q=is(ce.options.zMax,Math.max(Q,Bn(Y))))}),B=ne===Q?[{value:Q}]:[{value:ne},{value:(ne+Q)/2},{value:Q,autoRanges:!0}],k.length&&k[0].radius&&B.reverse(),B.forEach(function(ce,ve){k&&k[ve]&&(B[ve]=ns(k[ve],ce))}),B}predictBubbleSizes(){let W=this.chart,E=W.legend.options,k=E.floating,B=E.layout==="horizontal",Y=B?W.legend.lastLineHeight:0,ne=W.plotSizeX,Q=W.plotSizeY,ce=W.series[this.options.seriesIndex],ve=ce.getPxExtremes(),Se=Math.ceil(ve.minPxSize),Ee=Math.ceil(ve.maxPxSize),be=Math.min(Q,ne),We,He=ce.options.maxSize;return k||!/%$/.test(He)?We=Ee:(We=(be+Y)*(He=parseFloat(He))/100/(He/100+1),(B&&Q-We>=ne||!B&&ne-We>=Q)&&(We=Ee)),[Se,Math.ceil(We)]}updateRanges(W,E){let k=this.legend.options.bubbleLegend;k.minSize=W,k.maxSize=E,k.ranges=this.getRanges()}correctSizes(){let W=this.legend,E=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(E.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,E.maxPxSize),W.render())}},{setOptions:on}=j(),{composed:Wc}=j(),{addEvent:Gc,objectEach:Uu,pushUnique:ka,wrap:Yl}=j();function Zl(W,E,k){let B,Y,ne,Q=this.legend,ce=Do(this)>=0;Q&&Q.options.enabled&&Q.bubbleLegend&&Q.options.bubbleLegend.autoRanges&&ce?(B=Q.bubbleLegend.options,Y=Q.bubbleLegend.predictBubbleSizes(),Q.bubbleLegend.updateRanges(Y[0],Y[1]),B.placed||(Q.group.placed=!1,Q.allItems.forEach(ve=>{(ne=ve.legendItem||{}).group&&(ne.group.translateY=void 0)})),Q.render(),B.placed||(this.getMargins(),this.axes.forEach(ve=>{ve.setScale(),ve.updateNames(),Uu(ve.ticks,function(Se){Se.isNew=!0,Se.isNewLabel=!0})}),this.getMargins()),B.placed=!0,W.call(this,E,k),Q.bubbleLegend.correctSizes(),Hu(Q,hl(Q))):(W.call(this,E,k),Q&&Q.options.enabled&&Q.bubbleLegend&&(Q.render(),Hu(Q,hl(Q))))}function Do(W){let E=W.series,k=0;for(;k<E.length;){if(E[k]&&E[k].isBubble&&E[k].visible&&E[k].dataTable.rowCount)return k;k++}return-1}function hl(W){let E=W.allItems,k=[],B=E.length,Y,ne,Q,ce=0,ve=0;for(ce=0;ce<B;ce++)if(ne=E[ce].legendItem||{},Q=(E[ce+1]||{}).legendItem||{},ne.labelHeight&&(E[ce].itemHeight=ne.labelHeight),E[ce]===E[B-1]||ne.y!==Q.y){for(k.push({height:0}),Y=k[k.length-1];ve<=ce;ve++)E[ve].itemHeight>Y.height&&(Y.height=E[ve].itemHeight);Y.step=ce}return k}function $h(W){let E=this.bubbleLegend,k=this.options,B=k.bubbleLegend,Y=Do(this.chart);E&&E.ranges&&E.ranges.length&&(B.ranges.length&&(B.autoRanges=!!B.ranges[0].autoRanges),this.destroyItem(E)),Y>=0&&k.enabled&&B.enabled&&(B.seriesIndex=Y,this.bubbleLegend=new jr(B,this),this.bubbleLegend.addToLegend(W.allItems))}function Wr(W){let E;if(W.defaultPrevented)return!1;let k=W.legendItem,B=this.chart,Y=k.visible;this&&this.bubbleLegend&&(k.visible=!Y,k.ignoreSeries=Y,E=Do(B)>=0,this.bubbleLegend.visible!==E&&(this.update({bubbleLegend:{enabled:E}}),this.bubbleLegend.visible=E),k.visible=Y)}function Hu(W,E){let k=W.allItems,B=W.options.rtl,Y,ne,Q,ce,ve=0;k.forEach((Se,Ee)=>{(ce=Se.legendItem||{}).group&&(Y=ce.group.translateX||0,ne=ce.y||0,((Q=Se.movementX)||B&&Se.ranges)&&(Q=B?Y-Se.options.maxSize/2:Y+Q,ce.group.attr({translateX:Q})),Ee>E[ve].step&&ve++,ce.group.attr({translateY:Math.round(ne+E[ve].height/2)}),ce.y=ne+E[ve].height/2)})}let gf={compose:function(W,E){ka(Wc,"Series.BubbleLegend")&&(on({legend:{bubbleLegend:nn}}),Yl(W.prototype,"drawChartBox",Zl),Gc(E,"afterGetAllItems",$h),Gc(E,"itemClick",Wr))}};var qh=O(260),La=O.n(qh);let{seriesTypes:{scatter:{prototype:{pointClass:re}}}}=$(),{extend:Fe}=j();class qe extends re{haloPath(E){let k=(E&&this.marker&&this.marker.radius||0)+E;if(this.series.chart.inverted){let B=this.pos()||[0,0],{xAxis:Y,yAxis:ne,chart:Q}=this.series,ce=2*k;return Q.renderer.symbols.circle((Y?.len||0)-B[1]-k,(ne?.len||0)-B[0]-k,ce,ce)}return La().prototype.haloPath.call(this,k)}}Fe(qe.prototype,{ttBelow:!1});let{composed:Xe,noop:Be}=j(),{series:At,seriesTypes:{column:{prototype:zt},scatter:$t}}=$(),{addEvent:qt,arrayMax:Wt,arrayMin:Tn,clamp:Rt,extend:gn,isNumber:ri,merge:Yi,pick:Ai,pushUnique:yi}=j();function Dt(){let W=this.len,{coll:E,isXAxis:k,min:B}=this,Y=(this.max||0)-(B||0),ne=0,Q=W,ce=W/Y,ve;(E==="xAxis"||E==="yAxis")&&(this.series.forEach(Se=>{if(Se.bubblePadding&&Se.reserveSpace()){this.allowZoomOutside=!0,ve=!0;let Ee=Se.getColumn(k?"x":"y");if(k&&((Se.onPoint||Se).getRadii(0,0,Se),Se.onPoint&&(Se.radii=Se.onPoint.radii)),Y>0){let be=Ee.length;for(;be--;)if(ri(Ee[be])&&this.dataMin<=Ee[be]&&Ee[be]<=this.max){let We=Se.radii&&Se.radii[be]||0;ne=Math.min((Ee[be]-B)*ce-We,ne),Q=Math.max((Ee[be]-B)*ce+We,Q)}}}}),ve&&Y>0&&!this.logarithmic&&(Q-=W,ce*=(W+Math.max(0,ne)-Math.min(Q,W))/W,[["min","userMin",ne],["max","userMax",Q]].forEach(Se=>{Ai(this.options[Se[0]],this[Se[1]])===void 0&&(this[Se[0]]+=Se[2]/ce)})))}function oi(){let{ticks:W,tickPositions:E,dataMin:k=0,dataMax:B=0,categories:Y}=this,ne=this.options.type;if((Y?.length||ne==="category")&&this.series.find(Q=>Q.bubblePadding)){let Q=E.length;for(;Q--;){let ce=W[E[Q]],ve=ce.pos||0;(ve>B||ve<k)&&ce.label?.hide()}}}class ai extends $t{static compose(E,k,B){gf.compose(k,B),yi(Xe,"Series.Bubble")&&(qt(E,"foundExtremes",Dt),qt(E,"afterRender",oi))}animate(E){!E&&this.points.length<this.options.animationLimit&&this.points.forEach(function(k){let{graphic:B,plotX:Y=0,plotY:ne=0}=k;B&&B.width&&(this.hasRendered||B.attr({x:Y,y:ne,width:1,height:1}),B.animate(this.markerAttribs(k),this.options.animation))},this)}getRadii(){let E=this.getColumn("z"),k=this.getColumn("y"),B=[],Y,ne,Q,ce=this.chart.bubbleZExtremes,{minPxSize:ve,maxPxSize:Se}=this.getPxExtremes();if(!ce){let Ee,be=Number.MAX_VALUE,We=-Number.MAX_VALUE;this.chart.series.forEach(He=>{if(He.bubblePadding&&He.reserveSpace()){let lt=(He.onPoint||He).getZExtremes();lt&&(be=Math.min(Ai(be,lt.zMin),lt.zMin),We=Math.max(Ai(We,lt.zMax),lt.zMax),Ee=!0)}}),Ee?(ce={zMin:be,zMax:We},this.chart.bubbleZExtremes=ce):ce={zMin:0,zMax:0}}for(ne=0,Y=E.length;ne<Y;ne++)Q=E[ne],B.push(this.getRadius(ce.zMin,ce.zMax,ve,Se,Q,k&&k[ne]));this.radii=B}getRadius(E,k,B,Y,ne,Q){let ce=this.options,ve=ce.sizeBy!=="width",Se=ce.zThreshold,Ee=k-E,be=.5;if(Q===null||ne===null)return null;if(ri(ne)){if(ce.sizeByAbsoluteValue&&(ne=Math.abs(ne-Se),k=Ee=Math.max(k-Se,Math.abs(E-Se)),E=0),ne<E)return B/2-1;Ee>0&&(be=(ne-E)/Ee)}return ve&&be>=0&&(be=Math.sqrt(be)),Math.ceil(B+be*(Y-B))/2}hasData(){return!!this.dataTable.rowCount}markerAttribs(E,k){let B=super.markerAttribs(E,k),{height:Y=0,width:ne=0}=B;return this.chart.inverted?gn(B,{x:(E.plotX||0)-ne/2,y:(E.plotY||0)-Y/2}):B}pointAttribs(E,k){let B=this.options.marker,Y=B?.fillOpacity,ne=At.prototype.pointAttribs.call(this,E,k);return ne["fill-opacity"]=Y??1,ne}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:E,options:k,radii:B}=this,{minPxSize:Y}=this.getPxExtremes(),ne=E.length;for(;ne--;){let Q=E[ne],ce=B?B[ne]:0;this.zoneAxis==="z"&&(Q.negative=(Q.z||0)<(k.zThreshold||0)),ri(ce)&&ce>=Y/2?(Q.marker=gn(Q.marker,{radius:ce,width:2*ce,height:2*ce}),Q.dlBox={x:Q.plotX-ce,y:Q.plotY-ce,width:2*ce,height:2*ce}):(Q.shapeArgs=Q.plotY=Q.dlBox=void 0,Q.isInside=!1)}}getPxExtremes(){let E=Math.min(this.chart.plotWidth,this.chart.plotHeight),k=ne=>{let Q;return typeof ne=="string"&&(Q=/%$/.test(ne),ne=parseInt(ne,10)),Q?E*ne/100:ne},B=k(Ai(this.options.minSize,8)),Y=Math.max(k(Ai(this.options.maxSize,"20%")),B);return{minPxSize:B,maxPxSize:Y}}getZExtremes(){let E=this.options,k=this.getColumn("z").filter(ri);if(k.length){let B=Ai(E.zMin,Rt(Tn(k),E.displayNegative===!1?E.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),Y=Ai(E.zMax,Wt(k));if(ri(B)&&ri(Y))return{zMin:B,zMax:Y}}}searchKDTree(E,k,B,Y=Be,ne=Be){return Y=(Q,ce,ve)=>{let Se=Q[ve]||0,Ee=ce[ve]||0,be,We=!1;return Se===Ee?be=Q.index>ce.index?Q:ce:Se<0&&Ee<0?(be=Se-(Q.marker?.radius||0)>=Ee-(ce.marker?.radius||0)?Q:ce,We=!0):be=Se<Ee?Q:ce,[be,We]},ne=(Q,ce,ve)=>!ve&&Q>ce||Q<ce,super.searchKDTree(E,k,B,Y,ne)}}ai.defaultOptions=Yi($t.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:W}=this.series.chart,{z:E}=this.point;return ri(E)?W(E,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),gn(ai.prototype,{alignDataLabel:zt.alignDataLabel,applyZones:Be,bubblePadding:!0,isBubble:!0,keysAffectYAxis:["y"],pointArrayMap:["y","z"],pointClass:qe,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),qt(ai,"updatedData",W=>{delete W.target.chart.bubbleZExtremes}),qt(ai,"remove",W=>{delete W.target.chart.bubbleZExtremes}),$().registerSeriesType("bubble",ai);let{seriesTypes:{column:{prototype:{pointClass:{prototype:hs}}},arearange:{prototype:{pointClass:Sr}}}}=$(),{extend:ds,isNumber:Io}=j();class Mi extends Sr{isValid(){return Io(this.low)}}ds(Mi.prototype,{setState:hs.setState});let{noop:Di}=j(),{seriesTypes:{arearange:Ni,column:lr,column:{prototype:er}}}=$(),{addEvent:Kl,clamp:qs,extend:ju,isNumber:Ql,merge:$c,pick:yf}=j();class dl extends Ni{setOptions(){return $c(!0,arguments[0],{stacking:void 0}),Ni.prototype.setOptions.apply(this,arguments)}translate(){return er.translate.apply(this)}pointAttribs(){return er.pointAttribs.apply(this,arguments)}translate3dPoints(){return er.translate3dPoints.apply(this,arguments)}translate3dShapes(){return er.translate3dShapes.apply(this,arguments)}afterColumnTranslate(){let E,k,B,Y,ne=this.yAxis,Q=this.xAxis,ce=Q.startAngleRad,ve=this.chart,Se=this.xAxis.isRadial,Ee=Math.max(ve.chartWidth,ve.chartHeight)+999;this.points.forEach(be=>{let We=be.shapeArgs||{},He=this.options.minPointLength,lt=be.plotY,Ct=ne.translate(be.high,0,1,0,1);if(Ql(Ct)&&Ql(lt))if(be.plotHigh=qs(Ct,-Ee,Ee),be.plotLow=qs(lt,-Ee,Ee),Y=be.plotHigh,Math.abs(E=yf(be.rectPlotY,be.plotY)-be.plotHigh)<He?(k=He-E,E+=k,Y-=k/2):E<0&&(E*=-1,Y-=E),Se&&this.polar)B=be.barX+ce,be.shapeType="arc",be.shapeArgs=this.polar.arc(Y+E,Y,B,B+be.pointWidth);else{We.height=E,We.y=Y;let{x:et=0,width:Et=0}=We;be.shapeArgs=$c(be.shapeArgs,this.crispCol(et,Y,Et,E)),be.tooltipPos=ve.inverted?[ne.len+ne.pos-ve.plotLeft-Y-E/2,Q.len+Q.pos-ve.plotTop-et-Et/2,E]:[Q.left-ve.plotLeft+et+Et/2,ne.pos-ve.plotTop+Y+E/2,E]}})}}dl.defaultOptions=$c(lr.defaultOptions,Ni.defaultOptions,{borderRadius:{where:"all"},pointRange:null,legendSymbol:"rectangle",marker:null,states:{hover:{halo:!1}}}),Kl(dl,"afterColumnTranslate",function(){dl.prototype.afterColumnTranslate.apply(this)},{order:5}),ju(dl.prototype,{directTouch:!0,pointClass:Mi,trackerGroups:["group","dataLabelsGroup"],adjustForMissingColumns:er.adjustForMissingColumns,animate:er.animate,crispCol:er.crispCol,drawGraph:Di,drawPoints:er.drawPoints,getSymbol:Di,drawTracker:er.drawTracker,getColumnMetrics:er.getColumnMetrics}),$().registerSeriesType("columnrange",dl);let{column:qc}=$().seriesTypes,{clamp:Jl,merge:vf,pick:Xc}=j();class ei extends qc{translate(){let E=this.chart,k=this.options,B=this.dense=this.closestPointRange*this.xAxis.transA<2,Y=this.borderWidth=Xc(k.borderWidth,+!B),ne=this.yAxis,Q=k.threshold,ce=Xc(k.minPointLength,5),ve=this.getColumnMetrics(),Se=ve.width,Ee=this.pointXOffset=ve.offset,be=this.translatedThreshold=ne.getThreshold(Q),We=this.barW=Math.max(Se,1+2*Y);for(let He of(E.inverted&&(be-=.5),k.pointPadding&&(We=Math.ceil(We)),super.translate(),this.points)){let lt=Xc(He.yBottom,be),Ct=999+Math.abs(lt),et=Jl(He.plotY,-Ct,ne.len+Ct),Et=We/2,Ze=Math.min(et,lt),Wn=Math.max(et,lt)-Ze,tn=He.plotX+Ee,vi,ti,bn,_i,fr,ft,Qt,Ot,an,Qn,Rn;k.centerInCategory&&(tn=this.adjustForMissingColumns(tn,Se,He,ve)),He.barX=tn,He.pointWidth=Se,He.tooltipPos=E.inverted?[ne.len+ne.pos-E.plotLeft-et,this.xAxis.len-tn-Et,Wn]:[tn+Et,et+ne.pos-E.plotTop,Wn],vi=Q+(He.total||He.y),k.stacking==="percent"&&(vi=Q+(He.y<0)?-100:100);let Pn=ne.toPixels(vi,!0);bn=(ti=E.plotHeight-Pn-(E.plotHeight-be))?Et*(Ze-Pn)/ti:0,_i=ti?Et*(Ze+Wn-Pn)/ti:0,ft=tn-bn+Et,Qt=tn+bn+Et,Ot=tn+_i+Et,an=tn-_i+Et,Qn=Ze-ce,Rn=Ze+Wn,He.y<0&&(Qn=Ze,Rn=Ze+Wn+ce),E.inverted&&(fr=ne.width-Ze,ti=Pn-(ne.width-be),bn=Et*(Pn-fr)/ti,_i=Et*(Pn-(fr-Wn))/ti,Qt=(ft=tn+Et+bn)-2*bn,Ot=tn-_i+Et,an=tn+_i+Et,Qn=Ze,Rn=Ze+Wn-ce,He.y<0&&(Rn=Ze+Wn+ce)),He.shapeType="path",He.shapeArgs={x:ft,y:Qn,width:Qt-ft,height:Wn,d:[["M",ft,Qn],["L",Qt,Qn],["L",Ot,Rn],["L",an,Rn],["Z"]]}}}}ei.defaultOptions=vf(qc.defaultOptions,{}),$().registerSeriesType("columnpyramid",ei);let{arearange:Ro}=$().seriesTypes,{addEvent:or,merge:Xh,extend:_f}=j();class Na extends wt{getColumnMetrics(){return this.linkedParent&&this.linkedParent.columnMetrics||mt().prototype.getColumnMetrics.call(this)}drawDataLabels(){let E=this.pointValKey;if(Ro)for(let k of(Ro.prototype.drawDataLabels.call(this),this.points))k.y=k[E]}toYData(E){return[E.low,E.high]}}Na.defaultOptions=Xh(wt.defaultOptions,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">\u25CF</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}),or(Na,"afterTranslate",function(){for(let W of this.points)W.plotLow=W.plotY},{order:0}),_f(Na.prototype,{pointArrayMap:["low","high"],pointValKey:"high",doQuartiles:!1}),$().registerSeriesType("errorbar",Na);let{series:{prototype:{pointClass:Yh}}}=$(),{noop:fs}=j(),{series:Yc,seriesTypes:{column:Oa}}=$(),{clamp:Gr,isNumber:aa,extend:bf,merge:Wu,pick:T0,pInt:Zh,defined:Kh}=j();class Gu extends Yc{translate(){let E=this.yAxis,k=this.options,B=E.center;this.generatePoints(),this.points.forEach(Y=>{let ne=Wu(k.dial,Y.dial),Q=Zh(ne.radius)*B[2]/200,ce=Zh(ne.baseLength)*Q/100,ve=Zh(ne.rearLength)*Q/100,Se=ne.baseWidth,Ee=ne.topWidth,be=k.overshoot,We=E.startAngleRad+E.translate(Y.y,void 0,void 0,void 0,!0);(aa(be)||k.wrap===!1)&&(be=aa(be)?be/180*Math.PI:0,We=Gr(We,E.startAngleRad-be,E.endAngleRad+be)),We=180*We/Math.PI,Y.shapeType="path",Y.shapeArgs={d:ne.path||[["M",-ve,-Se/2],["L",ce,-Se/2],["L",Q,-Ee/2],["L",Q,Ee/2],["L",ce,Se/2],["L",-ve,Se/2],["Z"]],translateX:B[0],translateY:B[1],rotation:We},Y.plotX=B[0],Y.plotY=B[1],Kh(Y.y)&&E.max-E.min&&(Y.percentage=(Y.y-E.min)/(E.max-E.min)*100)})}drawPoints(){let E=this,k=E.chart,B=E.yAxis.center,Y=E.pivot,ne=E.options,Q=ne.pivot,ce=k.renderer;E.points.forEach(ve=>{let Se=ve.graphic,Ee=ve.shapeArgs,be=Ee.d,We=Wu(ne.dial,ve.dial);Se?(Se.animate(Ee),Ee.d=be):ve.graphic=ce[ve.shapeType](Ee).addClass("highcharts-dial").add(E.group),k.styledMode||ve.graphic[Se?"animate":"attr"]({stroke:We.borderColor,"stroke-width":We.borderWidth,fill:We.backgroundColor})}),Y?Y.animate({translateX:B[0],translateY:B[1]}):Q&&(E.pivot=ce.circle(0,0,Q.radius).attr({zIndex:2}).addClass("highcharts-pivot").translate(B[0],B[1]).add(E.group),k.styledMode||E.pivot.attr({fill:Q.backgroundColor,stroke:Q.borderColor,"stroke-width":Q.borderWidth}))}animate(E){let k=this;E||k.points.forEach(B=>{let Y=B.graphic;Y&&(Y.attr({rotation:180*k.yAxis.startAngleRad/Math.PI}),Y.animate({rotation:B.shapeArgs.rotation},k.options.animation))})}render(){this.group=this.plotGroup("group","series",this.visible?"inherit":"hidden",this.options.zIndex,this.chart.seriesGroup),Yc.prototype.render.call(this),this.group.clip(this.chart.clipRect)}setData(E,k){Yc.prototype.setData.call(this,E,!1),this.processData(),this.generatePoints(),T0(k,!0)&&this.chart.redraw()}hasData(){return!!this.points.length}}Gu.defaultOptions=Wu(Yc.defaultOptions,{dataLabels:{borderColor:"#cccccc",borderRadius:3,borderWidth:1,crop:!1,defer:!1,enabled:!0,verticalAlign:"top",y:15,zIndex:2},dial:{backgroundColor:"#000000",baseLength:"70%",baseWidth:3,borderColor:"#cccccc",borderWidth:0,radius:"80%",rearLength:"10%",topWidth:1},pivot:{radius:5,borderWidth:0,borderColor:"#cccccc",backgroundColor:"#000000"},tooltip:{headerFormat:""},showInLegend:!1}),bf(Gu.prototype,{angular:!0,directTouch:!0,drawGraph:fs,drawTracker:Oa.prototype.drawTracker,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,pointClass:class extends Yh{setState(W){this.state=W}},trackerGroups:["group","dataLabelsGroup"]}),$().registerSeriesType("gauge",Gu);var ec=O(620),ni=O.n(ec);let{composed:Qh}=j(),{addEvent:Is,pushUnique:$u}=j();function _m(){let W,E,k,B,Y=this;Y.container&&(W=Is(Y.container,"mousedown",ne=>{E&&E(),k&&k(),(B=Y.hoverPoint)&&B.series&&B.series.hasDraggableNodes&&B.series.options.draggable&&(B.series.onMouseDown(B,ne),E=Is(Y.container,"mousemove",Q=>B&&B.series&&B.series.onMouseMove(B,Q)),k=Is(Y.container.ownerDocument,"mouseup",Q=>(E(),k(),B&&B.series&&B.series.onMouseUp(B,Q))))})),Is(Y,"destroy",function(){W()})}let Zc={compose:function(W){$u(Qh,"DragNodes")&&Is(W,"load",_m)},onMouseDown:function(W,E){let{panKey:k}=this.chart.options.chart;if(k&&E[`${k}Key`])return;let B=this.chart.pointer?.normalize(E)||E;W.fixedPosition={chartX:B.chartX,chartY:B.chartY,plotX:W.plotX,plotY:W.plotY},W.inDragMode=!0},onMouseMove:function(W,E){if(W.fixedPosition&&W.inDragMode){let k,B,Y=this.chart,ne=Y.pointer?.normalize(E)||E,Q=W.fixedPosition.chartX-ne.chartX,ce=W.fixedPosition.chartY-ne.chartY,ve=Y.graphLayoutsLookup;(Math.abs(Q)>5||Math.abs(ce)>5)&&(k=W.fixedPosition.plotX-Q,B=W.fixedPosition.plotY-ce,Y.isInsidePlot(k,B)&&(W.plotX=k,W.plotY=B,W.hasDragged=!0,this.redrawHalo(W),ve.forEach(Se=>{Se.restartSimulation()})))}},onMouseUp:function(W){W.fixedPosition&&(W.hasDragged&&(this.layout.enableSimulation?this.layout.start():this.chart.redraw()),W.inDragMode=W.hasDragged=!1,this.options.fixedDraggable||delete W.fixedPosition)},redrawHalo:function(W){W&&this.halo&&this.halo.attr({d:W.haloPath(this.options.states.hover.halo.size)})}},{setAnimation:Ar}=j(),{composed:la}=j(),{addEvent:Kc,pushUnique:A0}=j();function bm(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(W=>{W.updateSimulation()}),this.redraw())}function tc(){this.graphLayoutsLookup&&(this.graphLayoutsLookup.forEach(W=>{W.updateSimulation(!1)}),this.redraw())}function D0(){this.graphLayoutsLookup&&this.graphLayoutsLookup.forEach(W=>{W.stop()})}function io(){let W,E=!1,k=B=>{B.maxIterations--&&isFinite(B.temperature)&&!B.isStable()&&!B.enableSimulation&&(B.beforeStep&&B.beforeStep(),B.step(),W=!1,E=!0)};if(this.graphLayoutsLookup&&!this.pointer?.hasDragged){for(Ar(!1,this),this.graphLayoutsLookup.forEach(B=>B.start());!W;)W=!0,this.graphLayoutsLookup.forEach(k);E&&this.series.forEach(B=>{B&&B.layout&&B.render()})}}let Po={compose:function(W){A0(la,"GraphLayout")&&(Kc(W,"afterPrint",bm),Kc(W,"beforePrint",tc),Kc(W,"predraw",D0),Kc(W,"render",io))},integrations:{},layouts:{}};var fl=O(960),Fa=O.n(fl);let{seriesTypes:{bubble:{prototype:{pointClass:xm}}}}=$(),Qc=class extends xm{destroy(){return this.series?.layout&&this.series.layout.removeElementFromCollection(this,this.series.layout.nodes),La().prototype.destroy.apply(this,arguments)}firePointEvent(){let W=this.series.options;if(this.isParentNode&&W.parentNode){let E=W.allowPointSelect;W.allowPointSelect=W.parentNode.allowPointSelect,La().prototype.firePointEvent.apply(this,arguments),W.allowPointSelect=E}else La().prototype.firePointEvent.apply(this,arguments)}select(){let W=this.series.chart;this.isParentNode?(W.getSelectedPoints=W.getSelectedParentNodes,La().prototype.select.apply(this,arguments),W.getSelectedPoints=Fa().prototype.getSelectedPoints):La().prototype.select.apply(this,arguments)}setState(W,E){this?.graphic?.parentGroup?.element&&super.setState(W,E)}},{isNumber:Jh}=j(),xf={attractive:function(W,E,k){let B=W.getMass(),Y=-k.x*E*this.diffTemperature,ne=-k.y*E*this.diffTemperature;W.fromNode.fixedPosition||(W.fromNode.plotX-=Y*B.fromNode/W.fromNode.degree,W.fromNode.plotY-=ne*B.fromNode/W.fromNode.degree),W.toNode.fixedPosition||(W.toNode.plotX+=Y*B.toNode/W.toNode.degree,W.toNode.plotY+=ne*B.toNode/W.toNode.degree)},attractiveForceFunction:function(W,E){return(E-W)/W},barycenter:function(){let W=this.options.gravitationalConstant||0,E=(this.barycenter.xFactor-(this.box.left+this.box.width)/2)*W,k=(this.barycenter.yFactor-(this.box.top+this.box.height)/2)*W;this.nodes.forEach(function(B){B.fixedPosition||(B.plotX-=E/B.mass/B.degree,B.plotY-=k/B.mass/B.degree)})},getK:function(W){return Math.pow(W.box.width*W.box.height/W.nodes.length,.5)},integrate:function(W,E){let k=-W.options.friction,B=W.options.maxSpeed,Y=E.prevX,ne=E.prevY,Q=(E.plotX+E.dispX-Y)*k,ce=(E.plotY+E.dispY-ne)*k,ve=Math.abs,Se=ve(Q)/(Q||1),Ee=ve(ce)/(ce||1),be=Se*Math.min(B,Math.abs(Q)),We=Ee*Math.min(B,Math.abs(ce));E.prevX=E.plotX+E.dispX,E.prevY=E.plotY+E.dispY,E.plotX+=be,E.plotY+=We,E.temperature=W.vectorLength({x:be,y:We})},repulsive:function(W,E,k){let B=E*this.diffTemperature/W.mass/W.degree;W.fixedPosition||(W.plotX+=k.x*B,W.plotY+=k.y*B)},repulsiveForceFunction:function(W,E){return(E-W)/W*(E>W)}},{noop:ed}=j(),wf={barycenter:function(){let W,E,k=this.options.gravitationalConstant||0,B=this.box,Y=this.nodes,ne=Math.sqrt(Y.length);for(let Q of Y)if(!Q.fixedPosition){let ce=Q.mass*ne,ve=Q.plotX||0,Se=Q.plotY||0,Ee=Q.series,be=Ee.parentNode;this.resolveSplitSeries(Q)&&be&&!Q.isParentNode?(W=be.plotX||0,E=be.plotY||0):(W=B.width/2,E=B.height/2),Q.plotX=ve-(ve-W)*k/ce,Q.plotY=Se-(Se-E)*k/ce,Ee.chart.hoverPoint===Q&&Ee.redrawHalo&&Ee.halo&&Ee.redrawHalo(Q)}},getK:ed,integrate:xf.integrate,repulsive:function(W,E,k,B){let Y=E*this.diffTemperature/W.mass/W.degree,ne=k.x*Y,Q=k.y*Y;W.fixedPosition||(W.plotX+=ne,W.plotY+=Q),B.fixedPosition||(B.plotX-=ne,B.plotY-=Q)},repulsiveForceFunction:function(W,E,k,B){return Math.min(W,(k.marker.radius+B.marker.radius)/2)}},Sf={attractive:function(W,E,k,B){let Y=W.getMass(),ne=k.x/B*E,Q=k.y/B*E;W.fromNode.fixedPosition||(W.fromNode.dispX-=ne*Y.fromNode/W.fromNode.degree,W.fromNode.dispY-=Q*Y.fromNode/W.fromNode.degree),W.toNode.fixedPosition||(W.toNode.dispX+=ne*Y.toNode/W.toNode.degree,W.toNode.dispY+=Q*Y.toNode/W.toNode.degree)},attractiveForceFunction:function(W,E){return W*W/E},barycenter:function(){let W=this.options.gravitationalConstant,E=this.barycenter.xFactor,k=this.barycenter.yFactor;this.nodes.forEach(function(B){if(!B.fixedPosition){let Y=B.getDegree(),ne=Y*(1+Y/2);B.dispX+=(E-B.plotX)*W*ne/B.degree,B.dispY+=(k-B.plotY)*W*ne/B.degree}})},getK:function(W){return Math.pow(W.box.width*W.box.height/W.nodes.length,.3)},integrate:function(W,E){E.dispX+=E.dispX*W.options.friction,E.dispY+=E.dispY*W.options.friction;let k=E.temperature=W.vectorLength({x:E.dispX,y:E.dispY});k!==0&&(E.plotX+=E.dispX/k*Math.min(Math.abs(E.dispX),W.temperature),E.plotY+=E.dispY/k*Math.min(Math.abs(E.dispY),W.temperature))},repulsive:function(W,E,k,B){W.dispX+=k.x/B*E/W.degree,W.dispY+=k.y/B*E/W.degree},repulsiveForceFunction:function(W,E){return E*E/W}};class nc{constructor(E){this.body=!1,this.isEmpty=!1,this.isInternal=!1,this.nodes=[],this.box=E,this.boxSize=Math.min(E.width,E.height)}divideBox(){let E=this.box.width/2,k=this.box.height/2;this.nodes[0]=new nc({left:this.box.left,top:this.box.top,width:E,height:k}),this.nodes[1]=new nc({left:this.box.left+E,top:this.box.top,width:E,height:k}),this.nodes[2]=new nc({left:this.box.left+E,top:this.box.top+k,width:E,height:k}),this.nodes[3]=new nc({left:this.box.left,top:this.box.top+k,width:E,height:k})}getBoxPosition(E){let k=E.plotX<this.box.left+this.box.width/2,B=E.plotY<this.box.top+this.box.height/2;return k?3*!B:B?1:2}insert(E,k){let B;this.isInternal?this.nodes[this.getBoxPosition(E)].insert(E,k-1):(this.isEmpty=!1,this.body?k?(this.isInternal=!0,this.divideBox(),this.body!==!0&&(this.nodes[this.getBoxPosition(this.body)].insert(this.body,k-1),this.body=!0),this.nodes[this.getBoxPosition(E)].insert(E,k-1)):((B=new nc({top:E.plotX||NaN,left:E.plotY||NaN,width:.1,height:.1})).body=E,B.isInternal=!1,this.nodes.push(B)):(this.isInternal=!1,this.body=E))}updateMassAndCenter(){let E=0,k=0,B=0;if(this.isInternal){for(let Y of this.nodes)Y.isEmpty||(E+=Y.mass,k+=Y.plotX*Y.mass,B+=Y.plotY*Y.mass);k/=E,B/=E}else this.body&&(E=this.body.mass,k=this.body.plotX,B=this.body.plotY);this.mass=E,this.plotX=k,this.plotY=B}}let td=class{constructor(W,E,k,B){this.box={left:W,top:E,width:k,height:B},this.maxDepth=25,this.root=new nc(this.box),this.root.isInternal=!0,this.root.isRoot=!0,this.root.divideBox()}calculateMassAndCenter(){this.visitNodeRecursive(null,null,function(W){W.updateMassAndCenter()})}insertNodes(W){for(let E of W)this.root.insert(E,this.maxDepth)}visitNodeRecursive(W,E,k){let B;if(W||(W=this.root),W===this.root&&E&&(B=E(W)),B!==!1){for(let Y of W.nodes){if(Y.isInternal){if(E&&(B=E(Y)),B===!1)continue;this.visitNodeRecursive(Y,E,k)}else Y.body&&E&&E(Y.body);k&&k(Y)}W===this.root&&k&&k(W)}}},{win:qu}=j(),{clamp:Cf,defined:Mf,isFunction:nd,fireEvent:ic,pick:pl}=j();class Ba{constructor(){this.box={},this.currentStep=0,this.initialRendering=!0,this.links=[],this.nodes=[],this.series=[],this.simulation=!1}static compose(E){Po.compose(E),Po.integrations.euler=Sf,Po.integrations.verlet=xf,Po.layouts["reingold-fruchterman"]=Ba}init(E){this.options=E,this.nodes=[],this.links=[],this.series=[],this.box={x:0,y:0,width:0,height:0},this.setInitialRendering(!0),this.integration=Po.integrations[E.integration],this.enableSimulation=E.enableSimulation,this.attractiveForce=pl(E.attractiveForce,this.integration.attractiveForceFunction),this.repulsiveForce=pl(E.repulsiveForce,this.integration.repulsiveForceFunction),this.approximation=E.approximation}updateSimulation(E){this.enableSimulation=pl(E,this.options.enableSimulation)}start(){let E=this.series,k=this.options;this.currentStep=0,this.forces=E[0]&&E[0].forces||[],this.chart=E[0]&&E[0].chart,this.initialRendering&&(this.initPositions(),E.forEach(function(B){B.finishedAnimating=!0,B.render()})),this.setK(),this.resetSimulation(k),this.enableSimulation&&this.step()}step(){let E=this.series;for(let k of(this.currentStep++,this.approximation==="barnes-hut"&&(this.createQuadTree(),this.quadTree.calculateMassAndCenter()),this.forces||[]))this[k+"Forces"](this.temperature);if(this.applyLimits(),this.temperature=this.coolDown(this.startTemperature,this.diffTemperature,this.currentStep),this.prevSystemTemperature=this.systemTemperature,this.systemTemperature=this.getSystemTemperature(),this.enableSimulation){for(let k of E)k.chart&&k.render();this.maxIterations--&&isFinite(this.temperature)&&!this.isStable()?(this.simulation&&qu.cancelAnimationFrame(this.simulation),this.simulation=qu.requestAnimationFrame(()=>this.step())):(this.simulation=!1,this.series.forEach(k=>{ic(k,"afterSimulation")}))}}stop(){this.simulation&&qu.cancelAnimationFrame(this.simulation)}setArea(E,k,B,Y){this.box={left:E,top:k,width:B,height:Y}}setK(){this.k=this.options.linkLength||this.integration.getK(this)}addElementsToCollection(E,k){for(let B of E)k.indexOf(B)===-1&&k.push(B)}removeElementFromCollection(E,k){let B=k.indexOf(E);B!==-1&&k.splice(B,1)}clear(){this.nodes.length=0,this.links.length=0,this.series.length=0,this.resetSimulation()}resetSimulation(){this.forcedStop=!1,this.systemTemperature=0,this.setMaxIterations(),this.setTemperature(),this.setDiffTemperature()}restartSimulation(){this.simulation?this.resetSimulation():(this.setInitialRendering(!1),this.enableSimulation?this.start():this.setMaxIterations(1),this.chart&&this.chart.redraw(),this.setInitialRendering(!0))}setMaxIterations(E){this.maxIterations=pl(E,this.options.maxIterations)}setTemperature(){this.temperature=this.startTemperature=Math.sqrt(this.nodes.length)}setDiffTemperature(){this.diffTemperature=this.startTemperature/(this.options.maxIterations+1)}setInitialRendering(E){this.initialRendering=E}createQuadTree(){this.quadTree=new td(this.box.left,this.box.top,this.box.width,this.box.height),this.quadTree.insertNodes(this.nodes)}initPositions(){let E=this.options.initialPositions;if(nd(E))for(let k of(E.call(this),this.nodes))Mf(k.prevX)||(k.prevX=k.plotX),Mf(k.prevY)||(k.prevY=k.plotY),k.dispX=0,k.dispY=0;else E==="circle"?this.setCircularPositions():this.setRandomPositions()}setCircularPositions(){let E,k=this.box,B=this.nodes,Y=2*Math.PI/(B.length+1),ne=B.filter(function(Ee){return Ee.linksTo.length===0}),Q={},ce=this.options.initialPositionRadius,ve=Ee=>{for(let be of Ee.linksFrom||[])Q[be.toNode.id]||(Q[be.toNode.id]=!0,Se.push(be.toNode),ve(be.toNode))},Se=[];for(let Ee of ne)Se.push(Ee),ve(Ee);if(Se.length)for(let Ee of B)Se.indexOf(Ee)===-1&&Se.push(Ee);else Se=B;for(let Ee=0,be=Se.length;Ee<be;++Ee)(E=Se[Ee]).plotX=E.prevX=pl(E.plotX,k.width/2+ce*Math.cos(Ee*Y)),E.plotY=E.prevY=pl(E.plotY,k.height/2+ce*Math.sin(Ee*Y)),E.dispX=0,E.dispY=0}setRandomPositions(){let E,k=this.box,B=this.nodes,Y=B.length+1,ne=Q=>{let ce=Q*Q/Math.PI;return ce-Math.floor(ce)};for(let Q=0,ce=B.length;Q<ce;++Q)(E=B[Q]).plotX=E.prevX=pl(E.plotX,k.width*ne(Q)),E.plotY=E.prevY=pl(E.plotY,k.height*ne(Y+Q)),E.dispX=0,E.dispY=0}force(E,...k){this.integration[E].apply(this,k)}barycenterForces(){this.getBarycenter(),this.force("barycenter")}getBarycenter(){let E=0,k=0,B=0;for(let Y of this.nodes)k+=Y.plotX*Y.mass,B+=Y.plotY*Y.mass,E+=Y.mass;return this.barycenter={x:k,y:B,xFactor:k/E,yFactor:B/E},this.barycenter}barnesHutApproximation(E,k){let B,Y,ne=this.getDistXY(E,k),Q=this.vectorLength(ne);return E!==k&&Q!==0&&(k.isInternal?k.boxSize/Q<this.options.theta&&Q!==0?(Y=this.repulsiveForce(Q,this.k),this.force("repulsive",E,Y*k.mass,ne,Q),B=!1):B=!0:(Y=this.repulsiveForce(Q,this.k),this.force("repulsive",E,Y*k.mass,ne,Q))),B}repulsiveForces(){if(this.approximation==="barnes-hut")for(let E of this.nodes)this.quadTree.visitNodeRecursive(null,k=>this.barnesHutApproximation(E,k));else{let E,k,B;for(let Y of this.nodes)for(let ne of this.nodes)Y===ne||Y.fixedPosition||(B=this.getDistXY(Y,ne),(k=this.vectorLength(B))!==0&&(E=this.repulsiveForce(k,this.k),this.force("repulsive",Y,E*ne.mass,B,k)))}}attractiveForces(){let E,k,B;for(let Y of this.links)Y.fromNode&&Y.toNode&&(E=this.getDistXY(Y.fromNode,Y.toNode),(k=this.vectorLength(E))!==0&&(B=this.attractiveForce(k,this.k),this.force("attractive",Y,B,E,k)))}applyLimits(){for(let E of this.nodes)E.fixedPosition||(this.integration.integrate(this,E),this.applyLimitBox(E,this.box),E.dispX=0,E.dispY=0)}applyLimitBox(E,k){let B=E.radius;E.plotX=Cf(E.plotX,k.left+B,k.width-B),E.plotY=Cf(E.plotY,k.top+B,k.height-B)}coolDown(E,k,B){return E-k*B}isStable(){return 1e-5>Math.abs(this.systemTemperature-this.prevSystemTemperature)||this.temperature<=0}getSystemTemperature(){let E=0;for(let k of this.nodes)E+=k.temperature;return E}vectorLength(E){return Math.sqrt(E.x*E.x+E.y*E.y)}getDistR(E,k){let B=this.getDistXY(E,k);return this.vectorLength(B)}getDistXY(E,k){let B=E.plotX-k.plotX,Y=E.plotY-k.plotY;return{x:B,y:Y,absX:Math.abs(B),absY:Math.abs(Y)}}}let ro=Ba,{addEvent:wm,defined:Sm,pick:Ef}=j();function ml(){let W=this.series,E=[];return W.forEach(k=>{k.parentNode&&k.parentNode.selected&&E.push(k.parentNode)}),E}function id(){this.allDataPoints&&delete this.allDataPoints}class Xu extends ro{constructor(){super(...arguments),this.index=NaN,this.nodes=[],this.series=[]}static compose(E){ro.compose(E),Po.integrations.packedbubble=wf,Po.layouts.packedbubble=Xu;let k=E.prototype;k.getSelectedParentNodes||(wm(E,"beforeRedraw",id),k.getSelectedParentNodes=ml),k.allParentNodes||(k.allParentNodes=[])}beforeStep(){this.options.marker&&this.series.forEach(E=>{E&&E.calculateParentRadius()})}isStable(){let E=Math.abs(this.prevSystemTemperature-this.systemTemperature);return 1>Math.abs(10*this.systemTemperature/Math.sqrt(this.nodes.length))&&E<1e-5||this.temperature<=0}setCircularPositions(){let E=this.box,k=[...this.nodes,...this?.chart?.allParentNodes||[]],B=2*Math.PI/(k.length+1),Y=this.options.initialPositionRadius,ne,Q,ce=0;for(let ve of k)this.resolveSplitSeries(ve)&&!ve.isParentNode?(ne=ve.series.parentNode.plotX,Q=ve.series.parentNode.plotY):(ne=E.width/2,Q=E.height/2),ve.plotX=ve.prevX=Ef(ve.plotX,ne+Y*Math.cos(ve.index||ce*B)),ve.plotY=ve.prevY=Ef(ve.plotY,Q+Y*Math.sin(ve.index||ce*B)),ve.dispX=0,ve.dispY=0,ce++}repulsiveForces(){let{options:E,k}=this,{bubblePadding:B=0,seriesInteraction:Y}=E,ne=[...this.nodes,...this?.chart?.allParentNodes||[]];for(let Q of ne){let ce=Q.series,ve=Q.fixedPosition,Se=(Q.marker?.radius||0)+B;for(let Ee of(Q.degree=Q.mass,Q.neighbours=0,ne)){let be=Ee.series;if(Q!==Ee&&!ve&&(Y||ce===be)&&!(ce===be&&(Ee.isParentNode||Q.isParentNode))){let We,He=this.getDistXY(Q,Ee),lt=this.vectorLength(He)-(Se+(Ee.marker?.radius||0));lt<0&&(Q.degree+=.01,We=this.repulsiveForce(-lt/Math.sqrt(++Q.neighbours),k,Q,Ee)*Ee.mass),this.force("repulsive",Q,We||0,He,Ee,lt)}}}}resolveSplitSeries(E){let k=E.series?.options?.layoutAlgorithm?.splitSeries;return!Sm(k)&&E.series.chart?.options?.plotOptions?.packedbubble?.layoutAlgorithm?.splitSeries||k||!1}applyLimitBox(E,k){let B,Y;this.resolveSplitSeries(E)&&!E.isParentNode&&this.options.parentNodeLimit&&(B=this.getDistXY(E,E.series.parentNode),(Y=E.series.parentNodeRadius-E.marker.radius-this.vectorLength(B))<0&&Y>-2*E.marker.radius&&(E.plotX-=.01*B.x,E.plotY-=.01*B.y)),super.applyLimitBox(E,k)}}Po.layouts.packedbubble=Xu;let{merge:I0,syncTimeout:Cm}=j(),{animObject:R0}=j();var so=O(28),gl=O.n(so);let{deg2rad:rd}=j(),{addEvent:Xs,merge:P0,uniqueKey:rc,defined:Yu,extend:ko}=j();function Mm(W,E){E=P0(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},E);let k=this.renderer.url,B=this.text||this,Y=B.textPath,{attributes:ne,enabled:Q}=E;if(W=W||Y&&Y.path,Y&&Y.undo(),W&&Q){let ce=Xs(B,"afterModifyTree",ve=>{if(W&&Q){let Se=W.attr("id");Se||W.attr("id",Se=rc());let Ee={x:0,y:0};Yu(ne.dx)&&(Ee.dx=ne.dx,delete ne.dx),Yu(ne.dy)&&(Ee.dy=ne.dy,delete ne.dy),B.attr(Ee),this.attr({transform:""}),this.box&&(this.box=this.box.destroy());let be=ve.nodes.slice(0);ve.nodes.length=0,ve.nodes[0]={tagName:"textPath",attributes:ko(ne,{"text-anchor":ne.textAnchor,href:`${k}#${Se}`}),children:be}}});B.textPath={path:W,undo:ce}}else B.attr({dx:0,dy:0}),delete B.textPath;return this.added&&(B.textCache="",this.renderer.buildText(B)),this}function ca(W){let E=W.bBox,k=this.element?.querySelector("textPath");if(k){let B=[],{b:Y,h:ne}=this.renderer.fontMetrics(this.element),Q=ne-Y,ce=RegExp('(<tspan>|<tspan(?!\\sclass="highcharts-br")[^>]*>|<\\/tspan>)',"g"),ve=k.innerHTML.replace(ce,"").split(/<tspan class="highcharts-br"[^>]*>/),Se=ve.length,Ee=(be,We)=>{let{x:He,y:lt}=We,Ct=(k.getRotationOfChar(be)-90)*rd,et=Math.cos(Ct),Et=Math.sin(Ct);return[[He-Q*et,lt-Q*Et],[He+Y*et,lt+Y*Et]]};for(let be=0,We=0;We<Se;We++){let He=ve[We].length;for(let lt=0;lt<He;lt+=5)try{let Ct=be+lt+We,[et,Et]=Ee(Ct,k.getStartPositionOfChar(Ct));lt===0?(B.push(Et),B.push(et)):(We===0&&B.unshift(Et),We===Se-1&&B.push(et))}catch{break}be+=He-1;try{let lt=be+We,Ct=k.getEndPositionOfChar(lt),[et,Et]=Ee(lt,Ct);B.unshift(Et),B.unshift(et)}catch{break}}B.length&&B.push(B[0].slice()),E.polygon=B}return E}function k0(W){let E=W.labelOptions,k=W.point,B=E[k.formatPrefix+"TextPath"]||E.textPath;B&&!E.useHTML&&(this.setTextPath(k.getDataLabelPath?.(this)||k.graphic,B),k.dataLabelPath&&!B.enabled&&(k.dataLabelPath=k.dataLabelPath.destroy()))}let{parse:Ys}=ni(),{noop:Va}=j(),{series:{prototype:yl},seriesTypes:{bubble:sc}}=$(),{initDataLabels:Tf,initDataLabelsDefer:za}={initDataLabels:function(){let W=this.options.dataLabels;if(!this.dataLabelsGroup){let E=this.initDataLabelsGroup();return!this.chart.styledMode&&W?.style&&E.css(W.style),E.attr({opacity:0}),this.visible&&E.show(),E}return this.dataLabelsGroup.attr(I0({opacity:1},this.getPlotBox("data-labels"))),this.dataLabelsGroup},initDataLabelsDefer:function(){let W=this.options.dataLabels;W?.defer&&this.options.layoutAlgorithm?.enableSimulation?Cm(()=>{this.deferDataLabels=!1},W?R0(W.animation).defer:0):this.deferDataLabels=!1}},{addEvent:L0,clamp:oc,defined:Lo,extend:ua,fireEvent:sd,isArray:Af,isNumber:No,merge:vl,pick:ac}=j();({compose:function(W){Xs(W,"afterGetBBox",ca),Xs(W,"beforeAddingDataLabel",k0);let E=W.prototype;E.setTextPath||(E.setTextPath=Mm)}}).compose(gl());class lc extends sc{constructor(){super(...arguments),this.parentNodeMass=0,this.deferDataLabels=!0}static compose(E,k,B){sc.compose(E,k,B),Zc.compose(k),Xu.compose(k)}accumulateAllPoints(){let E=this.chart,k=[];for(let B of E.series)if(B.is("packedbubble")&&B.reserveSpace()){let Y=B.getColumn("value");for(let ne=0;ne<Y.length;ne++)k.push([null,null,Y[ne],B.index,ne,{id:ne,marker:{radius:0}}])}return k}addLayout(){let E=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},k=E.type||"packedbubble",B=this.chart.options.chart,Y=this.chart.graphLayoutsStorage,ne=this.chart.graphLayoutsLookup,Q;Y||(this.chart.graphLayoutsStorage=Y={},this.chart.graphLayoutsLookup=ne=[]),(Q=Y[k])||(E.enableSimulation=Lo(B.forExport)?!B.forExport:E.enableSimulation,Y[k]=Q=new Po.layouts[k],Q.init(E),ne.splice(Q.index,0,Q)),this.layout=Q,this.points.forEach(ce=>{ce.mass=2,ce.degree=1,ce.collisionNmb=1}),Q.setArea(0,0,this.chart.plotWidth,this.chart.plotHeight),Q.addElementsToCollection([this],Q.series),Q.addElementsToCollection(this.points,Q.nodes)}addSeriesLayout(){let E=this.options.layoutAlgorithm=this.options.layoutAlgorithm||{},k=E.type||"packedbubble",B=this.chart.graphLayoutsStorage,Y=this.chart.graphLayoutsLookup,ne=vl(E,E.parentNodeOptions,{enableSimulation:this.layout.options.enableSimulation}),Q=B[k+"-series"];Q||(B[k+"-series"]=Q=new Po.layouts[k],Q.init(ne),Y.splice(Q.index,0,Q)),this.parentNodeLayout=Q,this.createParentNodes()}calculateParentRadius(){let E=this.seriesBox();this.parentNodeRadius=oc(Math.sqrt(2*this.parentNodeMass/Math.PI)+20,20,E?Math.max(Math.sqrt(Math.pow(E.width,2)+Math.pow(E.height,2))/2+20,20):Math.sqrt(2*this.parentNodeMass/Math.PI)+20),this.parentNode&&(this.parentNode.marker.radius=this.parentNode.radius=this.parentNodeRadius)}calculateZExtremes(){let E=this.chart.series,k=this.options.zMin,B=this.options.zMax,Y=1/0,ne=-1/0;return k&&B?[k,B]:(E.forEach(Q=>{Q.getColumn("value").forEach(ce=>{Lo(ce)&&(ce>ne&&(ne=ce),ce<Y&&(Y=ce))})}),[k=ac(k,Y),B=ac(B,ne)])}checkOverlap(E,k){let B=E[0]-k[0],Y=E[1]-k[1];return Math.sqrt(B*B+Y*Y)-Math.abs(E[2]+k[2])<-.001}createParentNodes(){let E=this.pointClass,k=this.chart,B=this.parentNodeLayout,Y=this.layout.options,ne,Q=this.parentNode,ce={radius:this.parentNodeRadius,lineColor:this.color,fillColor:Ys(this.color).brighten(.4).get()};Y.parentNodeOptions&&(ce=vl(Y.parentNodeOptions.marker||{},ce)),this.parentNodeMass=0,this.points.forEach(ve=>{this.parentNodeMass+=Math.PI*Math.pow(ve.marker.radius,2)}),this.calculateParentRadius(),B.nodes.forEach(ve=>{ve.seriesIndex===this.index&&(ne=!0)}),B.setArea(0,0,k.plotWidth,k.plotHeight),ne||(Q||(Q=new E(this,{mass:this.parentNodeRadius/2,marker:ce,dataLabels:{inside:!1},states:{normal:{marker:ce},hover:{marker:ce}},dataLabelOnNull:!0,degree:this.parentNodeRadius,isParentNode:!0,seriesIndex:this.index}),this.chart.allParentNodes.push(Q)),this.parentNode&&(Q.plotX=this.parentNode.plotX,Q.plotY=this.parentNode.plotY),this.parentNode=Q,B.addElementsToCollection([this],B.series),B.addElementsToCollection([Q],B.nodes))}deferLayout(){let E=this.options.layoutAlgorithm;this.visible&&(this.addLayout(),E.splitSeries&&this.addSeriesLayout())}destroy(){this.chart.graphLayoutsLookup&&this.chart.graphLayoutsLookup.forEach(E=>{E.removeElementFromCollection(this,E.series)},this),this.parentNode&&this.parentNodeLayout&&(this.parentNodeLayout.removeElementFromCollection(this.parentNode,this.parentNodeLayout.nodes),this.parentNode.dataLabel&&(this.parentNode.dataLabel=this.parentNode.dataLabel.destroy())),yl.destroy.apply(this,arguments)}drawDataLabels(){!this.deferDataLabels&&(yl.drawDataLabels.call(this,this.points),this.parentNode&&(this.parentNode.formatPrefix="parentNode",yl.drawDataLabels.call(this,[this.parentNode])))}drawGraph(){if(!this.layout||!this.layout.options.splitSeries)return;let E=this.chart,k=this.layout.options.parentNodeOptions.marker,B={fill:k.fillColor||Ys(this.color).brighten(.4).get(),opacity:k.fillOpacity,stroke:k.lineColor||this.color,"stroke-width":ac(k.lineWidth,this.options.lineWidth)},Y={};this.parentNodesGroup=this.plotGroup("parentNodesGroup","parentNode",this.visible?"inherit":"hidden",.1,E.seriesGroup),this.group?.attr({zIndex:2}),this.calculateParentRadius(),this.parentNode&&Lo(this.parentNode.plotX)&&Lo(this.parentNode.plotY)&&Lo(this.parentNodeRadius)&&(Y=vl({x:this.parentNode.plotX-this.parentNodeRadius,y:this.parentNode.plotY-this.parentNodeRadius,width:2*this.parentNodeRadius,height:2*this.parentNodeRadius},B),this.parentNode.graphic||(this.graph=this.parentNode.graphic=E.renderer.symbol(B.symbol).add(this.parentNodesGroup)),this.parentNode.graphic.attr(Y))}drawTracker(){let E,k=this.parentNode;super.drawTracker(),k&&(E=Af(k.dataLabels)?k.dataLabels:k.dataLabel?[k.dataLabel]:[],k.graphic&&(k.graphic.element.point=k),E.forEach(B=>{(B.div||B.element).point=k}))}getPointRadius(){let E,k,B,Y,ne=this.chart,Q=ne.plotWidth,ce=ne.plotHeight,ve=this.options,Se=ve.useSimulation,Ee=Math.min(Q,ce),be={},We=[],He=ne.allDataPoints||[],lt=He.length;["minSize","maxSize"].forEach(et=>{let Et=parseInt(ve[et],10),Ze=/%$/.test(ve[et]);be[et]=Ze?Ee*Et/100:Et*Math.sqrt(lt)}),ne.minRadius=E=be.minSize/Math.sqrt(lt),ne.maxRadius=k=be.maxSize/Math.sqrt(lt);let Ct=Se?this.calculateZExtremes():[E,k];He.forEach((et,Et)=>{B=Se?oc(et[2],Ct[0],Ct[1]):et[2],(Y=this.getRadius(Ct[0],Ct[1],E,k,B))===0&&(Y=null),He[Et][2]=Y,We.push(Y)}),this.radii=We}init(){return yl.init.apply(this,arguments),za.call(this),this.eventsToUnbind.push(L0(this,"updatedData",function(){this.chart.series.forEach(E=>{E.type===this.type&&(E.isDirty=!0)},this)})),this}onMouseUp(E){if(E.fixedPosition&&!E.removed){let k,B=this.layout,Y=this.parentNodeLayout;!E.isParentNode&&Y&&B.options.dragBetweenSeries&&Y.nodes.forEach(ne=>{E&&E.marker&&ne!==E.series.parentNode&&(k=B.getDistXY(E,ne),B.vectorLength(k)-ne.marker.radius-E.marker.radius<0&&(ne.series.addPoint(vl(E.options,{plotX:E.plotX,plotY:E.plotY}),!1),B.removeElementFromCollection(E,B.nodes),E.remove()))}),Zc.onMouseUp.apply(this,arguments)}}placeBubbles(E){let k=this.checkOverlap,B=this.positionBubble,Y=[],ne=1,Q=0,ce=0,ve,Se=[],Ee,be=E.sort((We,He)=>He[2]-We[2]);if(be.length){if(Y.push([[0,0,be[0][2],be[0][3],be[0][4]]]),be.length>1)for(Y.push([[0,0-be[1][2]-be[0][2],be[1][2],be[1][3],be[1][4]]]),Ee=2;Ee<be.length;Ee++)be[Ee][2]=be[Ee][2]||1,k(ve=B(Y[ne][Q],Y[ne-1][ce],be[Ee]),Y[ne][0])?(Y.push([]),ce=0,Y[ne+1].push(B(Y[ne][Q],Y[ne][0],be[Ee])),ne++,Q=0):ne>1&&Y[ne-1][ce+1]&&k(ve,Y[ne-1][ce+1])?(ce++,Y[ne].push(B(Y[ne][Q],Y[ne-1][ce],be[Ee])),Q++):(Q++,Y[ne].push(ve));this.chart.stages=Y,this.chart.rawPositions=[].concat.apply([],Y),this.resizeRadius(),Se=this.chart.rawPositions}return Se}pointAttribs(E,k){let B=this.options,Y=E&&E.isParentNode,ne=B.marker;Y&&B.layoutAlgorithm&&B.layoutAlgorithm.parentNodeOptions&&(ne=B.layoutAlgorithm.parentNodeOptions.marker);let Q=ne.fillOpacity,ce=yl.pointAttribs.call(this,E,k);return Q!==1&&(ce["fill-opacity"]=Q),ce}positionBubble(E,k,B){let Y=Math.asin,ne=Math.acos,Q=Math.pow,ce=Math.abs,ve=(0,Math.sqrt)(Q(E[0]-k[0],2)+Q(E[1]-k[1],2)),Se=ne((Q(ve,2)+Q(B[2]+k[2],2)-Q(B[2]+E[2],2))/(2*(B[2]+k[2])*ve)),Ee=Y(ce(E[0]-k[0])/ve),be=(E[1]-k[1]<0?0:Math.PI)+Se+Ee*((E[0]-k[0])*(E[1]-k[1])<0?1:-1),We=Math.cos(be),He=Math.sin(be);return[k[0]+(k[2]+B[2])*He,k[1]-(k[2]+B[2])*We,B[2],B[3],B[4]]}render(){let E=[];yl.render.apply(this,arguments),!this.options.dataLabels.allowOverlap&&(this.data.forEach(k=>{Af(k.dataLabels)&&k.dataLabels.forEach(B=>{E.push(B)})}),this.options.useSimulation&&this.chart.hideOverlappingLabels(E))}resizeRadius(){let E,k,B,Y,ne,Q=this.chart,ce=Q.rawPositions,ve=Math.min,Se=Math.max,Ee=Q.plotLeft,be=Q.plotTop,We=Q.plotHeight,He=Q.plotWidth;for(let Et of(E=B=Number.POSITIVE_INFINITY,k=Y=Number.NEGATIVE_INFINITY,ce))ne=Et[2],E=ve(E,Et[0]-ne),k=Se(k,Et[0]+ne),B=ve(B,Et[1]-ne),Y=Se(Y,Et[1]+ne);let lt=[k-E,Y-B],Ct=[(He-Ee)/lt[0],(We-be)/lt[1]],et=ve.apply([],Ct);if(Math.abs(et-1)>1e-10){for(let Et of ce)Et[2]*=et;this.placeBubbles(ce)}else Q.diffY=We/2+be-B-(Y-B)/2,Q.diffX=He/2+Ee-E-(k-E)/2}seriesBox(){let E,k=this.chart,B=this.data,Y=Math.max,ne=Math.min,Q=[k.plotLeft,k.plotLeft+k.plotWidth,k.plotTop,k.plotTop+k.plotHeight];return B.forEach(ce=>{Lo(ce.plotX)&&Lo(ce.plotY)&&ce.marker.radius&&(E=ce.marker.radius,Q[0]=ne(Q[0],ce.plotX-E),Q[1]=Y(Q[1],ce.plotX+E),Q[2]=ne(Q[2],ce.plotY-E),Q[3]=Y(Q[3],ce.plotY+E))}),No(Q.width/Q.height)?Q:null}setVisible(){let E=this;yl.setVisible.apply(E,arguments),E.parentNodeLayout&&E.graph?E.visible?(E.graph.show(),E.parentNode.dataLabel&&E.parentNode.dataLabel.show()):(E.graph.hide(),E.parentNodeLayout.removeElementFromCollection(E.parentNode,E.parentNodeLayout.nodes),E.parentNode.dataLabel&&E.parentNode.dataLabel.hide()):E.layout&&(E.visible?E.layout.addElementsToCollection(E.points,E.layout.nodes):E.points.forEach(k=>{E.layout.removeElementFromCollection(k,E.layout.nodes)}))}translate(){let E,k,B,Y=this.chart,ne=this.data,Q=this.index,ce=this.options.useSimulation;for(let ve of(this.generatePoints(),Lo(Y.allDataPoints)||(Y.allDataPoints=this.accumulateAllPoints(),this.getPointRadius()),ce?B=Y.allDataPoints:(B=this.placeBubbles(Y.allDataPoints),this.options.draggable=!1),B))ve[3]===Q&&(E=ne[ve[4]],k=ac(ve[2],void 0),ce||(E.plotX=ve[0]-Y.plotLeft+Y.diffX,E.plotY=ve[1]-Y.plotTop+Y.diffY),No(k)&&(E.marker=ua(E.marker,{radius:k,width:2*k,height:2*k}),E.radius=k));ce&&this.deferLayout(),sd(this,"afterTranslate")}}lc.defaultOptions=vl(sc.defaultOptions,{minSize:"10%",maxSize:"50%",sizeBy:"area",zoneAxis:"y",crisp:!1,tooltip:{pointFormat:"Value: {point.value}"},draggable:!0,useSimulation:!0,parentNode:{allowPointSelect:!1},dataLabels:{formatter:function(){let{numberFormatter:W}=this.series.chart,{value:E}=this.point;return Jh(E)?W(E,-1):""},parentNodeFormatter:function(){return this.name||""},parentNodeTextPath:{enabled:!0},padding:0,style:{transition:"opacity 2000ms"}},layoutAlgorithm:{initialPositions:"circle",initialPositionRadius:20,bubblePadding:5,parentNodeLimit:!1,seriesInteraction:!0,dragBetweenSeries:!1,parentNodeOptions:{maxIterations:400,gravitationalConstant:.03,maxSpeed:50,initialPositionRadius:100,seriesInteraction:!0,marker:{fillColor:null,fillOpacity:1,lineWidth:null,lineColor:null,symbol:"circle"}},enableSimulation:!0,type:"packedbubble",integration:"packedbubble",maxIterations:1e3,splitSeries:!1,maxSpeed:5,gravitationalConstant:.01,friction:-.981},stickyTracking:!1}),ua(lc.prototype,{pointClass:Qc,axisTypes:[],directTouch:!0,forces:["barycenter","repulsive"],hasDraggableNodes:!0,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointArrayMap:["value"],pointValKey:"value",requireSorting:!1,trackerGroups:["group","dataLabelsGroup","parentNodesGroup"],initDataLabels:Tf,alignDataLabel:yl.alignDataLabel,indexateNodes:Va,onMouseDown:Zc.onMouseDown,onMouseMove:Zc.onMouseMove,redrawHalo:Zc.redrawHalo,searchPoint:Va}),$().registerSeriesType("packedbubble",lc);let{noop:Jc}=j(),{area:cc,line:od,scatter:Df}=$().seriesTypes,{extend:Em,merge:ad}=j();class _l extends Df{getGraphPath(){let E=od.prototype.getGraphPath.call(this),k=E.length+1;for(;k--;)(k===E.length||E[k][0]==="M")&&k>0&&E.splice(k,0,["Z"]);return this.areaPath=E,E}drawGraph(){this.options.fillColor=this.color,cc.prototype.drawGraph.call(this)}}_l.defaultOptions=ad(Df.defaultOptions,{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0,legendSymbol:"rectangle"}),Em(_l.prototype,{type:"polygon",drawTracker:od.prototype.drawTracker,setStackedPoints:Jc}),$().registerSeriesType("polygon",_l);let bl={circular:{gridLineWidth:1,labels:{align:void 0,x:0,y:void 0},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},radial:{gridLineInterpolation:"circle",gridLineWidth:1,labels:{align:"right",padding:5,x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},radialGauge:{endOnTick:!1,gridLineWidth:0,labels:{align:"center",distance:-25,x:0,y:void 0},lineWidth:1,minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickPosition:"inside",tickWidth:2,title:{rotation:0,text:""},zIndex:2}},{defaultOptions:eu}=j(),{composed:Tm,noop:Zu}=j(),{addEvent:rs,correctFloat:Ku,defined:ha,extend:tu,fireEvent:N0,isObject:Qu,merge:Ua,pick:Rs,pushUnique:Am,relativeLength:mo,splat:Dm,wrap:Ju}=j();(function(W){function E(){this.autoConnect=this.isCircular&&Rs(this.userMax,this.options.max)===void 0&&Ku(this.endAngleRad-this.startAngleRad)===Ku(2*Math.PI),!this.isCircular&&this.chart.inverted&&this.max++,this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)}function k(){return()=>{if(this.isRadial&&this.tickPositions&&this.options.labels&&this.options.labels.allowOverlap!==!0)return this.tickPositions.map(ft=>this.ticks[ft]?.label).filter(ft=>!!ft)}}function B(){return Zu}function Y(ft,Qt,Ot){let an=this.pane.center,Qn=ft.value,Rn,Pn,$i;return this.isCircular?(ha(Qn)?ft.point&&(ft.point.shapeArgs||{}).start&&(Qn=this.chart.inverted?this.translate(ft.point.rectPlotY,!0):ft.point.x):(Pn=ft.chartX||0,$i=ft.chartY||0,Qn=this.translate(Math.atan2($i-Ot,Pn-Qt)-this.startAngleRad,!0)),Pn=(Rn=this.getPosition(Qn)).x,$i=Rn.y):(ha(Qn)||(Pn=ft.chartX,$i=ft.chartY),ha(Pn)&&ha($i)&&(Ot=an[1]+this.chart.plotTop,Qn=this.translate(Math.min(Math.sqrt(Math.pow(Pn-Qt,2)+Math.pow($i-Ot,2)),an[2]/2)-an[3]/2,!0))),[Qn,Pn||0,$i||0]}function ne(ft,Qt,Ot){let an=this.pane.center,Qn=this.chart,Rn=this.left||0,Pn=this.top||0,$i,Mr=Rs(Qt,an[2]/2-this.offset),_r;return Ot===void 0&&(Ot=this.horiz?0:this.center&&-this.center[3]/2),Ot&&(Mr+=Ot),this.isCircular||Qt!==void 0?((_r=this.chart.renderer.symbols.arc(Rn+an[0],Pn+an[1],Mr,Mr,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[Rn+an[0]],_r.yBounds=[Pn+an[1]-Mr]):($i=this.postTranslate(this.angleRad,Mr),_r=[["M",this.center[0]+Qn.plotLeft,this.center[1]+Qn.plotTop],["L",$i.x,$i.y]]),_r}function Q(){this.constructor.prototype.getOffset.call(this),this.chart.axisOffset[this.side]=0}function ce(ft,Qt,Ot){let an=this.chart,Qn=Wa=>{if(typeof Wa=="string"){let da=parseInt(Wa,10);return os.test(Wa)&&(da=da*$i/100),da}return Wa},Rn=this.center,Pn=this.startAngleRad,$i=Rn[2]/2,Mr=Math.min(this.offset,0),_r=this.left||0,vo=this.top||0,os=/%$/,gs=this.isCircular,Zi,Vi,Kr,Bo,nu,Zs,ys=Rs(Qn(Ot.outerRadius),$i),iu=Qn(Ot.innerRadius),Vo=Rs(Qn(Ot.thickness),10);if(this.options.gridLineInterpolation==="polygon")Zs=this.getPlotLinePath({value:ft}).concat(this.getPlotLinePath({value:Qt,reverse:!0}));else{ft=Math.max(ft,this.min),Qt=Math.min(Qt,this.max);let Wa=this.translate(ft),da=this.translate(Qt);gs||(ys=Wa||0,iu=da||0),Ot.shape!=="circle"&&gs?(Zi=Pn+(Wa||0),Vi=Pn+(da||0)):(Zi=-Math.PI/2,Vi=1.5*Math.PI,nu=!0),ys-=Mr,Vo-=Mr,Zs=an.renderer.symbols.arc(_r+Rn[0],vo+Rn[1],ys,ys,{start:Math.min(Zi,Vi),end:Math.max(Zi,Vi),innerR:Rs(iu,ys-Vo),open:nu,borderRadius:Ot.borderRadius}),gs&&(Kr=(Vi+Zi)/2,Bo=_r+Rn[0]+Rn[2]/2*Math.cos(Kr),Zs.xBounds=Kr>-Math.PI/2&&Kr<Math.PI/2?[Bo,an.plotWidth]:[0,Bo],Zs.yBounds=[vo+Rn[1]+Rn[2]/2*Math.sin(Kr)],Zs.yBounds[0]+=Kr>-Math.PI&&Kr<0||Kr>Math.PI?-10:10)}return Zs}function ve(ft){let Qt=this.pane.center,Ot=this.chart,an=Ot.inverted,Qn=ft.reverse,Rn=this.pane.options.background,Pn=Rn?Dm(Rn)[0]:{},$i=Pn.innerRadius||"0%",Mr=Pn.outerRadius||"100%",_r=Qt[0]+Ot.plotLeft,vo=Qt[1]+Ot.plotTop,os=this.height,gs=ft.isCrosshair,Zi=Qt[3]/2,Vi=ft.value,Kr,Bo,nu,Zs,ys,iu,Vo,Wa,da,zo=this.getPosition(Vi),kf=zo.x,rh=zo.y;if(gs&&(Vi=(Wa=this.getCrosshairPosition(ft,_r,vo))[0],kf=Wa[1],rh=Wa[2]),this.isCircular)Bo=Math.sqrt(Math.pow(kf-_r,2)+Math.pow(rh-vo,2)),nu=typeof $i=="string"?mo($i,1):$i/Bo,Zs=typeof Mr=="string"?mo(Mr,1):Mr/Bo,Qt&&Zi&&(nu<(Kr=Zi/Bo)&&(nu=Kr),Zs<Kr&&(Zs=Kr)),da=[["M",_r+nu*(kf-_r),vo-nu*(vo-rh)],["L",kf-(1-Zs)*(kf-_r),rh+(1-Zs)*(vo-rh)]];else if((Vi=this.translate(Vi))&&(Vi<0||Vi>os)&&(Vi=0),this.options.gridLineInterpolation==="circle")da=this.getLinePath(0,Vi,Zi);else if(da=[],Ot[an?"yAxis":"xAxis"].forEach(dc=>{dc.pane===this.pane&&(ys=dc)}),ys){Vo=ys.tickPositions,ys.autoConnect&&(Vo=Vo.concat([Vo[0]])),Qn&&(Vo=Vo.slice().reverse()),Vi&&(Vi+=Zi);for(let dc=0;dc<Vo.length;dc++)iu=ys.getPosition(Vo[dc],Vi),da.push(dc?["L",iu.x,iu.y]:["M",iu.x,iu.y])}return da}function Se(ft,Qt){let Ot=this.translate(ft);return this.postTranslate(this.isCircular?Ot:this.angleRad,Rs(this.isCircular?Qt:Ot<0?0:Ot,this.center[2]/2)-this.offset)}function Ee(){let ft=this.center,Qt=this.chart,Ot=this.options.title;return{x:Qt.plotLeft+ft[0]+(Ot.x||0),y:Qt.plotTop+ft[1]-{high:.5,middle:.25,low:0}[Ot.align]*ft[2]+(Ot.y||0)}}function be(ft){ft.beforeSetTickPositions=E,ft.createLabelCollector=k,ft.getCrosshairPosition=Y,ft.getLinePath=ne,ft.getOffset=Q,ft.getPlotBandPath=ce,ft.getPlotLinePath=ve,ft.getPosition=Se,ft.getTitlePosition=Ee,ft.postTranslate=tn,ft.setAxisSize=ti,ft.setAxisTranslation=bn,ft.setOptions=_i}function We(){let ft=this.chart,Qt=this.options,Ot=ft.angular&&this.isXAxis,an=this.pane,Qn=an?.options;if(!Ot&&an&&(ft.angular||ft.polar)){let Rn=2*Math.PI,Pn=(Rs(Qn.startAngle,0)-90)*Math.PI/180,$i=(Rs(Qn.endAngle,Rs(Qn.startAngle,0)+360)-90)*Math.PI/180;this.angleRad=(Qt.angle||0)*Math.PI/180,this.startAngleRad=Pn,this.endAngleRad=$i,this.offset=Qt.offset||0;let Mr=(Pn%Rn+Rn)%Rn,_r=($i%Rn+Rn)%Rn;Mr>Math.PI&&(Mr-=Rn),_r>Math.PI&&(_r-=Rn),this.normalizedStartAngleRad=Mr,this.normalizedEndAngleRad=_r}}function He(ft){this.isRadial&&(ft.align=void 0,ft.preventDefault())}function lt(){if(this.chart?.labelCollectors){let ft=this.labelCollector?this.chart.labelCollectors.indexOf(this.labelCollector):-1;ft>=0&&this.chart.labelCollectors.splice(ft,1)}}function Ct(ft){let Qt,Ot=this.chart,an=Ot.angular,Qn=Ot.polar,Rn=this.isXAxis,Pn=this.coll,$i=ft.userOptions.pane||0,Mr=this.pane=Ot.pane&&Ot.pane[$i];if(Pn==="colorAxis"){this.isRadial=!1;return}an?(an&&Rn?(this.isHidden=!0,this.createLabelCollector=B,this.getOffset=Zu,this.redraw=vi,this.render=vi,this.setScale=Zu,this.setCategories=Zu,this.setTitle=Zu):be(this),Qt=!Rn):Qn&&(be(this),Qt=this.horiz),an||Qn?(this.isRadial=!0,this.labelCollector||(this.labelCollector=this.createLabelCollector()),this.labelCollector&&Ot.labelCollectors.push(this.labelCollector)):this.isRadial=!1,Mr&&Qt&&(Mr.axis=this),this.isCircular=Qt}function et(){this.isRadial&&this.beforeSetTickPositions()}function Et(ft){let Qt=this.label;if(!Qt)return;let Ot=this.axis,an=Qt.getBBox(),Qn=Ot.options.labels,Rn=(Ot.translate(this.pos)+Ot.startAngleRad+Math.PI/2)/Math.PI*180%360,Pn=Math.round(Rn),$i=ha(Qn.y)?0:-(.3*an.height),Mr=Qn.y,_r,vo=20,os=Qn.align,gs="end",Zi=Pn<0?Pn+360:Pn,Vi=Zi,Kr=0,Bo=0;Ot.isRadial&&(_r=Ot.getPosition(this.pos,Ot.center[2]/2+mo(Rs(Qn.distance,-25),Ot.center[2]/2,-Ot.center[2]/2)),Qn.rotation==="auto"?Qt.attr({rotation:Rn}):ha(Mr)||(Mr=Ot.chart.renderer.fontMetrics(Qt).b-an.height/2),ha(os)||(Ot.isCircular?(an.width>Ot.len*Ot.tickInterval/(Ot.max-Ot.min)&&(vo=0),os=Rn>vo&&Rn<180-vo?"left":Rn>180+vo&&Rn<360-vo?"right":"center"):os="center",Qt.attr({align:os})),os==="auto"&&Ot.tickPositions.length===2&&Ot.isCircular&&(Zi>90&&Zi<180?Zi=180-Zi:Zi>270&&Zi<=360&&(Zi=540-Zi),Vi>180&&Vi<=360&&(Vi=360-Vi),(Ot.pane.options.startAngle===Pn||Ot.pane.options.startAngle===Pn+360||Ot.pane.options.startAngle===Pn-360)&&(gs="start"),os=Pn>=-90&&Pn<=90||Pn>=-360&&Pn<=-270||Pn>=270&&Pn<=360?gs==="start"?"right":"left":gs==="start"?"left":"right",Vi>70&&Vi<110&&(os="center"),Zi<15||Zi>=180&&Zi<195?Kr=.3*an.height:Zi>=15&&Zi<=35?Kr=gs==="start"?0:.75*an.height:Zi>=195&&Zi<=215?Kr=gs==="start"?.75*an.height:0:Zi>35&&Zi<=90?Kr=gs==="start"?-(.25*an.height):an.height:Zi>215&&Zi<=270&&(Kr=gs==="start"?an.height:-(.25*an.height)),Vi<15?Bo=gs==="start"?-(.15*an.height):.15*an.height:Vi>165&&Vi<=180&&(Bo=gs==="start"?.15*an.height:-(.15*an.height)),Qt.attr({align:os}),Qt.translate(Bo,Kr+$i)),ft.pos.x=_r.x+(Qn.x||0),ft.pos.y=_r.y+(Mr||0))}function Ze(ft){this.axis.getPosition&&tu(ft.pos,this.axis.getPosition(this.pos))}function Wn({options:ft}){ft.xAxis&&Ua(!0,W.radialDefaultOptions.circular,ft.xAxis),ft.yAxis&&Ua(!0,W.radialDefaultOptions.radialGauge,ft.yAxis)}function tn(ft,Qt){let Ot=this.chart,an=this.center;return ft=this.startAngleRad+ft,{x:Ot.plotLeft+an[0]+Math.cos(ft)*Qt,y:Ot.plotTop+an[1]+Math.sin(ft)*Qt}}function vi(){this.isDirty=!1}function ti(){let ft,Qt;this.constructor.prototype.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),ft=this.center=this.pane.center.slice(),this.isCircular?this.sector=this.endAngleRad-this.startAngleRad:(Qt=this.postTranslate(this.angleRad,ft[3]/2),ft[0]=Qt.x-this.chart.plotLeft,ft[1]=Qt.y-this.chart.plotTop),this.len=this.width=this.height=(ft[2]-ft[3])*Rs(this.sector,1)/2)}function bn(){this.constructor.prototype.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=(this.center[2]-this.center[3])/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)}function _i(ft){let{coll:Qt}=this,{angular:Ot,inverted:an,polar:Qn}=this.chart,Rn={};Ot?this.isXAxis||(Rn=Ua(eu.yAxis,W.radialDefaultOptions.radialGauge)):Qn&&(Rn=this.horiz?Ua(eu.xAxis,W.radialDefaultOptions.circular):Ua(Qt==="xAxis"?eu.xAxis:eu.yAxis,W.radialDefaultOptions.radial)),an&&Qt==="yAxis"&&(Rn.stackLabels=Qu(eu.yAxis,!0)?eu.yAxis.stackLabels:{},Rn.reversedStacks=!0);let Pn=this.options=Ua(Rn,ft);Pn.plotBands||(Pn.plotBands=[]),N0(this,"afterSetOptions")}function fr(ft,Qt,Ot,an,Qn,Rn,Pn){let $i,Mr,_r=this.axis;return _r.isRadial?["M",Qt,Ot,"L",($i=_r.getPosition(this.pos,_r.center[2]/2+an)).x,$i.y]:ft.call(this,Qt,Ot,an,Qn,Rn,Pn)}W.radialDefaultOptions=Ua(bl),W.compose=function(ft,Qt){return Am(Tm,"Axis.Radial")&&(rs(ft,"afterInit",We),rs(ft,"autoLabelAlign",He),rs(ft,"destroy",lt),rs(ft,"init",Ct),rs(ft,"initialAxisTranslation",et),rs(Qt,"afterGetLabelPosition",Et),rs(Qt,"afterGetPosition",Ze),rs(j(),"setOptions",Wn),Ju(Qt.prototype,"getMarkPath",fr)),ft}})(v||(v={}));let Im=v,{animObject:Ha}=j(),{composed:Oo}=j(),{addEvent:Ps,defined:ja,find:ld,isNumber:go,merge:xl,pick:uc,pushUnique:Rm,relativeLength:Pm,splat:If,uniqueKey:cd,wrap:Cr}=j();function tr(){(this.pane||[]).forEach(W=>{W.render()})}function km(W){let E=W.args[0].xAxis,k=W.args[0].yAxis,B=W.args[0].chart;E&&k&&(k.gridLineInterpolation==="polygon"?(E.startOnTick=!0,E.endOnTick=!0):E.gridLineInterpolation==="polygon"&&B.inverted&&(k.startOnTick=!0,k.endOnTick=!0))}function Lm(){this.pane||(this.pane=[]),this.options.pane=If(this.options.pane||{}),If(this.userOptions.pane||{}).forEach(W=>{new Cn(W,this)},this)}function ud(W){let E=W.args.marker,k=this.chart.xAxis[0],B=this.chart.yAxis[0],Y=this.chart.inverted,ne=Y?B:k,Q=Y?k:B;if(this.chart.polar){W.preventDefault();let ce=(E.attr?E.attr("start"):E.start)-ne.startAngleRad,ve=E.attr?E.attr("r"):E.r,Se=(E.attr?E.attr("end"):E.end)-ne.startAngleRad,Ee=E.attr?E.attr("innerR"):E.innerR;W.result.x=ce+ne.pos,W.result.width=Se-ce,W.result.y=Q.len+Q.pos-ve,W.result.height=ve-Ee}}function eh(W){let E=this.chart;if(E.polar&&E.hoverPane&&E.hoverPane.axis){W.preventDefault();let k=E.hoverPane.center,B=E.mouseDownX||0,Y=E.mouseDownY||0,ne=W.args.chartY,Q=W.args.chartX,ce=2*Math.PI,ve=E.hoverPane.axis.startAngleRad,Se=E.hoverPane.axis.endAngleRad,Ee=E.inverted?E.xAxis[0]:E.yAxis[0],be={},We="arc";if(be.x=k[0]+E.plotLeft,be.y=k[1]+E.plotTop,this.zoomHor){let He=ve>0?Se-ve:Math.abs(ve)+Math.abs(Se),lt=Math.atan2(Y-E.plotTop-k[1],B-E.plotLeft-k[0])-ve,Ct=Math.atan2(ne-E.plotTop-k[1],Q-E.plotLeft-k[0])-ve;be.r=k[2]/2,be.innerR=k[3]/2,lt<=0&&(lt+=ce),Ct<=0&&(Ct+=ce),Ct<lt&&(Ct=[lt,lt=Ct][0]),He<ce&&ve+Ct>Se+(ce-He)/2&&(Ct=lt,lt=ve<=0?ve:0);let et=be.start=Math.max(lt+ve,ve),Et=be.end=Math.min(Ct+ve,Se);if(Ee.options.gridLineInterpolation==="polygon"){let Ze=E.hoverPane.axis,Wn=et-Ze.startAngleRad+Ze.pos,tn=Ee.getPlotLinePath({value:Ee.max}),vi=Ze.toValue(Wn),ti=Ze.toValue(Wn+(Et-et));if(vi<Ze.getExtremes().min){let{min:bn,max:_i}=Ze.getExtremes();vi=_i-(bn-vi)}if(ti<Ze.getExtremes().min){let{min:bn,max:_i}=Ze.getExtremes();ti=_i-(bn-ti)}ti<vi&&(ti=[vi,vi=ti][0]),(tn=w(tn,vi,ti,Ze)).push(["L",k[0]+E.plotLeft,E.plotTop+k[1]]),be.d=tn,We="path"}}if(this.zoomVert){let He=E.inverted?E.xAxis[0]:E.yAxis[0],lt=Math.sqrt(Math.pow(B-E.plotLeft-k[0],2)+Math.pow(Y-E.plotTop-k[1],2)),Ct=Math.sqrt(Math.pow(Q-E.plotLeft-k[0],2)+Math.pow(ne-E.plotTop-k[1],2));if(Ct<lt&&(lt=[Ct,Ct=lt][0]),Ct>k[2]/2&&(Ct=k[2]/2),lt<k[3]/2&&(lt=k[3]/2),this.zoomHor||(be.start=ve,be.end=Se),be.r=Ct,be.innerR=lt,He.options.gridLineInterpolation==="polygon"){let et=He.toValue(He.len+He.pos-lt),Et=He.toValue(He.len+He.pos-Ct);be.d=He.getPlotLinePath({value:Et}).concat(He.getPlotLinePath({value:et,reverse:!0})),We="path"}}if(this.zoomHor&&this.zoomVert&&Ee.options.gridLineInterpolation==="polygon"){let He=E.hoverPane.axis,lt=be.start||0,Ct=be.end||0,et=lt-He.startAngleRad+He.pos,Et=He.toValue(et),Ze=He.toValue(et+(Ct-lt));if(be.d instanceof Array){let Wn=be.d.slice(0,be.d.length/2),tn=be.d.slice(be.d.length/2,be.d.length);tn=[...tn].reverse();let vi=E.hoverPane.axis;Wn=w(Wn,Et,Ze,vi),(tn=w(tn,Et,Ze,vi))&&(tn[0][0]="L"),tn=[...tn].reverse(),be.d=Wn.concat(tn),We="path"}}W.attrs=be,W.shapeType=We}}function dr(){let W=this.chart;W.polar&&(this.polar=new li(this),W.inverted&&(this.isRadialSeries=!0,this.is("column")&&(this.isRadialBar=!0)))}function c(){if(this.chart.polar&&this.xAxis){let{xAxis:W,yAxis:E}=this,k=this.chart;this.kdByAngle=k.tooltip&&k.tooltip.shared,this.kdByAngle||k.inverted?this.searchPoint=p:this.options.findNearestPointBy="xy";let B=this.points,Y=B.length;for(;Y--;)this.is("column")||this.is("columnrange")||this.polar.toXY(B[Y]),k.hasParallelCoordinates||this.yAxis.reversed||(uc(B[Y].y,Number.MIN_VALUE)<E.min||B[Y].x<W.min||B[Y].x>W.max?(B[Y].isNull=!0,B[Y].plotY=NaN):B[Y].isNull=B[Y].isValid&&!B[Y].isValid());this.hasClipCircleSetter||(this.hasClipCircleSetter=!!this.eventsToUnbind.push(Ps(this,"afterRender",function(){let ne;k.polar&&this.options.clip!==!1&&(ne=this.yAxis.pane.center,this.clipCircle?this.clipCircle.animate({x:ne[0],y:ne[1],r:ne[2]/2,innerR:ne[3]/2}):this.clipCircle=function(Q,ce,ve,Se,Ee){let be=cd(),We=Q.createElement("clipPath").attr({id:be}).add(Q.defs),He=Ee?Q.arc(ce,ve,Se,Ee,0,2*Math.PI).add(We):Q.circle(ce,ve,Se).add(We);return He.id=be,He.clipPath=We,He}(k.renderer,ne[0],ne[1],ne[2]/2,ne[3]/2),this.group.clip(this.clipCircle),this.setClip=j().noop)})))}}function p(W){let E=this.chart,k=this.xAxis,B=this.yAxis,Y=k.pane&&k.pane.center,ne=W.chartX-(Y&&Y[0]||0)-E.plotLeft,Q=W.chartY-(Y&&Y[1]||0)-E.plotTop,ce=E.inverted?{clientX:W.chartX-B.pos,plotY:W.chartY-k.pos}:{clientX:180+-180/Math.PI*Math.atan2(ne,Q)};return this.searchKDTree(ce)}function w(W,E,k,B){let Y=B.tickInterval,ne=B.tickPositions,Q=ld(ne,ve=>ve>=k),ce=ld([...ne].reverse(),ve=>ve<=E);return ja(Q)||(Q=ne[ne.length-1]),ja(ce)||(ce=ne[0],Q+=Y,W[0][0]="L",W.unshift(W[W.length-3])),(W=W.slice(ne.indexOf(ce),ne.indexOf(Q)+1))[0][0]="M",W}function R(W,E){return ld(this.pane||[],k=>k.options.id===E)||W.call(this,E)}function U(W,E,k,B,Y,ne){let Q,ce,ve,Se=this.chart,Ee=uc(B.inside,!!this.options.stacking);if(Se.polar){if(Q=E.rectPlotX/Math.PI*180,Se.inverted)this.forceDL=Se.isInsidePlot(E.plotX,E.plotY),Ee&&E.shapeArgs?(ce=E.shapeArgs,Y=xl(Y,{x:(ve=this.yAxis.postTranslate(((ce.start||0)+(ce.end||0))/2-this.xAxis.startAngleRad,E.barX+E.pointWidth/2)).x-Se.plotLeft,y:ve.y-Se.plotTop})):E.tooltipPos&&(Y=xl(Y,{x:E.tooltipPos[0],y:E.tooltipPos[1]})),B.align=uc(B.align,"center"),B.verticalAlign=uc(B.verticalAlign,"middle");else{var be;(be=B).align===null&&(be.align=Q>20&&Q<160?"left":Q>200&&Q<340?"right":"center"),be.verticalAlign===null&&(be.verticalAlign=Q<45||Q>315?"bottom":Q>135&&Q<225?"top":"middle"),B=be}K().prototype.alignDataLabel.call(this,E,k,B,Y,ne),this.isRadialBar&&E.shapeArgs&&E.shapeArgs.start===E.shapeArgs.end?k.hide():k.show()}else W.call(this,E,k,B,Y,ne)}function ee(){let W=this.options,E=W.stacking,k=this.chart,B=this.xAxis,Y=this.yAxis,ne=Y.reversed,Q=Y.center,ce=B.startAngleRad,ve=B.endAngleRad-ce,Se=W.threshold,Ee=0,be,We,He,lt,Ct,et=0,Et=0,Ze,Wn,tn,vi,ti,bn,_i,fr;if(B.isRadial)for(He=(be=this.points).length,lt=Y.translate(Y.min),Ct=Y.translate(Y.max),Se=W.threshold||0,k.inverted&&go(Se)&&ja(Ee=Y.translate(Se))&&(Ee<0?Ee=0:Ee>ve&&(Ee=ve),this.translatedThreshold=Ee+ce);He--;){if(bn=(We=be[He]).barX,Wn=We.x,tn=We.y,We.shapeType="arc",k.inverted){We.plotY=Y.translate(tn),E&&Y.stacking?(ti=Y.stacking.stacks[(tn<0?"-":"")+this.stackKey],this.visible&&ti&&ti[Wn]&&!We.isNull&&(vi=ti[Wn].points[this.getStackIndicator(void 0,Wn,this.index).key],et=Y.translate(vi[0]),Et=Y.translate(vi[1]),ja(et)&&(et=j().clamp(et,0,ve)))):(et=Ee,Et=We.plotY),et>Et&&(Et=[et,et=Et][0]),ne?Et>lt?Et=lt:et<Ct?et=Ct:(et>lt||Et<Ct)&&(et=Et=ve):et<lt?et=lt:Et>Ct?Et=Ct:(Et<lt||et>Ct)&&(et=Et=0),Y.min>Y.max&&(et=Et=ne?ve:0),et+=ce,Et+=ce,Q&&(We.barX=bn+=Q[3]/2),_i=Math.max(bn,0),fr=Math.max(bn+We.pointWidth,0);let ft=W.borderRadius,Qt=Pm((typeof ft=="object"?ft.radius:ft)||0,fr-_i);We.shapeArgs={x:Q[0],y:Q[1],r:fr,innerR:_i,start:et,end:Et,borderRadius:Qt},We.opacity=et===Et?0:void 0,We.plotY=(ja(this.translatedThreshold)&&(et<this.translatedThreshold?et:Et))-ce}else et=bn+ce,We.shapeArgs=this.polar.arc(We.yBottom,We.plotY,et,et+We.pointWidth),We.shapeArgs.borderRadius=0;this.polar.toXY(We),k.inverted?(Ze=Y.postTranslate(We.rectPlotY,bn+We.pointWidth/2),We.tooltipPos=[Ze.x-k.plotLeft,Ze.y-k.plotTop]):We.tooltipPos=[We.plotX,We.plotY],Q&&(We.ttBelow=We.plotY>Q[1])}}function _e(W,E){let k,B,Y=this;if(this.chart.polar){E=E||this.points;for(let Q=0;Q<E.length;Q++)if(!E[Q].isNull){k=Q;break}this.options.connectEnds!==!1&&k!==void 0&&(this.connectEnds=!0,E.splice(E.length,0,E[k]),B=!0),E.forEach(Q=>{Q.polarPlotY===void 0&&Y.polar.toXY(Q)})}let ne=W.apply(this,[].slice.call(arguments,1));return B&&E.pop(),ne}function Ve(W,E){let k=this.chart,B={xAxis:[],yAxis:[]};return k.polar?k.axes.forEach(Y=>{if(Y.coll==="colorAxis")return;let ne=Y.isXAxis,Q=Y.center,ce=E.chartX-Q[0]-k.plotLeft,ve=E.chartY-Q[1]-k.plotTop;B[ne?"xAxis":"yAxis"].push({axis:Y,value:Y.translate(ne?Math.PI-Math.atan2(ce,ve):Math.sqrt(Math.pow(ce,2)+Math.pow(ve,2)),!0)})}):B=W.call(this,E),B}function Oe(W,E){this.chart.polar||W.call(this,E)}function dt(W,E){let k=this,B=this.chart,Y=this.group,ne=this.markerGroup,Q=this.xAxis&&this.xAxis.center,ce=B.plotLeft,ve=B.plotTop,Se=this.options.animation,Ee,be,We,He,lt,Ct;B.polar?k.isRadialBar?E||(k.startAngleRad=uc(k.translatedThreshold,k.xAxis.startAngleRad),j().seriesTypes.pie.prototype.animate.call(k,E)):(Se=Ha(Se),k.is("column")?E||(be=Q[3]/2,k.points.forEach(et=>{We=et.graphic,lt=(He=et.shapeArgs)&&He.r,Ct=He&&He.innerR,We&&He&&(We.attr({r:be,innerR:be}),We.animate({r:lt,innerR:Ct},k.options.animation))})):E?(Ee={translateX:Q[0]+ce,translateY:Q[1]+ve,scaleX:.001,scaleY:.001},Y.attr(Ee),ne&&ne.attr(Ee)):(Ee={translateX:ce,translateY:ve,scaleX:1,scaleY:1},Y.animate(Ee,Se),ne&&ne.animate(Ee,Se))):W.call(this,E)}function Zt(W,E,k,B){let Y,ne;if(this.chart.polar)if(B){let Q=(ne=function ve(Se,Ee,be,We){let He,lt,Ct,et,Et,Ze,Wn=+!!We,tn=(He=Ee>=0&&Ee<=Se.length-1?Ee:Ee<0?Se.length-1+Ee:0)-1<0?Se.length-(1+Wn):He-1,vi=He+1>Se.length-1?Wn:He+1,ti=Se[tn],bn=Se[vi],_i=ti.plotX,fr=ti.plotY,ft=bn.plotX,Qt=bn.plotY,Ot=Se[He].plotX,an=Se[He].plotY;lt=(1.5*Ot+_i)/2.5,Ct=(1.5*an+fr)/2.5,et=(1.5*Ot+ft)/2.5,Et=(1.5*an+Qt)/2.5;let Qn=Math.sqrt(Math.pow(lt-Ot,2)+Math.pow(Ct-an,2)),Rn=Math.sqrt(Math.pow(et-Ot,2)+Math.pow(Et-an,2)),Pn=Math.atan2(Ct-an,lt-Ot);Ze=Math.PI/2+(Pn+Math.atan2(Et-an,et-Ot))/2,Math.abs(Pn-Ze)>Math.PI/2&&(Ze-=Math.PI),lt=Ot+Math.cos(Ze)*Qn,Ct=an+Math.sin(Ze)*Qn;let $i={rightContX:et=Ot+Math.cos(Math.PI+Ze)*Rn,rightContY:Et=an+Math.sin(Math.PI+Ze)*Rn,leftContX:lt,leftContY:Ct,plotX:Ot,plotY:an};return be&&($i.prevPointCont=ve(Se,tn,!1,We)),$i}(E,B,!0,this.connectEnds)).prevPointCont&&ne.prevPointCont.rightContX,ce=ne.prevPointCont&&ne.prevPointCont.rightContY;Y=["C",go(Q)?Q:ne.plotX,go(ce)?ce:ne.plotY,go(ne.leftContX)?ne.leftContX:ne.plotX,go(ne.leftContY)?ne.leftContY:ne.plotY,ne.plotX,ne.plotY]}else Y=["M",k.plotX,k.plotY];else Y=W.call(this,E,k,B);return Y}function Ln(W,E,k=this.plotY){if(!this.destroyed){let{plotX:B,series:Y}=this,{chart:ne}=Y;return ne.polar&&go(B)&&go(k)?[B+(E?ne.plotLeft:0),k+(E?ne.plotTop:0)]:W.call(this,E,k)}}class li{static compose(E,k,B,Y,ne,Q,ce,ve,Se,Ee){if(Cn.compose(k,B),Im.compose(E,ne),Rm(Oo,"Polar")){let be=k.prototype,We=Q.prototype,He=B.prototype,lt=Y.prototype;if(Ps(k,"afterDrawChartBox",tr),Ps(k,"createAxes",Lm),Ps(k,"init",km),Cr(be,"get",R),Cr(He,"getCoordinates",Ve),Cr(He,"pinch",Oe),Ps(B,"getSelectionMarkerAttrs",eh),Ps(B,"getSelectionBox",ud),Ps(Y,"afterInit",dr),Ps(Y,"afterTranslate",c,{order:2}),Ps(Y,"afterColumnTranslate",ee,{order:4}),Cr(lt,"animate",dt),Cr(We,"pos",Ln),ve){let Ct=ve.prototype;Cr(Ct,"alignDataLabel",U),Cr(Ct,"animate",dt)}if(Se&&Cr(Se.prototype,"getGraphPath",_e),Ee){let Ct=Ee.prototype;Cr(Ct,"getPointSpline",Zt),ce&&(ce.prototype.getPointSpline=Ct.getPointSpline)}}}constructor(E){this.series=E}arc(E,k,B,Y){let ne=this.series,Q=ne.xAxis.center,ce=ne.yAxis.len,ve=Q[3]/2,Se=ce-k+ve,Ee=ce-uc(E,ce)+ve;return ne.yAxis.reversed&&(Se<0&&(Se=ve),Ee<0&&(Ee=ve)),{x:Q[0],y:Q[1],r:Se,innerR:Ee,start:B,end:Y}}toXY(E){let k=this.series,B=k.chart,Y=k.xAxis,ne=k.yAxis,Q=E.plotX,ce=B.inverted,ve=E.y,Se=E.plotY,Ee=ce?Q:ne.len-Se,be;if(ce&&k&&!k.isRadialBar&&(E.plotY=Se=go(ve)?ne.translate(ve):0),E.rectPlotX=Q,E.rectPlotY=Se,ne.center&&(Ee+=ne.center[3]/2),go(Se)){let We=ce?ne.postTranslate(Se,Ee):Y.postTranslate(Q,Ee);E.plotX=E.polarPlotX=We.x-B.plotLeft,E.plotY=E.polarPlotY=We.y-B.plotTop}k.kdByAngle?((be=(Q/Math.PI*180+Y.pane.options.startAngle)%360)<0&&(be+=360),E.clientX=be):E.clientX=E.plotX}}var ps=O(184),Dr=O.n(ps);let{composed:yo}=j(),{addEvent:ss,objectEach:hc,pushUnique:hd}=j();(function(W){function E(){let Q=this.waterfall?.stacks;Q&&(Q.changed=!1,delete Q.alreadyChanged)}function k(){this.options.stackLabels?.enabled&&this.waterfall?.stacks&&this.waterfall.renderStackTotals()}function B(){this.waterfall||(this.waterfall=new ne(this))}function Y(){let Q=this.axes;for(let ce of this.series)if(ce.options.stacking){for(let ve of Q)!ve.isXAxis&&ve.waterfall&&(ve.waterfall.stacks.changed=!0);break}}W.compose=function(Q,ce){hd(yo,"Axis.Waterfall")&&(ss(Q,"init",B),ss(Q,"afterBuildStacks",E),ss(Q,"afterRender",k),ss(ce,"beforeRedraw",Y))};class ne{constructor(ce){this.axis=ce,this.stacks={changed:!1}}renderStackTotals(){let ce=this.axis,ve=ce.waterfall?.stacks,Se=ce.stacking?.stackTotalGroup,Ee=new(Dr())(ce,ce.options.stackLabels||{},!1,0,void 0);this.dummyStackItem=Ee,Se&&hc(ve,be=>{hc(be,(We,He)=>{Ee.total=We.stackTotal,Ee.x=+He,We.label&&(Ee.label=We.label),Dr().prototype.render.call(Ee,Se),We.label=Ee.label,delete Ee.label})}),Ee.total=null}}W.Composition=ne})(x||(x={}));let O0=x,{isNumber:Nm}=j();class Om extends mt().prototype.pointClass{getClassName(){let E=La().prototype.getClassName.call(this);return this.isSum?E+=" highcharts-sum":this.isIntermediateSum&&(E+=" highcharts-intermediate-sum"),E}isValid(){return Nm(this.y)||this.isSum||!!this.isIntermediateSum}}let{column:dd,line:Fm}=$().seriesTypes,{addEvent:Lr,arrayMax:th,arrayMin:Rf,correctFloat:Pf,crisp:fd,extend:nh,isNumber:wl,merge:Fo,objectEach:Gb,pick:jE}=j();function Bm(W,E){return Object.hasOwnProperty.call(W,E)}class ih extends dd{generatePoints(){dd.prototype.generatePoints.apply(this);let E=this.getColumn("y",!0);for(let k=0,B=this.points.length;k<B;k++){let Y=this.points[k],ne=E[k];wl(ne)&&(Y.isIntermediateSum||Y.isSum)&&(Y.y=Pf(ne))}}processData(E){let k,B,Y,ne,Q,ce,ve=this.options,Se=this.getColumn("y"),Ee=ve.data,be=Se.length,We=ve.threshold||0;Y=B=ne=Q=0;for(let He=0;He<be;He++)ce=Se[He],k=Ee?.[He]||{},ce==="sum"||k.isSum?Se[He]=Pf(Y):ce==="intermediateSum"||k.isIntermediateSum?(Se[He]=Pf(B),B=0):(Y+=ce,B+=ce),ne=Math.min(Y,ne),Q=Math.max(Y,Q);super.processData.call(this,E),ve.stacking||(this.dataMin=ne+We,this.dataMax=Q)}toYData(E){return E.isSum?"sum":E.isIntermediateSum?"intermediateSum":E.y}pointAttribs(E,k){let B=this.options.upColor;B&&!E.options.color&&wl(E.y)&&(E.color=E.y>0?B:void 0);let Y=dd.prototype.pointAttribs.call(this,E,k);return delete Y.dashstyle,Y}getGraphPath(){return[["M",0,0]]}getCrispPath(){let E=this.data.filter(Se=>wl(Se.y)),k=this.yAxis,B=E.length,Y=this.graph?.strokeWidth()||0,ne=this.xAxis.reversed,Q=this.yAxis.reversed,ce=this.options.stacking,ve=[];for(let Se=1;Se<B;Se++){if(!(this.options.connectNulls||wl(this.data[E[Se].index-1].y)))continue;let Ee=E[Se].box,be=E[Se-1],We=be.y||0,He=E[Se-1].box;if(!Ee||!He)continue;let lt=k.waterfall?.stacks[this.stackKey],Ct=We>0?-He.height:0;if(lt&&He&&Ee){let et,Et=lt[Se-1];if(ce){let Ze=Et.connectorThreshold;et=fd(k.translate(Ze,!1,!0,!1,!0)+(Q?Ct:0),Y)}else et=fd(He.y+(be.minPointLengthOffset||0),Y);ve.push(["M",(He.x||0)+(ne?0:He.width||0),et],["L",(Ee.x||0)+(ne&&Ee.width||0),et])}if(He&&ve.length&&(!ce&&We<0&&!Q||We>0&&Q)){let et=ve[ve.length-2];et&&typeof et[2]=="number"&&(et[2]+=He.height||0);let Et=ve[ve.length-1];Et&&typeof Et[2]=="number"&&(Et[2]+=He.height||0)}}return ve}drawGraph(){Fm.prototype.drawGraph.call(this),this.graph&&this.graph.attr({d:this.getCrispPath()})}setStackedPoints(E){let k=this.options,B=E.waterfall?.stacks,Y=k.threshold||0,ne=this.stackKey,Q=this.getColumn("x"),ce=this.getColumn("y"),ve=Q.length,Se=Y,Ee=Se,be,We=0,He=0,lt=0,Ct,et,Et,Ze,Wn,tn,vi,ti,bn=(_i,fr,ft,Qt)=>{if(be){if(Ct)for(;ft<Ct;ft++)be.stackState[ft]+=Qt;else be.stackState[0]=_i,Ct=be.stackState.length;be.stackState.push(be.stackState[Ct-1]+fr)}};if(E.stacking&&B&&this.reserveSpace()){ti=B.changed,(vi=B.alreadyChanged)&&0>vi.indexOf(ne)&&(ti=!0),B[ne]||(B[ne]={});let _i=B[ne];if(_i)for(let fr=0;fr<ve;fr++)(!_i[tn=Q[fr]]||ti)&&(_i[tn]={negTotal:0,posTotal:0,stackTotal:0,threshold:0,stateIndex:0,stackState:[],label:ti&&_i[tn]?_i[tn].label:void 0}),be=_i[tn],(Wn=ce[fr])>=0?be.posTotal+=Wn:be.negTotal+=Wn,Ze=k.data[fr],et=be.absolutePos=be.posTotal,Et=be.absoluteNeg=be.negTotal,be.stackTotal=et+Et,Ct=be.stackState.length,Ze?.isIntermediateSum?(bn(lt,He,0,lt),lt=He,He=Y,Se^=Ee,Ee^=Se,Se^=Ee):Ze?.isSum?(bn(Y,We,Ct,0),Se=Y):(bn(Se,Wn,0,We),Ze&&(We+=Wn,He+=Wn)),be.stateIndex++,be.threshold=Se,Se+=be.stackTotal;B.changed=!1,B.alreadyChanged||(B.alreadyChanged=[]),B.alreadyChanged.push(ne)}}getExtremes(){let E,k,B=this.options.stacking,Y=this.yAxis,ne=Y.waterfall?.stacks;return B&&ne?(E=this.stackedYNeg=[],k=this.stackedYPos=[],B==="overlap"?Gb(ne[this.stackKey],function(Q){E.push(Rf(Q.stackState)),k.push(th(Q.stackState))}):Gb(ne[this.stackKey],function(Q){E.push(Q.negTotal+Q.threshold),k.push(Q.posTotal+Q.threshold)}),{dataMin:Rf(E),dataMax:th(k)}):{dataMin:this.dataMin,dataMax:this.dataMax}}}ih.defaultOptions=Fo(dd.defaultOptions,{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}}),ih.compose=O0.compose,nh(ih.prototype,{pointValKey:"y",showLine:!0,pointClass:Om}),Lr(ih,"afterColumnTranslate",function(){let{options:W,points:E,yAxis:k}=this,B=jE(W.minPointLength,5),Y=B/2,ne=W.threshold||0,Q=W.stacking,ce=k.waterfall?.stacks[this.stackKey],ve=this.getColumn("y",!0),Se=ne,Ee=ne,be,We,He,lt;for(let Ct=0;Ct<E.length;Ct++){let et=E[Ct],Et=ve[Ct],Ze=nh({x:0,y:0,width:0,height:0},et.shapeArgs||{});et.box=Ze;let Wn=[0,Et],tn=et.y||0;if(Q){if(ce){let bn=ce[Ct];Q==="overlap"?(We=bn.stackState[bn.stateIndex--],be=tn>=0?We:We-tn,Bm(bn,"absolutePos")&&delete bn.absolutePos,Bm(bn,"absoluteNeg")&&delete bn.absoluteNeg):(tn>=0?(We=bn.threshold+bn.posTotal,bn.posTotal-=tn,be=We):(We=bn.threshold+bn.negTotal,bn.negTotal-=tn,be=We-tn),!bn.posTotal&&wl(bn.absolutePos)&&Bm(bn,"absolutePos")&&(bn.posTotal=bn.absolutePos,delete bn.absolutePos),!bn.negTotal&&wl(bn.absoluteNeg)&&Bm(bn,"absoluteNeg")&&(bn.negTotal=bn.absoluteNeg,delete bn.absoluteNeg)),et.isSum||(bn.connectorThreshold=bn.threshold+bn.stackTotal),k.reversed?(He=tn>=0?be-tn:be+tn,lt=be):(He=be,lt=be-tn),et.below=He<=ne,Ze.y=k.translate(He,!1,!0,!1,!0),Ze.height=Math.abs(Ze.y-k.translate(lt,!1,!0,!1,!0));let _i=k.waterfall?.dummyStackItem;_i&&(_i.x=Ct,_i.label=ce[Ct].label,_i.setOffset(this.pointXOffset||0,this.barW||0,this.stackedYNeg[Ct],this.stackedYPos[Ct],void 0,this.xAxis))}}else be=Math.max(Ee,Ee+tn)+Wn[0],Ze.y=k.translate(be,!1,!0,!1,!0),et.isSum?(Ze.y=k.translate(Wn[1],!1,!0,!1,!0),Ze.height=Math.min(k.translate(Wn[0],!1,!0,!1,!0),k.len)-Ze.y,et.below=Wn[1]<=ne):et.isIntermediateSum?(tn>=0?(He=Wn[1]+Se,lt=Se):(He=Se,lt=Wn[1]+Se),k.reversed&&(He^=lt,lt^=He,He^=lt),Ze.y=k.translate(He,!1,!0,!1,!0),Ze.height=Math.abs(Ze.y-Math.min(k.translate(lt,!1,!0,!1,!0),k.len)),Se+=Wn[1],et.below=He<=ne):(Ze.height=Et>0?k.translate(Ee,!1,!0,!1,!0)-Ze.y:k.translate(Ee,!1,!0,!1,!0)-k.translate(Ee-Et,!1,!0,!1,!0),et.below=(Ee+=Et)<ne),Ze.height<0&&(Ze.y+=Ze.height,Ze.height*=-1);et.plotY=Ze.y,et.yBottom=Ze.y+Ze.height,Ze.height<=B&&!et.isNull?(Ze.height=B,Ze.y-=Y,et.yBottom=Ze.y+Ze.height,et.plotY=Ze.y,tn<0?et.minPointLengthOffset=-Y:et.minPointLengthOffset=Y):(et.isNull&&(Ze.width=0),et.minPointLengthOffset=0);let vi=et.plotY+(et.negative?Ze.height:0);et.below&&(et.plotY+=Ze.height),et.tooltipPos&&(this.chart.inverted?et.tooltipPos[0]=k.len-vi:et.tooltipPos[1]=vi),et.isInside=this.isPointInside(et);let ti=fd(et.yBottom,this.borderWidth);Ze.y=fd(Ze.y,this.borderWidth),Ze.height=ti-Ze.y,Fo(!0,et.shapeArgs,Ze)}},{order:2}),$().registerSeriesType("waterfall",ih);let ms=j();ms.RadialAxis=Im,ai.compose(ms.Axis,ms.Chart,ms.Legend),lc.compose(ms.Axis,ms.Chart,ms.Legend),Cn.compose(ms.Chart,ms.Pointer),li.compose(ms.Axis,ms.Chart,ms.Pointer,ms.Series,ms.Tick,ms.Point,$().seriesTypes.areasplinerange,$().seriesTypes.column,$().seriesTypes.line,$().seriesTypes.spline),ih.compose(ms.Axis,ms.Chart);let WE=ms;return N.default})())});function DT(n,t){return Object.is(n,t)}var Ns=null,mx=!1,IT=1,$a=Symbol("SIGNAL");function di(n){let t=Ns;return Ns=n,t}function RT(){return Ns}var Gm={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $m(n){if(mx)throw new Error("");if(Ns===null)return;Ns.consumerOnSignalRead(n);let t=Ns.nextProducerIndex++;if(bx(Ns),t<Ns.producerNode.length&&Ns.producerNode[t]!==n&&Y0(Ns)){let e=Ns.producerNode[t];_x(e,Ns.producerIndexOfThis[t])}Ns.producerNode[t]!==n&&(Ns.producerNode[t]=n,Ns.producerIndexOfThis[t]=Y0(Ns)?aO(n,Ns,t):0),Ns.producerLastReadVersion[t]=n.version}function oO(){IT++}function PT(n){if(!(Y0(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===IT)){if(!n.producerMustRecompute(n)&&!vx(n)){AT(n);return}n.producerRecomputeValue(n),AT(n)}}function kT(n){if(n.liveConsumerNode===void 0)return;let t=mx;mx=!0;try{for(let e of n.liveConsumerNode)e.dirty||w6(e)}finally{mx=t}}function LT(){return Ns?.consumerAllowSignalWrites!==!1}function w6(n){n.dirty=!0,kT(n),n.consumerMarkedDirty?.(n)}function AT(n){n.dirty=!1,n.lastCleanEpoch=IT}function Z0(n){return n&&(n.nextProducerIndex=0),di(n)}function yx(n,t){if(di(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Y0(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)_x(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function vx(n){bx(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(PT(e),i!==e.version))return!0}return!1}function K0(n){if(bx(n),Y0(n))for(let t=0;t<n.producerNode.length;t++)_x(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function aO(n,t,e){if(lO(n),n.liveConsumerNode.length===0&&cO(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=aO(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function _x(n,t){if(lO(n),n.liveConsumerNode.length===1&&cO(n))for(let i=0;i<n.producerNode.length;i++)_x(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];bx(r),r.producerIndexOfThis[i]=t}}function Y0(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function bx(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function lO(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function cO(n){return n.producerNode!==void 0}function NT(n,t){let e=Object.create(S6);e.computation=n,t!==void 0&&(e.equal=t);let i=()=>{if(PT(e),$m(e),e.value===gx)throw e.error;return e.value};return i[$a]=e,i}var ET=Symbol("UNSET"),TT=Symbol("COMPUTING"),gx=Symbol("ERRORED"),S6=Mn(Je({},Gm),{value:ET,dirty:!0,error:null,equal:DT,kind:"computed",producerMustRecompute(n){return n.value===ET||n.value===TT},producerRecomputeValue(n){if(n.value===TT)throw new Error("Detected cycle in computations.");let t=n.value;n.value=TT;let e=Z0(n),i,r=!1;try{i=n.computation(),di(null),r=t!==ET&&t!==gx&&i!==gx&&n.equal(t,i)}catch(s){i=gx,n.error=s}finally{yx(n,e)}if(r){n.value=t;return}n.value=i,n.version++}});function C6(){throw new Error}var uO=C6;function hO(n){uO(n)}function OT(n){uO=n}var M6=null;function FT(n,t){let e=Object.create(xx);e.value=n,t!==void 0&&(e.equal=t);let i=()=>($m(e),e.value);return i[$a]=e,i}function qm(n,t){LT()||hO(n),n.equal(n.value,t)||(n.value=t,E6(n))}function BT(n,t){LT()||hO(n),qm(n,t(n.value))}var xx=Mn(Je({},Gm),{equal:DT,value:void 0,kind:"signal"});function E6(n){n.version++,oO(),kT(n),M6?.()}function VT(n){let t=di(null);try{return n()}finally{di(t)}}var zT;function Q0(){return zT}function oh(n){let t=zT;return zT=n,t}var wx=Symbol("NotFound");function zn(n){return typeof n=="function"}function Xm(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Sx=Xm(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Vf(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Qr=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let s of e)s.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(zn(i))try{i()}catch(s){t=s instanceof Sx?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{dO(s)}catch(o){t=t??[],o instanceof Sx?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Sx(t)}}add(t){var e;if(t&&t!==this)if(this.closed)dO(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Vf(e,t)}remove(t){let{_finalizers:e}=this;e&&Vf(e,t),t instanceof n&&t._removeParent(this)}};Qr.EMPTY=(()=>{let n=new Qr;return n.closed=!0,n})();var UT=Qr.EMPTY;function Cx(n){return n instanceof Qr||n&&"closed"in n&&zn(n.remove)&&zn(n.add)&&zn(n.unsubscribe)}function dO(n){zn(n)?n():n.unsubscribe()}var yc={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ym={setTimeout(n,t,...e){let{delegate:i}=Ym;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=Ym;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Mx(n){Ym.setTimeout(()=>{let{onUnhandledError:t}=yc;if(t)t(n);else throw n})}function zf(){}var fO=HT("C",void 0,void 0);function pO(n){return HT("E",void 0,n)}function mO(n){return HT("N",n,void 0)}function HT(n,t,e){return{kind:n,value:t,error:e}}var Uf=null;function Zm(n){if(yc.useDeprecatedSynchronousErrorHandling){let t=!Uf;if(t&&(Uf={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=Uf;if(Uf=null,e)throw i}}else n()}function gO(n){yc.useDeprecatedSynchronousErrorHandling&&Uf&&(Uf.errorThrown=!0,Uf.error=n)}var Hf=class extends Qr{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Cx(t)&&t.add(this)):this.destination=P6}static create(t,e,i){return new Km(t,e,i)}next(t){this.isStopped?WT(mO(t),this):this._next(t)}error(t){this.isStopped?WT(pO(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?WT(fO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},I6=Function.prototype.bind;function jT(n,t){return I6.call(n,t)}var GT=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){Ex(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){Ex(i)}else Ex(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Ex(e)}}},Km=class extends Hf{constructor(t,e,i){super();let r;if(zn(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&yc.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&jT(t.next,s),error:t.error&&jT(t.error,s),complete:t.complete&&jT(t.complete,s)}):r=t}this.destination=new GT(r)}};function Ex(n){yc.useDeprecatedSynchronousErrorHandling?gO(n):Mx(n)}function R6(n){throw n}function WT(n,t){let{onStoppedNotification:e}=yc;e&&Ym.setTimeout(()=>e(n,t))}var P6={closed:!0,next:zf,error:R6,complete:zf};var Qm=typeof Symbol=="function"&&Symbol.observable||"@@observable";function qa(n){return n}function $T(...n){return qT(n)}function qT(n){return n.length===0?qa:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var Ji=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let s=L6(e)?e:new Km(e,i,r);return Zm(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=yO(i),new i((r,s)=>{let o=new Km({next:a=>{try{e(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Qm](){return this}pipe(...e){return qT(e)(this)}toPromise(e){return e=yO(e),new e((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=t=>new n(t),n})();function yO(n){var t;return(t=n??yc.Promise)!==null&&t!==void 0?t:Promise}function k6(n){return n&&zn(n.next)&&zn(n.error)&&zn(n.complete)}function L6(n){return n&&n instanceof Hf||k6(n)&&Cx(n)}function XT(n){return zn(n?.lift)}function Ui(n){return t=>{if(XT(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pi(n,t,e,i,r){return new YT(n,t,e,i,r)}var YT=class extends Hf{constructor(t,e,i,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(u){t.error(u)}}:super._next,this._error=r?function(a){try{r(a)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Jm(){return Ui((n,t)=>{let e=null;n._refCount++;let i=Pi(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var eg=class extends Ji{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,XT(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Qr;let e=this.getSubject();t.add(this.source.subscribe(Pi(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Qr.EMPTY)}return t}refCount(){return Jm()(this)}};var vO=Xm(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Jr=(()=>{class n extends Ji{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new Tx(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new vO}next(e){Zm(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Zm(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Zm(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:s}=this;return i||r?UT:(this.currentObservers=null,s.push(e),new Qr(()=>{this.currentObservers=null,Vf(s,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:s}=this;i?e.error(r):s&&e.complete()}asObservable(){let e=new Ji;return e.source=this,e}}return n.create=(t,e)=>new Tx(t,e),n})(),Tx=class extends Jr{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:UT}};var _s=class extends Jr{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var ZT={now(){return(ZT.delegate||Date).now()},delegate:void 0};var Ax=class extends Qr{constructor(t,e){super()}schedule(t,e=0){return this}};var J0={setInterval(n,t,...e){let{delegate:i}=J0;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=J0;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var Dx=class extends Ax{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,i=0){return J0.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&J0.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Vf(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var tg=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};tg.now=ZT.now;var Ix=class extends tg{constructor(t,e=tg.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var ev=new Ix(Dx),_O=ev;var pa=new Ji(n=>n.complete());function Rx(n){return n&&zn(n.schedule)}function bO(n){return n[n.length-1]}function Px(n){return zn(bO(n))?n.pop():void 0}function wd(n){return Rx(bO(n))?n.pop():void 0}function wO(n,t,e,i){var r=arguments.length,s=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(t,e,s):o(t,e))||s);return r>3&&s&&Object.defineProperty(t,e,s),s}function SO(n,t,e,i){function r(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(g){try{d(i.next(g))}catch(v){o(v)}}function u(g){try{d(i.throw(g))}catch(v){o(v)}}function d(g){g.done?s(g.value):r(g.value).then(a,u)}d((i=i.apply(n,t||[])).next())})}function xO(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function jf(n){return this instanceof jf?(this.v=n,this):new jf(n)}function CO(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(C){return function(A){return Promise.resolve(A).then(C,v)}}function a(C,A){i[C]&&(r[C]=function(O){return new Promise(function(N,T){s.push([C,O,N,T])>1||u(C,O)})},A&&(r[C]=A(r[C])))}function u(C,A){try{d(i[C](A))}catch(O){x(s[0][3],O)}}function d(C){C.value instanceof jf?Promise.resolve(C.value.v).then(g,v):x(s[0][2],C)}function g(C){u("next",C)}function v(C){u("throw",C)}function x(C,A){C(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function MO(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof xO=="function"?xO(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),r(a,u,o.done,o.value)})}}function r(s,o,a,u){Promise.resolve(u).then(function(d){s({value:d,done:a})},o)}}var ng=n=>n&&typeof n.length=="number"&&typeof n!="function";function kx(n){return zn(n?.then)}function Lx(n){return zn(n[Qm])}function Nx(n){return Symbol.asyncIterator&&zn(n?.[Symbol.asyncIterator])}function Ox(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function N6(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fx=N6();function Bx(n){return zn(n?.[Fx])}function Vx(n){return CO(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield jf(e.read());if(r)return yield jf(void 0);yield yield jf(i)}}finally{e.releaseLock()}})}function zx(n){return zn(n?.getReader)}function Br(n){if(n instanceof Ji)return n;if(n!=null){if(Lx(n))return O6(n);if(ng(n))return F6(n);if(kx(n))return B6(n);if(Nx(n))return EO(n);if(Bx(n))return V6(n);if(zx(n))return z6(n)}throw Ox(n)}function O6(n){return new Ji(t=>{let e=n[Qm]();if(zn(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function F6(n){return new Ji(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function B6(n){return new Ji(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Mx)})}function V6(n){return new Ji(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function EO(n){return new Ji(t=>{U6(n,t).catch(e=>t.error(e))})}function z6(n){return EO(Vx(n))}function U6(n,t){var e,i,r,s;return SO(this,void 0,void 0,function*(){try{for(e=MO(n);i=yield e.next(),!i.done;){let o=i.value;if(t.next(o),t.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})}function ma(n,t,e,i=0,r=!1){let s=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Ux(n,t=0){return Ui((e,i)=>{e.subscribe(Pi(i,r=>ma(i,n,()=>i.next(r),t),()=>ma(i,n,()=>i.complete(),t),r=>ma(i,n,()=>i.error(r),t)))})}function Hx(n,t=0){return Ui((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function TO(n,t){return Br(n).pipe(Hx(t),Ux(t))}function AO(n,t){return Br(n).pipe(Hx(t),Ux(t))}function DO(n,t){return new Ji(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function IO(n,t){return new Ji(e=>{let i;return ma(e,t,()=>{i=n[Fx](),ma(e,t,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){e.error(o);return}s?e.complete():e.next(r)},0,!0)}),()=>zn(i?.return)&&i.return()})}function jx(n,t){if(!n)throw new Error("Iterable cannot be null");return new Ji(e=>{ma(e,t,()=>{let i=n[Symbol.asyncIterator]();ma(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function RO(n,t){return jx(Vx(n),t)}function PO(n,t){if(n!=null){if(Lx(n))return TO(n,t);if(ng(n))return DO(n,t);if(kx(n))return AO(n,t);if(Nx(n))return jx(n,t);if(Bx(n))return IO(n,t);if(zx(n))return RO(n,t)}throw Ox(n)}function Vr(n,t){return t?PO(n,t):Br(n)}function En(...n){let t=wd(n);return Vr(n,t)}function ig(n,t){let e=zn(n)?n:()=>n,i=r=>r.error(e());return new Ji(t?r=>t.schedule(i,0,r):i)}function KT(n){return!!n&&(n instanceof Ji||zn(n.lift)&&zn(n.subscribe))}var ah=Xm(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function kO(n){return n instanceof Date&&!isNaN(n)}function Ei(n,t){return Ui((e,i)=>{let r=0;e.subscribe(Pi(i,s=>{i.next(n.call(t,s,r++))}))})}var{isArray:H6}=Array;function j6(n,t){return H6(t)?n(...t):n(t)}function rg(n){return Ei(t=>j6(n,t))}var{isArray:W6}=Array,{getPrototypeOf:G6,prototype:$6,keys:q6}=Object;function Wx(n){if(n.length===1){let t=n[0];if(W6(t))return{args:t,keys:null};if(X6(t)){let e=q6(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function X6(n){return n&&typeof n=="object"&&G6(n)===$6}function Gx(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function tv(...n){let t=wd(n),e=Px(n),{args:i,keys:r}=Wx(n);if(i.length===0)return Vr([],t);let s=new Ji(Y6(i,t,r?o=>Gx(r,o):qa));return e?s.pipe(rg(e)):s}function Y6(n,t,e=qa){return i=>{LO(t,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let u=0;u<r;u++)LO(t,()=>{let d=Vr(n[u],t),g=!1;d.subscribe(Pi(i,v=>{s[u]=v,g||(g=!0,a--),a||i.next(e(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function LO(n,t,e){n?ma(e,n,t):t()}function NO(n,t,e,i,r,s,o,a){let u=[],d=0,g=0,v=!1,x=()=>{v&&!u.length&&!d&&t.complete()},C=O=>d<i?A(O):u.push(O),A=O=>{s&&t.next(O),d++;let N=!1;Br(e(O,g++)).subscribe(Pi(t,T=>{r?.(T),s?C(T):t.next(T)},()=>{N=!0},void 0,()=>{if(N)try{for(d--;u.length&&d<i;){let T=u.shift();o?ma(t,o,()=>A(T)):A(T)}x()}catch(T){t.error(T)}}))};return n.subscribe(Pi(t,C,()=>{v=!0,x()})),()=>{a?.()}}function Ir(n,t,e=1/0){return zn(t)?Ir((i,r)=>Ei((s,o)=>t(i,s,r,o))(Br(n(i,r))),e):(typeof t=="number"&&(e=t),Ui((i,r)=>NO(i,r,n,e)))}function sg(n=1/0){return Ir(qa,n)}function OO(){return sg(1)}function Sd(...n){return OO()(Vr(n,wd(n)))}function $x(n){return new Ji(t=>{Br(n()).subscribe(t)})}function QT(...n){let t=Px(n),{args:e,keys:i}=Wx(n),r=new Ji(s=>{let{length:o}=e;if(!o){s.complete();return}let a=new Array(o),u=o,d=o;for(let g=0;g<o;g++){let v=!1;Br(e[g]).subscribe(Pi(s,x=>{v||(v=!0,d--),a[g]=x},()=>u--,void 0,()=>{(!u||!v)&&(d||s.next(i?Gx(i,a):a),s.complete())}))}});return t?r.pipe(rg(t)):r}var Z6=["addListener","removeListener"],K6=["addEventListener","removeEventListener"],Q6=["on","off"];function au(n,t,e,i){if(zn(e)&&(i=e,e=void 0),i)return au(n,t,e).pipe(rg(i));let[r,s]=t7(n)?K6.map(o=>a=>n[o](t,a,e)):J6(n)?Z6.map(FO(n,t)):e7(n)?Q6.map(FO(n,t)):[];if(!r&&ng(n))return Ir(o=>au(o,t,e))(Br(n));if(!r)throw new TypeError("Invalid event target");return new Ji(o=>{let a=(...u)=>o.next(1<u.length?u:u[0]);return r(a),()=>s(a)})}function FO(n,t){return e=>i=>n[e](t,i)}function J6(n){return zn(n.addListener)&&zn(n.removeListener)}function e7(n){return zn(n.on)&&zn(n.off)}function t7(n){return zn(n.addEventListener)&&zn(n.removeEventListener)}function qx(n=0,t,e=_O){let i=-1;return t!=null&&(Rx(t)?e=t:i=t),new Ji(r=>{let s=kO(n)?+n-e.now():n;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function Wf(n=0,t=ev){return n<0&&(n=0),qx(n,n,t)}function Xa(n,t){return Ui((e,i)=>{let r=0;e.subscribe(Pi(i,s=>n.call(t,s,r++)&&i.next(s)))})}function lh(n){return Ui((t,e)=>{let i=null,r=!1,s;i=t.subscribe(Pi(e,void 0,void 0,o=>{s=Br(n(o,lh(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function BO(n,t,e,i,r){return(s,o)=>{let a=e,u=t,d=0;s.subscribe(Pi(o,g=>{let v=d++;u=a?n(u,g,v):(a=!0,g),i&&o.next(u)},r&&(()=>{a&&o.next(u),o.complete()})))}}function Cd(n,t){return zn(t)?Ir(n,t,1):Ir(n,1)}function Md(n){return Ui((t,e)=>{let i=!1;t.subscribe(Pi(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Cl(n){return n<=0?()=>pa:Ui((t,e)=>{let i=0;t.subscribe(Pi(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function VO(){return Ui((n,t)=>{n.subscribe(Pi(t,zf))})}function zO(n){return Ei(()=>n)}function JT(n,t){return t?e=>Sd(t.pipe(Cl(1),VO()),e.pipe(JT(n))):Ir((e,i)=>Br(n(e,i)).pipe(Cl(1),zO(e)))}function Ml(n,t=ev){let e=qx(n,t);return JT(()=>e)}function Xx(n=n7){return Ui((t,e)=>{let i=!1;t.subscribe(Pi(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function n7(){return new ah}function nv(n){return Ui((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function ch(n,t){let e=arguments.length>=2;return i=>i.pipe(n?Xa((r,s)=>n(r,s,i)):qa,Cl(1),e?Md(t):Xx(()=>new ah))}function og(n){return n<=0?()=>pa:Ui((t,e)=>{let i=[];t.subscribe(Pi(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function eA(n,t){let e=arguments.length>=2;return i=>i.pipe(n?Xa((r,s)=>n(r,s,i)):qa,og(1),e?Md(t):Xx(()=>new ah))}function tA(n,t){return Ui(BO(n,t,arguments.length>=2,!0))}function nA(...n){let t=wd(n);return Ui((e,i)=>{(t?Sd(n,e,t):Sd(n,e)).subscribe(i)})}function El(n,t){return Ui((e,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();e.subscribe(Pi(i,u=>{r?.unsubscribe();let d=0,g=s++;Br(n(u,g)).subscribe(r=Pi(i,v=>i.next(t?t(u,v,g,d++):v),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Gf(n){return Ui((t,e)=>{Br(n).subscribe(Pi(e,()=>e.complete(),zf)),!e.closed&&t.subscribe(e)})}function ao(n,t,e){let i=zn(n)||t||e?{next:n,error:t,complete:e}:n;return i?Ui((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(Pi(s,u=>{var d;(d=i.next)===null||d===void 0||d.call(i,u),s.next(u)},()=>{var u;a=!1,(u=i.complete)===null||u===void 0||u.call(i),s.complete()},u=>{var d;a=!1,(d=i.error)===null||d===void 0||d.call(i,u),s.error(u)},()=>{var u,d;a&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(d=i.finalize)===null||d===void 0||d.call(i)}))}):qa}var LF="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",St=class extends Error{code;constructor(t,e){super(CD(t,e)),this.code=t}};function i7(n){return`NG0${Math.abs(n)}`}function CD(n,t){return`${i7(n)}${t?": "+t:""}`}var Nw=Symbol("InputSignalNode#UNSET"),NF=Mn(Je({},xx),{transformFn:void 0,applyValueToInputSignal(n,t){qm(n,t)}});function OF(n,t){let e=Object.create(NF);e.value=n,e.transformFn=t?.transform;function i(){if($m(e),e.value===Nw){let r=null;throw new St(-950,r)}return e.value}return i[$a]=e,i}function gv(n){return{toString:n}.toString()}var Yx="__parameters__";function r7(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function FF(n,t,e){return gv(()=>{let i=r7(t);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(u,d,g){let v=u.hasOwnProperty(Yx)?u[Yx]:Object.defineProperty(u,Yx,{value:[]})[Yx];for(;v.length<=g;)v.push(null);return(v[g]=v[g]||[]).push(o),u}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var uh=globalThis;function xr(n){for(let t in n)if(n[t]===xr)return t;throw Error("Could not find renamed property on target object.")}function s7(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function va(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(va).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function vA(n,t){return n?t?`${n} ${t}`:n:t||""}var o7=xr({__forward_ref__:xr});function pu(n){return n.__forward_ref__=pu,n.toString=function(){return va(this())},n}function Wo(n){return BF(n)?n():n}function BF(n){return typeof n=="function"&&n.hasOwnProperty(o7)&&n.__forward_ref__===pu}function Vt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $o(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ow(n){return UO(n,zF)||UO(n,UF)}function VF(n){return Ow(n)!==null}function UO(n,t){return n.hasOwnProperty(t)?n[t]:null}function a7(n){let t=n&&(n[zF]||n[UF]);return t||null}function HO(n){return n&&(n.hasOwnProperty(jO)||n.hasOwnProperty(l7))?n[jO]:null}var zF=xr({\u0275prov:xr}),jO=xr({\u0275inj:xr}),UF=xr({ngInjectableDef:xr}),l7=xr({ngInjectorDef:xr}),wn=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=Vt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function HF(n){return n&&!!n.\u0275providers}var c7=xr({\u0275cmp:xr}),u7=xr({\u0275dir:xr}),h7=xr({\u0275pipe:xr}),d7=xr({\u0275mod:xr}),ow=xr({\u0275fac:xr}),ov=xr({__NG_ELEMENT_ID__:xr}),WO=xr({__NG_ENV_ID__:xr});function Yf(n){return typeof n=="string"?n:n==null?"":String(n)}function f7(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Yf(n)}function jF(n,t){throw new St(-200,n)}function MD(n,t){throw new St(-201,!1)}var xi=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(xi||{}),_A;function WF(){return _A}function ga(n){let t=_A;return _A=n,t}function GF(n,t,e){let i=Ow(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&xi.Optional)return null;if(t!==void 0)return t;MD(n,"Injector")}var p7={},qf=p7,bA="__NG_DI_FLAG__",aw=class{injector;constructor(t){this.injector=t}retrieve(t,e){let i=e;return this.injector.get(t,i.optional?wx:qf,i)}},lw="ngTempTokenPath",m7="ngTokenPath",g7=/\n/gm,y7="\u0275",GO="__source";function v7(n,t=xi.Default){if(Q0()===void 0)throw new St(-203,!1);if(Q0()===null)return GF(n,void 0,t);{let e=Q0(),i;return e instanceof aw?i=e.injector:i=e,i.get(n,t&xi.Optional?null:void 0,t)}}function $n(n,t=xi.Default){return(WF()||v7)(Wo(n),t)}function ze(n,t=xi.Default){return $n(n,Fw(t))}function Fw(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function xA(n){let t=[];for(let e=0;e<n.length;e++){let i=Wo(n[e]);if(Array.isArray(i)){if(i.length===0)throw new St(900,!1);let r,s=xi.Default;for(let o=0;o<i.length;o++){let a=i[o],u=_7(a);typeof u=="number"?u===-1?r=a.token:s|=u:r=a}t.push($n(r,s))}else t.push($n(i))}return t}function $F(n,t){return n[bA]=t,n.prototype[bA]=t,n}function _7(n){return n[bA]}function b7(n,t,e,i){let r=n[lw];throw t[GO]&&r.unshift(t[GO]),n.message=x7(`
`+n.message,r,e,i),n[m7]=r,n[lw]=null,n}function x7(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==y7?n.slice(2):n;let r=va(t);if(Array.isArray(t))r=t.map(va).join(" -> ");else if(typeof t=="object"){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):va(a)))}r=`{${s.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(g7,`
  `)}`}var qF=$F(FF("Optional"),8);var XF=$F(FF("SkipSelf"),4);function Zf(n,t){let e=n.hasOwnProperty(ow);return e?n[ow]:null}function w7(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=t[i];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}function S7(n){return n.flat(Number.POSITIVE_INFINITY)}function ED(n,t){n.forEach(e=>Array.isArray(e)?ED(e,t):t(e))}function YF(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function cw(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function C7(n,t){let e=[];for(let i=0;i<n;i++)e.push(t);return e}function M7(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let s=r-2;n[r]=n[s],r--}n[t]=e,n[t+1]=i}}function yv(n,t,e){let i=vv(n,t);return i>=0?n[i|1]=e:(i=~i,M7(n,i,t,e)),i}function iA(n,t){let e=vv(n,t);if(e>=0)return n[e|1]}function vv(n,t){return E7(n,t,1)}function E7(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<e];if(t===o)return s<<e;o>t?r=s:i=s+1}return~(r<<e)}var Kf={},ya=[],av=new wn(""),ZF=new wn("",-1),KF=new wn(""),uw=class{get(t,e=qf){if(e===qf){let i=new Error(`NullInjectorError: No provider for ${va(t)}!`);throw i.name="NullInjectorError",i}return e}};function QF(n,t){let e=n[d7]||null;if(!e&&t===!0)throw new Error(`Type ${va(n)} does not have '\u0275mod' property.`);return e}function Qf(n){return n[c7]||null}function T7(n){return n[u7]||null}function A7(n){return n[h7]||null}function Bw(n){return{\u0275providers:n}}function D7(...n){return{\u0275providers:JF(!0,n),\u0275fromNgModule:!0}}function JF(n,...t){let e=[],i=new Set,r,s=o=>{e.push(o)};return ED(t,o=>{let a=o;wA(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&e3(r,s),e}function e3(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];TD(r,s=>{t(s,i)})}}function wA(n,t,e,i){if(n=Wo(n),!n)return!1;let r=null,s=HO(n),o=!s&&Qf(n);if(!s&&!o){let u=n.ngModule;if(s=HO(u),s)r=u;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of u)wA(d,t,e,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let d;try{ED(s.imports,g=>{wA(g,t,e,i)&&(d||=[],d.push(g))})}finally{}d!==void 0&&e3(d,t)}if(!a){let d=Zf(r)||(()=>new r);t({provide:r,useFactory:d,deps:ya},r),t({provide:KF,useValue:r,multi:!0},r),t({provide:av,useValue:()=>$n(r),multi:!0},r)}let u=s.providers;if(u!=null&&!a){let d=n;TD(u,g=>{t(g,d)})}}else return!1;return r!==n&&n.providers!==void 0}function TD(n,t){for(let e of n)HF(e)&&(e=e.\u0275providers),Array.isArray(e)?TD(e,t):t(e)}var I7=xr({provide:String,useValue:xr});function t3(n){return n!==null&&typeof n=="object"&&I7 in n}function R7(n){return!!(n&&n.useExisting)}function P7(n){return!!(n&&n.useFactory)}function fg(n){return typeof n=="function"}function k7(n){return!!n.useClass}var Vw=new wn(""),ew={},$O={},rA;function AD(){return rA===void 0&&(rA=new uw),rA}var _a=class{},lv=class extends _a{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,CA(t,o=>this.processProvider(o)),this.records.set(ZF,ag(void 0,this)),r.has("environment")&&this.records.set(_a,ag(void 0,this));let s=this.records.get(Vw);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(KF,ya,xi.Self))}retrieve(t,e){let i=e;return this.get(t,i.optional?wx:qf,i)}destroy(){rv(this),this._destroyed=!0;let t=di(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),di(t)}}onDestroy(t){return rv(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){rv(this);let e=oh(this),i=ga(void 0),r;try{return t()}finally{oh(e),ga(i)}}get(t,e=qf,i=xi.Default){if(rv(this),t.hasOwnProperty(WO))return t[WO](this);i=Fw(i);let r,s=oh(this),o=ga(void 0);try{if(!(i&xi.SkipSelf)){let u=this.records.get(t);if(u===void 0){let d=B7(t)&&Ow(t);d&&this.injectableDefInScope(d)?u=ag(SA(t),ew):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u,i)}let a=i&xi.Self?AD():this.parent;return e=i&xi.Optional&&e===qf?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[lw]=a[lw]||[]).unshift(va(t)),s)throw a;return b7(a,t,"R3InjectorError",this.source)}else throw a}finally{ga(o),oh(s)}}resolveInjectorInitializers(){let t=di(null),e=oh(this),i=ga(void 0),r;try{let s=this.get(av,ya,xi.Self);for(let o of s)o()}finally{oh(e),ga(i),di(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(va(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Wo(t);let e=fg(t)?t:Wo(t&&t.provide),i=N7(t);if(!fg(t)&&t.multi===!0){let r=this.records.get(e);r||(r=ag(void 0,ew,!0),r.factory=()=>xA(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e,i){let r=di(null);try{return e.value===$O?jF(va(t)):e.value===ew&&(e.value=$O,e.value=e.factory(void 0,i)),typeof e.value=="object"&&e.value&&F7(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{di(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=Wo(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function SA(n){let t=Ow(n),e=t!==null?t.factory:Zf(n);if(e!==null)return e;if(n instanceof wn)throw new St(204,!1);if(n instanceof Function)return L7(n);throw new St(204,!1)}function L7(n){if(n.length>0)throw new St(204,!1);let e=a7(n);return e!==null?()=>e.factory(n):()=>new n}function N7(n){if(t3(n))return ag(void 0,n.useValue);{let t=n3(n);return ag(t,ew)}}function n3(n,t,e){let i;if(fg(n)){let r=Wo(n);return Zf(r)||SA(r)}else if(t3(n))i=()=>Wo(n.useValue);else if(P7(n))i=()=>n.useFactory(...xA(n.deps||[]));else if(R7(n))i=(r,s)=>$n(Wo(n.useExisting),s!==void 0&&s&xi.Optional?xi.Optional:void 0);else{let r=Wo(n&&(n.useClass||n.provide));if(O7(n))i=()=>new r(...xA(n.deps));else return Zf(r)||SA(r)}return i}function rv(n){if(n.destroyed)throw new St(205,!1)}function ag(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function O7(n){return!!n.deps}function F7(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function B7(n){return typeof n=="function"||typeof n=="object"&&n instanceof wn}function CA(n,t){for(let e of n)Array.isArray(e)?CA(e,t):e&&HF(e)?CA(e.\u0275providers,t):t(e)}function Al(n,t){let e;n instanceof lv?(rv(n),e=n):e=new aw(n);let i,r=oh(e),s=ga(void 0);try{return t()}finally{oh(r),ga(s)}}function i3(){return WF()!==void 0||Q0()!=null}function _v(n){if(!i3())throw new St(-203,!1)}function V7(n){return typeof n=="function"}var fh=0,ci=1,ii=2,bo=3,_c=4,xa=5,pg=6,hw=7,bs=8,mg=9,hh=10,qr=11,cv=12,qO=13,Sg=14,ba=15,Jf=16,lg=17,dh=18,zw=19,r3=20,Ed=21,sA=22,ep=23,Tl=24,hg=25,Fs=26,s3=1;var tp=7,dw=8,gg=9,_o=10;function Td(n){return Array.isArray(n)&&typeof n[s3]=="object"}function ph(n){return Array.isArray(n)&&n[s3]===!0}function DD(n){return(n.flags&4)!==0}function Cg(n){return n.componentOffset>-1}function Uw(n){return(n.flags&1)===1}function cu(n){return!!n.template}function fw(n){return(n[ii]&512)!==0}function Mg(n){return(n[ii]&256)===256}var MA=class{previousValue;currentValue;firstChange;constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function o3(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}var Ks=(()=>{let n=()=>a3;return n.ngInherit=!0,n})();function a3(n){return n.type.prototype.ngOnChanges&&(n.setInput=U7),z7}function z7(){let n=c3(this),t=n?.current;if(t){let e=n.previous;if(e===Kf)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function U7(n,t,e,i,r){let s=this.declaredInputs[i],o=c3(n)||H7(n,{previous:Kf,current:null}),a=o.current||(o.current={}),u=o.previous,d=u[s];a[s]=new MA(d&&d.currentValue,e,u===Kf),o3(n,t,r,e)}var l3="__ngSimpleChanges__";function c3(n){return n[l3]||null}function H7(n,t){return n[l3]=t}var XO=null;var gr=function(n,t=null,e){XO?.(n,t,e)},u3="svg",j7="math";function uu(n){for(;Array.isArray(n);)n=n[fh];return n}function h3(n,t){return uu(t[n])}function mu(n,t){return uu(t[n.index])}function ID(n,t){return n.data[t]}function RD(n,t){return n[t]}function W7(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function hu(n,t){let e=t[n];return Td(e)?e:e[fh]}function G7(n){return(n[ii]&4)===4}function PD(n){return(n[ii]&128)===128}function $7(n){return ph(n[bo])}function Ad(n,t){return t==null?null:n[t]}function d3(n){n[lg]=0}function f3(n){n[ii]&1024||(n[ii]|=1024,PD(n)&&Eg(n))}function q7(n,t){for(;n>0;)t=t[Sg],n--;return t}function Hw(n){return!!(n[ii]&9216||n[Tl]?.dirty)}function EA(n){n[hh].changeDetectionScheduler?.notify(8),n[ii]&64&&(n[ii]|=1024),Hw(n)&&Eg(n)}function Eg(n){n[hh].changeDetectionScheduler?.notify(0);let t=np(n);for(;t!==null&&!(t[ii]&8192||(t[ii]|=8192,!PD(t)));)t=np(t)}function p3(n,t){if(Mg(n))throw new St(911,!1);n[Ed]===null&&(n[Ed]=[]),n[Ed].push(t)}function X7(n,t){if(n[Ed]===null)return;let e=n[Ed].indexOf(t);e!==-1&&n[Ed].splice(e,1)}function np(n){let t=n[bo];return ph(t)?t[bo]:t}function kD(n){return n[hw]??=[]}function LD(n){return n.cleanup??=[]}function Y7(n,t,e,i){let r=kD(t);r.push(e),n.firstCreatePass&&LD(n).push(i,r.length-1)}var fi={lFrame:x3(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var TA=!1;function Z7(){return fi.lFrame.elementDepthCount}function K7(){fi.lFrame.elementDepthCount++}function Q7(){fi.lFrame.elementDepthCount--}function ND(){return fi.bindingsEnabled}function m3(){return fi.skipHydrationRootTNode!==null}function J7(n){return fi.skipHydrationRootTNode===n}function e$(){fi.skipHydrationRootTNode=null}function Un(){return fi.lFrame.lView}function Xr(){return fi.lFrame.tView}function gt(n){return fi.lFrame.contextLView=n,n[bs]}function yt(n){return fi.lFrame.contextLView=null,n}function qo(){let n=g3();for(;n!==null&&n.type===64;)n=n.parent;return n}function g3(){return fi.lFrame.currentTNode}function t$(){let n=fi.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function cp(n,t){let e=fi.lFrame;e.currentTNode=n,e.isParent=t}function OD(){return fi.lFrame.isParent}function FD(){fi.lFrame.isParent=!1}function n$(){return fi.lFrame.contextLView}function y3(){return TA}function pw(n){let t=TA;return TA=n,t}function mh(){let n=fi.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function i$(){return fi.lFrame.bindingIndex}function r$(n){return fi.lFrame.bindingIndex=n}function up(){return fi.lFrame.bindingIndex++}function BD(n){let t=fi.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function s$(){return fi.lFrame.inI18n}function o$(n,t){let e=fi.lFrame;e.bindingIndex=e.bindingRootIndex=n,AA(t)}function a$(){return fi.lFrame.currentDirectiveIndex}function AA(n){fi.lFrame.currentDirectiveIndex=n}function l$(n){let t=fi.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function v3(){return fi.lFrame.currentQueryIndex}function VD(n){fi.lFrame.currentQueryIndex=n}function c$(n){let t=n[ci];return t.type===2?t.declTNode:t.type===1?n[xa]:null}function _3(n,t,e){if(e&xi.SkipSelf){let r=t,s=n;for(;r=r.parent,r===null&&!(e&xi.Host);)if(r=c$(s),r===null||(s=s[Sg],r.type&10))break;if(r===null)return!1;t=r,n=s}let i=fi.lFrame=b3();return i.currentTNode=t,i.lView=n,!0}function zD(n){let t=b3(),e=n[ci];fi.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function b3(){let n=fi.lFrame,t=n===null?null:n.child;return t===null?x3(n):t}function x3(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function w3(){let n=fi.lFrame;return fi.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var S3=w3;function UD(){let n=w3();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function u$(n){return(fi.lFrame.contextLView=q7(n,fi.lFrame.contextLView))[bs]}function gh(){return fi.lFrame.selectedIndex}function ip(n){fi.lFrame.selectedIndex=n}function jw(){let n=fi.lFrame;return ID(n.tView,n.selectedIndex)}function xo(){fi.lFrame.currentNamespace=u3}function gu(){h$()}function h$(){fi.lFrame.currentNamespace=null}function d$(){return fi.lFrame.currentNamespace}var C3=!0;function Ww(){return C3}function Gw(n){C3=n}function f$(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){let o=a3(t);(e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o)}r&&(e.preOrderHooks??=[]).push(0-n,r),s&&((e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s))}function HD(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let s=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:g}=s;o&&(n.contentHooks??=[]).push(-e,o),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),u&&(n.viewHooks??=[]).push(-e,u),d&&((n.viewHooks??=[]).push(e,d),(n.viewCheckHooks??=[]).push(e,d)),g!=null&&(n.destroyHooks??=[]).push(e,g)}}function tw(n,t,e){M3(n,t,3,e)}function nw(n,t,e,i){(n[ii]&3)===e&&M3(n,t,e,i)}function oA(n,t){let e=n[ii];(e&3)===t&&(e&=16383,e+=1,n[ii]=e)}function M3(n,t,e,i){let r=i!==void 0?n[lg]&65535:0,s=i??-1,o=t.length-1,a=0;for(let u=r;u<o;u++)if(typeof t[u+1]=="number"){if(a=t[u],i!=null&&a>=i)break}else t[u]<0&&(n[lg]+=65536),(a<s||s==-1)&&(p$(n,e,t,u),n[lg]=(n[lg]&4294901760)+u+2),u++}function YO(n,t){gr(4,n,t);let e=di(null);try{t.call(n)}finally{di(e),gr(5,n,t)}}function p$(n,t,e,i){let r=e[i]<0,s=e[i+1],o=r?-e[i]:e[i],a=n[o];r?n[ii]>>14<n[lg]>>16&&(n[ii]&3)===t&&(n[ii]+=16384,YO(a,s)):YO(a,s)}var dg=-1,rp=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,i){this.factory=t,this.canSeeViewProviders=e,this.injectImpl=i}};function m$(n){return(n.flags&8)!==0}function g$(n){return(n.flags&16)!==0}function y$(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let s=e[i++],o=e[i++],a=e[i++];n.setAttribute(t,o,a,s)}else{let s=r,o=e[++i];_$(s)?n.setProperty(t,s,o):n.setAttribute(t,s,o),i++}}return i}function v$(n){return n===3||n===4||n===6}function _$(n){return n.charCodeAt(0)===64}function yg(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?ZO(n,e,r,null,t[++i]):ZO(n,e,r,null,null))}}return n}function ZO(n,t,e,i,r){let s=0,o=n.length;if(t===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===e){r!==null&&(n[s+1]=r);return}s++,r!==null&&s++}o!==-1&&(n.splice(o,0,t),s=o+1),n.splice(s++,0,e),r!==null&&n.splice(s++,0,r)}function E3(n){return n!==dg}function mw(n){return n&32767}function b$(n){return n>>16}function gw(n,t){let e=b$(n),i=t;for(;e>0;)i=i[Sg],e--;return i}var DA=!0;function yw(n){let t=DA;return DA=n,t}var x$=256,T3=x$-1,A3=5,w$=0,lu={};function S$(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(ov)&&(i=e[ov]),i==null&&(i=e[ov]=w$++);let r=i&T3,s=1<<r;t.data[n+(r>>A3)]|=s}function vw(n,t){let e=D3(n,t);if(e!==-1)return e;let i=t[ci];i.firstCreatePass&&(n.injectorIndex=t.length,aA(i.data,n),aA(t,null),aA(i.blueprint,null));let r=jD(n,t),s=n.injectorIndex;if(E3(r)){let o=mw(r),a=gw(r,t),u=a[ci].data;for(let d=0;d<8;d++)t[s+d]=a[o+d]|u[o+d]}return t[s+8]=r,s}function aA(n,t){n.push(0,0,0,0,0,0,0,0,t)}function D3(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function jD(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=L3(r),i===null)return dg;if(e++,r=r[Sg],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return dg}function IA(n,t,e){S$(n,t,e)}function I3(n,t,e){if(e&xi.Optional||n!==void 0)return n;MD(t,"NodeInjector")}function R3(n,t,e,i){if(e&xi.Optional&&i===void 0&&(i=null),(e&(xi.Self|xi.Host))===0){let r=n[mg],s=ga(void 0);try{return r?r.get(t,i,e&xi.Optional):GF(t,i,e&xi.Optional)}finally{ga(s)}}return I3(i,t,e)}function P3(n,t,e,i=xi.Default,r){if(n!==null){if(t[ii]&2048&&!(i&xi.Self)){let o=T$(n,t,e,i,lu);if(o!==lu)return o}let s=k3(n,t,e,i,lu);if(s!==lu)return s}return R3(t,e,i,r)}function k3(n,t,e,i,r){let s=M$(e);if(typeof s=="function"){if(!_3(t,n,i))return i&xi.Host?I3(r,e,i):R3(t,e,i,r);try{let o;if(o=s(i),o==null&&!(i&xi.Optional))MD(e);else return o}finally{S3()}}else if(typeof s=="number"){let o=null,a=D3(n,t),u=dg,d=i&xi.Host?t[ba][xa]:null;for((a===-1||i&xi.SkipSelf)&&(u=a===-1?jD(n,t):t[a+8],u===dg||!QO(i,!1)?a=-1:(o=t[ci],a=mw(u),t=gw(u,t)));a!==-1;){let g=t[ci];if(KO(s,a,g.data)){let v=C$(a,t,e,o,i,d);if(v!==lu)return v}u=t[a+8],u!==dg&&QO(i,t[ci].data[a+8]===d)&&KO(s,a,t)?(o=g,a=mw(u),t=gw(u,t)):a=-1}}return r}function C$(n,t,e,i,r,s){let o=t[ci],a=o.data[n+8],u=i==null?Cg(a)&&DA:i!=o&&(a.type&3)!==0,d=r&xi.Host&&s===a,g=iw(a,o,e,u,d);return g!==null?uv(t,o,g,a,r):lu}function iw(n,t,e,i,r){let s=n.providerIndexes,o=t.data,a=s&1048575,u=n.directiveStart,d=n.directiveEnd,g=s>>20,v=i?a:a+g,x=r?a+g:d;for(let C=v;C<x;C++){let A=o[C];if(C<u&&e===A||C>=u&&A.type===e)return C}if(r){let C=o[u];if(C&&cu(C)&&C.type===e)return u}return null}function uv(n,t,e,i,r){let s=n[e],o=t.data;if(s instanceof rp){let a=s;a.resolving&&jF(f7(o[e]));let u=yw(a.canSeeViewProviders);a.resolving=!0;let d,g=a.injectImpl?ga(a.injectImpl):null,v=_3(n,i,xi.Default);try{s=n[e]=a.factory(void 0,r,o,n,i),t.firstCreatePass&&e>=i.directiveStart&&f$(e,o[e],t)}finally{g!==null&&ga(g),yw(u),a.resolving=!1,S3()}}return s}function M$(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(ov)?n[ov]:void 0;return typeof t=="number"?t>=0?t&T3:E$:t}function KO(n,t,e){let i=1<<n;return!!(e[t+(n>>A3)]&i)}function QO(n,t){return!(n&xi.Self)&&!(n&xi.Host&&t)}var Xf=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return P3(this._tNode,this._lView,t,Fw(i),e)}};function E$(){return new Xf(qo(),Un())}function wi(n){return gv(()=>{let t=n.prototype.constructor,e=t[ow]||RA(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[ow]||RA(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function RA(n){return BF(n)?()=>{let t=RA(Wo(n));return t&&t()}:Zf(n)}function T$(n,t,e,i,r){let s=n,o=t;for(;s!==null&&o!==null&&o[ii]&2048&&!fw(o);){let a=k3(s,o,e,i|xi.Self,lu);if(a!==lu)return a;let u=s.parent;if(!u){let d=o[r3];if(d){let g=d.get(e,lu,i);if(g!==lu)return g}u=L3(o),o=o[Sg]}s=u}return r}function L3(n){let t=n[ci],e=t.type;return e===2?t.declTNode:e===1?n[xa]:null}function JO(n,t=null,e=null,i){let r=N3(n,t,e,i);return r.resolveInjectorInitializers(),r}function N3(n,t=null,e=null,i,r=new Set){let s=[e||ya,D7(n)];return i=i||(typeof n=="object"?void 0:va(n)),new lv(s,t||AD(),i||null,r)}var Bs=class n{static THROW_IF_NOT_FOUND=qf;static NULL=new uw;static create(t,e){if(Array.isArray(t))return JO({name:""},e,t,"");{let i=t.name??"";return JO({name:i},t.parent,t.providers,i)}}static \u0275prov=Vt({token:n,providedIn:"any",factory:()=>$n(ZF)});static __NG_ELEMENT_ID__=-1};var A$=new wn("");A$.__NG_ELEMENT_ID__=n=>{let t=qo();if(t===null)throw new St(204,!1);if(t.type&2)return t.value;if(n&xi.Optional)return null;throw new St(204,!1)};var O3=!1,Dl=(()=>{class n{static __NG_ELEMENT_ID__=D$;static __NG_ENV_ID__=e=>e}return n})(),_w=class extends Dl{_lView;constructor(t){super(),this._lView=t}onDestroy(t){let e=this._lView;return Mg(e)?(t(),()=>{}):(p3(e,t),()=>X7(e,t))}};function D$(){return new _w(Un())}var sp=class{},WD=new wn("",{providedIn:"root",factory:()=>!1});var F3=new wn(""),B3=new wn(""),Tg=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new _s(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Vt({token:n,providedIn:"root",factory:()=>new n})}return n})();var PA=class extends Jr{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,i3()&&(this.destroyRef=ze(Dl,{optional:!0})??void 0,this.pendingTasks=ze(Tg,{optional:!0})??void 0)}emit(t){let e=di(null);try{super.next(t)}finally{di(e)}}subscribe(t,e,i){let r=t,s=e||(()=>null),o=i;if(t&&typeof t=="object"){let u=t;r=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return t instanceof Qr&&t.add(a),a}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},en=PA;function hv(...n){}function V3(n){let t,e;function i(){n=hv;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function eF(n){return queueMicrotask(()=>n()),()=>{n=hv}}var GD="isAngularZone",bw=GD+"_ID",I$=0,br=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new en(!1);onMicrotaskEmpty=new en(!1);onStable=new en(!1);onError=new en(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=O3}=t;if(typeof Zone>"u")throw new St(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,k$(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(GD)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new St(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new St(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,R$,hv,hv);try{return s.runTask(o,e,i)}finally{s.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},R$={};function $D(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function P$(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){V3(()=>{n.callbackScheduled=!1,kA(n),n.isCheckStableRunning=!0,$D(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),kA(n)}function k$(n){let t=()=>{P$(n)},e=I$++;n._inner=n._inner.fork({name:"angular",properties:{[GD]:!0,[bw]:e,[bw+e]:!0},onInvokeTask:(i,r,s,o,a,u)=>{if(L$(u))return i.invokeTask(s,o,a,u);try{return tF(n),i.invokeTask(s,o,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),nF(n)}},onInvoke:(i,r,s,o,a,u,d)=>{try{return tF(n),i.invoke(s,o,a,u,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!N$(u)&&t(),nF(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,kA(n),$D(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function kA(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function tF(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function nF(n){n._nesting--,$D(n)}var LA=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new en;onMicrotaskEmpty=new en;onStable=new en;onError=new en;run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function L$(n){return z3(n,"__ignore_ng_zone__")}function N$(n){return z3(n,"__scheduler_tick__")}function z3(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var bc=class{_console=console;handleError(t){this._console.error("ERROR",t)}},O$=new wn("",{providedIn:"root",factory:()=>{let n=ze(br),t=ze(bc);return e=>n.runOutsideAngular(()=>t.handleError(e))}}),xw=class{destroyed=!1;listeners=null;errorHandler=ze(bc,{optional:!0});destroyRef=ze(Dl);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(t){if(this.destroyed)throw new St(953,!1);return(this.listeners??=[]).push(t),{unsubscribe:()=>{let e=this.listeners?.indexOf(t);e!==void 0&&e!==-1&&this.listeners?.splice(e,1)}}}emit(t){if(this.destroyed){console.warn(CD(953,!1));return}if(this.listeners===null)return;let e=di(null);try{for(let i of this.listeners)try{i(t)}catch(r){this.errorHandler?.handleError(r)}}finally{di(e)}}};function nr(n){return new xw}function iF(n,t){return OF(n,t)}function F$(n){return OF(Nw,n)}var vt=(iF.required=F$,iF);function B$(){return Ag(qo(),Un())}function Ag(n,t){return new Rr(mu(n,t))}var Rr=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=B$}return n})();function V$(n){return n instanceof Rr?n.nativeElement:n}function qD(n){return typeof n=="function"&&n[$a]!==void 0}function mn(n,t){let e=FT(n,t?.equal),i=e[$a];return e.set=r=>qm(i,r),e.update=r=>BT(i,r),e.asReadonly=U3.bind(e),e}function U3(){let n=this[$a];if(n.readonlyFn===void 0){let t=()=>this();t[$a]=n,n.readonlyFn=t}return n.readonlyFn}function H3(n){return qD(n)&&typeof n.set=="function"}function z$(){return this._results[Symbol.iterator]()}var NA=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Jr}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=S7(t);(this._changesDetected=!w7(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=z$};function j3(n){return(n.flags&128)===128}var W3=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(W3||{}),G3=new Map,U$=0;function H$(){return U$++}function j$(n){G3.set(n[zw],n)}function OA(n){G3.delete(n[zw])}var rF="__ngContext__";function Dg(n,t){Td(t)?(n[rF]=t[zw],j$(t)):n[rF]=t}function $3(n){return X3(n[cv])}function q3(n){return X3(n[_c])}function X3(n){for(;n!==null&&!ph(n);)n=n[_c];return n}var FA;function Y3(n){FA=n}function Z3(){if(FA!==void 0)return FA;if(typeof document<"u")return document;throw new St(210,!1)}var XD=new wn("",{providedIn:"root",factory:()=>W$}),W$="ng",YD=new wn(""),Ig=new wn("",{providedIn:"platform",factory:()=>"unknown"});var ZD=new wn(""),KD=new wn("",{providedIn:"root",factory:()=>Z3().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var G$="h",$$="b";var K3=!1,q$=new wn("",{providedIn:"root",factory:()=>K3});var QD=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(QD||{}),Rg=new wn(""),sF=new Set;function yu(n){sF.has(n)||(sF.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var JD=(()=>{class n{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=X$}return n})();function X$(){return new JD(Un(),qo())}var cg=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(cg||{}),Q3=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Vt({token:n,providedIn:"root",factory:()=>new n})}return n})(),Y$=[cg.EarlyRead,cg.Write,cg.MixedReadWrite,cg.Read],Z$=(()=>{class n{ngZone=ze(br);scheduler=ze(sp);errorHandler=ze(bc,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){ze(Rg,{optional:!0})}execute(){let e=this.sequences.size>0;e&&gr(16),this.executing=!0;for(let i of Y$)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=r.hooks[i];return s(r.pipelinedValue)},r.snapshot))}catch(s){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&gr(17)}register(e){let{view:i}=e;i!==void 0?((i[hg]??=[]).push(e),Eg(i),i[ii]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(QD.AFTER_NEXT_RENDER,e):e()}static \u0275prov=Vt({token:n,providedIn:"root",factory:()=>new n})}return n})(),BA=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,i,r,s,o=null){this.impl=t,this.hooks=e,this.view=i,this.once=r,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[hg];t&&(this.view[hg]=t.filter(e=>e!==this))}};function eI(n,t){!t?.injector&&_v(eI);let e=t?.injector??ze(Bs);return yu("NgAfterNextRender"),Q$(n,e,t,!0)}function K$(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Q$(n,t,e,i){let r=t.get(Q3);r.impl??=t.get(Z$);let s=t.get(Rg,null,{optional:!0}),o=e?.phase??cg.MixedReadWrite,a=e?.manualCleanup!==!0?t.get(Dl):null,u=t.get(JD,null,{optional:!0}),d=new BA(r.impl,K$(n,o),u?.view,i,a,s?.snapshot(null));return r.impl.register(d),d}var J$=(n,t,e,i)=>{};function eq(n,t,e,i){J$(n,t,e,i)}var tq=()=>null;function J3(n,t,e=!1){return tq(n,t,e)}function eB(n,t){let e=n.contentQueries;if(e!==null){let i=di(null);try{for(let r=0;r<e.length;r+=2){let s=e[r],o=e[r+1];if(o!==-1){let a=n.data[o];VD(s),a.contentQueries(2,t[o],o)}}}finally{di(i)}}}function VA(n,t,e){VD(0);let i=di(null);try{t(n,e)}finally{di(i)}}function tI(n,t,e){if(DD(t)){let i=di(null);try{let r=t.directiveStart,s=t.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let u=e[o];a.contentQueries(1,u,o)}}}finally{di(i)}}}var du=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(du||{}),Zx;function nq(){if(Zx===void 0&&(Zx=null,uh.trustedTypes))try{Zx=uh.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zx}function $w(n){return nq()?.createHTML(n)||n}var Kx;function iq(){if(Kx===void 0&&(Kx=null,uh.trustedTypes))try{Kx=uh.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Kx}function oF(n){return iq()?.createHTML(n)||n}var ww=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${LF})`}};function Pg(n){return n instanceof ww?n.changingThisBreaksApplicationSecurity:n}function tB(n,t){let e=rq(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${LF})`)}return e===t}function rq(n){return n instanceof ww&&n.getTypeName()||null}function sq(n){let t=new UA(n);return oq()?new zA(t):t}var zA=class{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString($w(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},UA=class{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=$w(t),e}};function oq(){try{return!!new window.DOMParser().parseFromString($w(""),"text/html")}catch{return!1}}var aq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function nB(n){return n=String(n),n.match(aq)?n:"unsafe:"+n}function yh(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function bv(...n){let t={};for(let e of n)for(let i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}var iB=yh("area,br,col,hr,img,wbr"),rB=yh("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),sB=yh("rp,rt"),lq=bv(sB,rB),cq=bv(rB,yh("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),uq=bv(sB,yh("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),aF=bv(iB,cq,uq,lq),oB=yh("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hq=yh("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),dq=yh("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),fq=bv(oB,hq,dq),pq=yh("script,style,template"),HA=class{sanitizedSomething=!1;buf=[];sanitizeChildren(t){let e=t.firstChild,i=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild){r.push(e),e=yq(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let s=gq(e);if(s){e=s;break}e=r.pop()}}return this.buf.join("")}startElement(t){let e=lF(t).toLowerCase();if(!aF.hasOwnProperty(e))return this.sanitizedSomething=!0,!pq.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let i=t.attributes;for(let r=0;r<i.length;r++){let s=i.item(r),o=s.name,a=o.toLowerCase();if(!fq.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;oB[a]&&(u=nB(u)),this.buf.push(" ",o,'="',cF(u),'"')}return this.buf.push(">"),!0}endElement(t){let e=lF(t).toLowerCase();aF.hasOwnProperty(e)&&!iB.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(cF(t))}};function mq(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function gq(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw aB(t);return t}function yq(n){let t=n.firstChild;if(t&&mq(n,t))throw aB(t);return t}function lF(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function aB(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var vq=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_q=/([^\#-~ |!])/g;function cF(n){return n.replace(/&/g,"&amp;").replace(vq,function(t){let e=t.charCodeAt(0),i=t.charCodeAt(1);return"&#"+((e-55296)*1024+(i-56320)+65536)+";"}).replace(_q,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Qx;function bq(n,t){let e=null;try{Qx=Qx||sq(n);let i=t?String(t):"";e=Qx.getInertBodyElement(i);let r=5,s=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=e.innerHTML,e=Qx.getInertBodyElement(i)}while(i!==s);let a=new HA().sanitizeChildren(uF(e)||e);return $w(a)}finally{if(e){let i=uF(e)||e;for(;i.firstChild;)i.firstChild.remove()}}}function uF(n){return"content"in n&&xq(n)?n.content:null}function xq(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var nI=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(nI||{});function iI(n){let t=lB();return t?oF(t.sanitize(nI.HTML,n)||""):tB(n,"HTML")?oF(Pg(n)):bq(Z3(),Yf(n))}function hp(n){let t=lB();return t?t.sanitize(nI.URL,n)||"":tB(n,"URL")?Pg(n):nB(Yf(n))}function lB(){let n=Un();return n&&n[hh].sanitizer}var wq=/^>|^->|<!--|-->|--!>|<!-$/g,Sq=/(<|>)/g,Cq="\u200B$1\u200B";function Mq(n){return n.replace(wq,t=>t.replace(Sq,Cq))}function qw(n){return n.ownerDocument.defaultView}function cB(n){return n instanceof Function?n():n}function Eq(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=t.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}e=r+1}}var uB="ng-template";function Tq(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&Eq(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(rI(n))return!1;if(r=t.indexOf(1,r),r>-1){let s;for(;++r<t.length&&typeof(s=t[r])=="string";)if(s.toLowerCase()===e)return!0}return!1}function rI(n){return n.type===4&&n.value!==uB}function Aq(n,t,e){let i=n.type===4&&!e?uB:n.value;return t===i}function Dq(n,t,e){let i=4,r=n.attrs,s=r!==null?Pq(r):0,o=!1;for(let a=0;a<t.length;a++){let u=t[a];if(typeof u=="number"){if(!o&&!vc(i)&&!vc(u))return!1;if(o&&vc(u))continue;o=!1,i=u|i&1;continue}if(!o)if(i&4){if(i=2|i&1,u!==""&&!Aq(n,u,e)||u===""&&t.length===1){if(vc(i))return!1;o=!0}}else if(i&8){if(r===null||!Tq(n,r,u,e)){if(vc(i))return!1;o=!0}}else{let d=t[++a],g=Iq(u,r,rI(n),e);if(g===-1){if(vc(i))return!1;o=!0;continue}if(d!==""){let v;if(g>s?v="":v=r[g+1].toLowerCase(),i&2&&d!==v){if(vc(i))return!1;o=!0}}}}return vc(i)||o}function vc(n){return(n&1)===0}function Iq(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let s=!1;for(;r<t.length;){let o=t[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return kq(t,n)}function hB(n,t,e=!1){for(let i=0;i<t.length;i++)if(Dq(n,t[i],e))return!0;return!1}function Rq(n){let t=n.attrs;if(t!=null){let e=t.indexOf(5);if((e&1)===0)return t[e+1]}return null}function Pq(n){for(let t=0;t<n.length;t++){let e=n[t];if(v$(e))return t}return n.length}function kq(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function Lq(n,t){e:for(let e=0;e<t.length;e++){let i=t[e];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function hF(n,t){return n?":not("+t.trim()+")":t}function Nq(n){let t=n[0],e=1,i=2,r="",s=!1;for(;e<n.length;){let o=n[e];if(typeof o=="string")if(i&2){let a=n[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!vc(o)&&(t+=hF(s,r),r=""),i=o,s=s||!vc(i);e++}return r!==""&&(t+=hF(s,r)),t}function Oq(n){return n.map(Nq).join(",")}function Fq(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&t.push(s,n[++i]):r===8&&e.push(s);else{if(!vc(r))break;r=s}i++}return e.length&&t.push(1,...e),t}var Ya={};function Bq(n,t){return n.createText(t)}function Vq(n,t,e){n.setValue(t,e)}function zq(n,t){return n.createComment(Mq(t))}function dB(n,t,e){return n.createElement(t,e)}function Sw(n,t,e,i,r){n.insertBefore(t,e,i,r)}function fB(n,t,e){n.appendChild(t,e)}function dF(n,t,e,i,r){i!==null?Sw(n,t,e,i,r):fB(n,t,e)}function Uq(n,t,e){n.removeChild(null,t,e)}function Hq(n,t,e){n.setAttribute(t,"style",e)}function jq(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function pB(n,t,e){let{mergedAttrs:i,classes:r,styles:s}=e;i!==null&&y$(n,t,i),r!==null&&jq(n,t,r),s!==null&&Hq(n,t,s)}function sI(n,t,e,i,r,s,o,a,u,d,g){let v=Fs+i,x=v+r,C=Wq(v,x),A=typeof d=="function"?d():d;return C[ci]={type:n,blueprint:C,template:e,queries:null,viewQuery:a,declTNode:t,data:C.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:g}}function Wq(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:Ya);return e}function Gq(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=sI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function oI(n,t,e,i,r,s,o,a,u,d,g){let v=t.blueprint.slice();return v[fh]=r,v[ii]=i|4|128|8|64|1024,(d!==null||n&&n[ii]&2048)&&(v[ii]|=2048),d3(v),v[bo]=v[Sg]=n,v[bs]=e,v[hh]=o||n&&n[hh],v[qr]=a||n&&n[qr],v[mg]=u||n&&n[mg]||null,v[xa]=s,v[zw]=H$(),v[pg]=g,v[r3]=d,v[ba]=t.type==2?n[ba]:v,v}function $q(n,t,e){let i=mu(t,n),r=Gq(e),s=n[hh].rendererFactory,o=aI(n,oI(n,r,null,mB(e),i,t,null,s.createRenderer(i,e),null,null,null));return n[t.index]=o}function mB(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function gB(n,t,e,i){if(e===0)return-1;let r=t.length;for(let s=0;s<e;s++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function aI(n,t){return n[cv]?n[qO][_c]=t:n[cv]=t,n[qO]=t,t}function xe(n=1){yB(Xr(),Un(),gh()+n,!1)}function yB(n,t,e,i){if(!i)if((t[ii]&3)===3){let s=n.preOrderCheckHooks;s!==null&&tw(t,s,e)}else{let s=n.preOrderHooks;s!==null&&nw(t,s,0,e)}ip(e)}var Xw=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Xw||{});function jA(n,t,e,i){let r=di(null);try{let[s,o,a]=n.inputs[e],u=null;(o&Xw.SignalBased)!==0&&(u=t[s][$a]),u!==null&&u.transformFn!==void 0?i=u.transformFn(i):a!==null&&(i=a.call(t,i)),n.setInput!==null?n.setInput(t,u,i,e,s):o3(t,u,s,i)}finally{di(r)}}function vB(n,t,e,i,r){let s=gh(),o=i&2;try{ip(-1),o&&t.length>Fs&&yB(n,t,Fs,!1),gr(o?2:0,r),e(i,r)}finally{ip(s),gr(o?3:1,r)}}function Yw(n,t,e){Qq(n,t,e),(e.flags&64)===64&&Jq(n,t,e)}function lI(n,t,e=mu){let i=t.localNames;if(i!==null){let r=t.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?e(t,n):n[o];n[r++]=a}}}function qq(n,t,e,i){let s=i.get(q$,K3)||e===du.ShadowDom,o=n.selectRootElement(t,s);return Xq(o),o}function Xq(n){Yq(n)}var Yq=()=>null;function Zq(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function cI(n,t,e,i,r,s,o,a){if(!a&&hI(t,n,e,i,r)){Cg(t)&&Kq(e,t.index);return}if(t.type&3){let u=mu(t,e);i=Zq(i),r=o!=null?o(r,t.value||"",i):r,s.setProperty(u,i,r)}else t.type&12}function Kq(n,t){let e=hu(t,n);e[ii]&16||(e[ii]|=64)}function Qq(n,t,e){let i=e.directiveStart,r=e.directiveEnd;Cg(e)&&$q(t,e,n.data[i+e.componentOffset]),n.firstCreatePass||vw(e,t);let s=e.initialInputs;for(let o=i;o<r;o++){let a=n.data[o],u=uv(t,n,o,e);if(Dg(u,t),s!==null&&iX(t,o-i,u,a,e,s),cu(a)){let d=hu(e.index,t);d[bs]=uv(t,n,o,e)}}}function Jq(n,t,e){let i=e.directiveStart,r=e.directiveEnd,s=e.index,o=a$();try{ip(s);for(let a=i;a<r;a++){let u=n.data[a],d=t[a];AA(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&eX(u,d)}}finally{ip(-1),AA(o)}}function eX(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function uI(n,t){let e=n.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let s=e[r];hB(t,s.selectors,!1)&&(i??=[],cu(s)?i.unshift(s):i.push(s))}return i}function tX(n,t,e,i,r,s){let o=mu(n,t);nX(t[qr],o,s,n.value,e,i,r)}function nX(n,t,e,i,r,s,o){if(s==null)n.removeAttribute(t,r,e);else{let a=o==null?Yf(s):o(s,i||"",r);n.setAttribute(t,r,a,e)}}function iX(n,t,e,i,r,s){let o=s[t];if(o!==null)for(let a=0;a<o.length;a+=2){let u=o[a],d=o[a+1];jA(i,e,u,d)}}function rX(n,t){let e=n[mg],i=e?e.get(bc,null):null;i&&i.handleError(t)}function hI(n,t,e,i,r){let s=n.inputs?.[i],o=n.hostDirectiveInputs?.[i],a=!1;if(o)for(let u=0;u<o.length;u+=2){let d=o[u],g=o[u+1],v=t.data[d];jA(v,e[d],g,r),a=!0}if(s)for(let u of s){let d=e[u],g=t.data[u];jA(g,d,i,r),a=!0}return a}function sX(n,t){let e=hu(t,n),i=e[ci];oX(i,e);let r=e[fh];r!==null&&e[pg]===null&&(e[pg]=J3(r,e[mg])),gr(18),dI(i,e,e[bs]),gr(19,e[bs])}function oX(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function dI(n,t,e){zD(t);try{let i=n.viewQuery;i!==null&&VA(1,i,e);let r=n.template;r!==null&&vB(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[dh]?.finishViewCreation(n),n.staticContentQueries&&eB(n,t),n.staticViewQueries&&VA(2,n.viewQuery,e);let s=n.components;s!==null&&aX(t,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[ii]&=-5,UD()}}function aX(n,t){for(let e=0;e<t.length;e++)sX(n,t[e])}function xv(n,t,e,i){let r=di(null);try{let s=t.tView,a=n[ii]&4096?4096:16,u=oI(n,s,e,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),d=n[t.index];u[Jf]=d;let g=n[dh];return g!==null&&(u[dh]=g.createEmbeddedView(s)),dI(s,u,e),u}finally{di(r)}}function vg(n,t){return!t||t.firstChild===null||j3(n)}var lX;function fI(n,t){return lX(n,t)}var fu=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(fu||{});function pI(n){return(n.flags&32)===32}function ug(n,t,e,i,r){if(i!=null){let s,o=!1;ph(i)?s=i:Td(i)&&(o=!0,i=i[fh]);let a=uu(i);n===0&&e!==null?r==null?fB(t,e,a):Sw(t,e,a,r||null,!0):n===1&&e!==null?Sw(t,e,a,r||null,!0):n===2?Uq(t,a,o):n===3&&t.destroyNode(a),s!=null&&vX(t,n,s,e,r)}}function cX(n,t){_B(n,t),t[fh]=null,t[xa]=null}function uX(n,t,e,i,r,s){i[fh]=r,i[xa]=t,Qw(n,i,e,1,r,s)}function _B(n,t){t[hh].changeDetectionScheduler?.notify(9),Qw(n,t,t[qr],2,null,null)}function hX(n){let t=n[cv];if(!t)return lA(n[ci],n);for(;t;){let e=null;if(Td(t))e=t[cv];else{let i=t[_o];i&&(e=i)}if(!e){for(;t&&!t[_c]&&t!==n;)Td(t)&&lA(t[ci],t),t=t[bo];t===null&&(t=n),Td(t)&&lA(t[ci],t),e=t&&t[_c]}t=e}}function mI(n,t){let e=n[gg],i=e.indexOf(t);e.splice(i,1)}function Zw(n,t){if(Mg(t))return;let e=t[qr];e.destroyNode&&Qw(n,t,e,3,null,null),hX(t)}function lA(n,t){if(Mg(t))return;let e=di(null);try{t[ii]&=-129,t[ii]|=256,t[Tl]&&K0(t[Tl]),fX(n,t),dX(n,t),t[ci].type===1&&t[qr].destroy();let i=t[Jf];if(i!==null&&ph(t[bo])){i!==t[bo]&&mI(i,t);let r=t[dh];r!==null&&r.detachView(n)}OA(t)}finally{di(e)}}function dX(n,t){let e=n.cleanup,i=t[hw];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let a=e[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[e[o+1]];e[o].call(a)}i!==null&&(t[hw]=null);let r=t[Ed];if(r!==null){t[Ed]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}let s=t[ep];if(s!==null){t[ep]=null;for(let o of s)o.destroy()}}function fX(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof rp)){let s=e[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],u=s[o+1];gr(4,a,u);try{u.call(a)}finally{gr(5,a,u)}}else{gr(4,r,s);try{s.call(r)}finally{gr(5,r,s)}}}}}function bB(n,t,e){return pX(n,t.parent,e)}function pX(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[fh];if(Cg(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===du.None||r===du.Emulated)return null}return mu(i,e)}function xB(n,t,e){return gX(n,t,e)}function mX(n,t,e){return n.type&40?mu(n,e):null}var gX=mX,fF;function Kw(n,t,e,i){let r=bB(n,i,t),s=t[qr],o=i.parent||t[xa],a=xB(o,i,t);if(r!=null)if(Array.isArray(e))for(let u=0;u<e.length;u++)dF(s,r,e[u],a,!1);else dF(s,r,e,a,!1);fF!==void 0&&fF(s,i,t,e,r)}function sv(n,t){if(t!==null){let e=t.type;if(e&3)return mu(t,n);if(e&4)return WA(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return sv(n,i);{let r=n[t.index];return ph(r)?WA(-1,r):uu(r)}}else{if(e&128)return sv(n,t.next);if(e&32)return fI(t,n)()||uu(n[t.index]);{let i=wB(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=np(n[ba]);return sv(r,i)}else return sv(n,t.next)}}}return null}function wB(n,t){if(t!==null){let i=n[ba][xa],r=t.projection;return i.projection[r]}return null}function WA(n,t){let e=_o+n+1;if(e<t.length){let i=t[e],r=i[ci].firstChild;if(r!==null)return sv(i,r)}return t[tp]}function gI(n,t,e,i,r,s,o){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=i[e.index],u=e.type;if(o&&t===0&&(a&&Dg(uu(a),i),e.flags|=2),!pI(e))if(u&8)gI(n,t,e.child,i,r,s,!1),ug(t,n,r,a,s);else if(u&32){let d=fI(e,i),g;for(;g=d();)ug(t,n,r,g,s);ug(t,n,r,a,s)}else u&16?SB(n,t,i,e,r,s):ug(t,n,r,a,s);e=o?e.projectionNext:e.next}}function Qw(n,t,e,i,r,s){gI(e,i,n.firstChild,t,r,s,!1)}function yX(n,t,e){let i=t[qr],r=bB(n,e,t),s=e.parent||t[xa],o=xB(s,e,t);SB(i,0,t,e,r,o)}function SB(n,t,e,i,r,s){let o=e[ba],u=o[xa].projection[i.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let g=u[d];ug(t,n,r,g,s)}else{let d=u,g=o[bo];j3(i)&&(d.flags|=128),gI(n,t,d,g,r,s,!0)}}function vX(n,t,e,i,r){let s=e[tp],o=uu(e);s!==o&&ug(t,n,i,s,r);for(let a=_o;a<e.length;a++){let u=e[a];Qw(u[ci],u,n,t,i,s)}}function _X(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let s=i.indexOf("-")===-1?void 0:fu.DashCase;r==null?n.removeStyle(e,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=fu.Important),n.setStyle(e,i,r,s))}}function Cw(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let s=t[e.index];s!==null&&i.push(uu(s)),ph(s)&&bX(s,i);let o=e.type;if(o&8)Cw(n,t,e.child,i);else if(o&32){let a=fI(e,t),u;for(;u=a();)i.push(u)}else if(o&16){let a=wB(t,e);if(Array.isArray(a))i.push(...a);else{let u=np(t[ba]);Cw(u[ci],u,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function bX(n,t){for(let e=_o;e<n.length;e++){let i=n[e],r=i[ci].firstChild;r!==null&&Cw(i[ci],i,r,t)}n[tp]!==n[fh]&&t.push(n[tp])}function CB(n){if(n[hg]!==null){for(let t of n[hg])t.impl.addSequence(t);n[hg].length=0}}var MB=[];function xX(n){return n[Tl]??wX(n)}function wX(n){let t=MB.pop()??Object.create(CX);return t.lView=n,t}function SX(n){n.lView[Tl]!==n&&(n.lView=null,MB.push(n))}var CX=Mn(Je({},Gm),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Eg(n.lView)},consumerOnSignalRead(){this.lView[Tl]=this}});function MX(n){let t=n[Tl]??Object.create(EX);return t.lView=n,t}var EX=Mn(Je({},Gm),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=np(n.lView);for(;t&&!EB(t[ci]);)t=np(t);t&&f3(t)},consumerOnSignalRead(){this.lView[Tl]=this}});function EB(n){return n.type!==2}function TB(n){if(n[ep]===null)return;let t=!0;for(;t;){let e=!1;for(let i of n[ep])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=e&&!!(n[ii]&8192)}}var TX=100;function AB(n,t=!0,e=0){let r=n[hh].rendererFactory,s=!1;s||r.begin?.();try{AX(n,e)}catch(o){throw t&&rX(n,o),o}finally{s||r.end?.()}}function AX(n,t){let e=y3();try{pw(!0),GA(n,t);let i=0;for(;Hw(n);){if(i===TX)throw new St(103,!1);i++,GA(n,1)}}finally{pw(e)}}function DX(n,t,e,i){if(Mg(t))return;let r=t[ii],s=!1,o=!1;zD(t);let a=!0,u=null,d=null;s||(EB(n)?(d=xX(t),u=Z0(d)):RT()===null?(a=!1,d=MX(t),u=Z0(d)):t[Tl]&&(K0(t[Tl]),t[Tl]=null));try{d3(t),r$(n.bindingStartIndex),e!==null&&vB(n,t,e,2,i);let g=(r&3)===3;if(!s)if(g){let C=n.preOrderCheckHooks;C!==null&&tw(t,C,null)}else{let C=n.preOrderHooks;C!==null&&nw(t,C,0,null),oA(t,0)}if(o||IX(t),TB(t),DB(t,0),n.contentQueries!==null&&eB(n,t),!s)if(g){let C=n.contentCheckHooks;C!==null&&tw(t,C)}else{let C=n.contentHooks;C!==null&&nw(t,C,1),oA(t,1)}PX(n,t);let v=n.components;v!==null&&RB(t,v,0);let x=n.viewQuery;if(x!==null&&VA(2,x,i),!s)if(g){let C=n.viewCheckHooks;C!==null&&tw(t,C)}else{let C=n.viewHooks;C!==null&&nw(t,C,2),oA(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[sA]){for(let C of t[sA])C();t[sA]=null}s||(CB(t),t[ii]&=-73)}catch(g){throw s||Eg(t),g}finally{d!==null&&(yx(d,u),a&&SX(d)),UD()}}function DB(n,t){for(let e=$3(n);e!==null;e=q3(e))for(let i=_o;i<e.length;i++){let r=e[i];IB(r,t)}}function IX(n){for(let t=$3(n);t!==null;t=q3(t)){if(!(t[ii]&2))continue;let e=t[gg];for(let i=0;i<e.length;i++){let r=e[i];f3(r)}}}function RX(n,t,e){gr(18);let i=hu(t,n);IB(i,e),gr(19,i[bs])}function IB(n,t){PD(n)&&GA(n,t)}function GA(n,t){let i=n[ci],r=n[ii],s=n[Tl],o=!!(t===0&&r&16);if(o||=!!(r&64&&t===0),o||=!!(r&1024),o||=!!(s?.dirty&&vx(s)),o||=!1,s&&(s.dirty=!1),n[ii]&=-9217,o)DX(i,n,i.template,n[bs]);else if(r&8192){TB(n),DB(n,1);let a=i.components;a!==null&&RB(n,a,1),CB(n)}}function RB(n,t,e){for(let i=0;i<t.length;i++)RX(n,t[i],e)}function PX(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)ip(~r);else{let s=r,o=e[++i],a=e[++i];o$(o,s);let u=t[s];gr(24,u),a(2,u),gr(25,u)}}}finally{ip(-1)}}function yI(n,t){let e=y3()?64:1088;for(n[hh].changeDetectionScheduler?.notify(t);n;){n[ii]|=e;let i=np(n);if(fw(n)&&!i)return n;n=i}return null}function PB(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function kB(n,t){let e=_o+t;if(e<n.length)return n[e]}function wv(n,t,e,i=!0){let r=t[ci];if(kX(r,t,n,e),i){let o=WA(e,n),a=t[qr],u=a.parentNode(n[tp]);u!==null&&uX(r,n[xa],a,t,u,o)}let s=t[pg];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function LB(n,t){let e=dv(n,t);return e!==void 0&&Zw(e[ci],e),e}function dv(n,t){if(n.length<=_o)return;let e=_o+t,i=n[e];if(i){let r=i[Jf];r!==null&&r!==n&&mI(r,i),t>0&&(n[e-1][_c]=i[_c]);let s=cw(n,_o+t);cX(i[ci],i);let o=s[dh];o!==null&&o.detachView(s[ci]),i[bo]=null,i[_c]=null,i[ii]&=-129}return i}function kX(n,t,e,i){let r=_o+i,s=e.length;i>0&&(e[r-1][_c]=t),i<s-_o?(t[_c]=e[r],YF(e,_o+i,t)):(e.push(t),t[_c]=null),t[bo]=e;let o=t[Jf];o!==null&&e!==o&&NB(o,t);let a=t[dh];a!==null&&a.insertView(n),EA(t),t[ii]|=128}function NB(n,t){let e=n[gg],i=t[bo];if(Td(i))n[ii]|=2;else{let r=i[bo][ba];t[ba]!==r&&(n[ii]|=2)}e===null?n[gg]=[t]:e.push(t)}var fv=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,e=t[ci];return Cw(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i}get context(){return this._lView[bs]}set context(t){this._lView[bs]=t}get destroyed(){return Mg(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[bo];if(ph(t)){let e=t[dw],i=e?e.indexOf(this):-1;i>-1&&(dv(t,i),cw(e,i))}this._attachedToViewContainer=!1}Zw(this._lView[ci],this._lView)}onDestroy(t){p3(this._lView,t)}markForCheck(){yI(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ii]&=-129}reattach(){EA(this._lView),this._lView[ii]|=128}detectChanges(){this._lView[ii]|=1024,AB(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new St(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=fw(this._lView),e=this._lView[Jf];e!==null&&!t&&mI(e,this._lView),_B(this._lView[ci],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new St(902,!1);this._appRef=t;let e=fw(this._lView),i=this._lView[Jf];i!==null&&!e&&NB(i,this._lView),EA(this._lView)}};var Vs=(()=>{class n{static __NG_ELEMENT_ID__=OX}return n})(),LX=Vs,NX=class extends LX{_declarationLView;_declarationTContainer;elementRef;constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=xv(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new fv(r)}};function OX(){return Jw(qo(),Un())}function Jw(n,t){return n.type&4?new NX(t,n,Ag(n,t)):null}function Sv(n,t,e,i,r){let s=n.data[t];if(s===null)s=FX(n,t,e,i,r),s$()&&(s.flags|=32);else if(s.type&64){s.type=e,s.value=i,s.attrs=r;let o=t$();s.injectorIndex=o===null?-1:o.injectorIndex}return cp(s,!0),s}function FX(n,t,e,i,r){let s=g3(),o=OD(),a=o?s:s&&s.parent,u=n.data[t]=VX(n,a,e,t,i,r);return BX(n,u,s,o),u}function BX(n,t,e,i){n.firstChild===null&&(n.firstChild=t),e!==null&&(i?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function VX(n,t,e,i,r,s){let o=t?t.injectorIndex:-1,a=0;return m3()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Y_e=new RegExp(`^(\\d+)*(${$$}|${G$})*(.*)`);var zX=()=>null;function _g(n,t){return zX(n,t)}var UX=class{},OB=class{},$A=class{resolveComponentFactory(t){throw Error(`No component factory found for ${va(t)}.`)}},eS=class{static NULL=new $A},Dd=class{},Za=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>HX()}return n})();function HX(){let n=Un(),t=qo(),e=hu(t.index,n);return(Td(e)?e:n)[qr]}var jX=(()=>{class n{static \u0275prov=Vt({token:n,providedIn:"root",factory:()=>null})}return n})();var cA={},qA=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=Fw(i);let r=this.injector.get(t,cA,i);return r!==cA||e===cA?r:this.parentInjector.get(t,e,i)}};function XA(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,s=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")s=a;else if(s==1)r=vA(r,a);else if(s==2){let u=a,d=t[++o];i=vA(i,u+": "+d+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function Nn(n,t=xi.Default){let e=Un();if(e===null)return $n(n,t);let i=qo();return P3(i,e,Wo(n),t)}function FB(){let n="invalid";throw new Error(n)}function vI(n,t,e,i,r){let s=i===null?null:{"":-1},o=r(n,e);if(o!==null){let a,u=null,d=null,g=GX(o);g===null?a=o:[a,u,d]=g,XX(n,t,e,a,s,u,d)}s!==null&&i!==null&&WX(e,i,s)}function WX(n,t,e){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let s=e[t[r+1]];if(s==null)throw new St(-301,!1);i.push(t[r],s)}}function GX(n){let t=null,e=!1;for(let o=0;o<n.length;o++){let a=n[o];if(o===0&&cu(a)&&(t=a),a.findHostDirectiveDefs!==null){e=!0;break}}if(!e)return null;let i=null,r=null,s=null;for(let o of n)o.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,s??=new Map,$X(o,i,s,r)),o===t&&(i??=[],i.push(o));return i!==null?(i.push(...t===null?n:n.slice(1)),[i,r,s]):null}function $X(n,t,e,i){let r=t.length;n.findHostDirectiveDefs(n,t,i),e.set(n,[r,t.length-1])}function qX(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function XX(n,t,e,i,r,s,o){let a=i.length,u=!1;for(let x=0;x<a;x++){let C=i[x];!u&&cu(C)&&(u=!0,qX(n,e,x)),IA(vw(e,t),n,C.type)}eY(e,n.data.length,a);for(let x=0;x<a;x++){let C=i[x];C.providersResolver&&C.providersResolver(C)}let d=!1,g=!1,v=gB(n,t,a,null);a>0&&(e.directiveToIndex=new Map);for(let x=0;x<a;x++){let C=i[x];if(e.mergedAttrs=yg(e.mergedAttrs,C.hostAttrs),ZX(n,e,t,v,C),JX(v,C,r),o!==null&&o.has(C)){let[O,N]=o.get(C);e.directiveToIndex.set(C.type,[v,O+e.directiveStart,N+e.directiveStart])}else(s===null||!s.has(C))&&e.directiveToIndex.set(C.type,v);C.contentQueries!==null&&(e.flags|=4),(C.hostBindings!==null||C.hostAttrs!==null||C.hostVars!==0)&&(e.flags|=64);let A=C.type.prototype;!d&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),d=!0),!g&&(A.ngOnChanges||A.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),g=!0),v++}YX(n,e,s)}function YX(n,t,e){for(let i=t.directiveStart;i<t.directiveEnd;i++){let r=n.data[i];if(e===null||!e.has(r))pF(0,t,r,i),pF(1,t,r,i),gF(t,i,!1);else{let s=e.get(r);mF(0,t,s,i),mF(1,t,s,i),gF(t,i,!0)}}}function pF(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o;n===0?o=t.inputs??={}:o=t.outputs??={},o[s]??=[],o[s].push(i),BB(t,s)}}function mF(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o=r[s],a;n===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[o]??=[],a[o].push(i,s),BB(t,o)}}function BB(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function gF(n,t,e){let{attrs:i,inputs:r,hostDirectiveInputs:s}=n;if(i===null||!e&&r===null||e&&s===null||rI(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<i.length;){let u=i[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!e&&r.hasOwnProperty(u)){let d=r[u];for(let g of d)if(g===t){o??=[],o.push(u,i[a+1]);break}}else if(e&&s.hasOwnProperty(u)){let d=s[u];for(let g=0;g<d.length;g+=2)if(d[g]===t){o??=[],o.push(d[g+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function ZX(n,t,e,i,r){n.data[i]=r;let s=r.factory||(r.factory=Zf(r.type,!0)),o=new rp(s,cu(r),Nn);n.blueprint[i]=o,e[i]=o,KX(n,t,i,gB(n,e,r.hostVars,Ya),r)}function KX(n,t,e,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~t.index;QX(o)!=a&&o.push(a),o.push(e,i,s)}}function QX(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function JX(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;cu(t)&&(e[""]=n)}}function eY(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function VB(n,t,e,i,r,s,o,a){let u=t.consts,d=Ad(u,o),g=Sv(t,n,2,i,d);return s&&vI(t,e,g,Ad(u,a),r),g.mergedAttrs=yg(g.mergedAttrs,g.attrs),g.attrs!==null&&XA(g,g.attrs,!1),g.mergedAttrs!==null&&XA(g,g.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,g),g}function zB(n,t){HD(n,t),DD(t)&&n.queries.elementEnd(t)}var Mw=class extends eS{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=Qf(t);return new bg(e,this.ngModule)}};function tY(n){return Object.keys(n).map(t=>{let[e,i,r]=n[t],s={propName:e,templateName:t,isSignal:(i&Xw.SignalBased)!==0};return r&&(s.transform=r),s})}function nY(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function iY(n,t,e){let i=t instanceof _a?t:t?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new qA(e,i):e}function rY(n){let t=n.get(Dd,null);if(t===null)throw new St(407,!1);let e=n.get(jX,null),i=n.get(sp,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:i}}function sY(n,t){let e=(n.selectors[0][0]||"div").toLowerCase();return dB(t,e,e==="svg"?u3:e==="math"?j7:null)}var bg=class extends OB{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=tY(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=nY(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=Oq(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,i,r){gr(22);let s=di(null);try{let o=this.componentDef,a=i?["ng-version","19.2.14"]:Fq(this.componentDef.selectors[0]),u=sI(0,null,null,1,0,null,null,null,null,[a],null),d=iY(o,r||this.ngModule,t),g=rY(d),v=g.rendererFactory.createRenderer(null,o),x=i?qq(v,i,o.encapsulation,d):sY(o,v),C=oI(null,u,null,512|mB(o),null,null,g,v,d,null,J3(x,d,!0));C[Fs]=x,zD(C);let A=null;try{let O=VB(Fs,u,C,"#host",()=>[this.componentDef],!0,0);x&&(pB(v,x,O),Dg(x,C)),Yw(u,C,O),tI(u,O,C),zB(u,O),e!==void 0&&oY(O,this.ngContentSelectors,e),A=hu(O.index,C),C[bs]=A[bs],dI(u,C,null)}catch(O){throw A!==null&&OA(A),OA(C),O}finally{gr(23),UD()}return new YA(this.componentType,C)}finally{di(s)}}},YA=class extends UX{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e){super(),this._rootLView=e,this._tNode=ID(e[ci],Fs),this.location=Ag(this._tNode,e),this.instance=hu(this._tNode.index,e)[bs],this.hostView=this.changeDetectorRef=new fv(e,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let r=this._rootLView,s=hI(i,r[ci],r,t,e);this.previousInputValues.set(t,e);let o=hu(i.index,r);yI(o,1)}get injector(){return new Xf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function oY(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let s=e[r];i.push(s!=null&&s.length?Array.from(s):null)}}var wr=(()=>{class n{static __NG_ELEMENT_ID__=aY}return n})();function aY(){let n=qo();return HB(n,Un())}var lY=wr,UB=class extends lY{_lContainer;_hostTNode;_hostLView;constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Ag(this._hostTNode,this._hostLView)}get injector(){return new Xf(this._hostTNode,this._hostLView)}get parentInjector(){let t=jD(this._hostTNode,this._hostLView);if(E3(t)){let e=gw(t,this._hostLView),i=mw(t),r=e[ci].data[i+8];return new Xf(r,e)}else return new Xf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=yF(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-_o}createEmbeddedView(t,e,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=_g(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},s,o);return this.insertImpl(a,r,vg(this._hostTNode,o)),a}createComponent(t,e,i,r,s){let o=t&&!V7(t),a;if(o)a=e;else{let A=e||{};a=A.index,i=A.injector,r=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let u=o?t:new bg(Qf(t)),d=i||this.parentInjector;if(!s&&u.ngModule==null){let O=(o?d:this.parentInjector).get(_a,null);O&&(s=O)}let g=Qf(u.componentType??{}),v=_g(this._lContainer,g?.id??null),x=v?.firstChild??null,C=u.create(d,r,x,s);return this.insertImpl(C.hostView,a,vg(this._hostTNode,v)),C}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if($7(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let u=r[bo],d=new UB(u,u[xa],u[bo]);d.detach(d.indexOf(t))}}let s=this._adjustIndex(e),o=this._lContainer;return wv(o,r,s,i),t.attachToViewContainerRef(),YF(uA(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=yF(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=dv(this._lContainer,e);i&&(cw(uA(this._lContainer),e),Zw(i[ci],i))}detach(t){let e=this._adjustIndex(t,-1),i=dv(this._lContainer,e);return i&&cw(uA(this._lContainer),e)!=null?new fv(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function yF(n){return n[dw]}function uA(n){return n[dw]||(n[dw]=[])}function HB(n,t){let e,i=t[n.index];return ph(i)?e=i:(e=PB(i,t,null,n),t[n.index]=e,aI(t,e)),uY(e,t,n,i),new UB(e,n,t)}function cY(n,t){let e=n[qr],i=e.createComment(""),r=mu(t,n),s=e.parentNode(r);return Sw(e,s,i,e.nextSibling(r),!1),i}var uY=fY,hY=()=>!1;function dY(n,t,e){return hY(n,t,e)}function fY(n,t,e,i){if(n[tp])return;let r;e.type&8?r=uu(i):r=cY(t,e),n[tp]=r}var ZA=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},KA=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let s=0;s<i;s++){let o=e.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)_I(t,e).matches!==null&&this.queries[e].setDirty()}},Ew=class{flags;read;predicate;constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=xY(t):this.predicate=t}},QA=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,s=this.getByIndex(i).embeddedTView(t,r);s&&(s.indexInDeclarationView=i,e!==null?e.push(s):e=[s])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},JA=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(t,e,pY(e,s)),this.matchTNodeWithReadOption(t,e,iw(e,t,s,!1,!1))}else i===Vs?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,iw(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Rr||r===wr||r===Vs&&e.type&4)this.addMatch(e.index,-2);else{let s=iw(e,t,r,!1,!1);s!==null&&this.addMatch(e.index,s)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function pY(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function mY(n,t){return n.type&11?Ag(n,t):n.type&4?Jw(n,t):null}function gY(n,t,e,i){return e===-1?mY(t,n):e===-2?yY(n,t,i):uv(n,n[ci],e,t)}function yY(n,t,e){if(e===Rr)return Ag(t,n);if(e===Vs)return Jw(t,n);if(e===wr)return HB(t,n)}function jB(n,t,e,i){let r=t[dh].queries[i];if(r.matches===null){let s=n.data,o=e.matches,a=[];for(let u=0;o!==null&&u<o.length;u+=2){let d=o[u];if(d<0)a.push(null);else{let g=s[d];a.push(gY(t,g,o[u+1],e.metadata.read))}}r.matches=a}return r.matches}function eD(n,t,e,i){let r=n.queries.getByIndex(e),s=r.matches;if(s!==null){let o=jB(n,t,r,e);for(let a=0;a<s.length;a+=2){let u=s[a];if(u>0)i.push(o[a/2]);else{let d=s[a+1],g=t[-u];for(let v=_o;v<g.length;v++){let x=g[v];x[Jf]===x[bo]&&eD(x[ci],x,d,i)}if(g[gg]!==null){let v=g[gg];for(let x=0;x<v.length;x++){let C=v[x];eD(C[ci],C,d,i)}}}}}return i}function vY(n,t){return n[dh].queries[t].queryList}function WB(n,t,e){let i=new NA((e&4)===4);return Y7(n,t,i,i.destroy),(t[dh]??=new KA).queries.push(new ZA(i))-1}function _Y(n,t,e){let i=Xr();return i.firstCreatePass&&(GB(i,new Ew(n,t,e),-1),(t&2)===2&&(i.staticViewQueries=!0)),WB(i,Un(),t)}function bY(n,t,e,i){let r=Xr();if(r.firstCreatePass){let s=qo();GB(r,new Ew(t,e,i),s.index),wY(r,n),(e&2)===2&&(r.staticContentQueries=!0)}return WB(r,Un(),e)}function xY(n){return n.split(",").map(t=>t.trim())}function GB(n,t,e){n.queries===null&&(n.queries=new QA),n.queries.track(new JA(t,e))}function wY(n,t){let e=n.contentQueries||(n.contentQueries=[]),i=e.length?e[e.length-1]:-1;t!==i&&e.push(n.queries.length-1,t)}function _I(n,t){return n.queries.getByIndex(t)}function SY(n,t){let e=n[ci],i=_I(e,t);return i.crossesNgTemplate?eD(e,n,t,[]):jB(e,n,i,t)}function $B(n,t){let e=Object.create(NF),i=new xw;e.value=n;function r(){return $m(e),vF(e.value),e.value}return r[$a]=e,r.asReadonly=U3.bind(r),r.set=s=>{e.equal(e.value,s)||(qm(e,s),i.emit(s))},r.update=s=>{vF(e.value),r.set(s(e.value))},r.subscribe=i.subscribe.bind(i),r.destroyRef=i.destroyRef,r}function vF(n){if(n===Nw)throw new St(952,!1)}function _F(n,t){return $B(n,t)}function CY(n){return $B(Nw,n)}var qB=(_F.required=CY,_F);var op=class{},bI=class{};function XB(n,t){return new Tw(n,t??null,[])}var Tw=class extends op{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Mw(this);constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e;let s=QF(t);this._bootstrapComponents=cB(s.bootstrap),this._r3Injector=N3(t,e,[{provide:op,useValue:this},{provide:eS,useValue:this.componentFactoryResolver},...i],va(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},tD=class extends bI{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Tw(this.moduleType,t,[])}};var Aw=class extends op{injector;componentFactoryResolver=new Mw(this);instance=null;constructor(t){super();let e=new lv([...t.providers,{provide:op,useValue:this},{provide:eS,useValue:this.componentFactoryResolver}],t.parent||AD(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Cv(n,t,e=null){return new Aw({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var MY=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=JF(!1,e.type),r=i.length>0?Cv([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Vt({token:n,providedIn:"environment",factory:()=>new n($n(_a))})}return n})();function _t(n){return gv(()=>{let t=YB(n),e=Mn(Je({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===W3.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(MY).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||du.Emulated,styles:n.styles||ya,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&yu("NgStandalone"),ZB(e);let i=n.dependencies;return e.directiveDefs=bF(i,!1),e.pipeDefs=bF(i,!0),e.id=IY(e),e})}function EY(n){return Qf(n)||T7(n)}function TY(n){return n!==null}function Xo(n){return gv(()=>({type:n.type,bootstrap:n.bootstrap||ya,declarations:n.declarations||ya,imports:n.imports||ya,exports:n.exports||ya,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function AY(n,t){if(n==null)return Kf;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a,u;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s,u=r[3]||null):(s=r,o=r,a=Xw.None,u=null),e[s]=[i,a,u],t[s]=o}return e}function DY(n){if(n==null)return Kf;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function Xn(n){return gv(()=>{let t=YB(n);return ZB(t),t})}function xI(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function YB(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||Kf,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ya,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:AY(n.inputs,t),outputs:DY(n.outputs),debugInfo:null}}function ZB(n){n.features?.forEach(t=>t(n))}function bF(n,t){if(!n)return null;let e=t?A7:EY;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter(TY)}function IY(n){let t=0,e=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of i.join("|"))t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function RY(n){return Object.getPrototypeOf(n.prototype).constructor}function si(n){let t=RY(n.type),e=!0,i=[n];for(;t;){let r;if(cu(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new St(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let o=n;o.inputs=hA(n.inputs),o.declaredInputs=hA(n.declaredInputs),o.outputs=hA(n.outputs);let a=r.hostBindings;a&&OY(n,a);let u=r.viewQuery,d=r.contentQueries;if(u&&LY(n,u),d&&NY(n,d),PY(n,r),s7(n.outputs,r.outputs),cu(r)&&r.data.animation){let g=n.data;g.animation=(g.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===si&&(e=!1)}}t=Object.getPrototypeOf(t)}kY(i)}function PY(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e])}}function kY(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=yg(r.hostAttrs,e=yg(e,r.hostAttrs))}}function hA(n){return n===Kf?{}:n===ya?[]:n}function LY(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function NY(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,s)=>{t(i,r,s),e(i,r,s)}:n.contentQueries=t}function OY(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function KB(n){return wI(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function FY(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function wI(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function dp(n,t,e){return n[t]=e}function QB(n,t){return n[t]}function Go(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function pv(n,t,e,i){let r=Go(n,t,e);return Go(n,t+1,i)||r}function BY(n,t,e,i,r){let s=pv(n,t,e,i);return Go(n,t+2,r)||s}function JB(n,t,e,i,r,s){let o=pv(n,t,e,i);return pv(n,t+2,r,s)||o}function VY(n,t,e,i,r,s,o,a,u){let d=t.consts,g=Sv(t,n,4,o||null,a||null);ND()&&vI(t,e,g,Ad(d,u),uI),g.mergedAttrs=yg(g.mergedAttrs,g.attrs),HD(t,g);let v=g.tView=sI(2,g,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,d,null);return t.queries!==null&&(t.queries.template(t,g),v.queries=t.queries.embeddedTView(g)),g}function Dw(n,t,e,i,r,s,o,a,u,d){let g=e+Fs,v=t.firstCreatePass?VY(g,t,n,i,r,s,o,a,u):t.data[g];cp(v,!1);let x=zY(t,n,v,e);Ww()&&Kw(t,n,x,v),Dg(x,n);let C=PB(x,n,x,v);return n[g]=C,aI(n,C),dY(C,v,n),Uw(v)&&Yw(t,n,v),u!=null&&lI(n,v,d),v}function It(n,t,e,i,r,s,o,a){let u=Un(),d=Xr(),g=Ad(d.consts,s);return Dw(u,d,n,t,e,i,r,g,o,a),It}var zY=UY;function UY(n,t,e,i){return Gw(!0),t[qr].createComment("")}var eV=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var tV=new wn("");var nV=(()=>{class n{static \u0275prov=Vt({token:n,providedIn:"root",factory:()=>new nD})}return n})(),nD=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let e=t.zone,i=this.queues.get(e);i.has(t)&&(i.delete(t),this.queuedEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(t)||(this.queuedEffectCount++,i.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}};function Id(n){return!!n&&typeof n.then=="function"}function SI(n){return!!n&&typeof n.subscribe=="function"}var iV=new wn("");function CI(n){return Bw([{provide:iV,multi:!0,useValue:n}])}var rV=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=ze(iV,{optional:!0})??[];injector=ze(Bs);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let s=Al(this.injector,r);if(Id(s))e.push(s);else if(SI(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});e.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tS=new wn("");function HY(){OT(()=>{throw new St(600,!1)})}function jY(n){return n.isBoundToModule}var WY=10;var ap=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=ze(O$);afterRenderManager=ze(Q3);zonelessEnabled=ze(WD);rootEffectScheduler=ze(nV);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Jr;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=ze(Tg).hasPendingTasks.pipe(Ei(e=>!e));constructor(){ze(Rg,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=ze(_a);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){return this.bootstrapImpl(e,i)}bootstrapImpl(e,i,r=Bs.NULL){gr(10);let s=e instanceof OB;if(!this._injector.get(rV).done){let C="";throw new St(405,C)}let a;s?a=e:a=this._injector.get(eS).resolveComponentFactory(e),this.componentTypes.push(a.componentType);let u=jY(a)?void 0:this._injector.get(op),d=i||a.selector,g=a.create(r,[],d,u),v=g.location.nativeElement,x=g.injector.get(tV,null);return x?.registerApplication(v),g.onDestroy(()=>{this.detachView(g.hostView),rw(this.components,g),x?.unregisterApplication(v)}),this._loadComponent(g),gr(11,g),g}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){gr(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(QD.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new St(101,!1);let e=di(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,di(e),this.afterTick.next(),gr(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Dd,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<WY;)gr(14),this.synchronizeOnce(),gr(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)GY(i,r,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Hw(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;rw(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(tS,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>rw(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new St(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rw(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function GY(n,t,e,i){if(!e&&!Hw(n))return;AB(n,t,e&&!i?0:1)}function wo(n,t,e,i){let r=Un(),s=up();if(Go(r,s,t)){let o=Xr(),a=jw();tX(a,r,n,t,e,i)}return wo}function sV(n,t,e,i){return Go(n,up(),e)?t+Yf(e)+i:Ya}function $Y(n,t,e,i,r,s){let o=i$(),a=pv(n,o,e,r);return BD(2),a?t+Yf(e)+i+Yf(r)+s:Ya}function Jx(n,t){return n<<17|t<<2}function lp(n){return n>>17&32767}function qY(n){return(n&2)==2}function XY(n,t){return n&131071|t<<17}function iD(n){return n|2}function xg(n){return(n&131068)>>2}function dA(n,t){return n&-131069|t<<2}function YY(n){return(n&1)===1}function rD(n){return n|1}function ZY(n,t,e,i,r,s){let o=s?t.classBindings:t.styleBindings,a=lp(o),u=xg(o);n[i]=e;let d=!1,g;if(Array.isArray(e)){let v=e;g=v[1],(g===null||vv(v,g)>0)&&(d=!0)}else g=e;if(r)if(u!==0){let x=lp(n[a+1]);n[i+1]=Jx(x,a),x!==0&&(n[x+1]=dA(n[x+1],i)),n[a+1]=XY(n[a+1],i)}else n[i+1]=Jx(a,0),a!==0&&(n[a+1]=dA(n[a+1],i)),a=i;else n[i+1]=Jx(u,0),a===0?a=i:n[u+1]=dA(n[u+1],i),u=i;d&&(n[i+1]=iD(n[i+1])),xF(n,g,i,!0),xF(n,g,i,!1),KY(t,g,n,i,s),o=Jx(a,u),s?t.classBindings=o:t.styleBindings=o}function KY(n,t,e,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof t=="string"&&vv(s,t)>=0&&(e[i+1]=rD(e[i+1]))}function xF(n,t,e,i){let r=n[e+1],s=t===null,o=i?lp(r):xg(r),a=!1;for(;o!==0&&(a===!1||s);){let u=n[o],d=n[o+1];QY(u,t)&&(a=!0,n[o+1]=i?rD(d):iD(d)),o=i?lp(d):xg(d)}a&&(n[e+1]=i?iD(r):rD(r))}function QY(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?vv(n,t)>=0:!1}var Os={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function oV(n){return n.substring(Os.key,Os.keyEnd)}function JY(n){return n.substring(Os.value,Os.valueEnd)}function eZ(n){return cV(n),aV(n,wg(n,0,Os.textEnd))}function aV(n,t){let e=Os.textEnd;return e===t?-1:(t=Os.keyEnd=nZ(n,Os.key=t,e),wg(n,t,e))}function tZ(n){return cV(n),lV(n,wg(n,0,Os.textEnd))}function lV(n,t){let e=Os.textEnd,i=Os.key=wg(n,t,e);return e===i?-1:(i=Os.keyEnd=iZ(n,i,e),i=wF(n,i,e,58),i=Os.value=wg(n,i,e),i=Os.valueEnd=rZ(n,i,e),wF(n,i,e,59))}function cV(n){Os.key=0,Os.keyEnd=0,Os.value=0,Os.valueEnd=0,Os.textEnd=n.length}function wg(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function nZ(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function iZ(n,t,e){let i;for(;t<e&&((i=n.charCodeAt(t))===45||i===95||(i&-33)>=65&&(i&-33)<=90||i>=48&&i<=57);)t++;return t}function wF(n,t,e,i){return t=wg(n,t,e),t<e&&t++,t}function rZ(n,t,e){let i=-1,r=-1,s=-1,o=t,a=o;for(;o<e;){let u=n.charCodeAt(o++);if(u===59)return a;u===34||u===39?a=o=SF(n,u,o,e):t===o-4&&s===85&&r===82&&i===76&&u===40?a=o=SF(n,41,o,e):u>32&&(a=o),s=r,r=i,i=u&-33}return a}function SF(n,t,e,i){let r=-1,s=e;for(;s<i;){let o=n.charCodeAt(s++);if(o==t&&r!==92)return s;o==92&&r===92?r=0:r=o}throw new Error}function Ne(n,t,e){let i=Un(),r=up();if(Go(i,r,t)){let s=Xr(),o=jw();cI(s,o,i,n,t,i[qr],e,!1)}return Ne}function sD(n,t,e,i,r){hI(t,n,e,r?"class":"style",i)}function Pr(n,t,e){return dV(n,t,e,!1),Pr}function Si(n,t){return dV(n,t,null,!0),Si}function uV(n){MI(mV,sZ,n,!1)}function sZ(n,t){for(let e=tZ(t);e>=0;e=lV(t,e))mV(n,oV(t),JY(t))}function vu(n){MI(hZ,hV,n,!0)}function hV(n,t){for(let e=eZ(t);e>=0;e=aV(t,e))yv(n,oV(t),!0)}function dV(n,t,e,i){let r=Un(),s=Xr(),o=BD(2);if(s.firstUpdatePass&&pV(s,n,o,i),t!==Ya&&Go(r,o,t)){let a=s.data[gh()];gV(s,a,r,r[qr],n,r[o+1]=fZ(t,e),i,o)}}function MI(n,t,e,i){let r=Xr(),s=BD(2);r.firstUpdatePass&&pV(r,null,s,i);let o=Un();if(e!==Ya&&Go(o,s,e)){let a=r.data[gh()];if(yV(a,i)&&!fV(r,s)){let u=i?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(e=vA(u,e||"")),sD(r,a,o,e,i)}else dZ(r,a,o,o[qr],o[s+1],o[s+1]=uZ(n,t,e),i,s)}}function fV(n,t){return t>=n.expandoStartIndex}function pV(n,t,e,i){let r=n.data;if(r[e+1]===null){let s=r[gh()],o=fV(n,e);yV(s,i)&&t===null&&!o&&(t=!1),t=oZ(r,s,t,i),ZY(r,s,t,e,o,i)}}function oZ(n,t,e,i){let r=l$(n),s=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=fA(null,n,t,e,i),e=mv(e,t.attrs,i),s=null);else{let o=t.directiveStylingLast;if(o===-1||n[o]!==r)if(e=fA(r,n,t,e,i),s===null){let u=aZ(n,t,i);u!==void 0&&Array.isArray(u)&&(u=fA(null,n,t,u[1],i),u=mv(u,t.attrs,i),lZ(n,t,i,u))}else s=cZ(n,t,i)}return s!==void 0&&(i?t.residualClasses=s:t.residualStyles=s),e}function aZ(n,t,e){let i=e?t.classBindings:t.styleBindings;if(xg(i)!==0)return n[lp(i)]}function lZ(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[lp(r)]=i}function cZ(n,t,e){let i,r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=mv(i,o,e)}return mv(i,t.attrs,e)}function fA(n,t,e,i,r){let s=null,o=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<o&&(s=t[a],i=mv(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(e.directiveStylingLast=a),i}function mv(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let s=0;s<t.length;s++){let o=t[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),yv(n,o,e?!0:t[++s]))}return n===void 0?null:n}function uZ(n,t,e){if(e==null||e==="")return ya;let i=[],r=Pg(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else typeof r=="string"&&t(i,r);return i}function mV(n,t,e){yv(n,t,Pg(e))}function hZ(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&yv(n,i,e)}function dZ(n,t,e,i,r,s,o,a){r===Ya&&(r=ya);let u=0,d=0,g=0<r.length?r[0]:null,v=0<s.length?s[0]:null;for(;g!==null||v!==null;){let x=u<r.length?r[u+1]:void 0,C=d<s.length?s[d+1]:void 0,A=null,O;g===v?(u+=2,d+=2,x!==C&&(A=v,O=C)):v===null||g!==null&&g<v?(u+=2,A=g):(d+=2,A=v,O=C),A!==null&&gV(n,t,e,i,A,O,o,a),g=u<r.length?r[u]:null,v=d<s.length?s[d]:null}}function gV(n,t,e,i,r,s,o,a){if(!(t.type&3))return;let u=n.data,d=u[a+1],g=YY(d)?CF(u,t,e,r,xg(d),o):void 0;if(!Iw(g)){Iw(s)||qY(d)&&(s=CF(u,null,e,r,a,o));let v=h3(gh(),e);_X(i,o,v,r,s)}}function CF(n,t,e,i,r,s){let o=t===null,a;for(;r>0;){let u=n[r],d=Array.isArray(u),g=d?u[1]:u,v=g===null,x=e[r+1];x===Ya&&(x=v?ya:void 0);let C=v?iA(x,i):g===i?x:void 0;if(d&&!Iw(C)&&(C=iA(u,i)),Iw(C)&&(a=C,o))return a;let A=n[r+1];r=o?lp(A):xg(A)}if(t!==null){let u=s?t.residualClasses:t.residualStyles;u!=null&&(a=iA(u,i))}return a}function Iw(n){return n!==void 0}function fZ(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=va(Pg(n)))),n}function yV(n,t){return(n.flags&(t?8:16))!==0}function vV(n,t,e){let i=Un(),r=sV(i,n,t,e);MI(yv,hV,r,!0)}function EI(){return Un()[ba][bs]}var oD=class{destroy(t){}updateValue(t,e){}swap(t,e){let i=Math.min(t,e),r=Math.max(t,e),s=this.detach(r);if(r-i>1){let o=this.detach(i);this.attach(i,s),this.attach(r,o)}else this.attach(i,s)}move(t,e){this.attach(e,this.detach(t))}};function pA(n,t,e,i,r){return n===e&&Object.is(t,i)?1:Object.is(r(n,t),r(e,i))?-1:0}function pZ(n,t,e){let i,r,s=0,o=n.length-1,a=void 0;if(Array.isArray(t)){let u=t.length-1;for(;s<=o&&s<=u;){let d=n.at(s),g=t[s],v=pA(s,d,s,g,e);if(v!==0){v<0&&n.updateValue(s,g),s++;continue}let x=n.at(o),C=t[u],A=pA(o,x,u,C,e);if(A!==0){A<0&&n.updateValue(o,C),o--,u--;continue}let O=e(s,d),N=e(o,x),T=e(s,g);if(Object.is(T,N)){let j=e(u,C);Object.is(j,O)?(n.swap(s,o),n.updateValue(o,C),u--,o--):n.move(o,s),n.updateValue(s,g),s++;continue}if(i??=new Rw,r??=EF(n,s,o,e),aD(n,i,s,T))n.updateValue(s,g),s++,o++;else if(r.has(T))i.set(O,n.detach(s)),o--;else{let j=n.create(s,t[s]);n.attach(s,j),s++,o++}}for(;s<=u;)MF(n,i,e,s,t[s]),s++}else if(t!=null){let u=t[Symbol.iterator](),d=u.next();for(;!d.done&&s<=o;){let g=n.at(s),v=d.value,x=pA(s,g,s,v,e);if(x!==0)x<0&&n.updateValue(s,v),s++,d=u.next();else{i??=new Rw,r??=EF(n,s,o,e);let C=e(s,v);if(aD(n,i,s,C))n.updateValue(s,v),s++,o++,d=u.next();else if(!r.has(C))n.attach(s,n.create(s,v)),s++,o++,d=u.next();else{let A=e(s,g);i.set(A,n.detach(s)),o--}}}for(;!d.done;)MF(n,i,e,n.length,d.value),d=u.next()}for(;s<=o;)n.destroy(n.detach(o--));i?.forEach(u=>{n.destroy(u)})}function aD(n,t,e,i){return t!==void 0&&t.has(i)?(n.attach(e,t.get(i)),t.delete(i),!0):!1}function MF(n,t,e,i,r){if(aD(n,t,i,e(i,r)))n.updateValue(i,r);else{let s=n.create(i,r);n.attach(i,s)}}function EF(n,t,e,i){let r=new Set;for(let s=t;s<=e;s++)r.add(i(s,n.at(s)));return r}var Rw=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let e=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let i=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,i]of this.kvMap)if(t(i,e),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),t(i,e)}}};function Kt(n,t){yu("NgControlFlow");let e=Un(),i=up(),r=e[i]!==Ya?e[i]:-1,s=r!==-1?Pw(e,Fs+r):void 0,o=0;if(Go(e,i,n)){let a=di(null);try{if(s!==void 0&&LB(s,o),n!==-1){let u=Fs+n,d=Pw(e,u),g=hD(e[ci],u),v=_g(d,g.tView.ssrId),x=xv(e,g,t,{dehydratedView:v});wv(d,x,o,vg(g,v))}}finally{di(a)}}else if(s!==void 0){let a=kB(s,o);a!==void 0&&(a[bs]=t)}}var lD=class{lContainer;$implicit;$index;constructor(t,e,i){this.lContainer=t,this.$implicit=e,this.$index=i}get $count(){return this.lContainer.length-_o}};function _V(n){return n}function Mv(n,t){return t}var cD=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,e,i){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=i}};function xs(n,t,e,i,r,s,o,a,u,d,g,v,x){yu("NgControlFlow");let C=Un(),A=Xr(),O=u!==void 0,N=Un(),T=a?o.bind(N[ba][bs]):o,j=new cD(O,T);N[Fs+n]=j,Dw(C,A,n+1,t,e,i,r,Ad(A.consts,s)),O&&Dw(C,A,n+2,u,d,g,v,Ad(A.consts,x))}var uD=class extends oD{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,e,i){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=i}get length(){return this.lContainer.length-_o}at(t){return this.getLView(t)[bs].$implicit}attach(t,e){let i=e[pg];this.needsIndexUpdate||=t!==this.length,wv(this.lContainer,e,t,vg(this.templateTNode,i))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,mZ(this.lContainer,t)}create(t,e){let i=_g(this.lContainer,this.templateTNode.tView.ssrId),r=xv(this.hostLView,this.templateTNode,new lD(this.lContainer,e,t),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(t){Zw(t[ci],t),this.operationsCounter?.recordDestroy()}updateValue(t,e){this.getLView(t)[bs].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[bs].$index=t}getLView(t){return gZ(this.lContainer,t)}};function ws(n){let t=di(null),e=gh();try{let i=Un(),r=i[ci],s=i[e],o=e+1,a=Pw(i,o);if(s.liveCollection===void 0){let d=hD(r,o);s.liveCollection=new uD(a,i,d)}else s.liveCollection.reset();let u=s.liveCollection;if(pZ(u,n,s.trackByFn),u.updateIndexes(),s.hasEmptyBlock){let d=up(),g=u.length===0;if(Go(i,d,g)){let v=e+2,x=Pw(i,v);if(g){let C=hD(r,v),A=_g(x,C.tView.ssrId),O=xv(i,C,void 0,{dehydratedView:A});wv(x,O,0,vg(C,A))}else LB(x,0)}}}finally{di(t)}}function Pw(n,t){return n[t]}function mZ(n,t){return dv(n,t)}function gZ(n,t){return kB(n,t)}function hD(n,t){return ID(n,t)}function ge(n,t,e,i){let r=Un(),s=Xr(),o=Fs+n,a=r[qr],u=s.firstCreatePass?VB(o,s,r,t,uI,ND(),e,i):s.data[o],d=yZ(s,r,u,a,t,n);r[o]=d;let g=Uw(u);return cp(u,!0),pB(a,d,u),!pI(u)&&Ww()&&Kw(s,r,d,u),(Z7()===0||g)&&Dg(d,r),K7(),g&&(Yw(s,r,u),tI(s,u,r)),i!==null&&lI(r,u),ge}function ye(){let n=qo();OD()?FD():(n=n.parent,cp(n,!1));let t=n;J7(t)&&e$(),Q7();let e=Xr();return e.firstCreatePass&&zB(e,t),t.classesWithoutHost!=null&&m$(t)&&sD(e,t,Un(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&g$(t)&&sD(e,t,Un(),t.stylesWithoutHost,!1),ye}function tt(n,t,e,i){return ge(n,t,e,i),ye(),tt}var yZ=(n,t,e,i,r,s)=>(Gw(!0),dB(i,r,d$()));function vZ(n,t,e,i,r){let s=t.consts,o=Ad(s,i),a=Sv(t,n,8,"ng-container",o);o!==null&&XA(a,o,!0);let u=Ad(s,r);return ND()&&vI(t,e,a,u,uI),a.mergedAttrs=yg(a.mergedAttrs,a.attrs),t.queries!==null&&t.queries.elementStart(t,a),a}function Yo(n,t,e){let i=Un(),r=Xr(),s=n+Fs,o=r.firstCreatePass?vZ(s,r,i,t,e):r.data[s];cp(o,!0);let a=_Z(r,i,o,n);return i[s]=a,Ww()&&Kw(r,i,a,o),Dg(a,i),Uw(o)&&(Yw(r,i,o),tI(r,o,i)),e!=null&&lI(i,o),Yo}function Zo(){let n=qo(),t=Xr();return OD()?FD():(n=n.parent,cp(n,!1)),t.firstCreatePass&&(HD(t,n),DD(n)&&t.queries.elementEnd(n)),Zo}function Ko(n,t,e){return Yo(n,t,e),Zo(),Ko}var _Z=(n,t,e,i)=>(Gw(!0),zq(t[qr],""));function Dn(){return Un()}function TI(n,t,e){let i=Un(),r=up();if(Go(i,r,t)){let s=Xr(),o=jw();cI(s,o,i,n,t,i[qr],e,!0)}return TI}var $f=void 0;function bZ(n){let t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&e===0?1:5}var xZ=["en",[["a","p"],["AM","PM"],$f],[["AM","PM"],$f,$f],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$f,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$f,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$f,"{1} 'at' {0}",$f],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",bZ],mA={};function Il(n){let t=wZ(n),e=TF(t);if(e)return e;let i=t.split("-")[0];if(e=TF(i),e)return e;if(i==="en")return xZ;throw new St(701,!1)}function TF(n){return n in mA||(mA[n]=uh.ng&&uh.ng.common&&uh.ng.common.locales&&uh.ng.common.locales[n]),mA[n]}var as=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(as||{});function wZ(n){return n.toLowerCase().replace(/_/g,"-")}var kw="en-US";var SZ=kw;function CZ(n){typeof n=="string"&&(SZ=n.toLowerCase().replace(/_/g,"-"))}function AF(n,t,e){return function i(r){if(r===Function)return e;let s=Cg(n)?hu(n.index,t):t;yI(s,5);let o=t[bs],a=DF(t,o,e,r),u=i.__ngNextListenerFn__;for(;u;)a=DF(t,o,u,r)&&a,u=u.__ngNextListenerFn__;return a}}function DF(n,t,e,i){let r=di(null);try{return gr(6,t,e),e(i)!==!1}catch(s){return MZ(n,s),!1}finally{gr(7,t,e),di(r)}}function MZ(n,t){let e=n[mg],i=e?e.get(bc,null):null;i&&i.handleError(t)}function IF(n,t,e,i,r,s){let o=t[e],a=t[ci],d=a.data[e].outputs[i],g=o[d],v=a.firstCreatePass?LD(a):null,x=kD(t),C=g.subscribe(s),A=x.length;x.push(s,C),v&&v.push(r,n.index,A,-(A+1))}function bt(n,t,e,i){let r=Un(),s=Xr(),o=qo();return bV(s,r,r[qr],o,n,t,i),bt}function EZ(n,t,e,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===e&&r[s+1]===i){let a=t[hw],u=r[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function bV(n,t,e,i,r,s,o){let a=Uw(i),d=n.firstCreatePass?LD(n):null,g=kD(t),v=!0;if(i.type&3||o){let x=mu(i,t),C=o?o(x):x,A=g.length,O=o?T=>o(uu(T[i.index])):i.index,N=null;if(!o&&a&&(N=EZ(n,t,r,i.index)),N!==null){let T=N.__ngLastListenerFn__||N;T.__ngNextListenerFn__=s,N.__ngLastListenerFn__=s,v=!1}else{s=AF(i,t,s),eq(t,C,r,s);let T=e.listen(C,r,s);g.push(s,T),d&&d.push(r,O,A,A+1)}}else s=AF(i,t,s);if(v){let x=i.outputs?.[r],C=i.hostDirectiveOutputs?.[r];if(C&&C.length)for(let A=0;A<C.length;A+=2){let O=C[A],N=C[A+1];IF(i,t,O,N,r,s)}if(x&&x.length)for(let A of x)IF(i,t,A,r,r,s)}}function Ae(n=1){return u$(n)}function TZ(n,t){let e=null,i=Rq(n);for(let r=0;r<t.length;r++){let s=t[r];if(s==="*"){e=r;continue}if(i===null?hB(n,s,!0):Lq(i,s))return r}return e}function _u(n){let t=Un()[ba][xa];if(!t.projection){let e=n?n.length:1,i=t.projection=C7(e,null),r=i.slice(),s=t.child;for(;s!==null;){if(s.type!==128){let o=n?TZ(s,n):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s)}s=s.next}}}function Rl(n,t=0,e,i,r,s){let o=Un(),a=Xr(),u=i?n+1:null;u!==null&&Dw(o,a,u,i,r,s,null,e);let d=Sv(a,Fs+n,16,null,e||null);d.projection===null&&(d.projection=t),FD();let v=!o[pg]||m3();o[ba][xa].projection[d.projection]===null&&u!==null?AZ(o,a,u):v&&!pI(d)&&yX(a,o,d)}function AZ(n,t,e){let i=Fs+e,r=t.data[i],s=n[i],o=_g(s,r.tView.ssrId),a=xv(n,r,void 0,{dehydratedView:o});wv(s,a,0,vg(r,o))}function Qo(n,t,e,i){bY(n,t,e,i)}function Oi(n,t,e){_Y(n,t,e)}function Hn(n){let t=Un(),e=Xr(),i=v3();VD(i+1);let r=_I(e,i);if(n.dirty&&G7(t)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let s=SY(t,i);n.reset(s,V$),n.notifyOnChanges()}return!0}return!1}function jn(){return vY(Un(),v3())}function zr(n){let t=n$();return RD(t,Fs+n)}function ot(n,t=""){let e=Un(),i=Xr(),r=n+Fs,s=i.firstCreatePass?Sv(i,r,1,t,null):i.data[r],o=DZ(i,e,s,t,n);e[r]=o,Ww()&&Kw(i,e,o,s),cp(s,!1)}var DZ=(n,t,e,i,r)=>(Gw(!0),Bq(t[qr],i));function Yr(n){return Ci("",n,""),Yr}function Ci(n,t,e){let i=Un(),r=sV(i,n,t,e);return r!==Ya&&xV(i,gh(),r),Ci}function nS(n,t,e,i,r){let s=Un(),o=$Y(s,n,t,e,i,r);return o!==Ya&&xV(s,gh(),o),nS}function xV(n,t,e){let i=h3(t,n);Vq(n[qr],i,e)}function Ev(n,t,e){H3(t)&&(t=t());let i=Un(),r=up();if(Go(i,r,t)){let s=Xr(),o=jw();cI(s,o,i,n,t,i[qr],e,!1)}return Ev}function iS(n,t){let e=H3(n);return e&&n.set(t),e}function Tv(n,t){let e=Un(),i=Xr(),r=qo();return bV(i,e,e[qr],r,n,t),Tv}function IZ(n,t,e){let i=Xr();if(i.firstCreatePass){let r=cu(n);dD(e,i.data,i.blueprint,r,!0),dD(t,i.data,i.blueprint,r,!1)}}function dD(n,t,e,i,r){if(n=Wo(n),Array.isArray(n))for(let s=0;s<n.length;s++)dD(n[s],t,e,i,r);else{let s=Xr(),o=Un(),a=qo(),u=fg(n)?n:Wo(n.provide),d=n3(n),g=a.providerIndexes&1048575,v=a.directiveStart,x=a.providerIndexes>>20;if(fg(n)||!n.multi){let C=new rp(d,r,Nn),A=yA(u,t,r?g:g+x,v);A===-1?(IA(vw(a,o),s,u),gA(s,n,t.length),t.push(u),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(C),o.push(C)):(e[A]=C,o[A]=C)}else{let C=yA(u,t,g+x,v),A=yA(u,t,g,g+x),O=C>=0&&e[C],N=A>=0&&e[A];if(r&&!N||!r&&!O){IA(vw(a,o),s,u);let T=kZ(r?PZ:RZ,e.length,r,i,d);!r&&N&&(e[A].providerFactory=T),gA(s,n,t.length,0),t.push(u),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(T),o.push(T)}else{let T=wV(e[r?A:C],d,!r&&i);gA(s,n,C>-1?C:A,T)}!r&&i&&N&&e[A].componentProviders++}}}function gA(n,t,e,i){let r=fg(t),s=k7(t);if(r||s){let u=(s?Wo(t.useClass):t).prototype.ngOnDestroy;if(u){let d=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let g=d.indexOf(e);g===-1?d.push(e,[i,u]):d[g+1].push(i,u)}else d.push(e,u)}}}function wV(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function yA(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function RZ(n,t,e,i,r){return fD(this.multi,[])}function PZ(n,t,e,i,r){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=uv(i,i[ci],this.providerFactory.index,r);o=u.slice(0,a),fD(s,o);for(let d=a;d<u.length;d++)o.push(u[d])}else o=[],fD(s,o);return o}function fD(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function kZ(n,t,e,i,r){let s=new rp(n,e,Nn);return s.multi=[],s.index=t,s.componentProviders=0,wV(s,r,i&&!e),s}function So(n,t=[]){return e=>{e.providersResolver=(i,r)=>IZ(i,r?r(n):n,t)}}function rS(n,t,e){let i=mh()+n,r=Un();return r[i]===Ya?dp(r,i,e?t.call(e):t()):QB(r,i)}function sS(n,t,e,i){return MV(Un(),mh(),n,t,e,i)}function oS(n,t,e,i,r){return EV(Un(),mh(),n,t,e,i,r)}function kg(n,t,e,i,r,s){return LZ(Un(),mh(),n,t,e,i,r,s)}function Rd(n,t,e,i,r,s,o){return NZ(Un(),mh(),n,t,e,i,r,s,o)}function SV(n,t,e,i,r,s,o,a){let u=mh()+n,d=Un(),g=JB(d,u,e,i,r,s);return Go(d,u+4,o)||g?dp(d,u+5,a?t.call(a,e,i,r,s,o):t(e,i,r,s,o)):QB(d,u+5)}function CV(n,t,e,i){return OZ(Un(),mh(),n,t,e,i)}function Av(n,t){let e=n[t];return e===Ya?void 0:e}function MV(n,t,e,i,r,s){let o=t+e;return Go(n,o,r)?dp(n,o+1,s?i.call(s,r):i(r)):Av(n,o+1)}function EV(n,t,e,i,r,s,o){let a=t+e;return pv(n,a,r,s)?dp(n,a+2,o?i.call(o,r,s):i(r,s)):Av(n,a+2)}function LZ(n,t,e,i,r,s,o,a){let u=t+e;return BY(n,u,r,s,o)?dp(n,u+3,a?i.call(a,r,s,o):i(r,s,o)):Av(n,u+3)}function NZ(n,t,e,i,r,s,o,a,u){let d=t+e;return JB(n,d,r,s,o,a)?dp(n,d+4,u?i.call(u,r,s,o,a):i(r,s,o,a)):Av(n,d+4)}function OZ(n,t,e,i,r,s){let o=t+e,a=!1;for(let u=0;u<r.length;u++)Go(n,o++,r[u])&&(a=!0);return a?dp(n,o,i.apply(s,r)):Av(n,o)}function Pl(n,t){let e=Xr(),i,r=n+Fs;e.firstCreatePass?(i=FZ(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let s=i.factory||(i.factory=Zf(i.type,!0)),o,a=ga(Nn);try{let u=yw(!1),d=s();return yw(u),W7(e,Un(),r,d),d}finally{ga(a)}}function FZ(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function Dv(n,t,e){let i=n+Fs,r=Un(),s=RD(r,i);return TV(r,i)?MV(r,mh(),t,s.transform,e,s):s.transform(e)}function fp(n,t,e,i){let r=n+Fs,s=Un(),o=RD(s,r);return TV(s,r)?EV(s,mh(),t,o.transform,e,i,o):o.transform(e,i)}function TV(n,t){return n[ci].data[t].pure}function AI(n,t){return Jw(n,t)}var pD=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},AV=(()=>{class n{compileModuleSync(e){return new tD(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=QF(e),s=cB(r.declarations).reduce((o,a)=>{let u=Qf(a);return u&&o.push(new bg(u)),o},[]);return new pD(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var BZ=(()=>{class n{zone=ze(br);changeDetectionScheduler=ze(sp);applicationRef=ze(ap);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VZ=new wn("",{factory:()=>!1});function DV({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new br(Mn(Je({},RV()),{scheduleInRootZone:e})),[{provide:br,useFactory:n},{provide:av,multi:!0,useFactory:()=>{let i=ze(BZ,{optional:!0});return()=>i.initialize()}},{provide:av,multi:!0,useFactory:()=>{let i=ze(zZ);return()=>{i.initialize()}}},t===!0?{provide:F3,useValue:!0}:[],{provide:B3,useValue:e??O3}]}function IV(n){let t=n?.ignoreChangesOutsideZone,e=n?.scheduleInRootZone,i=DV({ngZoneFactory:()=>{let r=RV(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&yu("NgZone_CoalesceEvent"),new br(r)},ignoreChangesOutsideZone:t,scheduleInRootZone:e});return Bw([{provide:VZ,useValue:!0},{provide:WD,useValue:!1},i])}function RV(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var zZ=(()=>{class n{subscription=new Qr;initialized=!1;zone=ze(br);pendingTasks=ze(Tg);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{br.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{br.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var UZ=(()=>{class n{appRef=ze(ap);taskService=ze(Tg);ngZone=ze(br);zonelessEnabled=ze(WD);tracing=ze(Rg,{optional:!0});disableScheduling=ze(F3,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Qr;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(bw):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(ze(B3,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof LA||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let i=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?eF:V3;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(bw+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,eF(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HZ(){return typeof $localize<"u"&&$localize.locale||kw}var aS=new wn("",{providedIn:"root",factory:()=>ze(aS,xi.Optional|xi.SkipSelf)||HZ()});var mD=new wn(""),jZ=new wn("");function iv(n){return!n.moduleRef}function WZ(n){let t=iv(n)?n.r3Injector:n.moduleRef.injector,e=t.get(br);return e.run(()=>{iv(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(bc,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:s=>{i.handleError(s)}})}),iv(n)){let s=()=>t.destroy(),o=n.platformInjector.get(mD);o.add(s),t.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(mD);o.add(s),n.moduleRef.onDestroy(()=>{rw(n.allPlatformModules,n.moduleRef),r.unsubscribe(),o.delete(s)})}return $Z(i,e,()=>{let s=t.get(rV);return s.runInitializers(),s.donePromise.then(()=>{let o=t.get(aS,kw);if(CZ(o||kw),!t.get(jZ,!0))return iv(n)?t.get(ap):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(iv(n)){let u=t.get(ap);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return GZ(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function GZ(n,t){let e=n.injector.get(ap);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new St(-403,!1);t.push(n)}function $Z(n,t,e){try{let i=e();return Id(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}var sw=null;function qZ(n=[],t){return Bs.create({name:t,providers:[{provide:Vw,useValue:"platform"},{provide:mD,useValue:new Set([()=>sw=null])},...n]})}function XZ(n=[]){if(sw)return sw;let t=qZ(n);return sw=t,HY(),YZ(t),t}function YZ(n){let t=n.get(YD,null);Al(n,()=>{t?.forEach(e=>e())})}var Ss=(()=>{class n{static __NG_ELEMENT_ID__=ZZ}return n})();function ZZ(n){return KZ(qo(),Un(),(n&16)===16)}function KZ(n,t,e){if(Cg(n)&&!e){let i=hu(n.index,t);return new fv(i,i)}else if(n.type&175){let i=t[ba];return new fv(i,t)}return null}var gD=class{constructor(){}supports(t){return KB(t)}create(t){return new yD(t)}},QZ=(n,t)=>t,yD=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||QZ}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){let o=!i||e&&e.currentIndex<RF(i,r,s)?e:i,a=RF(o,r,s),u=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(e=e._next,o.previousIndex==null)r++;else{s||(s=[]);let d=a-r,g=u-r;if(d!=g){for(let x=0;x<d;x++){let C=x<s.length?s[x]:s[x]=0,A=C+x;g<=A&&A<d&&(s[x]=C+1)}let v=o.previousIndex;s[v]=g-d}}a!==u&&t(o,a,u)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!KB(t))throw new St(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,s,o;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,s,o,a),i=!0):(i&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next}else r=0,FY(t,a=>{o=this._trackByFn(r,a),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,a,o,r),i=!0):(i&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new vD(e,i),s,r)),t}_verifyReinsertion(t,e,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,s=t._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Lw),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Lw),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},vD=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},_D=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},Lw=class{map=new Map;put(t){let e=t.trackById,i=this.map.get(e);i||(i=new _D,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function RF(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}var bD=class{constructor(){}supports(t){return t instanceof Map||wI(t)}create(){return new xD}},xD=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||wI(t)))throw new St(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{let s=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let r=this._records.get(t);this._maybeAddToChanges(r,e);let s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}let i=new wD(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}},wD=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(t){this.key=t}};function PF(){return new lS([new gD])}var lS=(()=>{class n{factories;static \u0275prov=Vt({token:n,providedIn:"root",factory:PF});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||PF()),deps:[[n,new XF,new qF]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new St(901,!1)}}return n})();function kF(){return new Pd([new bD])}var Pd=(()=>{class n{static \u0275prov=Vt({token:n,providedIn:"root",factory:kF});factories;constructor(e){this.factories=e}static create(e,i){if(i){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||kF()),deps:[[n,new XF,new qF]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i)return i;throw new St(901,!1)}}return n})();function PV(n){gr(8);try{let{rootComponent:t,appProviders:e,platformProviders:i}=n,r=XZ(i),s=[DV({}),{provide:sp,useExisting:UZ},...e||[]],o=new Aw({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return WZ({r3Injector:o.injector,platformInjector:r,rootComponent:t})}catch(t){return Promise.reject(t)}finally{gr(9)}}function Hi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Qs(n,t=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):t}function Jo(n){return VT(n)}function cn(n,t){return NT(n,t?.equal)}var SD=class{[$a];constructor(t){this[$a]=t}destroy(){this[$a].destroy()}};function ji(n,t){!t?.injector&&_v(ji);let e=t?.injector??ze(Bs),i=t?.manualCleanup!==!0?e.get(Dl):null,r,s=e.get(JD,null,{optional:!0}),o=e.get(sp);return s!==null&&!t?.forceRoot?(r=tK(s.view,o,n),i instanceof _w&&i._lView===s.view&&(i=null)):r=nK(n,e.get(nV),o),r.injector=e,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new SD(r)}var kV=Mn(Je({},Gm),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:hv,run(){if(this.dirty=!1,this.hasRun&&!vx(this))return;this.hasRun=!0;let n=i=>(this.cleanupFns??=[]).push(i),t=Z0(this),e=pw(!1);try{this.maybeCleanup(),this.fn(n)}finally{pw(e),yx(this,t)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),JZ=Mn(Je({},kV),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){K0(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),eK=Mn(Je({},kV),{consumerMarkedDirty(){this.view[ii]|=8192,Eg(this.view),this.notifier.notify(13)},destroy(){K0(this),this.onDestroyFn(),this.maybeCleanup(),this.view[ep]?.delete(this)}});function tK(n,t,e){let i=Object.create(eK);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=t,i.fn=e,n[ep]??=new Set,n[ep].add(i),i.consumerMarkedDirty(i),i}function nK(n,t,e){let i=Object.create(JZ);return i.fn=n,i.scheduler=t,i.notifier=e,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.schedule(i),i.notifier.notify(12),i}function LV(n){let t=Qf(n);if(!t)return null;let e=new bg(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var Zr=new wn("");var FV=null;function kl(){return FV}function DI(n){FV??=n}var Iv=class{},Rv=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>ze(BV),providedIn:"platform"})}return n})(),II=new wn(""),BV=(()=>{class n extends Rv{_location;_history;_doc=ze(Zr);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kl().getBaseHref(this._doc)}onPopState(e){let i=kl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=kl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function cS(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function NV(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function xc(n){return n&&n[0]!=="?"?`?${n}`:n}var bu=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>ze(hS),providedIn:"root"})}return n})(),uS=new wn(""),hS=(()=>{class n extends bu{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ze(Zr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return cS(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+xc(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){let o=this.prepareExternalUrl(r+xc(s));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){let o=this.prepareExternalUrl(r+xc(s));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)($n(Rv),$n(uS,8))};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xu=(()=>{class n{_subject=new Jr;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=sK(NV(OV(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+xc(i))}normalize(e){return n.stripTrailingSlash(rK(this._basePath,OV(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+xc(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+xc(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=xc;static joinWithSlash=cS;static stripTrailingSlash=NV;static \u0275fac=function(i){return new(i||n)($n(bu))};static \u0275prov=Vt({token:n,factory:()=>iK(),providedIn:"root"})}return n})();function iK(){return new xu($n(bu))}function rK(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function OV(n){return n.replace(/\/index.html$/,"")}function sK(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var bS=(()=>{class n extends bu{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=cS(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let o=this.prepareExternalUrl(r+xc(s))||this._platformLocation.pathname;this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){let o=this.prepareExternalUrl(r+xc(s))||this._platformLocation.pathname;this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)($n(Rv),$n(uS,8))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();var Co=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Co||{}),yr=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(yr||{}),wa=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(wa||{}),_h={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function jV(n){return Il(n)[as.LocaleId]}function WV(n,t,e){let i=Il(n),r=[i[as.DayPeriodsFormat],i[as.DayPeriodsStandalone]],s=Ll(r,t);return Ll(s,e)}function GV(n,t,e){let i=Il(n),r=[i[as.DaysFormat],i[as.DaysStandalone]],s=Ll(r,t);return Ll(s,e)}function $V(n,t,e){let i=Il(n),r=[i[as.MonthsFormat],i[as.MonthsStandalone]],s=Ll(r,t);return Ll(s,e)}function qV(n,t){let i=Il(n)[as.Eras];return Ll(i,t)}function Pv(n,t){let e=Il(n);return Ll(e[as.DateFormat],t)}function kv(n,t){let e=Il(n);return Ll(e[as.TimeFormat],t)}function Lv(n,t){let i=Il(n)[as.DateTimeFormat];return Ll(i,t)}function Nv(n,t){let e=Il(n),i=e[as.NumberSymbols][t];if(typeof i>"u"){if(t===_h.CurrencyDecimal)return e[as.NumberSymbols][_h.Decimal];if(t===_h.CurrencyGroup)return e[as.NumberSymbols][_h.Group]}return i}function XV(n){if(!n[as.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[as.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function YV(n){let t=Il(n);return XV(t),(t[as.ExtraData][2]||[]).map(i=>typeof i=="string"?RI(i):[RI(i[0]),RI(i[1])])}function ZV(n,t,e){let i=Il(n);XV(i);let r=[i[as.ExtraData][0],i[as.ExtraData][1]],s=Ll(r,t)||[];return Ll(s,e)||[]}function Ll(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function RI(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var aK=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,dS={},lK=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function KV(n,t,e,i){let r=yK(n);t=vh(e,t)||t;let o=[],a;for(;t;)if(a=lK.exec(t),a){o=o.concat(a.slice(1));let g=o.pop();if(!g)break;t=g}else{o.push(t);break}let u=r.getTimezoneOffset();i&&(u=JV(i,u),r=gK(r,i));let d="";return o.forEach(g=>{let v=pK(g);d+=v?v(r,e,u):g==="''"?"'":g.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function yS(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function vh(n,t){let e=jV(n);if(dS[e]??={},dS[e][t])return dS[e][t];let i="";switch(t){case"shortDate":i=Pv(n,wa.Short);break;case"mediumDate":i=Pv(n,wa.Medium);break;case"longDate":i=Pv(n,wa.Long);break;case"fullDate":i=Pv(n,wa.Full);break;case"shortTime":i=kv(n,wa.Short);break;case"mediumTime":i=kv(n,wa.Medium);break;case"longTime":i=kv(n,wa.Long);break;case"fullTime":i=kv(n,wa.Full);break;case"short":let r=vh(n,"shortTime"),s=vh(n,"shortDate");i=fS(Lv(n,wa.Short),[r,s]);break;case"medium":let o=vh(n,"mediumTime"),a=vh(n,"mediumDate");i=fS(Lv(n,wa.Medium),[o,a]);break;case"long":let u=vh(n,"longTime"),d=vh(n,"longDate");i=fS(Lv(n,wa.Long),[u,d]);break;case"full":let g=vh(n,"fullTime"),v=vh(n,"fullDate");i=fS(Lv(n,wa.Full),[g,v]);break}return i&&(dS[e][t]=i),i}function fS(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function wc(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,s=e));let o=String(n);for(;o.length<t;)o="0"+o;return i&&(o=o.slice(o.length-t)),s+o}function cK(n,t){return wc(n,3).substring(0,t)}function Cs(n,t,e=0,i=!1,r=!1){return function(s,o){let a=uK(n,s);if((e>0||a>-e)&&(a+=e),n===3)a===0&&e===-12&&(a=12);else if(n===6)return cK(a,t);let u=Nv(o,_h.MinusSign);return wc(a,t,u,i,r)}}function uK(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Tr(n,t,e=Co.Format,i=!1){return function(r,s){return hK(r,s,n,t,e,i)}}function hK(n,t,e,i,r,s){switch(e){case 2:return $V(t,r,i)[n.getMonth()];case 1:return GV(t,r,i)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let d=YV(t),g=ZV(t,r,i),v=d.findIndex(x=>{if(Array.isArray(x)){let[C,A]=x,O=o>=C.hours&&a>=C.minutes,N=o<A.hours||o===A.hours&&a<A.minutes;if(C.hours<A.hours){if(O&&N)return!0}else if(O||N)return!0}else if(x.hours===o&&x.minutes===a)return!0;return!1});if(v!==-1)return g[v]}return WV(t,r,i)[o<12?0:1];case 3:return qV(t,i)[n.getFullYear()<=0?0:1];default:let u=e;throw new Error(`unexpected translation type ${u}`)}}function pS(n){return function(t,e,i){let r=-1*i,s=Nv(e,_h.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+wc(o,2,s)+wc(Math.abs(r%60),2,s);case 1:return"GMT"+(r>=0?"+":"")+wc(o,1,s);case 2:return"GMT"+(r>=0?"+":"")+wc(o,2,s)+":"+wc(Math.abs(r%60),2,s);case 3:return i===0?"Z":(r>=0?"+":"")+wc(o,2,s)+":"+wc(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var dK=0,gS=4;function fK(n){let t=yS(n,dK,1).getDay();return yS(n,0,1+(t<=gS?gS:gS+7)-t)}function QV(n){let t=n.getDay(),e=t===0?-3:gS-t;return yS(n.getFullYear(),n.getMonth(),n.getDate()+e)}function PI(n,t=!1){return function(e,i){let r;if(t){let s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();r=1+Math.floor((o+s)/7)}else{let s=QV(e),o=fK(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return wc(r,n,Nv(i,_h.MinusSign))}}function mS(n,t=!1){return function(e,i){let s=QV(e).getFullYear();return wc(s,n,Nv(i,_h.MinusSign),t)}}var kI={};function pK(n){if(kI[n])return kI[n];let t;switch(n){case"G":case"GG":case"GGG":t=Tr(3,yr.Abbreviated);break;case"GGGG":t=Tr(3,yr.Wide);break;case"GGGGG":t=Tr(3,yr.Narrow);break;case"y":t=Cs(0,1,0,!1,!0);break;case"yy":t=Cs(0,2,0,!0,!0);break;case"yyy":t=Cs(0,3,0,!1,!0);break;case"yyyy":t=Cs(0,4,0,!1,!0);break;case"Y":t=mS(1);break;case"YY":t=mS(2,!0);break;case"YYY":t=mS(3);break;case"YYYY":t=mS(4);break;case"M":case"L":t=Cs(1,1,1);break;case"MM":case"LL":t=Cs(1,2,1);break;case"MMM":t=Tr(2,yr.Abbreviated);break;case"MMMM":t=Tr(2,yr.Wide);break;case"MMMMM":t=Tr(2,yr.Narrow);break;case"LLL":t=Tr(2,yr.Abbreviated,Co.Standalone);break;case"LLLL":t=Tr(2,yr.Wide,Co.Standalone);break;case"LLLLL":t=Tr(2,yr.Narrow,Co.Standalone);break;case"w":t=PI(1);break;case"ww":t=PI(2);break;case"W":t=PI(1,!0);break;case"d":t=Cs(2,1);break;case"dd":t=Cs(2,2);break;case"c":case"cc":t=Cs(7,1);break;case"ccc":t=Tr(1,yr.Abbreviated,Co.Standalone);break;case"cccc":t=Tr(1,yr.Wide,Co.Standalone);break;case"ccccc":t=Tr(1,yr.Narrow,Co.Standalone);break;case"cccccc":t=Tr(1,yr.Short,Co.Standalone);break;case"E":case"EE":case"EEE":t=Tr(1,yr.Abbreviated);break;case"EEEE":t=Tr(1,yr.Wide);break;case"EEEEE":t=Tr(1,yr.Narrow);break;case"EEEEEE":t=Tr(1,yr.Short);break;case"a":case"aa":case"aaa":t=Tr(0,yr.Abbreviated);break;case"aaaa":t=Tr(0,yr.Wide);break;case"aaaaa":t=Tr(0,yr.Narrow);break;case"b":case"bb":case"bbb":t=Tr(0,yr.Abbreviated,Co.Standalone,!0);break;case"bbbb":t=Tr(0,yr.Wide,Co.Standalone,!0);break;case"bbbbb":t=Tr(0,yr.Narrow,Co.Standalone,!0);break;case"B":case"BB":case"BBB":t=Tr(0,yr.Abbreviated,Co.Format,!0);break;case"BBBB":t=Tr(0,yr.Wide,Co.Format,!0);break;case"BBBBB":t=Tr(0,yr.Narrow,Co.Format,!0);break;case"h":t=Cs(3,1,-12);break;case"hh":t=Cs(3,2,-12);break;case"H":t=Cs(3,1);break;case"HH":t=Cs(3,2);break;case"m":t=Cs(4,1);break;case"mm":t=Cs(4,2);break;case"s":t=Cs(5,1);break;case"ss":t=Cs(5,2);break;case"S":t=Cs(6,1);break;case"SS":t=Cs(6,2);break;case"SSS":t=Cs(6,3);break;case"Z":case"ZZ":case"ZZZ":t=pS(0);break;case"ZZZZZ":t=pS(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=pS(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=pS(2);break;default:return null}return kI[n]=t,t}function JV(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function mK(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function gK(n,t,e){let r=n.getTimezoneOffset(),s=JV(t,r);return mK(n,-1*(s-r))}function yK(n){if(VV(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,s=1,o=1]=n.split("-").map(a=>+a);return yS(r,s-1,o)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(aK))return vK(i)}let t=new Date(n);if(!VV(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function vK(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-e,a=Number(n[5]||0)-i,u=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(t,o,a,u,d),t}function VV(n){return n instanceof Date&&!isNaN(n.valueOf())}var LI=/\s+/,zV=[],ls=(()=>{class n{_ngEl;_renderer;initialClasses=zV;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(LI):zV}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(LI):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(LI).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(Nn(Rr),Nn(Za))};static \u0275dir=Xn({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})(),FI=(()=>{class n{_viewContainerRef;ngComponentOutlet=null;ngComponentOutletInputs;ngComponentOutletInjector;ngComponentOutletContent;ngComponentOutletNgModule;ngComponentOutletNgModuleFactory;_componentRef;_moduleRef;_inputsUsed=new Map;get componentInstance(){return this._componentRef?.instance??null}constructor(e){this._viewContainerRef=e}_needToReCreateNgModuleInstance(e){return e.ngComponentOutletNgModule!==void 0||e.ngComponentOutletNgModuleFactory!==void 0}_needToReCreateComponentInstance(e){return e.ngComponentOutlet!==void 0||e.ngComponentOutletContent!==void 0||e.ngComponentOutletInjector!==void 0||this._needToReCreateNgModuleInstance(e)}ngOnChanges(e){if(this._needToReCreateComponentInstance(e)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){let i=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(e)&&(this._moduleRef?.destroy(),this.ngComponentOutletNgModule?this._moduleRef=XB(this.ngComponentOutletNgModule,UV(i)):this.ngComponentOutletNgModuleFactory?this._moduleRef=this.ngComponentOutletNgModuleFactory.create(UV(i)):this._moduleRef=void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:i,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(let e of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(e,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(e){for(let[i,r]of this._inputsUsed)r?(e.setInput(i,this.ngComponentOutletInputs[i]),this._inputsUsed.set(i,!1)):(e.setInput(i,void 0),this._inputsUsed.delete(i))}static \u0275fac=function(i){return new(i||n)(Nn(wr))};static \u0275dir=Xn({type:n,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},exportAs:["ngComponentOutlet"],features:[Ks]})}return n})();function UV(n){return n.get(op).injector}var Ka=(()=>{class n{_viewContainer;_context=new vS;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){HV(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){HV(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(Nn(wr),Nn(Vs))};static \u0275dir=Xn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),vS=class{$implicit=null;ngIf=null};function HV(n,t){if(n&&!n.createEmbeddedView)throw new St(2020,!1)}var _S=class{_viewContainerRef;_templateRef;_created=!1;constructor(t,e){this._viewContainerRef=t,this._templateRef=e}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}},Ov=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(e){this._ngSwitch=e,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){let i=e===this._ngSwitch;return this._lastCasesMatched||=i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(let i of this._defaultViews)i.enforceState(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xn({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),BI=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new _S(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(i){return new(i||n)(Nn(wr),Nn(Vs),Nn(Ov,9))};static \u0275dir=Xn({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})(),VI=(()=>{class n{constructor(e,i,r){r._addDefault(new _S(e,i))}static \u0275fac=function(i){return new(i||n)(Nn(wr),Nn(Vs),Nn(Ov,9))};static \u0275dir=Xn({type:n,selectors:[["","ngSwitchDefault",""]]})}return n})();var Lg=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){let[r,s]=e.split("."),o=r.indexOf("-")===-1?void 0:fu.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static \u0275fac=function(i){return new(i||n)(Nn(Rr),Nn(Pd),Nn(Za))};static \u0275dir=Xn({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})(),pp=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(e){this._viewContainerRef=e}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(Nn(wr))};static \u0275dir=Xn({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Ks]})}return n})();function ez(n,t){return new St(2100,!1)}var NI=class{createSubscription(t,e){return Jo(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){Jo(()=>t.unsubscribe())}},OI=class{createSubscription(t,e){return t.then(i=>e?.(i),i=>{throw i}),{unsubscribe:()=>{e=null}}}dispose(t){t.unsubscribe()}},_K=new OI,bK=new NI,Fv=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(e){this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(Id(e))return _K;if(SI(e))return bK;throw ez(n,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(Nn(Ss,16))};static \u0275pipe=xI({name:"async",type:n,pure:!1})}return n})();var xK="mediumDate",tz=new wn(""),nz=new wn(""),Bv=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,s){if(e==null||e===""||e!==e)return null;try{let o=i??this.defaultOptions?.dateFormat??xK,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return KV(e,o,s||this.locale,a)}catch(o){throw ez(n,o.message)}}static \u0275fac=function(i){return new(i||n)(Nn(aS,16),Nn(tz,24),Nn(nz,24))};static \u0275pipe=xI({name:"date",type:n,pure:!0})}return n})();var Nt=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Xo({type:n});static \u0275inj=$o({})}return n})();function zI(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,s]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}var UI="browser",iz="server";function xS(n){return n===iz}var Vv=class{};var rz=(()=>{class n{static \u0275prov=Vt({token:n,providedIn:"root",factory:()=>new HI(ze(Zr),window)})}return n})(),HI=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=CK(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}};function CK(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let s=r.shadowRoot;if(s){let o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=i.nextNode()}}return null}var CS=new wn(""),$I=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r,s){return this._findPluginFor(i).addEventListener(e,i,r,s)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new St(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)($n(CS),$n(br))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),zv=class{_doc;constructor(t){this._doc=t}manager},wS="ng-app-id";function sz(n){for(let t of n)t.remove()}function oz(n,t){let e=t.createElement("style");return e.textContent=n,e}function MK(n,t,e,i){let r=n.head?.querySelectorAll(`style[${wS}="${t}"],link[${wS}="${t}"]`);if(r)for(let s of r)s.removeAttribute(wS),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function WI(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var qI=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,this.isServer=xS(s),MK(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,oz);i?.forEach(r=>this.addUsage(r,this.external,WI))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let s=i.get(e);s?s.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(sz(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])sz(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,oz(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,WI(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(wS,this.appId),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)($n(Zr),$n(XD),$n(KD,8),$n(Ig))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),jI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},XI=/%COMP%/g;var lz="%COMP%",EK=`_nghost-${lz}`,TK=`_ngcontent-${lz}`,AK=!0,DK=new wn("",{providedIn:"root",factory:()=>AK});function IK(n){return TK.replace(XI,n)}function RK(n){return EK.replace(XI,n)}function cz(n,t){return t.map(e=>e.replace(XI,n))}var jv=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,s,o,a,u,d=null,g=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.tracingService=g,this.platformIsServer=xS(a),this.defaultRenderer=new Uv(e,o,u,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===du.ShadowDom&&(i=Mn(Je({},i),{encapsulation:du.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof SS?r.applyToHost(e):r instanceof Hv&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,v=this.platformIsServer,x=this.tracingService;switch(i.encapsulation){case du.Emulated:s=new SS(u,d,i,this.appId,g,o,a,v,x);break;case du.ShadowDom:return new GI(u,d,e,i,o,a,this.nonce,v,x);default:s=new Hv(u,d,i,g,o,a,v,x);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||n)($n($I),$n(qI),$n(XD),$n(DK),$n(Zr),$n(Ig),$n(br),$n(KD),$n(Rg,8))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),Uv=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,r,s){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=s}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(jI[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(az(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(az(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new St(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=jI[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=jI[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(fu.DashCase|fu.Important)?t.style.setProperty(e,i,r&fu.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&fu.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i,r){if(typeof t=="string"&&(t=kl().getGlobalEventTarget(this.doc,t),!t))throw new St(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(t,e,s)),this.eventManager.addEventListener(t,e,s,r)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function az(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var GI=class extends Uv{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,i,r,s,o,a,u,d){super(t,s,o,u,d),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let g=r.styles;g=cz(r.id,g);for(let x of g){let C=document.createElement("style");a&&C.setAttribute("nonce",a),C.textContent=x,this.shadowRoot.appendChild(C)}let v=r.getExternalStyles?.();if(v)for(let x of v){let C=WI(x,s);a&&C.setAttribute("nonce",a),this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Hv=class extends Uv{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,r,s,o,a,u,d){super(t,s,o,a,u),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let g=i.styles;this.styles=d?cz(d,g):g,this.styleUrls=i.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},SS=class extends Hv{contentAttr;hostAttr;constructor(t,e,i,r,s,o,a,u,d){let g=r+"-"+i.id;super(t,e,i,s,o,a,u,d,g),this.contentAttr=IK(g),this.hostAttr=RK(g)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}};var MS=class n extends Iv{supportsDOMEvents=!0;static makeCurrent(){DI(new n)}onAndCancel(t,e,i,r){return t.addEventListener(e,i,r),()=>{t.removeEventListener(e,i,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=PK();return e==null?null:kK(e)}resetBaseElement(){Wv=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return zI(document.cookie,t)}},Wv=null;function PK(){return Wv=Wv||document.head.querySelector("base"),Wv?Wv.getAttribute("href"):null}function kK(n){return new URL(n,document.baseURI).pathname}var LK=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),hz=(()=>{class n extends zv{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,s){return e.addEventListener(i,r,s),()=>this.removeEventListener(e,i,r,s)}removeEventListener(e,i,r,s){return e.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||n)($n(Zr))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),uz=["alt","control","meta","shift"],NK={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},dz=(()=>{class n extends zv{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r,s){let o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kl().onAndCancel(e,o.domEventName,a,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),uz.forEach(d=>{let g=i.indexOf(d);g>-1&&(i.splice(g,1),o+=d+".")}),o+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=r,u.fullKey=o,u}static matchEventFullKeyCode(e,i){let r=NK[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),uz.forEach(o=>{if(o!==r){let a=OK[o];a(e)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)($n(Zr))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();function YI(n,t){return PV(Je({rootComponent:n},FK(t)))}function FK(n){return{appProviders:[...HK,...n?.providers??[]],platformProviders:UK}}function BK(){MS.makeCurrent()}function VK(){return new bc}function zK(){return Y3(document),document}var UK=[{provide:Ig,useValue:UI},{provide:YD,useValue:BK,multi:!0},{provide:Zr,useFactory:zK}];var HK=[{provide:Vw,useValue:"root"},{provide:bc,useFactory:VK},{provide:CS,useClass:hz,multi:!0,deps:[Zr]},{provide:CS,useClass:dz,multi:!0,deps:[Zr]},jv,qI,$I,{provide:Dd,useExisting:jv},{provide:Vv,useClass:LK},[]];var fz=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)($n(Zr))};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pi="primary",i_=Symbol("RouteTitle"),eR=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function yp(n){return new eR(n)}function xz(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function WK(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!wu(n[e],t[e]))return!1;return!0}function wu(n,t){let e=n?tR(n):void 0,i=t?tR(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!wz(n[r],t[r]))return!1;return!0}function tR(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wz(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function Sz(n){return n.length>0?n[n.length-1]:null}function Od(n){return KT(n)?n:Id(n)?Vr(Promise.resolve(n)):En(n)}var GK={exact:Mz,subset:Ez},Cz={exact:$K,subset:qK,ignored:()=>!0};function pz(n,t,e){return GK[e.paths](n.root,t.root,e.matrixParams)&&Cz[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function $K(n,t){return wu(n,t)}function Mz(n,t,e){if(!mp(n.segments,t.segments)||!AS(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!Mz(n.children[i],t.children[i],e))return!1;return!0}function qK(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>wz(n[e],t[e]))}function Ez(n,t,e){return Tz(n,t,t.segments,e)}function Tz(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!mp(r,e)||t.hasChildren()||!AS(r,e,i))}else if(n.segments.length===e.length){if(!mp(n.segments,e)||!AS(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!Ez(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!mp(n.segments,r)||!AS(n.segments,r,i)||!n.children[pi]?!1:Tz(n.children[pi],t,s,i)}}function AS(n,t,e){return t.every((i,r)=>Cz[e](n[r].parameters,i.parameters))}var Cu=class{root;queryParams;fragment;_queryParamMap;constructor(t=new sr([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=yp(this.queryParams),this._queryParamMap}toString(){return ZK.serialize(this)}},sr=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return DS(this)}},kd=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=yp(this.parameters),this._parameterMap}toString(){return Dz(this)}};function XK(n,t){return mp(n,t)&&n.every((e,i)=>wu(e.parameters,t[i].parameters))}function mp(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function YK(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===pi&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==pi&&(e=e.concat(t(r,i)))}),e}var vp=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>new Ld,providedIn:"root"})}return n})(),Ld=class{parse(t){let e=new iR(t);return new Cu(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Gv(t.root,!0)}`,i=JK(t.queryParams),r=typeof t.fragment=="string"?`#${KK(t.fragment)}`:"";return`${e}${i}${r}`}},ZK=new Ld;function DS(n){return n.segments.map(t=>Dz(t)).join("/")}function Gv(n,t){if(!n.hasChildren())return DS(n);if(t){let e=n.children[pi]?Gv(n.children[pi],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==pi&&i.push(`${r}:${Gv(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=YK(n,(i,r)=>r===pi?[Gv(n.children[pi],!1)]:[`${r}:${Gv(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[pi]!=null?`${DS(n)}/${e[0]}`:`${DS(n)}/(${e.join("//")})`}}function Az(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ES(n){return Az(n).replace(/%3B/gi,";")}function KK(n){return encodeURI(n)}function nR(n){return Az(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function IS(n){return decodeURIComponent(n)}function mz(n){return IS(n.replace(/\+/g,"%20"))}function Dz(n){return`${nR(n.path)}${QK(n.parameters)}`}function QK(n){return Object.entries(n).map(([t,e])=>`;${nR(t)}=${nR(e)}`).join("")}function JK(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${ES(e)}=${ES(r)}`).join("&"):`${ES(e)}=${ES(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var eQ=/^[^\/()?;#]+/;function ZI(n){let t=n.match(eQ);return t?t[0]:""}var tQ=/^[^\/()?;=#]+/;function nQ(n){let t=n.match(tQ);return t?t[0]:""}var iQ=/^[^=?&#]+/;function rQ(n){let t=n.match(iQ);return t?t[0]:""}var sQ=/^[^&#]+/;function oQ(n){let t=n.match(sQ);return t?t[0]:""}var iR=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new sr([],{}):new sr([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[pi]=new sr(t,e)),i}parseSegment(){let t=ZI(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new St(4009,!1);return this.capture(t),new kd(IS(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=nQ(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=ZI(this.remaining);r&&(i=r,this.capture(i))}t[IS(e)]=IS(i)}parseQueryParam(t){let e=rQ(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=oQ(this.remaining);o&&(i=o,this.capture(i))}let r=mz(e),s=mz(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=ZI(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new St(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=pi);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[pi]:new sr([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new St(4011,!1)}};function Iz(n){return n.segments.length>0?new sr([],{[pi]:n}):n}function Rz(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=Rz(r);if(i===pi&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new sr(n.segments,t);return aQ(e)}function aQ(n){if(n.numberOfChildren===1&&n.children[pi]){let t=n.children[pi];return new sr(n.segments.concat(t.segments),t.children)}return n}function Vg(n){return n instanceof Cu}function Pz(n,t,e=null,i=null){let r=kz(n);return Lz(r,t,e,i)}function kz(n){let t;function e(s){let o={};for(let u of s.children){let d=e(u);o[u.outlet]=d}let a=new sr(s.url,o);return s===n&&(t=a),a}let i=e(n.root),r=Iz(i);return t??r}function Lz(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return KI(r,r,r,e,i);let s=lQ(t);if(s.toRoot())return KI(r,r,new sr([],{}),e,i);let o=cQ(s,r,n),a=o.processChildren?qv(o.segmentGroup,o.index,s.commands):Oz(o.segmentGroup,o.index,s.commands);return KI(r,o.segmentGroup,a,e,i)}function PS(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Yv(n){return typeof n=="object"&&n!=null&&n.outlets}function KI(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(g=>`${g}`):`${d}`});let o;n===t?o=e:o=Nz(n,t,e);let a=Iz(Rz(o));return new Cu(a,s,r)}function Nz(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=Nz(s,t,e)}),new sr(n.segments,i)}var kS=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&PS(i[0]))throw new St(4003,!1);let r=i.find(Yv);if(r&&r!==Sz(i))throw new St(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function lQ(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new kS(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new kS(e,t,i)}var Fg=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function cQ(n,t,e){if(n.isAbsolute)return new Fg(t,!0,0);if(!e)return new Fg(t,!1,NaN);if(e.parent===null)return new Fg(e,!0,0);let i=PS(n.commands[0])?0:1,r=e.segments.length-1+i;return uQ(e,r,n.numberOfDoubleDots)}function uQ(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new St(4005,!1);r=i.segments.length}return new Fg(i,!1,r-s)}function hQ(n){return Yv(n[0])?n[0].outlets:{[pi]:n}}function Oz(n,t,e){if(n??=new sr([],{}),n.segments.length===0&&n.hasChildren())return qv(n,t,e);let i=dQ(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new sr(n.segments.slice(0,i.pathIndex),{});return s.children[pi]=new sr(n.segments.slice(i.pathIndex),n.children),qv(s,0,r)}else return i.match&&r.length===0?new sr(n.segments,{}):i.match&&!n.hasChildren()?rR(n,t,e):i.match?qv(n,0,r):rR(n,t,e)}function qv(n,t,e){if(e.length===0)return new sr(n.segments,{});{let i=hQ(e),r={};if(Object.keys(i).some(s=>s!==pi)&&n.children[pi]&&n.numberOfChildren===1&&n.children[pi].segments.length===0){let s=qv(n.children[pi],t,e);return new sr(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Oz(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new sr(n.segments,r)}}function dQ(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let o=n.segments[r],a=e[i];if(Yv(a))break;let u=`${a}`,d=i<e.length-1?e[i+1]:null;if(r>0&&u===void 0)break;if(u&&d&&typeof d=="object"&&d.outlets===void 0){if(!yz(u,d,o))return s;i+=2}else{if(!yz(u,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function rR(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Yv(s)){let u=fQ(s.outlets);return new sr(i,u)}if(r===0&&PS(e[0])){let u=n.segments[t];i.push(new kd(u.path,gz(e[0]))),r++;continue}let o=Yv(s)?s.outlets[pi]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&PS(a)?(i.push(new kd(o,gz(a))),r+=2):(i.push(new kd(o,{})),r++)}return new sr(i,{})}function fQ(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=rR(new sr([],{}),0,i))}),t}function gz(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function yz(n,t,e){return n==e.path&&wu(t,e.parameters)}var RS="imperative",zs=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(zs||{}),el=class{id;url;constructor(t,e){this.id=t,this.url=e}},Nd=class extends el{type=zs.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tl=class extends el{urlAfterRedirects;type=zs.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Sa=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Sa||{}),zg=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(zg||{}),Su=class extends el{reason;code;type=zs.NavigationCancel;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mu=class extends el{reason;code;type=zs.NavigationSkipped;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}},Ug=class extends el{error;target;type=zs.NavigationError;constructor(t,e,i,r){super(t,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Zv=class extends el{urlAfterRedirects;state;type=zs.RoutesRecognized;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},LS=class extends el{urlAfterRedirects;state;type=zs.GuardsCheckStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},NS=class extends el{urlAfterRedirects;state;shouldActivate;type=zs.GuardsCheckEnd;constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},OS=class extends el{urlAfterRedirects;state;type=zs.ResolveStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},FS=class extends el{urlAfterRedirects;state;type=zs.ResolveEnd;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},BS=class{route;type=zs.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},VS=class{route;type=zs.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zS=class{snapshot;type=zs.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},US=class{snapshot;type=zs.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},HS=class{snapshot;type=zs.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jS=class{snapshot;type=zs.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hg=class{routerEvent;position;anchor;type=zs.Scroll;constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Kv=class{},jg=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function pQ(n,t){return n.providers&&!n._injector&&(n._injector=Cv(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Sc(n){return n.outlet||pi}function mQ(n,t){let e=n.filter(i=>Sc(i)===t);return e.push(...n.filter(i=>Sc(i)!==t)),e}function r_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var WS=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return r_(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new _p(this.rootInjector)}},_p=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new WS(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)($n(_a))};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GS=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=sR(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=sR(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=oR(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return oR(t,this._root).map(e=>e.value)}};function sR(n,t){if(n===t.value)return t;for(let e of t.children){let i=sR(n,e);if(i)return i}return null}function oR(n,t){if(n===t.value)return[t];for(let e of t.children){let i=oR(n,e);if(i.length)return i.unshift(t),i}return[]}var Ja=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Og(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Qv=class extends GS{snapshot;constructor(t,e){super(t),this.snapshot=e,pR(this,t)}toString(){return this.snapshot.toString()}};function Fz(n){let t=gQ(n),e=new _s([new kd("",{})]),i=new _s({}),r=new _s({}),s=new _s({}),o=new _s(""),a=new lo(e,i,s,o,r,pi,n,t.root);return a.snapshot=t.root,new Qv(new Ja(a,[]),t)}function gQ(n){let t={},e={},i={},r="",s=new gp([],t,i,r,e,pi,n,null,{});return new Jv("",new Ja(s,[]))}var lo=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,r,s,o,a,u){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Ei(d=>d[i_]))??En(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ei(t=>yp(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ei(t=>yp(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function $S(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:Je(Je({},t.params),n.params),data:Je(Je({},t.data),n.data),resolve:Je(Je(Je(Je({},n.data),t.data),r?.data),n._resolvedData)}:i={params:Je({},n.params),data:Je({},n.data),resolve:Je(Je({},n.data),n._resolvedData??{})},r&&Vz(r)&&(i.resolve[i_]=r.title),i}var gp=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[i_]}constructor(t,e,i,r,s,o,a,u,d){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yp(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yp(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Jv=class extends GS{url;constructor(t,e){super(e),this.url=t,pR(this,e)}toString(){return Bz(this._root)}};function pR(n,t){t.value._routerState=n,t.children.forEach(e=>pR(n,e))}function Bz(n){let t=n.children.length>0?` { ${n.children.map(Bz).join(", ")} } `:"";return`${n.value}${t}`}function QI(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,wu(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),wu(t.params,e.params)||n.paramsSubject.next(e.params),WK(t.url,e.url)||n.urlSubject.next(e.url),wu(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function aR(n,t){let e=wu(n.params,t.params)&&XK(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||aR(n.parent,t.parent))}function Vz(n){return typeof n.title=="string"||n.title===null}var zz=new wn(""),bp=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=pi;activateEvents=new en;deactivateEvents=new en;attachEvents=new en;detachEvents=new en;routerOutletData=vt(void 0);parentContexts=ze(_p);location=ze(wr);changeDetector=ze(Ss);inputBinder=ze(s_,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new St(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new St(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new St(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new St(4013,!1);this._activatedRoute=e;let r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new lR(e,a,r.injector,this.routerOutletData);this.activated=r.createComponent(o,{index:r.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xn({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ks]})}return n})(),lR=class{route;childContexts;parent;outletData;constructor(t,e,i,r){this.route=t,this.childContexts=e,this.parent=i,this.outletData=r}get(t,e){return t===lo?this.route:t===_p?this.childContexts:t===zz?this.outletData:this.parent.get(t,e)}},s_=new wn(""),mR=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=tv([i.queryParams,i.params,i.data]).pipe(El(([s,o,a],u)=>(a=Je(Je(Je({},s),o),a),u===0?En(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let o=LV(i.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),gR=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&tt(0,"router-outlet")},dependencies:[bp],encapsulation:2})}return n})();function yR(n){let t=n.children&&n.children.map(yR),e=t?Mn(Je({},n),{children:t}):Je({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==pi&&(e.component=gR),e}function yQ(n,t,e){let i=e_(n,t._root,e?e._root:void 0);return new Qv(i,t)}function e_(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=vQ(n,t,e);return new Ja(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>e_(n,a)),o}}let i=_Q(t.value),r=t.children.map(s=>e_(n,s));return new Ja(i,r)}}function vQ(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return e_(n,i,r);return e_(n,i)})}function _Q(n){return new lo(new _s(n.url),new _s(n.params),new _s(n.queryParams),new _s(n.fragment),new _s(n.data),n.outlet,n.component,n)}var Wg=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},Uz="ngNavigationCancelingError";function qS(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Vg(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Hz(!1,Sa.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function Hz(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[Uz]=!0,e.cancellationCode=t,e}function bQ(n){return jz(n)&&Vg(n.url)}function jz(n){return!!n&&n[Uz]}var xQ=(n,t,e,i)=>Ei(r=>(new cR(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),cR=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),QI(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=Og(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Og(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Og(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=Og(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new jS(s.value.snapshot))}),t.children.length&&this.forwardEvent(new US(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(QI(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),QI(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,i)}},XS=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Bg=class{component;route;constructor(t,e){this.component=t,this.route=e}};function wQ(n,t,e){let i=n._root,r=t?t._root:null;return $v(i,r,e,[i.value])}function SQ(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function $g(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!VF(n)?n:t.get(n):i}function $v(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Og(t);return n.children.forEach(o=>{CQ(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Xv(a,e.getContext(o),r)),r}function CQ(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=MQ(o,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new XS(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?$v(n,t,a?a.children:null,i,r):$v(n,t,e,i,r),u&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Bg(a.outlet.component,o))}else o&&Xv(t,a,r),r.canActivateChecks.push(new XS(i)),s.component?$v(n,null,a?a.children:null,i,r):$v(n,null,e,i,r);return r}function MQ(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!mp(n.url,t.url);case"pathParamsOrQueryParamsChange":return!mp(n.url,t.url)||!wu(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!aR(n,t)||!wu(n.queryParams,t.queryParams);case"paramsChange":default:return!aR(n,t)}}function Xv(n,t,e){let i=Og(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?t?Xv(o,t.children.getContext(s),e):Xv(o,null,e):Xv(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Bg(t.outlet.component,r)):e.canDeactivateChecks.push(new Bg(null,r)):e.canDeactivateChecks.push(new Bg(null,r))}function o_(n){return typeof n=="function"}function EQ(n){return typeof n=="boolean"}function TQ(n){return n&&o_(n.canLoad)}function AQ(n){return n&&o_(n.canActivate)}function DQ(n){return n&&o_(n.canActivateChild)}function IQ(n){return n&&o_(n.canDeactivate)}function RQ(n){return n&&o_(n.canMatch)}function Wz(n){return n instanceof ah||n?.name==="EmptyError"}var TS=Symbol("INITIAL_VALUE");function Gg(){return El(n=>tv(n.map(t=>t.pipe(Cl(1),nA(TS)))).pipe(Ei(t=>{for(let e of t)if(e!==!0){if(e===TS)return TS;if(e===!1||PQ(e))return e}return!0}),Xa(t=>t!==TS),Cl(1)))}function PQ(n){return Vg(n)||n instanceof Wg}function kQ(n,t){return Ir(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?En(Mn(Je({},e),{guardsResult:!0})):LQ(o,i,r,n).pipe(Ir(a=>a&&EQ(a)?NQ(i,s,n,t):En(a)),Ei(a=>Mn(Je({},e),{guardsResult:a})))})}function LQ(n,t,e,i){return Vr(n).pipe(Ir(r=>zQ(r.component,r.route,e,t,i)),ch(r=>r!==!0,!0))}function NQ(n,t,e,i){return Vr(t).pipe(Cd(r=>Sd(FQ(r.route.parent,i),OQ(r.route,i),VQ(n,r.path,e),BQ(n,r.route,e))),ch(r=>r!==!0,!0))}function OQ(n,t){return n!==null&&t&&t(new HS(n)),En(!0)}function FQ(n,t){return n!==null&&t&&t(new zS(n)),En(!0)}function BQ(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return En(!0);let r=i.map(s=>$x(()=>{let o=r_(t)??e,a=$g(s,o),u=AQ(a)?a.canActivate(t,n):Al(o,()=>a(t,n));return Od(u).pipe(ch())}));return En(r).pipe(Gg())}function VQ(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>SQ(o)).filter(o=>o!==null).map(o=>$x(()=>{let a=o.guards.map(u=>{let d=r_(o.node)??e,g=$g(u,d),v=DQ(g)?g.canActivateChild(i,n):Al(d,()=>g(i,n));return Od(v).pipe(ch())});return En(a).pipe(Gg())}));return En(s).pipe(Gg())}function zQ(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return En(!0);let o=s.map(a=>{let u=r_(t)??r,d=$g(a,u),g=IQ(d)?d.canDeactivate(n,t,e,i):Al(u,()=>d(n,t,e,i));return Od(g).pipe(ch())});return En(o).pipe(Gg())}function UQ(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return En(!0);let s=r.map(o=>{let a=$g(o,n),u=TQ(a)?a.canLoad(t,e):Al(n,()=>a(t,e));return Od(u)});return En(s).pipe(Gg(),Gz(i))}function Gz(n){return $T(ao(t=>{if(typeof t!="boolean")throw qS(n,t)}),Ei(t=>t===!0))}function HQ(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return En(!0);let s=r.map(o=>{let a=$g(o,n),u=RQ(a)?a.canMatch(t,e):Al(n,()=>a(t,e));return Od(u)});return En(s).pipe(Gg(),Gz(i))}var t_=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},n_=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Ng(n){return ig(new t_(n))}function jQ(n){return ig(new St(4e3,!1))}function WQ(n){return ig(Hz(!1,Sa.GuardRejected))}var uR=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return En(i);if(r.numberOfChildren>1||!r.children[pi])return jQ(`${t.redirectTo}`);r=r.children[pi]}}applyRedirectCommands(t,e,i,r,s){if(typeof e!="string"){let a=e,{queryParams:u,fragment:d,routeConfig:g,url:v,outlet:x,params:C,data:A,title:O}=r,N=Al(s,()=>a({params:C,data:A,queryParams:u,fragment:d,routeConfig:g,url:v,outlet:x,title:O}));if(N instanceof Cu)throw new n_(N);e=N}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new n_(o);return o}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new Cu(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=e[a]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),o={};return Object.entries(e.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(t,u,i,r)}),new sr(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new St(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},hR={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function GQ(n,t,e,i,r){let s=$z(n,t,e);return s.matched?(i=pQ(t,i),HQ(i,t,e,r).pipe(Ei(o=>o===!0?s:Je({},hR)))):En(s)}function $z(n,t,e){if(t.path==="**")return $Q(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?Je({},hR):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||xz)(e,n,t);if(!r)return Je({},hR);let s={};Object.entries(r.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=r.consumed.length>0?Je(Je({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function $Q(n){return{matched:!0,parameters:n.length>0?Sz(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function vz(n,t,e,i){return e.length>0&&YQ(n,e,i)?{segmentGroup:new sr(t,XQ(i,new sr(e,n.children))),slicedSegments:[]}:e.length===0&&ZQ(n,e,i)?{segmentGroup:new sr(n.segments,qQ(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new sr(n.segments,n.children),slicedSegments:e}}function qQ(n,t,e,i){let r={};for(let s of e)if(ZS(n,t,s)&&!i[Sc(s)]){let o=new sr([],{});r[Sc(s)]=o}return Je(Je({},i),r)}function XQ(n,t){let e={};e[pi]=t;for(let i of n)if(i.path===""&&Sc(i)!==pi){let r=new sr([],{});e[Sc(i)]=r}return e}function YQ(n,t,e){return e.some(i=>ZS(n,t,i)&&Sc(i)!==pi)}function ZQ(n,t,e){return e.some(i=>ZS(n,t,i))}function ZS(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function KQ(n,t,e){return t.length===0&&!n.children[e]}var dR=class{};function QQ(n,t,e,i,r,s,o="emptyOnly"){return new fR(n,t,e,i,r,o,s).recognize()}var JQ=31,fR=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new uR(this.urlSerializer,this.urlTree)}noMatchError(t){return new St(4002,`'${t.segmentGroup}'`)}recognize(){let t=vz(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Ei(({children:e,rootSnapshot:i})=>{let r=new Ja(i,e),s=new Jv("",r),o=Pz(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new gp([],Object.freeze({}),Object.freeze(Je({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),pi,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,pi,e).pipe(Ei(i=>({children:i,rootSnapshot:e})),lh(i=>{if(i instanceof n_)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof t_?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,s):this.processSegment(t,e,i,i.segments,r,!0,s).pipe(Ei(o=>o instanceof Ja?[o]:[]))}processChildren(t,e,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return Vr(s).pipe(Cd(o=>{let a=i.children[o],u=mQ(e,o);return this.processSegmentGroup(t,u,a,o,r)}),tA((o,a)=>(o.push(...a),o)),Md(null),eA(),Ir(o=>{if(o===null)return Ng(i);let a=qz(o);return eJ(a),En(a)}))}processSegment(t,e,i,r,s,o,a){return Vr(e).pipe(Cd(u=>this.processSegmentAgainstRoute(u._injector??t,e,u,i,r,s,o,a).pipe(lh(d=>{if(d instanceof t_)return En(null);throw d}))),ch(u=>!!u),lh(u=>{if(Wz(u))return KQ(i,r,s)?En(new dR):Ng(i);throw u}))}processSegmentAgainstRoute(t,e,i,r,s,o,a,u){return Sc(i)!==o&&(o===pi||!ZS(r,s,i))?Ng(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o,u):Ng(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o,a){let{matched:u,parameters:d,consumedSegments:g,positionalParamSegments:v,remainingSegments:x}=$z(e,r,s);if(!u)return Ng(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>JQ&&(this.allowRedirects=!1));let C=new gp(s,d,Object.freeze(Je({},this.urlTree.queryParams)),this.urlTree.fragment,_z(r),Sc(r),r.component??r._loadedComponent??null,r,bz(r)),A=$S(C,a,this.paramsInheritanceStrategy);C.params=Object.freeze(A.params),C.data=Object.freeze(A.data);let O=this.applyRedirects.applyRedirectCommands(g,r.redirectTo,v,C,t);return this.applyRedirects.lineralizeSegments(r,O).pipe(Ir(N=>this.processSegment(t,i,e,N.concat(x),o,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,s,o){let a=GQ(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(El(u=>u.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(El(({routes:d})=>{let g=i._loadedInjector??t,{parameters:v,consumedSegments:x,remainingSegments:C}=u,A=new gp(x,v,Object.freeze(Je({},this.urlTree.queryParams)),this.urlTree.fragment,_z(i),Sc(i),i.component??i._loadedComponent??null,i,bz(i)),O=$S(A,o,this.paramsInheritanceStrategy);A.params=Object.freeze(O.params),A.data=Object.freeze(O.data);let{segmentGroup:N,slicedSegments:T}=vz(e,x,C,d);if(T.length===0&&N.hasChildren())return this.processChildren(g,d,N,A).pipe(Ei(Z=>new Ja(A,Z)));if(d.length===0&&T.length===0)return En(new Ja(A,[]));let j=Sc(i)===s;return this.processSegment(g,d,N,T,j?pi:s,!0,A).pipe(Ei(Z=>new Ja(A,Z instanceof Ja?[Z]:[])))}))):Ng(e)))}getChildConfig(t,e,i){return e.children?En({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?En({routes:e._loadedRoutes,injector:e._loadedInjector}):UQ(t,e,i,this.urlSerializer).pipe(Ir(r=>r?this.configLoader.loadChildren(t,e).pipe(ao(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):WQ(e))):En({routes:[],injector:t})}};function eJ(n){n.sort((t,e)=>t.value.outlet===pi?-1:e.value.outlet===pi?1:t.value.outlet.localeCompare(e.value.outlet))}function tJ(n){let t=n.value.routeConfig;return t&&t.path===""}function qz(n){let t=[],e=new Set;for(let i of n){if(!tJ(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=qz(i.children);t.push(new Ja(i.value,r))}return t.filter(i=>!e.has(i))}function _z(n){return n.data||{}}function bz(n){return n.resolve||{}}function nJ(n,t,e,i,r,s){return Ir(o=>QQ(n,t,e,i,o.extractedUrl,r,s).pipe(Ei(({state:a,tree:u})=>Mn(Je({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function iJ(n,t){return Ir(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return En(e);let s=new Set(r.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let d of Xz(u))o.add(d);let a=0;return Vr(o).pipe(Cd(u=>s.has(u)?rJ(u,i,n,t):(u.data=$S(u,u.parent,n).resolve,En(void 0))),ao(()=>a++),og(1),Ir(u=>a===o.size?En(e):pa))})}function Xz(n){let t=n.children.map(e=>Xz(e)).flat();return[n,...t]}function rJ(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!Vz(r)&&(s[i_]=r.title),sJ(s,n,t,i).pipe(Ei(o=>(n._resolvedData=o,n.data=$S(n,n.parent,e).resolve,null)))}function sJ(n,t,e,i){let r=tR(n);if(r.length===0)return En({});let s={};return Vr(r).pipe(Ir(o=>oJ(n[o],t,e,i).pipe(ch(),ao(a=>{if(a instanceof Wg)throw qS(new Ld,a);s[o]=a}))),og(1),Ei(()=>s),lh(o=>Wz(o)?pa:ig(o)))}function oJ(n,t,e,i){let r=r_(t)??i,s=$g(n,r),o=s.resolve?s.resolve(t,e):Al(r,()=>s(t,e));return Od(o)}function JI(n){return El(t=>{let e=n(t);return e?Vr(e).pipe(Ei(()=>t)):En(t)})}var vR=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===pi);return i}getResolvedTitleForRoute(e){return e.data[i_]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>ze(Yz),providedIn:"root"})}return n})(),Yz=(()=>{class n extends vR{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)($n(fz))};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xp=new wn("",{providedIn:"root",factory:()=>({})}),wp=new wn(""),KS=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=ze(AV);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return En(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=Od(e.loadComponent()).pipe(Ei(Kz),ao(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),nv(()=>{this.componentLoaders.delete(e)})),r=new eg(i,()=>new Jr).pipe(Jm());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return En({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=Zz(i,this.compiler,e,this.onLoadEndListener).pipe(nv(()=>{this.childrenLoaders.delete(i)})),o=new eg(s,()=>new Jr).pipe(Jm());return this.childrenLoaders.set(i,o),o}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zz(n,t,e,i){return Od(n.loadChildren()).pipe(Ei(Kz),Ir(r=>r instanceof bI||Array.isArray(r)?En(r):Vr(t.compileModuleAsync(r))),Ei(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(e).injector,o=s.get(wp,[],{optional:!0,self:!0}).flat()),{routes:o.map(yR),injector:s}}))}function aJ(n){return n&&typeof n=="object"&&"default"in n}function Kz(n){return aJ(n)?n.default:n}var QS=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>ze(lJ),providedIn:"root"})}return n})(),lJ=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_R=new wn(""),bR=new wn("");function Qz(n,t,e){let i=n.get(bR),r=n.get(Zr);return n.get(br).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),a=r.startViewTransition(()=>(s(),cJ(n))),{onViewTransitionCreated:u}=i;return u&&Al(n,()=>u({transition:a,from:t,to:e})),o})}function cJ(n){return new Promise(t=>{eI({read:()=>setTimeout(t)},{injector:n})})}var xR=new wn(""),JS=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Jr;transitionAbortSubject=new Jr;configLoader=ze(KS);environmentInjector=ze(_a);destroyRef=ze(Dl);urlSerializer=ze(vp);rootContexts=ze(_p);location=ze(xu);inputBindingEnabled=ze(s_,{optional:!0})!==null;titleStrategy=ze(vR);options=ze(xp,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=ze(QS);createViewTransition=ze(_R,{optional:!0});navigationErrorHandler=ze(xR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>En(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new BS(r)),i=r=>this.events.next(new VS(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(Mn(Je({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(e){return this.transitions=new _s(null),this.transitions.pipe(Xa(i=>i!==null),El(i=>{let r=!1,s=!1;return En(i).pipe(El(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Sa.SupersededByNewNavigation),pa;this.currentTransition=i,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Mn(Je({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=o.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&u!=="reload"){let d="";return this.events.next(new Mu(o.id,this.urlSerializer.serialize(o.rawUrl),d,zg.IgnoredSameUrlNavigation)),o.resolve(!1),pa}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return En(o).pipe(El(d=>(this.events.next(new Nd(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?pa:Promise.resolve(d))),nJ(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),ao(d=>{i.targetSnapshot=d.targetSnapshot,i.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=Mn(Je({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let g=new Zv(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:d,extractedUrl:g,source:v,restoredState:x,extras:C}=o,A=new Nd(d,this.urlSerializer.serialize(g),v,x);this.events.next(A);let O=Fz(this.rootComponentType).snapshot;return this.currentTransition=i=Mn(Je({},o),{targetSnapshot:O,urlAfterRedirects:g,extras:Mn(Je({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,En(i)}else{let d="";return this.events.next(new Mu(o.id,this.urlSerializer.serialize(o.extractedUrl),d,zg.IgnoredByUrlHandlingStrategy)),o.resolve(!1),pa}}),ao(o=>{let a=new LS(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Ei(o=>(this.currentTransition=i=Mn(Je({},o),{guards:wQ(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),kQ(this.environmentInjector,o=>this.events.next(o)),ao(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw qS(this.urlSerializer,o.guardsResult);let a=new NS(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Xa(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Sa.GuardRejected),!1)),JI(o=>{if(o.guards.canActivateChecks.length!==0)return En(o).pipe(ao(a=>{let u=new OS(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),El(a=>{let u=!1;return En(a).pipe(iJ(this.paramsInheritanceStrategy,this.environmentInjector),ao({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Sa.NoDataFromResolver)}}))}),ao(a=>{let u=new FS(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),JI(o=>{let a=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(ao(g=>{u.component=g}),Ei(()=>{})));for(let g of u.children)d.push(...a(g));return d};return tv(a(o.targetSnapshot.root)).pipe(Md(null),Cl(1))}),JI(()=>this.afterPreactivation()),El(()=>{let{currentSnapshot:o,targetSnapshot:a}=i,u=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return u?Vr(u).pipe(Ei(()=>i)):En(i)}),Ei(o=>{let a=yQ(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=Mn(Je({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),ao(()=>{this.events.next(new Kv)}),xQ(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Cl(1),ao({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tl(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Gf(this.transitionAbortSubject.pipe(ao(o=>{throw o}))),nv(()=>{!r&&!s&&this.cancelNavigationTransition(i,"",Sa.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),lh(o=>{if(this.destroyed)return i.resolve(!1),pa;if(s=!0,jz(o))this.events.next(new Su(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),bQ(o)?this.events.next(new jg(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Ug(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let u=Al(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Wg){let{message:d,cancellationCode:g}=qS(this.urlSerializer,u);this.events.next(new Su(i.id,this.urlSerializer.serialize(i.extractedUrl),d,g)),this.events.next(new jg(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(u){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(u)}}return pa}))}))}cancelNavigationTransition(e,i,r){let s=new Su(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uJ(n){return n!==RS}var Jz=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>ze(hJ),providedIn:"root"})}return n})(),YS=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},hJ=(()=>{class n extends YS{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eU=(()=>{class n{urlSerializer=ze(vp);options=ze(xp,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=ze(xu);urlHandlingStrategy=ze(QS);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Cu;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let s=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,o=r??s;return o instanceof Cu?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=Fz(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:()=>ze(dJ),providedIn:"root"})}return n})(),dJ=(()=>{class n extends eU{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof Nd?this.updateStateMemento():e instanceof Mu?this.commitTransition(i):e instanceof Zv?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Kv?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Su&&(e.code===Sa.GuardRejected||e.code===Sa.NoDataFromResolver)?this.restoreHistory(i):e instanceof Ug?this.restoreHistory(i,!0):e instanceof tl&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:s,state:o}=i;if(this.location.isCurrentPathEqualTo(e)||s){let a=this.browserPageId,u=Je(Je({},o),this.generateNgRouterState(r,a));this.location.replaceState(e,"",u)}else{let a=Je(Je({},o),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===e.finalUrl&&s===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eC(n,t){n.events.pipe(Xa(e=>e instanceof tl||e instanceof Su||e instanceof Ug||e instanceof Mu),Ei(e=>e instanceof tl||e instanceof Mu?0:(e instanceof Su?e.code===Sa.Redirect||e.code===Sa.SupersededByNewNavigation:!1)?2:1),Xa(e=>e!==2),Cl(1)).subscribe(()=>{t()})}var fJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},co=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=ze(eV);stateManager=ze(eU);options=ze(xp,{optional:!0})||{};pendingTasks=ze(Tg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=ze(JS);urlSerializer=ze(vp);location=ze(xu);urlHandlingStrategy=ze(QS);_events=new Jr;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=ze(Jz);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=ze(wp,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!ze(s_,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Qr;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Su&&i.code!==Sa.Redirect&&i.code!==Sa.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof tl)this.navigated=!0;else if(i instanceof jg){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u=Je({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||uJ(r.source)},o);this.scheduleNavigation(a,RS,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}gJ(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),RS,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let u=Je({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(yR),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=i,d=u?this.currentUrlTree.fragment:o,g=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":g=Je(Je({},this.currentUrlTree.queryParams),s);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=s||null}g!==null&&(g=this.removeEmptyProps(g));let v;try{let x=r?r.snapshot:this.routerState.snapshot.root;v=kz(x)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),v=this.currentUrlTree.root}return Lz(v,e,g,d??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Vg(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,RS,null,i)}navigate(e,i={skipLocationChange:!1}){return mJ(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=Je({},fJ):i===!1?r=Je({},pJ):r=i,Vg(e))return pz(this.currentUrlTree,e,r);let s=this.parseUrl(e);return pz(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(e,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((v,x)=>{a=v,u=x});let g=this.pendingTasks.add();return eC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(v=>Promise.reject(v))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mJ(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new St(4008,!1)}function gJ(n){return!(n instanceof Kv)&&!(n instanceof jg)}var a_=class{};var tU=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,i,r,s){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Xa(e=>e instanceof tl),Cd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Cv(s.providers,e,`Route: ${s.path}`));let o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Vr(r).pipe(sg())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=En(null);let s=r.pipe(Ir(o=>o===null?En(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(i.loadComponent&&!i._loadedComponent){let o=this.loader.loadComponent(i);return Vr([s,o]).pipe(sg())}else return s})}static \u0275fac=function(i){return new(i||n)($n(co),$n(_a),$n(a_),$n(KS))};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nU=new wn(""),yJ=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,i,r,s,o={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Nd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof tl?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Mu&&e.code===zg.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Hg&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Hg(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){FB()};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();function SR(n,...t){return Bw([{provide:wp,multi:!0,useValue:n},[],{provide:lo,useFactory:iU,deps:[co]},{provide:tS,multi:!0,useFactory:rU},t.map(e=>e.\u0275providers)])}function iU(n){return n.routerState.root}function qg(n,t){return{\u0275kind:n,\u0275providers:t}}function rU(){let n=ze(Bs);return t=>{let e=n.get(ap);if(t!==e.components[0])return;let i=n.get(co),r=n.get(sU);n.get(CR)===1&&i.initialNavigation(),n.get(lU,null,xi.Optional)?.setUpPreloading(),n.get(nU,null,xi.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var sU=new wn("",{factory:()=>new Jr}),CR=new wn("",{providedIn:"root",factory:()=>1});function oU(){let n=[{provide:CR,useValue:0},CI(()=>{let t=ze(Bs);return t.get(II,Promise.resolve()).then(()=>new Promise(i=>{let r=t.get(co),s=t.get(sU);eC(r,()=>{i(!0)}),t.get(JS).afterPreactivation=()=>(i(!0),s.closed?En(void 0):s),r.initialNavigation()}))})];return qg(2,n)}function aU(){let n=[CI(()=>{ze(co).setUpLocationChangeListener()}),{provide:CR,useValue:2}];return qg(3,n)}var lU=new wn("");function cU(n){return qg(0,[{provide:lU,useExisting:tU},{provide:a_,useExisting:n}])}function MR(){return qg(6,[{provide:bu,useClass:bS}])}function uU(){return qg(8,[mR,{provide:s_,useExisting:mR}])}function hU(n){yu("NgRouterViewTransitions");let t=[{provide:_R,useValue:Qz},{provide:bR,useValue:Je({skipNextTransition:!!n?.skipInitialTransition},n)}];return qg(9,t)}var dU=[xu,{provide:vp,useClass:Ld},co,_p,{provide:lo,useFactory:iU,deps:[co]},KS,[]],l_=(()=>{class n{constructor(){}static forRoot(e,i){return{ngModule:n,providers:[dU,[],{provide:wp,multi:!0,useValue:e},[],i?.errorHandler?{provide:xR,useValue:i.errorHandler}:[],{provide:xp,useValue:i||{}},i?.useHash?_J():bJ(),vJ(),i?.preloadingStrategy?cU(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?xJ(i):[],i?.bindToComponentInputs?uU().\u0275providers:[],i?.enableViewTransitions?hU().\u0275providers:[],wJ()]}}static forChild(e){return{ngModule:n,providers:[{provide:wp,multi:!0,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Xo({type:n});static \u0275inj=$o({})}return n})();function vJ(){return{provide:nU,useFactory:()=>{let n=ze(rz),t=ze(br),e=ze(xp),i=ze(JS),r=ze(vp);return e.scrollOffset&&n.setOffset(e.scrollOffset),new yJ(r,i,n,t,e)}}}function _J(){return{provide:bu,useClass:bS}}function bJ(){return{provide:bu,useClass:hS}}function xJ(n){return[n.initialNavigation==="disabled"?aU().\u0275providers:[],n.initialNavigation==="enabledBlocking"?oU().\u0275providers:[]]}var wR=new wn("");function wJ(){return[{provide:wR,useFactory:rU},{provide:tS,multi:!0,useExisting:wR}]}var CJ=["iconHost"],MJ=(n,t,e,i,r,s,o,a,u,d)=>({"text-healthy":n,"text-warn":t,"text-critical":e,"text-secondary":i,"bg-healthy":r,"bg-warn":s,"bg-critical":o,"bg-secondary":a,"bg-white":u,"text-white":d}),Fd=(()=>{class n{color=vt.required();iconComponent=vt();text=vt();inverted=vt(!1);isContentEmpty=cn(()=>this.text()===void 0||this.text()==="");iconHost;ngAfterViewInit(){this.initIcon(this.iconComponent())}initIcon(e){if(this.iconHost.remove(),!e)return;let i=this.iconHost.createComponent(e);i.setInput("size","small"),this.inverted()?i.setInput("color",this.color()):i.setInput("color","white"),i.changeDetectorRef.detectChanges()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-badge"]],viewQuery:function(i,r){if(i&1&&Oi(CJ,5,wr),i&2){let s;Hn(s=jn())&&(r.iconHost=s.first)}},inputs:{color:[1,"color"],iconComponent:[1,"iconComponent"],text:[1,"text"],inverted:[1,"inverted"]},decls:4,vars:15,consts:[["iconHost",""],[1,"badge","gap-1","font-medium","inline-flex","justify-center","items-center","rounded-lg","border","border-white",3,"ngClass"]],template:function(i,r){i&1&&(ge(0,"span",1),Ko(1,null,0),ot(3),ye()),i&2&&(Si("empty-text",r.isContentEmpty()),Ne("ngClass",CV(4,MJ,[r.inverted()&&r.color()==="healthy",r.inverted()&&r.color()==="warn",r.inverted()&&r.color()==="critical",r.inverted()&&r.color()==="secondary",!r.inverted()&&r.color()==="healthy",!r.inverted()&&r.color()==="warn",!r.inverted()&&r.color()==="critical",!r.inverted()&&r.color()==="secondary",r.inverted(),!r.inverted()])),xe(3),Ci(" ",r.text(),`
`))},dependencies:[Nt,ls],styles:[".badge[_ngcontent-%COMP%]{width:max(fit-content,8rem);padding:.25rem .5rem}.badge.empty-text[_ngcontent-%COMP%]{aspect-ratio:1;padding:.25rem}"],changeDetection:0})}return n})();var EJ=["leftIconHost"],TJ=["rightIconHost"],AJ=["centerIconHost"],DJ=["*"],IJ=(n,t,e,i)=>({"bg-primary":n,"bg-critical hover:hover:bg-red-700":t,"bg-warn hover:hover:bg-warn-dark":e,"bg-secondary hover:hover:bg-gray-500":i});function RJ(n,t){n&1&&(Yo(0),Ko(1,null,0),Zo())}function PJ(n,t){if(n&1&&(Yo(0),ge(1,"span",6),Rl(2),ye(),Zo()),n&2){let e=Ae();xe(),Si("ms-2",e.iconComponent()&&e.position()==="left")("me-2",e.iconComponent()&&e.position()==="right")}}function kJ(n,t){n&1&&(Yo(0),Ko(1,null,1),Zo())}function LJ(n,t){n&1&&(Yo(0),Ko(1,null,2),Zo())}var Eu=(()=>{class n{iconComponent=vt(void 0);position=vt("left");type=vt("primary");fullWidth=vt(!1);clicked=nr();leftIconHost;rightIconHost;centerIconHost;ngAfterViewInit(){this.iconComponent()&&this.position()==="left"&&this.initIcon(this.iconComponent(),this.leftIconHost),this.iconComponent()&&this.position()==="right"&&this.initIcon(this.iconComponent(),this.rightIconHost),this.iconComponent()&&this.position()==="center"&&this.initIcon(this.iconComponent(),this.centerIconHost)}initIcon(e,i){if(!e)return;let r=i.createComponent(e);r.setInput("size","small"),r.setInput("color","white"),r.changeDetectorRef.detectChanges()}onClicked(){this.clicked.emit()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-button"]],viewQuery:function(i,r){if(i&1&&(Oi(EJ,5,wr),Oi(TJ,5,wr),Oi(AJ,5,wr)),i&2){let s;Hn(s=jn())&&(r.leftIconHost=s.first),Hn(s=jn())&&(r.rightIconHost=s.first),Hn(s=jn())&&(r.centerIconHost=s.first)}},inputs:{iconComponent:[1,"iconComponent"],position:[1,"position"],type:[1,"type"],fullWidth:[1,"fullWidth"]},outputs:{clicked:"clicked"},ngContentSelectors:DJ,decls:7,vars:16,consts:[["leftIconHost",""],["rightIconHost",""],["centerIconHost",""],["type","button",1,"text-white","transition-colors","cursor-pointer","transition-all","hover:bg-gray-900","focus:ring-0","font-medium","rounded-lg","text-sm","py-2","inline-flex","items-center","justify-center",3,"click","ngClass"],[4,"ngIf"],[1,"sr-only"],[1,"button-text"]],template:function(i,r){i&1&&(_u(),ge(0,"button",3),bt("click",function(){return r.onClicked()}),It(1,RJ,3,0,"ng-container",4)(2,PJ,3,4,"ng-container",4)(3,kJ,3,0,"ng-container",4)(4,LJ,3,0,"ng-container",4),ge(5,"span",5),ot(6,"Icon label"),ye()()),i&2&&(Si("px-4",r.position()!=="center")("px-2",r.position()==="center")("w-full",r.fullWidth()),Ne("ngClass",Rd(11,IJ,r.type()==="primary",r.type()==="critical",r.type()==="warn",r.type()==="secondary")),xe(),Ne("ngIf",r.iconComponent()&&r.position()==="left"),xe(),Ne("ngIf",r.position()!=="center"),xe(),Ne("ngIf",r.iconComponent()&&r.position()==="right"),xe(),Ne("ngIf",r.iconComponent()&&r.position()==="center"))},dependencies:[Nt,ls,Ka],styles:[".no-spacing[_ngcontent-%COMP%]:not(:empty){padding:0!important;margin:0!important}.button-text[_ngcontent-%COMP%]{min-height:1.25em}"]})}return n})();var NJ=["leftIconHost"],OJ=["middleIconHost"],FJ=["rightIconHost"],ER=(n,t,e,i)=>({"text-white":n,"bg-primary":t,"bg-white":e,"text-primary":i});function BJ(n,t){n&1&&Ko(0,null,0)}function VJ(n,t){if(n&1){let e=Dn();ge(0,"button",7),bt("click",function(){gt(e);let r=Ae();return yt(r.onLeftClicked())}),It(1,BJ,2,0,"ng-container",8),ot(2),ye()}if(n&2){let e=Ae();Ne("ngClass",Rd(3,ER,e.activeButton()==="left",e.activeButton()==="left",e.activeButton()!=="left",e.activeButton()!=="left")),xe(),Ne("ngIf",e.iconLeftComponent()),xe(),Ci(" ",e.labelLeft()," ")}}function zJ(n,t){n&1&&Ko(0,null,1)}function UJ(n,t){if(n&1){let e=Dn();ge(0,"button",9),bt("click",function(){gt(e);let r=Ae();return yt(r.onMiddleClicked())}),It(1,zJ,2,0,"ng-container",8),ot(2),ye()}if(n&2){let e=Ae();Ne("ngClass",Rd(3,ER,e.activeButton()==="middle",e.activeButton()==="middle",e.activeButton()!=="middle",e.activeButton()!=="middle")),xe(),Ne("ngIf",e.iconMiddleComponent()),xe(),Ci(" ",e.labelMiddle()," ")}}function HJ(n,t){n&1&&Ko(0,null,2)}function jJ(n,t){if(n&1){let e=Dn();ge(0,"button",10),bt("click",function(){gt(e);let r=Ae();return yt(r.onRightClicked())}),It(1,HJ,2,0,"ng-container",8),ot(2),ye()}if(n&2){let e=Ae();Ne("ngClass",Rd(3,ER,e.activeButton()==="right",e.activeButton()==="right",e.activeButton()!=="right",e.activeButton()!=="right")),xe(),Ne("ngIf",e.iconRightComponent()),xe(),Ci(" ",e.labelRight()," ")}}var pU=(()=>{class n{labelLeft=vt();labelMiddle=vt();labelRight=vt();iconLeftComponent=vt();iconMiddleComponent=vt();iconRightComponent=vt();activeButton=qB("left");leftClicked=nr();middleClicked=nr();rightClicked=nr();leftIconHost;middleIconHost;rightIconHost;ngAfterViewInit(){this.iconLeftComponent()&&this.initIcon(this.iconLeftComponent(),this.leftIconHost),this.iconMiddleComponent()&&this.initIcon(this.iconMiddleComponent(),this.middleIconHost),this.iconRightComponent()&&this.initIcon(this.iconRightComponent(),this.rightIconHost)}onLeftClicked(){this.activeButton.set("left"),this.leftClicked.emit(null)}onMiddleClicked(){this.activeButton.set("middle"),this.middleClicked.emit(null)}onRightClicked(){this.activeButton.set("right"),this.rightClicked.emit(null)}initIcon(e,i){if(!e)return;let r=i.createComponent(e);r.setInput("size","small"),r.changeDetectorRef.detectChanges()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-button-group"]],viewQuery:function(i,r){if(i&1&&(Oi(NJ,5,wr),Oi(OJ,5,wr),Oi(FJ,5,wr)),i&2){let s;Hn(s=jn())&&(r.leftIconHost=s.first),Hn(s=jn())&&(r.middleIconHost=s.first),Hn(s=jn())&&(r.rightIconHost=s.first)}},inputs:{labelLeft:[1,"labelLeft"],labelMiddle:[1,"labelMiddle"],labelRight:[1,"labelRight"],iconLeftComponent:[1,"iconLeftComponent"],iconMiddleComponent:[1,"iconMiddleComponent"],iconRightComponent:[1,"iconRightComponent"],activeButton:[1,"activeButton"]},outputs:{activeButton:"activeButtonChange",leftClicked:"leftClicked",middleClicked:"middleClicked",rightClicked:"rightClicked"},decls:4,vars:3,consts:[["leftIconHost",""],["middleIconHost",""],["rightIconHost",""],["role","group",1,"inline-flex","rounded-md","shadow-xs"],["type","button","class","cursor-pointer inline-flex gap-1 items-center text-sm px-5 py-2.5 font-medium border border-primary rounded-s-lg hover:bg-gray-900 hover:text-white focus:ring-2 focus:ring-secondary",3,"ngClass","click",4,"ngIf"],["type","button","class","cursor-pointer inline-flex gap-1 items-center text-sm px-5 py-2.5 font-medium border-t border-b border-primary hover:bg-gray-900 hover:text-white focus:ring-2 focus:ring-secondary",3,"ngClass","click",4,"ngIf"],["type","button","class","cursor-pointer inline-flex gap-1 items-center text-sm px-5 py-2.5 font-medium border border-primary rounded-e-lg hover:bg-gray-900 hover:text-white focus:ring-2 focus:ring-secondary",3,"ngClass","click",4,"ngIf"],["type","button",1,"cursor-pointer","inline-flex","gap-1","items-center","text-sm","px-5","py-2.5","font-medium","border","border-primary","rounded-s-lg","hover:bg-gray-900","hover:text-white","focus:ring-2","focus:ring-secondary",3,"click","ngClass"],[4,"ngIf"],["type","button",1,"cursor-pointer","inline-flex","gap-1","items-center","text-sm","px-5","py-2.5","font-medium","border-t","border-b","border-primary","hover:bg-gray-900","hover:text-white","focus:ring-2","focus:ring-secondary",3,"click","ngClass"],["type","button",1,"cursor-pointer","inline-flex","gap-1","items-center","text-sm","px-5","py-2.5","font-medium","border","border-primary","rounded-e-lg","hover:bg-gray-900","hover:text-white","focus:ring-2","focus:ring-secondary",3,"click","ngClass"]],template:function(i,r){i&1&&(ge(0,"div",3),It(1,VJ,3,8,"button",4)(2,UJ,3,8,"button",5)(3,jJ,3,8,"button",6),ye()),i&2&&(xe(),Ne("ngIf",r.iconLeftComponent()||r.labelLeft()),xe(),Ne("ngIf",r.iconMiddleComponent()||r.labelMiddle()),xe(),Ne("ngIf",r.iconRightComponent()||r.labelRight()))},dependencies:[Nt,ls,Ka],encapsulation:2,changeDetection:0})}return n})();var CU=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(Nn(Za),Nn(Rr))};static \u0275dir=Xn({type:n})}return n})(),lC=(()=>{class n extends CU{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275dir=Xn({type:n,features:[si]})}return n})(),m_=new wn(""),WJ={provide:m_,useExisting:pu(()=>IR),multi:!0},IR=(()=>{class n extends lC{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275dir=Xn({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&bt("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[So([WJ]),si]})}return n})(),GJ={provide:m_,useExisting:pu(()=>Vd),multi:!0};function $J(){let n=kl()?kl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var qJ=new wn(""),Vd=(()=>{class n extends CU{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!$J())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(Nn(Za),Nn(Rr),Nn(qJ,8))};static \u0275dir=Xn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&bt("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},standalone:!1,features:[So([GJ]),si]})}return n})();function XJ(n){return n==null||YJ(n)===0}function YJ(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var RR=new wn(""),MU=new wn("");function ZJ(n){return XJ(n.value)?{required:!0}:null}function mU(n){return null}function EU(n){return n!=null}function TU(n){return Id(n)?Vr(n):n}function AU(n){let t={};return n.forEach(e=>{t=e!=null?Je(Je({},t),e):t}),Object.keys(t).length===0?null:t}function DU(n,t){return t.map(e=>e(n))}function KJ(n){return!n.validate}function IU(n){return n.map(t=>KJ(t)?t:e=>t.validate(e))}function QJ(n){if(!n)return null;let t=n.filter(EU);return t.length==0?null:function(e){return AU(DU(e,t))}}function PR(n){return n!=null?QJ(IU(n)):null}function JJ(n){if(!n)return null;let t=n.filter(EU);return t.length==0?null:function(e){let i=DU(e,t).map(TU);return QT(i).pipe(Ei(AU))}}function kR(n){return n!=null?JJ(IU(n)):null}function gU(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function eee(n){return n._rawValidators}function tee(n){return n._rawAsyncValidators}function TR(n){return n?Array.isArray(n)?n:[n]:[]}function nC(n,t){return Array.isArray(n)?n.includes(t):n===t}function yU(n,t){let e=TR(t);return TR(n).forEach(r=>{nC(e,r)||e.push(r)}),e}function vU(n,t){return TR(t).filter(e=>!nC(n,e))}var iC=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=PR(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=kR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Zg=class extends iC{name;get formDirective(){return null}get path(){return null}},p_=class extends iC{_parent=null;name=null;valueAccessor=null},rC=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},nee={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},vSe=Mn(Je({},nee),{"[class.ng-submitted]":"isSubmitted"}),Kg=(()=>{class n extends rC{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(Nn(p_,2))};static \u0275dir=Xn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Si("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[si]})}return n})(),cC=(()=>{class n extends rC{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(Nn(Zg,10))};static \u0275dir=Xn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Si("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[si]})}return n})();var c_="VALID",tC="INVALID",Xg="PENDING",u_="DISABLED",Bd=class{},sC=class extends Bd{value;source;constructor(t,e){super(),this.value=t,this.source=e}},d_=class extends Bd{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},f_=class extends Bd{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Yg=class extends Bd{status;source;constructor(t,e){super(),this.status=t,this.source=e}},AR=class extends Bd{source;constructor(t){super(),this.source=t}},DR=class extends Bd{source;constructor(t){super(),this.source=t}};function RU(n){return(uC(n)?n.validators:n)||null}function iee(n){return Array.isArray(n)?PR(n):n||null}function PU(n,t){return(uC(t)?t.asyncValidators:n)||null}function ree(n){return Array.isArray(n)?kR(n):n||null}function uC(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function see(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new St(1e3,"");if(!i[e])throw new St(1001,"")}function oee(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new St(1002,"")})}var oC=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Jo(this.statusReactive)}set status(t){Jo(()=>this.statusReactive.set(t))}_status=cn(()=>this.statusReactive());statusReactive=mn(void 0);get valid(){return this.status===c_}get invalid(){return this.status===tC}get pending(){return this.status==Xg}get disabled(){return this.status===u_}get enabled(){return this.status!==u_}errors;get pristine(){return Jo(this.pristineReactive)}set pristine(t){Jo(()=>this.pristineReactive.set(t))}_pristine=cn(()=>this.pristineReactive());pristineReactive=mn(!0);get dirty(){return!this.pristine}get touched(){return Jo(this.touchedReactive)}set touched(t){Jo(()=>this.touchedReactive.set(t))}_touched=cn(()=>this.touchedReactive());touchedReactive=mn(!1);get untouched(){return!this.touched}_events=new Jr;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(yU(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(yU(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(vU(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(vU(t,this._rawAsyncValidators))}hasValidator(t){return nC(this._rawValidators,t)}hasAsyncValidator(t){return nC(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Mn(Je({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new f_(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new f_(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Mn(Je({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new d_(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new d_(!0,i))}markAsPending(t={}){this.status=Xg;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Yg(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Mn(Je({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=u_,this.errors=null,this._forEachChild(r=>{r.disable(Mn(Je({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new sC(this.value,i)),this._events.next(new Yg(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Mn(Je({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=c_,this._forEachChild(i=>{i.enable(Mn(Je({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Mn(Je({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===c_||this.status===Xg)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new sC(this.value,e)),this._events.next(new Yg(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Mn(Je({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?u_:c_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Xg,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=TU(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Yg(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new en,this.statusChanges=new en}_calculateStatus(){return this._allControlsDisabled()?u_:this.errors?tC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xg)?Xg:this._anyControlsHaveStatus(tC)?tC:c_}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new d_(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new f_(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){uC(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=iee(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=ree(this._rawAsyncValidators)}},aC=class extends oC{constructor(t,e,i){super(RU(e),PU(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){oee(this,!0,t),Object.keys(t).forEach(i=>{see(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var hC=new wn("",{providedIn:"root",factory:()=>dC}),dC="always";function aee(n,t){return[...t.path,n]}function kU(n,t,e=dC){LU(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),cee(n,t),hee(n,t),uee(n,t),lee(n,t)}function _U(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function lee(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function LU(n,t){let e=eee(n);t.validator!==null?n.setValidators(gU(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=tee(n);t.asyncValidator!==null?n.setAsyncValidators(gU(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();_U(t._rawValidators,r),_U(t._rawAsyncValidators,r)}function cee(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&NU(n,t)})}function uee(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&NU(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function NU(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function hee(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function dee(n,t){n==null,LU(n,t)}function fee(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function pee(n){return Object.getPrototypeOf(n.constructor)===lC}function mee(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function gee(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===Vd?e=s:pee(s)?i=s:r=s}),r||i||e||null}var yee={provide:Zg,useExisting:pu(()=>g_)},h_=Promise.resolve(),g_=(()=>{class n extends Zg{callSetDisabledState;get submitted(){return Jo(this.submittedReactive)}_submitted=cn(()=>this.submittedReactive());submittedReactive=mn(!1);_directives=new Set;form;ngSubmit=new en;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new aC({},PR(e),kR(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){h_.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),kU(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){h_.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){h_.then(()=>{let i=this._findContainer(e.path),r=new aC({});dee(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){h_.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){h_.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),mee(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new AR(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1),this.form._events.next(new DR(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(Nn(RR,10),Nn(MU,10),Nn(hC,8))};static \u0275dir=Xn({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&bt("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[So([yee]),si]})}return n})();function bU(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function xU(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var vee=class extends oC{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(RU(e),PU(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),uC(e)&&(e.nonNullable||e.initialValueIsDefault)&&(xU(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){bU(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){bU(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){xU(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var _ee={provide:p_,useExisting:pu(()=>Sp)},wU=Promise.resolve(),Sp=(()=>{class n extends p_{_changeDetectorRef;callSetDisabledState;control=new vee;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new en;constructor(e,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=gee(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),fee(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){kU(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){wU.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&Hi(i);wU.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?aee(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(Nn(Zg,9),Nn(RR,10),Nn(MU,10),Nn(m_,10),Nn(Ss,8),Nn(hC,8))};static \u0275dir=Xn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[So([_ee]),si,Ks]})}return n})();var fC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var bee=new wn("");var xee={provide:m_,useExisting:pu(()=>pC),multi:!0};function OU(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function wee(n){return n.split(":")[0]}var pC=(()=>{class n extends lC{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i=this._getOptionId(e),r=OU(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=wee(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275dir=Xn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&bt("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[So([xee]),si]})}return n})(),FU=(()=>{class n{_element;_renderer;_select;id;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(OU(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(Nn(Rr),Nn(Za),Nn(pC,9))};static \u0275dir=Xn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),See={provide:m_,useExisting:pu(()=>BU),multi:!0};function SU(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function Cee(n){return n.split(":")[0]}var BU=(()=>{class n extends lC{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let u=o[a],d=this._getOptionValue(u.value);r.push(d)}}else{let o=i.options;for(let a=0;a<o.length;a++){let u=o[a];if(u.selected){let d=this._getOptionValue(u.value);r.push(d)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=Cee(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275dir=Xn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&bt("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[So([See]),si]})}return n})(),VU=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(SU(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(SU(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(Nn(Rr),Nn(Za),Nn(BU,9))};static \u0275dir=Xn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var Mee=(()=>{class n{_validator=mU;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):mU,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xn({type:n,features:[Ks]})}return n})();var Eee={provide:RR,useExisting:pu(()=>LR),multi:!0};var LR=(()=>{class n extends Mee{required;inputName="required";normalizeInput=Hi;createValidator=e=>ZJ;enabled(e){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275dir=Xn({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&wo("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[So([Eee]),si]})}return n})();var zU=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Xo({type:n});static \u0275inj=$o({})}return n})();var Tu=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:hC,useValue:e.callSetDisabledState??dC}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Xo({type:n});static \u0275inj=$o({imports:[zU]})}return n})(),UU=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:bee,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:hC,useValue:e.callSetDisabledState??dC}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Xo({type:n});static \u0275inj=$o({imports:[zU]})}return n})();var Qg={id:"-1",name:"All Assets"};var ir=(()=>{class n{size=vt("medium");hover=vt();color=vt();static \u0275fac=function(i){return new(i||n)};static \u0275dir=Xn({type:n,inputs:{size:[1,"size"],hover:[1,"hover"],color:[1,"color"]}})}return n})();var Tee=(n,t,e)=>[n,t,e],ar=(()=>{class n extends ir{path=vt.required();isStroke=vt(!1);isFill=vt(!0);static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-icon"]],inputs:{path:[1,"path"],isStroke:[1,"isStroke"],isFill:[1,"isFill"]},features:[si],decls:2,vars:8,consts:[["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",1,"transition","duration-75",3,"ngClass"],["fill-rule","evenodd","clip-rule","evenodd","stroke-width","2","stroke-linecap","round"]],template:function(i,r){i&1&&(xo(),ge(0,"svg",0),tt(1,"path",1),ye()),i&2&&(Ne("ngClass",kg(4,Tee,"text-"+r.color(),r.hover()?"group-hover:text-"+r.hover():"",r.size()==="small"?"w-5 h-5":r.size()==="medium"?"w-7 h-7":r.size()==="large"?"w-10 h-10":"")),wo("fill",r.isFill()?"currentColor":"none")("stroke",r.isStroke()?"currentColor":"none"),xe(),wo("d",r.path()))},dependencies:[Nt,ls],encapsulation:2,changeDetection:0})}return n})();var Nl=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-alarm-icon"]],features:[si],decls:1,vars:4,consts:[[3,"color","hover","size","path"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("hover",r.hover())("size",r.size())("path","M17.133 12.632v-1.8a5.407 5.407 0 0 0-4.154-5.262.955.955 0 0 0 .021-.106V3.1a1 1 0 0 0-2 0v2.364a.933.933 0 0 0 .021.106 5.406 5.406 0 0 0-4.154 5.262v1.8C6.867 15.018 5 15.614 5 16.807 5 17.4 5 18 5.538 18h12.924C19 18 19 17.4 19 16.807c0-1.193-1.867-1.789-1.867-4.175Zm-13.267-.8a1 1 0 0 1-1-1 9.424 9.424 0 0 1 2.517-6.391A1.001 1.001 0 1 1 6.854 5.8a7.43 7.43 0 0 0-1.988 5.037 1 1 0 0 1-1 .995Zm16.268 0a1 1 0 0 1-1-1A7.431 7.431 0 0 0 17.146 5.8a1 1 0 0 1 1.471-1.354 9.424 9.424 0 0 1 2.517 6.391 1 1 0 0 1-1 .995ZM8.823 19a3.453 3.453 0 0 0 6.354 0H8.823Z")},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var mC=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-clock-icon"]],features:[si],decls:1,vars:4,consts:[[3,"color","hover","size","path"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("hover",r.hover())("size",r.size())("path","M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm11-4a1 1 0 1 0-2 0v4a1 1 0 0 0 .293.707l3 3a1 1 0 0 0 1.414-1.414L13 11.586V8Z")},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var y_=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-globe-icon"]],features:[si],decls:1,vars:4,consts:[[3,"color","size","hover","path"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("size",r.size())("hover",r.hover())("path","M8.64 4.737A7.97 7.97 0 0 1 12 4a7.997 7.997 0 0 1 6.933 4.006h-.738c-.65 0-1.177.25-1.177.9 0 .33 0 2.04-2.026 2.008-1.972 0-1.972-1.732-1.972-2.008 0-1.429-.787-1.65-1.752-1.923-.374-.105-.774-.218-1.166-.411-1.004-.497-1.347-1.183-1.461-1.835ZM6 4a10.06 10.06 0 0 0-2.812 3.27A9.956 9.956 0 0 0 2 12c0 5.289 4.106 9.619 9.304 9.976l.054.004a10.12 10.12 0 0 0 1.155.007h.002a10.024 10.024 0 0 0 1.5-.19 9.925 9.925 0 0 0 2.259-.754 10.041 10.041 0 0 0 4.987-5.263A9.917 9.917 0 0 0 22 12a10.025 10.025 0 0 0-.315-2.5A10.001 10.001 0 0 0 12 2a9.964 9.964 0 0 0-6 2Zm13.372 11.113a2.575 2.575 0 0 0-.75-.112h-.217A3.405 3.405 0 0 0 15 18.405v1.014a8.027 8.027 0 0 0 4.372-4.307ZM12.114 20H12A8 8 0 0 1 5.1 7.95c.95.541 1.421 1.537 1.835 2.415.209.441.403.853.637 1.162.54.712 1.063 1.019 1.591 1.328.52.305 1.047.613 1.6 1.316 1.44 1.825 1.419 4.366 1.35 5.828Z")},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var HU=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-house-icon"]],features:[si],decls:1,vars:4,consts:[[3,"color","size","hover","path"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("size",r.size())("hover",r.hover())("path","M21.7189 11.2929L19.7165 9.29286L12.7079 2.29279C12.5201 2.10532 12.2655 2 12 2C11.7345 2 11.4799 2.10532 11.2921 2.29279L4.28352 9.29286L2.28106 11.2929C2.09867 11.4815 1.99776 11.7341 2.00004 11.9963C2.00232 12.2585 2.10762 12.5093 2.29325 12.6947C2.47889 12.8801 2.73001 12.9853 2.99253 12.9876C3.25505 12.9899 3.50796 12.8891 3.6968 12.7069L3.99016 12.4139V20C3.99016 20.5304 4.20113 21.0391 4.57666 21.4142C4.9522 21.7893 5.46153 22 5.99262 22H8.99631C9.26185 22 9.51652 21.8946 9.70429 21.7071C9.89205 21.5196 9.99754 21.2652 9.99754 21V16.9999C9.99754 16.7347 10.103 16.4804 10.2908 16.2928C10.4786 16.1053 10.7332 15.9999 10.9988 15.9999H13.0012C13.2668 15.9999 13.5214 16.1053 13.7092 16.2928C13.897 16.4804 14.0025 16.7347 14.0025 16.9999V21C14.0025 21.2652 14.1079 21.5196 14.2957 21.7071C14.4835 21.8946 14.7381 22 15.0037 22H18.0074C18.5385 22 19.0478 21.7893 19.4233 21.4142C19.7989 21.0391 20.0098 20.5304 20.0098 20V12.4139L20.3032 12.7069C20.492 12.8891 20.7449 12.9899 21.0075 12.9876C21.27 12.9853 21.5211 12.8801 21.7067 12.6947C21.8924 12.5093 21.9977 12.2585 22 11.9963C22.0022 11.7341 21.9013 11.4815 21.7189 11.2929Z")},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var gC=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-bridge-icon"]],features:[si],decls:1,vars:4,consts:[[3,"color","hover","size","path"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("hover",r.hover())("size",r.size())("path","M6.3335 5C6.70156 5.00009 6.99991 5.31337 7 5.69983C7 6.1885 7.29055 7.34656 8.25244 7.84033C9.20464 8.32906 10.565 8.60938 12 8.60938C13.435 8.60938 14.7954 8.32906 15.7476 7.84033C16.7094 7.34656 17 6.02713 17 5.53846V5.69983C17.0001 5.31337 17.2984 5.00009 17.6665 5H18.8335C19.2016 5.00009 19.4999 5.31337 19.5 5.69983V5.53846C19.5 6.12943 19.725 7.28312 20.1877 7.93091C20.6273 8.54636 22 8.02885 22 8.9375C22 9.84615 22 13.9252 22 13.9252C21.9999 14.3116 21.7016 14.6249 21.3335 14.625H19.5V16.375H19.6668C20.0349 16.3751 20.3332 16.6884 20.3333 17.0748V18.3002C20.3332 18.6866 20.0349 18.9999 19.6668 19H16.8332C16.4651 18.9999 16.1668 18.6866 16.1667 18.3002V17.0748C16.1668 16.6884 16.4651 16.3751 16.8332 16.375H17V14.625H7V16.375H7.16683C7.53489 16.3751 7.83325 16.6884 7.83333 17.0748V18.3002C7.83325 18.6866 7.53489 18.9999 7.16683 19H4.33317C3.96511 18.9999 3.66675 18.6866 3.66667 18.3002V17.0748C3.66675 16.6884 3.96511 16.3751 4.33317 16.375H4.5V14.625H2.6665C2.29844 14.6249 2.00009 14.3116 2 13.9252C2 13.9252 2 9.84615 2 8.9375C2 8.02885 3.37273 8.54636 3.81234 7.93091C4.27499 7.28312 4.5 6.2908 4.5 5.69983C4.50009 5.31337 4.79844 5.00009 5.1665 5H6.3335Z")},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var jU=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-sensor-icon"]],features:[si],decls:1,vars:4,consts:[[3,"color","size","hover","path"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("size",r.size())("hover",r.hover())("path","M13 3a1 1 0 1 0-2 0v2a1 1 0 1 0 2 0V3ZM6.343 4.929A1 1 0 0 0 4.93 6.343l1.414 1.414a1 1 0 0 0 1.414-1.414L6.343 4.929Zm12.728 1.414a1 1 0 0 0-1.414-1.414l-1.414 1.414a1 1 0 0 0 1.414 1.414l1.414-1.414ZM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10Zm-9 4a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2H3Zm16 0a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2h-2ZM7.757 17.657a1 1 0 1 0-1.414-1.414l-1.414 1.414a1 1 0 1 0 1.414 1.414l1.414-1.414Zm9.9-1.414a1 1 0 0 0-1.414 1.414l1.414 1.414a1 1 0 0 0 1.414-1.414l-1.414-1.414ZM13 19a1 1 0 1 0-2 0v2a1 1 0 1 0 2 0v-2Z")},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var WU=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-plus-icon"]],features:[si],decls:1,vars:5,consts:[[3,"color","size","hover","isStroke","path"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("size",r.size())("hover",r.hover())("isStroke",!0)("path","M12 5V12M12 12V19M12 12H19M12 12H5")},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var GU=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-minus-icon"]],features:[si],decls:1,vars:5,consts:[[3,"color","size","hover","isStroke","path"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("size",r.size())("hover",r.hover())("isStroke",!0)("path","M19 12L5 12")},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var $U=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-reset-icon"]],features:[si],decls:1,vars:4,consts:[[3,"color","size","hover","path"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("size",r.size())("hover",r.hover())("path","M20 11C19.447 11 19 11.448 19 12C19 15.86 15.859 19 12 19C10.152 19 8.403 18.26 7.111 17H10C10.553 17 11 16.552 11 16C11 15.448 10.553 15 10 15H5.253C5.055 14.959 4.848 14.983 4.651 15.07C4.633 15.077 4.614 15.08 4.596 15.088C4.583 15.095 4.569 15.094 4.556 15.101C4.529 15.117 4.514 15.143 4.488 15.16C4.201 15.337 4 15.639 4 16V21C4 21.552 4.447 22 5 22C5.553 22 6 21.552 6 21V18.68C7.63 20.141 9.755 21 12 21C16.963 21 21 16.962 21 12C21 11.448 20.553 11 20 11Z M5 12C5 8.14 8.141 5 12 5C13.848 5 15.597 5.74 16.889 7H14C13.447 7 13 7.448 13 8C13 8.552 13.447 9 14 9H18.745C18.944 9.042 19.153 9.017 19.35 8.929C19.368 8.922 19.387 8.919 19.405 8.911C19.418 8.904 19.432 8.905 19.445 8.898C19.472 8.882 19.487 8.856 19.513 8.839C19.799 8.663 20 8.361 20 8V3C20 2.448 19.553 2 19 2C18.447 2 18 2.448 18 3V5.32C16.37 3.859 14.245 3 12 3C7.037 3 3 7.038 3 12C3 12.552 3.447 13 4 13C4.553 13 5 12.552 5 12Z")},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var qU=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-location-icon"]],features:[si],decls:1,vars:4,consts:[[3,"color","hover","size","path"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("hover",r.hover())("size",r.size())("path","M11.906 1.994a8.002 8.002 0 0 1 8.09 8.421 7.996 7.996 0 0 1-1.297 3.957.996.996 0 0 1-.133.204l-.108.129c-.178.243-.37.477-.573.699l-5.112 6.224a1 1 0 0 1-1.545 0L5.982 15.26l-.002-.002a18.146 18.146 0 0 1-.309-.38l-.133-.163a.999.999 0 0 1-.13-.202 7.995 7.995 0 0 1 6.498-12.518ZM15 9.997a3 3 0 1 1-5.999 0 3 3 0 0 1 5.999 0Z")},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var yC=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-right-arrow-icon"]],features:[si],decls:1,vars:5,consts:[[3,"color","hover","size","isStroke","path"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("hover",r.hover())("size",r.size())("isStroke",!0)("path","M19 12H5m14 0-4 4m4-4-4-4")},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var Jg=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-angle-down-icon"]],features:[si],decls:1,vars:6,consts:[[3,"color","hover","size","path","isStroke","isFill"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("hover",r.hover())("size",r.size())("path","m19 9-7 7-7-7")("isStroke",!0)("isFill",!1)},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var vC=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-close-icon"]],features:[si],decls:1,vars:5,consts:[["path","M6 18 17.94 6M18 18 6.06 6",3,"color","size","hover","isStroke","isFill"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("size",r.size())("hover",r.hover())("isStroke",!0)("isFill",!1)},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var _C=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-envelope-icon"]],features:[si],decls:1,vars:5,consts:[["path","m3.5 5.5 7.893 6.036a1 1 0 0 0 1.214 0L20.5 5.5M4 19h16a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Z",3,"color","size","hover","isStroke","isFill"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("size",r.size())("hover",r.hover())("isStroke",!0)("isFill",!1)},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var XU=(()=>{class n extends ir{static \u0275fac=(()=>{let e;return function(r){return(e||(e=wi(n)))(r||n)}})();static \u0275cmp=_t({type:n,selectors:[["lib-info-icon"]],features:[si],decls:1,vars:4,consts:[[3,"color","size","hover","path"]],template:function(i,r){i&1&&tt(0,"lib-icon",0),i&2&&Ne("color",r.color())("size",r.size())("hover",r.hover())("path","M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm9.408-5.5a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2h-.01ZM10 10a1 1 0 1 0 0 2h1v3h-1a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2h-1v-4a1 1 0 0 0-1-1h-2Z")},dependencies:[Nt,ar],encapsulation:2,changeDetection:0})}return n})();var Aee=["selectorMenu"],Dee=(n,t)=>t.id;function Iee(n,t){if(n&1){let e=Dn();ge(0,"li")(1,"button",5),bt("click",function(){let r=gt(e).$implicit,s=Ae();return yt(s.onSelectAsset(r))}),ot(2),ye()()}if(n&2){let e=t.$implicit;xe(2),Ci(" ",e.name," ")}}var YU=(()=>{class n{selectorMenuRef;ALL_ASSETS_ELEMENT=Qg;MAX_SELECTOR_HEIGHT=300;availableAssets=vt([]);allowAllAssets=vt(!1);preSelectedAsset=vt(void 0);onAssetSelection=vt();selectAssetEffect=nr();searchTerm=mn("");selectedAsset=mn(void 0);selectorHeight=mn("0px");selectorCollapsed=mn(!0);selectorContentScrollable=mn(!1);selectableAssets=cn(()=>{let e=this.availableAssets(),i=this.selectedAsset();return this.allowAllAssets()&&(e=[Qg,...e]),i?e.filter(r=>r.id!==i.id):e});filteredAssets=cn(()=>this.selectableAssets().filter(e=>e.name.toLowerCase().includes(this.searchTerm().toLowerCase())));constructor(){ji(()=>{let e=this.onAssetSelection();if(!e)return;let i=e(),r=this.availableAssets().find(s=>s.id===i);r&&this.selectedAsset.set(r)})}ngOnInit(){let e=this.preSelectedAsset();e?this.selectedAsset.set(e):this.allowAllAssets()?this.selectedAsset.set(Qg):this.selectedAsset.set(this.selectableAssets()[0])}expandSelectorMenu(){this.selectorCollapsed.set(!1),this.setSelectorMenuHeight()}collapseSelectorMenu(){this.selectorCollapsed.set(!0),this.setSelectorMenuHeight()}onFocusOut(){setTimeout(()=>{this.collapseSelectorMenu(),this.searchTerm.set("")},50)}onSelectAsset(e){this.selectAssetEffect.emit(e),this.selectedAsset.set(e)}setSelectorMenuHeight(){let e=this.selectorMenuRef.nativeElement;if(this.selectorCollapsed()){this.selectorHeight.set("0px");return}let i=e.scrollHeight;i>this.MAX_SELECTOR_HEIGHT?(this.selectorHeight.set(`${this.MAX_SELECTOR_HEIGHT}px`),this.selectorContentScrollable.set(!0)):(this.selectorHeight.set(`${i}px`),this.selectorContentScrollable.set(!1))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-breadcrumb-asset-selector"]],viewQuery:function(i,r){if(i&1&&Oi(Aee,5),i&2){let s;Hn(s=jn())&&(r.selectorMenuRef=s.first)}},inputs:{availableAssets:[1,"availableAssets"],allowAllAssets:[1,"allowAllAssets"],preSelectedAsset:[1,"preSelectedAsset"],onAssetSelection:[1,"onAssetSelection"]},outputs:{selectAssetEffect:"selectAssetEffect"},decls:7,vars:12,consts:[["selectorMenu",""],[1,"flex","items-center"],["type","text",1,"filter","block","w-full","cursor-pointer","rounded-lg","placeholder-dark","focus:placeholder-gray-300","text-sm","font-medium","border-none","shadow-none","focus:outline-none","focus:ring-0","px-2","py-1.5",3,"ngModelChange","focusin","focusout","ngModel"],["size","small",1,"selector-angle","z-10","-ml-6"],[1,"selector","absolute","z-10","bg-white","border","shadow-none","border-gray-300","w-full","rounded-lg","shadow"],[1,"block","text-sm","font-medium","w-full","text-left","px-3","py-1.5","hover:bg-gray-100","cursor-pointer",3,"click"]],template:function(i,r){if(i&1){let s=Dn();ge(0,"div",1)(1,"input",2),bt("ngModelChange",function(a){return gt(s),yt(r.searchTerm.set(a))})("focusin",function(){return gt(s),yt(r.expandSelectorMenu())})("focusout",function(){return gt(s),yt(r.onFocusOut())}),ye(),tt(2,"lib-angle-down-icon",3),ye(),ge(3,"ul",4,0),xs(5,Iee,3,1,"li",null,Dee),ye()}if(i&2){let s;xe(),Ne("ngModel",r.searchTerm()),wo("placeholder",(s=(s=r.selectedAsset())==null?null:s.name)!==null&&s!==void 0?s:r.ALL_ASSETS_ELEMENT.name),xe(),Si("rotated",!r.selectorCollapsed()),xe(),Pr("max-height",r.selectorHeight()),Si("border-transparent",r.selectorCollapsed())("overflow-hidden",r.selectorCollapsed()||!r.selectorContentScrollable())("overflow-auto",!r.selectorCollapsed()&&r.selectorContentScrollable()),xe(2),ws(r.filteredAssets())}},dependencies:[Nt,Tu,Vd,Kg,Sp,Jg],styles:[".selector[_ngcontent-%COMP%]{transition:all .5s ease}.selector-angle[_ngcontent-%COMP%]{transition:all .5s ease;pointer-events:none}.selector-angle.rotated[_ngcontent-%COMP%]{transform:rotate(-180deg)}"],changeDetection:0})}return n})();var Ree=()=>({size:"small"});function Pee(n,t){n&1&&(xo(),ge(0,"svg",3),tt(1,"path",5),ye())}function kee(n,t){n&1&&Ko(0)}function Lee(n,t){if(n&1&&It(0,kee,1,0,"ng-container",6),n&2){let e=Ae(2).$implicit;Ne("ngComponentOutlet",e.icon)("ngComponentOutletInputs",rS(2,Ree))}}function Nee(n,t){if(n&1&&(ge(0,"li")(1,"div",2),It(2,Pee,2,0,":svg:svg",3),ge(3,"a",4),It(4,Lee,1,3,"ng-container"),ot(5),ye()()()),n&2){let e,i=Ae(),r=i.$implicit,s=i.$index;xe(2),Kt(s!==0?2:-1),xe(),Si("ms-1",s!==0)("md:ms-2",s!==0),wo("href",(e=r.href)!==null&&e!==void 0?e:null,hp),xe(),Kt(r.icon?4:-1),xe(),Ci(" ",r.text," ")}}function Oee(n,t){if(n&1){let e=Dn();ge(0,"li")(1,"div",2),xo(),ge(2,"svg",3),tt(3,"path",5),ye(),gu(),ge(4,"div",7)(5,"lib-breadcrumb-asset-selector",8),bt("selectAssetEffect",function(r){gt(e);let s=Ae(2);return yt(s.onSelectAsset(r))}),ye()()()()}if(n&2){let e=Ae().$implicit,i=Ae();xe(5),Ne("availableAssets",i.availableAssets())("preSelectedAsset",e.initialValue)("allowAllAssets",e.allowAllAssets)("onAssetSelection",i.onAssetSelection())}}function Fee(n,t){if(n&1&&It(0,Nee,6,8,"li")(1,Oee,6,4,"li"),n&2){let e=t.$implicit,i=Ae();Kt(i.isSimple(e)?0:-1),xe(),Kt(i.isAssetSelector(e)?1:-1)}}var bC=(()=>{class n{crumbs=vt.required();availableAssets=vt.required();onAssetSelection=vt();selectAssetEffect=nr();isSimple(e){return e.type==="SIMPLE_BREADCRUMB"}isAssetSelector(e){return e.type==="ASSET_SELECTOR_BREADCRUMB"}onSelectAsset(e){this.selectAssetEffect.emit(e)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-breadcrumb"]],inputs:{crumbs:[1,"crumbs"],availableAssets:[1,"availableAssets"],onAssetSelection:[1,"onAssetSelection"]},outputs:{selectAssetEffect:"selectAssetEffect"},decls:4,vars:0,consts:[["aria-label","Breadcrumb",1,"flex"],[1,"inline-flex","h-full","items-center","space-x-1","md:space-x-3","rtl:space-x-reverse","p-1","text-dark"],[1,"flex","items-center"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 6 10",1,"w-3","h-3","text-gray-400","mx-1","rtl:rotate-180"],[1,"inline-flex","items-center","text-sm","font-medium","gap-2"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 9 4-4-4-4"],[4,"ngComponentOutlet","ngComponentOutletInputs"],[1,"relative","ms-1","md:ms-2"],[3,"selectAssetEffect","availableAssets","preSelectedAsset","allowAllAssets","onAssetSelection"]],template:function(i,r){i&1&&(ge(0,"nav",0)(1,"ol",1),xs(2,Fee,2,2,null,null,_V),ye()()),i&2&&(xe(2),ws(r.crumbs()))},dependencies:[Nt,FI,Tu,YU],encapsulation:2,changeDetection:0})}return n})();var ZU=(()=>{class n{text=vt.required();input=vt;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-indicator"]],inputs:{text:[1,"text"]},decls:2,vars:1,consts:[[1,"indicator","text-2xs","aspect-square","rounded-full","flex","w-5","overflow-hidden","justify-center","items-center"]],template:function(i,r){i&1&&(ge(0,"span",0),ot(1),ye()),i&2&&(xe(),Ci(" ",r.text(),`
`))},dependencies:[Nt],styles:[".indicator[_ngcontent-%COMP%]{-webkit-backdrop-filter:brightness(1.3);backdrop-filter:brightness(1.3);background-color:#fff3}"],changeDetection:0})}return n})();var Bee=["*"],Vee=(n,t,e)=>({"text-primary border-purple-300 bg-purple-50":n,"text-critical border-red-300 bg-red-50":t,"text-warn-dark border-yellow-300 bg-yellow-50":e});function zee(n,t){if(n&1&&(ge(0,"div",4),ot(1),ye()),n&2){let e=Ae();xe(),Ci(" ",e.description()," ")}}var xC=(()=>{class n{title=vt.required();description=vt("");type=vt("info");static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-info-box"]],inputs:{title:[1,"title"],description:[1,"description"],type:[1,"type"]},ngContentSelectors:Bee,decls:7,vars:7,consts:[["id","alert-additional-content-2","role","alert",1,"p-4","border","border-red-300","rounded-lg","bg-red-50",3,"ngClass"],[1,"flex","items-center"],["size","small"],[1,"text-lg","font-medium","ml-2"],[1,"mt-2","mb-4","text-sm"]],template:function(i,r){i&1&&(_u(),ge(0,"div",0)(1,"div",1),tt(2,"lib-info-icon",2),ge(3,"h3",3),ot(4),ye()(),It(5,zee,2,1,"div",4),Rl(6,0,[1,"block"]),ye()),i&2&&(Ne("ngClass",kg(3,Vee,r.type()==="info",r.type()==="critical",r.type()==="warn")),xe(4),Yr(r.title()),xe(),Kt(r.description()?5:-1))},dependencies:[Nt,ls,XU],encapsulation:2,changeDetection:0})}return n})();var wC=n=>!0;var Uee=["selectorMenu"],Hee=["filterMenu"];function jee(n,t){if(n&1&&tt(0,"lib-indicator",6),n&2){let e=Ae();Ne("text",e.numberOfActiveFilters())}}function Wee(n,t){if(n&1){let e=Dn();ge(0,"div",24)(1,"lib-close-icon",32),bt("click",function(){gt(e);let r=Ae();return yt(r.resetSearch())}),ye()()}}function Gee(n,t){if(n&1){let e=Dn();ge(0,"li",33),bt("click",function(){let r=gt(e).$implicit,s=Ae();return yt(s.onSelectAsset(r))})("keydown.enter",function(){let r=gt(e).$implicit,s=Ae();return yt(s.onSelectAsset(r))}),ge(1,"button",34),ot(2),ye()()}if(n&2){let e=t.$implicit;xe(2),Ci(" ",e," ")}}function $ee(n,t){n&1&&(ge(0,"li",28)(1,"span",35),ot(2," No available assets "),ye()())}var KU=(()=>{class n{selectorMenuRef;filterMenuRef;MAX_SELECTOR_HEIGHT=300;filter=nr();searchString=mn("");searchStringFilter=mn(void 0);availableAssetNames=vt([]);selectorHeight=mn("0px");selectorExpanded=mn(!1);filterHeight=mn("0px");filterExpanded=mn(!1);selectorContentScrollable=mn(!1);filteredAssets=cn(()=>{let e=this.searchString()?.toLowerCase().trim()??"";return this.availableAssetNames().filter(i=>i.toLowerCase().includes(e))});healthyFilter=mn(!0);warningFilter=mn(!0);criticalFilter=mn(!0);currentStringFilter=cn(()=>this.filterAssetsByFilterString());numberOfActiveFilters=cn(()=>[this.healthyFilter(),this.warningFilter(),this.criticalFilter()].filter(e=>!e).length);filterAssetsByFilterString(){let e=this.searchStringFilter()?.toLowerCase();return e?i=>[i.asset.name,i.asset.description,i.asset.locationName,i.asset.material,i.asset.constructionYear?.toString()].find(r=>r!==void 0&&r.toLowerCase().includes(e))!==void 0:wC}filterMenuFilter=cn(()=>e=>this.healthyFilter()&&e.healthStatus==="healthy"||this.warningFilter()&&e.healthStatus==="warn"||this.criticalFilter()&&e.healthStatus==="critical");combinedFilter=cn(()=>{let e=this.currentStringFilter(),i=this.filterMenuFilter();return r=>e(r)&&i(r)});changeDetectorRef=ze(Ss);constructor(){ji(()=>{this.filteredAssets(),this.selectorExpanded(),this.setSelectorMenuHeight()}),ji(()=>{this.filterExpanded(),this.setFilterMenuHeight()}),ji(()=>{this.filter.emit(this.combinedFilter())})}ngAfterViewInit(){this.setFilterMenuHeight()}onSelectAsset=e=>{this.searchString.set(e),this.updateSearchStringFilter()};setSelectorMenuHeight(){this.changeDetectorRef.detectChanges();let e=this.selectorMenuRef?.nativeElement;if(e){if(!this.selectorExpanded()){this.selectorHeight.set("0px");return}if(this.MAX_SELECTOR_HEIGHT<e.scrollHeight){this.selectorHeight.set(this.MAX_SELECTOR_HEIGHT+"px"),this.selectorContentScrollable.set(!0);return}this.selectorContentScrollable.set(!1),this.selectorHeight.set(e.scrollHeight+"px")}}setFilterMenuHeight(){let e=this.filterMenuRef?.nativeElement;if(e){if(!this.filterExpanded()){this.filterHeight.set("0px");return}this.filterHeight.set(e.scrollHeight+"px")}}updateSearchStringFilter(){this.searchStringFilter.set(this.searchString())}resetSearch(){this.searchString.set(""),this.updateSearchStringFilter()}expandSelector(){this.filterExpanded.set(!1),this.selectorExpanded.set(!0)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-asset-filter"]],viewQuery:function(i,r){if(i&1&&(Oi(Uee,5),Oi(Hee,5)),i&2){let s;Hn(s=jn())&&(r.selectorMenuRef=s.first),Hn(s=jn())&&(r.filterMenuRef=s.first)}},inputs:{availableAssetNames:[1,"availableAssetNames"]},outputs:{filter:"filter"},decls:45,vars:21,consts:[["filterMenu",""],["selectorMenu",""],["id","asset-search-bar",1,"w-full"],[1,"flex"],[1,"relative","w-fit"],["id","dropdown-button","type","button",1,"shrink-0","z-10","inline-flex","items-center","py-2.5","ps-4","pe-2","text-sm","font-medium","text-center","text-light","bg-secondary","rounded-s-lg","hover:bg-gray-500","transition-all","cursor-pointer","focus:outline-none","gap-1",3,"click"],[3,"text"],["size","small",1,"transition-all","duration-300"],[1,"absolute","top-full","w-full","bg-red","overflow-y-clip","overflow-x-visible","transition-all","duration-300"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 16.45 7.27","width","16.45","height","10","fill","currentColor",1,"mx-auto","text-light","block","pointer-events-none"],["fill-rule","evenodd","d","M1.1 6.55c-.94 1.14-.1 2.72 1.27 2.72h11.7c1.37 0 2.21-1.58 1.27-2.72L9.46.62a1.6 1.6 0 0 0-2.47 0L1.1 6.55Z","clip-rule","evenodd"],[1,"z-10","bg-white","rounded-lg","shadow-sm","w-44"],["id","filter-menu",1,"p-4","rounded-xl","shadow","bg-white","overflow-clip"],[1,"text-sm","font-medium","text-gray-900","mb-2"],[1,"flex","items-center","gap-4","w-full","flex-wrap"],[1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","name","healthyFilter","value","","checked","",1,"sr-only","peer",3,"ngModelChange","ngModel"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","rounded-full","peer","after:absolute","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-primary"],[1,"ms-3","text-sm","font-light","text-dark","text-nowrap"],["type","checkbox","name","warningFilter","value","","checked","",1,"sr-only","peer",3,"ngModelChange","ngModel"],["type","checkbox","name","criticalFilter","value","","checked","",1,"sr-only","peer",3,"ngModelChange","ngModel"],[1,"relative","w-full"],[1,"flex","items-center"],["type","text","id","filter-input","name","filter-input","autocomplete","off","placeholder","Search an Asset","required","",1,"inline-block","p-2.5","w-full","z-20","text-sm","text-gray-900","bg-white","rounded-e-none","rounded-s-gray-100","rounded-s-2","border-0","focus:outline-none","focus:ring-0",3,"ngModelChange","keydown.enter","focusin","focusout","ngModel"],[1,"absolute","h-full","top-0","end-0","z-20","flex","items-center","p-2","text-dark"],[1,"absolute","w-full","overflow-hidden","top-full","left-0","bg-white","z-40","divide-y","divide-gray-100","rounded-b-lg","shadow-sm","w-44"],["aria-labelledby","dropdown-button",1,"text-sm","text-gray-700","border-t","shadow-none","border-gray-300","transition-all","duration-300"],["tabindex","0","role","listitem",1,"cursor-pointer","hover:bg-elevated-background"],[1,"cursor-pointer"],["type","button",1,"p-2.5","text-sm","font-medium","text-white","bg-primary","rounded-e-lg","hover:bg-gray-900","focus:outline-none","cursor-pointer","transition-all",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["color","gray-500","size","small",1,"relative","rounded-full","hover:bg-gray-300","p-1","cursor-pointer",3,"click"],["tabindex","0","role","listitem",1,"cursor-pointer","hover:bg-elevated-background",3,"click","keydown.enter"],[1,"block","px-4","py-2","pointer-events-none"],[1,"block","px-4","py-2","cursor-pointer"]],template:function(i,r){if(i&1){let s=Dn();ge(0,"form",2)(1,"div",3)(2,"div",4)(3,"button",5),bt("click",function(){return gt(s),yt(r.filterExpanded.set(!r.filterExpanded()))}),ge(4,"span"),ot(5,"Filter"),ye(),It(6,jee,1,1,"lib-indicator",6),tt(7,"lib-angle-down-icon",7),ye(),ge(8,"div",8,0),xo(),ge(10,"svg",9),tt(11,"path",10),ye(),gu(),ge(12,"div",11)(13,"div",12)(14,"h3",13),ot(15,"Severity"),ye(),ge(16,"div",14)(17,"label",15)(18,"input",16),bt("ngModelChange",function(a){return gt(s),yt(r.healthyFilter.set(a))}),ye(),tt(19,"div",17),ge(20,"span",18),ot(21,"Healthy"),ye()(),ge(22,"label",15)(23,"input",19),bt("ngModelChange",function(a){return gt(s),yt(r.warningFilter.set(a))}),ye(),tt(24,"div",17),ge(25,"span",18),ot(26,"Warning"),ye()(),ge(27,"label",15)(28,"input",20),bt("ngModelChange",function(a){return gt(s),yt(r.criticalFilter.set(a))}),ye(),tt(29,"div",17),ge(30,"span",18),ot(31,"Critical"),ye()()()()()()(),ge(32,"div",21)(33,"div",22)(34,"input",23),bt("ngModelChange",function(a){return gt(s),yt(r.searchString.set(a))})("keydown.enter",function(){return gt(s),yt(r.updateSearchStringFilter())})("focusin",function(){return gt(s),yt(r.expandSelector())})("focusout",function(){return gt(s),yt(r.selectorExpanded.set(!1))}),ye(),It(35,Wee,2,0,"div",24),ye(),ge(36,"div",25)(37,"ul",26,1),xs(39,Gee,3,1,"li",27,Mv,!1,$ee,3,0,"li",28),ye()()(),ge(42,"button",29),bt("click",function(){return gt(s),yt(r.updateSearchStringFilter())}),xo(),ge(43,"svg",30),tt(44,"path",31),ye()()()()}i&2&&(xe(6),Kt(r.numberOfActiveFilters()>0?6:-1),xe(),Si("rotated",r.filterExpanded()),xe(),Pr("max-height",r.filterHeight()),Si("border-transparent",!r.filterExpanded()),xe(10),Ne("ngModel",r.healthyFilter()),xe(5),Ne("ngModel",r.warningFilter()),xe(5),Ne("ngModel",r.criticalFilter()),xe(6),Ne("ngModel",r.searchString()),xe(),Kt(r.searchString()?35:-1),xe(2),Pr("max-height",r.selectorHeight()),Si("border-transparent",!r.selectorExpanded())("overflow-hidden",!r.selectorExpanded()||!r.selectorContentScrollable())("overflow-auto",r.selectorExpanded()&&r.selectorContentScrollable()),xe(2),ws(r.filteredAssets()))},dependencies:[Nt,Tu,fC,Vd,IR,Kg,cC,LR,Sp,g_,vC,Jg,ZU],styles:["#asset-search-bar[_ngcontent-%COMP%]{height:2.5rem}.rotated[_ngcontent-%COMP%]{transform:rotate(-180deg)}#filter-menu[_ngcontent-%COMP%]{max-width:min(100vw - 1rem,24rem);width:100vw}"],changeDetection:0})}return n})();var jR=["*"],qee=()=>[];function Xee(n,t){if(n&1&&tt(0,"div",5),n&2){let e=Ae().$implicit;Pr("width",(e==null?null:e.width)+"px")}}function Yee(n,t){}function Zee(n,t){if(n&1&&It(0,Yee,0,0,"ng-template",4),n&2){let e=Ae().$implicit;Ne("ngTemplateOutlet",e.ghostCellTemplate)}}function Kee(n,t){if(n&1&&It(0,Xee,1,2,"div",3)(1,Zee,1,1,null,4),n&2){let e=t.$implicit;Kt(e.ghostCellTemplate?1:0)}}function Qee(n,t){if(n&1&&(ge(0,"div",2),xs(1,Kee,2,1,null,null,Mv),ye()),n&2){let e=Ae();Pr("height",e.rowHeight+"px"),xe(),ws(e.columns)}}var Jee=["cellTemplate"],ete=["ghostLoaderTemplate"],tte=n=>({cellContext:n}),nte=n=>[n];function ite(n,t){if(n&1){let e=Dn();ge(0,"label",3)(1,"input",5),Pl(2,"async"),bt("click",function(r){gt(e);let s=Ae(2);return yt(s.onCheckboxChange(r))}),ye()()}if(n&2){let e=Ae(2);xe(),Ne("disabled",Dv(2,2,e.disable$))("checked",e.isSelected)}}function rte(n,t){n&1&&tt(0,"i",8)}function ste(n,t){n&1&&tt(0,"i",9)}function ote(n,t){n&1&&tt(0,"i",10)}function ate(n,t){if(n&1){let e=Dn();ge(0,"button",7),bt("click",function(){gt(e);let r=Ae(3);return yt(r.onTreeAction())}),ge(1,"span"),It(2,rte,1,0,"i",8)(3,ste,1,0,"i",9)(4,ote,1,0,"i",10),ye()()}if(n&2){let e=Ae(3);Ne("disabled",e.treeStatus==="disabled"),wo("aria-label",e.treeStatus),xe(2),Kt(e.treeStatus==="loading"?2:-1),xe(),Kt(e.treeStatus==="collapsed"?3:-1),xe(),Kt(e.treeStatus==="expanded"||e.treeStatus==="disabled"?4:-1)}}function lte(n,t){}function cte(n,t){if(n&1&&It(0,lte,0,0,"ng-template",4),n&2){let e=Ae(3);Ne("ngTemplateOutlet",e.column.treeToggleTemplate)("ngTemplateOutletContext",sS(2,tte,e.cellContext))}}function ute(n,t){if(n&1&&It(0,ate,5,5,"button",6)(1,cte,1,4,null,4),n&2){let e=Ae(2);Kt(e.column.treeToggleTemplate?1:0)}}function hte(n,t){if(n&1&&tt(0,"span",11),n&2){let e=Ae(3);Ne("title",e.sanitizedValue)("innerHTML",e.value,iI)}}function dte(n,t){if(n&1&&(ge(0,"span",12),ot(1),ye()),n&2){let e=Ae(3);Ne("title",e.sanitizedValue),xe(),Yr(e.value)}}function fte(n,t){if(n&1&&It(0,hte,1,2,"span",11)(1,dte,2,2,"span",12),n&2){let e=Ae(2);Kt(e.column.bindAsUnsafeHtml?0:1)}}function pte(n,t){}function mte(n,t){if(n&1&&It(0,pte,0,0,"ng-template",4,0,AI),n&2){let e=Ae(2);Ne("ngTemplateOutlet",e.column.cellTemplate)("ngTemplateOutletContext",e.cellContext)}}function gte(n,t){if(n&1&&(ge(0,"div",2),It(1,ite,3,4,"label",3)(2,ute,2,1)(3,fte,2,1)(4,mte,2,2,null,4),ye()),n&2){let e=Ae();Pr("margin-left",e.calcLeftMargin(e.column,e.row),"px"),xe(),Kt(e.column.checkboxable&&(!e.displayCheck||e.displayCheck(e.row,e.column,e.value))?1:-1),xe(),Kt(e.column.isTreeColumn?2:-1),xe(),Kt(e.column.cellTemplate?4:3)}}function yte(n,t){if(n&1&&tt(0,"ghost-loader",13),n&2){let e=Ae(2);Ne("columns",sS(2,nte,e.column))("pageSize",1)}}function vte(n,t){if(n&1&&It(0,yte,1,4,"ghost-loader",13),n&2){let e=Ae();Kt(e.ghostLoadingIndicator?0:-1)}}var nH=(n,t)=>t.type,iH=(n,t)=>t.$$id;function _te(n,t){if(n&1){let e=Dn();ge(0,"datatable-body-cell",2),bt("activate",function(r){let s=gt(e).$index,o=Ae(2);return yt(o.onActivate(r,s))})("treeAction",function(){gt(e);let r=Ae(2);return yt(r.onTreeAction())}),ye()}if(n&2){let e=t.$implicit,i=Ae(2);Ne("row",i.row)("group",i.group)("expanded",i.expanded)("isSelected",i.isSelected)("rowIndex",i.rowIndex)("column",e)("rowHeight",i.rowHeight)("displayCheck",i.displayCheck)("disable$",i.disable$)("treeStatus",i.treeStatus)("ghostLoadingIndicator",i.ghostLoadingIndicator)}}function bte(n,t){if(n&1&&(ge(0,"div"),Pl(1,"async"),xs(2,_te,1,11,"datatable-body-cell",1,iH),ye()),n&2){let e=t.$implicit,i=Ae();vV("datatable-row-",e.type," datatable-row-group"),Pr("width",i._columnGroupWidths[e.type],"px"),Si("row-disabled",i.disable$?Dv(1,7,i.disable$):!1),xe(2),ws(e.columns)}}var xte=["select"];function wte(n,t){if(n&1){let e=Dn();ge(0,"div")(1,"label",6)(2,"input",7,0),bt("change",function(){gt(e);let r=zr(3),s=Ae(2);return yt(s.onCheckboxChange(r.checked))}),ye()()()}if(n&2){let e=Ae(2);xe(2),Ne("checked",e.selectedGroupRows().length===e.group().value.length)}}function Ste(n,t){}function Cte(n,t){if(n&1&&(ge(0,"div",3)(1,"div",4),It(2,wte,4,1,"div")(3,Ste,0,0,"ng-template",5),ye()()),n&2){let e=Ae();Pr("height",e.groupHeaderRowHeight,"px")("width",e.innerWidth,"px"),xe(2),Kt(e.groupHeader.checkboxable?2:-1),xe(),Ne("ngTemplateOutlet",e.groupHeader.template)("ngTemplateOutletContext",e.groupContext)}}function Mte(n,t){n&1&&Rl(0)}function Ete(n,t){}function Tte(n,t){if(n&1&&(ge(0,"div",8),It(1,Ete,0,0,"ng-template",5),ye()),n&2){let e=Ae();Pr("height",e.detailRowHeight,"px"),xe(),Ne("ngTemplateOutlet",e.rowDetail.template)("ngTemplateOutletContext",e.rowContext)}}function Ate(n,t){if(n&1&&tt(0,"datatable-body-row",0),n&2){let e=Ae();Ne("innerWidth",e.innerWidth)("offsetX",e.offsetX)("columns",e._internalColumns)("rowHeight",e.rowHeight)("row",e.summaryRow)("rowIndex",-1)}}var rH=[[["","loading-indicator",""]],[["","empty-content",""]]],sH=["[loading-indicator]","[empty-content]"],Dte=(n,t,e,i)=>({template:n,rowTemplate:t,row:e,index:i});function Ite(n,t){n&1&&(ge(0,"div",4)(1,"div",9),Rl(2),ye()())}function Rte(n,t){if(n&1&&tt(0,"ghost-loader",5),n&2){let e=Ae();Ne("columns",e.columns)("pageSize",e.pageSize)("rowHeight",e.rowHeight)("ghostBodyHeight",e.bodyHeight)}}function Pte(n,t){if(n&1&&tt(0,"datatable-summary-row",11),n&2){let e=Ae(2);Ne("rowHeight",e.summaryHeight)("offsetX",e.offsetX)("innerWidth",e.innerWidth)("rows",e.rows)("columns",e.columns)}}function kte(n,t){n&1&&Ko(0)}function Lte(n,t){if(n&1&&It(0,kte,1,0,"ng-container",15),n&2){let e=Ae(),i=e.$implicit,r=e.$index,s=zr(5),o=Ae(2);Ne("rowDefInternal",Rd(1,Dte,o.rowDefTemplate,s,i,r))}}function Nte(n,t){if(n&1){let e=Dn();ge(0,"datatable-body-row",17,3),bt("treeAction",function(){gt(e);let r=Ae(2).$implicit,s=Ae(2);return yt(s.onTreeAction(r))})("activate",function(r){gt(e);let s=Ae(2).$index,o=Ae(2),a=zr(3);return yt(a.onActivate(r,o.indexes().first+s))})("drop",function(r){gt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return yt(a.drop(r,o,s))})("dragover",function(r){gt(e);let s=Ae(2).$implicit,o=Ae(2);return yt(o.dragOver(r,s))})("dragenter",function(r){gt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return yt(a.dragEnter(r,o,s))})("dragleave",function(r){gt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return yt(a.dragLeave(r,o,s))})("dragstart",function(r){gt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return yt(a.drag(r,o,s))})("dragend",function(r){gt(e);let s=Ae(2).$implicit,o=Ae(2);return yt(o.dragEnd(r,s))}),ye()}if(n&2){let e=Ae(2).$implicit,i=zr(1),r=Ae(2),s=zr(3);Ne("disable$",i.disable$)("isSelected",s.getRowSelected(e))("innerWidth",r.innerWidth)("offsetX",r.offsetX)("columns",r.columns)("rowHeight",r.getRowHeight(e))("row",e)("rowIndex",r.getRowIndex(e))("expanded",r.getRowExpanded(e))("rowClass",r.rowClass)("displayCheck",r.displayCheck)("treeStatus",e==null?null:e.treeStatus)("ghostLoadingIndicator",r.ghostLoadingIndicator)("draggable",r.rowDraggable)("verticalScrollVisible",r.verticalScrollVisible)}}function Ote(n,t){if(n&1&&It(0,Nte,2,15,"datatable-body-row",16),n&2){let e=Ae().$implicit,i=Ae(2);Kt(i.isRow(e)?0:-1)}}function Fte(n,t){if(n&1){let e=Dn();ge(0,"datatable-body-row",17,3),bt("treeAction",function(){gt(e);let r=Ae(2).$implicit,s=Ae(2);return yt(s.onTreeAction(r))})("activate",function(r){gt(e);let s=Ae(2).$index,o=Ae(2),a=zr(3);return yt(a.onActivate(r,o.indexes().first+s))})("drop",function(r){gt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return yt(a.drop(r,o,s))})("dragover",function(r){gt(e);let s=Ae(2).$implicit,o=Ae(2);return yt(o.dragOver(r,s))})("dragenter",function(r){gt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return yt(a.dragEnter(r,o,s))})("dragleave",function(r){gt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return yt(a.dragLeave(r,o,s))})("dragstart",function(r){gt(e);let s=zr(1),o=Ae(2).$implicit,a=Ae(2);return yt(a.drag(r,o,s))})("dragend",function(r){gt(e);let s=Ae(2).$implicit,o=Ae(2);return yt(o.dragEnd(r,s))}),ye()}if(n&2){let e=Ae(2).$implicit,i=zr(1),r=Ae(2),s=zr(3);Ne("disable$",i.disable$)("isSelected",s.getRowSelected(e))("innerWidth",r.innerWidth)("offsetX",r.offsetX)("columns",r.columns)("rowHeight",r.getRowHeight(e))("row",e)("rowIndex",r.getRowIndex(e))("expanded",r.getRowExpanded(e))("rowClass",r.rowClass)("displayCheck",r.displayCheck)("treeStatus",e==null?null:e.treeStatus)("ghostLoadingIndicator",r.ghostLoadingIndicator)("draggable",r.rowDraggable)("verticalScrollVisible",r.verticalScrollVisible)}}function Bte(n,t){if(n&1&&It(0,Fte,2,15,"datatable-body-row",16),n&2){let e=Ae().$implicit,i=Ae(2);Kt(i.isRow(e)?0:-1)}}function Vte(n,t){if(n&1){let e=Dn();ge(0,"datatable-body-row",19,3),bt("activate",function(r){let s=gt(e).$index;Ae(4);let o=zr(3);return yt(o.onActivate(r,s))})("drop",function(r){let s=gt(e).$implicit,o=zr(1),a=Ae(4);return yt(a.drop(r,s,o))})("dragover",function(r){let s=gt(e).$implicit,o=Ae(4);return yt(o.dragOver(r,s))})("dragenter",function(r){let s=gt(e).$implicit,o=zr(1),a=Ae(4);return yt(a.dragEnter(r,s,o))})("dragleave",function(r){let s=gt(e).$implicit,o=zr(1),a=Ae(4);return yt(a.dragLeave(r,s,o))})("dragstart",function(r){let s=gt(e).$implicit,o=zr(1),a=Ae(4);return yt(a.drag(r,s,o))})("dragend",function(r){let s=gt(e).$implicit,o=Ae(4);return yt(o.dragEnd(r,s))}),ye()}if(n&2){let e=t.$implicit,i=Ae(2).$implicit,r=zr(1),s=Ae(2),o=zr(3);Ne("disable$",r.disable$)("isSelected",o.getRowSelected(e))("innerWidth",s.innerWidth)("offsetX",s.offsetX)("columns",s.columns)("rowHeight",s.getRowHeight(e))("row",e)("group",i.value)("rowIndex",s.getRowIndex(e))("expanded",s.getRowExpanded(e))("rowClass",s.rowClass)("ghostLoadingIndicator",s.ghostLoadingIndicator)("draggable",s.rowDraggable)("verticalScrollVisible",s.verticalScrollVisible)}}function zte(n,t){if(n&1&&xs(0,Vte,2,14,"datatable-body-row",18,EI().rowTrackingFn,!0),n&2){let e=Ae().$implicit;ws(e.value)}}function Ute(n,t){if(n&1){let e=Dn();ge(0,"datatable-row-wrapper",14,1),bt("rowContextmenu",function(r){gt(e);let s=Ae(2);return yt(s.rowContextmenu.emit(r))}),It(2,Lte,1,6,"ng-container")(3,Ote,1,1)(4,Bte,1,1,"ng-template",null,2,AI)(6,zte,2,0),ye()}if(n&2){let e=t.$implicit,i=t.$index,r=Ae(2);Ne("groupedRows",r.groupedRows)("innerWidth",r.innerWidth)("ngStyle",r.rowsStyles()[i])("rowDetail",r.rowDetail)("groupHeader",r.groupHeader)("offsetX",r.offsetX)("detailRowHeight",r.getDetailRowHeight(e&&e[i],i))("groupHeaderRowHeight",r.getGroupHeaderRowHeight(e&&e[i],i))("row",e)("disableCheck",r.disableRowCheck)("expanded",r.getRowExpanded(e))("rowIndex",r.getRowIndex(e&&e[i]))("selected",r.selected),wo("hidden",r.ghostLoadingIndicator&&(!r.rowCount||!r.virtualization||!r.scrollbarV)?!0:null),xe(2),Kt(r.rowDefTemplate?2:3),xe(4),Kt(r.isGroup(e)?6:-1)}}function Hte(n,t){if(n&1&&tt(0,"datatable-summary-row",13),n&2){let e=Ae(2);Ne("ngStyle",e.bottomSummaryRowsStyles())("rowHeight",e.summaryHeight)("offsetX",e.offsetX)("innerWidth",e.innerWidth)("rows",e.rows)("columns",e.columns)}}function jte(n,t){if(n&1){let e=Dn();ge(0,"datatable-scroller",10),bt("scroll",function(r){gt(e);let s=Ae();return yt(s.onBodyScroll(r))}),It(1,Pte,1,5,"datatable-summary-row",11),xs(2,Ute,7,16,"datatable-row-wrapper",12,EI().rowTrackingFn,!0),It(4,Hte,1,6,"datatable-summary-row",13),ye()}if(n&2){let e=Ae();Ne("scrollbarV",e.scrollbarV)("scrollbarH",e.scrollbarH)("scrollHeight",e.scrollHeight())("scrollWidth",e.columnGroupWidths==null?null:e.columnGroupWidths.total),xe(),Kt(e.summaryRow&&e.summaryPosition==="top"?1:-1),xe(),ws(e.rowsToRender()),xe(2),Kt(e.summaryRow&&e.summaryPosition==="bottom"?4:-1)}}function Wte(n,t){if(n&1){let e=Dn();ge(0,"datatable-scroller",20),bt("scroll",function(r){gt(e);let s=Ae();return yt(s.onBodyScroll(r))}),Rl(1,1),ye()}if(n&2){let e=Ae();Pr("width",e.scrollbarH?(e.columnGroupWidths==null?null:e.columnGroupWidths.total)+"px":"100%"),Ne("scrollbarV",e.scrollbarV)("scrollbarH",e.scrollbarH)("scrollHeight",e.scrollHeight())}}function Gte(n,t){}function $te(n,t){if(n&1&&It(0,Gte,0,0,"ng-template",1),n&2){let e=Ae();Ne("ngTemplateOutlet",e.targetMarkerTemplate)("ngTemplateOutletContext",e.targetMarkerContext)}}function qte(n,t){if(n&1){let e=Dn();ge(0,"label",2)(1,"input",5),bt("change",function(){gt(e);let r=Ae();return yt(r.select.emit())}),ye()()}if(n&2){let e=Ae();xe(),Ne("checked",e.allRowsSelected)}}function Xte(n,t){}function Yte(n,t){if(n&1&&It(0,Xte,0,0,"ng-template",1),n&2){let e=Ae();Ne("ngTemplateOutlet",e.column.headerTemplate)("ngTemplateOutletContext",e.cellContext)}}function Zte(n,t){if(n&1){let e=Dn();ge(0,"span",3)(1,"span",6),bt("click",function(){gt(e);let r=Ae();return yt(r.onSort())}),ot(2),ye()()}if(n&2){let e=Ae();xe(2),Ci(" ",e.name," ")}}function Kte(n,t){if(n&1){let e=Dn();ge(0,"datatable-header-cell",4),bt("resize",function(r){let s=gt(e).$implicit,o=Ae(2);return yt(o.onColumnResized(r,s))})("resizing",function(r){let s=gt(e).$implicit,o=Ae(2);return yt(o.onColumnResizing(r,s))})("longPressStart",function(r){gt(e);let s=Ae(2);return yt(s.onLongPressStart(r))})("longPressEnd",function(r){gt(e);let s=Ae(2);return yt(s.onLongPressEnd(r))})("sort",function(r){gt(e);let s=Ae(2);return yt(s.onSort(r))})("select",function(r){gt(e);let s=Ae(2);return yt(s.select.emit(r))})("columnContextmenu",function(r){gt(e);let s=Ae(2);return yt(s.columnContextmenu.emit(r))}),ye()}if(n&2){let e=t.$implicit,i=Ae(2);Ne("resizeEnabled",e.resizeable)("pressModel",e)("pressEnabled",i.reorderable&&e.draggable)("dragX",i.reorderable&&e.draggable&&e.dragging)("dragY",!1)("dragModel",e)("dragEventTarget",i.dragEventTarget)("headerHeight",i.headerHeight)("isTarget",e.isTarget)("targetMarkerTemplate",i.targetMarkerTemplate)("targetMarkerContext",e.targetMarkerContext)("column",e)("sortType",i.sortType)("sorts",i.sorts)("selectionType",i.selectionType)("sortAscendingIcon",i.sortAscendingIcon)("sortDescendingIcon",i.sortDescendingIcon)("sortUnsetIcon",i.sortUnsetIcon)("allRowsSelected",i.allRowsSelected)("enableClearingSortState",i.enableClearingSortState)}}function Qte(n,t){if(n&1&&(ge(0,"div",2),xs(1,Kte,1,20,"datatable-header-cell",3,iH),ye()),n&2){let e=t.$implicit,i=Ae();vu("datatable-row-"+e.type),Ne("ngStyle",i._styleByGroup[e.type]),xe(),ws(e.columns)}}var Jte=(n,t)=>t.number;function ene(n,t){if(n&1){let e=Dn();ge(0,"li",6)(1,"a",7),bt("click",function(){let r=gt(e).$implicit,s=Ae();return yt(s.selectPage(r.number))}),ot(2),ye()()}if(n&2){let e=t.$implicit,i=Ae();Si("active",e.number===i.page),wo("aria-label","page "+e.number),xe(2),Ci(" ",e.text," ")}}var tne=n=>({"selected-count":n}),nne=(n,t,e,i,r)=>({rowCount:n,pageSize:t,selectedCount:e,curPage:i,offset:r});function ine(n,t){}function rne(n,t){if(n&1&&It(0,ine,0,0,"ng-template",1),n&2){let e=Ae();Ne("ngTemplateOutlet",e.footerTemplate.template)("ngTemplateOutletContext",SV(2,nne,e.rowCount,e.pageSize,e.selectedCount,e.curPage,e.offset))}}function sne(n,t){if(n&1&&(ge(0,"span"),ot(1),ye()),n&2){let e=Ae(2);xe(),nS(" ",e.selectedCount==null?null:e.selectedCount.toLocaleString()," ",e.selectedMessage," / ")}}function one(n,t){if(n&1){let e=Dn();ge(0,"div",2),It(1,sne,2,2,"span"),ot(2),ye(),ge(3,"datatable-pager",3),bt("change",function(r){gt(e);let s=Ae();return yt(s.page.emit(r))}),ye()}if(n&2){let e=Ae();xe(),Kt(e.selectedMessage?1:-1),xe(),nS(" ",e.rowCount==null?null:e.rowCount.toLocaleString()," ",e.totalMessage," "),xe(),Ne("pagerLeftArrowIcon",e.pagerLeftArrowIcon)("pagerRightArrowIcon",e.pagerRightArrowIcon)("pagerPreviousIcon",e.pagerPreviousIcon)("pagerNextIcon",e.pagerNextIcon)("page",e.curPage)("size",e.pageSize)("count",e.rowCount)("hidden",!e.isVisible)}}function ane(n,t){if(n&1){let e=Dn();ge(0,"datatable-header",5),Pl(1,"async"),bt("sort",function(r){gt(e);let s=Ae();return yt(s.onColumnSort(r))})("resize",function(r){gt(e);let s=Ae();return yt(s.onColumnResize(r))})("resizing",function(r){gt(e);let s=Ae();return yt(s.onColumnResizing(r))})("reorder",function(r){gt(e);let s=Ae();return yt(s.onColumnReorder(r))})("select",function(){gt(e);let r=Ae();return yt(r.onHeaderSelect())})("columnContextmenu",function(r){gt(e);let s=Ae();return yt(s.onColumnContextmenu(r))}),ye()}if(n&2){let e=Ae();Ne("sorts",e.sorts)("sortType",e.sortType)("scrollbarH",e.scrollbarH)("innerWidth",e._innerWidth)("offsetX",Dv(1,17,e._offsetX))("dealsWithGroup",e.groupedRows!==void 0)("columns",e._internalColumns)("headerHeight",e.headerHeight)("reorderable",e.reorderable)("targetMarkerTemplate",e.targetMarkerTemplate)("sortAscendingIcon",e.cssClasses.sortAscending)("sortDescendingIcon",e.cssClasses.sortDescending)("sortUnsetIcon",e.cssClasses.sortUnset)("allRowsSelected",e.allRowsSelected)("selectionType",e.selectionType)("verticalScrollVisible",e.verticalScrollVisible)("enableClearingSortState",e.enableClearingSortState)}}function lne(n,t){n&1&&tt(0,"datatable-progress")}function cne(n,t){if(n&1&&tt(0,"div",6),n&2){let e=Ae();Ne("innerHTML",e.messages.emptyMessage,iI)}}function une(n,t){if(n&1){let e=Dn();ge(0,"datatable-footer",7),bt("page",function(r){gt(e);let s=Ae();return yt(s.onFooterPage(r))}),ye()}if(n&2){let e=Ae();Ne("rowCount",e.groupedRows!==void 0?e._internalRows.length:e.rowCount)("pageSize",e.pageSize)("offset",e.offset)("footerHeight",e.footerHeight)("footerTemplate",e.footer)("totalMessage",e.messages.totalMessage)("pagerLeftArrowIcon",e.cssClasses.pagerLeftArrow)("pagerRightArrowIcon",e.cssClasses.pagerRightArrow)("pagerPreviousIcon",e.cssClasses.pagerPrevious)("selectedCount",e.selected.length)("selectedMessage",!!e.selectionType&&e.messages.selectedMessage)("pagerNextIcon",e.cssClasses.pagerNext)}}var hne=(()=>{class n{static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","ngx-datatable-footer-template",""]]})}}return n})(),dne=(()=>{class n{static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","ngx-datatable-group-header-template",""]]})}}return n})(),fne=(()=>{class n{constructor(){this.rowHeight=0,this.checkboxable=!1,this.toggle=new en}get template(){return this._templateInput||this._templateQuery}toggleExpandGroup(e){this.toggle.emit({type:"group",value:e})}expandAllGroups(){this.toggle.emit({type:"all",value:!0})}collapseAllGroups(){this.toggle.emit({type:"all",value:!1})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["ngx-datatable-group-header"]],contentQueries:function(i,r,s){if(i&1&&Qo(s,dne,7,Vs),i&2){let o;Hn(o=jn())&&(r._templateQuery=o.first)}},inputs:{rowHeight:"rowHeight",checkboxable:"checkboxable",_templateInput:[0,"template","_templateInput"]},outputs:{toggle:"toggle"}})}}return n})();function pne(){return""}function WR(n){return n==null?pne:typeof n=="number"?mne:n.indexOf(".")!==-1?yne:gne}function mne(n,t){if(n==null)return"";if(!n||t==null)return n;let e=n[t];return e??""}function gne(n,t){if(n==null)return"";if(!n||!t)return n;let e=n[t];return e??""}function yne(n,t){if(n==null)return"";if(!n||!t)return n;let e=n[t];if(e!==void 0)return e;e=n;let i=t.split(".");if(i.length){for(let r=0;r<i.length;r++)if(e=e[i[r]],e==null)return""}return e}function ey(n){return n&&(t=>WR(n)(t,n))}function OR(n,t,e){if(t&&e){let i={},r=n.length,s=null;i[0]=new MC;let o=n.reduce((u,d)=>{let g=e(d);return u.indexOf(g)===-1&&u.push(g),u},[]);for(let u=0;u<r;u++)i[e(n[u])]=new MC(n[u]);for(let u=0;u<r;u++){s=i[e(n[u])];let d=0,g=t(s.row);g&&o.indexOf(g)>-1&&(d=g),s.parent=i[d],s.row.level=s.parent.row.level+1,s.parent.children.push(s)}let a=[];return i[0].flatten(function(){a=[...a,this.row]},!0),a}else return n}var MC=class{constructor(t=null){t||(t={level:-1,treeStatus:"expanded"}),this.row=t,this.parent=null,this.children=[]}flatten(t,e){if(this.row.treeStatus==="expanded")for(let i=0,r=this.children.length;i<r;i++){let s=this.children[i];t.apply(s,Array.prototype.slice.call(arguments,2)),e&&s.flatten.apply(s,arguments)}}};function vne(n){return n=n.replace(/[^a-zA-Z0-9 ]/g," "),n=n.replace(/([a-z](?=[A-Z]))/g,"$1 "),n=n.replace(/([^a-zA-Z0-9 ])|^[0-9]+/g,"").trim().toLowerCase(),n=n.replace(/([ 0-9]+)([a-zA-Z])/g,function(t,e,i){return e.trim()+i.toUpperCase()}),n}function _ne(n){return n.replace(/([A-Z])/g,t=>` ${t}`).replace(/^./,t=>t.toUpperCase())}function bne(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}function QU(n,t=150){if(!n)return;let e=!1;for(let i of n)i.$$id||(i.$$id=bne()),v_(i.prop)&&i.name&&(i.prop=vne(i.name)),i.$$valueGetter||(i.$$valueGetter=WR(i.prop)),!v_(i.prop)&&v_(i.name)&&(i.name=_ne(String(i.prop))),v_(i.prop)&&v_(i.name)&&(i.name=""),"resizeable"in i||(i.resizeable=!0),"sortable"in i||(i.sortable=!0),"draggable"in i||(i.draggable=!0),"canAutoResize"in i||(i.canAutoResize=!0),"width"in i||(i.width=t),"isTreeColumn"in i&&i.isTreeColumn&&!e?e=!0:i.isTreeColumn=!1}function v_(n){return n==null}function xne(n){let t=[];for(let e of n){let i={},r=Object.getOwnPropertyNames(e);for(let s of r)i[s]=e[s];e.headerTemplate&&(i.headerTemplate=e.headerTemplate),e.cellTemplate&&(i.cellTemplate=e.cellTemplate),e.ghostCellTemplate&&(i.ghostCellTemplate=e.ghostCellTemplate),e.summaryFunc&&(i.summaryFunc=e.summaryFunc),e.summaryTemplate&&(i.summaryTemplate=e.summaryTemplate),t.push(i)}return t}var wne=(()=>{class n{static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","ngx-datatable-header-template",""]]})}}return n})(),GR=(()=>{class n{constructor(){this.template=ze(Vs)}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","ngx-datatable-cell-template",""]]})}}return n})(),Sne=(()=>{class n{constructor(){this.template=ze(Vs)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","ngx-datatable-tree-toggle",""]]})}}return n})(),VR=(()=>{class n{constructor(){this.columnInputChanges=new Jr}get columnInputChanges$(){return this.columnInputChanges.asObservable()}onInputChange(){this.columnInputChanges.next(void 0)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Vt({token:n,factory:n.\u0275fac})}}return n})(),Cne=(()=>{class n{static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","ngx-datatable-ghost-cell-template",""]]})}}return n})(),$R=(()=>{class n{constructor(){this.columnChangesService=ze(VR),this.isFirstChange=!0}get cellTemplate(){return this._cellTemplateInput||this._cellTemplateQuery}get headerTemplate(){return this._headerTemplateInput||this._headerTemplateQuery}get treeToggleTemplate(){return this._treeToggleTemplateInput||this._treeToggleTemplateQuery}get ghostCellTemplate(){return this._ghostCellTemplateInput||this._ghostCellTemplateQuery}ngOnChanges(){this.isFirstChange?this.isFirstChange=!1:this.columnChangesService.onInputChange()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["ngx-datatable-column"]],contentQueries:function(i,r,s){if(i&1&&(Qo(s,GR,7,Vs),Qo(s,wne,7,Vs),Qo(s,Sne,7,Vs),Qo(s,Cne,7,Vs)),i&2){let o;Hn(o=jn())&&(r._cellTemplateQuery=o.first),Hn(o=jn())&&(r._headerTemplateQuery=o.first),Hn(o=jn())&&(r._treeToggleTemplateQuery=o.first),Hn(o=jn())&&(r._ghostCellTemplateQuery=o.first)}},inputs:{name:"name",prop:"prop",bindAsUnsafeHtml:[2,"bindAsUnsafeHtml","bindAsUnsafeHtml",Hi],frozenLeft:[2,"frozenLeft","frozenLeft",Hi],frozenRight:[2,"frozenRight","frozenRight",Hi],flexGrow:[2,"flexGrow","flexGrow",Qs],resizeable:[2,"resizeable","resizeable",Hi],comparator:"comparator",pipe:"pipe",sortable:[2,"sortable","sortable",Hi],draggable:[2,"draggable","draggable",Hi],canAutoResize:[2,"canAutoResize","canAutoResize",Hi],minWidth:[2,"minWidth","minWidth",Qs],width:[2,"width","width",Qs],maxWidth:[2,"maxWidth","maxWidth",Qs],checkboxable:[2,"checkboxable","checkboxable",Hi],headerCheckboxable:[2,"headerCheckboxable","headerCheckboxable",Hi],headerClass:"headerClass",cellClass:"cellClass",isTreeColumn:[2,"isTreeColumn","isTreeColumn",Hi],treeLevelIndent:"treeLevelIndent",summaryFunc:"summaryFunc",summaryTemplate:"summaryTemplate",_cellTemplateInput:[0,"cellTemplate","_cellTemplateInput"],_headerTemplateInput:[0,"headerTemplate","_headerTemplateInput"],_treeToggleTemplateInput:[0,"treeToggleTemplate","_treeToggleTemplateInput"],_ghostCellTemplateInput:[0,"ghostCellTemplate","_ghostCellTemplateInput"]},features:[Ks]})}}return n})(),Mne=(()=>{class n{static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","ngx-datatable-row-detail-template",""]]})}}return n})(),Ene=(()=>{class n{constructor(){this.rowHeight=0,this.toggle=new en}get template(){return this._templateInput||this._templateQuery}toggleExpandRow(e){this.toggle.emit({type:"row",value:e})}expandAllRows(){this.toggle.emit({type:"all",value:!0})}collapseAllRows(){this.toggle.emit({type:"all",value:!1})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["ngx-datatable-row-detail"]],contentQueries:function(i,r,s){if(i&1&&Qo(s,Mne,7,Vs),i&2){let o;Hn(o=jn())&&(r._templateQuery=o.first)}},inputs:{rowHeight:"rowHeight",_templateInput:[0,"template","_templateInput"]},outputs:{toggle:"toggle"}})}}return n})(),Tne=(()=>{class n{get template(){return this._templateInput||this._templateQuery}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["ngx-datatable-footer"]],contentQueries:function(i,r,s){if(i&1&&Qo(s,hne,5,Vs),i&2){let o;Hn(o=jn())&&(r._templateQuery=o.first)}},inputs:{footerHeight:[2,"footerHeight","footerHeight",Qs],totalMessage:"totalMessage",selectedMessage:"selectedMessage",pagerLeftArrowIcon:"pagerLeftArrowIcon",pagerRightArrowIcon:"pagerRightArrowIcon",pagerPreviousIcon:"pagerPreviousIcon",pagerNextIcon:"pagerNextIcon",_templateInput:[0,"template","_templateInput"]}})}}return n})(),JU=(()=>{class n{constructor(){this.renderer=ze(Za),this.scrollbarV=!1,this.scrollbarH=!1,this.scroll=new en,this.scrollYPos=0,this.scrollXPos=0,this.prevScrollYPos=0,this.prevScrollXPos=0,this.element=ze(Rr).nativeElement,this._scrollEventListener=null}ngOnInit(){if(this.scrollbarV||this.scrollbarH){let e=this.renderer;this.parentElement=e.parentNode(e.parentNode(this.element)),this._scrollEventListener=this.onScrolled.bind(this),this.parentElement.addEventListener("scroll",this._scrollEventListener)}}ngOnDestroy(){this._scrollEventListener&&(this.parentElement.removeEventListener("scroll",this._scrollEventListener),this._scrollEventListener=null)}setOffset(e){this.parentElement&&(this.parentElement.scrollTop=e)}onScrolled(e){let i=e.currentTarget;requestAnimationFrame(()=>{this.scrollYPos=i.scrollTop,this.scrollXPos=i.scrollLeft,this.updateOffset()})}updateOffset(){let e;this.scrollYPos<this.prevScrollYPos?e="down":this.scrollYPos>this.prevScrollYPos&&(e="up"),this.scroll.emit({direction:e,scrollYPos:this.scrollYPos,scrollXPos:this.scrollXPos}),this.prevScrollYPos=this.scrollYPos,this.prevScrollXPos=this.scrollXPos}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["datatable-scroller"]],hostAttrs:[1,"datatable-scroll"],hostVars:4,hostBindings:function(i,r){i&2&&Pr("height",r.scrollHeight,"px")("width",r.scrollWidth,"px")},inputs:{scrollbarV:"scrollbarV",scrollbarH:"scrollbarH",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth"},outputs:{scroll:"scroll"},ngContentSelectors:jR,decls:1,vars:0,template:function(i,r){i&1&&(_u(),Rl(0))},encapsulation:2,changeDetection:0})}}return n})();function Cp(n){let t={left:[],center:[],right:[]};if(n)for(let e of n)e.frozenLeft?t.left.push(e):e.frozenRight?t.right.push(e):t.center.push(e);return t}function __(n,t){return{left:SC(n.left),center:SC(n.center),right:SC(n.right),total:Math.floor(SC(t))}}function SC(n,t){let e=0;if(n)for(let i of n){let s=t&&i[t]?i[t]:i.width;e=e+parseFloat(s)}return e}function Ane(n,t){let e=0;for(let i of n){let r=t&&i[t];e=e+(r?i[t]:i.width)}return e}function oH(n){let t=Cp(n);return[{type:"left",columns:t.left},{type:"center",columns:t.center},{type:"right",columns:t.right}]}var zR=class{constructor(){this.treeArray=[]}clearCache(){this.treeArray=[]}initCache(t){let{rows:e,rowHeight:i,detailRowHeight:r,externalVirtual:s,rowCount:o,rowIndexes:a,rowExpansions:u}=t,d=typeof i=="function",g=typeof r=="function";if(!d&&isNaN(i))throw new Error(`Row Height cache initialization failed. Please ensure that 'rowHeight' is a
        valid number or function value: (${i}) when 'scrollbarV' is enabled.`);if(!g&&isNaN(r))throw new Error(`Row Height cache initialization failed. Please ensure that 'detailRowHeight' is a
        valid number or function value: (${r}) when 'scrollbarV' is enabled.`);let v=s?o:e.length;this.treeArray=new Array(v);for(let x=0;x<v;++x)this.treeArray[x]=0;for(let x=0;x<v;++x){let C=e[x],A=i;d&&(A=i(C));let O=u.has(C);if(C&&O)if(g){let N=a.get(C);A+=r(C,N)}else A+=r;this.update(x,A)}}getRowIndex(t){return t===0?0:this.calcRowIndex(t)}update(t,e){if(!this.treeArray.length)throw new Error(`Update at index ${t} with value ${e} failed:
        Row Height cache not initialized.`);let i=this.treeArray.length;for(t|=0;t<i;)this.treeArray[t]+=e,t|=t+1}query(t){if(!this.treeArray.length)throw new Error(`query at index ${t} failed: Fenwick tree array not initialized.`);let e=0;for(t|=0;t>=0;)e+=this.treeArray[t],t=(t&t+1)-1;return e}queryBetween(t,e){return this.query(e)-this.query(t-1)}calcRowIndex(t){if(!this.treeArray.length)return 0;let e=-1,i=this.treeArray.length,r=Math.pow(2,i.toString(2).length-1);for(let s=r;s!==0;s>>=1){let o=e+s;o<i&&t>=this.treeArray[o]&&(t-=this.treeArray[o],e=o)}return e+1}},es=function(n){return n.up="ArrowUp",n.down="ArrowDown",n.return="Enter",n.escape="Escape",n.left="ArrowLeft",n.right="ArrowRight",n}(es||{}),nl=function(n){return n.asc="asc",n.desc="desc",n}(nl||{}),EC=function(n){return n.single="single",n.multi="multi",n}(EC||{}),CC=function(n){return n.standard="standard",n.flex="flex",n.force="force",n}(CC||{}),UR=function(n){return n.header="header",n.body="body",n}(UR||{}),Cc=function(n){return n.single="single",n.multi="multi",n.multiClick="multiClick",n.cell="cell",n.checkbox="checkbox",n}(Cc||{}),aH=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["ghost-loader"]],inputs:{columns:"columns",pageSize:[2,"pageSize","pageSize",Qs],rowHeight:"rowHeight",ghostBodyHeight:[2,"ghostBodyHeight","ghostBodyHeight",Qs]},decls:3,vars:3,consts:[[1,"ghost-loader","ghost-cell-container"],[1,"ghost-element",3,"height"],[1,"ghost-element"],[1,"line","ghost-cell-strip",3,"width"],[3,"ngTemplateOutlet"],[1,"line","ghost-cell-strip"]],template:function(i,r){i&1&&(ge(0,"div",0),xs(1,Qee,3,2,"div",1,Mv),ye()),i&2&&(Pr("height",r.ghostBodyHeight+"px"),xe(),ws(rS(2,qee).constructor(r.pageSize)))},dependencies:[pp],styles:["@keyframes _ngcontent-%COMP%_ghost{0%{background-position:0vw 0}to{background-position:100vw 0}}.ghost-loader[_ngcontent-%COMP%]{overflow:hidden}.ghost-loader[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{width:100%;height:12px;animation-name:_ngcontent-%COMP%_ghost;animation-iteration-count:infinite;animation-timing-function:linear}.ghost-loader[_ngcontent-%COMP%]   .ghost-element[_ngcontent-%COMP%]{display:flex}.ghost-overlay[_nghost-%COMP%]{position:sticky;top:20px}.ghost-overlay[_nghost-%COMP%]   .ghost-loader[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{margin:.9rem 1.2rem}"],changeDetection:0})}}return n})(),Dne=(()=>{class n{set disable$(e){this._disable$=e,this.cellContext.disable$=e}get disable$(){return this._disable$}set group(e){this._group=e,this.cellContext.group=e,this.checkValueUpdates(),this.cd.markForCheck()}get group(){return this._group}set rowHeight(e){this._rowHeight=e,this.cellContext.rowHeight=e,this.checkValueUpdates(),this.cd.markForCheck()}get rowHeight(){return this._rowHeight}set isSelected(e){this._isSelected=e,this.cellContext.isSelected=e,this.cd.markForCheck()}get isSelected(){return this._isSelected}set expanded(e){this._expanded=e,this.cellContext.expanded=e,this.cd.markForCheck()}get expanded(){return this._expanded}set rowIndex(e){this._rowIndex=e,this.cellContext.rowIndex=e,this.checkValueUpdates(),this.cd.markForCheck()}get rowIndex(){return this._rowIndex}set column(e){this._column=e,this.cellContext.column=e,this.checkValueUpdates(),this.cd.markForCheck()}get column(){return this._column}set row(e){this._row=e,this.cellContext.row=e,this.checkValueUpdates(),this.cd.markForCheck()}get row(){return this._row}set sorts(e){this._sorts=e,this.sortDir=this.calcSortDir(e)}get sorts(){return this._sorts}set treeStatus(e){e!=="collapsed"&&e!=="expanded"&&e!=="loading"&&e!=="disabled"?this._treeStatus="collapsed":this._treeStatus=e,this.cellContext.treeStatus=this._treeStatus,this.checkValueUpdates(),this.cd.markForCheck()}get treeStatus(){return this._treeStatus}get columnCssClasses(){let e="datatable-body-cell";if(this.column.cellClass){if(typeof this.column.cellClass=="string")e+=" "+this.column.cellClass;else if(typeof this.column.cellClass=="function"){let i=this.column.cellClass({row:this.row,group:this.group,column:this.column,value:this.value,rowHeight:this.rowHeight});if(typeof i=="string")e+=" "+i;else if(typeof i=="object"){let r=Object.keys(i);for(let s of r)i[s]===!0&&(e+=` ${s}`)}}}return this.sortDir||(e+=" sort-active"),this.isFocused&&!this.disable$?.value&&(e+=" active"),this.sortDir===nl.asc&&(e+=" sort-asc"),this.sortDir===nl.desc&&(e+=" sort-desc"),this.disable$?.value&&(e+=" row-disabled"),e}get width(){return this.column.width}get minWidth(){return this.column.minWidth}get maxWidth(){return this.column.maxWidth}get height(){let e=this.rowHeight;return isNaN(e)?e:e+"px"}constructor(){this.cd=ze(Ss),this.ghostLoadingIndicator=!1,this.activate=new en,this.treeAction=new en,this.isFocused=!1,this._element=ze(Rr).nativeElement,this.cellContext={onCheckboxChangeFn:e=>this.onCheckboxChange(e),activateFn:e=>this.activate.emit(e),row:this.row,group:this.group,value:this.value,column:this.column,rowHeight:this.rowHeight,isSelected:this.isSelected,rowIndex:this.rowIndex,treeStatus:this.treeStatus,disable$:this.disable$,onTreeAction:()=>this.onTreeAction()}}ngDoCheck(){this.checkValueUpdates()}ngOnDestroy(){this.cellTemplate&&this.cellTemplate.clear(),this.ghostLoaderTemplate&&this.ghostLoaderTemplate.clear()}checkValueUpdates(){let e="";if(!this.row||!this.column)e="";else{let i=this.column.$$valueGetter(this.row,this.column.prop),r=this.column.pipe;r?e=r.transform(i):e!==void 0&&(e=i)}this.value!==e&&(this.value=e,this.cellContext.value=e,this.cellContext.disable$=this.disable$,this.sanitizedValue=e!=null?this.stripHtml(e):e,this.cd.markForCheck())}onFocus(){this.isFocused=!0}onBlur(){this.isFocused=!1}onClick(e){this.activate.emit({type:"click",event:e,row:this.row,group:this.group,rowHeight:this.rowHeight,column:this.column,value:this.value,cellElement:this._element})}onDblClick(e){this.activate.emit({type:"dblclick",event:e,row:this.row,group:this.group,rowHeight:this.rowHeight,column:this.column,value:this.value,cellElement:this._element})}onKeyDown(e){let i=e.key,r=e.target===this._element;(i===es.return||i===es.down||i===es.up||i===es.left||i===es.right)&&r&&(e.preventDefault(),e.stopPropagation(),this.activate.emit({type:"keydown",event:e,row:this.row,group:this.group,rowHeight:this.rowHeight,column:this.column,value:this.value,cellElement:this._element}))}onCheckboxChange(e){this.activate.emit({type:"checkbox",event:e,row:this.row,group:this.group,rowHeight:this.rowHeight,column:this.column,value:this.value,cellElement:this._element,treeStatus:"collapsed"})}calcSortDir(e){if(!e)return;let i=e.find(r=>r.prop===this.column.prop);if(i)return i.dir}stripHtml(e){return e.replace?e.replace(/<\/?[^>]+(>|$)/g,""):e}onTreeAction(){this.treeAction.emit(this.row)}calcLeftMargin(e,i){let r=e.treeLevelIndent!=null?e.treeLevelIndent:50;return e.isTreeColumn?i.level*r:0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["datatable-body-cell"]],viewQuery:function(i,r){if(i&1&&(Oi(Jee,7,wr),Oi(ete,7,wr)),i&2){let s;Hn(s=jn())&&(r.cellTemplate=s.first),Hn(s=jn())&&(r.ghostLoaderTemplate=s.first)}},hostVars:10,hostBindings:function(i,r){i&1&&bt("focus",function(){return r.onFocus()})("blur",function(){return r.onBlur()})("click",function(o){return r.onClick(o)})("dblclick",function(o){return r.onDblClick(o)})("keydown",function(o){return r.onKeyDown(o)}),i&2&&(vu(r.columnCssClasses),Pr("width",r.width,"px")("min-width",r.minWidth,"px")("max-width",r.maxWidth,"px")("height",r.height))},inputs:{displayCheck:"displayCheck",disable$:"disable$",group:"group",rowHeight:"rowHeight",isSelected:"isSelected",expanded:"expanded",rowIndex:"rowIndex",column:"column",row:"row",sorts:"sorts",treeStatus:"treeStatus",ghostLoadingIndicator:"ghostLoadingIndicator"},outputs:{activate:"activate",treeAction:"treeAction"},decls:2,vars:1,consts:[["cellTemplate",""],[1,"datatable-body-cell-label",3,"margin-left"],[1,"datatable-body-cell-label"],[1,"datatable-checkbox"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["type","checkbox",3,"click","disabled","checked"],[1,"datatable-tree-button",3,"disabled"],[1,"datatable-tree-button",3,"click","disabled"],[1,"icon","datatable-icon-collapse"],[1,"icon","datatable-icon-up"],[1,"icon","datatable-icon-down"],[3,"title","innerHTML"],[3,"title"],[3,"columns","pageSize"]],template:function(i,r){i&1&&It(0,gte,5,5,"div",1)(1,vte,1,1),i&2&&Kt(r.row?0:1)},dependencies:[pp,aH,Fv],encapsulation:2,changeDetection:0})}}return n})(),lH=(()=>{class n{constructor(){this.cd=ze(Ss),this.treeStatus="collapsed",this.ghostLoadingIndicator=!1,this.verticalScrollVisible=!1,this.activate=new en,this.treeAction=new en,this._element=ze(Rr).nativeElement,this._rowDiffer=ze(Pd).find({}).create()}set columns(e){this._columns=e,this.recalculateColumns(e)}get columns(){return this._columns}set innerWidth(e){if(this._columns){let i=Cp(this._columns);this._columnGroupWidths=__(i,this._columns)}this._innerWidth=e,this.recalculateColumns()}get innerWidth(){return this._innerWidth}set offsetX(e){this._offsetX=e}get offsetX(){return this._offsetX}get cssClass(){let e="datatable-body-row";if(this.isSelected&&(e+=" active"),this.rowIndex%2!==0&&(e+=" datatable-row-odd"),this.rowIndex%2===0&&(e+=" datatable-row-even"),this.disable$&&this.disable$.value&&(e+=" row-disabled"),this.rowClass){let i=this.rowClass(this.row);if(typeof i=="string")e+=` ${i}`;else if(typeof i=="object"){let r=Object.keys(i);for(let s of r)i[s]===!0&&(e+=` ${s}`)}}return e}get columnsTotalWidths(){return this._columnGroupWidths.total}ngOnChanges(e){e.verticalScrollVisible&&this.recalculateColumns()}ngDoCheck(){this._rowDiffer.diff(this.row)&&this.cd.markForCheck()}onActivate(e,i){e.cellIndex=i,e.rowElement=this._element,this.activate.emit(e)}onKeyDown(e){let i=e.key,r=e.target===this._element,s=i===es.return||i===es.down||i===es.up||i===es.left||i===es.right,o=e.key==="a"&&(e.ctrlKey||e.metaKey);(s&&r||o)&&(e.preventDefault(),e.stopPropagation(),this.activate.emit({type:"keydown",event:e,row:this.row,rowElement:this._element}))}onMouseenter(e){this.activate.emit({type:"mouseenter",event:e,row:this.row,rowElement:this._element})}recalculateColumns(e=this.columns){this._columns=e;let i=Cp(this._columns);this._columnsByPin=oH(this._columns),this._columnGroupWidths=__(i,this._columns)}onTreeAction(){this.treeAction.emit()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["datatable-body-row"]],hostVars:6,hostBindings:function(i,r){i&1&&bt("keydown",function(o){return r.onKeyDown(o)})("mouseenter",function(o){return r.onMouseenter(o)}),i&2&&(vu(r.cssClass),Pr("height",r.rowHeight,"px")("width",r.columnsTotalWidths,"px"))},inputs:{columns:"columns",innerWidth:"innerWidth",expanded:"expanded",rowClass:"rowClass",row:"row",group:"group",isSelected:"isSelected",rowIndex:"rowIndex",displayCheck:"displayCheck",treeStatus:"treeStatus",ghostLoadingIndicator:"ghostLoadingIndicator",verticalScrollVisible:"verticalScrollVisible",disable$:"disable$",offsetX:"offsetX",rowHeight:"rowHeight"},outputs:{activate:"activate",treeAction:"treeAction"},features:[Ks],decls:2,vars:0,consts:[[3,"class","width","row-disabled"],["role","cell","tabindex","-1",3,"row","group","expanded","isSelected","rowIndex","column","rowHeight","displayCheck","disable$","treeStatus","ghostLoadingIndicator"],["role","cell","tabindex","-1",3,"activate","treeAction","row","group","expanded","isSelected","rowIndex","column","rowHeight","displayCheck","disable$","treeStatus","ghostLoadingIndicator"]],template:function(i,r){i&1&&xs(0,bte,4,9,"div",0,nH),i&2&&ws(r._columnsByPin)},dependencies:[Dne,Fv],encapsulation:2,changeDetection:0})}}return n})(),qR=(()=>{class n{constructor(){this.dragX=!0,this.dragY=!0,this.dragStart=new en,this.dragging=new en,this.dragEnd=new en,this.element=ze(Rr).nativeElement,this.isDragging=!1}ngOnChanges(e){e.dragEventTarget&&e.dragEventTarget.currentValue&&this.dragModel.dragging&&this.onMousedown(e.dragEventTarget.currentValue)}ngOnDestroy(){this._destroySubscription()}onMouseup(e){this.isDragging&&(this.isDragging=!1,this.element.classList.remove("dragging"),this.subscription&&(this._destroySubscription(),this.dragEnd.emit({event:e,element:this.element,model:this.dragModel})))}onMousedown(e){if(e.target.classList.contains("draggable")&&(this.dragX||this.dragY)){e.preventDefault(),this.isDragging=!0;let r={x:e.clientX,y:e.clientY},s=au(document,"mouseup");this.subscription=s.subscribe(a=>this.onMouseup(a));let o=au(document,"mousemove").pipe(Gf(s)).subscribe(a=>this.move(a,r));this.subscription.add(o),this.dragStart.emit({event:e,element:this.element,model:this.dragModel})}}move(e,i){if(!this.isDragging)return;let r=e.clientX-i.x,s=e.clientY-i.y;this.dragX&&(this.element.style.left=`${r}px`),this.dragY&&(this.element.style.top=`${s}px`),this.element.classList.add("dragging"),this.dragging.emit({event:e,element:this.element,model:this.dragModel})}_destroySubscription(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","draggable",""]],inputs:{dragEventTarget:"dragEventTarget",dragModel:"dragModel",dragX:[2,"dragX","dragX",Hi],dragY:[2,"dragY","dragY",Hi]},outputs:{dragStart:"dragStart",dragging:"dragging",dragEnd:"dragEnd"},features:[Ks]})}}return n})();var Ine=(()=>{class n{static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","rowDef",""]]})}}return n})(),Rne=(()=>{class n{constructor(){this.vc=ze(wr)}ngOnInit(){this.vc.createEmbeddedView(this.rowDefInternal.template,Je({},this.rowDefInternal),{injector:Bs.create({providers:[{provide:Pne,useValue:this}]})})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","rowDefInternal",""]],inputs:{rowDefInternal:"rowDefInternal"}})}}return n})(),Pne=new wn("RowDef"),cH=new wn("DatatableComponentToken"),kne=(()=>{class n{constructor(){this.rowContextmenu=new en(!1),this.selectedGroupRows=mn([]),this.expanded=!1,this.rowDiffer=ze(Pd).find({}).create(),this.iterableDiffers=ze(lS),this.tableComponent=ze(cH),this.cd=ze(Ss),this.group=cn(()=>{if(typeof this.row=="object"&&"value"in this.row)return this.row})}ngOnInit(){if(this.disableCheck){let e=this.disableCheck(this.row);this.disable$=new _s(e),this.rowContext.disableRow$=this.disable$}this.selectedRowsDiffer=this.iterableDiffers.find(this.selected??[]).create()}ngOnChanges(e){e.row&&(this.isGroup(this.row)?this.groupContext={group:this.row,expanded:this.expanded,rowIndex:this.rowIndex}:this.rowContext={row:this.row,expanded:this.expanded,rowIndex:this.rowIndex,disableRow$:this.disable$}),e.rowIndex&&((this.rowContext??this.groupContext).rowIndex=this.rowIndex),e.expanded&&((this.groupContext??this.rowContext).expanded=this.expanded,this.rowContext&&(this.rowContext.expanded=this.expanded))}ngDoCheck(){if(this.disableCheck){let e=this.disableCheck(this.row);e!==this.disable$.value&&(this.disable$.next(e),this.cd.markForCheck())}if(this.rowDiffer.diff(this.row)&&(this.isGroup(this.row)?this.groupContext.group=this.row:this.rowContext.row=this.row,this.cd.markForCheck()),this.groupHeader?.checkboxable&&this.selectedRowsDiffer.diff(this.selected)){let e=this.selected.filter(i=>this.group()?.value.find(r=>r===i));this.checkBoxInput&&(e.length&&e.length!==this.group()?.value.length?this.checkBoxInput.nativeElement.indeterminate=!0:this.checkBoxInput.nativeElement.indeterminate=!1),this.selectedGroupRows.set(e)}}onContextmenu(e){this.rowContextmenu.emit({event:e,row:this.row})}onCheckboxChange(e){this.selected=[...this.selected.filter(i=>!this.group().value.find(r=>r===i))],e&&(this.selected=[...this.selected,...this.group().value]),this.tableComponent.selected=[...this.selected],this.tableComponent.onBodySelect({selected:this.selected})}isGroup(e){return!!this.groupHeader}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["datatable-row-wrapper"]],viewQuery:function(i,r){if(i&1&&Oi(xte,5),i&2){let s;Hn(s=jn())&&(r.checkBoxInput=s.first)}},hostAttrs:[1,"datatable-row-wrapper"],hostBindings:function(i,r){i&1&&bt("contextmenu",function(o){return r.onContextmenu(o)})},inputs:{innerWidth:"innerWidth",rowDetail:"rowDetail",groupHeader:"groupHeader",offsetX:"offsetX",detailRowHeight:"detailRowHeight",groupHeaderRowHeight:"groupHeaderRowHeight",row:"row",groupedRows:"groupedRows",disableCheck:"disableCheck",selected:"selected",rowIndex:"rowIndex",expanded:[2,"expanded","expanded",Hi]},outputs:{rowContextmenu:"rowContextmenu"},features:[Ks],ngContentSelectors:jR,decls:3,vars:3,consts:[["select",""],[1,"datatable-group-header",3,"height","width"],[1,"datatable-row-detail",3,"height"],[1,"datatable-group-header"],[1,"datatable-group-cell"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"datatable-checkbox"],["type","checkbox",3,"change","checked"],[1,"datatable-row-detail"]],template:function(i,r){i&1&&(_u(),It(0,Cte,4,7,"div",1)(1,Mte,1,0)(2,Tte,2,4,"div",2)),i&2&&(Kt(r.groupHeader!=null&&r.groupHeader.template?0:-1),xe(),Kt(r.groupHeader!=null&&r.groupHeader.template&&r.expanded||!r.groupHeader||!r.groupHeader.template?1:-1),xe(),Kt(r.rowDetail!=null&&r.rowDetail.template&&r.expanded?2:-1))},dependencies:[pp],encapsulation:2,changeDetection:0})}}return n})();function Lne(n){let t=n.filter(e=>!!e);return!t.length||t.some(e=>typeof e!="number")?null:t.reduce((e,i)=>e+i)}function Nne(n){return null}var One=(()=>{class n{constructor(){this.summaryRow={}}ngOnChanges(){!this.columns||!this.rows||(this.updateInternalColumns(),this.updateValues())}updateInternalColumns(){this._internalColumns=this.columns.map(e=>Mn(Je({},e),{cellTemplate:e.summaryTemplate}))}updateValues(){this.summaryRow={},this.columns.filter(e=>!e.summaryTemplate).forEach(e=>{let i=this.rows.map(s=>s[e.prop]),r=this.getSummaryFunction(e);this.summaryRow[e.prop]=e.pipe?e.pipe.transform(r(i)):r(i)})}getSummaryFunction(e){return e.summaryFunc===void 0?Lne:e.summaryFunc===null?Nne:e.summaryFunc}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["datatable-summary-row"]],hostAttrs:[1,"datatable-summary-row"],inputs:{rows:"rows",columns:"columns",rowHeight:"rowHeight",offsetX:"offsetX",innerWidth:"innerWidth"},features:[Ks],decls:1,vars:1,consts:[["tabindex","-1",3,"innerWidth","offsetX","columns","rowHeight","row","rowIndex"]],template:function(i,r){i&1&&It(0,Ate,1,6,"datatable-body-row",0),i&2&&Kt(r.summaryRow&&r._internalColumns?0:-1)},dependencies:[lH],encapsulation:2})}}return n})();function FR(n,t,e){let i=e(t,n);return i>-1?n.splice(i,1):n.push(t),n}function Fne(n,t,e,i){let r=e<i;for(let s=0;s<t.length;s++){let o=t[s],a=s>=i&&s<=e,u=s<=i&&s>=e,d={start:0,end:0};r?d={start:e,end:i}:d={start:i,end:e+1},(r&&u||!r&&a)&&s>=d.start&&s<=d.end&&n.push(o)}return n}var Bne=(()=>{class n{constructor(){this.activate=new en,this.select=new en}selectRow(e,i,r){if(!this.selectEnabled)return;let s=this.selectionType===Cc.checkbox,o=this.selectionType===Cc.multi,a=this.selectionType===Cc.multiClick,u=[];o||s||a?e.shiftKey?u=Fne([],this.rows,i,this.prevIndex):e.key==="a"&&(e.ctrlKey||e.metaKey)?u=this.rows.filter(d=>!!d):e.ctrlKey||e.metaKey||a||s?u=FR([...this.selected],r,this.getRowSelectedIdx.bind(this)):u=FR([],r,this.getRowSelectedIdx.bind(this)):u=FR([],r,this.getRowSelectedIdx.bind(this)),typeof this.selectCheck=="function"&&(u=u.filter(this.selectCheck.bind(this))),typeof this.disableCheck=="function"&&(u=u.filter(d=>!this.disableCheck(d))),this.selected.splice(0,this.selected.length),this.selected.push(...u),this.prevIndex=i,this.select.emit({selected:u})}onActivate(e,i){let{type:r,event:s,row:o}=e,a=this.selectionType===Cc.checkbox;!a&&(r==="click"||r==="dblclick")||a&&r==="checkbox"?this.selectRow(s,i,o):r==="keydown"&&(s.key===es.return?this.selectRow(s,i,o):s.key==="a"&&(s.ctrlKey||s.metaKey)?this.selectRow(s,0,this.rows[this.rows.length-1]):this.onKeyboardFocus(e)),this.activate.emit(e)}onKeyboardFocus(e){let{key:i}=e.event;if(i===es.up||i===es.down||i===es.right||i===es.left){let s=this.selectionType===Cc.cell;if(typeof this.disableCheck=="function"&&this.disableCheck(e.row))return;!e.cellElement||!s?this.focusRow(e.rowElement,i):s&&this.focusCell(e.cellElement,e.rowElement,i,e.cellIndex)}}focusRow(e,i){let r=this.getPrevNextRow(e,i);r&&r.focus()}getPrevNextRow(e,i){let r=e.parentElement;if(r){let s;if(i===es.up?s=r.previousElementSibling:i===es.down&&(s=r.nextElementSibling),s&&s.children.length)return s.children[0]}}focusCell(e,i,r,s){let o;if(r===es.left)o=e.previousElementSibling;else if(r===es.right)o=e.nextElementSibling;else if(r===es.up||r===es.down){let a=this.getPrevNextRow(i,r);if(a){let u=a.getElementsByClassName("datatable-body-cell");u.length&&(o=u[s])}}o&&"focus"in o&&typeof o.focus=="function"&&o.focus()}getRowSelected(e){return this.getRowSelectedIdx(e,this.selected)>-1}getRowSelectedIdx(e,i){if(!i||!i.length)return-1;let r=this.rowIdentity(e);return i.findIndex(s=>this.rowIdentity(s)===r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["datatable-selection"]],inputs:{rows:"rows",selected:"selected",selectEnabled:"selectEnabled",selectionType:"selectionType",rowIdentity:"rowIdentity",selectCheck:"selectCheck",disableCheck:"disableCheck"},outputs:{activate:"activate",select:"select"},ngContentSelectors:jR,decls:1,vars:0,template:function(i,r){i&1&&(_u(),Rl(0))},encapsulation:2,changeDetection:0})}}return n})(),BR=(()=>{class n{set pageSize(e){e!==this._pageSize&&(this._pageSize=e,this.recalcLayout(),this._offsetEvent=-1,this.updatePage("up"),this.updatePage("down"))}get pageSize(){return this._pageSize}set rows(e){e!==this._rows&&(this._rows=e,this.recalcLayout())}get rows(){return this._rows}set columns(e){e!==this._columns&&(this._columns=e,this.updateColumnGroupWidths())}get columns(){return this._columns}set offset(e){e!==this._offset&&(this._offset=e,(!this.scrollbarV||this.scrollbarV&&!this.virtualization)&&(!isNaN(this._offset)&&this.ghostLoadingIndicator&&(this.rows=[]),this.recalcLayout()))}get offset(){return this._offset}set rowCount(e){e!==this._rowCount&&(this._rowCount=e,this.recalcLayout())}get rowCount(){return this._rowCount}get bodyWidth(){return this.scrollbarH?this.innerWidth+"px":"100%"}set bodyHeight(e){this.scrollbarV?this._bodyHeight=e+"px":this._bodyHeight="auto",this.recalcLayout()}get bodyHeight(){return this._bodyHeight}get selectEnabled(){return!!this.selectionType}constructor(){this.cd=ze(Ss),this.selected=[],this.verticalScrollVisible=!1,this.scroll=new en,this.page=new en,this.activate=new en,this.select=new en,this.detailToggle=new en,this.rowContextmenu=new en(!1),this.treeAction=new en,this.scrollHeight=cn(()=>{if(this.rowHeightsCache()&&this.scrollbarV&&this.virtualization&&this.rowCount)return this.rowHeightsCache().query(this.rowCount-1)}),this.rowsToRender=cn(()=>this.updateRows()),this.rowHeightsCache=mn(new zR),this.offsetY=0,this.indexes=mn({first:0,last:0}),this.rowIndexes=new WeakMap,this.rowExpansions=[],this._offsetEvent=-1,this.getDetailRowHeight=(e,i)=>{if(!this.rowDetail)return 0;let r=this.rowDetail.rowHeight;return typeof r=="function"?r(e,i):r},this.getGroupHeaderRowHeight=(e,i)=>{if(!this.groupHeader)return 0;let r=this.groupHeader?.rowHeight===0?this.rowHeight:this.groupHeader?.rowHeight;return typeof r=="function"?r(e,i):r},this.rowsStyles=cn(()=>{let e=[];return this.rowsToRender().forEach((i,r)=>{let s={};if(this.groupedRows&&(s.width=this.columnGroupWidths.total),this.scrollbarV&&this.virtualization){let o=0;if(Array.isArray(i)){let a=i[i.length-1];o=a?this.getRowIndex(a):0}else i?o=this.getRowIndex(i):o=this.indexes().first+r;s.transform=`translateY(${this.rowHeightsCache().query(o-1)}px)`}e.push(s)}),e}),this.bottomSummaryRowsStyles=cn(()=>!this.scrollbarV||!this.rows||!this.rows.length||!this.rowsToRender()?null:{transform:`translateY(${this.rowHeightsCache().query(this.rows.length-1)}px)`,position:"absolute"}),this.rowTrackingFn=(e,i)=>this.ghostLoadingIndicator?e:this.trackByProp?i[this.trackByProp]:this.getRowIndex(i)}ngOnInit(){this.rowDetail&&(this.listener=this.rowDetail.toggle.subscribe(({type:e,value:i})=>this.toggleStateChange(e,i))),this.groupHeader&&(this.listener=this.groupHeader.toggle.subscribe(({type:e,value:i})=>{this.groupExpansionDefault=!1,this.toggleStateChange(e,i)}))}toggleStateChange(e,i){(e==="group"||e==="row")&&this.toggleRowExpansion(i),e==="all"&&this.toggleAllRows(i),this.updateIndexes(),this.cd.markForCheck()}ngOnDestroy(){(this.rowDetail||this.groupHeader)&&this.listener.unsubscribe()}updateOffsetY(e){if(this.scroller){if(this.scrollbarV&&this.virtualization&&e){let i=this.pageSize*e;e=this.rowHeightsCache().query(i-1)}else this.scrollbarV&&!this.virtualization&&(e=0);this.scroller.setOffset(e||0)}}onBodyScroll(e){let i=e.scrollYPos,r=e.scrollXPos;(this.offsetY!==i||this.offsetX!==r)&&this.scroll.emit({offsetY:i,offsetX:r}),this.offsetY=i,this.offsetX=r,this.updateIndexes(),this.updatePage(e.direction),this.cd.detectChanges()}updatePage(e){let i=this.indexes().first/this.pageSize,r=!Number.isInteger(i);e==="up"?i=Math.ceil(i):e==="down"&&(i=Math.floor(i)),e!==void 0&&!isNaN(i)&&i!==this._offsetEvent&&(this._offsetEvent=i,r&&this.scrollbarV&&this.virtualization&&this.externalPaging&&(!this.rows[this.indexes().first-1]&&e==="up"&&this.page.emit(i-1),!this.rows[this.indexes().first+this.pageSize]&&e==="down"&&this.page.emit(i+1)),this.page.emit(i))}updateRows(){let{first:e,last:i}=this.indexes(),r=e,s=0,o=[];if(this.groupedRows)for(;r<i&&r<this.groupedRows.length;){let a=this.groupedRows[r];this.rowIndexes.set(a,r),a.value&&a.value.forEach((u,d)=>{let g=`${r}-${d}`;this.rowIndexes.set(u,g)}),o[s]=a,s++,r++}else for(;r<i&&r<this.rowCount;){let a=this.rows[r];a?(this.rowIndexes.set(a,r),o[s]=a):this.ghostLoadingIndicator&&this.virtualization&&(o[s]=void 0),s++,r++}return o}getRowHeight(e){return typeof this.rowHeight=="function"?this.rowHeight(e):this.rowHeight}getGroupHeight(e){let i=0;if(e.value)for(let r=0;r<e.value.length;r++)i+=this.getRowAndDetailHeight(e.value[r]);return i}getRowAndDetailHeight(e){let i=this.getRowHeight(e);return this.getRowExpanded(e)&&(i+=this.getDetailRowHeight(e)),i}updateIndexes(){let e=0,i=0;if(this.scrollbarV)if(this.virtualization){let r=parseInt(this._bodyHeight,10);e=this.rowHeightsCache().getRowIndex(this.offsetY),i=this.rowHeightsCache().getRowIndex(r+this.offsetY)+1}else e=0,i=this.rowCount;else this.externalPaging||(e=Math.max(this.offset*this.pageSize,0)),i=Math.min(e+this.pageSize,this.rowCount);this.indexes.set({first:e,last:i})}refreshRowHeightCache(){if(!(!this.scrollbarV||this.scrollbarV&&!this.virtualization)&&(this.rowHeightsCache().clearCache(),this.rows&&this.rows.length)){let e=new Set;if(this.rowDetail)for(let i of this.rows)this.getRowExpanded(i)&&e.add(i);this.rowHeightsCache().initCache({rows:this.rows,rowHeight:this.rowHeight,detailRowHeight:this.getDetailRowHeight,externalVirtual:this.scrollbarV&&this.externalPaging,rowCount:this.rowCount,rowIndexes:this.rowIndexes,rowExpansions:e}),this.rowHeightsCache.set(Object.create(this.rowHeightsCache()))}}getAdjustedViewPortIndex(){let e=this.indexes().first;return this.scrollbarV&&this.virtualization&&this.rowHeightsCache().query(e-1)<=this.offsetY?e-1:e}toggleRowExpansion(e){let i=this.getAdjustedViewPortIndex(),r=this.getRowExpandedIdx(e,this.rowExpansions),s=r>-1;if(this.scrollbarV&&this.virtualization){let o=this.getDetailRowHeight(e)*(s?-1:1),a=this.getRowIndex(e);this.rowHeightsCache().update(a,o)}s?this.rowExpansions.splice(r,1):this.rowExpansions.push(e),this.detailToggle.emit({rows:[e],currentIndex:i})}toggleAllRows(e){this.rowExpansions=[];let i=this.getAdjustedViewPortIndex(),r=this.groupedRows??this.rows;if(e)for(let s of r)this.rowExpansions.push(s);this.scrollbarV&&this.recalcLayout(),this.detailToggle.emit({rows:r,currentIndex:i})}recalcLayout(){this.refreshRowHeightCache(),this.updateIndexes()}getRowExpanded(e){if(this.rowExpansions.length===0&&this.groupExpansionDefault)for(let i of this.groupedRows)this.rowExpansions.push(i);return this.getRowExpandedIdx(e,this.rowExpansions)>-1}getRowExpandedIdx(e,i){if(!i||!i.length)return-1;let r=this.rowIdentity(e);return i.findIndex(s=>this.rowIdentity(s)===r)}getRowIndex(e){return this.rowIndexes.get(e)||0}onTreeAction(e){this.treeAction.emit({row:e})}dragOver(e,i){e.preventDefault(),this.rowDragEvents.emit({event:e,srcElement:this._draggedRowElement,eventType:"dragover",dragRow:this._draggedRow,dropRow:i})}drag(e,i,r){this._draggedRow=i,this._draggedRowElement=r._element,this.rowDragEvents.emit({event:e,srcElement:this._draggedRowElement,eventType:"dragstart",dragRow:i})}drop(e,i,r){e.preventDefault(),this.rowDragEvents.emit({event:e,srcElement:this._draggedRowElement,targetElement:r._element,eventType:"drop",dragRow:this._draggedRow,dropRow:i})}dragEnter(e,i,r){e.preventDefault(),this.rowDragEvents.emit({event:e,srcElement:this._draggedRowElement,targetElement:r._element,eventType:"dragenter",dragRow:this._draggedRow,dropRow:i})}dragLeave(e,i,r){e.preventDefault(),this.rowDragEvents.emit({event:e,srcElement:this._draggedRowElement,targetElement:r._element,eventType:"dragleave",dragRow:this._draggedRow,dropRow:i})}dragEnd(e,i){e.preventDefault(),this.rowDragEvents.emit({event:e,srcElement:this._draggedRowElement,eventType:"dragend",dragRow:i}),this._draggedRow=void 0,this._draggedRowElement=void 0}updateColumnGroupWidths(){let e=Cp(this._columns);this.columnGroupWidths=__(e,this._columns)}isGroup(e){return!!this.groupedRows}isRow(e){return!this.groupedRows}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["datatable-body"]],viewQuery:function(i,r){if(i&1&&Oi(JU,5),i&2){let s;Hn(s=jn())&&(r.scroller=s.first)}},hostAttrs:[1,"datatable-body"],hostVars:4,hostBindings:function(i,r){i&2&&Pr("width",r.bodyWidth)("height",r.bodyHeight)},inputs:{rowDefTemplate:"rowDefTemplate",scrollbarV:"scrollbarV",scrollbarH:"scrollbarH",loadingIndicator:"loadingIndicator",ghostLoadingIndicator:"ghostLoadingIndicator",externalPaging:"externalPaging",rowHeight:"rowHeight",offsetX:"offsetX",selectionType:"selectionType",selected:"selected",rowIdentity:"rowIdentity",rowDetail:"rowDetail",groupHeader:"groupHeader",selectCheck:"selectCheck",displayCheck:"displayCheck",trackByProp:"trackByProp",rowClass:"rowClass",groupedRows:"groupedRows",groupExpansionDefault:"groupExpansionDefault",innerWidth:"innerWidth",groupRowsBy:"groupRowsBy",virtualization:"virtualization",summaryRow:"summaryRow",summaryPosition:"summaryPosition",summaryHeight:"summaryHeight",rowDraggable:"rowDraggable",rowDragEvents:"rowDragEvents",disableRowCheck:"disableRowCheck",pageSize:"pageSize",rows:"rows",columns:"columns",offset:"offset",rowCount:"rowCount",bodyHeight:"bodyHeight",verticalScrollVisible:"verticalScrollVisible"},outputs:{scroll:"scroll",page:"page",activate:"activate",select:"select",detailToggle:"detailToggle",rowContextmenu:"rowContextmenu",treeAction:"treeAction"},ngContentSelectors:sH,decls:6,vars:11,consts:[["selector",""],["rowWrapper",""],["bodyRow",""],["rowElement",""],[1,"custom-loading-indicator-wrapper"],[1,"ghost-overlay",3,"columns","pageSize","rowHeight","ghostBodyHeight"],[3,"select","activate","selected","rows","selectCheck","disableCheck","selectEnabled","selectionType","rowIdentity"],[3,"scrollbarV","scrollbarH","scrollHeight","scrollWidth"],[3,"scrollbarV","scrollbarH","scrollHeight","width"],[1,"custom-loading-content"],[3,"scroll","scrollbarV","scrollbarH","scrollHeight","scrollWidth"],[3,"rowHeight","offsetX","innerWidth","rows","columns"],[3,"groupedRows","innerWidth","ngStyle","rowDetail","groupHeader","offsetX","detailRowHeight","groupHeaderRowHeight","row","disableCheck","expanded","rowIndex","selected"],["role","row",3,"ngStyle","rowHeight","offsetX","innerWidth","rows","columns"],[3,"rowContextmenu","groupedRows","innerWidth","ngStyle","rowDetail","groupHeader","offsetX","detailRowHeight","groupHeaderRowHeight","row","disableCheck","expanded","rowIndex","selected"],[4,"rowDefInternal"],["role","row","tabindex","-1",3,"disable$","isSelected","innerWidth","offsetX","columns","rowHeight","row","rowIndex","expanded","rowClass","displayCheck","treeStatus","ghostLoadingIndicator","draggable","verticalScrollVisible"],["role","row","tabindex","-1",3,"treeAction","activate","drop","dragover","dragenter","dragleave","dragstart","dragend","disable$","isSelected","innerWidth","offsetX","columns","rowHeight","row","rowIndex","expanded","rowClass","displayCheck","treeStatus","ghostLoadingIndicator","draggable","verticalScrollVisible"],["role","row","tabindex","-1",3,"disable$","isSelected","innerWidth","offsetX","columns","rowHeight","row","group","rowIndex","expanded","rowClass","ghostLoadingIndicator","draggable","verticalScrollVisible"],["role","row","tabindex","-1",3,"activate","drop","dragover","dragenter","dragleave","dragstart","dragend","disable$","isSelected","innerWidth","offsetX","columns","rowHeight","row","group","rowIndex","expanded","rowClass","ghostLoadingIndicator","draggable","verticalScrollVisible"],[3,"scroll","scrollbarV","scrollbarH","scrollHeight"]],template:function(i,r){if(i&1){let s=Dn();_u(rH),It(0,Ite,3,0,"div",4)(1,Rte,1,4,"ghost-loader",5),ge(2,"datatable-selection",6,0),bt("select",function(a){return gt(s),yt(r.select.emit(a))})("activate",function(a){return gt(s),yt(r.activate.emit(a))}),It(4,jte,5,6,"datatable-scroller",7)(5,Wte,2,5,"datatable-scroller",8),ye()}i&2&&(Kt(r.loadingIndicator?0:-1),xe(),Kt(r.ghostLoadingIndicator&&(!r.rowCount||!r.virtualization||!r.scrollbarV)?1:-1),xe(),Ne("selected",r.selected)("rows",r.rows)("selectCheck",r.selectCheck)("disableCheck",r.disableRowCheck)("selectEnabled",r.selectEnabled)("selectionType",r.selectionType)("rowIdentity",r.rowIdentity),xe(2),Kt(r.rows!=null&&r.rows.length?4:-1),xe(),Kt(!(r.rows!=null&&r.rows.length)&&!r.loadingIndicator&&!r.ghostLoadingIndicator?5:-1))},dependencies:[aH,Bne,JU,One,kne,Lg,Rne,lH,qR],encapsulation:2,changeDetection:0})}}return n})(),uH=(()=>{class n{constructor(){this.document=ze(Zr),this.width=this.getWidth()}getWidth(){let e=this.document.createElement("div");e.style.visibility="hidden",e.style.width="100px",this.document.body.appendChild(e);let i=e.offsetWidth;e.style.overflow="scroll";let r=this.document.createElement("div");r.style.width="100%",e.appendChild(r);let s=r.offsetWidth;return e.parentNode.removeChild(e),i-s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Vne=(()=>{class n{constructor(){this.pressEnabled=!0,this.duration=500,this.longPressStart=new en,this.longPressing=new en,this.longPressEnd=new en,this.mouseX=0,this.mouseY=0}get press(){return this.pressing}get isLongPress(){return this.isLongPressing}onMouseDown(e){if(e.which!==1||!this.pressEnabled||e.target.classList.contains("resize-handle"))return;this.mouseX=e.clientX,this.mouseY=e.clientY,this.pressing=!0,this.isLongPressing=!1;let r=au(document,"mouseup");this.subscription=r.subscribe(s=>this.onMouseup()),this.timeout=setTimeout(()=>{this.isLongPressing=!0,this.longPressStart.emit({event:e,model:this.pressModel}),this.subscription.add(au(document,"mousemove").pipe(Gf(r)).subscribe(s=>this.onMouseMove(s))),this.loop(e)},this.duration),this.loop(e)}onMouseMove(e){if(this.pressing&&!this.isLongPressing){let i=Math.abs(e.clientX-this.mouseX)>10,r=Math.abs(e.clientY-this.mouseY)>10;(i||r)&&this.endPress()}}loop(e){this.isLongPressing&&(this.timeout=setTimeout(()=>{this.longPressing.emit({event:e,model:this.pressModel}),this.loop(e)},50))}endPress(){clearTimeout(this.timeout),this.isLongPressing=!1,this.pressing=!1,this._destroySubscription(),this.longPressEnd.emit({model:this.pressModel})}onMouseup(){this.endPress()}ngOnDestroy(){clearTimeout(this.timeout),this._destroySubscription()}_destroySubscription(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","long-press",""]],hostVars:4,hostBindings:function(i,r){i&1&&bt("mousedown",function(o){return r.onMouseDown(o)}),i&2&&Si("press",r.press)("longpress",r.isLongPress)},inputs:{pressEnabled:[2,"pressEnabled","pressEnabled",Hi],pressModel:"pressModel",duration:[2,"duration","duration",Qs]},outputs:{longPressStart:"longPressStart",longPressing:"longPressing",longPressEnd:"longPressEnd"}})}}return n})(),zne=(()=>{class n{constructor(){this.renderer=ze(Za),this.resizeEnabled=!0,this.resize=new en,this.resizing=new en,this.element=ze(Rr).nativeElement}ngAfterViewInit(){let e=this.renderer;this.resizeHandle=e.createElement("span"),this.resizeEnabled?e.addClass(this.resizeHandle,"resize-handle"):e.addClass(this.resizeHandle,"resize-handle--not-resizable"),e.appendChild(this.element,this.resizeHandle)}ngOnDestroy(){this._destroySubscription(),this.renderer.destroyNode?this.renderer.destroyNode(this.resizeHandle):this.resizeHandle&&this.renderer.removeChild(this.renderer.parentNode(this.resizeHandle),this.resizeHandle)}onMouseup(){this.subscription&&!this.subscription.closed&&(this._destroySubscription(),this.resize.emit(this.element.clientWidth))}onMousedown(e){let i=e.target.classList.contains("resize-handle"),r=this.element.clientWidth,s=e.screenX;if(i){e.stopPropagation();let o=au(document,"mouseup");this.subscription=o.subscribe(u=>this.onMouseup());let a=au(document,"mousemove").pipe(Gf(o)).subscribe(u=>this.move(u,r,s));this.subscription.add(a)}}move(e,i,r){let s=e.screenX-r,o=i+s;this.resizing.emit(o)}_destroySubscription(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","resizeable",""]],hostVars:2,hostBindings:function(i,r){i&1&&bt("mousedown",function(o){return r.onMousedown(o)}),i&2&&Si("resizeable",r.resizeEnabled)},inputs:{resizeEnabled:[2,"resizeEnabled","resizeEnabled",Hi],minWidth:[2,"minWidth","minWidth",Qs],maxWidth:[2,"maxWidth","maxWidth",Qs]},outputs:{resize:"resize",resizing:"resizing"}})}}return n})();function Une(n,t){if(n===EC.single)return t===nl.asc?nl.desc:nl.asc;if(t){if(t===nl.asc)return nl.desc;if(t===nl.desc)return}else return nl.asc}function Hne(n,t){if((n===null||typeof n>"u")&&(n=0),(t===null||typeof t>"u")&&(t=0),n instanceof Date&&t instanceof Date){if(n<t)return-1;if(n>t)return 1}else if(isNaN(parseFloat(n))||!isFinite(n)||isNaN(parseFloat(t))||!isFinite(t)){if(n=String(n),t=String(t),n.toLowerCase()<t.toLowerCase())return-1;if(n.toLowerCase()>t.toLowerCase())return 1}else{if(parseFloat(n)<parseFloat(t))return-1;if(parseFloat(n)>parseFloat(t))return 1}return 0}function HR(n,t,e){if(!n)return[];if(!e||!e.length||!t)return[...n];let i=new Map;n.forEach((a,u)=>i.set(a,u));let r=[...n],s=t.reduce((a,u)=>(u.comparator&&typeof u.comparator=="function"&&(a[u.prop]=u.comparator),a),{}),o=e.map(a=>{let u=a.prop;return{prop:u,dir:a.dir,valueGetter:WR(u),compareFn:s[u]||Hne}});return r.sort(function(a,u){for(let d of o){let{prop:g,valueGetter:v}=d,x=v(a,g),C=v(u,g),A=d.dir!==nl.desc?d.compareFn(x,C,a,u,d.dir):-d.compareFn(x,C,a,u,d.dir);if(A!==0)return A}return i.has(a)&&i.has(u)?i.get(a)<i.get(u)?-1:1:0})}function jne(n,t,e,i){return i&&(n=HR(n,t,[{dir:i.dir,prop:"key"}])),n.map(r=>Mn(Je({},r),{value:HR(r.value,t,e)}))}var Wne=(()=>{class n{set allRowsSelected(e){this._allRowsSelected=e,this.cellContext.allRowsSelected=e}get allRowsSelected(){return this._allRowsSelected}set column(e){this._column=e,this.cellContext.column=e,this.cd.markForCheck()}get column(){return this._column}set sorts(e){this._sorts=e,this.sortDir=this.calcSortDir(e),this.cellContext.sortDir=this.sortDir,this.sortClass=this.calcSortClass(this.sortDir),this.cd.markForCheck()}get sorts(){return this._sorts}get columnCssClasses(){let e="datatable-header-cell";if(this.column.sortable&&(e+=" sortable"),this.column.resizeable&&(e+=" resizeable"),this.column.headerClass){if(typeof this.column.headerClass=="string")e+=" "+this.column.headerClass;else if(typeof this.column.headerClass=="function"){let r=this.column.headerClass({column:this.column});if(typeof r=="string")e+=" "+r;else if(typeof r=="object"){let s=Object.keys(r);for(let o of s)r[o]===!0&&(e+=` ${o}`)}}}let i=this.sortDir;return i&&(e+=` sort-active sort-${i}`),e}get name(){return this.column.headerTemplate===void 0?this.column.name:void 0}get minWidth(){return this.column.minWidth}get maxWidth(){return this.column.maxWidth}get width(){return this.column.width}get tabindex(){return this.column.sortable?0:-1}get isCheckboxable(){return this.column.headerCheckboxable}constructor(){this.cd=ze(Ss),this.enableClearingSortState=!1,this.sort=new en,this.select=new en,this.columnContextmenu=new en(!1),this.totalSortStatesApplied=0,this.cellContext={column:this.column,sortDir:this.sortDir,sortFn:()=>this.onSort(),allRowsSelected:this.allRowsSelected,selectFn:()=>this.select.emit()}}onContextmenu(e){this.columnContextmenu.emit({event:e,column:this.column})}enter(){this.onSort()}ngOnInit(){this.sortClass=this.calcSortClass(this.sortDir),this.sortDir&&(this.totalSortStatesApplied=1)}calcSortDir(e){if(e&&this.column){let i=e.find(r=>r.prop===this.column.prop);if(i)return i.dir}}onSort(){if(!this.column.sortable)return;this.totalSortStatesApplied++;let e=Une(this.sortType,this.sortDir);this.enableClearingSortState&&this.totalSortStatesApplied===3&&(e=void 0,this.totalSortStatesApplied=0),this.sort.emit({column:this.column,prevValue:this.sortDir,newValue:e})}calcSortClass(e){if(this.cellContext.column.sortable)return e===nl.asc?`sort-btn sort-asc ${this.sortAscendingIcon}`:e===nl.desc?`sort-btn sort-desc ${this.sortDescendingIcon}`:`sort-btn ${this.sortUnsetIcon}`}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["datatable-header-cell"]],hostAttrs:[1,"datatable-header-cell"],hostVars:12,hostBindings:function(i,r){i&1&&bt("contextmenu",function(o){return r.onContextmenu(o)})("keydown.enter",function(){return r.enter()}),i&2&&(TI("tabindex",r.tabindex),wo("title",r.name),vu(r.columnCssClasses),Pr("height",r.headerHeight,"px")("min-width",r.minWidth,"px")("max-width",r.maxWidth,"px")("width",r.width,"px"))},inputs:{sortType:"sortType",sortAscendingIcon:"sortAscendingIcon",sortDescendingIcon:"sortDescendingIcon",sortUnsetIcon:"sortUnsetIcon",isTarget:"isTarget",targetMarkerTemplate:"targetMarkerTemplate",targetMarkerContext:"targetMarkerContext",enableClearingSortState:"enableClearingSortState",allRowsSelected:"allRowsSelected",selectionType:"selectionType",column:"column",headerHeight:"headerHeight",sorts:"sorts"},outputs:{sort:"sort",select:"select",columnContextmenu:"columnContextmenu"},decls:6,vars:5,consts:[[1,"datatable-header-cell-template-wrap"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"datatable-checkbox"],[1,"datatable-header-cell-wrapper"],[3,"click"],["type","checkbox",3,"change","checked"],[1,"datatable-header-cell-label","draggable",3,"click"]],template:function(i,r){i&1&&(ge(0,"div",0),It(1,$te,1,2,null,1)(2,qte,2,1,"label",2)(3,Yte,1,2,null,1)(4,Zte,3,1,"span",3),ge(5,"span",4),bt("click",function(){return r.onSort()}),ye()()),i&2&&(xe(),Kt(r.isTarget?1:-1),xe(),Kt(r.isCheckboxable?2:-1),xe(),Kt(r.column.headerTemplate?3:4),xe(2),vu(r.sortClass))},dependencies:[pp],encapsulation:2,changeDetection:0})}}return n})(),Gne=(()=>{class n{constructor(){this.document=ze(Zr),this.reorder=new en,this.targetChanged=new en,this.differ=ze(Pd).find({}).create()}ngAfterContentInit(){this.updateSubscriptions(),this.draggables.changes.subscribe(this.updateSubscriptions.bind(this))}ngOnDestroy(){this.draggables.forEach(e=>{e.dragStart.unsubscribe(),e.dragging.unsubscribe(),e.dragEnd.unsubscribe()})}updateSubscriptions(){let e=this.differ.diff(this.createMapDiffs());if(e){let i=s=>{r(s);let{currentValue:o}=s;o&&(o.dragStart.subscribe(this.onDragStart.bind(this)),o.dragging.subscribe(this.onDragging.bind(this)),o.dragEnd.subscribe(this.onDragEnd.bind(this)))},r=({previousValue:s})=>{s&&(s.dragStart.unsubscribe(),s.dragging.unsubscribe(),s.dragEnd.unsubscribe())};e.forEachAddedItem(i),e.forEachRemovedItem(r)}}onDragStart(){this.positions={};let e=0;for(let i of this.draggables.toArray()){let r=i.element,s=parseInt(r.offsetLeft.toString(),0);this.positions[i.dragModel.$$id]={left:s,right:s+parseInt(r.offsetWidth.toString(),0),index:e++,element:r}}}onDragging({element:e,model:i,event:r}){let s=this.positions[i.$$id],o=this.isTarget(i,r);o?this.lastDraggingIndex!==o.i&&(this.targetChanged.emit({prevIndex:this.lastDraggingIndex,newIndex:o.i,initialIndex:s.index}),this.lastDraggingIndex=o.i):this.lastDraggingIndex!==s.index&&(this.targetChanged.emit({prevIndex:this.lastDraggingIndex,initialIndex:s.index}),this.lastDraggingIndex=s.index)}onDragEnd({element:e,model:i,event:r}){let s=this.positions[i.$$id],o=this.isTarget(i,r);o&&this.reorder.emit({prevIndex:s.index,newIndex:o.i,model:i}),this.lastDraggingIndex=void 0,e.style.left="auto"}isTarget(e,i){let r=0,s=i.x||i.clientX,o=i.y||i.clientY,a=this.document.elementsFromPoint(s,o);for(let u in this.positions){let d=this.positions[u];if(e.$$id!==u&&a.find(g=>g===d.element))return{pos:d,i:r};r++}}createMapDiffs(){return this.draggables.toArray().reduce((e,i)=>(e[i.dragModel.$$id]=i,e),{})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","orderable",""]],contentQueries:function(i,r,s){if(i&1&&Qo(s,qR,5),i&2){let o;Hn(o=jn())&&(r.draggables=o)}},outputs:{reorder:"reorder",targetChanged:"targetChanged"}})}}return n})(),eH=(()=>{class n{constructor(){this.cd=ze(Ss),this.scrollbarHelper=ze(uH),this.enableClearingSortState=!1,this.verticalScrollVisible=!1,this.sort=new en,this.reorder=new en,this.resize=new en,this.resizing=new en,this.select=new en,this.columnContextmenu=new en(!1),this._columnGroupWidths={total:100},this._styleByGroup={left:{},center:{},right:{}},this.destroyed=!1}set innerWidth(e){this._innerWidth=e,setTimeout(()=>{if(this._columns){let i=Cp(this._columns);this._columnGroupWidths=__(i,this._columns),this.setStylesByGroup()}})}get innerWidth(){return this._innerWidth}set headerHeight(e){e!=="auto"?this._headerHeight=`${e}px`:this._headerHeight=e}get headerHeight(){return this._headerHeight}set columns(e){this._columns=e;let i=Cp(e);this._columnsByPin=oH(e),setTimeout(()=>{this._columnGroupWidths=__(i,e),this.setStylesByGroup()})}get columns(){return this._columns}set offsetX(e){this._offsetX=e,this.setStylesByGroup()}get offsetX(){return this._offsetX}ngOnChanges(e){e.verticalScrollVisible&&(this._styleByGroup.right=this.calcStylesByGroup("right"),this.destroyed||this.cd.detectChanges())}ngOnDestroy(){this.destroyed=!0}onLongPressStart({event:e,model:i}){i.dragging=!0,this.dragEventTarget=e}onLongPressEnd({model:e}){this.dragEventTarget=void 0,setTimeout(()=>{let i=this._columns.find(r=>r.$$id===e.$$id);i&&"dragging"in i&&(i.dragging=!1)},5)}get headerWidth(){return this.scrollbarH?(this.verticalScrollVisible?this.innerWidth-this.scrollbarHelper.width:this.innerWidth)+"px":"100%"}onColumnResized(e,i){this.resize.emit(this.makeResizeEvent(e,i))}onColumnResizing(e,i){this.resizing.emit(this.makeResizeEvent(e,i))}makeResizeEvent(e,i){return e<=i.minWidth?e=i.minWidth:e>=i.maxWidth&&(e=i.maxWidth),{column:i,prevValue:i.width,newValue:e}}onColumnReordered({prevIndex:e,newIndex:i,model:r}){let s=this.getColumn(i);s.isTarget=!1,s.targetMarkerContext=void 0,this.reorder.emit({column:r,prevValue:e,newValue:i})}onTargetChanged({prevIndex:e,newIndex:i,initialIndex:r}){if(e||e===0){let s=this.getColumn(e);s.isTarget=!1,s.targetMarkerContext=void 0}if(i||i===0){let s=this.getColumn(i);s.isTarget=!0,r!==i&&(s.targetMarkerContext={class:"targetMarker ".concat(r>i?"dragFromRight":"dragFromLeft")})}}getColumn(e){let i=this._columnsByPin[0].columns.length;if(e<i)return this._columnsByPin[0].columns[e];let r=this._columnsByPin[1].columns.length;return e<i+r?this._columnsByPin[1].columns[e-i]:this._columnsByPin[2].columns[e-i-r]}onSort({column:e,prevValue:i,newValue:r}){if(e.dragging)return;let s=this.calcNewSorts(e,i,r);this.sort.emit({sorts:s,column:e,prevValue:i,newValue:r})}calcNewSorts(e,i,r){let s=0;this.sorts||(this.sorts=[]);let o=this.sorts.map((a,u)=>(a=Je({},a),a.prop===e.prop&&(s=u),a));return r===void 0?o.splice(s,1):i?o[s].dir=r:(this.sortType===EC.single&&o.splice(0,this.sorts.length),o.push({dir:r,prop:e.prop})),o}setStylesByGroup(){this._styleByGroup.left=this.calcStylesByGroup("left"),this._styleByGroup.center=this.calcStylesByGroup("center"),this._styleByGroup.right=this.calcStylesByGroup("right"),this.destroyed||this.cd.detectChanges()}calcStylesByGroup(e){let i=this._columnGroupWidths;return e==="center"?{transform:`translateX(${this.offsetX*-1}px)`,width:`${i[e]}px`,willChange:"transform"}:{width:`${i[e]}px`}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["datatable-header"]],hostAttrs:[1,"datatable-header"],hostVars:4,hostBindings:function(i,r){i&2&&Pr("height",r.headerHeight)("width",r.headerWidth)},inputs:{sortAscendingIcon:"sortAscendingIcon",sortDescendingIcon:"sortDescendingIcon",sortUnsetIcon:"sortUnsetIcon",scrollbarH:"scrollbarH",dealsWithGroup:"dealsWithGroup",targetMarkerTemplate:"targetMarkerTemplate",enableClearingSortState:"enableClearingSortState",innerWidth:"innerWidth",sorts:"sorts",sortType:"sortType",allRowsSelected:"allRowsSelected",selectionType:"selectionType",reorderable:"reorderable",verticalScrollVisible:"verticalScrollVisible",headerHeight:"headerHeight",columns:"columns",offsetX:"offsetX"},outputs:{sort:"sort",reorder:"reorder",resize:"resize",resizing:"resizing",select:"select",columnContextmenu:"columnContextmenu"},features:[Ks],decls:3,vars:2,consts:[["role","row","orderable","",1,"datatable-header-inner",3,"reorder","targetChanged"],[3,"class","ngStyle"],[3,"ngStyle"],["role","columnheader","resizeable","","long-press","","draggable","",3,"resizeEnabled","pressModel","pressEnabled","dragX","dragY","dragModel","dragEventTarget","headerHeight","isTarget","targetMarkerTemplate","targetMarkerContext","column","sortType","sorts","selectionType","sortAscendingIcon","sortDescendingIcon","sortUnsetIcon","allRowsSelected","enableClearingSortState"],["role","columnheader","resizeable","","long-press","","draggable","",3,"resize","resizing","longPressStart","longPressEnd","sort","select","columnContextmenu","resizeEnabled","pressModel","pressEnabled","dragX","dragY","dragModel","dragEventTarget","headerHeight","isTarget","targetMarkerTemplate","targetMarkerContext","column","sortType","sorts","selectionType","sortAscendingIcon","sortDescendingIcon","sortUnsetIcon","allRowsSelected","enableClearingSortState"]],template:function(i,r){i&1&&(ge(0,"div",0),bt("reorder",function(o){return r.onColumnReordered(o)})("targetChanged",function(o){return r.onTargetChanged(o)}),xs(1,Qte,3,3,"div",1,nH),ye()),i&2&&(Pr("width",r._columnGroupWidths.total,"px"),xe(),ws(r._columnsByPin))},dependencies:[Gne,Lg,Wne,zne,Vne,qR],encapsulation:2,changeDetection:0})}}return n})();function $ne(n,t,e){e=e||{};let i,r,s,o=null,a=0;function u(){a=e.leading===!1?0:+new Date,o=null,s=n.apply(i,r)}return function(){let d=+new Date;!a&&e.leading===!1&&(a=d);let g=t-(d-a);return i=this,r=arguments,g<=0?(clearTimeout(o),o=null,a=d,s=n.apply(i,r)):!o&&e.trailing!==!1&&(o=setTimeout(u,g)),s}}function qne(n,t){return function(i,r,s){return{configurable:!0,enumerable:s.enumerable,get:function(){return Object.defineProperty(this,r,{configurable:!0,enumerable:s.enumerable,value:$ne(s.value,n,t)}),this[r]}}}}function Xne(n){let t=0;for(let e of n)t+=e.flexGrow||0;return t}function Yne(n,t){let e=Ane(n),i=Xne(n),r=Cp(n);e!==t&&Zne(r,t,i)}function Zne(n,t,e){for(let u in n)if(u in n)for(let d of n[u])d.$$oldWidth&&(d.canAutoResize=!1),d.canAutoResize?d.width=0:(t-=d.width,e-=d.flexGrow?d.flexGrow:0);let i={},r=t;do{let u=r/e;r=0;for(let d in n)if(d in n){for(let g of n[d])if(g.canAutoResize&&!i[g.prop]){let v=g.width+g.flexGrow*u;g.minWidth!==void 0&&v<g.minWidth?(r+=v-g.minWidth,g.width=g.minWidth,i[g.prop]=!0):g.width=v}}}while(r!==0);let s=Object.values(n).reduce((u,d)=>u.concat(d),[]),o=s.reduce((u,d)=>u+d.width,0),a=t-o;if(a!==0){for(let u of s.filter(d=>d.canAutoResize).sort((d,g)=>d.width-g.width))if(a>0&&(!u.maxWidth||u.width+a<=u.maxWidth)||a<0&&(!u.minWidth||u.width+a>=u.minWidth)){u.width+=a;break}}}function Kne(n,t,e,i,r=150,s=0){let o=n.slice(e+1,n.length).filter(A=>A.canAutoResize!==!1);for(let A of o)A.$$oldWidth||(A.$$oldWidth=A.width);let a=0,u=!1,d=tH(n,r),g=t-d,v=g,x=[],C=1;do{a=g/o.length,u=d>=t;for(let A of o){if(u&&i&&v!==-1*s)A.width=A.$$oldWidth||A.width||r;else{let O=(A.width||r)+a;A.minWidth&&O<A.minWidth?(A.width=A.minWidth,x.push(A)):A.maxWidth&&O>A.maxWidth?(A.width=A.maxWidth,x.push(A)):A.width=O}A.width=Math.max(0,A.width)}d=tH(n,r),g=t-d,Qne(o,x)}while(g>C&&o.length!==0);for(let A of o)A.$$oldWidth=0}function Qne(n,t){for(let e of t){let i=n.indexOf(e);n.splice(i,1)}}function tH(n,t=150){let e=0;for(let i of n)e+=i.width||t;return e}var Jne=(()=>{class n{constructor(){this.change=new en,this._count=0,this._page=1,this._size=0}set size(e){this._size=e,this.pages=this.calcPages()}get size(){return this._size}set count(e){this._count=e,this.pages=this.calcPages()}get count(){return this._count}set page(e){this._page=e,this.pages=this.calcPages()}get page(){return this._page}get totalPages(){let e=this.size<1?1:Math.ceil(this.count/this.size);return Math.max(e||0,1)}canPrevious(){return this.page>1}canNext(){return this.page<this.totalPages}prevPage(){this.selectPage(this.page-1)}nextPage(){this.selectPage(this.page+1)}selectPage(e){e>0&&e<=this.totalPages&&e!==this.page&&(this.page=e,this.change.emit({page:e}))}calcPages(e){let i=[],r=1,s=this.totalPages,o=5,a=o<this.totalPages;e=e||this.page,a&&(r=e-Math.floor(o/2),s=e+Math.floor(o/2),r<1?(r=1,s=Math.min(r+o-1,this.totalPages)):s>this.totalPages&&(r=Math.max(this.totalPages-o+1,1),s=this.totalPages));for(let u=r;u<=s;u++)i.push({number:u,text:u});return i}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["datatable-pager"]],hostAttrs:[1,"datatable-pager"],inputs:{pagerLeftArrowIcon:"pagerLeftArrowIcon",pagerRightArrowIcon:"pagerRightArrowIcon",pagerPreviousIcon:"pagerPreviousIcon",pagerNextIcon:"pagerNextIcon",size:"size",count:"count",page:"page"},outputs:{change:"change"},decls:15,vars:20,consts:[[1,"pager"],["role","button","aria-label","go to first page",3,"click"],["role","button","aria-label","go to previous page",3,"click"],["role","button",1,"pages",3,"active"],["role","button","aria-label","go to next page",3,"click"],["role","button","aria-label","go to last page",3,"click"],["role","button",1,"pages"],[3,"click"]],template:function(i,r){i&1&&(ge(0,"ul",0)(1,"li")(2,"a",1),bt("click",function(){return r.selectPage(1)}),tt(3,"i"),ye()(),ge(4,"li")(5,"a",2),bt("click",function(){return r.prevPage()}),tt(6,"i"),ye()(),xs(7,ene,3,4,"li",3,Jte),ge(9,"li")(10,"a",4),bt("click",function(){return r.nextPage()}),tt(11,"i"),ye()(),ge(12,"li")(13,"a",5),bt("click",function(){return r.selectPage(r.totalPages)}),tt(14,"i"),ye()()()),i&2&&(xe(),Si("disabled",!r.canPrevious()),xe(2),vu(r.pagerPreviousIcon),xe(),Si("disabled",!r.canPrevious()),xe(2),vu(r.pagerLeftArrowIcon),xe(),ws(r.pages),xe(2),Si("disabled",!r.canNext()),xe(2),vu(r.pagerRightArrowIcon),xe(),Si("disabled",!r.canNext()),xe(2),vu(r.pagerNextIcon))},encapsulation:2,changeDetection:0})}}return n})(),eie=(()=>{class n{constructor(){this.selectedCount=0,this.page=new en}get isVisible(){return this.rowCount/this.pageSize>1}get curPage(){return this.offset+1}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["datatable-footer"]],hostAttrs:[1,"datatable-footer"],inputs:{footerHeight:"footerHeight",rowCount:"rowCount",pageSize:"pageSize",offset:"offset",pagerLeftArrowIcon:"pagerLeftArrowIcon",pagerRightArrowIcon:"pagerRightArrowIcon",pagerPreviousIcon:"pagerPreviousIcon",pagerNextIcon:"pagerNextIcon",totalMessage:"totalMessage",footerTemplate:"footerTemplate",selectedCount:"selectedCount",selectedMessage:"selectedMessage"},outputs:{page:"page"},decls:3,vars:6,consts:[[1,"datatable-footer-inner",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"page-count"],[3,"change","pagerLeftArrowIcon","pagerRightArrowIcon","pagerPreviousIcon","pagerNextIcon","page","size","count","hidden"]],template:function(i,r){i&1&&(ge(0,"div",0),It(1,rne,1,8,null,1)(2,one,4,11),ye()),i&2&&(Pr("height",r.footerHeight,"px"),Ne("ngClass",sS(4,tne,r.selectedMessage)),xe(),Kt(r.footerTemplate?1:2))},dependencies:[ls,pp,Jne],encapsulation:2,changeDetection:0})}}return n})(),tie=(()=>{class n{constructor(){this.element=ze(Rr),this.zone=ze(br),this.isVisible=!1,this.visible=new en}ngOnInit(){this.runCheck()}ngOnDestroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){let e=()=>{let{offsetHeight:i,offsetWidth:r}=this.element.nativeElement;i&&r?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e(),50)}))};this.timeout=setTimeout(()=>e())}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Xn({type:n,selectors:[["","visibilityObserver",""]],hostVars:2,hostBindings:function(i,r){i&2&&Si("visible",r.isVisible)},outputs:{visible:"visible"}})}}return n})(),nie=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["datatable-progress"]],decls:3,vars:0,consts:[["role","progressbar",1,"progress-linear"],[1,"container"],[1,"bar"]],template:function(i,r){i&1&&(ge(0,"div",0)(1,"div",1),tt(2,"div",2),ye()())},encapsulation:2,changeDetection:0})}}return n})(),hH=(()=>{class n{set rows(e){this._rows=e,this.rowDiffer.diff([]),e&&(this._internalRows=[...e])}get rows(){return this._rows}set groupRowsBy(e){e&&(this._groupRowsBy=e,this._rows&&this._groupRowsBy&&(this.groupedRows=this.groupArrayBy(this._rows,this._groupRowsBy)))}get groupRowsBy(){return this._groupRowsBy}set columns(e){e&&(this._internalColumns=[...e],QU(this._internalColumns,this._defaultColumnWidth),this.recalculateColumns()),this._columns=e}get columns(){return this._columns}set limit(e){this._limit=e,this.recalculate()}get limit(){return this._limit}set count(e){this._count=e,this.recalculate()}get count(){return this._count}set offset(e){this._offset=e}get offset(){return Math.max(Math.min(this._offset,Math.ceil(this.rowCount/this.pageSize)-1),0)}set ghostLoadingIndicator(e){this._ghostLoadingIndicator=e,e&&this.scrollbarV&&!this.externalPaging&&(this.rows=[...this.rows??[],void 0])}get ghostLoadingIndicator(){return this._ghostLoadingIndicator}get isFixedHeader(){let e=this.headerHeight;return typeof e=="string"?e!=="auto":!0}get isFixedRow(){return this.rowHeight!=="auto"}get isVertScroll(){return this.scrollbarV}get isVirtualized(){return this.virtualization}get isHorScroll(){return this.scrollbarH}get isSelectable(){return this.selectionType!==void 0}get isCheckboxSelection(){return this.selectionType===Cc.checkbox}get isCellSelection(){return this.selectionType===Cc.cell}get isSingleSelection(){return this.selectionType===Cc.single}get isMultiSelection(){return this.selectionType===Cc.multi}get isMultiClickSelection(){return this.selectionType===Cc.multiClick}get allRowsSelected(){let e=this.rows&&this.selected&&this.selected.length===this.rows.length;if(this.bodyComponent&&this.selectAllRowsOnPage){let i=this.bodyComponent.indexes,r=i().last-i().first;e=this.selected.length===r}return this.selected&&this.rows&&this.rows.length!==0&&e}constructor(){this.scrollbarHelper=ze(uH),this.cd=ze(Ss),this.columnChangesService=ze(VR),this.configuration=ze("configuration",{optional:!0}),this.selected=[],this.scrollbarV=!1,this.scrollbarVDynamic=!1,this.scrollbarH=!1,this.rowHeight=30,this.columnMode=CC.standard,this.headerHeight=30,this.footerHeight=0,this.externalPaging=!1,this.externalSorting=!1,this.loadingIndicator=!1,this.reorderable=!0,this.swapColumns=!0,this.sortType=EC.single,this.sorts=[],this.cssClasses={sortAscending:"datatable-icon-up",sortDescending:"datatable-icon-down",sortUnset:"datatable-icon-sort-unset",pagerLeftArrow:"datatable-icon-left",pagerRightArrow:"datatable-icon-right",pagerPrevious:"datatable-icon-prev",pagerNext:"datatable-icon-skip"},this.messages={emptyMessage:"No data to display",totalMessage:"total",selectedMessage:"selected"},this.groupExpansionDefault=!1,this.selectAllRowsOnPage=!1,this.virtualization=!0,this.summaryRow=!1,this.summaryHeight=30,this.summaryPosition="top",this.rowDraggable=!1,this.enableClearingSortState=!1,this.scroll=new en,this.activate=new en,this.select=new en,this.sort=new en,this.page=new en,this.reorder=new en,this.resize=new en,this.tableContextmenu=new en(!1),this.treeAction=new en,this.rowDragEvents=new en,this.element=ze(Rr).nativeElement,this.rowDiffer=ze(Pd).find([]).create(),this.rowCount=0,this._offsetX=new _s(0),this._count=0,this._offset=0,this._subscriptions=[],this._ghostLoadingIndicator=!1,this.verticalScrollVisible=!1,this._rowInitDone=mn(!1),this.rowIdentity=e=>this._groupRowsBy?e.key??e:e,this.configuration&&(this.configuration.messages&&(this.messages=Je({},this.configuration.messages)),this.configuration.cssClasses&&(this.cssClasses=Je({},this.configuration.cssClasses)),this.headerHeight=this.configuration.headerHeight??this.headerHeight,this.footerHeight=this.configuration.footerHeight??this.footerHeight,this.rowHeight=this.configuration.rowHeight??this.rowHeight,this._defaultColumnWidth=this.configuration.defaultColumnWidth??150)}ngOnInit(){this.recalculate()}ngAfterViewInit(){typeof requestAnimationFrame>"u"||requestAnimationFrame(()=>{this.recalculate(),this.externalPaging&&this.scrollbarV&&this.page.emit({count:this.count,pageSize:this.pageSize,limit:this.limit,offset:0})})}ngAfterContentInit(){this.columnTemplates.length&&this.translateColumns(this.columnTemplates),this._subscriptions.push(this.columnTemplates.changes.subscribe(e=>this.translateColumns(e))),this.listenForColumnInputChanges()}translateColumns(e){if(e){let i=e.toArray();i.length&&(this._internalColumns=xne(i),QU(this._internalColumns,this._defaultColumnWidth),this.recalculateColumns(),!this.externalSorting&&this.rows?.length&&this.sortInternalRows(),this.cd.markForCheck())}}groupArrayBy(e,i){let r=new Map,s=0;e.forEach(a=>{let u=a[i];r.has(u)?r.get(u).push(a):r.set(u,[a]),s++});let o=(a,u)=>({key:a,value:u});return Array.from(r,a=>o(a[0],a[1]))}ngDoCheck(){let e=this.rowDiffer.diff(this.rows);(e||this.disableRowCheck)&&(!this.ghostLoadingIndicator&&!this.externalSorting&&this._internalColumns?this.sortInternalRows():this._internalRows=[...this.rows],this._internalRows=OR(this._internalRows,ey(this.treeFromRelation),ey(this.treeToRelation)),this._rows&&this._groupRowsBy&&(this.groupedRows=this.groupArrayBy(this._rows,this._groupRowsBy)),e&&queueMicrotask(()=>{this._rowInitDone.set(!0),this.recalculate(),this.cd.markForCheck()}),this.recalculatePages(),this.cd.markForCheck())}recalculate(){this.recalculateDims(),this.recalculateColumns(),this.cd.markForCheck()}onWindowResize(){this.recalculate()}recalculateColumns(e=this._internalColumns,i=-1,r=this.scrollbarH){let s=this._innerWidth;if(!e||!s)return;let o=this.bodyElement?.nativeElement;return this.verticalScrollVisible=o?.scrollHeight>o?.clientHeight,(this.scrollbarV||this.scrollbarVDynamic)&&(s=s-(this.verticalScrollVisible||!this._rowInitDone()?this.scrollbarHelper.width:0)),this.columnMode===CC.force?Kne(e,s,i,r,this._defaultColumnWidth,this.scrollbarHelper.width):this.columnMode===CC.flex&&Yne(e,s),this.bodyComponent&&this.bodyComponent.columnGroupWidths.total!==s&&(this.bodyComponent.columns=[...this._internalColumns],this.bodyComponent.cd.markForCheck()),this.headerComponent&&this.headerComponent._columnGroupWidths.total!==s&&(this.headerComponent.columns=[...this._internalColumns]),e}recalculateDims(){let e=this.element.getBoundingClientRect();if(this._innerWidth=Math.floor(e.width),this.scrollbarV){let i=e.height;this.headerHeight&&(i=i-this.headerHeight),this.footerHeight&&(i=i-this.footerHeight),this.bodyHeight=i}this.recalculatePages()}recalculatePages(){this.pageSize=this.calcPageSize(),this.rowCount=this.calcRowCount()}onBodyPage(e){this.externalPaging&&!this.virtualization||(this.offset=e,isNaN(this.offset)||this.page.emit({count:this.count,pageSize:this.pageSize,limit:this.limit,offset:this.offset}))}onBodyScroll(e){this._offsetX.next(e.offsetX),this.scroll.emit(e),this.cd.detectChanges()}onFooterPage(e){this.offset=e.page-1,this.bodyComponent.updateOffsetY(this.offset),this.page.emit({count:this.count,pageSize:this.pageSize,limit:this.limit,offset:this.offset}),this.selectAllRowsOnPage&&(this.selected=[],this.select.emit({selected:this.selected}))}calcPageSize(){if(this.scrollbarV&&this.virtualization){let e=Math.ceil(this.bodyHeight/this.rowHeight);return Math.max(e,0)}return this.limit!==void 0?this.limit:this.rows?this.rows.length:0}calcRowCount(){return this.externalPaging?this.count:this.rows?this.groupedRows?this.groupedRows.length:this.treeFromRelation!=null&&this.treeToRelation!=null?this._internalRows.length:this.rows.length:0}onColumnContextmenu({event:e,column:i}){this.tableContextmenu.emit({event:e,type:UR.header,content:i})}onRowContextmenu({event:e,row:i}){this.tableContextmenu.emit({event:e,type:UR.body,content:i})}onColumnResize({column:e,newValue:i,prevValue:r}){if(e===void 0)return;let s,o=this._internalColumns.map((a,u)=>(a=Je({},a),a.$$id===e.$$id&&(s=u,a.width=i,a.$$oldWidth=i),a));this.recalculateColumns(o,s),this._internalColumns=o,this.resize.emit({column:e,newValue:i,prevValue:r})}onColumnResizing({column:e,newValue:i}){if(e===void 0)return;e.width=i,e.$$oldWidth=i;let r=this._internalColumns.indexOf(e);this.recalculateColumns(this._internalColumns,r)}onColumnReorder({column:e,newValue:i,prevValue:r}){let s=this._internalColumns.map(o=>Je({},o));if(this.swapColumns){let o=s[i];s[i]=e,s[r]=o}else if(i>r){let o=s[r];for(let a=r;a<i;a++)s[a]=s[a+1];s[i]=o}else{let o=s[r];for(let a=r;a>i;a--)s[a]=s[a-1];s[i]=o}this._internalColumns=s,this.reorder.emit({column:e,newValue:i,prevValue:r})}onColumnSort(e){this.selectAllRowsOnPage&&(this.selected=[],this.select.emit({selected:this.selected})),this.sorts=e.sorts,this.externalSorting===!1&&this.sortInternalRows(),this._internalRows=OR(this._internalRows,ey(this.treeFromRelation),ey(this.treeToRelation)),this.offset=0,this.bodyComponent.updateOffsetY(this.offset),this.page.emit({count:this.count,pageSize:this.pageSize,limit:this.limit,offset:this.offset}),this.sort.emit(e)}onHeaderSelect(){if(this.bodyComponent&&this.selectAllRowsOnPage){let e=this.bodyComponent.indexes().first,i=this.bodyComponent.indexes().last,r=this.selected.length===i-e;this.selected=[],r||this.selected.push(...this._internalRows.slice(e,i))}else{let e;this.disableRowCheck?e=this.rows.filter(r=>!this.disableRowCheck(r)):e=this.rows;let i=this.selected.length===e.length;this.selected=[],i||this.selected.push(...e)}this.select.emit({selected:this.selected})}onBodySelect(e){this.select.emit(e)}onTreeAction(e){let i=e.row,r=this._rows.findIndex(s=>s[this.treeToRelation]===e.row[this.treeToRelation]);this.treeAction.emit({row:i,rowIndex:r})}ngOnDestroy(){this._subscriptions.forEach(e=>e.unsubscribe())}listenForColumnInputChanges(){this._subscriptions.push(this.columnChangesService.columnInputChanges$.subscribe(()=>{this.columnTemplates&&this.columnTemplates.notifyOnChanges()}))}sortInternalRows(){if((!this.sorts||!this.sorts?.length)&&(this._internalRows=this._rows,this.treeFromRelation&&this.treeToRelation&&(this._internalRows=OR(this._internalRows,ey(this.treeFromRelation),ey(this.treeToRelation)))),this.groupedRows&&this.groupedRows.length){let e=this.sorts?.find(i=>i.prop===this._groupRowsBy);this.groupedRows=this.groupArrayBy(this._rows,this._groupRowsBy),this.groupedRows=jne(this.groupedRows,this._internalColumns,this.sorts,e),this._internalRows=[...this._internalRows]}else this._internalRows=HR(this._internalRows,this._internalColumns,this.sorts)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["ngx-datatable"]],contentQueries:function(i,r,s){if(i&1&&(Qo(s,Ene,5),Qo(s,fne,5),Qo(s,Tne,5),Qo(s,Ine,5,Vs),Qo(s,$R,4)),i&2){let o;Hn(o=jn())&&(r.rowDetail=o.first),Hn(o=jn())&&(r.groupHeader=o.first),Hn(o=jn())&&(r.footer=o.first),Hn(o=jn())&&(r.rowDefTemplate=o.first),Hn(o=jn())&&(r.columnTemplates=o)}},viewQuery:function(i,r){if(i&1&&(Oi(BR,5),Oi(eH,5),Oi(BR,5,Rr)),i&2){let s;Hn(s=jn())&&(r.bodyComponent=s.first),Hn(s=jn())&&(r.headerComponent=s.first),Hn(s=jn())&&(r.bodyElement=s.first)}},hostAttrs:[1,"ngx-datatable"],hostVars:22,hostBindings:function(i,r){i&1&&bt("resize",function(){return r.onWindowResize()},!1,qw),i&2&&Si("fixed-header",r.isFixedHeader)("fixed-row",r.isFixedRow)("scroll-vertical",r.isVertScroll)("virtualized",r.isVirtualized)("scroll-horz",r.isHorScroll)("selectable",r.isSelectable)("checkbox-selection",r.isCheckboxSelection)("cell-selection",r.isCellSelection)("single-selection",r.isSingleSelection)("multi-selection",r.isMultiSelection)("multi-click-selection",r.isMultiClickSelection)},inputs:{targetMarkerTemplate:"targetMarkerTemplate",rows:"rows",groupRowsBy:"groupRowsBy",groupedRows:"groupedRows",columns:"columns",selected:"selected",scrollbarV:[2,"scrollbarV","scrollbarV",Hi],scrollbarVDynamic:[2,"scrollbarVDynamic","scrollbarVDynamic",Hi],scrollbarH:[2,"scrollbarH","scrollbarH",Hi],rowHeight:"rowHeight",columnMode:"columnMode",headerHeight:[2,"headerHeight","headerHeight",Qs],footerHeight:[2,"footerHeight","footerHeight",Qs],externalPaging:[2,"externalPaging","externalPaging",Hi],externalSorting:[2,"externalSorting","externalSorting",Hi],limit:[2,"limit","limit",Qs],count:[2,"count","count",Qs],offset:[2,"offset","offset",Qs],loadingIndicator:[2,"loadingIndicator","loadingIndicator",Hi],ghostLoadingIndicator:[2,"ghostLoadingIndicator","ghostLoadingIndicator",Hi],selectionType:"selectionType",reorderable:[2,"reorderable","reorderable",Hi],swapColumns:[2,"swapColumns","swapColumns",Hi],sortType:"sortType",sorts:"sorts",cssClasses:"cssClasses",messages:"messages",rowClass:"rowClass",selectCheck:"selectCheck",displayCheck:"displayCheck",groupExpansionDefault:[2,"groupExpansionDefault","groupExpansionDefault",Hi],trackByProp:"trackByProp",selectAllRowsOnPage:[2,"selectAllRowsOnPage","selectAllRowsOnPage",Hi],virtualization:[2,"virtualization","virtualization",Hi],treeFromRelation:"treeFromRelation",treeToRelation:"treeToRelation",summaryRow:[2,"summaryRow","summaryRow",Hi],summaryHeight:[2,"summaryHeight","summaryHeight",Qs],summaryPosition:"summaryPosition",disableRowCheck:"disableRowCheck",rowDraggable:[2,"rowDraggable","rowDraggable",Hi],enableClearingSortState:[2,"enableClearingSortState","enableClearingSortState",Hi],rowIdentity:"rowIdentity"},outputs:{scroll:"scroll",activate:"activate",select:"select",sort:"sort",page:"page",reorder:"reorder",resize:"resize",tableContextmenu:"tableContextmenu",treeAction:"treeAction",rowDragEvents:"rowDragEvents"},features:[So([{provide:cH,useExisting:n},VR])],ngContentSelectors:sH,decls:10,vars:39,consts:[["visibilityObserver","",3,"visible"],["role","table"],["role","rowgroup",3,"sorts","sortType","scrollbarH","innerWidth","offsetX","dealsWithGroup","columns","headerHeight","reorderable","targetMarkerTemplate","sortAscendingIcon","sortDescendingIcon","sortUnsetIcon","allRowsSelected","selectionType","verticalScrollVisible","enableClearingSortState"],["tabindex","0","role","rowgroup",3,"page","activate","rowContextmenu","select","scroll","treeAction","groupRowsBy","groupedRows","rows","groupExpansionDefault","scrollbarV","scrollbarH","virtualization","loadingIndicator","ghostLoadingIndicator","externalPaging","rowHeight","rowCount","offset","trackByProp","columns","pageSize","offsetX","rowDetail","groupHeader","selected","innerWidth","bodyHeight","selectionType","rowIdentity","rowClass","selectCheck","displayCheck","summaryRow","summaryHeight","summaryPosition","verticalScrollVisible","disableRowCheck","rowDraggable","rowDragEvents","rowDefTemplate"],[3,"rowCount","pageSize","offset","footerHeight","footerTemplate","totalMessage","pagerLeftArrowIcon","pagerRightArrowIcon","pagerPreviousIcon","selectedCount","selectedMessage","pagerNextIcon"],["role","rowgroup",3,"sort","resize","resizing","reorder","select","columnContextmenu","sorts","sortType","scrollbarH","innerWidth","offsetX","dealsWithGroup","columns","headerHeight","reorderable","targetMarkerTemplate","sortAscendingIcon","sortDescendingIcon","sortUnsetIcon","allRowsSelected","selectionType","verticalScrollVisible","enableClearingSortState"],[1,"empty-row",3,"innerHTML"],[3,"page","rowCount","pageSize","offset","footerHeight","footerTemplate","totalMessage","pagerLeftArrowIcon","pagerRightArrowIcon","pagerPreviousIcon","selectedCount","selectedMessage","pagerNextIcon"]],template:function(i,r){i&1&&(_u(rH),ge(0,"div",0),bt("visible",function(){return r.recalculate()}),ge(1,"div",1),It(2,ane,2,19,"datatable-header",2),ge(3,"datatable-body",3),Pl(4,"async"),bt("page",function(o){return r.onBodyPage(o)})("activate",function(o){return r.activate.emit(o)})("rowContextmenu",function(o){return r.onRowContextmenu(o)})("select",function(o){return r.onBodySelect(o)})("scroll",function(o){return r.onBodyScroll(o)})("treeAction",function(o){return r.onTreeAction(o)}),Rl(5,0,["ngProjectAs","[loading-indicator]",5,["","loading-indicator",""]],lne,1,0),Rl(7,1,["ngProjectAs","[empty-content]",5,["","empty-content",""]],cne,1,1),ye()(),It(9,une,1,12,"datatable-footer",4),ye()),i&2&&(xe(2),Kt(r.headerHeight?2:-1),xe(),Ne("groupRowsBy",r.groupRowsBy)("groupedRows",r.groupedRows)("rows",r._internalRows)("groupExpansionDefault",r.groupExpansionDefault)("scrollbarV",r.scrollbarV)("scrollbarH",r.scrollbarH)("virtualization",r.virtualization)("loadingIndicator",r.loadingIndicator)("ghostLoadingIndicator",r.ghostLoadingIndicator)("externalPaging",r.externalPaging)("rowHeight",r.rowHeight)("rowCount",r.rowCount)("offset",r.offset)("trackByProp",r.trackByProp)("columns",r._internalColumns)("pageSize",r.pageSize)("offsetX",Dv(4,37,r._offsetX))("rowDetail",r.rowDetail)("groupHeader",r.groupHeader)("selected",r.selected)("innerWidth",r._innerWidth)("bodyHeight",r.bodyHeight)("selectionType",r.selectionType)("rowIdentity",r.rowIdentity)("rowClass",r.rowClass)("selectCheck",r.selectCheck)("displayCheck",r.displayCheck)("summaryRow",r.summaryRow)("summaryHeight",r.summaryHeight)("summaryPosition",r.summaryPosition)("verticalScrollVisible",r.verticalScrollVisible)("disableRowCheck",r.disableRowCheck)("rowDraggable",r.rowDraggable)("rowDragEvents",r.rowDragEvents)("rowDefTemplate",r.rowDefTemplate),xe(6),Kt(r.footerHeight?9:-1))},dependencies:[tie,eH,BR,eie,Fv,nie],styles:[`.ngx-datatable{display:block;overflow:hidden;justify-content:center;position:relative;transform:translateZ(0)}.ngx-datatable [hidden]{display:none!important}.ngx-datatable *,.ngx-datatable *:before,.ngx-datatable *:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.ngx-datatable.scroll-vertical .datatable-body{overflow-y:auto}.ngx-datatable.scroll-vertical.virtualized .datatable-body .datatable-row-wrapper{position:absolute}.ngx-datatable.scroll-horz .datatable-body{overflow-x:auto;-webkit-overflow-scrolling:touch}.ngx-datatable.fixed-header .datatable-header .datatable-header-inner{white-space:nowrap}.ngx-datatable.fixed-header .datatable-header .datatable-header-inner .datatable-header-cell{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ngx-datatable.fixed-row .datatable-scroll,.ngx-datatable.fixed-row .datatable-scroll .datatable-body-row{white-space:nowrap}.ngx-datatable.fixed-row .datatable-scroll .datatable-body-row .datatable-body-cell,.ngx-datatable.fixed-row .datatable-scroll .datatable-body-row .datatable-body-group-cell{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.ngx-datatable .datatable-body-row,.ngx-datatable .datatable-row-center,.ngx-datatable .datatable-header-inner{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;flex-direction:row;-webkit-flex-flow:row;-moz-flex-flow:row;-ms-flex-flow:row;-o-flex-flow:row;flex-flow:row}.ngx-datatable .datatable-body-cell,.ngx-datatable .datatable-header-cell{overflow-x:hidden;vertical-align:top;display:inline-block;line-height:1.625}.ngx-datatable .datatable-body-cell:focus,.ngx-datatable .datatable-header-cell:focus{outline:none}.ngx-datatable .datatable-row-left,.ngx-datatable .datatable-row-right,.ngx-datatable .datatable-group-header{z-index:9;position:sticky!important}.ngx-datatable .datatable-row-left,.ngx-datatable .datatable-group-header{left:0}.ngx-datatable .datatable-row-right{right:0}.ngx-datatable .datatable-row-center,.ngx-datatable .datatable-row-group{position:relative}.ngx-datatable .datatable-header{display:block;overflow:hidden}.ngx-datatable .datatable-header .datatable-header-inner{align-items:stretch;-webkit-align-items:stretch}.ngx-datatable .datatable-header .datatable-header-cell{position:relative;display:inline-block}.ngx-datatable .datatable-header .datatable-header-cell.sortable .datatable-header-cell-wrapper{cursor:pointer}.ngx-datatable .datatable-header .datatable-header-cell.longpress .datatable-header-cell-wrapper{cursor:move}.ngx-datatable .datatable-header .datatable-header-cell .sort-btn{line-height:100%;vertical-align:middle;display:inline-block;cursor:pointer}.ngx-datatable .datatable-header .datatable-header-cell .resize-handle,.ngx-datatable .datatable-header .datatable-header-cell .resize-handle--not-resizable{display:inline-block;position:absolute;right:0;top:0;bottom:0;width:5px;padding:0 4px;visibility:hidden}.ngx-datatable .datatable-header .datatable-header-cell .resize-handle{cursor:ew-resize}.ngx-datatable .datatable-header .datatable-header-cell.resizeable:hover .resize-handle,.ngx-datatable .datatable-header .datatable-header-cell:hover .resize-handle--not-resizable{visibility:visible}.ngx-datatable .datatable-header .datatable-header-cell .targetMarker{position:absolute;top:0;bottom:0}.ngx-datatable .datatable-header .datatable-header-cell .targetMarker.dragFromLeft{right:0}.ngx-datatable .datatable-header .datatable-header-cell .targetMarker.dragFromRight{left:0}.ngx-datatable .datatable-header .datatable-header-cell .datatable-header-cell-template-wrap{height:inherit}.ngx-datatable .datatable-body{position:relative;z-index:10;display:block;overflow:hidden}.ngx-datatable .datatable-body .datatable-scroll{display:inline-block}.ngx-datatable .datatable-body .datatable-row-detail{overflow-y:hidden}.ngx-datatable .datatable-body .datatable-row-wrapper{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.ngx-datatable .datatable-body .datatable-body-row{outline:none}.ngx-datatable .datatable-body .datatable-body-row>div{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex}.ngx-datatable .datatable-footer{display:block;width:100%;overflow:auto}.ngx-datatable .datatable-footer .datatable-footer-inner{display:flex;align-items:center;width:100%}.ngx-datatable .datatable-footer .selected-count .page-count{flex:1 1 40%}.ngx-datatable .datatable-footer .selected-count .datatable-pager{flex:1 1 60%}.ngx-datatable .datatable-footer .page-count{flex:1 1 20%}.ngx-datatable .datatable-footer .datatable-pager{flex:1 1 80%;text-align:right}.ngx-datatable .datatable-footer .datatable-pager .pager,.ngx-datatable .datatable-footer .datatable-pager .pager li{padding:0;margin:0;display:inline-block;list-style:none}.ngx-datatable .datatable-footer .datatable-pager .pager li,.ngx-datatable .datatable-footer .datatable-pager .pager li a{outline:none}.ngx-datatable .datatable-footer .datatable-pager .pager li a{cursor:pointer;display:inline-block}.ngx-datatable .datatable-footer .datatable-pager .pager li.disabled a{cursor:not-allowed}
`],encapsulation:2,changeDetection:0})}}return wO([qne(5)],n.prototype,"onWindowResize",null),n})();var dH=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[{provide:"configuration",useValue:e}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Xo({type:n})}static{this.\u0275inj=$o({})}}return n})();var rie=(n,t)=>[n,t];function sie(n,t){if(n&1&&(Yo(0),ge(1,"b"),ot(2),ye(),tt(3,"br"),Zo()),n&2){let e=Ae();xe(2),Yr(e.notification().asset)}}function oie(n,t){if(n&1&&(Yo(0),ge(1,"b"),ot(2),ye(),Zo()),n&2){let e=Ae();xe(2),Yr(e.notification().affectedElement)}}function aie(n,t){if(n&1){let e=Dn();Yo(0),ge(1,"button",7),bt("click",function(){gt(e);let r=Ae();return yt(r.onNotificationClick())}),xo(),ge(2,"svg",8),tt(3,"path",9),ye(),gu(),ge(4,"span",10),ot(5,"Inspect Notification"),ye()(),Zo()}}var fH=(()=>{class n{AlarmIconComponent=Nl;notification=vt.required();isNotificationClickable=vt(!0);displayAssetInformation=vt(!0);displayElementInformation=vt(!0);clickAction=nr();onNotificationClick(){this.isNotificationClickable()&&this.clickAction.emit(this.notification())}getColorForNotificationStatus(e){return this.statusColorMap[e.status]}statusColorMap={healthy:"healthy",warn:"warn",critical:"critical"};static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-notification"]],inputs:{notification:[1,"notification"],isNotificationClickable:[1,"isNotificationClickable"],displayAssetInformation:[1,"displayAssetInformation"],displayElementInformation:[1,"displayElementInformation"]},outputs:{clickAction:"clickAction"},decls:12,vars:17,consts:[[1,"notification-wrapper"],["role","button","tabindex","0",1,"notification","text-dark","border-1","border-gray-500","rounded-lg","mb-2","transition-all","duration-300","ease-in",3,"click","keydown.enter","ngClass"],[1,"notification-base-information",3,"ngClass"],[1,"notification-status-badge",3,"color","iconComponent","inverted","text"],[4,"ngIf"],[1,"notification-text-button-wrapper","flex","items-center","justify-between"],[1,"notification-text"],["type","button",1,"bg-transparent","p-1","font-medium","rounded-full","text-sm","text-center","inline-flex","items-center","me-2",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m9 5 7 7-7 7"],[1,"sr-only"]],template:function(i,r){i&1&&(ge(0,"div",0)(1,"div",1),bt("click",function(){return r.onNotificationClick()})("keydown.enter",function(){return r.onNotificationClick()}),ge(2,"div",2),tt(3,"lib-badge",3),It(4,sie,4,1,"ng-container",4),ot(5),Pl(6,"date"),ye(),ge(7,"div",5)(8,"div",6),It(9,oie,3,1,"ng-container",4),ot(10),ye(),It(11,aie,6,0,"ng-container",4),ye()()()),i&2&&(xe(),Ne("ngClass",oS(14,rie,r.notification().status.toLowerCase(),r.isNotificationClickable()?"hover:bg-elevated-background cursor-pointer focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"")),xe(),Ne("ngClass",r.notification().status.toLowerCase()),xe(),Ne("color",r.getColorForNotificationStatus(r.notification()))("iconComponent",r.AlarmIconComponent)("inverted",!0)("text",r.notification().status),xe(),Ne("ngIf",r.displayAssetInformation()),xe(),Ci(" ",fp(6,11,r.notification().dateTime,"dd.MM.yyyy")," "),xe(4),Ne("ngIf",r.displayElementInformation()),xe(),Ci(" ",r.notification().notification," "),xe(),Ne("ngIf",r.isNotificationClickable()))},dependencies:[Nt,ls,Ka,Bv,Fd],styles:[".notification-wrapper[_ngcontent-%COMP%]{container-type:inline-size;container-name:notification-wrapper}.notification[_ngcontent-%COMP%]{border:#F2F2F2 solid 1px;display:flex;gap:1rem;overflow:hidden;border-radius:.5rem}.notification-text-button-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}.notification-text[_ngcontent-%COMP%]{flex-grow:1;padding:.5rem;display:grid;align-content:center}.notification-base-information[_ngcontent-%COMP%]{text-align:center;padding:.5rem;color:#fff;width:120px;min-width:120px;max-width:120px;display:flex;flex-direction:column;align-items:center;justify-content:center}.notification-base-information.healthy[_ngcontent-%COMP%]{background-color:#76996e}.notification-base-information.warn[_ngcontent-%COMP%]{background-color:#f4ac32}.notification-base-information.critical[_ngcontent-%COMP%]{background-color:#c42021}.notification-status-badge[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}@container notification-wrapper (max-width: 430px){.notification[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.notification-base-information[_ngcontent-%COMP%]{width:100%;max-width:100%;min-width:unset;flex-direction:column;align-items:center}.notification-status-badge[_ngcontent-%COMP%]{margin-bottom:.5rem}}"],changeDetection:0})}return n})();var lie=["dataTableWrapper"],cie=(n,t)=>t.id;function uie(n,t){if(n&1){let e=Dn();ge(0,"div",11)(1,"label",13),ot(2,"Search"),ye(),ge(3,"div",14)(4,"input",15),Tv("ngModelChange",function(r){gt(e);let s=Ae(2);return iS(s.searchTermValue,r)||(s.searchTermValue=r),yt(r)}),bt("input",function(){gt(e);let r=Ae(2);return yt(r.searchTerm.set(r.searchTermValue))}),ye(),ge(5,"div",16),xo(),ge(6,"svg",17),tt(7,"path",18),ye()()()()}if(n&2){let e=Ae(2);xe(4),Ev("ngModel",e.searchTermValue)}}function hie(n,t){if(n&1){let e=Dn();ge(0,"div",12)(1,"label",13),ot(2,"Search"),ye(),ge(3,"div",14)(4,"input",19),Tv("ngModelChange",function(r){gt(e);let s=Ae(2);return iS(s.searchTermValue,r)||(s.searchTermValue=r),yt(r)}),bt("input",function(){gt(e);let r=Ae(2);return yt(r.searchTerm.set(r.searchTermValue))}),ye(),ge(5,"div",16),xo(),ge(6,"svg",17),tt(7,"path",18),ye()()()()}if(n&2){let e=Ae(2);xe(4),Ev("ngModel",e.searchTermValue)}}function die(n,t){if(n&1){let e=Dn();ge(0,"div",2)(1,"form",3)(2,"div",4),tt(3,"lib-clock-icon",5),ye(),ge(4,"select",6),Tv("ngModelChange",function(r){gt(e);let s=Ae();return iS(s.rangeSelectorValue,r)||(s.rangeSelectorValue=r),yt(r)}),bt("change",function(){gt(e);let r=Ae();return yt(r.onRangeChange())}),ge(5,"option",7),ot(6,"Last Hour"),ye(),ge(7,"option",8),ot(8,"Today"),ye(),ge(9,"option",9),ot(10,"Last Week"),ye(),ge(11,"option",10),ot(12,"Last 30 Days"),ye()()(),It(13,uie,8,1,"div",11),ye(),It(14,hie,8,1,"div",12)}if(n&2){let e=Ae();xe(3),Ne("color","gray-500")("size","small"),xe(),Ev("ngModel",e.rangeSelectorValue),xe(9),Kt(e.mobileView()?-1:13),xe(),Kt(e.mobileView()?14:-1)}}function fie(n,t){if(n&1&&tt(0,"lib-badge",27),n&2){let e=t.row,i=Ae(2);Ne("color",i.getColorForNotificationStatus(e))("iconComponent",i.AlarmIconComponent)("text",e.status)}}function pie(n,t){n&1&&tt(0,"br")}function mie(n,t){n&1&&ot(0," \xA0 ")}function gie(n,t){if(n&1&&(ge(0,"b"),ot(1),ye(),tt(2,"br"),ot(3),Pl(4,"date"),It(5,pie,1,0,"br")(6,mie,1,0),ot(7),Pl(8,"date")),n&2){let e=t.row,i=Ae(3);xe(),Yr(e.asset),xe(2),Ci(" ",fp(4,4,e.dateTime,"dd.MM.yyyy")," "),xe(2),Kt(i.compactView()?5:6),xe(2),Ci(" ",fp(8,7,e.dateTime,"HH:mm:ss")," ")}}function yie(n,t){n&1&&(ge(0,"ngx-datatable-column",23),It(1,gie,9,10,"ng-template",22),ye())}function vie(n,t){n&1&&tt(0,"br")}function _ie(n,t){n&1&&ot(0," \xA0 ")}function bie(n,t){if(n&1&&(ot(0),Pl(1,"date"),It(2,vie,1,0,"br")(3,_ie,1,0),ot(4),Pl(5,"date")),n&2){let e=t.row,i=Ae(3);Ci(" ",fp(1,3,e.dateTime,"dd.MM.yyyy")," "),xe(2),Kt(i.compactView()?2:3),xe(2),Ci(" ",fp(5,6,e.dateTime,"HH:mm:ss")," ")}}function xie(n,t){n&1&&(ge(0,"ngx-datatable-column",24),It(1,bie,6,9,"ng-template",22),ye())}function wie(n,t){if(n&1&&(ge(0,"b"),ot(1),ye(),tt(2,"br")),n&2){let e=Ae().row;xe(),Yr(e.affectedElement)}}function Sie(n,t){if(n&1&&(It(0,wie,3,1),ot(1)),n&2){let e=t.row,i=Ae(3);Kt(i.hideElementInfo()?-1:0),xe(),Ci(" ",e.notification," ")}}function Cie(n,t){n&1&&(ge(0,"ngx-datatable-column",25),It(1,Sie,2,2,"ng-template",22),ye())}function Mie(n,t){if(n&1&&(ge(0,"b"),ot(1),ye()),n&2){let e=t.row;xe(),Yr(e.affectedElement)}}function Eie(n,t){if(n&1&&ot(0),n&2){let e=t.row;Ci(" ",e.notification," ")}}function Tie(n,t){n&1&&(Yo(0),ge(1,"ngx-datatable-column",30),It(2,Mie,2,1,"ng-template",22),ye(),ge(3,"ngx-datatable-column",25),It(4,Eie,1,1,"ng-template",22),ye(),Zo())}function Aie(n,t){if(n&1&&ot(0),n&2){let e=t.row;Ci(" ",e.notification," ")}}function Die(n,t){n&1&&(ge(0,"ngx-datatable-column",25),It(1,Aie,1,1,"ng-template",22),ye())}function Iie(n,t){if(n&1&&It(0,Tie,5,0,"ng-container",28)(1,Die,2,0,"ngx-datatable-column",29),n&2){let e=Ae(2);Ne("ngIf",!e.hideElementInfo()),xe(),Ne("ngIf",e.hideElementInfo())}}function Rie(n,t){n&1&&(ge(0,"button",32),xo(),ge(1,"svg",33),tt(2,"path",34),ye(),gu(),ge(3,"span",35),ot(4,"Inspect Notification Button"),ye()())}function Pie(n,t){n&1&&(ge(0,"ngx-datatable-column",31),It(1,Rie,5,0,"ng-template",22),ye())}function kie(n,t){if(n&1){let e=Dn();ge(0,"div")(1,"ngx-datatable",20),bt("activate",function(r){gt(e);let s=Ae();return yt(s.onRowActivate(r))}),ge(2,"ngx-datatable-column",21),It(3,fie,1,3,"ng-template",22),ye(),It(4,yie,2,0,"ngx-datatable-column",23)(5,xie,2,0,"ngx-datatable-column",24)(6,Cie,2,0,"ngx-datatable-column",25)(7,Iie,2,2)(8,Pie,2,0,"ngx-datatable-column",26),ye()()}if(n&2){let e=Ae();xe(),Ne("rows",e.filteredNotifications()),xe(3),Kt(e.hideAssetInfo()?5:4),xe(2),Kt(e.compactView()?6:7),xe(2),Ne("ngIf",e.isClickable())}}function Lie(n,t){if(n&1){let e=Dn();ge(0,"lib-notification",38),bt("clickAction",function(r){gt(e);let s=Ae(2);return yt(s.notificationClickAction.emit(r))}),ye()}if(n&2){let e=t.$implicit,i=Ae(2);Ne("notification",e)("isNotificationClickable",i.isClickable())("displayAssetInformation",!i.hideAssetInfo())("displayElementInformation",!i.hideElementInfo())}}function Nie(n,t){n&1&&(ge(0,"div",37),ot(1,"No notifications available"),ye())}function Oie(n,t){if(n&1&&(ge(0,"div"),xs(1,Lie,1,4,"lib-notification",36,cie,!1,Nie,2,0,"div",37),ye()),n&2){let e=Ae();xe(),ws(e.filteredNotifications())}}var TC=(()=>{class n{dataTableWrapper;notifications=vt([]);disableControls=vt(!1);hideAssetInfo=vt(!1);hideElementInfo=vt(!1);isClickable=vt(!0);defaultDateRange=vt("today");notificationClickAction=nr();compactView=mn(!1);mobileView=mn(!1);searchTerm=mn("");selectedRange=mn("today");searchTermValue="";rangeSelectorValue="today";AlarmIconComponent=Nl;ngOnInit(){let e=this.defaultDateRange();this.selectedRange.set(e),this.rangeSelectorValue=e}ngAfterViewInit(){new ResizeObserver(([i])=>{let r=i.contentRect.width;this.compactView.set(r<1e3&&r>=650),this.mobileView.set(r<650)}).observe(this.dataTableWrapper.nativeElement)}onRangeChange(){this.selectedRange.set(this.rangeSelectorValue)}onRowActivate(e){e.type==="click"&&this.navigateToNotificationElement(e.row)}navigateToNotificationElement(e){this.notificationClickAction.emit(e)}filteredNotifications=cn(()=>{let e=Date.now(),i=e;switch(this.selectedRange()){case"lastHour":i=e-60*60*1e3;break;case"today":i=new Date().setHours(0,0,0,0);break;case"lastWeek":i=e-7*24*60*60*1e3;break;case"last30days":i=e-30*24*60*60*1e3;break}return this.notifications().filter(r=>new Date(r.dateTime).getTime()>=i).filter(r=>this.filterBySearchTerm(r,this.searchTerm()))});filterBySearchTerm=(e,i)=>i?Object.values(e).some(r=>r.toString().toLowerCase().includes(i.toLowerCase())):!0;getColorForNotificationStatus(e){return this.statusColorMap[e.status]}statusColorMap={healthy:"healthy",warn:"warn",critical:"critical"};static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-notification-table"]],viewQuery:function(i,r){if(i&1&&Oi(lie,5),i&2){let s;Hn(s=jn())&&(r.dataTableWrapper=s.first)}},inputs:{notifications:[1,"notifications"],disableControls:[1,"disableControls"],hideAssetInfo:[1,"hideAssetInfo"],hideElementInfo:[1,"hideElementInfo"],isClickable:[1,"isClickable"],defaultDateRange:[1,"defaultDateRange"]},outputs:{notificationClickAction:"notificationClickAction"},decls:5,vars:2,consts:[["dataTableWrapper",""],["id","datatable-wrapper"],["id","notification-overview-toolbar",1,"flex","content-between","h-10","mb-2"],[1,"h-full","relative"],[1,"absolute","inset-y-0","start-0","flex","items-center","ps-3.5","pointer-events-none"],[3,"color","size"],["id","timeRange","name","timeRange",1,"block","cursor-pointer","w-full","p-2.5","bg-gray-50","w-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","change","ngModel"],["value","lastHour"],["value","today"],["value","lastWeek"],["value","last30days"],[1,"h-full","w-100"],[1,"h-10","w-full","block","mb-2"],["for","search",1,"mb-2","text-sm","font-medium","text-gray-900","sr-only"],[1,"relative","h-full"],["type","search","id","search","placeholder","Search",1,"h-full","block","w-full","px-4","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","ngModel"],[1,"absolute","inset-y-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","search","placeholder","Search",1,"h-full","block","w-full","px-4","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","ngModel"],["rowHeight","auto","columnMode","force",3,"activate","rows"],["name","Condition","minWidth","150","canAutoResize","false"],["ngx-datatable-cell-template",""],["name","Asset & Time","width","1"],["name","Time","width","1"],["name","Notification"],["resizeable","false","width","50","canAutoResize","false",4,"ngIf"],[3,"color","iconComponent","text"],[4,"ngIf"],["name","Notification",4,"ngIf"],["name","Affected Element"],["resizeable","false","width","50","canAutoResize","false"],["type","button",1,"text-primary","bg-transparent","p-1","hover:text-gray-400","cursor-pointer","font-medium","rounded-full","text-sm","text-center","inline-flex","items-center","me-2"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m9 5 7 7-7 7"],[1,"sr-only"],[3,"notification","isNotificationClickable","displayAssetInformation","displayElementInformation"],[1,"empty-table-message"],[3,"clickAction","notification","isNotificationClickable","displayAssetInformation","displayElementInformation"]],template:function(i,r){i&1&&(It(0,die,15,5),ge(1,"div",1,0),It(3,kie,9,4,"div")(4,Oie,4,1,"div"),ye()),i&2&&(Kt(r.disableControls()?-1:0),xe(3),Kt(r.mobileView()?4:3))},dependencies:[Nt,Ka,Bv,Tu,fC,FU,VU,Vd,pC,Kg,cC,Sp,g_,UU,dH,hH,$R,GR,Fd,fH,mC],styles:["#notification-overview-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between}  ngx-datatable   .ngx-datatable .datatable-body-row:hover{background-color:#f5f5f5;cursor:pointer}  ngx-datatable .datatable-header{background-color:#f2f2f2;border-bottom:solid .25rem white}  ngx-datatable .datatable-body-row{border-bottom:#F2F2F2 2px solid;padding:0 1rem;cursor:pointer;transition:all .3s ease}  ngx-datatable .datatable-body-row:hover{background-color:#f2f2f2}  ngx-datatable .datatable-body-cell{padding:1rem 0}  ngx-datatable .datatable-header-cell,   ngx-datatable .datatable-body-cell{vertical-align:middle;align-content:center}  ngx-datatable .datatable-header{height:auto!important}  ngx-datatable .datatable-header-cell{padding:1rem}  ngx-datatable .empty-row{text-align:center;margin-top:.5rem}#timeRange[_ngcontent-%COMP%]{padding-left:2.5rem;padding-right:1.75rem}.empty-table-message[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0})}return n})();var cP=jm(YR());var AC=(()=>{class n{constructor(e,i){this.el=e,this._zone=i,this.updateChange=new en(!0),this.chartInstance=new en}ngOnChanges(e){let i=e.update?.currentValue;(e.options||i)&&(this.wrappedUpdateOrCreateChart(),i&&this.updateChange.emit(!1))}wrappedUpdateOrCreateChart(){this.runOutsideAngular?this._zone.runOutsideAngular(()=>{this.updateOrCreateChart()}):this.updateOrCreateChart()}updateOrCreateChart(){this.chart?.update?this.chart.update(this.options,!0,this.oneToOne||!1):(this.chart=this.Highcharts[this.constructorType||"chart"](this.el.nativeElement,this.options,this.callbackFunction||null),this.chartInstance.emit(this.chart))}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=null,this.chartInstance.emit(this.chart))}static{this.\u0275fac=function(i){return new(i||n)(Nn(Rr),Nn(br))}}static{this.\u0275cmp=_t({type:n,selectors:[["highcharts-chart"]],inputs:{Highcharts:"Highcharts",constructorType:"constructorType",callbackFunction:"callbackFunction",oneToOne:"oneToOne",runOutsideAngular:"runOutsideAngular",options:"options",update:"update"},outputs:{updateChange:"updateChange",chartInstance:"chartInstance"},standalone:!1,features:[Ks],decls:0,vars:0,template:function(i,r){},encapsulation:2})}}return n})(),DC=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Xo({type:n})}static{this.\u0275inj=$o({})}}return n})();var mi=jm(AH(),1);var aP=mi.Matrix;var lP=mi.MatrixTransposeView;var T1e=mi.default.Matrix?mi.default.Matrix:mi.Matrix;var DH=mi.solve;Mp();Mp();function zC(n,t){if(!il(n)||!il(t))throw new TypeError("x and y must be arrays");if(n.length!==t.length)throw new RangeError("x and y arrays must have the same length")}var UC=class n{constructor(){if(new.target===n)throw new Error("BaseRegression must be subclassed")}predict(t){if(typeof t=="number")return this._predict(t);if(il(t)){let e=[];for(let i of t)e.push(this._predict(i));return e}else throw new TypeError("x must be a number or array")}_predict(t){throw new Error("_predict must be implemented")}train(){}toString(t){return""}toLaTeX(t){return""}score(t,e){zC(t,e);let i=t.length,r=new Array(i);for(let C=0;C<i;C++)r[C]=this._predict(t[C]);let s=0,o=0,a=0,u=0,d=0,g=0,v=0;for(let C=0;C<i;C++)s+=r[C],o+=e[C],d+=r[C]*r[C],g+=e[C]*e[C],v+=r[C]*e[C],e[C]!==0&&(a+=(e[C]-r[C])*(e[C]-r[C])/e[C]),u+=(e[C]-r[C])*(e[C]-r[C]);let x=(i*v-s*o)/Math.sqrt((i*d-s*s)*(i*g-o*o));return{r:x,r2:x*x,chi2:a,rmsd:Math.sqrt(u/i)}}};function HC(n,t){return n<0?(n=0-n,typeof t=="number"?`- ${n.toPrecision(t)}`:`- ${n.toString()}`):typeof t=="number"?n.toPrecision(t):n.toString()}var jC=class n extends UC{constructor(t,e,i,r={}){if(super(),t===!0)this.degree=e.degree,this.powers=e.powers,this.coefficients=e.coefficients;else{zC(t,e);let s=bre(t,e,i,r);this.degree=s.degree,this.powers=s.powers,this.coefficients=s.coefficients}}_predict(t){let e=0;for(let i=0;i<this.powers.length;i++)e+=this.coefficients[i]*t**this.powers[i];return e}toJSON(){return{name:"polynomialRegression",degree:this.degree,powers:this.powers,coefficients:this.coefficients}}toString(t){return this._toFormula(t,!1)}toLaTeX(t){return this._toFormula(t,!0)}_toFormula(t,e){let i="^",r="",s=" * ";e&&(i="^{",r="}",s="");let o="",a="";for(let u=0;u<this.coefficients.length;u++)a="",this.coefficients[u]!==0&&(this.powers[u]===0?a=HC(this.coefficients[u],t):this.powers[u]===1?a=`${HC(this.coefficients[u],t)+s}x`:a=`${HC(this.coefficients[u],t)+s}x${i}${this.powers[u]}${r}`,this.coefficients[u]>0&&u!==this.coefficients.length-1?a=` + ${a}`:u!==this.coefficients.length-1&&(a=` ${a}`)),o=a+o;return o.startsWith("+")&&(o=o.slice(1)),`f(x) = ${o}`}static load(t){if(t.name!=="polynomialRegression")throw new TypeError("not a polynomial regression model");return new n(!0,t)}};function bre(n,t,e,i={}){let r=n.length,{interceptAtZero:s=!1}=i,o=[];if(Array.isArray(e))o=e,s=!1;else if(typeof e=="number")if(s){o=new Array(e);for(let C=0;C<e;C++)o[C]=C+1}else{o=new Array(e+1);for(let C=0;C<=e;C++)o[C]=C}let a=o.length,u=new aP(r,a),d=new aP([t]);for(let C=0;C<a;C++)for(let A=0;A<r;A++)o[C]===0?u.set(A,C,1):u.set(A,C,n[A]**o[C]);let g=new lP(u),v=g.mmul(u),x=g.mmul(new lP(d));return{coefficients:DH(v,x).to1DArray(),degree:Math.max(...o),powers:o}}function WC(n,t,e){if(n.length!==t.length||n.length===0)return console.warn("Polynomial regression: Invalid input lengths.",{x:n,y:t}),[];try{let i=new jC(n,t,e);return i.coefficients.every(r=>Number.isFinite(r))?i.coefficients:(console.warn("Polynomial regression: Non-finite coefficients returned.",i.coefficients),[])}catch(i){return console.warn("Polynomial regression failed:",i),[]}}function IH(n,t,e=24){if(n.length!==t.length)throw new Error("x and y must be same length");let i=n.length;if(i===0)return{lower:[],upper:[],all:[]};let r=Math.min(...n),o=(Math.max(...n)-r)/e,a=Array(e).fill(null).map(()=>({}));for(let u=0;u<i;u++){let d=n[u],g=t[u],v=Math.min(Math.floor((d-r)/o),e-1),x=a[v];(!x.lower||g<x.lower[1])&&(x.lower=[d,g]),(!x.upper||g>x.upper[1])&&(x.upper=[d,g])}return{lower:a.flatMap(u=>u.lower?[u.lower]:[]),upper:a.flatMap(u=>u.upper?[u.upper]:[]),all:n.map((u,d)=>[u,t[d]])}}function RH(n,t){return n.map((e,i)=>[e[0],e[1],t[i][1]])}function GC(n,t,e,i=100){let r=[];for(let s=0;s<=i;s++){let o=t+s/i*(e-t),a=n.reduce((u,d,g)=>u+d*o**g,0);r.push([o,a])}return r}function xre(n,t){if(n&1&&tt(0,"highcharts-chart",0),n&2){let e=Ae();Ne("Highcharts",e.Highcharts)("options",e.chartOptionsSignal())}}function wre(n,t){n&1&&(ge(0,"div",1),ot(1,"No measurements available"),ye())}var PH=(()=>{class n{Highcharts=cP;measurements=vt([]);warningThreshold=vt(50);criticalThreshold=vt(80);labelX=vt("Time");labelY=vt("Stiffness Change");chartTitle=vt("");regressionEnabled=vt(!0);regressionDegree=vt(3);chartOptionsSignal=cn(()=>this.buildChartOptions());buildChartOptions(){let e=this.measurements(),i=this.regressionEnabled(),r=this.groupByThresholds(e),s=this.getMinTimestamp(e),o=this.getMaxTimestamp(e),a=(o-s)*.3,u=o+a,d=Date.now(),g=this.computeYMax(e),v=this.createScatterSeries(r);return i&&e.length>1&&this.addRegressionSeries(v,e,s,o,u),{chart:{type:"scatter",zooming:{type:"xy"},height:"fit-content",events:{load:function(){if(!i)return;let x=Date.now();this.renderer.text("Forecast \u2192",this.plotLeft+this.xAxis[0].toPixels(x,!0)+5,this.plotTop+15).css({color:"#2B3057",fontSize:"12px",fontWeight:"bold"}).add()}}},exporting:{enabled:!0,buttons:{contextButton:{verticalAlign:"bottom",align:"left"}}},title:{text:this.chartTitle()},xAxis:{type:"datetime",title:{text:this.labelX()},max:u,plotLines:[this.createTodayPlotLine(d)]},yAxis:{min:0,max:g,title:{text:this.labelY()},plotLines:this.createThresholdPlotLines()},tooltip:{formatter(){let x=this.x?cP.dateFormat("%e. %b %Y",this.x):"N/A",C=typeof this.y=="number"?this.y.toFixed(2):"N/A";return this.series?.type==="arearange"?!1:`Date: <b>${x}</b><br/>Value: <b>${C}</b>`}},legend:{enabled:!0},plotOptions:{scatter:{marker:{radius:5,symbol:"circle",states:{hover:{enabled:!0}}}}},series:v}}groupByThresholds(e){let i=this.warningThreshold(),r=this.criticalThreshold(),s={healthy:[],warning:[],critical:[]};for(let{timestamp:o,value:a}of e){let d={x:new Date(o).getTime(),y:a};a<=i?s.healthy.push(d):a<=r?s.warning.push(d):s.critical.push(d)}return s}getMinTimestamp(e){return Math.min(...e.map(i=>new Date(i.timestamp).getTime()))}getMaxTimestamp(e){return Math.max(...e.map(i=>new Date(i.timestamp).getTime()))}computeYMax(e){let i=Math.max(...e.map(s=>s.value)),r=i*.2;return Math.max(120,Math.ceil((i+r)/10)*10)}createScatterSeries(e){return[{name:"Healthy",type:"scatter",data:e.healthy,color:"#76996E"},{name:"Warning",type:"scatter",data:e.warning,color:"#F4AC32"},{name:"Critical",type:"scatter",data:e.critical,color:"#C42021"}]}addRegressionSeries(e,i,r,s,o){let a=i.map(Z=>new Date(Z.timestamp).getTime()),u=i.map(Z=>Z.value),{lower:d,upper:g,all:v}=IH(a,u,Math.min(a.length,24)),x=this.regressionDegree(),C=WC(v.map(Z=>Z[0]),v.map(Z=>Z[1]),x),A=WC(g.map(Z=>Z[0]),g.map(Z=>Z[1]),x),O=WC(d.map(Z=>Z[0]),d.map(Z=>Z[1]),x);e.push({type:"spline",name:"Trendline",data:GC(C,r,o,50),color:"#2B3057",dashStyle:"ShortDash",marker:{enabled:!1},enableMouseTracking:!1,states:{hover:{lineWidth:0}}});let N=GC(O,s,o,50),T=GC(A,s,o,50),j=RH(N,T);e.push({type:"arearange",name:"Confidence Interval",data:j,color:"#6B9AC4",fillOpacity:.3,lineWidth:0,enableMouseTracking:!1,marker:{enabled:!1}})}createTodayPlotLine(e){return{color:"#2B3057",width:2,value:e,zIndex:20,dashStyle:"Dash",label:{text:"Today",rotation:0,align:"right",x:-5,y:15,style:{color:"#2B3057",fontWeight:"bold"}}}}createThresholdPlotLines(){return[{color:"#F4AC32",width:2,value:this.warningThreshold(),dashStyle:"Dash",label:{text:"Warning",align:"right",style:{color:"#F4AC32"}}},{color:"#C42021",width:2,value:this.criticalThreshold(),dashStyle:"Dash",label:{text:"Critical",align:"right",style:{color:"#C42021"}}}]}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-health-scatter-plot"]],inputs:{measurements:[1,"measurements"],warningThreshold:[1,"warningThreshold"],criticalThreshold:[1,"criticalThreshold"],labelX:[1,"labelX"],labelY:[1,"labelY"],chartTitle:[1,"chartTitle"],regressionEnabled:[1,"regressionEnabled"],regressionDegree:[1,"regressionDegree"]},decls:2,vars:1,consts:[[1,"w-full","block",3,"Highcharts","options"],[1,"text-center"]],template:function(i,r){i&1&&It(0,xre,1,2,"highcharts-chart",0)(1,wre,2,0,"div",1),i&2&&Kt(r.measurements().length>0?0:1)},dependencies:[Nt,DC,AC],encapsulation:2,changeDetection:0})}return n})();function Sre(n,t){if(n&1&&(ge(0,"lib-info-box",5)(1,"a",12)(2,"lib-button",13),ot(3," Contact Engineer "),ye()()()),n&2){let e=Ae();Ne("description",e.getWarnDescriptionForType(e.type())),xe(2),Ne("iconComponent",e.EnvelopeIconComponent)("position","left")("type","warn")("fullWidth",!0)}}function Cre(n,t){if(n&1&&(ge(0,"lib-info-box",6)(1,"a",12)(2,"lib-button",13),ot(3," Contact Engineer "),ye()()()),n&2){let e=Ae();Ne("description",e.getCriticalDescriptionForType(e.type())),xe(2),Ne("iconComponent",e.EnvelopeIconComponent)("position","left")("type","critical")("fullWidth",!0)}}var kH=(()=>{class n{type=vt();id=vt();detail=vt(null);notifications=vt([]);measurements=vt([]);closeSidebar=nr();close(){this.closeSidebar.emit()}AlarmIconComponent=Nl;EnvelopeIconComponent=_C;CloseIconComponent=vC;getCriticalDescriptionForType(e){return e===void 0?"":"Recent measurements indicate potential structural damage in "+(e==="sensor"?"the elements monitored by this sensor":"this bridge section")+". It is strongly recommended to arrange an assessment by a structural engineering office as soon as possible."}getWarnDescriptionForType(e){return e===void 0?"":"Recent measurements suggest a deterioration in the structural condition of "+(e==="sensor"?"the elements monitored by this sensor":"this bridge section")+". A structural engineering assessment is advised to evaluate the extent of the decline and ensure continued safety."}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-asset-health-detail-sidebar"]],inputs:{type:[1,"type"],id:[1,"id"],detail:[1,"detail"],notifications:[1,"notifications"],measurements:[1,"measurements"]},outputs:{closeSidebar:"closeSidebar"},decls:17,vars:15,consts:[[1,"absolute","right-0","top-0","z-50","p-4","h-full","bg-white","shadow-xl","w-[500px]","transition-all","translate-x-full","duration-300","max-w-full","overflow-y-auto"],[1,"flex","justify-between","flex-nowrap","gap-4"],[1,"text-2xl","font-bold"],[1,"text-xl","mb-4","text-gray-500"],[3,"click","iconComponent","position"],["title","Compromised Condition","type","warn",1,"mb-4",3,"description"],["title","Critical Condition","type","critical",1,"mb-4",3,"description"],[1,"my-6"],[1,"text-base","font-semibold","mb-3"],[3,"notifications","disableControls","isClickable","hideAssetInfo","defaultDateRange"],[1,"h-[400px]"],[3,"measurements"],["href","mailto:civil-engineering-office@irmos.com"],[3,"iconComponent","position","type","fullWidth"]],template:function(i,r){if(i&1&&(ge(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),ot(4),ye(),ge(5,"h2",3),ot(6),ye()(),ge(7,"lib-button",4),bt("click",function(){return r.close()}),ye()(),It(8,Sre,4,5,"lib-info-box",5)(9,Cre,4,5,"lib-info-box",6),tt(10,"hr",7),ge(11,"h4",8),ot(12),ye(),tt(13,"lib-notification-table",9)(14,"hr",7),ge(15,"div",10),tt(16,"lib-health-scatter-plot",11),ye()()),i&2){let s,o,a;Si("show-sidebar",r.detail()),xe(4),Ci(" ",r.type()==="sensor"?"Sensor Details":"Section Details"," "),xe(2),Ci(" ",(s=r.detail())==null?null:s.name," "),xe(),Ne("iconComponent",r.CloseIconComponent)("position","center"),xe(),Kt(((o=r.detail())==null?null:o.healthStatus)==="warn"?8:-1),xe(),Kt(((a=r.detail())==null?null:a.healthStatus)==="critical"?9:-1),xe(3),Ci(" ",r.type()==="sensor"?"Latest notifications of sensor":"Latest sensor notifications of bridge section"," "),xe(),Ne("notifications",r.notifications())("disableControls",!0)("isClickable",!1)("hideAssetInfo",!0)("defaultDateRange","lastWeek"),xe(3),Ne("measurements",r.measurements())}},dependencies:[Nt,Eu,TC,PH,xC],styles:["div.show-sidebar[_ngcontent-%COMP%]{transform:translate(-100%)}.notification-base-information[_ngcontent-%COMP%]{min-width:120px;max-width:120px;width:120px}"]})}return n})();var cs=jm(uP()),FH=jm(uP());function Mre(n,t){if(n&1){let e=Dn();ge(0,"div",0)(1,"h3",2),ot(2),ye(),ge(3,"div",3)(4,"b",4),ot(5,"Summary"),ye(),ge(6,"div",5)(7,"div",6)(8,"span"),ot(9,"Health"),ye(),ge(10,"span"),ot(11,"Traffic"),ye()(),ge(12,"div",7)(13,"span"),ot(14),ye(),ge(15,"span"),ot(16,"\u2013"),ye()()()(),ge(17,"lib-button",8),bt("click",function(){gt(e);let r=Ae();return yt(r.navigateToDetailViewForId())}),ot(18," Inspect "),ye()()}if(n&2){let e=Ae();Ne("ngClass",e.location().state),xe(2),Yr(e.location().name),xe(12),Yr(e.location().healthPercentage+"%"),xe(3),Ne("iconComponent",e.RightArrowIconComponent)("position","right")("fullWidth",!0)}}function Ere(n,t){if(n&1){let e=Dn();ge(0,"div",1)(1,"div",9)(2,"div")(3,"h3",2),ot(4),ye(),ge(5,"span",10),ot(6),ye()(),ge(7,"i",11),tt(8,"lib-clock-icon",12),ot(9," 3 min ago "),ye()(),tt(10,"hr"),ge(11,"div",13)(12,"div",14)(13,"b",15),ot(14,"Structural"),ye(),tt(15,"lib-badge",16),ye(),ge(16,"div",14)(17,"b",15),ot(18,"Traffic"),ye(),tt(19,"lib-badge",17),ye()(),tt(20,"hr"),ge(21,"div",18)(22,"b",4),ot(23,"Summary"),ye(),ge(24,"div",5)(25,"div",19)(26,"span"),ot(27,"Health Score"),ye(),ge(28,"span"),ot(29,"Vibration"),ye(),ge(30,"span"),ot(31,"Traffic Score"),ye()(),ge(32,"div",20)(33,"span"),ot(34),ye(),ge(35,"span"),ot(36,"Normal"),ye(),ge(37,"span"),ot(38,"\u2013"),ye()()()(),tt(39,"hr"),ge(40,"div",21)(41,"div",22)(42,"b",15),ot(43,"Recent anomaly"),ye(),ge(44,"div"),ot(45,"Stress peak exceeded on north span"),ye()(),ge(46,"div")(47,"b",15),ot(48,"Traffic Forecast"),ye(),ge(49,"div"),ot(50,"Delays \u2265 5 min between 08:00 \u2013 10:00"),ye()()(),ge(51,"div",23)(52,"lib-button",24),bt("click",function(){gt(e);let r=Ae();return yt(r.navigateToDetailViewForId())}),ot(53," Inspect "),ye()()()}if(n&2){let e=Ae();Ne("ngClass",e.location().state),xe(4),Yr(e.location().name),xe(2),Yr(e.location().description),xe(2),Ne("size","small")("color","primary"),xe(7),Ne("color",e.location().state)("text",e.location().state),xe(4),Ne("color",e.location().state),xe(15),Yr(e.location().healthPercentage+"%"),xe(18),Ne("iconComponent",e.RightArrowIconComponent)("position","right")}}var NH=(()=>{class n{location=vt.required();mobileView=vt(!0);router=ze(co);popoverClosed=nr();RightArrowIconComponent=yC;navigateToDetailViewForId(){this.router.navigate(["assets",this.location()?.id])}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-map-popover"]],inputs:{location:[1,"location"],mobileView:[1,"mobileView"]},outputs:{popoverClosed:"popoverClosed"},decls:2,vars:1,consts:[[1,"popover","p-2",3,"ngClass"],[1,"popover","min-w-[30rem]","rounded-lg","border-l-4","bg-white","p-4","shadow-xl","text-sm","space-y-3",3,"ngClass"],[1,"text-lg","font-bold","leading-tight"],[1,"flex","flex-col","items-center"],[1,"whitespace-nowrap"],[1,"flex-1"],[1,"grid","grid-cols-2","gap-4","text-xs","text-gray-500","font-medium","text-center","py-1","border-b"],[1,"grid","grid-cols-2","text-sm","font-semibold","text-center","py-1"],[3,"click","iconComponent","position","fullWidth"],[1,"flex","justify-between","items-start"],[1,"text-dark"],[1,"text-xs","text-dark","flex","items-center","gap-1"],[3,"size","color"],[1,"space-y-1"],[1,"flex","justify-between","items-center"],[1,"font-semibold"],[3,"color","text"],["text","Congested",3,"color"],[1,"flex","gap-4","items-center"],[1,"grid","grid-cols-3","text-xs","text-gray-500","font-medium","text-center","py-1","border-b"],[1,"grid","grid-cols-3","text-sm","font-semibold","text-center","py-1"],[1,"space-y-1","text-sm"],[1,"mb-2"],[1,"pt-2","flex","justify-end"],[3,"click","iconComponent","position"]],template:function(i,r){i&1&&It(0,Mre,19,6,"div",0)(1,Ere,54,11,"div",1),i&2&&Kt(r.mobileView()?0:1)},dependencies:[Nt,ls,Fd,Eu,mC],styles:[".popover.healthy[_ngcontent-%COMP%]{border-color:#76996e}.popover.warn[_ngcontent-%COMP%]{border-color:#f4ac32}.popover.critical[_ngcontent-%COMP%]{border-color:#c42021}"]})}return n})();var Tre=(n,t,e)=>[n,t,e];function Are(n,t){if(n&1&&(ge(0,"span"),tt(1,"lib-bridge-icon",7),ye()),n&2){let e=Ae();xe(),Ne("color","white")("size",e.size())}}function Dre(n,t){if(n&1&&(ge(0,"span"),tt(1,"lib-house-icon",7),ye()),n&2){let e=Ae();xe(),Ne("color","white")("size",e.size())}}function Ire(n,t){n&1&&(ge(0,"span"),ot(1,"\u2753"),ye())}var OH=(()=>{class n{type=vt("building");state=vt("healthy");size=vt("medium");static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-map-marker"]],inputs:{type:[1,"type"],state:[1,"state"],size:[1,"size"]},decls:8,vars:8,consts:[[1,"marker-wrapper",3,"ngClass"],[1,"marker-background"],[1,"pulse-circle"],[1,"marker-icon"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"color","size"]],template:function(i,r){i&1&&(ge(0,"div",0),tt(1,"div",1)(2,"div",2),ge(3,"div",3),Yo(4,4),It(5,Are,2,2,"span",5)(6,Dre,2,2,"span",5)(7,Ire,2,0,"span",6),Zo(),ye()()),i&2&&(Ne("ngClass",kg(4,Tre,r.type(),r.state(),r.size())),xe(4),Ne("ngSwitch",r.type()),xe(),Ne("ngSwitchCase","bridge"),xe(),Ne("ngSwitchCase","building"))},dependencies:[Nt,ls,Ov,BI,VI,gC,HU],styles:["@keyframes _ngcontent-%COMP%_ping{0%{transform:scale(1);opacity:1}75%,to{transform:scale(2);opacity:0}}.marker-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;border-radius:50%;color:#22c55e}.marker-wrapper.small[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;font-size:.9rem}.marker-wrapper.medium[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;font-size:1.2rem}.marker-wrapper.large[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem;font-size:1.6rem}.marker-wrapper.healthy[_ngcontent-%COMP%]{color:#76996e}.marker-wrapper.warn[_ngcontent-%COMP%]{color:#f4ac32}.marker-wrapper.critical[_ngcontent-%COMP%]{color:#c42021}.marker-background[_ngcontent-%COMP%]{position:absolute;inset:0;border-radius:9999px;background-color:currentColor;opacity:.8;z-index:0}.pulse-circle[_ngcontent-%COMP%]{position:absolute;inset:0;border-radius:9999px;background-color:currentColor;opacity:.6;animation:_ngcontent-%COMP%_ping 1.6s cubic-bezier(0,0,.2,1) infinite;z-index:0}.marker-icon[_ngcontent-%COMP%]{z-index:1}"],changeDetection:0})}return n})();var Rre=["mapRef"],BH=(()=>{class n{ZOOM_CONTROL_MIN_WIDTH=750;locations=vt.required();currentLocation=vt();mapReady=mn(!1);mapWidth=mn(0);mapHeight=mn(0);popoverMobileView=cn(()=>this.mapWidth()<=900||this.mapHeight()<=900);hasZoom=!1;resizeObserver;mapRefEl;map;center=cn(()=>{let e=this.locations()[0];return e?cs.latLng(e.lat,e.lng):cs.latLng(46.8,8.3)});markerLayerGroup=null;viewContainerRef=ze(wr);injector=ze(Bs);zoomControl=cs.control.zoom({position:"topleft"});popoverRef;constructor(){ji(()=>{let e=this.currentLocation();e!==void 0&&this.navigateToLocation(e)}),ji(()=>{this.locations(),this.mapReady()&&(this.clearMarkers(),this.renderMarkers())}),ji(()=>{this.mapWidth()>=this.ZOOM_CONTROL_MIN_WIDTH?this.addZoom():this.removeZoom()}),ji(()=>{let e=this.popoverMobileView();this.popoverRef?.setInput("mobileView",e),this.popoverRef?.changeDetectorRef.detectChanges()})}addZoom(){this.hasZoom||(this.zoomControl.addTo(this.map),this.hasZoom=!0)}removeZoom(){this.zoomControl.remove(),this.hasZoom=!1}ngAfterViewInit(){this.initMap(),this.mapReady.set(!0),this.mapWidth.set(this.mapRefEl.nativeElement.offsetWidth),this.mapHeight.set(this.mapRefEl.nativeElement.offsetHeight),this.resizeObserver=new ResizeObserver(e=>{for(let i of e)this.mapWidth.set(i.contentRect.width),this.mapHeight.set(i.contentRect.height)}),this.resizeObserver.observe(this.mapRefEl.nativeElement)}navigateToLocation(e){this.map?.setView([e.lat,e.lng],this.map.getZoom(),{animate:!0,duration:.8,easeLinearity:.25}),setTimeout(()=>this.openPopover(e,new FH.LatLng(e.lat,e.lng)),800)}initMap(){this.map=cs.map(this.mapRefEl.nativeElement,{center:this.center(),zoom:8,zoomControl:!1}),cs.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map)}clearMarkers(){this.markerLayerGroup&&(this.markerLayerGroup.clearLayers(),this.map.removeLayer(this.markerLayerGroup))}renderMarkers(){let e=cs.layerGroup();for(let i of this.locations()){let r=this.viewContainerRef.createComponent(OH);r.setInput("state",i.state),r.setInput("type",i.type),r.setInput("size","medium"),r.changeDetectorRef.detectChanges();let s=cs.divIcon({html:r.location.nativeElement,className:"",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]}),o=cs.marker([i.lat,i.lng],{icon:s});o.on("click",()=>this.openPopover(i,o.getLatLng())),e.addLayer(o)}e.addTo(this.map),this.markerLayerGroup=e}openPopover(e,i){this.popoverRef=this.viewContainerRef.createComponent(NH,{injector:this.injector}),this.popoverRef.setInput("location",e),this.popoverRef.setInput("mobileView",this.popoverMobileView()),this.popoverRef.changeDetectorRef.detectChanges();let r=this.popoverRef.location.nativeElement,s=cs.popup({autoClose:!0,closeButton:!1,offset:cs.point(0,-20),autoPan:!0,autoPanPaddingTopLeft:cs.point(0,60),autoPanPaddingBottomRight:cs.point(0,400),className:"leaflet-custom-popup"}).setLatLng(i).setContent(r).openOn(this.map);setTimeout(()=>{s.update()}),s.on("remove",()=>this.popoverRef?.destroy()),this.popoverRef.instance.popoverClosed.subscribe(()=>{this.map.closePopup(s),this.popoverRef?.destroy()})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-asset-map"]],viewQuery:function(i,r){if(i&1&&Oi(Rre,7),i&2){let s;Hn(s=jn())&&(r.mapRefEl=s.first)}},inputs:{locations:[1,"locations"],currentLocation:[1,"currentLocation"]},decls:3,vars:0,consts:[["mapRef",""],[1,"map-container","h-full"],[1,"leaflet-container","z-0","h-full","w-full"]],template:function(i,r){i&1&&(ge(0,"div",1),tt(1,"div",2,0),ye())},dependencies:[Nt],styles:[".map-container[_ngcontent-%COMP%]{position:relative}  .leaflet-custom-popup .leaflet-popup-content-wrapper{border-radius:.75rem;box-shadow:none;background-color:#fff;padding:0;animation:none!important;transition:none!important}  .leaflet-custom-popup .leaflet-popup-content{width:max-content!important;margin:0;padding:0}"]})}return n})();var Pre=jm(YR()),kEe=jm(VH());var qC=(()=>{class n{Highcharts=Pre;healthPercentage=vt();labelFormat=vt("Health: {y}%");chartOptionsSignal=cn(()=>{let e=this.healthPercentage()??0;return{chart:{type:"gauge",backgroundColor:"transparent",plotBorderWidth:0,plotShadow:!1,spacing:[0,0,0,0],margin:[10,0,15,0]},title:{text:""},tooltip:{enabled:!1},pane:{startAngle:-90,endAngle:89.9,center:["50%","65%"],background:[{backgroundColor:"transparent",borderWidth:0,shape:"arc",innerRadius:"60%",outerRadius:"100%"}],size:"100%"},yAxis:{min:0,max:100,tickInterval:25,tickPositions:[25,50,75],minorTicks:!1,tickPosition:"inside",tickColor:"#FFFFFF",tickLength:20,tickWidth:3,labels:{distance:15,style:{fontSize:"14px",fontWeight:"400"}},lineWidth:0,plotBands:[{from:75,to:100,color:"#76996E",thickness:20},{from:40,to:75,color:"#F4AC32",thickness:20},{from:0,to:40,color:"#C42021",thickness:20}]},series:[{name:"Health",type:"gauge",data:[e],dataLabels:{format:this.labelFormat(),useHTML:!0,backgroundColor:"transparent",borderWidth:0,y:25,style:{fontSize:"14px",fontWeight:"300",color:"#333"}},dial:{radius:"80%",backgroundColor:"#2B3057",baseWidth:10,baseLength:"0%",rearLength:"0%",topWidth:3},pivot:{backgroundColor:"#2B3057",radius:5}}],credits:{enabled:!1}}});static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-gauge-chart"]],inputs:{healthPercentage:[1,"healthPercentage"],labelFormat:[1,"labelFormat"]},decls:1,vars:2,consts:[[1,"w-full","h-full","block",3,"Highcharts","options"]],template:function(i,r){i&1&&tt(0,"highcharts-chart",0),i&2&&Ne("Highcharts",r.Highcharts)("options",r.chartOptionsSignal())},dependencies:[Nt,DC,AC],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;margin-bottom:-1rem}  highcharts-chart{width:100%;height:100%;display:block}"],changeDetection:0})}return n})();var kre=["card"];function Lre(n,t){if(n&1&&(ge(0,"p",4),ot(1),ye()),n&2){let e=Ae();xe(),Ci(" ",e.assetHealthData().description,"")}}function Nre(n,t){if(n&1){let e=Dn();ge(0,"lib-button",8),bt("click",function(){gt(e);let r=Ae();return yt(r.navigateTo.emit())}),ye()}if(n&2){let e=Ae();Ne("type","secondary")("iconComponent",e.LocationIconComponent)("position","center")}}function Ore(n,t){if(n&1){let e=Dn();ge(0,"lib-button",8),bt("click",function(){gt(e);let r=Ae();return yt(r.navigateTo.emit())}),ot(1,"Navigate To "),ye()}if(n&2){let e=Ae();Ne("type","secondary")("iconComponent",e.LocationIconComponent)("position","right")}}var zH=(()=>{class n{card;assetHealthData=vt.required();navigateTo=nr();accessAssetDetailView=nr();mobileView=mn(!1);ngAfterViewInit(){new ResizeObserver(i=>{for(let r of i){let s=r.contentRect.width;this.mobileView.set(s<270)}}).observe(this.card.nativeElement)}LocationIconComponent=qU;RightArrowIconComponent=yC;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-asset-health-card"]],viewQuery:function(i,r){if(i&1&&Oi(kre,5),i&2){let s;Hn(s=jn())&&(r.card=s.first)}},inputs:{assetHealthData:[1,"assetHealthData"]},outputs:{navigateTo:"navigateTo",accessAssetDetailView:"accessAssetDetailView"},decls:12,vars:15,consts:[["card",""],[1,"card","pointer-events-auto","bg-white","border","border-gray-200","rounded-lg","shadow-sm","transition","px-2","pb-2","pt-1"],[1,"w-full","aspect-[2/1]","-mb-2",3,"healthPercentage","labelFormat"],[1,"title","overflow-hidden","overflow-ellipsis","whitespace-nowrap","mb-2","text-xl","font-bold","tracking-tight","text-gray-900"],[1,"description","mb-3","font-normal","text-gray-700","whitespace-nowrap","overflow-hidden","overflow-ellipsis"],[1,"card-actions","flex","justify-between","items-center"],[3,"type","iconComponent","position"],[3,"click","iconComponent","position"],[3,"click","type","iconComponent","position"]],template:function(i,r){if(i&1){let s=Dn();ge(0,"div",1,0),tt(2,"lib-gauge-chart",2),ge(3,"div")(4,"h5",3),ot(5),ye(),It(6,Lre,2,1,"p",4),ge(7,"div",5),It(8,Nre,1,3,"lib-button",6)(9,Ore,2,3,"lib-button",6),ge(10,"lib-button",7),bt("click",function(){return gt(s),yt(r.accessAssetDetailView.emit())}),ot(11,"Inspect "),ye()()()()}i&2&&(xe(2),Ne("healthPercentage",r.assetHealthData().healthPercentage)("labelFormat","Health: {y}%"),xe(),Si("px-3",!r.mobileView())("px-2",r.mobileView()),xe(),Si("text-xl",!r.mobileView())("text-l",r.mobileView()),xe(),Ci(" ",r.assetHealthData().name,""),xe(),Kt(r.mobileView()?-1:6),xe(2),Kt(r.mobileView()?8:9),xe(2),Ne("iconComponent",r.RightArrowIconComponent)("position","right"))},dependencies:[Eu,qC],styles:[".card[_ngcontent-%COMP%]{overflow:hidden;width:19rem}.card[_ngcontent-%COMP%]:hover   .description[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%]{max-height:10rem;white-space:normal}@media (max-width: 900px){.card[_ngcontent-%COMP%]{width:12rem}lib-button[_ngcontent-%COMP%]{width:100%}}.description[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{transition:all 1s ease}.title[_ngcontent-%COMP%]{max-height:1.75rem}.description[_ngcontent-%COMP%]{max-height:1.5rem}"],changeDetection:0})}return n})();var Fre=(n,t)=>t.id;function Bre(n,t){if(n&1){let e=Dn();ge(0,"lib-asset-health-card",2),bt("navigateTo",function(){let r=gt(e).$implicit,s=Ae();return yt(s.navigateToAssetOfId.emit(r.id))})("accessAssetDetailView",function(){let r=gt(e).$implicit,s=Ae();return yt(s.accessAssetDetailViewForId.emit(r.id))}),ye()}if(n&2){let e=t.$implicit;Ne("assetHealthData",e)}}var UH=(()=>{class n{navigateToAssetOfId=nr();accessAssetDetailViewForId=nr();assetHealthData=vt.required();static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-asset-health-card-carousel"]],inputs:{assetHealthData:[1,"assetHealthData"]},outputs:{navigateToAssetOfId:"navigateToAssetOfId",accessAssetDetailViewForId:"accessAssetDetailViewForId"},decls:3,vars:0,consts:[[1,"map-carousel","max-w-full","absolute","bottom-0","px-8","pb-8","overflow-auto","flex","flex-nowrap","gap-4"],[1,"inline-block",3,"assetHealthData"],[1,"inline-block",3,"navigateTo","accessAssetDetailView","assetHealthData"]],template:function(i,r){i&1&&(ge(0,"div",0),xs(1,Bre,1,1,"lib-asset-health-card",1,Fre),ye()),i&2&&(xe(),ws(r.assetHealthData()))},dependencies:[Nt,zH],styles:[".map-carousel[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{align-self:flex-end}"],changeDetection:0})}return n})();function Vre(n,t){if(n&1&&(ge(0,"div",9)(1,"a",20)(2,"lib-button",21),ot(3," Contact Engineer "),ye()()()),n&2){let e=Ae();xe(2),Ne("iconComponent",e.EnvelopeIconComponent)("position","left")("type",e.contactEngineerButtonTypeFromStatus(e.assetInformation().healthStatus))("fullWidth",!0)}}var HH=(()=>{class n{assetInformation=vt.required();collapseInputTrigger=vt();assetInformationExpanded=nr();pageExpanded=mn(!1);constructor(){ji(()=>{this.collapseInputTrigger(),this.pageExpanded.set(!1)}),ji(()=>{this.pageExpanded()&&this.assetInformationExpanded.emit()})}bridgeRecommendationForStatus(e){switch(e){case"healthy":return"All monitored data points to a stable and healthy bridge structure. No immediate action is required, but continued regular monitoring is recommended.";case"warn":return"Certain indicators suggest a decline in structural condition. It is recommended to consult with a structural engineering office to further evaluate the situation.";case"critical":return"Critical anomalies have been detected in the structural integrity of the bridge. Immediate coordination with a structural engineering office is strongly advised to assess potential safety risks."}}getInfoTypeFromHealthStatus(e){return e==="healthy"?"info":e}healthStatusRecommendsContactEngineer(e){return e==="critical"||e==="warn"}contactEngineerButtonTypeFromStatus(e){return e==="healthy"?"warn":e}AlarmIconComponent=Nl;EnvelopeIconComponent=_C;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-asset-information-page"]],inputs:{assetInformation:[1,"assetInformation"],collapseInputTrigger:[1,"collapseInputTrigger"]},outputs:{assetInformationExpanded:"assetInformationExpanded"},decls:32,vars:14,consts:[["assetInformationPage",""],[1,"asset-information-page"],[1,"asset-information-page-container","bg-white","shadow-2xl","pointer-events-auto","rounded-lg"],["tabindex","0","role","navigation",1,"asset-information-page-header","bg-primary","w-full","cursor-pointer","flex","justify-center","items-center","gap-2",3,"click","keydown.enter"],[1,"mx-2",3,"color","iconComponent"],[1,"text-xl","font-bold","inline","content-center"],["size","medium",1,"content-center","transition-all","duration-300"],[1,"pt-4","px-4"],[3,"title","description","type"],[1,"flex","justify-center"],[1,"flex","gap-4","flex-wrap","items-start","p-4"],[1,"health-information","p-5","rounded-lg","bg-elevated-background","flex","flex-col","gap-0","items-center","w-fit","grow"],[1,"text-xl"],[1,"w-full","max-h-[170px]","aspect-[1.5/1]",3,"healthPercentage","labelFormat"],[1,"asset-information","p-5","rounded-lg","bg-elevated-background","flex","flex-col","gap-4","items-center","w-fit","grow"],[1,"asset-information-grid","grid","grid-cols-2","gap-2"],["color","secondary","text","Location"],["color","secondary","text","Construction Year"],["color","secondary","text","Material"],["color","secondary","text","Length"],["href","mailto:civil-engineering-office@irmos.com",1,"w-80","block"],[3,"iconComponent","position","type","fullWidth"]],template:function(i,r){if(i&1){let s=Dn();ge(0,"div",1,0)(2,"div",2)(3,"div",3),bt("click",function(){return gt(s),yt(r.pageExpanded.set(!r.pageExpanded()))})("keydown.enter",function(){return gt(s),yt(r.pageExpanded.set(!r.pageExpanded()))}),tt(4,"lib-badge",4),ge(5,"h3",5),ot(6,"Bridge Information"),ye(),tt(7,"lib-angle-down-icon",6),ye(),ge(8,"div",7)(9,"lib-info-box",8),It(10,Vre,4,4,"div",9),ye()(),ge(11,"div",10)(12,"div",11)(13,"h5",12),ot(14,"Health Overview"),ye(),tt(15,"lib-gauge-chart",13),ye(),ge(16,"div",14)(17,"h5",12),ot(18,"Asset Information"),ye(),ge(19,"div",15),tt(20,"lib-badge",16),ge(21,"span"),ot(22),ye(),tt(23,"lib-badge",17),ge(24,"span"),ot(25),ye(),tt(26,"lib-badge",18),ge(27,"span"),ot(28),ye(),tt(29,"lib-badge",19),ge(30,"span"),ot(31),ye()()()()()()}i&2&&(Si("expanded",r.pageExpanded()),xe(4),Ne("color",r.assetInformation().healthStatus)("iconComponent",r.AlarmIconComponent),xe(5),Ne("title","Recommended Action")("description",r.bridgeRecommendationForStatus(r.assetInformation().healthStatus))("type",r.getInfoTypeFromHealthStatus(r.assetInformation().healthStatus)),xe(),Kt(r.healthStatusRecommendsContactEngineer(r.assetInformation().healthStatus)?10:-1),xe(5),Ne("healthPercentage",r.assetInformation().healthPercentage)("labelFormat","Overall Health: {y}%"),xe(7),Yr(r.assetInformation().location),xe(3),Yr(r.assetInformation().constructionYear),xe(3),Yr(r.assetInformation().material),xe(3),Yr(r.assetInformation().length))},dependencies:[Nt,Jg,Fd,xC,Eu,qC],styles:[".asset-information-page[_ngcontent-%COMP%]{width:100%;transition:all .3s ease;position:absolute;bottom:0;padding:1rem;z-index:10;display:flex;justify-content:center;max-height:100%}.asset-information-page[_ngcontent-%COMP%]   lib-angle-down-icon[_ngcontent-%COMP%]{transform:rotate(-180deg)}.asset-information-page.expanded[_ngcontent-%COMP%]   lib-angle-down-icon[_ngcontent-%COMP%]{transform:rotate(0)}.asset-information-page.expanded[_ngcontent-%COMP%]   .asset-information-page-container[_ngcontent-%COMP%]{overflow-y:scroll}.asset-information-page[_ngcontent-%COMP%]:not(.expanded){padding:0 1rem;max-height:2.5rem;overflow:hidden}.asset-information-page-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;max-width:65rem;-ms-overflow-style:none;scrollbar-width:none}.asset-information-page-header[_ngcontent-%COMP%]{color:#fff;height:2.5rem}.asset-information-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(odd){background-color:#6b9ac4;color:#fff;padding:.25rem}"],changeDetection:0})}return n})();var BM="177",zl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Nc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},T4=0,QP=1,A4=2;var JP=1,VM=2,Fu=3,Pc=0,sa=1,Ul=2,kh=0,Pp=1,ek=2,tk=3,nk=4,D4=5,Xd=100,I4=101,R4=102,P4=103,k4=104,L4=200,N4=201,O4=202,F4=203,_M=204,bM=205,B4=206,V4=207,z4=208,U4=209,H4=210,j4=211,W4=212,G4=213,$4=214,zM=0,UM=1,HM=2,kp=3,jM=4,WM=5,GM=6,$M=7,ik=0,q4=1,X4=2,Lh=0,Y4=1,Z4=2,K4=3,Q4=4,J4=5,e5=6,t5=7,VP="attached",n5="detached",zP=300,Hp=301,jp=302,qM=303,XM=304,ob=306,Yd=1e3,Au=1001,by=1002,uo=1003,YM=1004;var Wp=1005;var na=1006,Ny=1007;var Oc=1008;var Fc=1009,rk=1010,sk=1011,Oy=1012,ZM=1013,Jd=1014,Hl=1015,Fy=1016,KM=1017,QM=1018,By=1020,ok=35902,ak=1021,lk=1022,ol=1023,xy=1026,Vy=1027,JM=1028,e1=1029,ck=1030,t1=1031;var n1=1033,ab=33776,lb=33777,cb=33778,ub=33779,i1=35840,r1=35841,s1=35842,o1=35843,a1=36196,l1=37492,c1=37496,u1=37808,h1=37809,d1=37810,f1=37811,p1=37812,m1=37813,g1=37814,y1=37815,v1=37816,_1=37817,b1=37818,x1=37819,w1=37820,S1=37821,hb=36492,C1=36494,M1=36495,uk=36283,E1=36284,T1=36285,A1=36286;var Lp=2300,Np=2301,vM=2302,UP=2400,HP=2401,jP=2402,i5=2500;var hk=0,db=1,zy=2,r5=3200,s5=3201;var dk=0,o5=1,Nh="",Us="srgb",ho="srgb-linear",k_="linear",ur="srgb";var Rp=7680;var WP=519,a5=512,l5=513,c5=514,fk=515,u5=516,h5=517,d5=518,f5=519,xM=35044;var pk="300 es",Du=2e3,L_=2001;var Iu=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){let i=this._listeners;return i===void 0?!1:i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){let i=this._listeners;if(i===void 0)return;let r=i[t];if(r!==void 0){let s=r.indexOf(e);s!==-1&&r.splice(s,1)}}dispatchEvent(t){let e=this._listeners;if(e===void 0)return;let i=e[t.type];if(i!==void 0){t.target=this;let r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}},Mo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],jH=1234567,R_=Math.PI/180,Op=180/Math.PI;function Rc(){let n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Mo[n&255]+Mo[n>>8&255]+Mo[n>>16&255]+Mo[n>>24&255]+"-"+Mo[t&255]+Mo[t>>8&255]+"-"+Mo[t>>16&15|64]+Mo[t>>24&255]+"-"+Mo[e&63|128]+Mo[e>>8&255]+"-"+Mo[e>>16&255]+Mo[e>>24&255]+Mo[i&255]+Mo[i>>8&255]+Mo[i>>16&255]+Mo[i>>24&255]).toLowerCase()}function Ii(n,t,e){return Math.max(t,Math.min(e,n))}function mk(n,t){return(n%t+t)%t}function zre(n,t,e,i,r){return i+(n-t)*(r-i)/(e-t)}function Ure(n,t,e){return n!==t?(e-n)/(t-n):0}function P_(n,t,e){return(1-e)*n+e*t}function Hre(n,t,e,i){return P_(n,t,1-Math.exp(-e*i))}function jre(n,t=1){return t-Math.abs(mk(n,t*2)-t)}function Wre(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function Gre(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function $re(n,t){return n+Math.floor(Math.random()*(t-n+1))}function qre(n,t){return n+Math.random()*(t-n)}function Xre(n){return n*(.5-Math.random())}function Yre(n){n!==void 0&&(jH=n);let t=jH+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Zre(n){return n*R_}function Kre(n){return n*Op}function Qre(n){return(n&n-1)===0&&n!==0}function Jre(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function ese(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function tse(n,t,e,i,r){let s=Math.cos,o=Math.sin,a=s(e/2),u=o(e/2),d=s((t+i)/2),g=o((t+i)/2),v=s((t-i)/2),x=o((t-i)/2),C=s((i-t)/2),A=o((i-t)/2);switch(r){case"XYX":n.set(a*g,u*v,u*x,a*d);break;case"YZY":n.set(u*x,a*g,u*v,a*d);break;case"ZXZ":n.set(u*v,u*x,a*g,a*d);break;case"XZX":n.set(a*g,u*A,u*C,a*d);break;case"YXY":n.set(u*C,a*g,u*A,a*d);break;case"ZYZ":n.set(u*A,u*C,a*g,a*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Dc(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function cr(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var fb={DEG2RAD:R_,RAD2DEG:Op,generateUUID:Rc,clamp:Ii,euclideanModulo:mk,mapLinear:zre,inverseLerp:Ure,lerp:P_,damp:Hre,pingpong:jre,smoothstep:Wre,smootherstep:Gre,randInt:$re,randFloat:qre,randFloatSpread:Xre,seededRandom:Yre,degToRad:Zre,radToDeg:Kre,isPowerOfTwo:Qre,ceilPowerOfTwo:Jre,floorPowerOfTwo:ese,setQuaternionFromProperEuler:tse,normalize:cr,denormalize:Dc},qn=class n{constructor(t=0,e=0){n.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Ii(this.x,t.x,e.x),this.y=Ii(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=Ii(this.x,t,e),this.y=Ii(this.y,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Ii(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(Ii(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let i=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*i-o*r+t.x,this.y=s*r+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},ia=class{constructor(t=0,e=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=r}static slerpFlat(t,e,i,r,s,o,a){let u=i[r+0],d=i[r+1],g=i[r+2],v=i[r+3],x=s[o+0],C=s[o+1],A=s[o+2],O=s[o+3];if(a===0){t[e+0]=u,t[e+1]=d,t[e+2]=g,t[e+3]=v;return}if(a===1){t[e+0]=x,t[e+1]=C,t[e+2]=A,t[e+3]=O;return}if(v!==O||u!==x||d!==C||g!==A){let N=1-a,T=u*x+d*C+g*A+v*O,j=T>=0?1:-1,Z=1-T*T;if(Z>Number.EPSILON){let le=Math.sqrt(Z),K=Math.atan2(le,T*j);N=Math.sin(N*K)/le,a=Math.sin(a*K)/le}let $=a*j;if(u=u*N+x*$,d=d*N+C*$,g=g*N+A*$,v=v*N+O*$,N===1-a){let le=1/Math.sqrt(u*u+d*d+g*g+v*v);u*=le,d*=le,g*=le,v*=le}}t[e]=u,t[e+1]=d,t[e+2]=g,t[e+3]=v}static multiplyQuaternionsFlat(t,e,i,r,s,o){let a=i[r],u=i[r+1],d=i[r+2],g=i[r+3],v=s[o],x=s[o+1],C=s[o+2],A=s[o+3];return t[e]=a*A+g*v+u*C-d*x,t[e+1]=u*A+g*x+d*v-a*C,t[e+2]=d*A+g*C+a*x-u*v,t[e+3]=g*A-a*v-u*x-d*C,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){let i=t._x,r=t._y,s=t._z,o=t._order,a=Math.cos,u=Math.sin,d=a(i/2),g=a(r/2),v=a(s/2),x=u(i/2),C=u(r/2),A=u(s/2);switch(o){case"XYZ":this._x=x*g*v+d*C*A,this._y=d*C*v-x*g*A,this._z=d*g*A+x*C*v,this._w=d*g*v-x*C*A;break;case"YXZ":this._x=x*g*v+d*C*A,this._y=d*C*v-x*g*A,this._z=d*g*A-x*C*v,this._w=d*g*v+x*C*A;break;case"ZXY":this._x=x*g*v-d*C*A,this._y=d*C*v+x*g*A,this._z=d*g*A+x*C*v,this._w=d*g*v-x*C*A;break;case"ZYX":this._x=x*g*v-d*C*A,this._y=d*C*v+x*g*A,this._z=d*g*A-x*C*v,this._w=d*g*v+x*C*A;break;case"YZX":this._x=x*g*v+d*C*A,this._y=d*C*v+x*g*A,this._z=d*g*A-x*C*v,this._w=d*g*v-x*C*A;break;case"XZY":this._x=x*g*v-d*C*A,this._y=d*C*v-x*g*A,this._z=d*g*A+x*C*v,this._w=d*g*v+x*C*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,i=e[0],r=e[4],s=e[8],o=e[1],a=e[5],u=e[9],d=e[2],g=e[6],v=e[10],x=i+a+v;if(x>0){let C=.5/Math.sqrt(x+1);this._w=.25/C,this._x=(g-u)*C,this._y=(s-d)*C,this._z=(o-r)*C}else if(i>a&&i>v){let C=2*Math.sqrt(1+i-a-v);this._w=(g-u)/C,this._x=.25*C,this._y=(r+o)/C,this._z=(s+d)/C}else if(a>v){let C=2*Math.sqrt(1+a-i-v);this._w=(s-d)/C,this._x=(r+o)/C,this._y=.25*C,this._z=(u+g)/C}else{let C=2*Math.sqrt(1+v-i-a);this._w=(o-r)/C,this._x=(s+d)/C,this._y=(u+g)/C,this._z=.25*C}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ii(this.dot(t),-1,1)))}rotateTowards(t,e){let i=this.angleTo(t);if(i===0)return this;let r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let i=t._x,r=t._y,s=t._z,o=t._w,a=e._x,u=e._y,d=e._z,g=e._w;return this._x=i*g+o*a+r*d-s*u,this._y=r*g+o*u+s*a-i*d,this._z=s*g+o*d+i*u-r*a,this._w=o*g-i*a-r*u-s*d,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);let i=this._x,r=this._y,s=this._z,o=this._w,a=o*t._w+i*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;let u=1-a*a;if(u<=Number.EPSILON){let C=1-e;return this._w=C*o+e*this._w,this._x=C*i+e*this._x,this._y=C*r+e*this._y,this._z=C*s+e*this._z,this.normalize(),this}let d=Math.sqrt(u),g=Math.atan2(d,a),v=Math.sin((1-e)*g)/d,x=Math.sin(e*g)/d;return this._w=o*v+this._w*x,this._x=i*v+this._x*x,this._y=r*v+this._y*x,this._z=s*v+this._z*x,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){let t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(t),r*Math.cos(t),s*Math.sin(e),s*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},Le=class n{constructor(t=0,e=0,i=0){n.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(WH.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(WH.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*r,this.y=s[1]*e+s[4]*i+s[7]*r,this.z=s[2]*e+s[5]*i+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(t){let e=this.x,i=this.y,r=this.z,s=t.x,o=t.y,a=t.z,u=t.w,d=2*(o*r-a*i),g=2*(a*e-s*r),v=2*(s*i-o*e);return this.x=e+u*d+o*v-a*g,this.y=i+u*g+a*d-s*v,this.z=r+u*v+s*g-o*d,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r,this.y=s[1]*e+s[5]*i+s[9]*r,this.z=s[2]*e+s[6]*i+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Ii(this.x,t.x,e.x),this.y=Ii(this.y,t.y,e.y),this.z=Ii(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=Ii(this.x,t,e),this.y=Ii(this.y,t,e),this.z=Ii(this.z,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Ii(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let i=t.x,r=t.y,s=t.z,o=e.x,a=e.y,u=e.z;return this.x=r*u-s*a,this.y=s*o-i*u,this.z=i*a-r*o,this}projectOnVector(t){let e=t.lengthSq();if(e===0)return this.set(0,0,0);let i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return dP.copy(this).projectOnVector(t),this.sub(dP)}reflect(t){return this.sub(dP.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(Ii(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){let r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},dP=new Le,WH=new ia,gi=class n{constructor(t,e,i,r,s,o,a,u,d){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,r,s,o,a,u,d)}set(t,e,i,r,s,o,a,u,d){let g=this.elements;return g[0]=t,g[1]=r,g[2]=a,g[3]=e,g[4]=s,g[5]=u,g[6]=i,g[7]=o,g[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,s=this.elements,o=i[0],a=i[3],u=i[6],d=i[1],g=i[4],v=i[7],x=i[2],C=i[5],A=i[8],O=r[0],N=r[3],T=r[6],j=r[1],Z=r[4],$=r[7],le=r[2],K=r[5],oe=r[8];return s[0]=o*O+a*j+u*le,s[3]=o*N+a*Z+u*K,s[6]=o*T+a*$+u*oe,s[1]=d*O+g*j+v*le,s[4]=d*N+g*Z+v*K,s[7]=d*T+g*$+v*oe,s[2]=x*O+C*j+A*le,s[5]=x*N+C*Z+A*K,s[8]=x*T+C*$+A*oe,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],d=t[7],g=t[8];return e*o*g-e*a*d-i*s*g+i*a*u+r*s*d-r*o*u}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],d=t[7],g=t[8],v=g*o-a*d,x=a*u-g*s,C=d*s-o*u,A=e*v+i*x+r*C;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);let O=1/A;return t[0]=v*O,t[1]=(r*d-g*i)*O,t[2]=(a*i-r*o)*O,t[3]=x*O,t[4]=(g*e-r*u)*O,t[5]=(r*s-a*e)*O,t[6]=C*O,t[7]=(i*u-d*e)*O,t[8]=(o*e-i*s)*O,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,s,o,a){let u=Math.cos(s),d=Math.sin(s);return this.set(i*u,i*d,-i*(u*o+d*a)+o+t,-r*d,r*u,-r*(-d*o+u*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(fP.makeScale(t,e)),this}rotate(t){return this.premultiply(fP.makeRotation(-t)),this}translate(t,e){return this.premultiply(fP.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}},fP=new gi;function gk(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function wy(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function p5(){let n=wy("canvas");return n.style.display="block",n}var GH={};function Fp(n){n in GH||(GH[n]=!0,console.warn(n))}function m5(n,t,e){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,e);break;default:i()}}setTimeout(s,e)})}function g5(n){let t=n.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function y5(n){let t=n.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}var $H=new gi().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),qH=new gi().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function nse(){let n={enabled:!0,workingColorSpace:ho,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===ur&&(r.r=Ah(r.r),r.g=Ah(r.g),r.b=Ah(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===ur&&(r.r=_y(r.r),r.g=_y(r.g),r.b=_y(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Nh?k_:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return Fp("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return Fp("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,s)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[ho]:{primaries:t,whitePoint:i,transfer:k_,toXYZ:$H,fromXYZ:qH,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Us},outputColorSpaceConfig:{drawingBufferColorSpace:Us}},[Us]:{primaries:t,whitePoint:i,transfer:ur,toXYZ:$H,fromXYZ:qH,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Us}}}),n}var Wi=nse();function Ah(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function _y(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var oy,wM=class{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{oy===void 0&&(oy=wy("canvas")),oy.width=t.width,oy.height=t.height;let r=oy.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),i=oy}return i.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=wy("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);let r=i.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Ah(s[o]/255)*255;return i.putImageData(r,0,0),e}else if(t.data){let e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(Ah(e[i]/255)*255):e[i]=Ah(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},ise=0,Sy=class{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ise++}),this.uuid=Rc(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){let e=this.data;return e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(pP(r[o].image)):s.push(pP(r[o]))}else s=pP(r);i.url=s}return e||(t.images[this.uuid]=i),i}};function pP(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?wM.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var rse=0,mP=new Le,al=(()=>{class n extends Iu{constructor(e=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Au,s=Au,o=na,a=Oc,u=ol,d=Fc,g=n.DEFAULT_ANISOTROPY,v=Nh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:rse++}),this.uuid=Rc(),this.name="",this.source=new Sy(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=g,this.format=u,this.internalFormat=null,this.type=d,this.offset=new qn(0,0),this.repeat=new qn(1,1),this.center=new qn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=v,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(mP).x}get height(){return this.source.getSize(mP).y}get depth(){return this.source.getSize(mP).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,i){this.updateRanges.push({start:e,count:i})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(let i in e){let r=e[i];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${i}' has value of undefined.`);continue}let s=this[i];if(s===void 0){console.warn(`THREE.Texture.setValues(): property '${i}' does not exist.`);continue}s&&r&&s.isVector2&&r.isVector2||s&&r&&s.isVector3&&r.isVector3||s&&r&&s.isMatrix3&&r.isMatrix3?s.copy(r):this[i]=r}}toJSON(e){let i=e===void 0||typeof e=="string";if(!i&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==zP)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Yd:e.x=e.x-Math.floor(e.x);break;case Au:e.x=e.x<0?0:1;break;case by:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Yd:e.y=e.y-Math.floor(e.y);break;case Au:e.y=e.y<0?0:1;break;case by:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=zP,n.DEFAULT_ANISOTROPY=1,n})(),rr=class n{constructor(t=0,e=0,i=0,r=1){n.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*i+o[11]*r+o[15]*s,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,s,u=t.elements,d=u[0],g=u[4],v=u[8],x=u[1],C=u[5],A=u[9],O=u[2],N=u[6],T=u[10];if(Math.abs(g-x)<.01&&Math.abs(v-O)<.01&&Math.abs(A-N)<.01){if(Math.abs(g+x)<.1&&Math.abs(v+O)<.1&&Math.abs(A+N)<.1&&Math.abs(d+C+T-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;let Z=(d+1)/2,$=(C+1)/2,le=(T+1)/2,K=(g+x)/4,oe=(v+O)/4,ue=(A+N)/4;return Z>$&&Z>le?Z<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(Z),r=K/i,s=oe/i):$>le?$<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt($),i=K/r,s=ue/r):le<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(le),i=oe/s,r=ue/s),this.set(i,r,s,e),this}let j=Math.sqrt((N-A)*(N-A)+(v-O)*(v-O)+(x-g)*(x-g));return Math.abs(j)<.001&&(j=1),this.x=(N-A)/j,this.y=(v-O)/j,this.z=(x-g)/j,this.w=Math.acos((d+C+T-1)/2),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Ii(this.x,t.x,e.x),this.y=Ii(this.y,t.y,e.y),this.z=Ii(this.z,t.z,e.z),this.w=Ii(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=Ii(this.x,t,e),this.y=Ii(this.y,t,e),this.z=Ii(this.z,t,e),this.w=Ii(this.w,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Ii(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},SM=class extends Iu{constructor(t=1,e=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:na,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=i.depth,this.scissor=new rr(0,0,t,e),this.scissorTest=!1,this.viewport=new rr(0,0,t,e);let r={width:t,height:e,depth:i.depth},s=new al(r);this.textures=[];let o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(t={}){let e={minFilter:na,generateMipmaps:!1,flipY:!1,internalFormat:null};t.mapping!==void 0&&(e.mapping=t.mapping),t.wrapS!==void 0&&(e.wrapS=t.wrapS),t.wrapT!==void 0&&(e.wrapT=t.wrapT),t.wrapR!==void 0&&(e.wrapR=t.wrapR),t.magFilter!==void 0&&(e.magFilter=t.magFilter),t.minFilter!==void 0&&(e.minFilter=t.minFilter),t.format!==void 0&&(e.format=t.format),t.type!==void 0&&(e.type=t.type),t.anisotropy!==void 0&&(e.anisotropy=t.anisotropy),t.colorSpace!==void 0&&(e.colorSpace=t.colorSpace),t.flipY!==void 0&&(e.flipY=t.flipY),t.generateMipmaps!==void 0&&(e.generateMipmaps=t.generateMipmaps),t.internalFormat!==void 0&&(e.internalFormat=t.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(e)}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=i,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,i=t.textures.length;e<i;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;let r=Object.assign({},t.textures[e].image);this.textures[e].source=new Sy(r)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Ru=class extends SM{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}},N_=class extends al{constructor(t=null,e=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=uo,this.minFilter=uo,this.wrapR=Au,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}};var CM=class extends al{constructor(t=null,e=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=uo,this.minFilter=uo,this.wrapR=Au,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var ra=class{constructor(t=new Le(1/0,1/0,1/0),e=new Le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(Ec.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(Ec.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=Ec.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let i=t.geometry;if(i!==void 0){let s=i.getAttribute("position");if(e===!0&&s!==void 0&&t.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)t.isMesh===!0?t.getVertexPosition(o,Ec):Ec.fromBufferAttribute(s,o),Ec.applyMatrix4(t.matrixWorld),this.expandByPoint(Ec);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),XC.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),XC.copy(i.boundingBox)),XC.applyMatrix4(t.matrixWorld),this.union(XC)}let r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Ec),Ec.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(S_),YC.subVectors(this.max,S_),ay.subVectors(t.a,S_),ly.subVectors(t.b,S_),cy.subVectors(t.c,S_),Ud.subVectors(ly,ay),Hd.subVectors(cy,ly),Tp.subVectors(ay,cy);let e=[0,-Ud.z,Ud.y,0,-Hd.z,Hd.y,0,-Tp.z,Tp.y,Ud.z,0,-Ud.x,Hd.z,0,-Hd.x,Tp.z,0,-Tp.x,-Ud.y,Ud.x,0,-Hd.y,Hd.x,0,-Tp.y,Tp.x,0];return!gP(e,ay,ly,cy,YC)||(e=[1,0,0,0,1,0,0,0,1],!gP(e,ay,ly,cy,YC))?!1:(ZC.crossVectors(Ud,Hd),e=[ZC.x,ZC.y,ZC.z],gP(e,ay,ly,cy,YC))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Ec).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Ec).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(xh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),xh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),xh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),xh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),xh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),xh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),xh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),xh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(xh),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}},xh=[new Le,new Le,new Le,new Le,new Le,new Le,new Le,new Le],Ec=new Le,XC=new ra,ay=new Le,ly=new Le,cy=new Le,Ud=new Le,Hd=new Le,Tp=new Le,S_=new Le,YC=new Le,ZC=new Le,Ap=new Le;function gP(n,t,e,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Ap.fromArray(n,s);let a=r.x*Math.abs(Ap.x)+r.y*Math.abs(Ap.y)+r.z*Math.abs(Ap.z),u=t.dot(Ap),d=e.dot(Ap),g=i.dot(Ap);if(Math.max(-Math.max(u,d,g),Math.min(u,d,g))>a)return!1}return!0}var sse=new ra,C_=new Le,yP=new Le,Ma=class{constructor(t=new Le,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let i=this.center;e!==void 0?i.copy(e):sse.setFromPoints(t).getCenter(i);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;C_.subVectors(t,this.center);let e=C_.lengthSq();if(e>this.radius*this.radius){let i=Math.sqrt(e),r=(i-this.radius)*.5;this.center.addScaledVector(C_,r/i),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(yP.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(C_.copy(t.center).add(yP)),this.expandByPoint(C_.copy(t.center).sub(yP))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}},wh=new Le,vP=new Le,KC=new Le,jd=new Le,_P=new Le,QC=new Le,bP=new Le,Pu=class{constructor(t=new Le,e=new Le(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,wh)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=wh.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(wh.copy(this.origin).addScaledVector(this.direction,e),wh.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){vP.copy(t).add(e).multiplyScalar(.5),KC.copy(e).sub(t).normalize(),jd.copy(this.origin).sub(vP);let s=t.distanceTo(e)*.5,o=-this.direction.dot(KC),a=jd.dot(this.direction),u=-jd.dot(KC),d=jd.lengthSq(),g=Math.abs(1-o*o),v,x,C,A;if(g>0)if(v=o*u-a,x=o*a-u,A=s*g,v>=0)if(x>=-A)if(x<=A){let O=1/g;v*=O,x*=O,C=v*(v+o*x+2*a)+x*(o*v+x+2*u)+d}else x=s,v=Math.max(0,-(o*x+a)),C=-v*v+x*(x+2*u)+d;else x=-s,v=Math.max(0,-(o*x+a)),C=-v*v+x*(x+2*u)+d;else x<=-A?(v=Math.max(0,-(-o*s+a)),x=v>0?-s:Math.min(Math.max(-s,-u),s),C=-v*v+x*(x+2*u)+d):x<=A?(v=0,x=Math.min(Math.max(-s,-u),s),C=x*(x+2*u)+d):(v=Math.max(0,-(o*s+a)),x=v>0?s:Math.min(Math.max(-s,-u),s),C=-v*v+x*(x+2*u)+d);else x=o>0?-s:s,v=Math.max(0,-(o*x+a)),C=-v*v+x*(x+2*u)+d;return i&&i.copy(this.origin).addScaledVector(this.direction,v),r&&r.copy(vP).addScaledVector(KC,x),C}intersectSphere(t,e){wh.subVectors(t.center,this.origin);let i=wh.dot(this.direction),r=wh.dot(wh)-i*i,s=t.radius*t.radius;if(r>s)return null;let o=Math.sqrt(s-r),a=i-o,u=i+o;return u<0?null:a<0?this.at(u,e):this.at(a,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){let i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,s,o,a,u,d=1/this.direction.x,g=1/this.direction.y,v=1/this.direction.z,x=this.origin;return d>=0?(i=(t.min.x-x.x)*d,r=(t.max.x-x.x)*d):(i=(t.max.x-x.x)*d,r=(t.min.x-x.x)*d),g>=0?(s=(t.min.y-x.y)*g,o=(t.max.y-x.y)*g):(s=(t.max.y-x.y)*g,o=(t.min.y-x.y)*g),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),v>=0?(a=(t.min.z-x.z)*v,u=(t.max.z-x.z)*v):(a=(t.max.z-x.z)*v,u=(t.min.z-x.z)*v),i>u||a>r)||((a>i||i!==i)&&(i=a),(u<r||r!==r)&&(r=u),r<0)?null:this.at(i>=0?i:r,e)}intersectsBox(t){return this.intersectBox(t,wh)!==null}intersectTriangle(t,e,i,r,s){_P.subVectors(e,t),QC.subVectors(i,t),bP.crossVectors(_P,QC);let o=this.direction.dot(bP),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;jd.subVectors(this.origin,t);let u=a*this.direction.dot(QC.crossVectors(jd,QC));if(u<0)return null;let d=a*this.direction.dot(_P.cross(jd));if(d<0||u+d>o)return null;let g=-a*jd.dot(bP);return g<0?null:this.at(g/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},ui=class n{constructor(t,e,i,r,s,o,a,u,d,g,v,x,C,A,O,N){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,r,s,o,a,u,d,g,v,x,C,A,O,N)}set(t,e,i,r,s,o,a,u,d,g,v,x,C,A,O,N){let T=this.elements;return T[0]=t,T[4]=e,T[8]=i,T[12]=r,T[1]=s,T[5]=o,T[9]=a,T[13]=u,T[2]=d,T[6]=g,T[10]=v,T[14]=x,T[3]=C,T[7]=A,T[11]=O,T[15]=N,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){let e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){let e=this.elements,i=t.elements,r=1/uy.setFromMatrixColumn(t,0).length(),s=1/uy.setFromMatrixColumn(t,1).length(),o=1/uy.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[7]=0,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,i=t.x,r=t.y,s=t.z,o=Math.cos(i),a=Math.sin(i),u=Math.cos(r),d=Math.sin(r),g=Math.cos(s),v=Math.sin(s);if(t.order==="XYZ"){let x=o*g,C=o*v,A=a*g,O=a*v;e[0]=u*g,e[4]=-u*v,e[8]=d,e[1]=C+A*d,e[5]=x-O*d,e[9]=-a*u,e[2]=O-x*d,e[6]=A+C*d,e[10]=o*u}else if(t.order==="YXZ"){let x=u*g,C=u*v,A=d*g,O=d*v;e[0]=x+O*a,e[4]=A*a-C,e[8]=o*d,e[1]=o*v,e[5]=o*g,e[9]=-a,e[2]=C*a-A,e[6]=O+x*a,e[10]=o*u}else if(t.order==="ZXY"){let x=u*g,C=u*v,A=d*g,O=d*v;e[0]=x-O*a,e[4]=-o*v,e[8]=A+C*a,e[1]=C+A*a,e[5]=o*g,e[9]=O-x*a,e[2]=-o*d,e[6]=a,e[10]=o*u}else if(t.order==="ZYX"){let x=o*g,C=o*v,A=a*g,O=a*v;e[0]=u*g,e[4]=A*d-C,e[8]=x*d+O,e[1]=u*v,e[5]=O*d+x,e[9]=C*d-A,e[2]=-d,e[6]=a*u,e[10]=o*u}else if(t.order==="YZX"){let x=o*u,C=o*d,A=a*u,O=a*d;e[0]=u*g,e[4]=O-x*v,e[8]=A*v+C,e[1]=v,e[5]=o*g,e[9]=-a*g,e[2]=-d*g,e[6]=C*v+A,e[10]=x-O*v}else if(t.order==="XZY"){let x=o*u,C=o*d,A=a*u,O=a*d;e[0]=u*g,e[4]=-v,e[8]=d*g,e[1]=x*v+O,e[5]=o*g,e[9]=C*v-A,e[2]=A*v-C,e[6]=a*g,e[10]=O*v+x}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(ose,t,ase)}lookAt(t,e,i){let r=this.elements;return rl.subVectors(t,e),rl.lengthSq()===0&&(rl.z=1),rl.normalize(),Wd.crossVectors(i,rl),Wd.lengthSq()===0&&(Math.abs(i.z)===1?rl.x+=1e-4:rl.z+=1e-4,rl.normalize(),Wd.crossVectors(i,rl)),Wd.normalize(),JC.crossVectors(rl,Wd),r[0]=Wd.x,r[4]=JC.x,r[8]=rl.x,r[1]=Wd.y,r[5]=JC.y,r[9]=rl.y,r[2]=Wd.z,r[6]=JC.z,r[10]=rl.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,s=this.elements,o=i[0],a=i[4],u=i[8],d=i[12],g=i[1],v=i[5],x=i[9],C=i[13],A=i[2],O=i[6],N=i[10],T=i[14],j=i[3],Z=i[7],$=i[11],le=i[15],K=r[0],oe=r[4],ue=r[8],te=r[12],V=r[1],se=r[5],we=r[9],de=r[13],je=r[2],Ue=r[6],he=r[10],Pe=r[14],me=r[3],$e=r[7],nt=r[11],xt=r[15];return s[0]=o*K+a*V+u*je+d*me,s[4]=o*oe+a*se+u*Ue+d*$e,s[8]=o*ue+a*we+u*he+d*nt,s[12]=o*te+a*de+u*Pe+d*xt,s[1]=g*K+v*V+x*je+C*me,s[5]=g*oe+v*se+x*Ue+C*$e,s[9]=g*ue+v*we+x*he+C*nt,s[13]=g*te+v*de+x*Pe+C*xt,s[2]=A*K+O*V+N*je+T*me,s[6]=A*oe+O*se+N*Ue+T*$e,s[10]=A*ue+O*we+N*he+T*nt,s[14]=A*te+O*de+N*Pe+T*xt,s[3]=j*K+Z*V+$*je+le*me,s[7]=j*oe+Z*se+$*Ue+le*$e,s[11]=j*ue+Z*we+$*he+le*nt,s[15]=j*te+Z*de+$*Pe+le*xt,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[4],r=t[8],s=t[12],o=t[1],a=t[5],u=t[9],d=t[13],g=t[2],v=t[6],x=t[10],C=t[14],A=t[3],O=t[7],N=t[11],T=t[15];return A*(+s*u*v-r*d*v-s*a*x+i*d*x+r*a*C-i*u*C)+O*(+e*u*C-e*d*x+s*o*x-r*o*C+r*d*g-s*u*g)+N*(+e*d*v-e*a*C-s*o*v+i*o*C+s*a*g-i*d*g)+T*(-r*a*g-e*u*v+e*a*x+r*o*v-i*o*x+i*u*g)}transpose(){let t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){let r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],d=t[7],g=t[8],v=t[9],x=t[10],C=t[11],A=t[12],O=t[13],N=t[14],T=t[15],j=v*N*d-O*x*d+O*u*C-a*N*C-v*u*T+a*x*T,Z=A*x*d-g*N*d-A*u*C+o*N*C+g*u*T-o*x*T,$=g*O*d-A*v*d+A*a*C-o*O*C-g*a*T+o*v*T,le=A*v*u-g*O*u-A*a*x+o*O*x+g*a*N-o*v*N,K=e*j+i*Z+r*$+s*le;if(K===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let oe=1/K;return t[0]=j*oe,t[1]=(O*x*s-v*N*s-O*r*C+i*N*C+v*r*T-i*x*T)*oe,t[2]=(a*N*s-O*u*s+O*r*d-i*N*d-a*r*T+i*u*T)*oe,t[3]=(v*u*s-a*x*s-v*r*d+i*x*d+a*r*C-i*u*C)*oe,t[4]=Z*oe,t[5]=(g*N*s-A*x*s+A*r*C-e*N*C-g*r*T+e*x*T)*oe,t[6]=(A*u*s-o*N*s-A*r*d+e*N*d+o*r*T-e*u*T)*oe,t[7]=(o*x*s-g*u*s+g*r*d-e*x*d-o*r*C+e*u*C)*oe,t[8]=$*oe,t[9]=(A*v*s-g*O*s-A*i*C+e*O*C+g*i*T-e*v*T)*oe,t[10]=(o*O*s-A*a*s+A*i*d-e*O*d-o*i*T+e*a*T)*oe,t[11]=(g*a*s-o*v*s-g*i*d+e*v*d+o*i*C-e*a*C)*oe,t[12]=le*oe,t[13]=(g*O*r-A*v*r+A*i*x-e*O*x-g*i*N+e*v*N)*oe,t[14]=(A*a*r-o*O*r-A*i*u+e*O*u+o*i*N-e*a*N)*oe,t[15]=(o*v*r-g*a*r+g*i*u-e*v*u-o*i*x+e*a*x)*oe,this}scale(t){let e=this.elements,i=t.x,r=t.y,s=t.z;return e[0]*=i,e[4]*=r,e[8]*=s,e[1]*=i,e[5]*=r,e[9]*=s,e[2]*=i,e[6]*=r,e[10]*=s,e[3]*=i,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let i=Math.cos(e),r=Math.sin(e),s=1-i,o=t.x,a=t.y,u=t.z,d=s*o,g=s*a;return this.set(d*o+i,d*a-r*u,d*u+r*a,0,d*a+r*u,g*a+i,g*u-r*o,0,d*u-r*a,g*u+r*o,s*u*u+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,s,o){return this.set(1,i,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){let r=this.elements,s=e._x,o=e._y,a=e._z,u=e._w,d=s+s,g=o+o,v=a+a,x=s*d,C=s*g,A=s*v,O=o*g,N=o*v,T=a*v,j=u*d,Z=u*g,$=u*v,le=i.x,K=i.y,oe=i.z;return r[0]=(1-(O+T))*le,r[1]=(C+$)*le,r[2]=(A-Z)*le,r[3]=0,r[4]=(C-$)*K,r[5]=(1-(x+T))*K,r[6]=(N+j)*K,r[7]=0,r[8]=(A+Z)*oe,r[9]=(N-j)*oe,r[10]=(1-(x+O))*oe,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){let r=this.elements,s=uy.set(r[0],r[1],r[2]).length(),o=uy.set(r[4],r[5],r[6]).length(),a=uy.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],Tc.copy(this);let d=1/s,g=1/o,v=1/a;return Tc.elements[0]*=d,Tc.elements[1]*=d,Tc.elements[2]*=d,Tc.elements[4]*=g,Tc.elements[5]*=g,Tc.elements[6]*=g,Tc.elements[8]*=v,Tc.elements[9]*=v,Tc.elements[10]*=v,e.setFromRotationMatrix(Tc),i.x=s,i.y=o,i.z=a,this}makePerspective(t,e,i,r,s,o,a=Du){let u=this.elements,d=2*s/(e-t),g=2*s/(i-r),v=(e+t)/(e-t),x=(i+r)/(i-r),C,A;if(a===Du)C=-(o+s)/(o-s),A=-2*o*s/(o-s);else if(a===L_)C=-o/(o-s),A=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return u[0]=d,u[4]=0,u[8]=v,u[12]=0,u[1]=0,u[5]=g,u[9]=x,u[13]=0,u[2]=0,u[6]=0,u[10]=C,u[14]=A,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(t,e,i,r,s,o,a=Du){let u=this.elements,d=1/(e-t),g=1/(i-r),v=1/(o-s),x=(e+t)*d,C=(i+r)*g,A,O;if(a===Du)A=(o+s)*v,O=-2*v;else if(a===L_)A=s*v,O=-1*v;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return u[0]=2*d,u[4]=0,u[8]=0,u[12]=-x,u[1]=0,u[5]=2*g,u[9]=0,u[13]=-C,u[2]=0,u[6]=0,u[10]=O,u[14]=-A,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},uy=new Le,Tc=new ui,ose=new Le(0,0,0),ase=new Le(1,1,1),Wd=new Le,JC=new Le,rl=new Le,XH=new ui,YH=new ia,Zd=(()=>{class n{constructor(e=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,r,s=this._order){return this._x=e,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,r=!0){let s=e.elements,o=s[0],a=s[4],u=s[8],d=s[1],g=s[5],v=s[9],x=s[2],C=s[6],A=s[10];switch(i){case"XYZ":this._y=Math.asin(Ii(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-v,A),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(C,g),this._z=0);break;case"YXZ":this._x=Math.asin(-Ii(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(u,A),this._z=Math.atan2(d,g)):(this._y=Math.atan2(-x,o),this._z=0);break;case"ZXY":this._x=Math.asin(Ii(C,-1,1)),Math.abs(C)<.9999999?(this._y=Math.atan2(-x,A),this._z=Math.atan2(-a,g)):(this._y=0,this._z=Math.atan2(d,o));break;case"ZYX":this._y=Math.asin(-Ii(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(C,A),this._z=Math.atan2(d,o)):(this._x=0,this._z=Math.atan2(-a,g));break;case"YZX":this._z=Math.asin(Ii(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-v,g),this._y=Math.atan2(-x,o)):(this._x=0,this._y=Math.atan2(u,A));break;case"XZY":this._z=Math.asin(-Ii(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(C,g),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-v,A),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,i,r){return XH.makeRotationFromQuaternion(e),this.setFromRotationMatrix(XH,i,r)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return YH.setFromEuler(this),this.setFromQuaternion(YH,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),Cy=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},lse=0,ZH=new Le,hy=new ia,Sh=new ui,eM=new Le,M_=new Le,cse=new Le,use=new ia,KH=new Le(1,0,0),QH=new Le(0,1,0),JH=new Le(0,0,1),e4={type:"added"},hse={type:"removed"},dy={type:"childadded",child:null},xP={type:"childremoved",child:null},eo=(()=>{class n extends Iu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:lse++}),this.uuid=Rc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let e=new Le,i=new Zd,r=new ia,s=new Le(1,1,1);function o(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new ui},normalMatrix:{value:new gi}}),this.matrix=new ui,this.matrixWorld=new ui,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Cy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return hy.setFromAxisAngle(e,i),this.quaternion.multiply(hy),this}rotateOnWorldAxis(e,i){return hy.setFromAxisAngle(e,i),this.quaternion.premultiply(hy),this}rotateX(e){return this.rotateOnAxis(KH,e)}rotateY(e){return this.rotateOnAxis(QH,e)}rotateZ(e){return this.rotateOnAxis(JH,e)}translateOnAxis(e,i){return ZH.copy(e).applyQuaternion(this.quaternion),this.position.add(ZH.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(KH,e)}translateY(e){return this.translateOnAxis(QH,e)}translateZ(e){return this.translateOnAxis(JH,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Sh.copy(this.matrixWorld).invert())}lookAt(e,i,r){e.isVector3?eM.copy(e):eM.set(e,i,r);let s=this.parent;this.updateWorldMatrix(!0,!1),M_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sh.lookAt(M_,eM,this.up):Sh.lookAt(eM,M_,this.up),this.quaternion.setFromRotationMatrix(Sh),s&&(Sh.extractRotation(s.matrixWorld),hy.setFromRotationMatrix(Sh),this.quaternion.premultiply(hy.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(e4),dy.child=e,this.dispatchEvent(dy),dy.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(e);return i!==-1&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(hse),xP.child=e,this.dispatchEvent(xP),xP.child=null),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Sh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Sh.multiply(e.parent.matrixWorld)),e.applyMatrix4(Sh),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(e4),dy.child=e,this.dispatchEvent(dy),dy.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let r=0,s=this.children.length;r<s;r++){let a=this.children[r].getObjectByProperty(e,i);if(a!==void 0)return a}}getObjectsByProperty(e,i,r=[]){this[e]===i&&r.push(this);let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(e,i,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(M_,e,cse),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(M_,use,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(e)}traverseAncestors(e){let i=this.parent;i!==null&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(e)}updateWorldMatrix(e,i){let r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(e){let i=e===void 0||typeof e=="string",r={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});let s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(u=>Mn(Je({},u),{boundingBox:u.boundingBox?u.boundingBox.toJSON():void 0,boundingSphere:u.boundingSphere?u.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(u=>Je({},u)),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(e),s.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function o(u,d){return u[d.uuid]===void 0&&(u[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);let u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){let d=u.shapes;if(Array.isArray(d))for(let g=0,v=d.length;g<v;g++){let x=d[g];o(e.shapes,x)}else o(e.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let u=[];for(let d=0,g=this.material.length;d<g;d++)u.push(o(e.materials,this.material[d]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){let d=this.animations[u];s.animations.push(o(e.animations,d))}}if(i){let u=a(e.geometries),d=a(e.materials),g=a(e.textures),v=a(e.images),x=a(e.shapes),C=a(e.skeletons),A=a(e.animations),O=a(e.nodes);u.length>0&&(r.geometries=u),d.length>0&&(r.materials=d),g.length>0&&(r.textures=g),v.length>0&&(r.images=v),x.length>0&&(r.shapes=x),C.length>0&&(r.skeletons=C),A.length>0&&(r.animations=A),O.length>0&&(r.nodes=O)}return r.object=s,r;function a(u){let d=[];for(let g in u){let v=u[g];delete v.metadata,d.push(v)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),i===!0)for(let r=0;r<e.children.length;r++){let s=e.children[r];this.add(s.clone())}return this}}return n.DEFAULT_UP=new Le(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),Ac=new Le,Ch=new Le,wP=new Le,Mh=new Le,fy=new Le,py=new Le,t4=new Le,SP=new Le,CP=new Le,MP=new Le,EP=new rr,TP=new rr,AP=new rr,qd=class n{constructor(t=new Le,e=new Le,i=new Le){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),Ac.subVectors(t,e),r.cross(Ac);let s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,i,r,s){Ac.subVectors(r,e),Ch.subVectors(i,e),wP.subVectors(t,e);let o=Ac.dot(Ac),a=Ac.dot(Ch),u=Ac.dot(wP),d=Ch.dot(Ch),g=Ch.dot(wP),v=o*d-a*a;if(v===0)return s.set(0,0,0),null;let x=1/v,C=(d*u-a*g)*x,A=(o*g-a*u)*x;return s.set(1-C-A,A,C)}static containsPoint(t,e,i,r){return this.getBarycoord(t,e,i,r,Mh)===null?!1:Mh.x>=0&&Mh.y>=0&&Mh.x+Mh.y<=1}static getInterpolation(t,e,i,r,s,o,a,u){return this.getBarycoord(t,e,i,r,Mh)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,Mh.x),u.addScaledVector(o,Mh.y),u.addScaledVector(a,Mh.z),u)}static getInterpolatedAttribute(t,e,i,r,s,o){return EP.setScalar(0),TP.setScalar(0),AP.setScalar(0),EP.fromBufferAttribute(t,e),TP.fromBufferAttribute(t,i),AP.fromBufferAttribute(t,r),o.setScalar(0),o.addScaledVector(EP,s.x),o.addScaledVector(TP,s.y),o.addScaledVector(AP,s.z),o}static isFrontFacing(t,e,i,r){return Ac.subVectors(i,e),Ch.subVectors(t,e),Ac.cross(Ch).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Ac.subVectors(this.c,this.b),Ch.subVectors(this.a,this.b),Ac.cross(Ch).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return n.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return n.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,r,s){return n.getInterpolation(t,this.a,this.b,this.c,e,i,r,s)}containsPoint(t){return n.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return n.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let i=this.a,r=this.b,s=this.c,o,a;fy.subVectors(r,i),py.subVectors(s,i),SP.subVectors(t,i);let u=fy.dot(SP),d=py.dot(SP);if(u<=0&&d<=0)return e.copy(i);CP.subVectors(t,r);let g=fy.dot(CP),v=py.dot(CP);if(g>=0&&v<=g)return e.copy(r);let x=u*v-g*d;if(x<=0&&u>=0&&g<=0)return o=u/(u-g),e.copy(i).addScaledVector(fy,o);MP.subVectors(t,s);let C=fy.dot(MP),A=py.dot(MP);if(A>=0&&C<=A)return e.copy(s);let O=C*d-u*A;if(O<=0&&d>=0&&A<=0)return a=d/(d-A),e.copy(i).addScaledVector(py,a);let N=g*A-C*v;if(N<=0&&v-g>=0&&C-A>=0)return t4.subVectors(s,r),a=(v-g)/(v-g+(C-A)),e.copy(r).addScaledVector(t4,a);let T=1/(N+O+x);return o=O*T,a=x*T,e.copy(i).addScaledVector(fy,o).addScaledVector(py,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},v5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Gd={h:0,s:0,l:0},tM={h:0,s:0,l:0};function DP(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}var kn=class{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){let r=t;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Us){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Wi.colorSpaceToWorking(this,e),this}setRGB(t,e,i,r=Wi.workingColorSpace){return this.r=t,this.g=e,this.b=i,Wi.colorSpaceToWorking(this,r),this}setHSL(t,e,i,r=Wi.workingColorSpace){if(t=mk(t,1),e=Ii(e,0,1),i=Ii(i,0,1),e===0)this.r=this.g=this.b=i;else{let s=i<=.5?i*(1+e):i+e-i*e,o=2*i-s;this.r=DP(o,s,t+1/3),this.g=DP(o,s,t),this.b=DP(o,s,t-1/3)}return Wi.colorSpaceToWorking(this,r),this}setStyle(t,e=Us){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let s,o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,e);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,e);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){let s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,e);if(o===6)return this.setHex(parseInt(s,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Us){let i=v5[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ah(t.r),this.g=Ah(t.g),this.b=Ah(t.b),this}copyLinearToSRGB(t){return this.r=_y(t.r),this.g=_y(t.g),this.b=_y(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Us){return Wi.workingToColorSpace(Eo.copy(this),t),Math.round(Ii(Eo.r*255,0,255))*65536+Math.round(Ii(Eo.g*255,0,255))*256+Math.round(Ii(Eo.b*255,0,255))}getHexString(t=Us){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Wi.workingColorSpace){Wi.workingToColorSpace(Eo.copy(this),e);let i=Eo.r,r=Eo.g,s=Eo.b,o=Math.max(i,r,s),a=Math.min(i,r,s),u,d,g=(a+o)/2;if(a===o)u=0,d=0;else{let v=o-a;switch(d=g<=.5?v/(o+a):v/(2-o-a),o){case i:u=(r-s)/v+(r<s?6:0);break;case r:u=(s-i)/v+2;break;case s:u=(i-r)/v+4;break}u/=6}return t.h=u,t.s=d,t.l=g,t}getRGB(t,e=Wi.workingColorSpace){return Wi.workingToColorSpace(Eo.copy(this),e),t.r=Eo.r,t.g=Eo.g,t.b=Eo.b,t}getStyle(t=Us){Wi.workingToColorSpace(Eo.copy(this),t);let e=Eo.r,i=Eo.g,r=Eo.b;return t!==Us?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(t,e,i){return this.getHSL(Gd),this.setHSL(Gd.h+t,Gd.s+e,Gd.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Gd),t.getHSL(tM);let i=P_(Gd.h,tM.h,e),r=P_(Gd.s,tM.s,e),s=P_(Gd.l,tM.l,e);return this.setHSL(i,r,s),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let e=this.r,i=this.g,r=this.b,s=t.elements;return this.r=s[0]*e+s[3]*i+s[6]*r,this.g=s[1]*e+s[4]*i+s[7]*r,this.b=s[2]*e+s[5]*i+s[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Eo=new kn;kn.NAMES=v5;var dse=0,Ea=class extends Iu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:dse++}),this.uuid=Rc(),this.name="",this.type="Material",this.blending=Pp,this.side=Pc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=_M,this.blendDst=bM,this.blendEquation=Xd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new kn(0,0,0),this.blendAlpha=0,this.depthFunc=kp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=WP,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Rp,this.stencilZFail=Rp,this.stencilZPass=Rp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}let r=this[e];if(r===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Pp&&(i.blending=this.blending),this.side!==Pc&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==_M&&(i.blendSrc=this.blendSrc),this.blendDst!==bM&&(i.blendDst=this.blendDst),this.blendEquation!==Xd&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==kp&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==WP&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Rp&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Rp&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Rp&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){let o=[];for(let a in s){let u=s[a];delete u.metadata,o.push(u)}return o}if(e){let s=r(t.textures),o=r(t.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,i=null;if(e!==null){let r=e.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=e[s].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}},kc=class extends Ea{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new kn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Zd,this.combine=ik,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}};var Ms=new Le,nM=new qn,fse=0,Ts=class{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:fse++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=xM,this.updateRanges=[],this.gpuType=Hl,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)nM.fromBufferAttribute(this,e),nM.applyMatrix3(t),this.setXY(e,nM.x,nM.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)Ms.fromBufferAttribute(this,e),Ms.applyMatrix3(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)Ms.fromBufferAttribute(this,e),Ms.applyMatrix4(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Ms.fromBufferAttribute(this,e),Ms.applyNormalMatrix(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Ms.fromBufferAttribute(this,e),Ms.transformDirection(t),this.setXYZ(e,Ms.x,Ms.y,Ms.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=Dc(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=cr(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Dc(e,this.array)),e}setX(t,e){return this.normalized&&(e=cr(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Dc(e,this.array)),e}setY(t,e){return this.normalized&&(e=cr(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Dc(e,this.array)),e}setZ(t,e){return this.normalized&&(e=cr(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Dc(e,this.array)),e}setW(t,e){return this.normalized&&(e=cr(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=cr(e,this.array),i=cr(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=cr(e,this.array),i=cr(i,this.array),r=cr(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,s){return t*=this.itemSize,this.normalized&&(e=cr(e,this.array),i=cr(i,this.array),r=cr(r,this.array),s=cr(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==xM&&(t.usage=this.usage),t}};var O_=class extends Ts{constructor(t,e,i){super(new Uint16Array(t),e,i)}};var F_=class extends Ts{constructor(t,e,i){super(new Uint32Array(t),e,i)}};var To=class extends Ts{constructor(t,e,i){super(new Float32Array(t),e,i)}},pse=0,Bl=new ui,IP=new eo,my=new Le,sl=new ra,E_=new ra,Js=new Le,Ta=class n extends Iu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:pse++}),this.uuid=Rc(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(gk(t)?F_:O_)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let s=new gi().getNormalMatrix(t);i.applyNormalMatrix(s),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Bl.makeRotationFromQuaternion(t),this.applyMatrix4(Bl),this}rotateX(t){return Bl.makeRotationX(t),this.applyMatrix4(Bl),this}rotateY(t){return Bl.makeRotationY(t),this.applyMatrix4(Bl),this}rotateZ(t){return Bl.makeRotationZ(t),this.applyMatrix4(Bl),this}translate(t,e,i){return Bl.makeTranslation(t,e,i),this.applyMatrix4(Bl),this}scale(t,e,i){return Bl.makeScale(t,e,i),this.applyMatrix4(Bl),this}lookAt(t){return IP.lookAt(t),IP.updateMatrix(),this.applyMatrix4(IP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(my).negate(),this.translate(my.x,my.y,my.z),this}setFromPoints(t){let e=this.getAttribute("position");if(e===void 0){let i=[];for(let r=0,s=t.length;r<s;r++){let o=t[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new To(i,3))}else{let i=Math.min(t.length,e.count);for(let r=0;r<i;r++){let s=t[r];e.setXYZ(r,s.x,s.y,s.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ra);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Le(-1/0,-1/0,-1/0),new Le(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,r=e.length;i<r;i++){let s=e[i];sl.setFromBufferAttribute(s),this.morphTargetsRelative?(Js.addVectors(this.boundingBox.min,sl.min),this.boundingBox.expandByPoint(Js),Js.addVectors(this.boundingBox.max,sl.max),this.boundingBox.expandByPoint(Js)):(this.boundingBox.expandByPoint(sl.min),this.boundingBox.expandByPoint(sl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ma);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Le,1/0);return}if(t){let i=this.boundingSphere.center;if(sl.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++){let a=e[s];E_.setFromBufferAttribute(a),this.morphTargetsRelative?(Js.addVectors(sl.min,E_.min),sl.expandByPoint(Js),Js.addVectors(sl.max,E_.max),sl.expandByPoint(Js)):(sl.expandByPoint(E_.min),sl.expandByPoint(E_.max))}sl.getCenter(i);let r=0;for(let s=0,o=t.count;s<o;s++)Js.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(Js));if(e)for(let s=0,o=e.length;s<o;s++){let a=e[s],u=this.morphTargetsRelative;for(let d=0,g=a.count;d<g;d++)Js.fromBufferAttribute(a,d),u&&(my.fromBufferAttribute(t,d),Js.add(my)),r=Math.max(r,i.distanceToSquared(Js))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.position,r=e.normal,s=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ts(new Float32Array(4*i.count),4));let o=this.getAttribute("tangent"),a=[],u=[];for(let ue=0;ue<i.count;ue++)a[ue]=new Le,u[ue]=new Le;let d=new Le,g=new Le,v=new Le,x=new qn,C=new qn,A=new qn,O=new Le,N=new Le;function T(ue,te,V){d.fromBufferAttribute(i,ue),g.fromBufferAttribute(i,te),v.fromBufferAttribute(i,V),x.fromBufferAttribute(s,ue),C.fromBufferAttribute(s,te),A.fromBufferAttribute(s,V),g.sub(d),v.sub(d),C.sub(x),A.sub(x);let se=1/(C.x*A.y-A.x*C.y);isFinite(se)&&(O.copy(g).multiplyScalar(A.y).addScaledVector(v,-C.y).multiplyScalar(se),N.copy(v).multiplyScalar(C.x).addScaledVector(g,-A.x).multiplyScalar(se),a[ue].add(O),a[te].add(O),a[V].add(O),u[ue].add(N),u[te].add(N),u[V].add(N))}let j=this.groups;j.length===0&&(j=[{start:0,count:t.count}]);for(let ue=0,te=j.length;ue<te;++ue){let V=j[ue],se=V.start,we=V.count;for(let de=se,je=se+we;de<je;de+=3)T(t.getX(de+0),t.getX(de+1),t.getX(de+2))}let Z=new Le,$=new Le,le=new Le,K=new Le;function oe(ue){le.fromBufferAttribute(r,ue),K.copy(le);let te=a[ue];Z.copy(te),Z.sub(le.multiplyScalar(le.dot(te))).normalize(),$.crossVectors(K,te);let se=$.dot(u[ue])<0?-1:1;o.setXYZW(ue,Z.x,Z.y,Z.z,se)}for(let ue=0,te=j.length;ue<te;++ue){let V=j[ue],se=V.start,we=V.count;for(let de=se,je=se+we;de<je;de+=3)oe(t.getX(de+0)),oe(t.getX(de+1)),oe(t.getX(de+2))}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ts(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let x=0,C=i.count;x<C;x++)i.setXYZ(x,0,0,0);let r=new Le,s=new Le,o=new Le,a=new Le,u=new Le,d=new Le,g=new Le,v=new Le;if(t)for(let x=0,C=t.count;x<C;x+=3){let A=t.getX(x+0),O=t.getX(x+1),N=t.getX(x+2);r.fromBufferAttribute(e,A),s.fromBufferAttribute(e,O),o.fromBufferAttribute(e,N),g.subVectors(o,s),v.subVectors(r,s),g.cross(v),a.fromBufferAttribute(i,A),u.fromBufferAttribute(i,O),d.fromBufferAttribute(i,N),a.add(g),u.add(g),d.add(g),i.setXYZ(A,a.x,a.y,a.z),i.setXYZ(O,u.x,u.y,u.z),i.setXYZ(N,d.x,d.y,d.z)}else for(let x=0,C=e.count;x<C;x+=3)r.fromBufferAttribute(e,x+0),s.fromBufferAttribute(e,x+1),o.fromBufferAttribute(e,x+2),g.subVectors(o,s),v.subVectors(r,s),g.cross(v),i.setXYZ(x+0,g.x,g.y,g.z),i.setXYZ(x+1,g.x,g.y,g.z),i.setXYZ(x+2,g.x,g.y,g.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Js.fromBufferAttribute(t,e),Js.normalize(),t.setXYZ(e,Js.x,Js.y,Js.z)}toNonIndexed(){function t(a,u){let d=a.array,g=a.itemSize,v=a.normalized,x=new d.constructor(u.length*g),C=0,A=0;for(let O=0,N=u.length;O<N;O++){a.isInterleavedBufferAttribute?C=u[O]*a.data.stride+a.offset:C=u[O]*g;for(let T=0;T<g;T++)x[A++]=d[C++]}return new Ts(x,g,v)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let e=new n,i=this.index.array,r=this.attributes;for(let a in r){let u=r[a],d=t(u,i);e.setAttribute(a,d)}let s=this.morphAttributes;for(let a in s){let u=[],d=s[a];for(let g=0,v=d.length;g<v;g++){let x=d[g],C=t(x,i);u.push(C)}e.morphAttributes[a]=u}e.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let a=0,u=o.length;a<u;a++){let d=o[a];e.addGroup(d.start,d.count,d.materialIndex)}return e}toJSON(){let t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){let u=this.parameters;for(let d in u)u[d]!==void 0&&(t[d]=u[d]);return t}t.data={attributes:{}};let e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let i=this.attributes;for(let u in i){let d=i[u];t.data.attributes[u]=d.toJSON(t.data)}let r={},s=!1;for(let u in this.morphAttributes){let d=this.morphAttributes[u],g=[];for(let v=0,x=d.length;v<x;v++){let C=d[v];g.push(C.toJSON(t.data))}g.length>0&&(r[u]=g,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return a!==null&&(t.data.boundingSphere=a.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let i=t.index;i!==null&&this.setIndex(i.clone());let r=t.attributes;for(let d in r){let g=r[d];this.setAttribute(d,g.clone(e))}let s=t.morphAttributes;for(let d in s){let g=[],v=s[d];for(let x=0,C=v.length;x<C;x++)g.push(v[x].clone(e));this.morphAttributes[d]=g}this.morphTargetsRelative=t.morphTargetsRelative;let o=t.groups;for(let d=0,g=o.length;d<g;d++){let v=o[d];this.addGroup(v.start,v.count,v.materialIndex)}let a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());let u=t.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},n4=new ui,Dp=new Pu,iM=new Ma,i4=new Le,rM=new Le,sM=new Le,oM=new Le,RP=new Le,aM=new Le,r4=new Le,lM=new Le,As=class extends eo{constructor(t=new Ta,e=new kc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(t,e){let i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;e.fromBufferAttribute(r,t);let a=this.morphTargetInfluences;if(s&&a){aM.set(0,0,0);for(let u=0,d=s.length;u<d;u++){let g=a[u],v=s[u];g!==0&&(RP.fromBufferAttribute(v,t),o?aM.addScaledVector(RP,g):aM.addScaledVector(RP.sub(e),g))}e.add(aM)}return e}raycast(t,e){let i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),iM.copy(i.boundingSphere),iM.applyMatrix4(s),Dp.copy(t.ray).recast(t.near),!(iM.containsPoint(Dp.origin)===!1&&(Dp.intersectSphere(iM,i4)===null||Dp.origin.distanceToSquared(i4)>(t.far-t.near)**2))&&(n4.copy(s).invert(),Dp.copy(t.ray).applyMatrix4(n4),!(i.boundingBox!==null&&Dp.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,Dp)))}_computeIntersections(t,e,i){let r,s=this.geometry,o=this.material,a=s.index,u=s.attributes.position,d=s.attributes.uv,g=s.attributes.uv1,v=s.attributes.normal,x=s.groups,C=s.drawRange;if(a!==null)if(Array.isArray(o))for(let A=0,O=x.length;A<O;A++){let N=x[A],T=o[N.materialIndex],j=Math.max(N.start,C.start),Z=Math.min(a.count,Math.min(N.start+N.count,C.start+C.count));for(let $=j,le=Z;$<le;$+=3){let K=a.getX($),oe=a.getX($+1),ue=a.getX($+2);r=cM(this,T,t,i,d,g,v,K,oe,ue),r&&(r.faceIndex=Math.floor($/3),r.face.materialIndex=N.materialIndex,e.push(r))}}else{let A=Math.max(0,C.start),O=Math.min(a.count,C.start+C.count);for(let N=A,T=O;N<T;N+=3){let j=a.getX(N),Z=a.getX(N+1),$=a.getX(N+2);r=cM(this,o,t,i,d,g,v,j,Z,$),r&&(r.faceIndex=Math.floor(N/3),e.push(r))}}else if(u!==void 0)if(Array.isArray(o))for(let A=0,O=x.length;A<O;A++){let N=x[A],T=o[N.materialIndex],j=Math.max(N.start,C.start),Z=Math.min(u.count,Math.min(N.start+N.count,C.start+C.count));for(let $=j,le=Z;$<le;$+=3){let K=$,oe=$+1,ue=$+2;r=cM(this,T,t,i,d,g,v,K,oe,ue),r&&(r.faceIndex=Math.floor($/3),r.face.materialIndex=N.materialIndex,e.push(r))}}else{let A=Math.max(0,C.start),O=Math.min(u.count,C.start+C.count);for(let N=A,T=O;N<T;N+=3){let j=N,Z=N+1,$=N+2;r=cM(this,o,t,i,d,g,v,j,Z,$),r&&(r.faceIndex=Math.floor(N/3),e.push(r))}}}};function mse(n,t,e,i,r,s,o,a){let u;if(t.side===sa?u=i.intersectTriangle(o,s,r,!0,a):u=i.intersectTriangle(r,s,o,t.side===Pc,a),u===null)return null;lM.copy(a),lM.applyMatrix4(n.matrixWorld);let d=e.ray.origin.distanceTo(lM);return d<e.near||d>e.far?null:{distance:d,point:lM.clone(),object:n}}function cM(n,t,e,i,r,s,o,a,u,d){n.getVertexPosition(a,rM),n.getVertexPosition(u,sM),n.getVertexPosition(d,oM);let g=mse(n,t,e,i,rM,sM,oM,r4);if(g){let v=new Le;qd.getBarycoord(r4,rM,sM,oM,v),r&&(g.uv=qd.getInterpolatedAttribute(r,a,u,d,v,new qn)),s&&(g.uv1=qd.getInterpolatedAttribute(s,a,u,d,v,new qn)),o&&(g.normal=qd.getInterpolatedAttribute(o,a,u,d,v,new Le),g.normal.dot(i.direction)>0&&g.normal.multiplyScalar(-1));let x={a,b:u,c:d,normal:new Le,materialIndex:0};qd.getNormal(rM,sM,oM,x.normal),g.face=x,g.barycoord=v}return g}var Kd=class n extends Ta{constructor(t=1,e=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};let a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);let u=[],d=[],g=[],v=[],x=0,C=0;A("z","y","x",-1,-1,i,e,t,o,s,0),A("z","y","x",1,-1,i,e,-t,o,s,1),A("x","z","y",1,1,t,i,e,r,o,2),A("x","z","y",1,-1,t,i,-e,r,o,3),A("x","y","z",1,-1,t,e,i,r,s,4),A("x","y","z",-1,-1,t,e,-i,r,s,5),this.setIndex(u),this.setAttribute("position",new To(d,3)),this.setAttribute("normal",new To(g,3)),this.setAttribute("uv",new To(v,2));function A(O,N,T,j,Z,$,le,K,oe,ue,te){let V=$/oe,se=le/ue,we=$/2,de=le/2,je=K/2,Ue=oe+1,he=ue+1,Pe=0,me=0,$e=new Le;for(let nt=0;nt<he;nt++){let xt=nt*se-de;for(let Tt=0;Tt<Ue;Tt++){let ut=Tt*V-we;$e[O]=ut*j,$e[N]=xt*Z,$e[T]=je,d.push($e.x,$e.y,$e.z),$e[O]=0,$e[N]=0,$e[T]=K>0?1:-1,g.push($e.x,$e.y,$e.z),v.push(Tt/oe),v.push(1-nt/ue),Pe+=1}}for(let nt=0;nt<ue;nt++)for(let xt=0;xt<oe;xt++){let Tt=x+xt+Ue*nt,ut=x+xt+Ue*(nt+1),Ie=x+(xt+1)+Ue*(nt+1),at=x+(xt+1)+Ue*nt;u.push(Tt,ut,at),u.push(ut,Ie,at),me+=6}a.addGroup(C,me,te),C+=me,x+=Pe}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function Gp(n){let t={};for(let e in n){t[e]={};for(let i in n[e]){let r=n[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=r.clone():Array.isArray(r)?t[e][i]=r.slice():t[e][i]=r}}return t}function Ao(n){let t={};for(let e=0;e<n.length;e++){let i=Gp(n[e]);for(let r in i)t[r]=i[r]}return t}function gse(n){let t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function yk(n){let t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Wi.workingColorSpace}var _5={clone:Gp,merge:Ao},yse=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,vse=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Lc=class extends Ea{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=yse,this.fragmentShader=vse,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Gp(t.uniforms),this.uniformsGroups=gse(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let r in this.uniforms){let o=this.uniforms[r].value;o&&o.isTexture?e.uniforms[r]={type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?e.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?e.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?e.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?e.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?e.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?e.uniforms[r]={type:"m4",value:o.toArray()}:e.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}},B_=class extends eo{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ui,this.projectionMatrix=new ui,this.projectionMatrixInverse=new ui,this.coordinateSystem=Du}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},$d=new Le,s4=new qn,o4=new qn,Es=class extends B_{constructor(t=50,e=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=Op*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(R_*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Op*2*Math.atan(Math.tan(R_*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){$d.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set($d.x,$d.y).multiplyScalar(-t/$d.z),$d.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set($d.x,$d.y).multiplyScalar(-t/$d.z)}getViewSize(t,e){return this.getViewBounds(t,s4,o4),e.subVectors(o4,s4)}setViewOffset(t,e,i,r,s,o){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(R_*.5*this.fov)/this.zoom,i=2*e,r=this.aspect*i,s=-.5*r,o=this.view;if(this.view!==null&&this.view.enabled){let u=o.fullWidth,d=o.fullHeight;s+=o.offsetX*r/u,e-=o.offsetY*i/d,r*=o.width/u,i*=o.height/d}let a=this.filmOffset;a!==0&&(s+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},gy=-90,yy=1,MM=class extends eo{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Es(gy,yy,t,e);r.layers=this.layers,this.add(r);let s=new Es(gy,yy,t,e);s.layers=this.layers,this.add(s);let o=new Es(gy,yy,t,e);o.layers=this.layers,this.add(o);let a=new Es(gy,yy,t,e);a.layers=this.layers,this.add(a);let u=new Es(gy,yy,t,e);u.layers=this.layers,this.add(u);let d=new Es(gy,yy,t,e);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){let t=this.coordinateSystem,e=this.children.concat(),[i,r,s,o,a,u]=e;for(let d of e)this.remove(d);if(t===Du)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(t===L_)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(let d of e)this.add(d),d.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());let[s,o,a,u,d,g]=this.children,v=t.getRenderTarget(),x=t.getActiveCubeFace(),C=t.getActiveMipmapLevel(),A=t.xr.enabled;t.xr.enabled=!1;let O=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,r),t.render(e,s),t.setRenderTarget(i,1,r),t.render(e,o),t.setRenderTarget(i,2,r),t.render(e,a),t.setRenderTarget(i,3,r),t.render(e,u),t.setRenderTarget(i,4,r),t.render(e,d),i.texture.generateMipmaps=O,t.setRenderTarget(i,5,r),t.render(e,g),t.setRenderTarget(v,x,C),t.xr.enabled=A,i.texture.needsPMREMUpdate=!0}},V_=class extends al{constructor(t=[],e=Hp,i,r,s,o,a,u,d,g){super(t,e,i,r,s,o,a,u,d,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},EM=class extends Ru{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let i={width:t,height:t,depth:1},r=[i,i,i,i,i,i];this.texture=new V_(r),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Kd(5,5,5),s=new Lc({name:"CubemapFromEquirect",uniforms:Gp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:sa,blending:kh});s.uniforms.tEquirect.value=e;let o=new As(r,s),a=e.minFilter;return e.minFilter===Oc&&(e.minFilter=na),new MM(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e=!0,i=!0,r=!0){let s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,i,r);t.setRenderTarget(s)}},Ic=class extends eo{constructor(){super(),this.isGroup=!0,this.type="Group"}},_se={type:"move"},My=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ic,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ic,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ic,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Le),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let r=null,s=null,o=null,a=this._targetRay,u=this._grip,d=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(d&&t.hand){o=!0;for(let O of t.hand.values()){let N=e.getJointPose(O,i),T=this._getHandJoint(d,O);N!==null&&(T.matrix.fromArray(N.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,T.jointRadius=N.radius),T.visible=N!==null}let g=d.joints["index-finger-tip"],v=d.joints["thumb-tip"],x=g.position.distanceTo(v.position),C=.02,A=.005;d.inputState.pinching&&x>C+A?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!d.inputState.pinching&&x<=C-A&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else u!==null&&t.gripSpace&&(s=e.getPose(t.gripSpace,i),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));a!==null&&(r=e.getPose(t.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(_se)))}return a!==null&&(a.visible=r!==null),u!==null&&(u.visible=s!==null),d!==null&&(d.visible=o!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let i=new Ic;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}};var Ey=class extends eo{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Zd,this.environmentIntensity=1,this.environmentRotation=new Zd,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}},Ty=class{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=xM,this.updateRanges=[],this.version=0,this.uuid=Rc()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let r=0,s=this.stride;r<s;r++)this.array[t+r]=e.array[i+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Rc()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Rc()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},ta=new Le,Ay=class n{constructor(t,e,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)ta.fromBufferAttribute(this,e),ta.applyMatrix4(t),this.setXYZ(e,ta.x,ta.y,ta.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)ta.fromBufferAttribute(this,e),ta.applyNormalMatrix(t),this.setXYZ(e,ta.x,ta.y,ta.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)ta.fromBufferAttribute(this,e),ta.transformDirection(t),this.setXYZ(e,ta.x,ta.y,ta.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=Dc(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=cr(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=cr(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=cr(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=cr(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=cr(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Dc(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Dc(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Dc(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Dc(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=cr(e,this.array),i=cr(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=cr(e,this.array),i=cr(i,this.array),r=cr(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this}setXYZW(t,e,i,r,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=cr(e,this.array),i=cr(i,this.array),r=cr(r,this.array),s=cr(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this.data.array[t+3]=s,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return new Ts(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new n(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var a4=new Le,l4=new rr,c4=new rr,bse=new Le,u4=new ui,uM=new Le,PP=new Ma,h4=new ui,kP=new Pu,z_=class extends As{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=VP,this.bindMatrix=new ui,this.bindMatrixInverse=new ui,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let t=this.geometry;this.boundingBox===null&&(this.boundingBox=new ra),this.boundingBox.makeEmpty();let e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,uM),this.boundingBox.expandByPoint(uM)}computeBoundingSphere(){let t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ma),this.boundingSphere.makeEmpty();let e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,uM),this.boundingSphere.expandByPoint(uM)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),PP.copy(this.boundingSphere),PP.applyMatrix4(r),t.ray.intersectsSphere(PP)!==!1&&(h4.copy(r).invert(),kP.copy(t.ray).applyMatrix4(h4),!(this.boundingBox!==null&&kP.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,kP)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let t=new rr,e=this.geometry.attributes.skinWeight;for(let i=0,r=e.count;i<r;i++){t.fromBufferAttribute(e,i);let s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===VP?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===n5?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){let i=this.skeleton,r=this.geometry;l4.fromBufferAttribute(r.attributes.skinIndex,t),c4.fromBufferAttribute(r.attributes.skinWeight,t),a4.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){let o=c4.getComponent(s);if(o!==0){let a=l4.getComponent(s);u4.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),e.addScaledVector(bse.copy(a4).applyMatrix4(u4),o)}}return e.applyMatrix4(this.bindMatrixInverse)}},Dy=class extends eo{constructor(){super(),this.isBone=!0,this.type="Bone"}},U_=class extends al{constructor(t=null,e=1,i=1,r,s,o,a,u,d=uo,g=uo,v,x){super(null,o,a,u,d,g,r,s,v,x),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},d4=new ui,xse=new ui,H_=class n{constructor(t=[],e=[]){this.uuid=Rc(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ui)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){let i=new ui;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){let i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){let i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let t=this.bones,e=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=t.length;s<o;s++){let a=t[s]?t[s].matrixWorld:xse;d4.multiplyMatrices(a,e[s]),d4.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);let e=new Float32Array(t*t*4);e.set(this.boneMatrices);let i=new U_(e,t,t,ol,Hl);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){let r=this.bones[e];if(r.name===t)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,r=t.bones.length;i<r;i++){let s=t.bones[i],o=e[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Dy),this.bones.push(o),this.boneInverses.push(new ui().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){let t={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;let e=this.bones,i=this.boneInverses;for(let r=0,s=e.length;r<s;r++){let o=e[r];t.bones.push(o.uuid);let a=i[r];t.boneInverses.push(a.toArray())}return t}},Qd=class extends Ts{constructor(t,e,i,r=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}},vy=new ui,f4=new ui,hM=[],p4=new ra,wse=new ui,T_=new As,A_=new Ma,j_=class extends As{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Qd(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,wse)}computeBoundingBox(){let t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new ra),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,vy),p4.copy(t.boundingBox).applyMatrix4(vy),this.boundingBox.union(p4)}computeBoundingSphere(){let t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ma),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,vy),A_.copy(t.boundingSphere).applyMatrix4(vy),this.boundingSphere.union(A_)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){let i=e.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=t*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(t,e){let i=this.matrixWorld,r=this.count;if(T_.geometry=this.geometry,T_.material=this.material,T_.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),A_.copy(this.boundingSphere),A_.applyMatrix4(i),t.ray.intersectsSphere(A_)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,vy),f4.multiplyMatrices(i,vy),T_.matrixWorld=f4,T_.raycast(t,hM);for(let o=0,a=hM.length;o<a;o++){let u=hM[o];u.instanceId=s,u.object=this,e.push(u)}hM.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Qd(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){let i=e.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new U_(new Float32Array(r*this.count),r,this.count,JM,Hl));let s=this.morphTexture.source.data.data,o=0;for(let d=0;d<i.length;d++)o+=i[d];let a=this.geometry.morphTargetsRelative?1:1-o,u=r*t;s[u]=a,s.set(i,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}},LP=new Le,Sse=new Le,Cse=new gi,Vl=class{constructor(t=new Le(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){let r=LP.subVectors(i,e).cross(Sse.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){let i=t.delta(LP),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(t.start).addScaledVector(i,s)}intersectsLine(t){let e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let i=e||Cse.getNormalMatrix(t),r=this.coplanarPoint(LP).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},Ip=new Ma,dM=new Le,Iy=class{constructor(t=new Vl,e=new Vl,i=new Vl,r=new Vl,s=new Vl,o=new Vl){this.planes=[t,e,i,r,s,o]}set(t,e,i,r,s,o){let a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(t){let e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=Du){let i=this.planes,r=t.elements,s=r[0],o=r[1],a=r[2],u=r[3],d=r[4],g=r[5],v=r[6],x=r[7],C=r[8],A=r[9],O=r[10],N=r[11],T=r[12],j=r[13],Z=r[14],$=r[15];if(i[0].setComponents(u-s,x-d,N-C,$-T).normalize(),i[1].setComponents(u+s,x+d,N+C,$+T).normalize(),i[2].setComponents(u+o,x+g,N+A,$+j).normalize(),i[3].setComponents(u-o,x-g,N-A,$-j).normalize(),i[4].setComponents(u-a,x-v,N-O,$-Z).normalize(),e===Du)i[5].setComponents(u+a,x+v,N+O,$+Z).normalize();else if(e===L_)i[5].setComponents(a,v,O,Z).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Ip.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Ip.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Ip)}intersectsSprite(t){return Ip.center.set(0,0,0),Ip.radius=.7071067811865476,Ip.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ip)}intersectsSphere(t){let e=this.planes,i=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){let e=this.planes;for(let i=0;i<6;i++){let r=e[i];if(dM.x=r.normal.x>0?t.max.x:t.min.x,dM.y=r.normal.y>0?t.max.y:t.min.y,dM.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(dM)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var Ry=class extends Ea{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new kn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}},TM=new Le,AM=new Le,m4=new ui,D_=new Pu,fM=new Ma,NP=new Le,g4=new Le,Bp=class extends eo{constructor(t=new Ta,e=new Ry){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[0];for(let r=1,s=e.count;r<s;r++)TM.fromBufferAttribute(e,r-1),AM.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=TM.distanceTo(AM);t.setAttribute("lineDistance",new To(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),fM.copy(i.boundingSphere),fM.applyMatrix4(r),fM.radius+=s,t.ray.intersectsSphere(fM)===!1)return;m4.copy(r).invert(),D_.copy(t.ray).applyMatrix4(m4);let a=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a,d=this.isLineSegments?2:1,g=i.index,x=i.attributes.position;if(g!==null){let C=Math.max(0,o.start),A=Math.min(g.count,o.start+o.count);for(let O=C,N=A-1;O<N;O+=d){let T=g.getX(O),j=g.getX(O+1),Z=pM(this,t,D_,u,T,j,O);Z&&e.push(Z)}if(this.isLineLoop){let O=g.getX(A-1),N=g.getX(C),T=pM(this,t,D_,u,O,N,A-1);T&&e.push(T)}}else{let C=Math.max(0,o.start),A=Math.min(x.count,o.start+o.count);for(let O=C,N=A-1;O<N;O+=d){let T=pM(this,t,D_,u,O,O+1,O);T&&e.push(T)}if(this.isLineLoop){let O=pM(this,t,D_,u,A-1,C,A-1);O&&e.push(O)}}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function pM(n,t,e,i,r,s,o){let a=n.geometry.attributes.position;if(TM.fromBufferAttribute(a,r),AM.fromBufferAttribute(a,s),e.distanceSqToSegment(TM,AM,NP,g4)>i)return;NP.applyMatrix4(n.matrixWorld);let d=t.ray.origin.distanceTo(NP);if(!(d<t.near||d>t.far))return{distance:d,point:g4.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}var y4=new Le,v4=new Le,W_=class extends Bp{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[];for(let r=0,s=e.count;r<s;r+=2)y4.fromBufferAttribute(e,r),v4.fromBufferAttribute(e,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+y4.distanceTo(v4);t.setAttribute("lineDistance",new To(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},G_=class extends Bp{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}},Py=class extends Ea{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new kn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}},_4=new ui,GP=new Pu,mM=new Ma,gM=new Le,$_=class extends eo{constructor(t=new Ta,e=new Py){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,s=t.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),mM.copy(i.boundingSphere),mM.applyMatrix4(r),mM.radius+=s,t.ray.intersectsSphere(mM)===!1)return;_4.copy(r).invert(),GP.copy(t.ray).applyMatrix4(_4);let a=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a,d=i.index,v=i.attributes.position;if(d!==null){let x=Math.max(0,o.start),C=Math.min(d.count,o.start+o.count);for(let A=x,O=C;A<O;A++){let N=d.getX(A);gM.fromBufferAttribute(v,N),b4(gM,N,u,r,t,e,this)}}else{let x=Math.max(0,o.start),C=Math.min(v.count,o.start+o.count);for(let A=x,O=C;A<O;A++)gM.fromBufferAttribute(v,A),b4(gM,A,u,r,t,e,this)}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function b4(n,t,e,i,r,s,o){let a=GP.distanceSqToPoint(n);if(a<e){let u=new Le;GP.closestPointToPoint(n,u),u.applyMatrix4(i);let d=r.ray.origin.distanceTo(u);if(d<r.near||d>r.far)return;s.push({distance:d,distanceToRay:Math.sqrt(a),point:u,index:t,face:null,faceIndex:null,barycoord:null,object:o})}}var q_=class extends al{constructor(t,e,i=Jd,r,s,o,a=uo,u=uo,d,g=xy,v=1){if(g!==xy&&g!==Vy)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");let x={width:t,height:e,depth:v};super(x,r,s,o,a,u,g,i,d),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Sy(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){let e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}};var X_=class n extends Ta{constructor(t=1,e=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};let s=t/2,o=e/2,a=Math.floor(i),u=Math.floor(r),d=a+1,g=u+1,v=t/a,x=e/u,C=[],A=[],O=[],N=[];for(let T=0;T<g;T++){let j=T*x-o;for(let Z=0;Z<d;Z++){let $=Z*v-s;A.push($,-j,0),O.push(0,0,1),N.push(Z/a),N.push(1-T/u)}}for(let T=0;T<u;T++)for(let j=0;j<a;j++){let Z=j+d*T,$=j+d*(T+1),le=j+1+d*(T+1),K=j+1+d*T;C.push(Z,$,K),C.push($,le,K)}this.setIndex(C),this.setAttribute("position",new To(A,3)),this.setAttribute("normal",new To(O,3)),this.setAttribute("uv",new To(N,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}};var Y_=class n extends Ta{constructor(t=1,e=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));let u=Math.min(o+a,Math.PI),d=0,g=[],v=new Le,x=new Le,C=[],A=[],O=[],N=[];for(let T=0;T<=i;T++){let j=[],Z=T/i,$=0;T===0&&o===0?$=.5/e:T===i&&u===Math.PI&&($=-.5/e);for(let le=0;le<=e;le++){let K=le/e;v.x=-t*Math.cos(r+K*s)*Math.sin(o+Z*a),v.y=t*Math.cos(o+Z*a),v.z=t*Math.sin(r+K*s)*Math.sin(o+Z*a),A.push(v.x,v.y,v.z),x.copy(v).normalize(),O.push(x.x,x.y,x.z),N.push(K+$,1-Z),j.push(d++)}g.push(j)}for(let T=0;T<i;T++)for(let j=0;j<e;j++){let Z=g[T][j+1],$=g[T][j],le=g[T+1][j],K=g[T+1][j+1];(T!==0||o>0)&&C.push(Z,$,K),(T!==i-1||u<Math.PI)&&C.push($,le,K)}this.setIndex(C),this.setAttribute("position",new To(A,3)),this.setAttribute("normal",new To(O,3)),this.setAttribute("uv",new To(N,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}};var ku=class extends Ea{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new kn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dk,this.normalScale=new qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Zd,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}},Aa=class extends ku{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new qn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ii(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new kn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new kn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new kn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}};var DM=class extends Ea{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=r5,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},IM=class extends Ea{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}};function yM(n,t){return!n||n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}function Mse(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Ese(n){function t(r,s){return n[r]-n[s]}let e=n.length,i=new Array(e);for(let r=0;r!==e;++r)i[r]=r;return i.sort(t),i}function x4(n,t,e){let i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){let a=e[s]*t;for(let u=0;u!==t;++u)r[o++]=n[a+u]}return r}function b5(n,t,e,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(t.push(s.time),e.push(...o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(t.push(s.time),o.toArray(e,e.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(t.push(s.time),e.push(o)),s=n[r++];while(s!==void 0)}var Dh=class{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){let e=this.parameterPositions,i=this._cachedIndex,r=e[i],s=e[i-1];e:{t:{let o;n:{i:if(!(t<r)){for(let a=i+2;;){if(r===void 0){if(t<s)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=e[++i],t<r)break t}o=e.length;break n}if(!(t>=s)){let a=e[1];t<a&&(i=2,s=a);for(let u=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=s,s=e[--i-1],t>=s)break t}o=i,i=0;break n}break e}for(;i<o;){let a=i+o>>>1;t<e[a]?o=a:i=a+1}if(r=e[i],s=e[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=i[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},RM=class extends Dh{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:UP,endingEnd:UP}}intervalChanged_(t,e,i){let r=this.parameterPositions,s=t-2,o=t+1,a=r[s],u=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case HP:s=t,a=2*e-i;break;case jP:s=r.length-2,a=e+r[s]-r[s+1];break;default:s=t,a=i}if(u===void 0)switch(this.getSettings_().endingEnd){case HP:o=t,u=2*i-e;break;case jP:o=1,u=i+r[1]-r[0];break;default:o=t-1,u=e}let d=(i-e)*.5,g=this.valueSize;this._weightPrev=d/(e-a),this._weightNext=d/(u-i),this._offsetPrev=s*g,this._offsetNext=o*g}interpolate_(t,e,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=t*a,d=u-a,g=this._offsetPrev,v=this._offsetNext,x=this._weightPrev,C=this._weightNext,A=(i-e)/(r-e),O=A*A,N=O*A,T=-x*N+2*x*O-x*A,j=(1+x)*N+(-1.5-2*x)*O+(-.5+x)*A+1,Z=(-1-C)*N+(1.5+C)*O+.5*A,$=C*N-C*O;for(let le=0;le!==a;++le)s[le]=T*o[g+le]+j*o[d+le]+Z*o[u+le]+$*o[v+le];return s}},PM=class extends Dh{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=t*a,d=u-a,g=(i-e)/(r-e),v=1-g;for(let x=0;x!==a;++x)s[x]=o[d+x]*v+o[u+x]*g;return s}},kM=class extends Dh{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}},Da=class{constructor(t,e,i,r){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=yM(e,this.TimeBufferType),this.values=yM(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){let e=t.constructor,i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:yM(t.times,Array),values:yM(t.values,Array)};let r=t.getInterpolation();r!==t.DefaultInterpolation&&(i.interpolation=r)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new kM(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new PM(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new RM(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Lp:e=this.InterpolantFactoryMethodDiscrete;break;case Np:e=this.InterpolantFactoryMethodLinear;break;case vM:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Lp;case this.InterpolantFactoryMethodLinear:return Np;case this.InterpolantFactoryMethodSmooth:return vM}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(t!==1){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){let i=this.times,r=i.length,s=0,o=r-1;for(;s!==r&&i[s]<t;)++s;for(;o!==-1&&i[o]>e;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);let a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);let i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==s;a++){let u=i[a];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,u),t=!1;break}if(o!==null&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,u,o),t=!1;break}o=u}if(r!==void 0&&Mse(r))for(let a=0,u=r.length;a!==u;++a){let d=r[a];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,d),t=!1;break}}return t}optimize(){let t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===vM,s=t.length-1,o=1;for(let a=1;a<s;++a){let u=!1,d=t[a],g=t[a+1];if(d!==g&&(a!==1||d!==t[0]))if(r)u=!0;else{let v=a*i,x=v-i,C=v+i;for(let A=0;A!==i;++A){let O=e[v+A];if(O!==e[x+A]||O!==e[C+A]){u=!0;break}}}if(u){if(a!==o){t[o]=t[a];let v=a*i,x=o*i;for(let C=0;C!==i;++C)e[x+C]=e[v+C]}++o}}if(s>0){t[o]=t[s];for(let a=s*i,u=o*i,d=0;d!==i;++d)e[u+d]=e[a+d];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=e.slice(0,o*i)):(this.times=t,this.values=e),this}clone(){let t=this.times.slice(),e=this.values.slice(),i=this.constructor,r=new i(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}};Da.prototype.ValueTypeName="";Da.prototype.TimeBufferType=Float32Array;Da.prototype.ValueBufferType=Float32Array;Da.prototype.DefaultInterpolation=Np;var Ih=class extends Da{constructor(t,e,i){super(t,e,i)}};Ih.prototype.ValueTypeName="bool";Ih.prototype.ValueBufferType=Array;Ih.prototype.DefaultInterpolation=Lp;Ih.prototype.InterpolantFactoryMethodLinear=void 0;Ih.prototype.InterpolantFactoryMethodSmooth=void 0;var Z_=class extends Da{constructor(t,e,i,r){super(t,e,i,r)}};Z_.prototype.ValueTypeName="color";var Lu=class extends Da{constructor(t,e,i,r){super(t,e,i,r)}};Lu.prototype.ValueTypeName="number";var LM=class extends Dh{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=(i-e)/(r-e),d=t*a;for(let g=d+a;d!==g;d+=4)ia.slerpFlat(s,0,o,d-a,o,d,u);return s}},Nu=class extends Da{constructor(t,e,i,r){super(t,e,i,r)}InterpolantFactoryMethodLinear(t){return new LM(this.times,this.values,this.getValueSize(),t)}};Nu.prototype.ValueTypeName="quaternion";Nu.prototype.InterpolantFactoryMethodSmooth=void 0;var Rh=class extends Da{constructor(t,e,i){super(t,e,i)}};Rh.prototype.ValueTypeName="string";Rh.prototype.ValueBufferType=Array;Rh.prototype.DefaultInterpolation=Lp;Rh.prototype.InterpolantFactoryMethodLinear=void 0;Rh.prototype.InterpolantFactoryMethodSmooth=void 0;var Ou=class extends Da{constructor(t,e,i,r){super(t,e,i,r)}};Ou.prototype.ValueTypeName="vector";var K_=class{constructor(t="",e=-1,i=[],r=i5){this.name=t,this.tracks=i,this.duration=e,this.blendMode=r,this.uuid=Rc(),this.duration<0&&this.resetDuration()}static parse(t){let e=[],i=t.tracks,r=1/(t.fps||1);for(let o=0,a=i.length;o!==a;++o)e.push(Ase(i[o]).scale(r));let s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){let e=[],i=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,o=i.length;s!==o;++s)e.push(Da.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(t,e,i,r){let s=e.length,o=[];for(let a=0;a<s;a++){let u=[],d=[];u.push((a+s-1)%s,a,(a+1)%s),d.push(0,1,0);let g=Ese(u);u=x4(u,1,g),d=x4(d,1,g),!r&&u[0]===0&&(u.push(s),d.push(d[0])),o.push(new Lu(".morphTargetInfluences["+e[a].name+"]",u,d).scale(1/i))}return new this(t,-1,o)}static findByName(t,e){let i=t;if(!Array.isArray(t)){let r=t;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null}static CreateClipsFromMorphTargetSequences(t,e,i){let r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,u=t.length;a<u;a++){let d=t[a],g=d.name.match(s);if(g&&g.length>1){let v=g[1],x=r[v];x||(r[v]=x=[]),x.push(d)}}let o=[];for(let a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],e,i));return o}static parseAnimation(t,e){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(v,x,C,A,O){if(C.length!==0){let N=[],T=[];b5(C,N,T,A),N.length!==0&&O.push(new v(x,N,T))}},r=[],s=t.name||"default",o=t.fps||30,a=t.blendMode,u=t.length||-1,d=t.hierarchy||[];for(let v=0;v<d.length;v++){let x=d[v].keys;if(!(!x||x.length===0))if(x[0].morphTargets){let C={},A;for(A=0;A<x.length;A++)if(x[A].morphTargets)for(let O=0;O<x[A].morphTargets.length;O++)C[x[A].morphTargets[O]]=-1;for(let O in C){let N=[],T=[];for(let j=0;j!==x[A].morphTargets.length;++j){let Z=x[A];N.push(Z.time),T.push(Z.morphTarget===O?1:0)}r.push(new Lu(".morphTargetInfluence["+O+"]",N,T))}u=C.length*o}else{let C=".bones["+e[v].name+"]";i(Ou,C+".position",x,"pos",r),i(Nu,C+".quaternion",x,"rot",r),i(Ou,C+".scale",x,"scl",r)}}return r.length===0?null:new this(s,u,r,a)}resetDuration(){let t=this.tracks,e=0;for(let i=0,r=t.length;i!==r;++i){let s=this.tracks[i];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){let t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function Tse(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Lu;case"vector":case"vector2":case"vector3":case"vector4":return Ou;case"color":return Z_;case"quaternion":return Nu;case"bool":case"boolean":return Ih;case"string":return Rh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Ase(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=Tse(n.type);if(n.times===void 0){let e=[],i=[];b5(n.keys,e,i,"value"),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}var Th={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},NM=class{constructor(t,e,i){let r=this,s=!1,o=0,a=0,u,d=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(g){a++,s===!1&&r.onStart!==void 0&&r.onStart(g,o,a),s=!0},this.itemEnd=function(g){o++,r.onProgress!==void 0&&r.onProgress(g,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(g){r.onError!==void 0&&r.onError(g)},this.resolveURL=function(g){return u?u(g):g},this.setURLModifier=function(g){return u=g,this},this.addHandler=function(g,v){return d.push(g,v),this},this.removeHandler=function(g){let v=d.indexOf(g);return v!==-1&&d.splice(v,2),this},this.getHandler=function(g){for(let v=0,x=d.length;v<x;v+=2){let C=d[v],A=d[v+1];if(C.global&&(C.lastIndex=0),C.test(g))return A}return null}}},x5=new NM,$p=(()=>{class n{constructor(e){this.manager=e!==void 0?e:x5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,i){let r=this;return new Promise(function(s,o){r.load(e,s,i,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),Eh={},$P=class extends Error{constructor(t,e){super(t),this.response=e}},ky=class extends $p{constructor(t){super(t),this.mimeType="",this.responseType=""}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let s=Th.get(t);if(s!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(Eh[t]!==void 0){Eh[t].push({onLoad:e,onProgress:i,onError:r});return}Eh[t]=[],Eh[t].push({onLoad:e,onProgress:i,onError:r});let o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,u=this.responseType;fetch(o).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;let g=Eh[t],v=d.body.getReader(),x=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),C=x?parseInt(x):0,A=C!==0,O=0,N=new ReadableStream({start(T){j();function j(){v.read().then(({done:Z,value:$})=>{if(Z)T.close();else{O+=$.byteLength;let le=new ProgressEvent("progress",{lengthComputable:A,loaded:O,total:C});for(let K=0,oe=g.length;K<oe;K++){let ue=g[K];ue.onProgress&&ue.onProgress(le)}T.enqueue($),j()}},Z=>{T.error(Z)})}}});return new Response(N)}else throw new $P(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(u){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(g=>new DOMParser().parseFromString(g,a));case"json":return d.json();default:if(a==="")return d.text();{let v=/charset="?([^;"\s]*)"?/i.exec(a),x=v&&v[1]?v[1].toLowerCase():void 0,C=new TextDecoder(x);return d.arrayBuffer().then(A=>C.decode(A))}}}).then(d=>{Th.add(t,d);let g=Eh[t];delete Eh[t];for(let v=0,x=g.length;v<x;v++){let C=g[v];C.onLoad&&C.onLoad(d)}}).catch(d=>{let g=Eh[t];if(g===void 0)throw this.manager.itemError(t),d;delete Eh[t];for(let v=0,x=g.length;v<x;v++){let C=g[v];C.onError&&C.onError(d)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}};var OM=class extends $p{constructor(t){super(t)}load(t,e,i,r){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let s=this,o=Th.get(t);if(o!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;let a=wy("img");function u(){g(),Th.add(t,this),e&&e(this),s.manager.itemEnd(t)}function d(v){g(),r&&r(v),s.manager.itemError(t),s.manager.itemEnd(t)}function g(){a.removeEventListener("load",u,!1),a.removeEventListener("error",d,!1)}return a.addEventListener("load",u,!1),a.addEventListener("error",d,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(t),a.src=t,a}};var Q_=class extends $p{constructor(t){super(t)}load(t,e,i,r){let s=new al,o=new OM(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(a){s.image=a,s.needsUpdate=!0,e!==void 0&&e(s)},i,r),s}},Vp=class extends eo{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new kn(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}};var OP=new ui,w4=new Le,S4=new Le,J_=class{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new qn(512,512),this.mapType=Fc,this.map=null,this.mapPass=null,this.matrix=new ui,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Iy,this._frameExtents=new qn(1,1),this._viewportCount=1,this._viewports=[new rr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,i=this.matrix;w4.setFromMatrixPosition(t.matrixWorld),e.position.copy(w4),S4.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(S4),e.updateMatrixWorld(),OP.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(OP),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(OP)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}},qP=class extends J_{constructor(){super(new Es(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(t){let e=this.camera,i=Op*2*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,s=t.distance||e.far;(i!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=i,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}},eb=class extends Vp{constructor(t,e,i=0,r=Math.PI/3,s=0,o=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(eo.DEFAULT_UP),this.updateMatrix(),this.target=new eo,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new qP}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},C4=new ui,I_=new Le,FP=new Le,XP=class extends J_{constructor(){super(new Es(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new qn(4,2),this._viewportCount=6,this._viewports=[new rr(2,1,1,1),new rr(0,1,1,1),new rr(3,1,1,1),new rr(1,1,1,1),new rr(3,0,1,1),new rr(1,0,1,1)],this._cubeDirections=[new Le(1,0,0),new Le(-1,0,0),new Le(0,0,1),new Le(0,0,-1),new Le(0,1,0),new Le(0,-1,0)],this._cubeUps=[new Le(0,1,0),new Le(0,1,0),new Le(0,1,0),new Le(0,1,0),new Le(0,0,1),new Le(0,0,-1)]}updateMatrices(t,e=0){let i=this.camera,r=this.matrix,s=t.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),I_.setFromMatrixPosition(t.matrixWorld),i.position.copy(I_),FP.copy(i.position),FP.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(FP),i.updateMatrixWorld(),r.makeTranslation(-I_.x,-I_.y,-I_.z),C4.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(C4)}},tb=class extends Vp{constructor(t,e,i=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new XP}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}},zp=class extends B_{constructor(t=-1,e=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,s=i-t,o=i+t,a=r+e,u=r-e;if(this.view!==null&&this.view.enabled){let d=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,a-=g*this.view.offsetY,u=a-g*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}},YP=class extends J_{constructor(){super(new zp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Up=class extends Vp{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(eo.DEFAULT_UP),this.updateMatrix(),this.target=new eo,this.shadow=new YP}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},nb=class extends Vp{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}};var Ph=class{static extractUrlBase(t){let e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}};var BP=new WeakMap,ib=class extends $p{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let s=this,o=Th.get(t);if(o!==void 0){if(s.manager.itemStart(t),o.then){o.then(d=>{if(BP.has(o)===!0)r&&r(BP.get(o)),s.manager.itemError(t),s.manager.itemEnd(t);else return e&&e(d),s.manager.itemEnd(t),d});return}return setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let u=fetch(t,a).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(d){return Th.add(t,d),e&&e(d),s.manager.itemEnd(t),d}).catch(function(d){r&&r(d),BP.set(u,d),Th.remove(t),s.manager.itemError(t),s.manager.itemEnd(t)});Th.add(t,u),s.manager.itemStart(t)}};var FM=class extends Es{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}};var vk="\\[\\]\\.:\\/",Dse=new RegExp("["+vk+"]","g"),_k="[^"+vk+"]",Ise="[^"+vk.replace("\\.","")+"]",Rse=/((?:WC+[\/:])*)/.source.replace("WC",_k),Pse=/(WCOD+)?/.source.replace("WCOD",Ise),kse=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_k),Lse=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_k),Nse=new RegExp("^"+Rse+Pse+kse+Lse+"$"),Ose=["material","materials","bones","map"],ZP=class{constructor(t,e,i){let r=i||Ur.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(t,e)}setValue(t,e){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(t,e)}bind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},Ur=(()=>{class n{constructor(e,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,r){return e&&e.isAnimationObjectGroup?new n.Composite(e,i,r):new n(e,i,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Dse,"")}static parseTrackName(e){let i=Nse.exec(e);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){let o=r.nodeName.substring(s+1);Ose.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,i){if(i===void 0||i===""||i==="."||i===-1||i===e.name||i===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(i);if(r!==void 0)return r}if(e.children){let r=function(o){for(let a=0;a<o.length;a++){let u=o[a];if(u.name===i||u.uuid===i)return u;let d=r(u.children);if(d)return d}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[i++]=r[s]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[i++]}_setValue_array_setNeedsUpdate(e,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node,i=this.parsedPath,r=i.objectName,s=i.propertyName,o=i.propertyIndex;if(e||(e=n.findNode(this.rootNode,i.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let g=i.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let v=0;v<e.length;v++)if(e[v].name===g){g=v;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(g!==void 0){if(e[g]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[g]}}let a=e[s];if(a===void 0){let g=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+g+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?u=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}d=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(d=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=ZP,n})();Ur.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ur.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ur.prototype.GetterByBindingType=[Ur.prototype._getValue_direct,Ur.prototype._getValue_array,Ur.prototype._getValue_arrayElement,Ur.prototype._getValue_toArray];Ur.prototype.SetterByBindingTypeAndVersioning=[[Ur.prototype._setValue_direct,Ur.prototype._setValue_direct_setNeedsUpdate,Ur.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ur.prototype._setValue_array,Ur.prototype._setValue_array_setNeedsUpdate,Ur.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ur.prototype._setValue_arrayElement,Ur.prototype._setValue_arrayElement_setNeedsUpdate,Ur.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ur.prototype._setValue_fromArray,Ur.prototype._setValue_fromArray_setNeedsUpdate,Ur.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var aTe=new Float32Array(1);var M4=new ui,rb=class{constructor(t,e,i=0,r=1/0){this.ray=new Pu(t,e),this.near=i,this.far=r,this.camera=null,this.layers=new Cy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return M4.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(M4),this}intersectObject(t,e=!0,i=[]){return KP(t,this,i,e),i.sort(E4),i}intersectObjects(t,e=!0,i=[]){for(let r=0,s=t.length;r<s;r++)KP(t[r],this,i,e);return i.sort(E4),i}};function E4(n,t){return n.distance-t.distance}function KP(n,t,e,i){let r=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(r=!1),r===!0&&i===!0){let s=n.children;for(let o=0,a=s.length;o<a;o++)KP(s[o],t,e,!0)}}var Ly=class{constructor(t=1,e=0,i=0){this.radius=t,this.phi=e,this.theta=i}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Ii(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Ii(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};var sb=class extends Iu{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}};function bk(n,t,e,i){let r=Fse(i);switch(e){case ak:return n*t;case JM:return n*t/r.components*r.byteLength;case e1:return n*t/r.components*r.byteLength;case ck:return n*t*2/r.components*r.byteLength;case t1:return n*t*2/r.components*r.byteLength;case lk:return n*t*3/r.components*r.byteLength;case ol:return n*t*4/r.components*r.byteLength;case n1:return n*t*4/r.components*r.byteLength;case ab:case lb:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case cb:case ub:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case r1:case o1:return Math.max(n,16)*Math.max(t,8)/4;case i1:case s1:return Math.max(n,8)*Math.max(t,8)/2;case a1:case l1:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case c1:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case u1:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case h1:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case d1:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case f1:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case p1:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case m1:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case g1:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case y1:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case v1:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case _1:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case b1:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case x1:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case w1:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case S1:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case hb:case C1:case M1:return Math.ceil(n/4)*Math.ceil(t/4)*16;case uk:case E1:return Math.ceil(n/4)*Math.ceil(t/4)*8;case T1:case A1:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function Fse(n){switch(n){case Fc:case rk:return{byteLength:1,components:1};case Oy:case sk:case Fy:return{byteLength:2,components:1};case KM:case QM:return{byteLength:2,components:4};case Jd:case ZM:case Hl:return{byteLength:4,components:1};case ok:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:BM}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=BM);function G5(){let n=null,t=!1,e=null,i=null;function r(s,o){e(s,o),i=n.requestAnimationFrame(r)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(r),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){n=s}}}function Bse(n){let t=new WeakMap;function e(a,u){let d=a.array,g=a.usage,v=d.byteLength,x=n.createBuffer();n.bindBuffer(u,x),n.bufferData(u,d,g),a.onUploadCallback();let C;if(d instanceof Float32Array)C=n.FLOAT;else if(d instanceof Uint16Array)a.isFloat16BufferAttribute?C=n.HALF_FLOAT:C=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)C=n.SHORT;else if(d instanceof Uint32Array)C=n.UNSIGNED_INT;else if(d instanceof Int32Array)C=n.INT;else if(d instanceof Int8Array)C=n.BYTE;else if(d instanceof Uint8Array)C=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)C=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:x,type:C,bytesPerElement:d.BYTES_PER_ELEMENT,version:a.version,size:v}}function i(a,u,d){let g=u.array,v=u.updateRanges;if(n.bindBuffer(d,a),v.length===0)n.bufferSubData(d,0,g);else{v.sort((C,A)=>C.start-A.start);let x=0;for(let C=1;C<v.length;C++){let A=v[x],O=v[C];O.start<=A.start+A.count+1?A.count=Math.max(A.count,O.start+O.count-A.start):(++x,v[x]=O)}v.length=x+1;for(let C=0,A=v.length;C<A;C++){let O=v[C];n.bufferSubData(d,O.start*g.BYTES_PER_ELEMENT,g,O.start,O.count)}u.clearUpdateRanges()}u.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);let u=t.get(a);u&&(n.deleteBuffer(u.buffer),t.delete(a))}function o(a,u){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let g=t.get(a);(!g||g.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let d=t.get(a);if(d===void 0)t.set(a,e(a,u));else if(d.version<a.version){if(d.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(d.buffer,a,u),d.version=a.version}}return{get:r,remove:s,update:o}}var Vse=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,zse=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Use=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Hse=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,jse=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Wse=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Gse=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,$se=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,qse=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Xse=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Yse=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Zse=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Kse=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Qse=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Jse=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,eoe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,toe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,noe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ioe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,roe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,soe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,ooe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,aoe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,loe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,coe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,uoe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,hoe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,doe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,foe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,poe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,moe="gl_FragColor = linearToOutputTexel( gl_FragColor );",goe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,yoe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,voe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,_oe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,boe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,xoe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,woe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Soe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Coe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Moe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Eoe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Toe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Aoe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Doe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Ioe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Roe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Poe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,koe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Loe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Noe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Ooe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Foe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Boe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Voe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,zoe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Uoe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Hoe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,joe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Woe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Goe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,$oe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,qoe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Xoe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Yoe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Zoe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Koe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Qoe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Joe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,eae=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,tae=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,nae=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,iae=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,rae=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sae=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,oae=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,aae=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,lae=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,cae=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,uae=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,hae=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,dae=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,fae=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,pae=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,mae=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,gae=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,yae=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,vae=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,_ae=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,bae=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,xae=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,wae=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Sae=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Cae=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Mae=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Eae=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Tae=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Aae=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Dae=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Iae=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Rae=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Pae=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,kae=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Lae=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Nae=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Oae=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Fae=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Bae=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Vae=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zae=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Uae=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Hae=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,jae=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Wae=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Gae=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,$ae=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,qae=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Xae=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Yae=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Zae=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Kae=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Qae=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Jae=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ele=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tle=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nle=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ile=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rle=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,sle=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,ole=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ale=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lle=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,cle=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ule=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hle=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dle=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fle=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ple=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mle=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,gle=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,yle=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ti={alphahash_fragment:Vse,alphahash_pars_fragment:zse,alphamap_fragment:Use,alphamap_pars_fragment:Hse,alphatest_fragment:jse,alphatest_pars_fragment:Wse,aomap_fragment:Gse,aomap_pars_fragment:$se,batching_pars_vertex:qse,batching_vertex:Xse,begin_vertex:Yse,beginnormal_vertex:Zse,bsdfs:Kse,iridescence_fragment:Qse,bumpmap_pars_fragment:Jse,clipping_planes_fragment:eoe,clipping_planes_pars_fragment:toe,clipping_planes_pars_vertex:noe,clipping_planes_vertex:ioe,color_fragment:roe,color_pars_fragment:soe,color_pars_vertex:ooe,color_vertex:aoe,common:loe,cube_uv_reflection_fragment:coe,defaultnormal_vertex:uoe,displacementmap_pars_vertex:hoe,displacementmap_vertex:doe,emissivemap_fragment:foe,emissivemap_pars_fragment:poe,colorspace_fragment:moe,colorspace_pars_fragment:goe,envmap_fragment:yoe,envmap_common_pars_fragment:voe,envmap_pars_fragment:_oe,envmap_pars_vertex:boe,envmap_physical_pars_fragment:Roe,envmap_vertex:xoe,fog_vertex:woe,fog_pars_vertex:Soe,fog_fragment:Coe,fog_pars_fragment:Moe,gradientmap_pars_fragment:Eoe,lightmap_pars_fragment:Toe,lights_lambert_fragment:Aoe,lights_lambert_pars_fragment:Doe,lights_pars_begin:Ioe,lights_toon_fragment:Poe,lights_toon_pars_fragment:koe,lights_phong_fragment:Loe,lights_phong_pars_fragment:Noe,lights_physical_fragment:Ooe,lights_physical_pars_fragment:Foe,lights_fragment_begin:Boe,lights_fragment_maps:Voe,lights_fragment_end:zoe,logdepthbuf_fragment:Uoe,logdepthbuf_pars_fragment:Hoe,logdepthbuf_pars_vertex:joe,logdepthbuf_vertex:Woe,map_fragment:Goe,map_pars_fragment:$oe,map_particle_fragment:qoe,map_particle_pars_fragment:Xoe,metalnessmap_fragment:Yoe,metalnessmap_pars_fragment:Zoe,morphinstance_vertex:Koe,morphcolor_vertex:Qoe,morphnormal_vertex:Joe,morphtarget_pars_vertex:eae,morphtarget_vertex:tae,normal_fragment_begin:nae,normal_fragment_maps:iae,normal_pars_fragment:rae,normal_pars_vertex:sae,normal_vertex:oae,normalmap_pars_fragment:aae,clearcoat_normal_fragment_begin:lae,clearcoat_normal_fragment_maps:cae,clearcoat_pars_fragment:uae,iridescence_pars_fragment:hae,opaque_fragment:dae,packing:fae,premultiplied_alpha_fragment:pae,project_vertex:mae,dithering_fragment:gae,dithering_pars_fragment:yae,roughnessmap_fragment:vae,roughnessmap_pars_fragment:_ae,shadowmap_pars_fragment:bae,shadowmap_pars_vertex:xae,shadowmap_vertex:wae,shadowmask_pars_fragment:Sae,skinbase_vertex:Cae,skinning_pars_vertex:Mae,skinning_vertex:Eae,skinnormal_vertex:Tae,specularmap_fragment:Aae,specularmap_pars_fragment:Dae,tonemapping_fragment:Iae,tonemapping_pars_fragment:Rae,transmission_fragment:Pae,transmission_pars_fragment:kae,uv_pars_fragment:Lae,uv_pars_vertex:Nae,uv_vertex:Oae,worldpos_vertex:Fae,background_vert:Bae,background_frag:Vae,backgroundCube_vert:zae,backgroundCube_frag:Uae,cube_vert:Hae,cube_frag:jae,depth_vert:Wae,depth_frag:Gae,distanceRGBA_vert:$ae,distanceRGBA_frag:qae,equirect_vert:Xae,equirect_frag:Yae,linedashed_vert:Zae,linedashed_frag:Kae,meshbasic_vert:Qae,meshbasic_frag:Jae,meshlambert_vert:ele,meshlambert_frag:tle,meshmatcap_vert:nle,meshmatcap_frag:ile,meshnormal_vert:rle,meshnormal_frag:sle,meshphong_vert:ole,meshphong_frag:ale,meshphysical_vert:lle,meshphysical_frag:cle,meshtoon_vert:ule,meshtoon_frag:hle,points_vert:dle,points_frag:fle,shadow_vert:ple,shadow_frag:mle,sprite_vert:gle,sprite_frag:yle},Yt={common:{diffuse:{value:new kn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new gi},alphaMap:{value:null},alphaMapTransform:{value:new gi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new gi}},envmap:{envMap:{value:null},envMapRotation:{value:new gi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new gi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new gi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new gi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new gi},normalScale:{value:new qn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new gi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new gi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new gi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new gi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new kn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new kn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new gi},alphaTest:{value:0},uvTransform:{value:new gi}},sprite:{diffuse:{value:new kn(16777215)},opacity:{value:1},center:{value:new qn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new gi},alphaMap:{value:null},alphaMapTransform:{value:new gi},alphaTest:{value:0}}},Bu={basic:{uniforms:Ao([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.fog]),vertexShader:Ti.meshbasic_vert,fragmentShader:Ti.meshbasic_frag},lambert:{uniforms:Ao([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,Yt.lights,{emissive:{value:new kn(0)}}]),vertexShader:Ti.meshlambert_vert,fragmentShader:Ti.meshlambert_frag},phong:{uniforms:Ao([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,Yt.lights,{emissive:{value:new kn(0)},specular:{value:new kn(1118481)},shininess:{value:30}}]),vertexShader:Ti.meshphong_vert,fragmentShader:Ti.meshphong_frag},standard:{uniforms:Ao([Yt.common,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.roughnessmap,Yt.metalnessmap,Yt.fog,Yt.lights,{emissive:{value:new kn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ti.meshphysical_vert,fragmentShader:Ti.meshphysical_frag},toon:{uniforms:Ao([Yt.common,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.gradientmap,Yt.fog,Yt.lights,{emissive:{value:new kn(0)}}]),vertexShader:Ti.meshtoon_vert,fragmentShader:Ti.meshtoon_frag},matcap:{uniforms:Ao([Yt.common,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,{matcap:{value:null}}]),vertexShader:Ti.meshmatcap_vert,fragmentShader:Ti.meshmatcap_frag},points:{uniforms:Ao([Yt.points,Yt.fog]),vertexShader:Ti.points_vert,fragmentShader:Ti.points_frag},dashed:{uniforms:Ao([Yt.common,Yt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ti.linedashed_vert,fragmentShader:Ti.linedashed_frag},depth:{uniforms:Ao([Yt.common,Yt.displacementmap]),vertexShader:Ti.depth_vert,fragmentShader:Ti.depth_frag},normal:{uniforms:Ao([Yt.common,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,{opacity:{value:1}}]),vertexShader:Ti.meshnormal_vert,fragmentShader:Ti.meshnormal_frag},sprite:{uniforms:Ao([Yt.sprite,Yt.fog]),vertexShader:Ti.sprite_vert,fragmentShader:Ti.sprite_frag},background:{uniforms:{uvTransform:{value:new gi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ti.background_vert,fragmentShader:Ti.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new gi}},vertexShader:Ti.backgroundCube_vert,fragmentShader:Ti.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ti.cube_vert,fragmentShader:Ti.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ti.equirect_vert,fragmentShader:Ti.equirect_frag},distanceRGBA:{uniforms:Ao([Yt.common,Yt.displacementmap,{referencePosition:{value:new Le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ti.distanceRGBA_vert,fragmentShader:Ti.distanceRGBA_frag},shadow:{uniforms:Ao([Yt.lights,Yt.fog,{color:{value:new kn(0)},opacity:{value:1}}]),vertexShader:Ti.shadow_vert,fragmentShader:Ti.shadow_frag}};Bu.physical={uniforms:Ao([Bu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new gi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new gi},clearcoatNormalScale:{value:new qn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new gi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new gi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new gi},sheen:{value:0},sheenColor:{value:new kn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new gi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new gi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new gi},transmissionSamplerSize:{value:new qn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new gi},attenuationDistance:{value:0},attenuationColor:{value:new kn(0)},specularColor:{value:new kn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new gi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new gi},anisotropyVector:{value:new qn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new gi}}]),vertexShader:Ti.meshphysical_vert,fragmentShader:Ti.meshphysical_frag};var D1={r:0,b:0,g:0},qp=new Zd,vle=new ui;function _le(n,t,e,i,r,s,o){let a=new kn(0),u=s===!0?0:1,d,g,v=null,x=0,C=null;function A(Z){let $=Z.isScene===!0?Z.background:null;return $&&$.isTexture&&($=(Z.backgroundBlurriness>0?e:t).get($)),$}function O(Z){let $=!1,le=A(Z);le===null?T(a,u):le&&le.isColor&&(T(le,1),$=!0);let K=n.xr.getEnvironmentBlendMode();K==="additive"?i.buffers.color.setClear(0,0,0,1,o):K==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||$)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function N(Z,$){let le=A($);le&&(le.isCubeTexture||le.mapping===ob)?(g===void 0&&(g=new As(new Kd(1,1,1),new Lc({name:"BackgroundCubeMaterial",uniforms:Gp(Bu.backgroundCube.uniforms),vertexShader:Bu.backgroundCube.vertexShader,fragmentShader:Bu.backgroundCube.fragmentShader,side:sa,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(K,oe,ue){this.matrixWorld.copyPosition(ue.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(g)),qp.copy($.backgroundRotation),qp.x*=-1,qp.y*=-1,qp.z*=-1,le.isCubeTexture&&le.isRenderTargetTexture===!1&&(qp.y*=-1,qp.z*=-1),g.material.uniforms.envMap.value=le,g.material.uniforms.flipEnvMap.value=le.isCubeTexture&&le.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=$.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=$.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(vle.makeRotationFromEuler(qp)),g.material.toneMapped=Wi.getTransfer(le.colorSpace)!==ur,(v!==le||x!==le.version||C!==n.toneMapping)&&(g.material.needsUpdate=!0,v=le,x=le.version,C=n.toneMapping),g.layers.enableAll(),Z.unshift(g,g.geometry,g.material,0,0,null)):le&&le.isTexture&&(d===void 0&&(d=new As(new X_(2,2),new Lc({name:"BackgroundMaterial",uniforms:Gp(Bu.background.uniforms),vertexShader:Bu.background.vertexShader,fragmentShader:Bu.background.fragmentShader,side:Pc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=le,d.material.uniforms.backgroundIntensity.value=$.backgroundIntensity,d.material.toneMapped=Wi.getTransfer(le.colorSpace)!==ur,le.matrixAutoUpdate===!0&&le.updateMatrix(),d.material.uniforms.uvTransform.value.copy(le.matrix),(v!==le||x!==le.version||C!==n.toneMapping)&&(d.material.needsUpdate=!0,v=le,x=le.version,C=n.toneMapping),d.layers.enableAll(),Z.unshift(d,d.geometry,d.material,0,0,null))}function T(Z,$){Z.getRGB(D1,yk(n)),i.buffers.color.setClear(D1.r,D1.g,D1.b,$,o)}function j(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return a},setClearColor:function(Z,$=1){a.set(Z),u=$,T(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(Z){u=Z,T(a,u)},render:O,addToRenderList:N,dispose:j}}function ble(n,t){let e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=x(null),s=r,o=!1;function a(V,se,we,de,je){let Ue=!1,he=v(de,we,se);s!==he&&(s=he,d(s.object)),Ue=C(V,de,we,je),Ue&&A(V,de,we,je),je!==null&&t.update(je,n.ELEMENT_ARRAY_BUFFER),(Ue||o)&&(o=!1,$(V,se,we,de),je!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(je).buffer))}function u(){return n.createVertexArray()}function d(V){return n.bindVertexArray(V)}function g(V){return n.deleteVertexArray(V)}function v(V,se,we){let de=we.wireframe===!0,je=i[V.id];je===void 0&&(je={},i[V.id]=je);let Ue=je[se.id];Ue===void 0&&(Ue={},je[se.id]=Ue);let he=Ue[de];return he===void 0&&(he=x(u()),Ue[de]=he),he}function x(V){let se=[],we=[],de=[];for(let je=0;je<e;je++)se[je]=0,we[je]=0,de[je]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:se,enabledAttributes:we,attributeDivisors:de,object:V,attributes:{},index:null}}function C(V,se,we,de){let je=s.attributes,Ue=se.attributes,he=0,Pe=we.getAttributes();for(let me in Pe)if(Pe[me].location>=0){let nt=je[me],xt=Ue[me];if(xt===void 0&&(me==="instanceMatrix"&&V.instanceMatrix&&(xt=V.instanceMatrix),me==="instanceColor"&&V.instanceColor&&(xt=V.instanceColor)),nt===void 0||nt.attribute!==xt||xt&&nt.data!==xt.data)return!0;he++}return s.attributesNum!==he||s.index!==de}function A(V,se,we,de){let je={},Ue=se.attributes,he=0,Pe=we.getAttributes();for(let me in Pe)if(Pe[me].location>=0){let nt=Ue[me];nt===void 0&&(me==="instanceMatrix"&&V.instanceMatrix&&(nt=V.instanceMatrix),me==="instanceColor"&&V.instanceColor&&(nt=V.instanceColor));let xt={};xt.attribute=nt,nt&&nt.data&&(xt.data=nt.data),je[me]=xt,he++}s.attributes=je,s.attributesNum=he,s.index=de}function O(){let V=s.newAttributes;for(let se=0,we=V.length;se<we;se++)V[se]=0}function N(V){T(V,0)}function T(V,se){let we=s.newAttributes,de=s.enabledAttributes,je=s.attributeDivisors;we[V]=1,de[V]===0&&(n.enableVertexAttribArray(V),de[V]=1),je[V]!==se&&(n.vertexAttribDivisor(V,se),je[V]=se)}function j(){let V=s.newAttributes,se=s.enabledAttributes;for(let we=0,de=se.length;we<de;we++)se[we]!==V[we]&&(n.disableVertexAttribArray(we),se[we]=0)}function Z(V,se,we,de,je,Ue,he){he===!0?n.vertexAttribIPointer(V,se,we,je,Ue):n.vertexAttribPointer(V,se,we,de,je,Ue)}function $(V,se,we,de){O();let je=de.attributes,Ue=we.getAttributes(),he=se.defaultAttributeValues;for(let Pe in Ue){let me=Ue[Pe];if(me.location>=0){let $e=je[Pe];if($e===void 0&&(Pe==="instanceMatrix"&&V.instanceMatrix&&($e=V.instanceMatrix),Pe==="instanceColor"&&V.instanceColor&&($e=V.instanceColor)),$e!==void 0){let nt=$e.normalized,xt=$e.itemSize,Tt=t.get($e);if(Tt===void 0)continue;let ut=Tt.buffer,Ie=Tt.type,at=Tt.bytesPerElement,Pt=Ie===n.INT||Ie===n.UNSIGNED_INT||$e.gpuType===ZM;if($e.isInterleavedBufferAttribute){let rt=$e.data,Ut=rt.stride,Cn=$e.offset;if(rt.isInstancedInterleavedBuffer){for(let hn=0;hn<me.locationSize;hn++)T(me.location+hn,rt.meshPerAttribute);V.isInstancedMesh!==!0&&de._maxInstanceCount===void 0&&(de._maxInstanceCount=rt.meshPerAttribute*rt.count)}else for(let hn=0;hn<me.locationSize;hn++)N(me.location+hn);n.bindBuffer(n.ARRAY_BUFFER,ut);for(let hn=0;hn<me.locationSize;hn++)Z(me.location+hn,xt/me.locationSize,Ie,nt,Ut*at,(Cn+xt/me.locationSize*hn)*at,Pt)}else{if($e.isInstancedBufferAttribute){for(let rt=0;rt<me.locationSize;rt++)T(me.location+rt,$e.meshPerAttribute);V.isInstancedMesh!==!0&&de._maxInstanceCount===void 0&&(de._maxInstanceCount=$e.meshPerAttribute*$e.count)}else for(let rt=0;rt<me.locationSize;rt++)N(me.location+rt);n.bindBuffer(n.ARRAY_BUFFER,ut);for(let rt=0;rt<me.locationSize;rt++)Z(me.location+rt,xt/me.locationSize,Ie,nt,xt*at,xt/me.locationSize*rt*at,Pt)}}else if(he!==void 0){let nt=he[Pe];if(nt!==void 0)switch(nt.length){case 2:n.vertexAttrib2fv(me.location,nt);break;case 3:n.vertexAttrib3fv(me.location,nt);break;case 4:n.vertexAttrib4fv(me.location,nt);break;default:n.vertexAttrib1fv(me.location,nt)}}}}j()}function le(){ue();for(let V in i){let se=i[V];for(let we in se){let de=se[we];for(let je in de)g(de[je].object),delete de[je];delete se[we]}delete i[V]}}function K(V){if(i[V.id]===void 0)return;let se=i[V.id];for(let we in se){let de=se[we];for(let je in de)g(de[je].object),delete de[je];delete se[we]}delete i[V.id]}function oe(V){for(let se in i){let we=i[se];if(we[V.id]===void 0)continue;let de=we[V.id];for(let je in de)g(de[je].object),delete de[je];delete we[V.id]}}function ue(){te(),o=!0,s!==r&&(s=r,d(s.object))}function te(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:ue,resetDefaultState:te,dispose:le,releaseStatesOfGeometry:K,releaseStatesOfProgram:oe,initAttributes:O,enableAttribute:N,disableUnusedAttributes:j}}function xle(n,t,e){let i;function r(d){i=d}function s(d,g){n.drawArrays(i,d,g),e.update(g,i,1)}function o(d,g,v){v!==0&&(n.drawArraysInstanced(i,d,g,v),e.update(g,i,v))}function a(d,g,v){if(v===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,d,0,g,0,v);let C=0;for(let A=0;A<v;A++)C+=g[A];e.update(C,i,1)}function u(d,g,v,x){if(v===0)return;let C=t.get("WEBGL_multi_draw");if(C===null)for(let A=0;A<d.length;A++)o(d[A],g[A],x[A]);else{C.multiDrawArraysInstancedWEBGL(i,d,0,g,0,x,0,v);let A=0;for(let O=0;O<v;O++)A+=g[O]*x[O];e.update(A,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=u}function wle(n,t,e,i){let r;function s(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let oe=t.get("EXT_texture_filter_anisotropic");r=n.getParameter(oe.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(oe){return!(oe!==ol&&i.convert(oe)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(oe){let ue=oe===Fy&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(oe!==Fc&&i.convert(oe)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&oe!==Hl&&!ue)}function u(oe){if(oe==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";oe="mediump"}return oe==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=e.precision!==void 0?e.precision:"highp",g=u(d);g!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",g,"instead."),d=g);let v=e.logarithmicDepthBuffer===!0,x=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),C=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),A=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),O=n.getParameter(n.MAX_TEXTURE_SIZE),N=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),T=n.getParameter(n.MAX_VERTEX_ATTRIBS),j=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),Z=n.getParameter(n.MAX_VARYING_VECTORS),$=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),le=A>0,K=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:u,textureFormatReadable:o,textureTypeReadable:a,precision:d,logarithmicDepthBuffer:v,reverseDepthBuffer:x,maxTextures:C,maxVertexTextures:A,maxTextureSize:O,maxCubemapSize:N,maxAttributes:T,maxVertexUniforms:j,maxVaryings:Z,maxFragmentUniforms:$,vertexTextures:le,maxSamples:K}}function Sle(n){let t=this,e=null,i=0,r=!1,s=!1,o=new Vl,a=new gi,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(v,x){let C=v.length!==0||x||i!==0||r;return r=x,i=v.length,C},this.beginShadows=function(){s=!0,g(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(v,x){e=g(v,x,0)},this.setState=function(v,x,C){let A=v.clippingPlanes,O=v.clipIntersection,N=v.clipShadows,T=n.get(v);if(!r||A===null||A.length===0||s&&!N)s?g(null):d();else{let j=s?0:i,Z=j*4,$=T.clippingState||null;u.value=$,$=g(A,x,Z,C);for(let le=0;le!==Z;++le)$[le]=e[le];T.clippingState=$,this.numIntersection=O?this.numPlanes:0,this.numPlanes+=j}};function d(){u.value!==e&&(u.value=e,u.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function g(v,x,C,A){let O=v!==null?v.length:0,N=null;if(O!==0){if(N=u.value,A!==!0||N===null){let T=C+O*4,j=x.matrixWorldInverse;a.getNormalMatrix(j),(N===null||N.length<T)&&(N=new Float32Array(T));for(let Z=0,$=C;Z!==O;++Z,$+=4)o.copy(v[Z]).applyMatrix4(j,a),o.normal.toArray(N,$),N[$+3]=o.constant}u.value=N,u.needsUpdate=!0}return t.numPlanes=O,t.numIntersection=0,N}}function Cle(n){let t=new WeakMap;function e(o,a){return a===qM?o.mapping=Hp:a===XM&&(o.mapping=jp),o}function i(o){if(o&&o.isTexture){let a=o.mapping;if(a===qM||a===XM)if(t.has(o)){let u=t.get(o).texture;return e(u,o.mapping)}else{let u=o.image;if(u&&u.height>0){let d=new EM(u.height);return d.fromEquirectangularTexture(n,o),t.set(o,d),o.addEventListener("dispose",r),e(d.texture,o.mapping)}else return null}}return o}function r(o){let a=o.target;a.removeEventListener("dispose",r);let u=t.get(a);u!==void 0&&(t.delete(a),u.dispose())}function s(){t=new WeakMap}return{get:i,dispose:s}}var Hy=4,w5=[.125,.215,.35,.446,.526,.582],Zp=20,xk=new zp,S5=new kn,wk=null,Sk=0,Ck=0,Mk=!1,Yp=(1+Math.sqrt(5))/2,Uy=1/Yp,C5=[new Le(-Yp,Uy,0),new Le(Yp,Uy,0),new Le(-Uy,0,Yp),new Le(Uy,0,Yp),new Le(0,Yp,-Uy),new Le(0,Yp,Uy),new Le(-1,1,-1),new Le(1,1,-1),new Le(-1,1,1),new Le(1,1,1)],Mle=new Le,P1=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,r=100,s={}){let{size:o=256,position:a=Mle}=s;wk=this._renderer.getRenderTarget(),Sk=this._renderer.getActiveCubeFace(),Ck=this._renderer.getActiveMipmapLevel(),Mk=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);let u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(t,i,r,u,a),e>0&&this._blur(u,0,0,e),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=T5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=E5(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(wk,Sk,Ck),this._renderer.xr.enabled=Mk,t.scissorTest=!1,I1(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Hp||t.mapping===jp?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),wk=this._renderer.getRenderTarget(),Sk=this._renderer.getActiveCubeFace(),Ck=this._renderer.getActiveMipmapLevel(),Mk=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:na,minFilter:na,generateMipmaps:!1,type:Fy,format:ol,colorSpace:ho,depthBuffer:!1},r=M5(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=M5(t,e,i);let{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ele(s)),this._blurMaterial=Tle(s,t,e)}return r}_compileMaterial(t){let e=new As(this._lodPlanes[0],t);this._renderer.compile(e,xk)}_sceneToCubeUV(t,e,i,r,s){let u=new Es(90,1,e,i),d=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],v=this._renderer,x=v.autoClear,C=v.toneMapping;v.getClearColor(S5),v.toneMapping=Lh,v.autoClear=!1;let A=new kc({name:"PMREM.Background",side:sa,depthWrite:!1,depthTest:!1}),O=new As(new Kd,A),N=!1,T=t.background;T?T.isColor&&(A.color.copy(T),t.background=null,N=!0):(A.color.copy(S5),N=!0);for(let j=0;j<6;j++){let Z=j%3;Z===0?(u.up.set(0,d[j],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x+g[j],s.y,s.z)):Z===1?(u.up.set(0,0,d[j]),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y+g[j],s.z)):(u.up.set(0,d[j],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y,s.z+g[j]));let $=this._cubeSize;I1(r,Z*$,j>2?$:0,$,$),v.setRenderTarget(r),N&&v.render(O,u),v.render(t,u)}O.geometry.dispose(),O.material.dispose(),v.toneMapping=C,v.autoClear=x,t.background=T}_textureToCubeUV(t,e){let i=this._renderer,r=t.mapping===Hp||t.mapping===jp;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=T5()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=E5());let s=r?this._cubemapMaterial:this._equirectMaterial,o=new As(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=t;let u=this._cubeSize;I1(e,0,0,3*u,2*u),i.setRenderTarget(e),i.render(o,xk)}_applyPMREM(t){let e=this._renderer,i=e.autoClear;e.autoClear=!1;let r=this._lodPlanes.length;for(let s=1;s<r;s++){let o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=C5[(r-s-1)%C5.length];this._blur(t,s-1,s,o,a)}e.autoClear=i}_blur(t,e,i,r,s){let o=this._pingPongRenderTarget;this._halfBlur(t,o,e,i,r,"latitudinal",s),this._halfBlur(o,t,i,i,r,"longitudinal",s)}_halfBlur(t,e,i,r,s,o,a){let u=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let g=3,v=new As(this._lodPlanes[r],d),x=d.uniforms,C=this._sizeLods[i]-1,A=isFinite(s)?Math.PI/(2*C):2*Math.PI/(2*Zp-1),O=s/A,N=isFinite(s)?1+Math.floor(g*O):Zp;N>Zp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${N} samples when the maximum is set to ${Zp}`);let T=[],j=0;for(let oe=0;oe<Zp;++oe){let ue=oe/O,te=Math.exp(-ue*ue/2);T.push(te),oe===0?j+=te:oe<N&&(j+=2*te)}for(let oe=0;oe<T.length;oe++)T[oe]=T[oe]/j;x.envMap.value=t.texture,x.samples.value=N,x.weights.value=T,x.latitudinal.value=o==="latitudinal",a&&(x.poleAxis.value=a);let{_lodMax:Z}=this;x.dTheta.value=A,x.mipInt.value=Z-i;let $=this._sizeLods[r],le=3*$*(r>Z-Hy?r-Z+Hy:0),K=4*(this._cubeSize-$);I1(e,le,K,3*$,2*$),u.setRenderTarget(e),u.render(v,xk)}};function Ele(n){let t=[],e=[],i=[],r=n,s=n-Hy+1+w5.length;for(let o=0;o<s;o++){let a=Math.pow(2,r);e.push(a);let u=1/a;o>n-Hy?u=w5[o-n+Hy-1]:o===0&&(u=0),i.push(u);let d=1/(a-2),g=-d,v=1+d,x=[g,g,v,g,v,v,g,g,v,v,g,v],C=6,A=6,O=3,N=2,T=1,j=new Float32Array(O*A*C),Z=new Float32Array(N*A*C),$=new Float32Array(T*A*C);for(let K=0;K<C;K++){let oe=K%3*2/3-1,ue=K>2?0:-1,te=[oe,ue,0,oe+2/3,ue,0,oe+2/3,ue+1,0,oe,ue,0,oe+2/3,ue+1,0,oe,ue+1,0];j.set(te,O*A*K),Z.set(x,N*A*K);let V=[K,K,K,K,K,K];$.set(V,T*A*K)}let le=new Ta;le.setAttribute("position",new Ts(j,O)),le.setAttribute("uv",new Ts(Z,N)),le.setAttribute("faceIndex",new Ts($,T)),t.push(le),r>Hy&&r--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function M5(n,t,e){let i=new Ru(n,t,e);return i.texture.mapping=ob,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function I1(n,t,e,i,r){n.viewport.set(t,e,i,r),n.scissor.set(t,e,i,r)}function Tle(n,t,e){let i=new Float32Array(Zp),r=new Le(0,1,0);return new Lc({name:"SphericalGaussianBlur",defines:{n:Zp,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Nk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:kh,depthTest:!1,depthWrite:!1})}function E5(){return new Lc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Nk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:kh,depthTest:!1,depthWrite:!1})}function T5(){return new Lc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Nk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:kh,depthTest:!1,depthWrite:!1})}function Nk(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Ale(n){let t=new WeakMap,e=null;function i(a){if(a&&a.isTexture){let u=a.mapping,d=u===qM||u===XM,g=u===Hp||u===jp;if(d||g){let v=t.get(a),x=v!==void 0?v.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==x)return e===null&&(e=new P1(n)),v=d?e.fromEquirectangular(a,v):e.fromCubemap(a,v),v.texture.pmremVersion=a.pmremVersion,t.set(a,v),v.texture;if(v!==void 0)return v.texture;{let C=a.image;return d&&C&&C.height>0||g&&C&&r(C)?(e===null&&(e=new P1(n)),v=d?e.fromEquirectangular(a):e.fromCubemap(a),v.texture.pmremVersion=a.pmremVersion,t.set(a,v),a.addEventListener("dispose",s),v.texture):null}}}return a}function r(a){let u=0,d=6;for(let g=0;g<d;g++)a[g]!==void 0&&u++;return u===d}function s(a){let u=a.target;u.removeEventListener("dispose",s);let d=t.get(u);d!==void 0&&(t.delete(u),d.dispose())}function o(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:o}}function Dle(n){let t={};function e(i){if(t[i]!==void 0)return t[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return t[i]=r,r}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){let r=e(i);return r===null&&Fp("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Ile(n,t,e,i){let r={},s=new WeakMap;function o(v){let x=v.target;x.index!==null&&t.remove(x.index);for(let A in x.attributes)t.remove(x.attributes[A]);x.removeEventListener("dispose",o),delete r[x.id];let C=s.get(x);C&&(t.remove(C),s.delete(x)),i.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,e.memory.geometries--}function a(v,x){return r[x.id]===!0||(x.addEventListener("dispose",o),r[x.id]=!0,e.memory.geometries++),x}function u(v){let x=v.attributes;for(let C in x)t.update(x[C],n.ARRAY_BUFFER)}function d(v){let x=[],C=v.index,A=v.attributes.position,O=0;if(C!==null){let j=C.array;O=C.version;for(let Z=0,$=j.length;Z<$;Z+=3){let le=j[Z+0],K=j[Z+1],oe=j[Z+2];x.push(le,K,K,oe,oe,le)}}else if(A!==void 0){let j=A.array;O=A.version;for(let Z=0,$=j.length/3-1;Z<$;Z+=3){let le=Z+0,K=Z+1,oe=Z+2;x.push(le,K,K,oe,oe,le)}}else return;let N=new(gk(x)?F_:O_)(x,1);N.version=O;let T=s.get(v);T&&t.remove(T),s.set(v,N)}function g(v){let x=s.get(v);if(x){let C=v.index;C!==null&&x.version<C.version&&d(v)}else d(v);return s.get(v)}return{get:a,update:u,getWireframeAttribute:g}}function Rle(n,t,e){let i;function r(x){i=x}let s,o;function a(x){s=x.type,o=x.bytesPerElement}function u(x,C){n.drawElements(i,C,s,x*o),e.update(C,i,1)}function d(x,C,A){A!==0&&(n.drawElementsInstanced(i,C,s,x*o,A),e.update(C,i,A))}function g(x,C,A){if(A===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,C,0,s,x,0,A);let N=0;for(let T=0;T<A;T++)N+=C[T];e.update(N,i,1)}function v(x,C,A,O){if(A===0)return;let N=t.get("WEBGL_multi_draw");if(N===null)for(let T=0;T<x.length;T++)d(x[T]/o,C[T],O[T]);else{N.multiDrawElementsInstancedWEBGL(i,C,0,s,x,0,O,0,A);let T=0;for(let j=0;j<A;j++)T+=C[j]*O[j];e.update(T,i,1)}}this.setMode=r,this.setIndex=a,this.render=u,this.renderInstances=d,this.renderMultiDraw=g,this.renderMultiDrawInstances=v}function Ple(n){let t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(e.calls++,o){case n.TRIANGLES:e.triangles+=a*(s/3);break;case n.LINES:e.lines+=a*(s/2);break;case n.LINE_STRIP:e.lines+=a*(s-1);break;case n.LINE_LOOP:e.lines+=a*s;break;case n.POINTS:e.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:r,update:i}}function kle(n,t,e){let i=new WeakMap,r=new rr;function s(o,a,u){let d=o.morphTargetInfluences,g=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,v=g!==void 0?g.length:0,x=i.get(a);if(x===void 0||x.count!==v){let V=function(){ue.dispose(),i.delete(a),a.removeEventListener("dispose",V)};var C=V;x!==void 0&&x.texture.dispose();let A=a.morphAttributes.position!==void 0,O=a.morphAttributes.normal!==void 0,N=a.morphAttributes.color!==void 0,T=a.morphAttributes.position||[],j=a.morphAttributes.normal||[],Z=a.morphAttributes.color||[],$=0;A===!0&&($=1),O===!0&&($=2),N===!0&&($=3);let le=a.attributes.position.count*$,K=1;le>t.maxTextureSize&&(K=Math.ceil(le/t.maxTextureSize),le=t.maxTextureSize);let oe=new Float32Array(le*K*4*v),ue=new N_(oe,le,K,v);ue.type=Hl,ue.needsUpdate=!0;let te=$*4;for(let se=0;se<v;se++){let we=T[se],de=j[se],je=Z[se],Ue=le*K*4*se;for(let he=0;he<we.count;he++){let Pe=he*te;A===!0&&(r.fromBufferAttribute(we,he),oe[Ue+Pe+0]=r.x,oe[Ue+Pe+1]=r.y,oe[Ue+Pe+2]=r.z,oe[Ue+Pe+3]=0),O===!0&&(r.fromBufferAttribute(de,he),oe[Ue+Pe+4]=r.x,oe[Ue+Pe+5]=r.y,oe[Ue+Pe+6]=r.z,oe[Ue+Pe+7]=0),N===!0&&(r.fromBufferAttribute(je,he),oe[Ue+Pe+8]=r.x,oe[Ue+Pe+9]=r.y,oe[Ue+Pe+10]=r.z,oe[Ue+Pe+11]=je.itemSize===4?r.w:1)}}x={count:v,texture:ue,size:new qn(le,K)},i.set(a,x),a.addEventListener("dispose",V)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)u.getUniforms().setValue(n,"morphTexture",o.morphTexture,e);else{let A=0;for(let N=0;N<d.length;N++)A+=d[N];let O=a.morphTargetsRelative?1:1-A;u.getUniforms().setValue(n,"morphTargetBaseInfluence",O),u.getUniforms().setValue(n,"morphTargetInfluences",d)}u.getUniforms().setValue(n,"morphTargetsTexture",x.texture,e),u.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}return{update:s}}function Lle(n,t,e,i){let r=new WeakMap;function s(u){let d=i.render.frame,g=u.geometry,v=t.get(u,g);if(r.get(v)!==d&&(t.update(v),r.set(v,d)),u.isInstancedMesh&&(u.hasEventListener("dispose",a)===!1&&u.addEventListener("dispose",a),r.get(u)!==d&&(e.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&&e.update(u.instanceColor,n.ARRAY_BUFFER),r.set(u,d))),u.isSkinnedMesh){let x=u.skeleton;r.get(x)!==d&&(x.update(),r.set(x,d))}return v}function o(){r=new WeakMap}function a(u){let d=u.target;d.removeEventListener("dispose",a),e.remove(d.instanceMatrix),d.instanceColor!==null&&e.remove(d.instanceColor)}return{update:s,dispose:o}}var $5=new al,A5=new q_(1,1),q5=new N_,X5=new CM,Y5=new V_,D5=[],I5=[],R5=new Float32Array(16),P5=new Float32Array(9),k5=new Float32Array(4);function Wy(n,t,e){let i=n[0];if(i<=0||i>0)return n;let r=t*e,s=D5[r];if(s===void 0&&(s=new Float32Array(r),D5[r]=s),t!==0){i.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=e,n[o].toArray(s,a)}return s}function Hs(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function js(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function L1(n,t){let e=I5[t];e===void 0&&(e=new Int32Array(t),I5[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function Nle(n,t){let e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function Ole(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Hs(e,t))return;n.uniform2fv(this.addr,t),js(e,t)}}function Fle(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Hs(e,t))return;n.uniform3fv(this.addr,t),js(e,t)}}function Ble(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Hs(e,t))return;n.uniform4fv(this.addr,t),js(e,t)}}function Vle(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Hs(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),js(e,t)}else{if(Hs(e,i))return;k5.set(i),n.uniformMatrix2fv(this.addr,!1,k5),js(e,i)}}function zle(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Hs(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),js(e,t)}else{if(Hs(e,i))return;P5.set(i),n.uniformMatrix3fv(this.addr,!1,P5),js(e,i)}}function Ule(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Hs(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),js(e,t)}else{if(Hs(e,i))return;R5.set(i),n.uniformMatrix4fv(this.addr,!1,R5),js(e,i)}}function Hle(n,t){let e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function jle(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Hs(e,t))return;n.uniform2iv(this.addr,t),js(e,t)}}function Wle(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Hs(e,t))return;n.uniform3iv(this.addr,t),js(e,t)}}function Gle(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Hs(e,t))return;n.uniform4iv(this.addr,t),js(e,t)}}function $le(n,t){let e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function qle(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Hs(e,t))return;n.uniform2uiv(this.addr,t),js(e,t)}}function Xle(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Hs(e,t))return;n.uniform3uiv(this.addr,t),js(e,t)}}function Yle(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Hs(e,t))return;n.uniform4uiv(this.addr,t),js(e,t)}}function Zle(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(A5.compareFunction=fk,s=A5):s=$5,e.setTexture2D(t||s,r)}function Kle(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture3D(t||X5,r)}function Qle(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTextureCube(t||Y5,r)}function Jle(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2DArray(t||q5,r)}function ece(n){switch(n){case 5126:return Nle;case 35664:return Ole;case 35665:return Fle;case 35666:return Ble;case 35674:return Vle;case 35675:return zle;case 35676:return Ule;case 5124:case 35670:return Hle;case 35667:case 35671:return jle;case 35668:case 35672:return Wle;case 35669:case 35673:return Gle;case 5125:return $le;case 36294:return qle;case 36295:return Xle;case 36296:return Yle;case 35678:case 36198:case 36298:case 36306:case 35682:return Zle;case 35679:case 36299:case 36307:return Kle;case 35680:case 36300:case 36308:case 36293:return Qle;case 36289:case 36303:case 36311:case 36292:return Jle}}function tce(n,t){n.uniform1fv(this.addr,t)}function nce(n,t){let e=Wy(t,this.size,2);n.uniform2fv(this.addr,e)}function ice(n,t){let e=Wy(t,this.size,3);n.uniform3fv(this.addr,e)}function rce(n,t){let e=Wy(t,this.size,4);n.uniform4fv(this.addr,e)}function sce(n,t){let e=Wy(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function oce(n,t){let e=Wy(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function ace(n,t){let e=Wy(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function lce(n,t){n.uniform1iv(this.addr,t)}function cce(n,t){n.uniform2iv(this.addr,t)}function uce(n,t){n.uniform3iv(this.addr,t)}function hce(n,t){n.uniform4iv(this.addr,t)}function dce(n,t){n.uniform1uiv(this.addr,t)}function fce(n,t){n.uniform2uiv(this.addr,t)}function pce(n,t){n.uniform3uiv(this.addr,t)}function mce(n,t){n.uniform4uiv(this.addr,t)}function gce(n,t,e){let i=this.cache,r=t.length,s=L1(e,r);Hs(i,s)||(n.uniform1iv(this.addr,s),js(i,s));for(let o=0;o!==r;++o)e.setTexture2D(t[o]||$5,s[o])}function yce(n,t,e){let i=this.cache,r=t.length,s=L1(e,r);Hs(i,s)||(n.uniform1iv(this.addr,s),js(i,s));for(let o=0;o!==r;++o)e.setTexture3D(t[o]||X5,s[o])}function vce(n,t,e){let i=this.cache,r=t.length,s=L1(e,r);Hs(i,s)||(n.uniform1iv(this.addr,s),js(i,s));for(let o=0;o!==r;++o)e.setTextureCube(t[o]||Y5,s[o])}function _ce(n,t,e){let i=this.cache,r=t.length,s=L1(e,r);Hs(i,s)||(n.uniform1iv(this.addr,s),js(i,s));for(let o=0;o!==r;++o)e.setTexture2DArray(t[o]||q5,s[o])}function bce(n){switch(n){case 5126:return tce;case 35664:return nce;case 35665:return ice;case 35666:return rce;case 35674:return sce;case 35675:return oce;case 35676:return ace;case 5124:case 35670:return lce;case 35667:case 35671:return cce;case 35668:case 35672:return uce;case 35669:case 35673:return hce;case 5125:return dce;case 36294:return fce;case 36295:return pce;case 36296:return mce;case 35678:case 36198:case 36298:case 36306:case 35682:return gce;case 35679:case 36299:case 36307:return yce;case 35680:case 36300:case 36308:case 36293:return vce;case 36289:case 36303:case 36311:case 36292:return _ce}}var Tk=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=ece(e.type)}},Ak=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=bce(e.type)}},Dk=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){let r=this.seq;for(let s=0,o=r.length;s!==o;++s){let a=r[s];a.setValue(t,e[a.id],i)}}},Ek=/(\w+)(\])?(\[|\.)?/g;function L5(n,t){n.seq.push(t),n.map[t.id]=t}function xce(n,t,e){let i=n.name,r=i.length;for(Ek.lastIndex=0;;){let s=Ek.exec(i),o=Ek.lastIndex,a=s[1],u=s[2]==="]",d=s[3];if(u&&(a=a|0),d===void 0||d==="["&&o+2===r){L5(e,d===void 0?new Tk(a,n,t):new Ak(a,n,t));break}else{let v=e.map[a];v===void 0&&(v=new Dk(a),L5(e,v)),e=v}}}var jy=class{constructor(t,e){this.seq=[],this.map={};let i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let s=t.getActiveUniform(e,r),o=t.getUniformLocation(e,s.name);xce(s,o,this)}}setValue(t,e,i,r){let s=this.map[e];s!==void 0&&s.setValue(t,i,r)}setOptional(t,e,i){let r=e[i];r!==void 0&&this.setValue(t,i,r)}static upload(t,e,i,r){for(let s=0,o=e.length;s!==o;++s){let a=e[s],u=i[a.id];u.needsUpdate!==!1&&a.setValue(t,u.value,r)}}static seqWithValue(t,e){let i=[];for(let r=0,s=t.length;r!==s;++r){let o=t[r];o.id in e&&i.push(o)}return i}};function N5(n,t,e){let i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}var wce=37297,Sce=0;function Cce(n,t){let e=n.split(`
`),i=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++){let a=o+1;i.push(`${a===t?">":" "} ${a}: ${e[o]}`)}return i.join(`
`)}var O5=new gi;function Mce(n){Wi._getMatrix(O5,Wi.workingColorSpace,n);let t=`mat3( ${O5.elements.map(e=>e.toFixed(4))} )`;switch(Wi.getTransfer(n)){case k_:return[t,"LinearTransferOETF"];case ur:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function F5(n,t,e){let i=n.getShaderParameter(t,n.COMPILE_STATUS),r=n.getShaderInfoLog(t).trim();if(i&&r==="")return"";let s=/ERROR: 0:(\d+)/.exec(r);if(s){let o=parseInt(s[1]);return e.toUpperCase()+`

`+r+`

`+Cce(n.getShaderSource(t),o)}else return r}function Ece(n,t){let e=Mce(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function Tce(n,t){let e;switch(t){case Y4:e="Linear";break;case Z4:e="Reinhard";break;case K4:e="Cineon";break;case Q4:e="ACESFilmic";break;case e5:e="AgX";break;case t5:e="Neutral";break;case J4:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}var R1=new Le;function Ace(){Wi.getLuminanceCoefficients(R1);let n=R1.x.toFixed(4),t=R1.y.toFixed(4),e=R1.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Dce(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(pb).join(`
`)}function Ice(n){let t=[];for(let e in n){let i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function Rce(n,t){let e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let s=n.getActiveAttrib(t,r),o=s.name,a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),e[o]={type:s.type,location:n.getAttribLocation(t,o),locationSize:a}}return e}function pb(n){return n!==""}function B5(n,t){let e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function V5(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Pce=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ik(n){return n.replace(Pce,Lce)}var kce=new Map;function Lce(n,t){let e=Ti[t];if(e===void 0){let i=kce.get(t);if(i!==void 0)e=Ti[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return Ik(e)}var Nce=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function z5(n){return n.replace(Nce,Oce)}function Oce(n,t,e,i){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function U5(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function Fce(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===JP?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===VM?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Fu&&(t="SHADOWMAP_TYPE_VSM"),t}function Bce(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Hp:case jp:t="ENVMAP_TYPE_CUBE";break;case ob:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Vce(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case jp:t="ENVMAP_MODE_REFRACTION";break}return t}function zce(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case ik:t="ENVMAP_BLENDING_MULTIPLY";break;case q4:t="ENVMAP_BLENDING_MIX";break;case X4:t="ENVMAP_BLENDING_ADD";break}return t}function Uce(n){let t=n.envMapCubeUVHeight;if(t===null)return null;let e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function Hce(n,t,e,i){let r=n.getContext(),s=e.defines,o=e.vertexShader,a=e.fragmentShader,u=Fce(e),d=Bce(e),g=Vce(e),v=zce(e),x=Uce(e),C=Dce(e),A=Ice(s),O=r.createProgram(),N,T,j=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(N=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,A].filter(pb).join(`
`),N.length>0&&(N+=`
`),T=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,A].filter(pb).join(`
`),T.length>0&&(T+=`
`)):(N=[U5(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,A,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+g:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(pb).join(`
`),T=[U5(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,A,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.envMap?"#define "+g:"",e.envMap?"#define "+v:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Lh?"#define TONE_MAPPING":"",e.toneMapping!==Lh?Ti.tonemapping_pars_fragment:"",e.toneMapping!==Lh?Tce("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Ti.colorspace_pars_fragment,Ece("linearToOutputTexel",e.outputColorSpace),Ace(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(pb).join(`
`)),o=Ik(o),o=B5(o,e),o=V5(o,e),a=Ik(a),a=B5(a,e),a=V5(a,e),o=z5(o),a=z5(a),e.isRawShaderMaterial!==!0&&(j=`#version 300 es
`,N=[C,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+N,T=["#define varying in",e.glslVersion===pk?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===pk?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+T);let Z=j+N+o,$=j+T+a,le=N5(r,r.VERTEX_SHADER,Z),K=N5(r,r.FRAGMENT_SHADER,$);r.attachShader(O,le),r.attachShader(O,K),e.index0AttributeName!==void 0?r.bindAttribLocation(O,0,e.index0AttributeName):e.morphTargets===!0&&r.bindAttribLocation(O,0,"position"),r.linkProgram(O);function oe(se){if(n.debug.checkShaderErrors){let we=r.getProgramInfoLog(O).trim(),de=r.getShaderInfoLog(le).trim(),je=r.getShaderInfoLog(K).trim(),Ue=!0,he=!0;if(r.getProgramParameter(O,r.LINK_STATUS)===!1)if(Ue=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,O,le,K);else{let Pe=F5(r,le,"vertex"),me=F5(r,K,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(O,r.VALIDATE_STATUS)+`

Material Name: `+se.name+`
Material Type: `+se.type+`

Program Info Log: `+we+`
`+Pe+`
`+me)}else we!==""?console.warn("THREE.WebGLProgram: Program Info Log:",we):(de===""||je==="")&&(he=!1);he&&(se.diagnostics={runnable:Ue,programLog:we,vertexShader:{log:de,prefix:N},fragmentShader:{log:je,prefix:T}})}r.deleteShader(le),r.deleteShader(K),ue=new jy(r,O),te=Rce(r,O)}let ue;this.getUniforms=function(){return ue===void 0&&oe(this),ue};let te;this.getAttributes=function(){return te===void 0&&oe(this),te};let V=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return V===!1&&(V=r.getProgramParameter(O,wce)),V},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(O),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=Sce++,this.cacheKey=t,this.usedTimes=1,this.program=O,this.vertexShader=le,this.fragmentShader=K,this}var jce=0,Rk=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,i=t.fragmentShader,r=this._getShaderStage(e),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(t);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){let e=this.shaderCache,i=e.get(t);return i===void 0&&(i=new Pk(t),e.set(t,i)),i}},Pk=class{constructor(t){this.id=jce++,this.code=t,this.usedTimes=0}};function Wce(n,t,e,i,r,s,o){let a=new Cy,u=new Rk,d=new Set,g=[],v=r.logarithmicDepthBuffer,x=r.vertexTextures,C=r.precision,A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function O(te){return d.add(te),te===0?"uv":`uv${te}`}function N(te,V,se,we,de){let je=we.fog,Ue=de.geometry,he=te.isMeshStandardMaterial?we.environment:null,Pe=(te.isMeshStandardMaterial?e:t).get(te.envMap||he),me=Pe&&Pe.mapping===ob?Pe.image.height:null,$e=A[te.type];te.precision!==null&&(C=r.getMaxPrecision(te.precision),C!==te.precision&&console.warn("THREE.WebGLProgram.getParameters:",te.precision,"not supported, using",C,"instead."));let nt=Ue.morphAttributes.position||Ue.morphAttributes.normal||Ue.morphAttributes.color,xt=nt!==void 0?nt.length:0,Tt=0;Ue.morphAttributes.position!==void 0&&(Tt=1),Ue.morphAttributes.normal!==void 0&&(Tt=2),Ue.morphAttributes.color!==void 0&&(Tt=3);let ut,Ie,at,Pt;if($e){let Li=Bu[$e];ut=Li.vertexShader,Ie=Li.fragmentShader}else ut=te.vertexShader,Ie=te.fragmentShader,u.update(te),at=u.getVertexShaderID(te),Pt=u.getFragmentShaderID(te);let rt=n.getRenderTarget(),Ut=n.state.buffers.depth.getReversed(),Cn=de.isInstancedMesh===!0,hn=de.isBatchedMesh===!0,Mt=!!te.map,Xi=!!te.matcap,Fn=!!Pe,Me=!!te.aoMap,hr=!!te.lightMap,Kn=!!te.bumpMap,hi=!!te.normalMap,rn=!!te.displacementMap,Jn=!!te.emissiveMap,dn=!!te.metalnessMap,In=!!te.roughnessMap,Gi=te.anisotropy>0,fe=te.clearcoat>0,J=te.dispersion>0,Ge=te.iridescence>0,it=te.sheen>0,ht=te.transmission>0,Ke=Gi&&!!te.anisotropyMap,yn=fe&&!!te.clearcoatMap,Ht=fe&&!!te.clearcoatNormalMap,kt=fe&&!!te.clearcoatRoughnessMap,fn=Ge&&!!te.iridescenceMap,mt=Ge&&!!te.iridescenceThicknessMap,Jt=it&&!!te.sheenColorMap,pn=it&&!!te.sheenRoughnessMap,vn=!!te.specularMap,Ft=!!te.specularColorMap,_n=!!te.specularIntensityMap,Re=ht&&!!te.transmissionMap,Lt=ht&&!!te.thicknessMap,wt=!!te.gradientMap,nn=!!te.alphaMap,pt=te.alphaTest>0,ct=!!te.alphaHash,sn=!!te.extensions,Bn=Lh;te.toneMapped&&(rt===null||rt.isXRRenderTarget===!0)&&(Bn=n.toneMapping);let An={shaderID:$e,shaderType:te.type,shaderName:te.name,vertexShader:ut,fragmentShader:Ie,defines:te.defines,customVertexShaderID:at,customFragmentShaderID:Pt,isRawShaderMaterial:te.isRawShaderMaterial===!0,glslVersion:te.glslVersion,precision:C,batching:hn,batchingColor:hn&&de._colorsTexture!==null,instancing:Cn,instancingColor:Cn&&de.instanceColor!==null,instancingMorph:Cn&&de.morphTexture!==null,supportsVertexTextures:x,outputColorSpace:rt===null?n.outputColorSpace:rt.isXRRenderTarget===!0?rt.texture.colorSpace:ho,alphaToCoverage:!!te.alphaToCoverage,map:Mt,matcap:Xi,envMap:Fn,envMapMode:Fn&&Pe.mapping,envMapCubeUVHeight:me,aoMap:Me,lightMap:hr,bumpMap:Kn,normalMap:hi,displacementMap:x&&rn,emissiveMap:Jn,normalMapObjectSpace:hi&&te.normalMapType===o5,normalMapTangentSpace:hi&&te.normalMapType===dk,metalnessMap:dn,roughnessMap:In,anisotropy:Gi,anisotropyMap:Ke,clearcoat:fe,clearcoatMap:yn,clearcoatNormalMap:Ht,clearcoatRoughnessMap:kt,dispersion:J,iridescence:Ge,iridescenceMap:fn,iridescenceThicknessMap:mt,sheen:it,sheenColorMap:Jt,sheenRoughnessMap:pn,specularMap:vn,specularColorMap:Ft,specularIntensityMap:_n,transmission:ht,transmissionMap:Re,thicknessMap:Lt,gradientMap:wt,opaque:te.transparent===!1&&te.blending===Pp&&te.alphaToCoverage===!1,alphaMap:nn,alphaTest:pt,alphaHash:ct,combine:te.combine,mapUv:Mt&&O(te.map.channel),aoMapUv:Me&&O(te.aoMap.channel),lightMapUv:hr&&O(te.lightMap.channel),bumpMapUv:Kn&&O(te.bumpMap.channel),normalMapUv:hi&&O(te.normalMap.channel),displacementMapUv:rn&&O(te.displacementMap.channel),emissiveMapUv:Jn&&O(te.emissiveMap.channel),metalnessMapUv:dn&&O(te.metalnessMap.channel),roughnessMapUv:In&&O(te.roughnessMap.channel),anisotropyMapUv:Ke&&O(te.anisotropyMap.channel),clearcoatMapUv:yn&&O(te.clearcoatMap.channel),clearcoatNormalMapUv:Ht&&O(te.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:kt&&O(te.clearcoatRoughnessMap.channel),iridescenceMapUv:fn&&O(te.iridescenceMap.channel),iridescenceThicknessMapUv:mt&&O(te.iridescenceThicknessMap.channel),sheenColorMapUv:Jt&&O(te.sheenColorMap.channel),sheenRoughnessMapUv:pn&&O(te.sheenRoughnessMap.channel),specularMapUv:vn&&O(te.specularMap.channel),specularColorMapUv:Ft&&O(te.specularColorMap.channel),specularIntensityMapUv:_n&&O(te.specularIntensityMap.channel),transmissionMapUv:Re&&O(te.transmissionMap.channel),thicknessMapUv:Lt&&O(te.thicknessMap.channel),alphaMapUv:nn&&O(te.alphaMap.channel),vertexTangents:!!Ue.attributes.tangent&&(hi||Gi),vertexColors:te.vertexColors,vertexAlphas:te.vertexColors===!0&&!!Ue.attributes.color&&Ue.attributes.color.itemSize===4,pointsUvs:de.isPoints===!0&&!!Ue.attributes.uv&&(Mt||nn),fog:!!je,useFog:te.fog===!0,fogExp2:!!je&&je.isFogExp2,flatShading:te.flatShading===!0,sizeAttenuation:te.sizeAttenuation===!0,logarithmicDepthBuffer:v,reverseDepthBuffer:Ut,skinning:de.isSkinnedMesh===!0,morphTargets:Ue.morphAttributes.position!==void 0,morphNormals:Ue.morphAttributes.normal!==void 0,morphColors:Ue.morphAttributes.color!==void 0,morphTargetsCount:xt,morphTextureStride:Tt,numDirLights:V.directional.length,numPointLights:V.point.length,numSpotLights:V.spot.length,numSpotLightMaps:V.spotLightMap.length,numRectAreaLights:V.rectArea.length,numHemiLights:V.hemi.length,numDirLightShadows:V.directionalShadowMap.length,numPointLightShadows:V.pointShadowMap.length,numSpotLightShadows:V.spotShadowMap.length,numSpotLightShadowsWithMaps:V.numSpotLightShadowsWithMaps,numLightProbes:V.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:te.dithering,shadowMapEnabled:n.shadowMap.enabled&&se.length>0,shadowMapType:n.shadowMap.type,toneMapping:Bn,decodeVideoTexture:Mt&&te.map.isVideoTexture===!0&&Wi.getTransfer(te.map.colorSpace)===ur,decodeVideoTextureEmissive:Jn&&te.emissiveMap.isVideoTexture===!0&&Wi.getTransfer(te.emissiveMap.colorSpace)===ur,premultipliedAlpha:te.premultipliedAlpha,doubleSided:te.side===Ul,flipSided:te.side===sa,useDepthPacking:te.depthPacking>=0,depthPacking:te.depthPacking||0,index0AttributeName:te.index0AttributeName,extensionClipCullDistance:sn&&te.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(sn&&te.extensions.multiDraw===!0||hn)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:te.customProgramCacheKey()};return An.vertexUv1s=d.has(1),An.vertexUv2s=d.has(2),An.vertexUv3s=d.has(3),d.clear(),An}function T(te){let V=[];if(te.shaderID?V.push(te.shaderID):(V.push(te.customVertexShaderID),V.push(te.customFragmentShaderID)),te.defines!==void 0)for(let se in te.defines)V.push(se),V.push(te.defines[se]);return te.isRawShaderMaterial===!1&&(j(V,te),Z(V,te),V.push(n.outputColorSpace)),V.push(te.customProgramCacheKey),V.join()}function j(te,V){te.push(V.precision),te.push(V.outputColorSpace),te.push(V.envMapMode),te.push(V.envMapCubeUVHeight),te.push(V.mapUv),te.push(V.alphaMapUv),te.push(V.lightMapUv),te.push(V.aoMapUv),te.push(V.bumpMapUv),te.push(V.normalMapUv),te.push(V.displacementMapUv),te.push(V.emissiveMapUv),te.push(V.metalnessMapUv),te.push(V.roughnessMapUv),te.push(V.anisotropyMapUv),te.push(V.clearcoatMapUv),te.push(V.clearcoatNormalMapUv),te.push(V.clearcoatRoughnessMapUv),te.push(V.iridescenceMapUv),te.push(V.iridescenceThicknessMapUv),te.push(V.sheenColorMapUv),te.push(V.sheenRoughnessMapUv),te.push(V.specularMapUv),te.push(V.specularColorMapUv),te.push(V.specularIntensityMapUv),te.push(V.transmissionMapUv),te.push(V.thicknessMapUv),te.push(V.combine),te.push(V.fogExp2),te.push(V.sizeAttenuation),te.push(V.morphTargetsCount),te.push(V.morphAttributeCount),te.push(V.numDirLights),te.push(V.numPointLights),te.push(V.numSpotLights),te.push(V.numSpotLightMaps),te.push(V.numHemiLights),te.push(V.numRectAreaLights),te.push(V.numDirLightShadows),te.push(V.numPointLightShadows),te.push(V.numSpotLightShadows),te.push(V.numSpotLightShadowsWithMaps),te.push(V.numLightProbes),te.push(V.shadowMapType),te.push(V.toneMapping),te.push(V.numClippingPlanes),te.push(V.numClipIntersection),te.push(V.depthPacking)}function Z(te,V){a.disableAll(),V.supportsVertexTextures&&a.enable(0),V.instancing&&a.enable(1),V.instancingColor&&a.enable(2),V.instancingMorph&&a.enable(3),V.matcap&&a.enable(4),V.envMap&&a.enable(5),V.normalMapObjectSpace&&a.enable(6),V.normalMapTangentSpace&&a.enable(7),V.clearcoat&&a.enable(8),V.iridescence&&a.enable(9),V.alphaTest&&a.enable(10),V.vertexColors&&a.enable(11),V.vertexAlphas&&a.enable(12),V.vertexUv1s&&a.enable(13),V.vertexUv2s&&a.enable(14),V.vertexUv3s&&a.enable(15),V.vertexTangents&&a.enable(16),V.anisotropy&&a.enable(17),V.alphaHash&&a.enable(18),V.batching&&a.enable(19),V.dispersion&&a.enable(20),V.batchingColor&&a.enable(21),te.push(a.mask),a.disableAll(),V.fog&&a.enable(0),V.useFog&&a.enable(1),V.flatShading&&a.enable(2),V.logarithmicDepthBuffer&&a.enable(3),V.reverseDepthBuffer&&a.enable(4),V.skinning&&a.enable(5),V.morphTargets&&a.enable(6),V.morphNormals&&a.enable(7),V.morphColors&&a.enable(8),V.premultipliedAlpha&&a.enable(9),V.shadowMapEnabled&&a.enable(10),V.doubleSided&&a.enable(11),V.flipSided&&a.enable(12),V.useDepthPacking&&a.enable(13),V.dithering&&a.enable(14),V.transmission&&a.enable(15),V.sheen&&a.enable(16),V.opaque&&a.enable(17),V.pointsUvs&&a.enable(18),V.decodeVideoTexture&&a.enable(19),V.decodeVideoTextureEmissive&&a.enable(20),V.alphaToCoverage&&a.enable(21),te.push(a.mask)}function $(te){let V=A[te.type],se;if(V){let we=Bu[V];se=_5.clone(we.uniforms)}else se=te.uniforms;return se}function le(te,V){let se;for(let we=0,de=g.length;we<de;we++){let je=g[we];if(je.cacheKey===V){se=je,++se.usedTimes;break}}return se===void 0&&(se=new Hce(n,V,te,s),g.push(se)),se}function K(te){if(--te.usedTimes===0){let V=g.indexOf(te);g[V]=g[g.length-1],g.pop(),te.destroy()}}function oe(te){u.remove(te)}function ue(){u.dispose()}return{getParameters:N,getProgramCacheKey:T,getUniforms:$,acquireProgram:le,releaseProgram:K,releaseShaderCache:oe,programs:g,dispose:ue}}function Gce(){let n=new WeakMap;function t(o){return n.has(o)}function e(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,u){n.get(o)[a]=u}function s(){n=new WeakMap}return{has:t,get:e,remove:i,update:r,dispose:s}}function $ce(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function H5(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function j5(){let n=[],t=0,e=[],i=[],r=[];function s(){t=0,e.length=0,i.length=0,r.length=0}function o(v,x,C,A,O,N){let T=n[t];return T===void 0?(T={id:v.id,object:v,geometry:x,material:C,groupOrder:A,renderOrder:v.renderOrder,z:O,group:N},n[t]=T):(T.id=v.id,T.object=v,T.geometry=x,T.material=C,T.groupOrder=A,T.renderOrder=v.renderOrder,T.z=O,T.group=N),t++,T}function a(v,x,C,A,O,N){let T=o(v,x,C,A,O,N);C.transmission>0?i.push(T):C.transparent===!0?r.push(T):e.push(T)}function u(v,x,C,A,O,N){let T=o(v,x,C,A,O,N);C.transmission>0?i.unshift(T):C.transparent===!0?r.unshift(T):e.unshift(T)}function d(v,x){e.length>1&&e.sort(v||$ce),i.length>1&&i.sort(x||H5),r.length>1&&r.sort(x||H5)}function g(){for(let v=t,x=n.length;v<x;v++){let C=n[v];if(C.id===null)break;C.id=null,C.object=null,C.geometry=null,C.material=null,C.group=null}}return{opaque:e,transmissive:i,transparent:r,init:s,push:a,unshift:u,finish:g,sort:d}}function qce(){let n=new WeakMap;function t(i,r){let s=n.get(i),o;return s===void 0?(o=new j5,n.set(i,[o])):r>=s.length?(o=new j5,s.push(o)):o=s[r],o}function e(){n=new WeakMap}return{get:t,dispose:e}}function Xce(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new Le,color:new kn};break;case"SpotLight":e={position:new Le,direction:new Le,color:new kn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new Le,color:new kn,distance:0,decay:0};break;case"HemisphereLight":e={direction:new Le,skyColor:new kn,groundColor:new kn};break;case"RectAreaLight":e={color:new kn,position:new Le,halfWidth:new Le,halfHeight:new Le};break}return n[t.id]=e,e}}}function Yce(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qn};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qn};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qn,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}var Zce=0;function Kce(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function Qce(n){let t=new Xce,e=Yce(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)i.probe.push(new Le);let r=new Le,s=new ui,o=new ui;function a(d){let g=0,v=0,x=0;for(let te=0;te<9;te++)i.probe[te].set(0,0,0);let C=0,A=0,O=0,N=0,T=0,j=0,Z=0,$=0,le=0,K=0,oe=0;d.sort(Kce);for(let te=0,V=d.length;te<V;te++){let se=d[te],we=se.color,de=se.intensity,je=se.distance,Ue=se.shadow&&se.shadow.map?se.shadow.map.texture:null;if(se.isAmbientLight)g+=we.r*de,v+=we.g*de,x+=we.b*de;else if(se.isLightProbe){for(let he=0;he<9;he++)i.probe[he].addScaledVector(se.sh.coefficients[he],de);oe++}else if(se.isDirectionalLight){let he=t.get(se);if(he.color.copy(se.color).multiplyScalar(se.intensity),se.castShadow){let Pe=se.shadow,me=e.get(se);me.shadowIntensity=Pe.intensity,me.shadowBias=Pe.bias,me.shadowNormalBias=Pe.normalBias,me.shadowRadius=Pe.radius,me.shadowMapSize=Pe.mapSize,i.directionalShadow[C]=me,i.directionalShadowMap[C]=Ue,i.directionalShadowMatrix[C]=se.shadow.matrix,j++}i.directional[C]=he,C++}else if(se.isSpotLight){let he=t.get(se);he.position.setFromMatrixPosition(se.matrixWorld),he.color.copy(we).multiplyScalar(de),he.distance=je,he.coneCos=Math.cos(se.angle),he.penumbraCos=Math.cos(se.angle*(1-se.penumbra)),he.decay=se.decay,i.spot[O]=he;let Pe=se.shadow;if(se.map&&(i.spotLightMap[le]=se.map,le++,Pe.updateMatrices(se),se.castShadow&&K++),i.spotLightMatrix[O]=Pe.matrix,se.castShadow){let me=e.get(se);me.shadowIntensity=Pe.intensity,me.shadowBias=Pe.bias,me.shadowNormalBias=Pe.normalBias,me.shadowRadius=Pe.radius,me.shadowMapSize=Pe.mapSize,i.spotShadow[O]=me,i.spotShadowMap[O]=Ue,$++}O++}else if(se.isRectAreaLight){let he=t.get(se);he.color.copy(we).multiplyScalar(de),he.halfWidth.set(se.width*.5,0,0),he.halfHeight.set(0,se.height*.5,0),i.rectArea[N]=he,N++}else if(se.isPointLight){let he=t.get(se);if(he.color.copy(se.color).multiplyScalar(se.intensity),he.distance=se.distance,he.decay=se.decay,se.castShadow){let Pe=se.shadow,me=e.get(se);me.shadowIntensity=Pe.intensity,me.shadowBias=Pe.bias,me.shadowNormalBias=Pe.normalBias,me.shadowRadius=Pe.radius,me.shadowMapSize=Pe.mapSize,me.shadowCameraNear=Pe.camera.near,me.shadowCameraFar=Pe.camera.far,i.pointShadow[A]=me,i.pointShadowMap[A]=Ue,i.pointShadowMatrix[A]=se.shadow.matrix,Z++}i.point[A]=he,A++}else if(se.isHemisphereLight){let he=t.get(se);he.skyColor.copy(se.color).multiplyScalar(de),he.groundColor.copy(se.groundColor).multiplyScalar(de),i.hemi[T]=he,T++}}N>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Yt.LTC_FLOAT_1,i.rectAreaLTC2=Yt.LTC_FLOAT_2):(i.rectAreaLTC1=Yt.LTC_HALF_1,i.rectAreaLTC2=Yt.LTC_HALF_2)),i.ambient[0]=g,i.ambient[1]=v,i.ambient[2]=x;let ue=i.hash;(ue.directionalLength!==C||ue.pointLength!==A||ue.spotLength!==O||ue.rectAreaLength!==N||ue.hemiLength!==T||ue.numDirectionalShadows!==j||ue.numPointShadows!==Z||ue.numSpotShadows!==$||ue.numSpotMaps!==le||ue.numLightProbes!==oe)&&(i.directional.length=C,i.spot.length=O,i.rectArea.length=N,i.point.length=A,i.hemi.length=T,i.directionalShadow.length=j,i.directionalShadowMap.length=j,i.pointShadow.length=Z,i.pointShadowMap.length=Z,i.spotShadow.length=$,i.spotShadowMap.length=$,i.directionalShadowMatrix.length=j,i.pointShadowMatrix.length=Z,i.spotLightMatrix.length=$+le-K,i.spotLightMap.length=le,i.numSpotLightShadowsWithMaps=K,i.numLightProbes=oe,ue.directionalLength=C,ue.pointLength=A,ue.spotLength=O,ue.rectAreaLength=N,ue.hemiLength=T,ue.numDirectionalShadows=j,ue.numPointShadows=Z,ue.numSpotShadows=$,ue.numSpotMaps=le,ue.numLightProbes=oe,i.version=Zce++)}function u(d,g){let v=0,x=0,C=0,A=0,O=0,N=g.matrixWorldInverse;for(let T=0,j=d.length;T<j;T++){let Z=d[T];if(Z.isDirectionalLight){let $=i.directional[v];$.direction.setFromMatrixPosition(Z.matrixWorld),r.setFromMatrixPosition(Z.target.matrixWorld),$.direction.sub(r),$.direction.transformDirection(N),v++}else if(Z.isSpotLight){let $=i.spot[C];$.position.setFromMatrixPosition(Z.matrixWorld),$.position.applyMatrix4(N),$.direction.setFromMatrixPosition(Z.matrixWorld),r.setFromMatrixPosition(Z.target.matrixWorld),$.direction.sub(r),$.direction.transformDirection(N),C++}else if(Z.isRectAreaLight){let $=i.rectArea[A];$.position.setFromMatrixPosition(Z.matrixWorld),$.position.applyMatrix4(N),o.identity(),s.copy(Z.matrixWorld),s.premultiply(N),o.extractRotation(s),$.halfWidth.set(Z.width*.5,0,0),$.halfHeight.set(0,Z.height*.5,0),$.halfWidth.applyMatrix4(o),$.halfHeight.applyMatrix4(o),A++}else if(Z.isPointLight){let $=i.point[x];$.position.setFromMatrixPosition(Z.matrixWorld),$.position.applyMatrix4(N),x++}else if(Z.isHemisphereLight){let $=i.hemi[O];$.direction.setFromMatrixPosition(Z.matrixWorld),$.direction.transformDirection(N),O++}}}return{setup:a,setupView:u,state:i}}function W5(n){let t=new Qce(n),e=[],i=[];function r(g){d.camera=g,e.length=0,i.length=0}function s(g){e.push(g)}function o(g){i.push(g)}function a(){t.setup(e)}function u(g){t.setupView(e,g)}let d={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:r,state:d,setupLights:a,setupLightsView:u,pushLight:s,pushShadow:o}}function Jce(n){let t=new WeakMap;function e(r,s=0){let o=t.get(r),a;return o===void 0?(a=new W5(n),t.set(r,[a])):s>=o.length?(a=new W5(n),o.push(a)):a=o[s],a}function i(){t=new WeakMap}return{get:e,dispose:i}}var eue=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,tue=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function nue(n,t,e){let i=new Iy,r=new qn,s=new qn,o=new rr,a=new DM({depthPacking:s5}),u=new IM,d={},g=e.maxTextureSize,v={[Pc]:sa,[sa]:Pc,[Ul]:Ul},x=new Lc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new qn},radius:{value:4}},vertexShader:eue,fragmentShader:tue}),C=x.clone();C.defines.HORIZONTAL_PASS=1;let A=new Ta;A.setAttribute("position",new Ts(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let O=new As(A,x),N=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=JP;let T=this.type;this.render=function(K,oe,ue){if(N.enabled===!1||N.autoUpdate===!1&&N.needsUpdate===!1||K.length===0)return;let te=n.getRenderTarget(),V=n.getActiveCubeFace(),se=n.getActiveMipmapLevel(),we=n.state;we.setBlending(kh),we.buffers.color.setClear(1,1,1,1),we.buffers.depth.setTest(!0),we.setScissorTest(!1);let de=T!==Fu&&this.type===Fu,je=T===Fu&&this.type!==Fu;for(let Ue=0,he=K.length;Ue<he;Ue++){let Pe=K[Ue],me=Pe.shadow;if(me===void 0){console.warn("THREE.WebGLShadowMap:",Pe,"has no shadow.");continue}if(me.autoUpdate===!1&&me.needsUpdate===!1)continue;r.copy(me.mapSize);let $e=me.getFrameExtents();if(r.multiply($e),s.copy(me.mapSize),(r.x>g||r.y>g)&&(r.x>g&&(s.x=Math.floor(g/$e.x),r.x=s.x*$e.x,me.mapSize.x=s.x),r.y>g&&(s.y=Math.floor(g/$e.y),r.y=s.y*$e.y,me.mapSize.y=s.y)),me.map===null||de===!0||je===!0){let xt=this.type!==Fu?{minFilter:uo,magFilter:uo}:{};me.map!==null&&me.map.dispose(),me.map=new Ru(r.x,r.y,xt),me.map.texture.name=Pe.name+".shadowMap",me.camera.updateProjectionMatrix()}n.setRenderTarget(me.map),n.clear();let nt=me.getViewportCount();for(let xt=0;xt<nt;xt++){let Tt=me.getViewport(xt);o.set(s.x*Tt.x,s.y*Tt.y,s.x*Tt.z,s.y*Tt.w),we.viewport(o),me.updateMatrices(Pe,xt),i=me.getFrustum(),$(oe,ue,me.camera,Pe,this.type)}me.isPointLightShadow!==!0&&this.type===Fu&&j(me,ue),me.needsUpdate=!1}T=this.type,N.needsUpdate=!1,n.setRenderTarget(te,V,se)};function j(K,oe){let ue=t.update(O);x.defines.VSM_SAMPLES!==K.blurSamples&&(x.defines.VSM_SAMPLES=K.blurSamples,C.defines.VSM_SAMPLES=K.blurSamples,x.needsUpdate=!0,C.needsUpdate=!0),K.mapPass===null&&(K.mapPass=new Ru(r.x,r.y)),x.uniforms.shadow_pass.value=K.map.texture,x.uniforms.resolution.value=K.mapSize,x.uniforms.radius.value=K.radius,n.setRenderTarget(K.mapPass),n.clear(),n.renderBufferDirect(oe,null,ue,x,O,null),C.uniforms.shadow_pass.value=K.mapPass.texture,C.uniforms.resolution.value=K.mapSize,C.uniforms.radius.value=K.radius,n.setRenderTarget(K.map),n.clear(),n.renderBufferDirect(oe,null,ue,C,O,null)}function Z(K,oe,ue,te){let V=null,se=ue.isPointLight===!0?K.customDistanceMaterial:K.customDepthMaterial;if(se!==void 0)V=se;else if(V=ue.isPointLight===!0?u:a,n.localClippingEnabled&&oe.clipShadows===!0&&Array.isArray(oe.clippingPlanes)&&oe.clippingPlanes.length!==0||oe.displacementMap&&oe.displacementScale!==0||oe.alphaMap&&oe.alphaTest>0||oe.map&&oe.alphaTest>0||oe.alphaToCoverage===!0){let we=V.uuid,de=oe.uuid,je=d[we];je===void 0&&(je={},d[we]=je);let Ue=je[de];Ue===void 0&&(Ue=V.clone(),je[de]=Ue,oe.addEventListener("dispose",le)),V=Ue}if(V.visible=oe.visible,V.wireframe=oe.wireframe,te===Fu?V.side=oe.shadowSide!==null?oe.shadowSide:oe.side:V.side=oe.shadowSide!==null?oe.shadowSide:v[oe.side],V.alphaMap=oe.alphaMap,V.alphaTest=oe.alphaToCoverage===!0?.5:oe.alphaTest,V.map=oe.map,V.clipShadows=oe.clipShadows,V.clippingPlanes=oe.clippingPlanes,V.clipIntersection=oe.clipIntersection,V.displacementMap=oe.displacementMap,V.displacementScale=oe.displacementScale,V.displacementBias=oe.displacementBias,V.wireframeLinewidth=oe.wireframeLinewidth,V.linewidth=oe.linewidth,ue.isPointLight===!0&&V.isMeshDistanceMaterial===!0){let we=n.properties.get(V);we.light=ue}return V}function $(K,oe,ue,te,V){if(K.visible===!1)return;if(K.layers.test(oe.layers)&&(K.isMesh||K.isLine||K.isPoints)&&(K.castShadow||K.receiveShadow&&V===Fu)&&(!K.frustumCulled||i.intersectsObject(K))){K.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,K.matrixWorld);let de=t.update(K),je=K.material;if(Array.isArray(je)){let Ue=de.groups;for(let he=0,Pe=Ue.length;he<Pe;he++){let me=Ue[he],$e=je[me.materialIndex];if($e&&$e.visible){let nt=Z(K,$e,te,V);K.onBeforeShadow(n,K,oe,ue,de,nt,me),n.renderBufferDirect(ue,null,de,nt,K,me),K.onAfterShadow(n,K,oe,ue,de,nt,me)}}}else if(je.visible){let Ue=Z(K,je,te,V);K.onBeforeShadow(n,K,oe,ue,de,Ue,null),n.renderBufferDirect(ue,null,de,Ue,K,null),K.onAfterShadow(n,K,oe,ue,de,Ue,null)}}let we=K.children;for(let de=0,je=we.length;de<je;de++)$(we[de],oe,ue,te,V)}function le(K){K.target.removeEventListener("dispose",le);for(let ue in d){let te=d[ue],V=K.target.uuid;V in te&&(te[V].dispose(),delete te[V])}}}var iue={[zM]:UM,[HM]:GM,[jM]:$M,[kp]:WM,[UM]:zM,[GM]:HM,[$M]:jM,[WM]:kp};function rue(n,t){function e(){let Re=!1,Lt=new rr,wt=null,nn=new rr(0,0,0,0);return{setMask:function(pt){wt!==pt&&!Re&&(n.colorMask(pt,pt,pt,pt),wt=pt)},setLocked:function(pt){Re=pt},setClear:function(pt,ct,sn,Bn,An){An===!0&&(pt*=Bn,ct*=Bn,sn*=Bn),Lt.set(pt,ct,sn,Bn),nn.equals(Lt)===!1&&(n.clearColor(pt,ct,sn,Bn),nn.copy(Lt))},reset:function(){Re=!1,wt=null,nn.set(-1,0,0,0)}}}function i(){let Re=!1,Lt=!1,wt=null,nn=null,pt=null;return{setReversed:function(ct){if(Lt!==ct){let sn=t.get("EXT_clip_control");ct?sn.clipControlEXT(sn.LOWER_LEFT_EXT,sn.ZERO_TO_ONE_EXT):sn.clipControlEXT(sn.LOWER_LEFT_EXT,sn.NEGATIVE_ONE_TO_ONE_EXT),Lt=ct;let Bn=pt;pt=null,this.setClear(Bn)}},getReversed:function(){return Lt},setTest:function(ct){ct?rt(n.DEPTH_TEST):Ut(n.DEPTH_TEST)},setMask:function(ct){wt!==ct&&!Re&&(n.depthMask(ct),wt=ct)},setFunc:function(ct){if(Lt&&(ct=iue[ct]),nn!==ct){switch(ct){case zM:n.depthFunc(n.NEVER);break;case UM:n.depthFunc(n.ALWAYS);break;case HM:n.depthFunc(n.LESS);break;case kp:n.depthFunc(n.LEQUAL);break;case jM:n.depthFunc(n.EQUAL);break;case WM:n.depthFunc(n.GEQUAL);break;case GM:n.depthFunc(n.GREATER);break;case $M:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}nn=ct}},setLocked:function(ct){Re=ct},setClear:function(ct){pt!==ct&&(Lt&&(ct=1-ct),n.clearDepth(ct),pt=ct)},reset:function(){Re=!1,wt=null,nn=null,pt=null,Lt=!1}}}function r(){let Re=!1,Lt=null,wt=null,nn=null,pt=null,ct=null,sn=null,Bn=null,An=null;return{setTest:function(Li){Re||(Li?rt(n.STENCIL_TEST):Ut(n.STENCIL_TEST))},setMask:function(Li){Lt!==Li&&!Re&&(n.stencilMask(Li),Lt=Li)},setFunc:function(Li,ns,is){(wt!==Li||nn!==ns||pt!==is)&&(n.stencilFunc(Li,ns,is),wt=Li,nn=ns,pt=is)},setOp:function(Li,ns,is){(ct!==Li||sn!==ns||Bn!==is)&&(n.stencilOp(Li,ns,is),ct=Li,sn=ns,Bn=is)},setLocked:function(Li){Re=Li},setClear:function(Li){An!==Li&&(n.clearStencil(Li),An=Li)},reset:function(){Re=!1,Lt=null,wt=null,nn=null,pt=null,ct=null,sn=null,Bn=null,An=null}}}let s=new e,o=new i,a=new r,u=new WeakMap,d=new WeakMap,g={},v={},x=new WeakMap,C=[],A=null,O=!1,N=null,T=null,j=null,Z=null,$=null,le=null,K=null,oe=new kn(0,0,0),ue=0,te=!1,V=null,se=null,we=null,de=null,je=null,Ue=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),he=!1,Pe=0,me=n.getParameter(n.VERSION);me.indexOf("WebGL")!==-1?(Pe=parseFloat(/^WebGL (\d)/.exec(me)[1]),he=Pe>=1):me.indexOf("OpenGL ES")!==-1&&(Pe=parseFloat(/^OpenGL ES (\d)/.exec(me)[1]),he=Pe>=2);let $e=null,nt={},xt=n.getParameter(n.SCISSOR_BOX),Tt=n.getParameter(n.VIEWPORT),ut=new rr().fromArray(xt),Ie=new rr().fromArray(Tt);function at(Re,Lt,wt,nn){let pt=new Uint8Array(4),ct=n.createTexture();n.bindTexture(Re,ct),n.texParameteri(Re,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Re,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let sn=0;sn<wt;sn++)Re===n.TEXTURE_3D||Re===n.TEXTURE_2D_ARRAY?n.texImage3D(Lt,0,n.RGBA,1,1,nn,0,n.RGBA,n.UNSIGNED_BYTE,pt):n.texImage2D(Lt+sn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,pt);return ct}let Pt={};Pt[n.TEXTURE_2D]=at(n.TEXTURE_2D,n.TEXTURE_2D,1),Pt[n.TEXTURE_CUBE_MAP]=at(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Pt[n.TEXTURE_2D_ARRAY]=at(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Pt[n.TEXTURE_3D]=at(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),rt(n.DEPTH_TEST),o.setFunc(kp),Kn(!1),hi(QP),rt(n.CULL_FACE),Me(kh);function rt(Re){g[Re]!==!0&&(n.enable(Re),g[Re]=!0)}function Ut(Re){g[Re]!==!1&&(n.disable(Re),g[Re]=!1)}function Cn(Re,Lt){return v[Re]!==Lt?(n.bindFramebuffer(Re,Lt),v[Re]=Lt,Re===n.DRAW_FRAMEBUFFER&&(v[n.FRAMEBUFFER]=Lt),Re===n.FRAMEBUFFER&&(v[n.DRAW_FRAMEBUFFER]=Lt),!0):!1}function hn(Re,Lt){let wt=C,nn=!1;if(Re){wt=x.get(Lt),wt===void 0&&(wt=[],x.set(Lt,wt));let pt=Re.textures;if(wt.length!==pt.length||wt[0]!==n.COLOR_ATTACHMENT0){for(let ct=0,sn=pt.length;ct<sn;ct++)wt[ct]=n.COLOR_ATTACHMENT0+ct;wt.length=pt.length,nn=!0}}else wt[0]!==n.BACK&&(wt[0]=n.BACK,nn=!0);nn&&n.drawBuffers(wt)}function Mt(Re){return A!==Re?(n.useProgram(Re),A=Re,!0):!1}let Xi={[Xd]:n.FUNC_ADD,[I4]:n.FUNC_SUBTRACT,[R4]:n.FUNC_REVERSE_SUBTRACT};Xi[P4]=n.MIN,Xi[k4]=n.MAX;let Fn={[L4]:n.ZERO,[N4]:n.ONE,[O4]:n.SRC_COLOR,[_M]:n.SRC_ALPHA,[H4]:n.SRC_ALPHA_SATURATE,[z4]:n.DST_COLOR,[B4]:n.DST_ALPHA,[F4]:n.ONE_MINUS_SRC_COLOR,[bM]:n.ONE_MINUS_SRC_ALPHA,[U4]:n.ONE_MINUS_DST_COLOR,[V4]:n.ONE_MINUS_DST_ALPHA,[j4]:n.CONSTANT_COLOR,[W4]:n.ONE_MINUS_CONSTANT_COLOR,[G4]:n.CONSTANT_ALPHA,[$4]:n.ONE_MINUS_CONSTANT_ALPHA};function Me(Re,Lt,wt,nn,pt,ct,sn,Bn,An,Li){if(Re===kh){O===!0&&(Ut(n.BLEND),O=!1);return}if(O===!1&&(rt(n.BLEND),O=!0),Re!==D4){if(Re!==N||Li!==te){if((T!==Xd||$!==Xd)&&(n.blendEquation(n.FUNC_ADD),T=Xd,$=Xd),Li)switch(Re){case Pp:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case ek:n.blendFunc(n.ONE,n.ONE);break;case tk:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case nk:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Re);break}else switch(Re){case Pp:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case ek:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case tk:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case nk:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Re);break}j=null,Z=null,le=null,K=null,oe.set(0,0,0),ue=0,N=Re,te=Li}return}pt=pt||Lt,ct=ct||wt,sn=sn||nn,(Lt!==T||pt!==$)&&(n.blendEquationSeparate(Xi[Lt],Xi[pt]),T=Lt,$=pt),(wt!==j||nn!==Z||ct!==le||sn!==K)&&(n.blendFuncSeparate(Fn[wt],Fn[nn],Fn[ct],Fn[sn]),j=wt,Z=nn,le=ct,K=sn),(Bn.equals(oe)===!1||An!==ue)&&(n.blendColor(Bn.r,Bn.g,Bn.b,An),oe.copy(Bn),ue=An),N=Re,te=!1}function hr(Re,Lt){Re.side===Ul?Ut(n.CULL_FACE):rt(n.CULL_FACE);let wt=Re.side===sa;Lt&&(wt=!wt),Kn(wt),Re.blending===Pp&&Re.transparent===!1?Me(kh):Me(Re.blending,Re.blendEquation,Re.blendSrc,Re.blendDst,Re.blendEquationAlpha,Re.blendSrcAlpha,Re.blendDstAlpha,Re.blendColor,Re.blendAlpha,Re.premultipliedAlpha),o.setFunc(Re.depthFunc),o.setTest(Re.depthTest),o.setMask(Re.depthWrite),s.setMask(Re.colorWrite);let nn=Re.stencilWrite;a.setTest(nn),nn&&(a.setMask(Re.stencilWriteMask),a.setFunc(Re.stencilFunc,Re.stencilRef,Re.stencilFuncMask),a.setOp(Re.stencilFail,Re.stencilZFail,Re.stencilZPass)),Jn(Re.polygonOffset,Re.polygonOffsetFactor,Re.polygonOffsetUnits),Re.alphaToCoverage===!0?rt(n.SAMPLE_ALPHA_TO_COVERAGE):Ut(n.SAMPLE_ALPHA_TO_COVERAGE)}function Kn(Re){V!==Re&&(Re?n.frontFace(n.CW):n.frontFace(n.CCW),V=Re)}function hi(Re){Re!==T4?(rt(n.CULL_FACE),Re!==se&&(Re===QP?n.cullFace(n.BACK):Re===A4?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ut(n.CULL_FACE),se=Re}function rn(Re){Re!==we&&(he&&n.lineWidth(Re),we=Re)}function Jn(Re,Lt,wt){Re?(rt(n.POLYGON_OFFSET_FILL),(de!==Lt||je!==wt)&&(n.polygonOffset(Lt,wt),de=Lt,je=wt)):Ut(n.POLYGON_OFFSET_FILL)}function dn(Re){Re?rt(n.SCISSOR_TEST):Ut(n.SCISSOR_TEST)}function In(Re){Re===void 0&&(Re=n.TEXTURE0+Ue-1),$e!==Re&&(n.activeTexture(Re),$e=Re)}function Gi(Re,Lt,wt){wt===void 0&&($e===null?wt=n.TEXTURE0+Ue-1:wt=$e);let nn=nt[wt];nn===void 0&&(nn={type:void 0,texture:void 0},nt[wt]=nn),(nn.type!==Re||nn.texture!==Lt)&&($e!==wt&&(n.activeTexture(wt),$e=wt),n.bindTexture(Re,Lt||Pt[Re]),nn.type=Re,nn.texture=Lt)}function fe(){let Re=nt[$e];Re!==void 0&&Re.type!==void 0&&(n.bindTexture(Re.type,null),Re.type=void 0,Re.texture=void 0)}function J(){try{n.compressedTexImage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Ge(){try{n.compressedTexImage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function it(){try{n.texSubImage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function ht(){try{n.texSubImage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Ke(){try{n.compressedTexSubImage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function yn(){try{n.compressedTexSubImage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Ht(){try{n.texStorage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function kt(){try{n.texStorage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function fn(){try{n.texImage2D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function mt(){try{n.texImage3D(...arguments)}catch(Re){console.error("THREE.WebGLState:",Re)}}function Jt(Re){ut.equals(Re)===!1&&(n.scissor(Re.x,Re.y,Re.z,Re.w),ut.copy(Re))}function pn(Re){Ie.equals(Re)===!1&&(n.viewport(Re.x,Re.y,Re.z,Re.w),Ie.copy(Re))}function vn(Re,Lt){let wt=d.get(Lt);wt===void 0&&(wt=new WeakMap,d.set(Lt,wt));let nn=wt.get(Re);nn===void 0&&(nn=n.getUniformBlockIndex(Lt,Re.name),wt.set(Re,nn))}function Ft(Re,Lt){let nn=d.get(Lt).get(Re);u.get(Lt)!==nn&&(n.uniformBlockBinding(Lt,nn,Re.__bindingPointIndex),u.set(Lt,nn))}function _n(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),g={},$e=null,nt={},v={},x=new WeakMap,C=[],A=null,O=!1,N=null,T=null,j=null,Z=null,$=null,le=null,K=null,oe=new kn(0,0,0),ue=0,te=!1,V=null,se=null,we=null,de=null,je=null,ut.set(0,0,n.canvas.width,n.canvas.height),Ie.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:rt,disable:Ut,bindFramebuffer:Cn,drawBuffers:hn,useProgram:Mt,setBlending:Me,setMaterial:hr,setFlipSided:Kn,setCullFace:hi,setLineWidth:rn,setPolygonOffset:Jn,setScissorTest:dn,activeTexture:In,bindTexture:Gi,unbindTexture:fe,compressedTexImage2D:J,compressedTexImage3D:Ge,texImage2D:fn,texImage3D:mt,updateUBOMapping:vn,uniformBlockBinding:Ft,texStorage2D:Ht,texStorage3D:kt,texSubImage2D:it,texSubImage3D:ht,compressedTexSubImage2D:Ke,compressedTexSubImage3D:yn,scissor:Jt,viewport:pn,reset:_n}}function sue(n,t,e,i,r,s,o){let a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new qn,g=new WeakMap,v,x=new WeakMap,C=!1;try{C=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(fe,J){return C?new OffscreenCanvas(fe,J):wy("canvas")}function O(fe,J,Ge){let it=1,ht=Gi(fe);if((ht.width>Ge||ht.height>Ge)&&(it=Ge/Math.max(ht.width,ht.height)),it<1)if(typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&fe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&fe instanceof ImageBitmap||typeof VideoFrame<"u"&&fe instanceof VideoFrame){let Ke=Math.floor(it*ht.width),yn=Math.floor(it*ht.height);v===void 0&&(v=A(Ke,yn));let Ht=J?A(Ke,yn):v;return Ht.width=Ke,Ht.height=yn,Ht.getContext("2d").drawImage(fe,0,0,Ke,yn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ht.width+"x"+ht.height+") to ("+Ke+"x"+yn+")."),Ht}else return"data"in fe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ht.width+"x"+ht.height+")."),fe;return fe}function N(fe){return fe.generateMipmaps}function T(fe){n.generateMipmap(fe)}function j(fe){return fe.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:fe.isWebGL3DRenderTarget?n.TEXTURE_3D:fe.isWebGLArrayRenderTarget||fe.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function Z(fe,J,Ge,it,ht=!1){if(fe!==null){if(n[fe]!==void 0)return n[fe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+fe+"'")}let Ke=J;if(J===n.RED&&(Ge===n.FLOAT&&(Ke=n.R32F),Ge===n.HALF_FLOAT&&(Ke=n.R16F),Ge===n.UNSIGNED_BYTE&&(Ke=n.R8)),J===n.RED_INTEGER&&(Ge===n.UNSIGNED_BYTE&&(Ke=n.R8UI),Ge===n.UNSIGNED_SHORT&&(Ke=n.R16UI),Ge===n.UNSIGNED_INT&&(Ke=n.R32UI),Ge===n.BYTE&&(Ke=n.R8I),Ge===n.SHORT&&(Ke=n.R16I),Ge===n.INT&&(Ke=n.R32I)),J===n.RG&&(Ge===n.FLOAT&&(Ke=n.RG32F),Ge===n.HALF_FLOAT&&(Ke=n.RG16F),Ge===n.UNSIGNED_BYTE&&(Ke=n.RG8)),J===n.RG_INTEGER&&(Ge===n.UNSIGNED_BYTE&&(Ke=n.RG8UI),Ge===n.UNSIGNED_SHORT&&(Ke=n.RG16UI),Ge===n.UNSIGNED_INT&&(Ke=n.RG32UI),Ge===n.BYTE&&(Ke=n.RG8I),Ge===n.SHORT&&(Ke=n.RG16I),Ge===n.INT&&(Ke=n.RG32I)),J===n.RGB_INTEGER&&(Ge===n.UNSIGNED_BYTE&&(Ke=n.RGB8UI),Ge===n.UNSIGNED_SHORT&&(Ke=n.RGB16UI),Ge===n.UNSIGNED_INT&&(Ke=n.RGB32UI),Ge===n.BYTE&&(Ke=n.RGB8I),Ge===n.SHORT&&(Ke=n.RGB16I),Ge===n.INT&&(Ke=n.RGB32I)),J===n.RGBA_INTEGER&&(Ge===n.UNSIGNED_BYTE&&(Ke=n.RGBA8UI),Ge===n.UNSIGNED_SHORT&&(Ke=n.RGBA16UI),Ge===n.UNSIGNED_INT&&(Ke=n.RGBA32UI),Ge===n.BYTE&&(Ke=n.RGBA8I),Ge===n.SHORT&&(Ke=n.RGBA16I),Ge===n.INT&&(Ke=n.RGBA32I)),J===n.RGB&&Ge===n.UNSIGNED_INT_5_9_9_9_REV&&(Ke=n.RGB9_E5),J===n.RGBA){let yn=ht?k_:Wi.getTransfer(it);Ge===n.FLOAT&&(Ke=n.RGBA32F),Ge===n.HALF_FLOAT&&(Ke=n.RGBA16F),Ge===n.UNSIGNED_BYTE&&(Ke=yn===ur?n.SRGB8_ALPHA8:n.RGBA8),Ge===n.UNSIGNED_SHORT_4_4_4_4&&(Ke=n.RGBA4),Ge===n.UNSIGNED_SHORT_5_5_5_1&&(Ke=n.RGB5_A1)}return(Ke===n.R16F||Ke===n.R32F||Ke===n.RG16F||Ke===n.RG32F||Ke===n.RGBA16F||Ke===n.RGBA32F)&&t.get("EXT_color_buffer_float"),Ke}function $(fe,J){let Ge;return fe?J===null||J===Jd||J===By?Ge=n.DEPTH24_STENCIL8:J===Hl?Ge=n.DEPTH32F_STENCIL8:J===Oy&&(Ge=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):J===null||J===Jd||J===By?Ge=n.DEPTH_COMPONENT24:J===Hl?Ge=n.DEPTH_COMPONENT32F:J===Oy&&(Ge=n.DEPTH_COMPONENT16),Ge}function le(fe,J){return N(fe)===!0||fe.isFramebufferTexture&&fe.minFilter!==uo&&fe.minFilter!==na?Math.log2(Math.max(J.width,J.height))+1:fe.mipmaps!==void 0&&fe.mipmaps.length>0?fe.mipmaps.length:fe.isCompressedTexture&&Array.isArray(fe.image)?J.mipmaps.length:1}function K(fe){let J=fe.target;J.removeEventListener("dispose",K),ue(J),J.isVideoTexture&&g.delete(J)}function oe(fe){let J=fe.target;J.removeEventListener("dispose",oe),V(J)}function ue(fe){let J=i.get(fe);if(J.__webglInit===void 0)return;let Ge=fe.source,it=x.get(Ge);if(it){let ht=it[J.__cacheKey];ht.usedTimes--,ht.usedTimes===0&&te(fe),Object.keys(it).length===0&&x.delete(Ge)}i.remove(fe)}function te(fe){let J=i.get(fe);n.deleteTexture(J.__webglTexture);let Ge=fe.source,it=x.get(Ge);delete it[J.__cacheKey],o.memory.textures--}function V(fe){let J=i.get(fe);if(fe.depthTexture&&(fe.depthTexture.dispose(),i.remove(fe.depthTexture)),fe.isWebGLCubeRenderTarget)for(let it=0;it<6;it++){if(Array.isArray(J.__webglFramebuffer[it]))for(let ht=0;ht<J.__webglFramebuffer[it].length;ht++)n.deleteFramebuffer(J.__webglFramebuffer[it][ht]);else n.deleteFramebuffer(J.__webglFramebuffer[it]);J.__webglDepthbuffer&&n.deleteRenderbuffer(J.__webglDepthbuffer[it])}else{if(Array.isArray(J.__webglFramebuffer))for(let it=0;it<J.__webglFramebuffer.length;it++)n.deleteFramebuffer(J.__webglFramebuffer[it]);else n.deleteFramebuffer(J.__webglFramebuffer);if(J.__webglDepthbuffer&&n.deleteRenderbuffer(J.__webglDepthbuffer),J.__webglMultisampledFramebuffer&&n.deleteFramebuffer(J.__webglMultisampledFramebuffer),J.__webglColorRenderbuffer)for(let it=0;it<J.__webglColorRenderbuffer.length;it++)J.__webglColorRenderbuffer[it]&&n.deleteRenderbuffer(J.__webglColorRenderbuffer[it]);J.__webglDepthRenderbuffer&&n.deleteRenderbuffer(J.__webglDepthRenderbuffer)}let Ge=fe.textures;for(let it=0,ht=Ge.length;it<ht;it++){let Ke=i.get(Ge[it]);Ke.__webglTexture&&(n.deleteTexture(Ke.__webglTexture),o.memory.textures--),i.remove(Ge[it])}i.remove(fe)}let se=0;function we(){se=0}function de(){let fe=se;return fe>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+fe+" texture units while this GPU supports only "+r.maxTextures),se+=1,fe}function je(fe){let J=[];return J.push(fe.wrapS),J.push(fe.wrapT),J.push(fe.wrapR||0),J.push(fe.magFilter),J.push(fe.minFilter),J.push(fe.anisotropy),J.push(fe.internalFormat),J.push(fe.format),J.push(fe.type),J.push(fe.generateMipmaps),J.push(fe.premultiplyAlpha),J.push(fe.flipY),J.push(fe.unpackAlignment),J.push(fe.colorSpace),J.join()}function Ue(fe,J){let Ge=i.get(fe);if(fe.isVideoTexture&&dn(fe),fe.isRenderTargetTexture===!1&&fe.version>0&&Ge.__version!==fe.version){let it=fe.image;if(it===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(it.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Pt(Ge,fe,J);return}}e.bindTexture(n.TEXTURE_2D,Ge.__webglTexture,n.TEXTURE0+J)}function he(fe,J){let Ge=i.get(fe);if(fe.version>0&&Ge.__version!==fe.version){Pt(Ge,fe,J);return}e.bindTexture(n.TEXTURE_2D_ARRAY,Ge.__webglTexture,n.TEXTURE0+J)}function Pe(fe,J){let Ge=i.get(fe);if(fe.version>0&&Ge.__version!==fe.version){Pt(Ge,fe,J);return}e.bindTexture(n.TEXTURE_3D,Ge.__webglTexture,n.TEXTURE0+J)}function me(fe,J){let Ge=i.get(fe);if(fe.version>0&&Ge.__version!==fe.version){rt(Ge,fe,J);return}e.bindTexture(n.TEXTURE_CUBE_MAP,Ge.__webglTexture,n.TEXTURE0+J)}let $e={[Yd]:n.REPEAT,[Au]:n.CLAMP_TO_EDGE,[by]:n.MIRRORED_REPEAT},nt={[uo]:n.NEAREST,[YM]:n.NEAREST_MIPMAP_NEAREST,[Wp]:n.NEAREST_MIPMAP_LINEAR,[na]:n.LINEAR,[Ny]:n.LINEAR_MIPMAP_NEAREST,[Oc]:n.LINEAR_MIPMAP_LINEAR},xt={[a5]:n.NEVER,[f5]:n.ALWAYS,[l5]:n.LESS,[fk]:n.LEQUAL,[c5]:n.EQUAL,[d5]:n.GEQUAL,[u5]:n.GREATER,[h5]:n.NOTEQUAL};function Tt(fe,J){if(J.type===Hl&&t.has("OES_texture_float_linear")===!1&&(J.magFilter===na||J.magFilter===Ny||J.magFilter===Wp||J.magFilter===Oc||J.minFilter===na||J.minFilter===Ny||J.minFilter===Wp||J.minFilter===Oc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(fe,n.TEXTURE_WRAP_S,$e[J.wrapS]),n.texParameteri(fe,n.TEXTURE_WRAP_T,$e[J.wrapT]),(fe===n.TEXTURE_3D||fe===n.TEXTURE_2D_ARRAY)&&n.texParameteri(fe,n.TEXTURE_WRAP_R,$e[J.wrapR]),n.texParameteri(fe,n.TEXTURE_MAG_FILTER,nt[J.magFilter]),n.texParameteri(fe,n.TEXTURE_MIN_FILTER,nt[J.minFilter]),J.compareFunction&&(n.texParameteri(fe,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(fe,n.TEXTURE_COMPARE_FUNC,xt[J.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(J.magFilter===uo||J.minFilter!==Wp&&J.minFilter!==Oc||J.type===Hl&&t.has("OES_texture_float_linear")===!1)return;if(J.anisotropy>1||i.get(J).__currentAnisotropy){let Ge=t.get("EXT_texture_filter_anisotropic");n.texParameterf(fe,Ge.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(J.anisotropy,r.getMaxAnisotropy())),i.get(J).__currentAnisotropy=J.anisotropy}}}function ut(fe,J){let Ge=!1;fe.__webglInit===void 0&&(fe.__webglInit=!0,J.addEventListener("dispose",K));let it=J.source,ht=x.get(it);ht===void 0&&(ht={},x.set(it,ht));let Ke=je(J);if(Ke!==fe.__cacheKey){ht[Ke]===void 0&&(ht[Ke]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Ge=!0),ht[Ke].usedTimes++;let yn=ht[fe.__cacheKey];yn!==void 0&&(ht[fe.__cacheKey].usedTimes--,yn.usedTimes===0&&te(J)),fe.__cacheKey=Ke,fe.__webglTexture=ht[Ke].texture}return Ge}function Ie(fe,J,Ge){return Math.floor(Math.floor(fe/Ge)/J)}function at(fe,J,Ge,it){let Ke=fe.updateRanges;if(Ke.length===0)e.texSubImage2D(n.TEXTURE_2D,0,0,0,J.width,J.height,Ge,it,J.data);else{Ke.sort((mt,Jt)=>mt.start-Jt.start);let yn=0;for(let mt=1;mt<Ke.length;mt++){let Jt=Ke[yn],pn=Ke[mt],vn=Jt.start+Jt.count,Ft=Ie(pn.start,J.width,4),_n=Ie(Jt.start,J.width,4);pn.start<=vn+1&&Ft===_n&&Ie(pn.start+pn.count-1,J.width,4)===Ft?Jt.count=Math.max(Jt.count,pn.start+pn.count-Jt.start):(++yn,Ke[yn]=pn)}Ke.length=yn+1;let Ht=n.getParameter(n.UNPACK_ROW_LENGTH),kt=n.getParameter(n.UNPACK_SKIP_PIXELS),fn=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,J.width);for(let mt=0,Jt=Ke.length;mt<Jt;mt++){let pn=Ke[mt],vn=Math.floor(pn.start/4),Ft=Math.ceil(pn.count/4),_n=vn%J.width,Re=Math.floor(vn/J.width),Lt=Ft,wt=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,_n),n.pixelStorei(n.UNPACK_SKIP_ROWS,Re),e.texSubImage2D(n.TEXTURE_2D,0,_n,Re,Lt,wt,Ge,it,J.data)}fe.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Ht),n.pixelStorei(n.UNPACK_SKIP_PIXELS,kt),n.pixelStorei(n.UNPACK_SKIP_ROWS,fn)}}function Pt(fe,J,Ge){let it=n.TEXTURE_2D;(J.isDataArrayTexture||J.isCompressedArrayTexture)&&(it=n.TEXTURE_2D_ARRAY),J.isData3DTexture&&(it=n.TEXTURE_3D);let ht=ut(fe,J),Ke=J.source;e.bindTexture(it,fe.__webglTexture,n.TEXTURE0+Ge);let yn=i.get(Ke);if(Ke.version!==yn.__version||ht===!0){e.activeTexture(n.TEXTURE0+Ge);let Ht=Wi.getPrimaries(Wi.workingColorSpace),kt=J.colorSpace===Nh?null:Wi.getPrimaries(J.colorSpace),fn=J.colorSpace===Nh||Ht===kt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,J.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,J.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,fn);let mt=O(J.image,!1,r.maxTextureSize);mt=In(J,mt);let Jt=s.convert(J.format,J.colorSpace),pn=s.convert(J.type),vn=Z(J.internalFormat,Jt,pn,J.colorSpace,J.isVideoTexture);Tt(it,J);let Ft,_n=J.mipmaps,Re=J.isVideoTexture!==!0,Lt=yn.__version===void 0||ht===!0,wt=Ke.dataReady,nn=le(J,mt);if(J.isDepthTexture)vn=$(J.format===Vy,J.type),Lt&&(Re?e.texStorage2D(n.TEXTURE_2D,1,vn,mt.width,mt.height):e.texImage2D(n.TEXTURE_2D,0,vn,mt.width,mt.height,0,Jt,pn,null));else if(J.isDataTexture)if(_n.length>0){Re&&Lt&&e.texStorage2D(n.TEXTURE_2D,nn,vn,_n[0].width,_n[0].height);for(let pt=0,ct=_n.length;pt<ct;pt++)Ft=_n[pt],Re?wt&&e.texSubImage2D(n.TEXTURE_2D,pt,0,0,Ft.width,Ft.height,Jt,pn,Ft.data):e.texImage2D(n.TEXTURE_2D,pt,vn,Ft.width,Ft.height,0,Jt,pn,Ft.data);J.generateMipmaps=!1}else Re?(Lt&&e.texStorage2D(n.TEXTURE_2D,nn,vn,mt.width,mt.height),wt&&at(J,mt,Jt,pn)):e.texImage2D(n.TEXTURE_2D,0,vn,mt.width,mt.height,0,Jt,pn,mt.data);else if(J.isCompressedTexture)if(J.isCompressedArrayTexture){Re&&Lt&&e.texStorage3D(n.TEXTURE_2D_ARRAY,nn,vn,_n[0].width,_n[0].height,mt.depth);for(let pt=0,ct=_n.length;pt<ct;pt++)if(Ft=_n[pt],J.format!==ol)if(Jt!==null)if(Re){if(wt)if(J.layerUpdates.size>0){let sn=bk(Ft.width,Ft.height,J.format,J.type);for(let Bn of J.layerUpdates){let An=Ft.data.subarray(Bn*sn/Ft.data.BYTES_PER_ELEMENT,(Bn+1)*sn/Ft.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,pt,0,0,Bn,Ft.width,Ft.height,1,Jt,An)}J.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,pt,0,0,0,Ft.width,Ft.height,mt.depth,Jt,Ft.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,pt,vn,Ft.width,Ft.height,mt.depth,0,Ft.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Re?wt&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,pt,0,0,0,Ft.width,Ft.height,mt.depth,Jt,pn,Ft.data):e.texImage3D(n.TEXTURE_2D_ARRAY,pt,vn,Ft.width,Ft.height,mt.depth,0,Jt,pn,Ft.data)}else{Re&&Lt&&e.texStorage2D(n.TEXTURE_2D,nn,vn,_n[0].width,_n[0].height);for(let pt=0,ct=_n.length;pt<ct;pt++)Ft=_n[pt],J.format!==ol?Jt!==null?Re?wt&&e.compressedTexSubImage2D(n.TEXTURE_2D,pt,0,0,Ft.width,Ft.height,Jt,Ft.data):e.compressedTexImage2D(n.TEXTURE_2D,pt,vn,Ft.width,Ft.height,0,Ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Re?wt&&e.texSubImage2D(n.TEXTURE_2D,pt,0,0,Ft.width,Ft.height,Jt,pn,Ft.data):e.texImage2D(n.TEXTURE_2D,pt,vn,Ft.width,Ft.height,0,Jt,pn,Ft.data)}else if(J.isDataArrayTexture)if(Re){if(Lt&&e.texStorage3D(n.TEXTURE_2D_ARRAY,nn,vn,mt.width,mt.height,mt.depth),wt)if(J.layerUpdates.size>0){let pt=bk(mt.width,mt.height,J.format,J.type);for(let ct of J.layerUpdates){let sn=mt.data.subarray(ct*pt/mt.data.BYTES_PER_ELEMENT,(ct+1)*pt/mt.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ct,mt.width,mt.height,1,Jt,pn,sn)}J.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,mt.width,mt.height,mt.depth,Jt,pn,mt.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,vn,mt.width,mt.height,mt.depth,0,Jt,pn,mt.data);else if(J.isData3DTexture)Re?(Lt&&e.texStorage3D(n.TEXTURE_3D,nn,vn,mt.width,mt.height,mt.depth),wt&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,mt.width,mt.height,mt.depth,Jt,pn,mt.data)):e.texImage3D(n.TEXTURE_3D,0,vn,mt.width,mt.height,mt.depth,0,Jt,pn,mt.data);else if(J.isFramebufferTexture){if(Lt)if(Re)e.texStorage2D(n.TEXTURE_2D,nn,vn,mt.width,mt.height);else{let pt=mt.width,ct=mt.height;for(let sn=0;sn<nn;sn++)e.texImage2D(n.TEXTURE_2D,sn,vn,pt,ct,0,Jt,pn,null),pt>>=1,ct>>=1}}else if(_n.length>0){if(Re&&Lt){let pt=Gi(_n[0]);e.texStorage2D(n.TEXTURE_2D,nn,vn,pt.width,pt.height)}for(let pt=0,ct=_n.length;pt<ct;pt++)Ft=_n[pt],Re?wt&&e.texSubImage2D(n.TEXTURE_2D,pt,0,0,Jt,pn,Ft):e.texImage2D(n.TEXTURE_2D,pt,vn,Jt,pn,Ft);J.generateMipmaps=!1}else if(Re){if(Lt){let pt=Gi(mt);e.texStorage2D(n.TEXTURE_2D,nn,vn,pt.width,pt.height)}wt&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Jt,pn,mt)}else e.texImage2D(n.TEXTURE_2D,0,vn,Jt,pn,mt);N(J)&&T(it),yn.__version=Ke.version,J.onUpdate&&J.onUpdate(J)}fe.__version=J.version}function rt(fe,J,Ge){if(J.image.length!==6)return;let it=ut(fe,J),ht=J.source;e.bindTexture(n.TEXTURE_CUBE_MAP,fe.__webglTexture,n.TEXTURE0+Ge);let Ke=i.get(ht);if(ht.version!==Ke.__version||it===!0){e.activeTexture(n.TEXTURE0+Ge);let yn=Wi.getPrimaries(Wi.workingColorSpace),Ht=J.colorSpace===Nh?null:Wi.getPrimaries(J.colorSpace),kt=J.colorSpace===Nh||yn===Ht?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,J.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,J.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,kt);let fn=J.isCompressedTexture||J.image[0].isCompressedTexture,mt=J.image[0]&&J.image[0].isDataTexture,Jt=[];for(let ct=0;ct<6;ct++)!fn&&!mt?Jt[ct]=O(J.image[ct],!0,r.maxCubemapSize):Jt[ct]=mt?J.image[ct].image:J.image[ct],Jt[ct]=In(J,Jt[ct]);let pn=Jt[0],vn=s.convert(J.format,J.colorSpace),Ft=s.convert(J.type),_n=Z(J.internalFormat,vn,Ft,J.colorSpace),Re=J.isVideoTexture!==!0,Lt=Ke.__version===void 0||it===!0,wt=ht.dataReady,nn=le(J,pn);Tt(n.TEXTURE_CUBE_MAP,J);let pt;if(fn){Re&&Lt&&e.texStorage2D(n.TEXTURE_CUBE_MAP,nn,_n,pn.width,pn.height);for(let ct=0;ct<6;ct++){pt=Jt[ct].mipmaps;for(let sn=0;sn<pt.length;sn++){let Bn=pt[sn];J.format!==ol?vn!==null?Re?wt&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn,0,0,Bn.width,Bn.height,vn,Bn.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn,_n,Bn.width,Bn.height,0,Bn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Re?wt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn,0,0,Bn.width,Bn.height,vn,Ft,Bn.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn,_n,Bn.width,Bn.height,0,vn,Ft,Bn.data)}}}else{if(pt=J.mipmaps,Re&&Lt){pt.length>0&&nn++;let ct=Gi(Jt[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,nn,_n,ct.width,ct.height)}for(let ct=0;ct<6;ct++)if(mt){Re?wt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,0,0,Jt[ct].width,Jt[ct].height,vn,Ft,Jt[ct].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,_n,Jt[ct].width,Jt[ct].height,0,vn,Ft,Jt[ct].data);for(let sn=0;sn<pt.length;sn++){let An=pt[sn].image[ct].image;Re?wt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn+1,0,0,An.width,An.height,vn,Ft,An.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn+1,_n,An.width,An.height,0,vn,Ft,An.data)}}else{Re?wt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,0,0,vn,Ft,Jt[ct]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,_n,vn,Ft,Jt[ct]);for(let sn=0;sn<pt.length;sn++){let Bn=pt[sn];Re?wt&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn+1,0,0,vn,Ft,Bn.image[ct]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ct,sn+1,_n,vn,Ft,Bn.image[ct])}}}N(J)&&T(n.TEXTURE_CUBE_MAP),Ke.__version=ht.version,J.onUpdate&&J.onUpdate(J)}fe.__version=J.version}function Ut(fe,J,Ge,it,ht,Ke){let yn=s.convert(Ge.format,Ge.colorSpace),Ht=s.convert(Ge.type),kt=Z(Ge.internalFormat,yn,Ht,Ge.colorSpace),fn=i.get(J),mt=i.get(Ge);if(mt.__renderTarget=J,!fn.__hasExternalTextures){let Jt=Math.max(1,J.width>>Ke),pn=Math.max(1,J.height>>Ke);ht===n.TEXTURE_3D||ht===n.TEXTURE_2D_ARRAY?e.texImage3D(ht,Ke,kt,Jt,pn,J.depth,0,yn,Ht,null):e.texImage2D(ht,Ke,kt,Jt,pn,0,yn,Ht,null)}e.bindFramebuffer(n.FRAMEBUFFER,fe),Jn(J)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,it,ht,mt.__webglTexture,0,rn(J)):(ht===n.TEXTURE_2D||ht>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ht<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,it,ht,mt.__webglTexture,Ke),e.bindFramebuffer(n.FRAMEBUFFER,null)}function Cn(fe,J,Ge){if(n.bindRenderbuffer(n.RENDERBUFFER,fe),J.depthBuffer){let it=J.depthTexture,ht=it&&it.isDepthTexture?it.type:null,Ke=$(J.stencilBuffer,ht),yn=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ht=rn(J);Jn(J)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ht,Ke,J.width,J.height):Ge?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ht,Ke,J.width,J.height):n.renderbufferStorage(n.RENDERBUFFER,Ke,J.width,J.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,yn,n.RENDERBUFFER,fe)}else{let it=J.textures;for(let ht=0;ht<it.length;ht++){let Ke=it[ht],yn=s.convert(Ke.format,Ke.colorSpace),Ht=s.convert(Ke.type),kt=Z(Ke.internalFormat,yn,Ht,Ke.colorSpace),fn=rn(J);Ge&&Jn(J)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,fn,kt,J.width,J.height):Jn(J)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,fn,kt,J.width,J.height):n.renderbufferStorage(n.RENDERBUFFER,kt,J.width,J.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function hn(fe,J){if(J&&J.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,fe),!(J.depthTexture&&J.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let it=i.get(J.depthTexture);it.__renderTarget=J,(!it.__webglTexture||J.depthTexture.image.width!==J.width||J.depthTexture.image.height!==J.height)&&(J.depthTexture.image.width=J.width,J.depthTexture.image.height=J.height,J.depthTexture.needsUpdate=!0),Ue(J.depthTexture,0);let ht=it.__webglTexture,Ke=rn(J);if(J.depthTexture.format===xy)Jn(J)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ht,0,Ke):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ht,0);else if(J.depthTexture.format===Vy)Jn(J)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ht,0,Ke):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ht,0);else throw new Error("Unknown depthTexture format")}function Mt(fe){let J=i.get(fe),Ge=fe.isWebGLCubeRenderTarget===!0;if(J.__boundDepthTexture!==fe.depthTexture){let it=fe.depthTexture;if(J.__depthDisposeCallback&&J.__depthDisposeCallback(),it){let ht=()=>{delete J.__boundDepthTexture,delete J.__depthDisposeCallback,it.removeEventListener("dispose",ht)};it.addEventListener("dispose",ht),J.__depthDisposeCallback=ht}J.__boundDepthTexture=it}if(fe.depthTexture&&!J.__autoAllocateDepthBuffer){if(Ge)throw new Error("target.depthTexture not supported in Cube render targets");let it=fe.texture.mipmaps;it&&it.length>0?hn(J.__webglFramebuffer[0],fe):hn(J.__webglFramebuffer,fe)}else if(Ge){J.__webglDepthbuffer=[];for(let it=0;it<6;it++)if(e.bindFramebuffer(n.FRAMEBUFFER,J.__webglFramebuffer[it]),J.__webglDepthbuffer[it]===void 0)J.__webglDepthbuffer[it]=n.createRenderbuffer(),Cn(J.__webglDepthbuffer[it],fe,!1);else{let ht=fe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ke=J.__webglDepthbuffer[it];n.bindRenderbuffer(n.RENDERBUFFER,Ke),n.framebufferRenderbuffer(n.FRAMEBUFFER,ht,n.RENDERBUFFER,Ke)}}else{let it=fe.texture.mipmaps;if(it&&it.length>0?e.bindFramebuffer(n.FRAMEBUFFER,J.__webglFramebuffer[0]):e.bindFramebuffer(n.FRAMEBUFFER,J.__webglFramebuffer),J.__webglDepthbuffer===void 0)J.__webglDepthbuffer=n.createRenderbuffer(),Cn(J.__webglDepthbuffer,fe,!1);else{let ht=fe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ke=J.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Ke),n.framebufferRenderbuffer(n.FRAMEBUFFER,ht,n.RENDERBUFFER,Ke)}}e.bindFramebuffer(n.FRAMEBUFFER,null)}function Xi(fe,J,Ge){let it=i.get(fe);J!==void 0&&Ut(it.__webglFramebuffer,fe,fe.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Ge!==void 0&&Mt(fe)}function Fn(fe){let J=fe.texture,Ge=i.get(fe),it=i.get(J);fe.addEventListener("dispose",oe);let ht=fe.textures,Ke=fe.isWebGLCubeRenderTarget===!0,yn=ht.length>1;if(yn||(it.__webglTexture===void 0&&(it.__webglTexture=n.createTexture()),it.__version=J.version,o.memory.textures++),Ke){Ge.__webglFramebuffer=[];for(let Ht=0;Ht<6;Ht++)if(J.mipmaps&&J.mipmaps.length>0){Ge.__webglFramebuffer[Ht]=[];for(let kt=0;kt<J.mipmaps.length;kt++)Ge.__webglFramebuffer[Ht][kt]=n.createFramebuffer()}else Ge.__webglFramebuffer[Ht]=n.createFramebuffer()}else{if(J.mipmaps&&J.mipmaps.length>0){Ge.__webglFramebuffer=[];for(let Ht=0;Ht<J.mipmaps.length;Ht++)Ge.__webglFramebuffer[Ht]=n.createFramebuffer()}else Ge.__webglFramebuffer=n.createFramebuffer();if(yn)for(let Ht=0,kt=ht.length;Ht<kt;Ht++){let fn=i.get(ht[Ht]);fn.__webglTexture===void 0&&(fn.__webglTexture=n.createTexture(),o.memory.textures++)}if(fe.samples>0&&Jn(fe)===!1){Ge.__webglMultisampledFramebuffer=n.createFramebuffer(),Ge.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,Ge.__webglMultisampledFramebuffer);for(let Ht=0;Ht<ht.length;Ht++){let kt=ht[Ht];Ge.__webglColorRenderbuffer[Ht]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Ge.__webglColorRenderbuffer[Ht]);let fn=s.convert(kt.format,kt.colorSpace),mt=s.convert(kt.type),Jt=Z(kt.internalFormat,fn,mt,kt.colorSpace,fe.isXRRenderTarget===!0),pn=rn(fe);n.renderbufferStorageMultisample(n.RENDERBUFFER,pn,Jt,fe.width,fe.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.RENDERBUFFER,Ge.__webglColorRenderbuffer[Ht])}n.bindRenderbuffer(n.RENDERBUFFER,null),fe.depthBuffer&&(Ge.__webglDepthRenderbuffer=n.createRenderbuffer(),Cn(Ge.__webglDepthRenderbuffer,fe,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ke){e.bindTexture(n.TEXTURE_CUBE_MAP,it.__webglTexture),Tt(n.TEXTURE_CUBE_MAP,J);for(let Ht=0;Ht<6;Ht++)if(J.mipmaps&&J.mipmaps.length>0)for(let kt=0;kt<J.mipmaps.length;kt++)Ut(Ge.__webglFramebuffer[Ht][kt],fe,J,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,kt);else Ut(Ge.__webglFramebuffer[Ht],fe,J,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,0);N(J)&&T(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(yn){for(let Ht=0,kt=ht.length;Ht<kt;Ht++){let fn=ht[Ht],mt=i.get(fn);e.bindTexture(n.TEXTURE_2D,mt.__webglTexture),Tt(n.TEXTURE_2D,fn),Ut(Ge.__webglFramebuffer,fe,fn,n.COLOR_ATTACHMENT0+Ht,n.TEXTURE_2D,0),N(fn)&&T(n.TEXTURE_2D)}e.unbindTexture()}else{let Ht=n.TEXTURE_2D;if((fe.isWebGL3DRenderTarget||fe.isWebGLArrayRenderTarget)&&(Ht=fe.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(Ht,it.__webglTexture),Tt(Ht,J),J.mipmaps&&J.mipmaps.length>0)for(let kt=0;kt<J.mipmaps.length;kt++)Ut(Ge.__webglFramebuffer[kt],fe,J,n.COLOR_ATTACHMENT0,Ht,kt);else Ut(Ge.__webglFramebuffer,fe,J,n.COLOR_ATTACHMENT0,Ht,0);N(J)&&T(Ht),e.unbindTexture()}fe.depthBuffer&&Mt(fe)}function Me(fe){let J=fe.textures;for(let Ge=0,it=J.length;Ge<it;Ge++){let ht=J[Ge];if(N(ht)){let Ke=j(fe),yn=i.get(ht).__webglTexture;e.bindTexture(Ke,yn),T(Ke),e.unbindTexture()}}}let hr=[],Kn=[];function hi(fe){if(fe.samples>0){if(Jn(fe)===!1){let J=fe.textures,Ge=fe.width,it=fe.height,ht=n.COLOR_BUFFER_BIT,Ke=fe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,yn=i.get(fe),Ht=J.length>1;if(Ht)for(let fn=0;fn<J.length;fn++)e.bindFramebuffer(n.FRAMEBUFFER,yn.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+fn,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,yn.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+fn,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,yn.__webglMultisampledFramebuffer);let kt=fe.texture.mipmaps;kt&&kt.length>0?e.bindFramebuffer(n.DRAW_FRAMEBUFFER,yn.__webglFramebuffer[0]):e.bindFramebuffer(n.DRAW_FRAMEBUFFER,yn.__webglFramebuffer);for(let fn=0;fn<J.length;fn++){if(fe.resolveDepthBuffer&&(fe.depthBuffer&&(ht|=n.DEPTH_BUFFER_BIT),fe.stencilBuffer&&fe.resolveStencilBuffer&&(ht|=n.STENCIL_BUFFER_BIT)),Ht){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,yn.__webglColorRenderbuffer[fn]);let mt=i.get(J[fn]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,mt,0)}n.blitFramebuffer(0,0,Ge,it,0,0,Ge,it,ht,n.NEAREST),u===!0&&(hr.length=0,Kn.length=0,hr.push(n.COLOR_ATTACHMENT0+fn),fe.depthBuffer&&fe.resolveDepthBuffer===!1&&(hr.push(Ke),Kn.push(Ke),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Kn)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,hr))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ht)for(let fn=0;fn<J.length;fn++){e.bindFramebuffer(n.FRAMEBUFFER,yn.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+fn,n.RENDERBUFFER,yn.__webglColorRenderbuffer[fn]);let mt=i.get(J[fn]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,yn.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+fn,n.TEXTURE_2D,mt,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,yn.__webglMultisampledFramebuffer)}else if(fe.depthBuffer&&fe.resolveDepthBuffer===!1&&u){let J=fe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[J])}}}function rn(fe){return Math.min(r.maxSamples,fe.samples)}function Jn(fe){let J=i.get(fe);return fe.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&J.__useRenderToTexture!==!1}function dn(fe){let J=o.render.frame;g.get(fe)!==J&&(g.set(fe,J),fe.update())}function In(fe,J){let Ge=fe.colorSpace,it=fe.format,ht=fe.type;return fe.isCompressedTexture===!0||fe.isVideoTexture===!0||Ge!==ho&&Ge!==Nh&&(Wi.getTransfer(Ge)===ur?(it!==ol||ht!==Fc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ge)),J}function Gi(fe){return typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement?(d.width=fe.naturalWidth||fe.width,d.height=fe.naturalHeight||fe.height):typeof VideoFrame<"u"&&fe instanceof VideoFrame?(d.width=fe.displayWidth,d.height=fe.displayHeight):(d.width=fe.width,d.height=fe.height),d}this.allocateTextureUnit=de,this.resetTextureUnits=we,this.setTexture2D=Ue,this.setTexture2DArray=he,this.setTexture3D=Pe,this.setTextureCube=me,this.rebindTextures=Xi,this.setupRenderTarget=Fn,this.updateRenderTargetMipmap=Me,this.updateMultisampleRenderTarget=hi,this.setupDepthRenderbuffer=Mt,this.setupFrameBufferTexture=Ut,this.useMultisampledRTT=Jn}function oue(n,t){function e(i,r=Nh){let s,o=Wi.getTransfer(r);if(i===Fc)return n.UNSIGNED_BYTE;if(i===KM)return n.UNSIGNED_SHORT_4_4_4_4;if(i===QM)return n.UNSIGNED_SHORT_5_5_5_1;if(i===ok)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===rk)return n.BYTE;if(i===sk)return n.SHORT;if(i===Oy)return n.UNSIGNED_SHORT;if(i===ZM)return n.INT;if(i===Jd)return n.UNSIGNED_INT;if(i===Hl)return n.FLOAT;if(i===Fy)return n.HALF_FLOAT;if(i===ak)return n.ALPHA;if(i===lk)return n.RGB;if(i===ol)return n.RGBA;if(i===xy)return n.DEPTH_COMPONENT;if(i===Vy)return n.DEPTH_STENCIL;if(i===JM)return n.RED;if(i===e1)return n.RED_INTEGER;if(i===ck)return n.RG;if(i===t1)return n.RG_INTEGER;if(i===n1)return n.RGBA_INTEGER;if(i===ab||i===lb||i===cb||i===ub)if(o===ur)if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===ab)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===lb)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===cb)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===ub)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===ab)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===lb)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===cb)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===ub)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===i1||i===r1||i===s1||i===o1)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===i1)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===r1)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===s1)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===o1)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===a1||i===l1||i===c1)if(s=t.get("WEBGL_compressed_texture_etc"),s!==null){if(i===a1||i===l1)return o===ur?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===c1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===u1||i===h1||i===d1||i===f1||i===p1||i===m1||i===g1||i===y1||i===v1||i===_1||i===b1||i===x1||i===w1||i===S1)if(s=t.get("WEBGL_compressed_texture_astc"),s!==null){if(i===u1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===h1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===d1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===f1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===p1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===m1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===g1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===y1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===v1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===_1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===b1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===x1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===w1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===S1)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===hb||i===C1||i===M1)if(s=t.get("EXT_texture_compression_bptc"),s!==null){if(i===hb)return o===ur?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===C1)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===M1)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===uk||i===E1||i===T1||i===A1)if(s=t.get("EXT_texture_compression_rgtc"),s!==null){if(i===hb)return s.COMPRESSED_RED_RGTC1_EXT;if(i===E1)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===T1)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===A1)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===By?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}var aue=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,lue=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,kk=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,i){if(this.texture===null){let r=new al,s=t.properties.get(r);s.__webglTexture=e.texture,(e.depthNear!==i.depthNear||e.depthFar!==i.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(this.texture!==null&&this.mesh===null){let e=t.cameras[0].viewport,i=new Lc({vertexShader:aue,fragmentShader:lue,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new As(new X_(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},Lk=class extends Iu{constructor(t,e){super();let i=this,r=null,s=1,o=null,a="local-floor",u=1,d=null,g=null,v=null,x=null,C=null,A=null,O=new kk,N=e.getContextAttributes(),T=null,j=null,Z=[],$=[],le=new qn,K=null,oe=new Es;oe.viewport=new rr;let ue=new Es;ue.viewport=new rr;let te=[oe,ue],V=new FM,se=null,we=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ie){let at=Z[Ie];return at===void 0&&(at=new My,Z[Ie]=at),at.getTargetRaySpace()},this.getControllerGrip=function(Ie){let at=Z[Ie];return at===void 0&&(at=new My,Z[Ie]=at),at.getGripSpace()},this.getHand=function(Ie){let at=Z[Ie];return at===void 0&&(at=new My,Z[Ie]=at),at.getHandSpace()};function de(Ie){let at=$.indexOf(Ie.inputSource);if(at===-1)return;let Pt=Z[at];Pt!==void 0&&(Pt.update(Ie.inputSource,Ie.frame,d||o),Pt.dispatchEvent({type:Ie.type,data:Ie.inputSource}))}function je(){r.removeEventListener("select",de),r.removeEventListener("selectstart",de),r.removeEventListener("selectend",de),r.removeEventListener("squeeze",de),r.removeEventListener("squeezestart",de),r.removeEventListener("squeezeend",de),r.removeEventListener("end",je),r.removeEventListener("inputsourceschange",Ue);for(let Ie=0;Ie<Z.length;Ie++){let at=$[Ie];at!==null&&($[Ie]=null,Z[Ie].disconnect(at))}se=null,we=null,O.reset(),t.setRenderTarget(T),C=null,x=null,v=null,r=null,j=null,ut.stop(),i.isPresenting=!1,t.setPixelRatio(K),t.setSize(le.width,le.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ie){s=Ie,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ie){a=Ie,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(Ie){d=Ie},this.getBaseLayer=function(){return x!==null?x:C},this.getBinding=function(){return v},this.getFrame=function(){return A},this.getSession=function(){return r},this.setSession=function(Ie){return Wm(this,null,function*(){if(r=Ie,r!==null){if(T=t.getRenderTarget(),r.addEventListener("select",de),r.addEventListener("selectstart",de),r.addEventListener("selectend",de),r.addEventListener("squeeze",de),r.addEventListener("squeezestart",de),r.addEventListener("squeezeend",de),r.addEventListener("end",je),r.addEventListener("inputsourceschange",Ue),N.xrCompatible!==!0&&(yield e.makeXRCompatible()),K=t.getPixelRatio(),t.getSize(le),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Pt=null,rt=null,Ut=null;N.depth&&(Ut=N.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Pt=N.stencil?Vy:xy,rt=N.stencil?By:Jd);let Cn={colorFormat:e.RGBA8,depthFormat:Ut,scaleFactor:s};v=new XRWebGLBinding(r,e),x=v.createProjectionLayer(Cn),r.updateRenderState({layers:[x]}),t.setPixelRatio(1),t.setSize(x.textureWidth,x.textureHeight,!1),j=new Ru(x.textureWidth,x.textureHeight,{format:ol,type:Fc,depthTexture:new q_(x.textureWidth,x.textureHeight,rt,void 0,void 0,void 0,void 0,void 0,void 0,Pt),stencilBuffer:N.stencil,colorSpace:t.outputColorSpace,samples:N.antialias?4:0,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}else{let Pt={antialias:N.antialias,alpha:!0,depth:N.depth,stencil:N.stencil,framebufferScaleFactor:s};C=new XRWebGLLayer(r,e,Pt),r.updateRenderState({baseLayer:C}),t.setPixelRatio(1),t.setSize(C.framebufferWidth,C.framebufferHeight,!1),j=new Ru(C.framebufferWidth,C.framebufferHeight,{format:ol,type:Fc,colorSpace:t.outputColorSpace,stencilBuffer:N.stencil,resolveDepthBuffer:C.ignoreDepthValues===!1,resolveStencilBuffer:C.ignoreDepthValues===!1})}j.isXRRenderTarget=!0,this.setFoveation(u),d=null,o=yield r.requestReferenceSpace(a),ut.setContext(r),ut.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return O.getDepthTexture()};function Ue(Ie){for(let at=0;at<Ie.removed.length;at++){let Pt=Ie.removed[at],rt=$.indexOf(Pt);rt>=0&&($[rt]=null,Z[rt].disconnect(Pt))}for(let at=0;at<Ie.added.length;at++){let Pt=Ie.added[at],rt=$.indexOf(Pt);if(rt===-1){for(let Cn=0;Cn<Z.length;Cn++)if(Cn>=$.length){$.push(Pt),rt=Cn;break}else if($[Cn]===null){$[Cn]=Pt,rt=Cn;break}if(rt===-1)break}let Ut=Z[rt];Ut&&Ut.connect(Pt)}}let he=new Le,Pe=new Le;function me(Ie,at,Pt){he.setFromMatrixPosition(at.matrixWorld),Pe.setFromMatrixPosition(Pt.matrixWorld);let rt=he.distanceTo(Pe),Ut=at.projectionMatrix.elements,Cn=Pt.projectionMatrix.elements,hn=Ut[14]/(Ut[10]-1),Mt=Ut[14]/(Ut[10]+1),Xi=(Ut[9]+1)/Ut[5],Fn=(Ut[9]-1)/Ut[5],Me=(Ut[8]-1)/Ut[0],hr=(Cn[8]+1)/Cn[0],Kn=hn*Me,hi=hn*hr,rn=rt/(-Me+hr),Jn=rn*-Me;if(at.matrixWorld.decompose(Ie.position,Ie.quaternion,Ie.scale),Ie.translateX(Jn),Ie.translateZ(rn),Ie.matrixWorld.compose(Ie.position,Ie.quaternion,Ie.scale),Ie.matrixWorldInverse.copy(Ie.matrixWorld).invert(),Ut[10]===-1)Ie.projectionMatrix.copy(at.projectionMatrix),Ie.projectionMatrixInverse.copy(at.projectionMatrixInverse);else{let dn=hn+rn,In=Mt+rn,Gi=Kn-Jn,fe=hi+(rt-Jn),J=Xi*Mt/In*dn,Ge=Fn*Mt/In*dn;Ie.projectionMatrix.makePerspective(Gi,fe,J,Ge,dn,In),Ie.projectionMatrixInverse.copy(Ie.projectionMatrix).invert()}}function $e(Ie,at){at===null?Ie.matrixWorld.copy(Ie.matrix):Ie.matrixWorld.multiplyMatrices(at.matrixWorld,Ie.matrix),Ie.matrixWorldInverse.copy(Ie.matrixWorld).invert()}this.updateCamera=function(Ie){if(r===null)return;let at=Ie.near,Pt=Ie.far;O.texture!==null&&(O.depthNear>0&&(at=O.depthNear),O.depthFar>0&&(Pt=O.depthFar)),V.near=ue.near=oe.near=at,V.far=ue.far=oe.far=Pt,(se!==V.near||we!==V.far)&&(r.updateRenderState({depthNear:V.near,depthFar:V.far}),se=V.near,we=V.far),oe.layers.mask=Ie.layers.mask|2,ue.layers.mask=Ie.layers.mask|4,V.layers.mask=oe.layers.mask|ue.layers.mask;let rt=Ie.parent,Ut=V.cameras;$e(V,rt);for(let Cn=0;Cn<Ut.length;Cn++)$e(Ut[Cn],rt);Ut.length===2?me(V,oe,ue):V.projectionMatrix.copy(oe.projectionMatrix),nt(Ie,V,rt)};function nt(Ie,at,Pt){Pt===null?Ie.matrix.copy(at.matrixWorld):(Ie.matrix.copy(Pt.matrixWorld),Ie.matrix.invert(),Ie.matrix.multiply(at.matrixWorld)),Ie.matrix.decompose(Ie.position,Ie.quaternion,Ie.scale),Ie.updateMatrixWorld(!0),Ie.projectionMatrix.copy(at.projectionMatrix),Ie.projectionMatrixInverse.copy(at.projectionMatrixInverse),Ie.isPerspectiveCamera&&(Ie.fov=Op*2*Math.atan(1/Ie.projectionMatrix.elements[5]),Ie.zoom=1)}this.getCamera=function(){return V},this.getFoveation=function(){if(!(x===null&&C===null))return u},this.setFoveation=function(Ie){u=Ie,x!==null&&(x.fixedFoveation=Ie),C!==null&&C.fixedFoveation!==void 0&&(C.fixedFoveation=Ie)},this.hasDepthSensing=function(){return O.texture!==null},this.getDepthSensingMesh=function(){return O.getMesh(V)};let xt=null;function Tt(Ie,at){if(g=at.getViewerPose(d||o),A=at,g!==null){let Pt=g.views;C!==null&&(t.setRenderTargetFramebuffer(j,C.framebuffer),t.setRenderTarget(j));let rt=!1;Pt.length!==V.cameras.length&&(V.cameras.length=0,rt=!0);for(let hn=0;hn<Pt.length;hn++){let Mt=Pt[hn],Xi=null;if(C!==null)Xi=C.getViewport(Mt);else{let Me=v.getViewSubImage(x,Mt);Xi=Me.viewport,hn===0&&(t.setRenderTargetTextures(j,Me.colorTexture,Me.depthStencilTexture),t.setRenderTarget(j))}let Fn=te[hn];Fn===void 0&&(Fn=new Es,Fn.layers.enable(hn),Fn.viewport=new rr,te[hn]=Fn),Fn.matrix.fromArray(Mt.transform.matrix),Fn.matrix.decompose(Fn.position,Fn.quaternion,Fn.scale),Fn.projectionMatrix.fromArray(Mt.projectionMatrix),Fn.projectionMatrixInverse.copy(Fn.projectionMatrix).invert(),Fn.viewport.set(Xi.x,Xi.y,Xi.width,Xi.height),hn===0&&(V.matrix.copy(Fn.matrix),V.matrix.decompose(V.position,V.quaternion,V.scale)),rt===!0&&V.cameras.push(Fn)}let Ut=r.enabledFeatures;if(Ut&&Ut.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&v){let hn=v.getDepthInformation(Pt[0]);hn&&hn.isValid&&hn.texture&&O.init(t,hn,r.renderState)}}for(let Pt=0;Pt<Z.length;Pt++){let rt=$[Pt],Ut=Z[Pt];rt!==null&&Ut!==void 0&&Ut.update(rt,at,d||o)}xt&&xt(Ie,at),at.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:at}),A=null}let ut=new G5;ut.setAnimationLoop(Tt),this.setAnimationLoop=function(Ie){xt=Ie},this.dispose=function(){}}},Xp=new Zd,cue=new ui;function uue(n,t){function e(N,T){N.matrixAutoUpdate===!0&&N.updateMatrix(),T.value.copy(N.matrix)}function i(N,T){T.color.getRGB(N.fogColor.value,yk(n)),T.isFog?(N.fogNear.value=T.near,N.fogFar.value=T.far):T.isFogExp2&&(N.fogDensity.value=T.density)}function r(N,T,j,Z,$){T.isMeshBasicMaterial||T.isMeshLambertMaterial?s(N,T):T.isMeshToonMaterial?(s(N,T),v(N,T)):T.isMeshPhongMaterial?(s(N,T),g(N,T)):T.isMeshStandardMaterial?(s(N,T),x(N,T),T.isMeshPhysicalMaterial&&C(N,T,$)):T.isMeshMatcapMaterial?(s(N,T),A(N,T)):T.isMeshDepthMaterial?s(N,T):T.isMeshDistanceMaterial?(s(N,T),O(N,T)):T.isMeshNormalMaterial?s(N,T):T.isLineBasicMaterial?(o(N,T),T.isLineDashedMaterial&&a(N,T)):T.isPointsMaterial?u(N,T,j,Z):T.isSpriteMaterial?d(N,T):T.isShadowMaterial?(N.color.value.copy(T.color),N.opacity.value=T.opacity):T.isShaderMaterial&&(T.uniformsNeedUpdate=!1)}function s(N,T){N.opacity.value=T.opacity,T.color&&N.diffuse.value.copy(T.color),T.emissive&&N.emissive.value.copy(T.emissive).multiplyScalar(T.emissiveIntensity),T.map&&(N.map.value=T.map,e(T.map,N.mapTransform)),T.alphaMap&&(N.alphaMap.value=T.alphaMap,e(T.alphaMap,N.alphaMapTransform)),T.bumpMap&&(N.bumpMap.value=T.bumpMap,e(T.bumpMap,N.bumpMapTransform),N.bumpScale.value=T.bumpScale,T.side===sa&&(N.bumpScale.value*=-1)),T.normalMap&&(N.normalMap.value=T.normalMap,e(T.normalMap,N.normalMapTransform),N.normalScale.value.copy(T.normalScale),T.side===sa&&N.normalScale.value.negate()),T.displacementMap&&(N.displacementMap.value=T.displacementMap,e(T.displacementMap,N.displacementMapTransform),N.displacementScale.value=T.displacementScale,N.displacementBias.value=T.displacementBias),T.emissiveMap&&(N.emissiveMap.value=T.emissiveMap,e(T.emissiveMap,N.emissiveMapTransform)),T.specularMap&&(N.specularMap.value=T.specularMap,e(T.specularMap,N.specularMapTransform)),T.alphaTest>0&&(N.alphaTest.value=T.alphaTest);let j=t.get(T),Z=j.envMap,$=j.envMapRotation;Z&&(N.envMap.value=Z,Xp.copy($),Xp.x*=-1,Xp.y*=-1,Xp.z*=-1,Z.isCubeTexture&&Z.isRenderTargetTexture===!1&&(Xp.y*=-1,Xp.z*=-1),N.envMapRotation.value.setFromMatrix4(cue.makeRotationFromEuler(Xp)),N.flipEnvMap.value=Z.isCubeTexture&&Z.isRenderTargetTexture===!1?-1:1,N.reflectivity.value=T.reflectivity,N.ior.value=T.ior,N.refractionRatio.value=T.refractionRatio),T.lightMap&&(N.lightMap.value=T.lightMap,N.lightMapIntensity.value=T.lightMapIntensity,e(T.lightMap,N.lightMapTransform)),T.aoMap&&(N.aoMap.value=T.aoMap,N.aoMapIntensity.value=T.aoMapIntensity,e(T.aoMap,N.aoMapTransform))}function o(N,T){N.diffuse.value.copy(T.color),N.opacity.value=T.opacity,T.map&&(N.map.value=T.map,e(T.map,N.mapTransform))}function a(N,T){N.dashSize.value=T.dashSize,N.totalSize.value=T.dashSize+T.gapSize,N.scale.value=T.scale}function u(N,T,j,Z){N.diffuse.value.copy(T.color),N.opacity.value=T.opacity,N.size.value=T.size*j,N.scale.value=Z*.5,T.map&&(N.map.value=T.map,e(T.map,N.uvTransform)),T.alphaMap&&(N.alphaMap.value=T.alphaMap,e(T.alphaMap,N.alphaMapTransform)),T.alphaTest>0&&(N.alphaTest.value=T.alphaTest)}function d(N,T){N.diffuse.value.copy(T.color),N.opacity.value=T.opacity,N.rotation.value=T.rotation,T.map&&(N.map.value=T.map,e(T.map,N.mapTransform)),T.alphaMap&&(N.alphaMap.value=T.alphaMap,e(T.alphaMap,N.alphaMapTransform)),T.alphaTest>0&&(N.alphaTest.value=T.alphaTest)}function g(N,T){N.specular.value.copy(T.specular),N.shininess.value=Math.max(T.shininess,1e-4)}function v(N,T){T.gradientMap&&(N.gradientMap.value=T.gradientMap)}function x(N,T){N.metalness.value=T.metalness,T.metalnessMap&&(N.metalnessMap.value=T.metalnessMap,e(T.metalnessMap,N.metalnessMapTransform)),N.roughness.value=T.roughness,T.roughnessMap&&(N.roughnessMap.value=T.roughnessMap,e(T.roughnessMap,N.roughnessMapTransform)),T.envMap&&(N.envMapIntensity.value=T.envMapIntensity)}function C(N,T,j){N.ior.value=T.ior,T.sheen>0&&(N.sheenColor.value.copy(T.sheenColor).multiplyScalar(T.sheen),N.sheenRoughness.value=T.sheenRoughness,T.sheenColorMap&&(N.sheenColorMap.value=T.sheenColorMap,e(T.sheenColorMap,N.sheenColorMapTransform)),T.sheenRoughnessMap&&(N.sheenRoughnessMap.value=T.sheenRoughnessMap,e(T.sheenRoughnessMap,N.sheenRoughnessMapTransform))),T.clearcoat>0&&(N.clearcoat.value=T.clearcoat,N.clearcoatRoughness.value=T.clearcoatRoughness,T.clearcoatMap&&(N.clearcoatMap.value=T.clearcoatMap,e(T.clearcoatMap,N.clearcoatMapTransform)),T.clearcoatRoughnessMap&&(N.clearcoatRoughnessMap.value=T.clearcoatRoughnessMap,e(T.clearcoatRoughnessMap,N.clearcoatRoughnessMapTransform)),T.clearcoatNormalMap&&(N.clearcoatNormalMap.value=T.clearcoatNormalMap,e(T.clearcoatNormalMap,N.clearcoatNormalMapTransform),N.clearcoatNormalScale.value.copy(T.clearcoatNormalScale),T.side===sa&&N.clearcoatNormalScale.value.negate())),T.dispersion>0&&(N.dispersion.value=T.dispersion),T.iridescence>0&&(N.iridescence.value=T.iridescence,N.iridescenceIOR.value=T.iridescenceIOR,N.iridescenceThicknessMinimum.value=T.iridescenceThicknessRange[0],N.iridescenceThicknessMaximum.value=T.iridescenceThicknessRange[1],T.iridescenceMap&&(N.iridescenceMap.value=T.iridescenceMap,e(T.iridescenceMap,N.iridescenceMapTransform)),T.iridescenceThicknessMap&&(N.iridescenceThicknessMap.value=T.iridescenceThicknessMap,e(T.iridescenceThicknessMap,N.iridescenceThicknessMapTransform))),T.transmission>0&&(N.transmission.value=T.transmission,N.transmissionSamplerMap.value=j.texture,N.transmissionSamplerSize.value.set(j.width,j.height),T.transmissionMap&&(N.transmissionMap.value=T.transmissionMap,e(T.transmissionMap,N.transmissionMapTransform)),N.thickness.value=T.thickness,T.thicknessMap&&(N.thicknessMap.value=T.thicknessMap,e(T.thicknessMap,N.thicknessMapTransform)),N.attenuationDistance.value=T.attenuationDistance,N.attenuationColor.value.copy(T.attenuationColor)),T.anisotropy>0&&(N.anisotropyVector.value.set(T.anisotropy*Math.cos(T.anisotropyRotation),T.anisotropy*Math.sin(T.anisotropyRotation)),T.anisotropyMap&&(N.anisotropyMap.value=T.anisotropyMap,e(T.anisotropyMap,N.anisotropyMapTransform))),N.specularIntensity.value=T.specularIntensity,N.specularColor.value.copy(T.specularColor),T.specularColorMap&&(N.specularColorMap.value=T.specularColorMap,e(T.specularColorMap,N.specularColorMapTransform)),T.specularIntensityMap&&(N.specularIntensityMap.value=T.specularIntensityMap,e(T.specularIntensityMap,N.specularIntensityMapTransform))}function A(N,T){T.matcap&&(N.matcap.value=T.matcap)}function O(N,T){let j=t.get(T).light;N.referencePosition.value.setFromMatrixPosition(j.matrixWorld),N.nearDistance.value=j.shadow.camera.near,N.farDistance.value=j.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function hue(n,t,e,i){let r={},s={},o=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function u(j,Z){let $=Z.program;i.uniformBlockBinding(j,$)}function d(j,Z){let $=r[j.id];$===void 0&&(A(j),$=g(j),r[j.id]=$,j.addEventListener("dispose",N));let le=Z.program;i.updateUBOMapping(j,le);let K=t.render.frame;s[j.id]!==K&&(x(j),s[j.id]=K)}function g(j){let Z=v();j.__bindingPointIndex=Z;let $=n.createBuffer(),le=j.__size,K=j.usage;return n.bindBuffer(n.UNIFORM_BUFFER,$),n.bufferData(n.UNIFORM_BUFFER,le,K),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,Z,$),$}function v(){for(let j=0;j<a;j++)if(o.indexOf(j)===-1)return o.push(j),j;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(j){let Z=r[j.id],$=j.uniforms,le=j.__cache;n.bindBuffer(n.UNIFORM_BUFFER,Z);for(let K=0,oe=$.length;K<oe;K++){let ue=Array.isArray($[K])?$[K]:[$[K]];for(let te=0,V=ue.length;te<V;te++){let se=ue[te];if(C(se,K,te,le)===!0){let we=se.__offset,de=Array.isArray(se.value)?se.value:[se.value],je=0;for(let Ue=0;Ue<de.length;Ue++){let he=de[Ue],Pe=O(he);typeof he=="number"||typeof he=="boolean"?(se.__data[0]=he,n.bufferSubData(n.UNIFORM_BUFFER,we+je,se.__data)):he.isMatrix3?(se.__data[0]=he.elements[0],se.__data[1]=he.elements[1],se.__data[2]=he.elements[2],se.__data[3]=0,se.__data[4]=he.elements[3],se.__data[5]=he.elements[4],se.__data[6]=he.elements[5],se.__data[7]=0,se.__data[8]=he.elements[6],se.__data[9]=he.elements[7],se.__data[10]=he.elements[8],se.__data[11]=0):(he.toArray(se.__data,je),je+=Pe.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,we,se.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function C(j,Z,$,le){let K=j.value,oe=Z+"_"+$;if(le[oe]===void 0)return typeof K=="number"||typeof K=="boolean"?le[oe]=K:le[oe]=K.clone(),!0;{let ue=le[oe];if(typeof K=="number"||typeof K=="boolean"){if(ue!==K)return le[oe]=K,!0}else if(ue.equals(K)===!1)return ue.copy(K),!0}return!1}function A(j){let Z=j.uniforms,$=0,le=16;for(let oe=0,ue=Z.length;oe<ue;oe++){let te=Array.isArray(Z[oe])?Z[oe]:[Z[oe]];for(let V=0,se=te.length;V<se;V++){let we=te[V],de=Array.isArray(we.value)?we.value:[we.value];for(let je=0,Ue=de.length;je<Ue;je++){let he=de[je],Pe=O(he),me=$%le,$e=me%Pe.boundary,nt=me+$e;$+=$e,nt!==0&&le-nt<Pe.storage&&($+=le-nt),we.__data=new Float32Array(Pe.storage/Float32Array.BYTES_PER_ELEMENT),we.__offset=$,$+=Pe.storage}}}let K=$%le;return K>0&&($+=le-K),j.__size=$,j.__cache={},this}function O(j){let Z={boundary:0,storage:0};return typeof j=="number"||typeof j=="boolean"?(Z.boundary=4,Z.storage=4):j.isVector2?(Z.boundary=8,Z.storage=8):j.isVector3||j.isColor?(Z.boundary=16,Z.storage=12):j.isVector4?(Z.boundary=16,Z.storage=16):j.isMatrix3?(Z.boundary=48,Z.storage=48):j.isMatrix4?(Z.boundary=64,Z.storage=64):j.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",j),Z}function N(j){let Z=j.target;Z.removeEventListener("dispose",N);let $=o.indexOf(Z.__bindingPointIndex);o.splice($,1),n.deleteBuffer(r[Z.id]),delete r[Z.id],delete s[Z.id]}function T(){for(let j in r)n.deleteBuffer(r[j]);o=[],r={},s={}}return{bind:u,update:d,dispose:T}}var k1=class{constructor(t={}){let{canvas:e=p5(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:d=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:v=!1,reverseDepthBuffer:x=!1}=t;this.isWebGLRenderer=!0;let C;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");C=i.getContextAttributes().alpha}else C=o;let A=new Uint32Array(4),O=new Int32Array(4),N=null,T=null,j=[],Z=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Lh,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let $=this,le=!1;this._outputColorSpace=Us;let K=0,oe=0,ue=null,te=-1,V=null,se=new rr,we=new rr,de=null,je=new kn(0),Ue=0,he=e.width,Pe=e.height,me=1,$e=null,nt=null,xt=new rr(0,0,he,Pe),Tt=new rr(0,0,he,Pe),ut=!1,Ie=new Iy,at=!1,Pt=!1,rt=new ui,Ut=new ui,Cn=new Le,hn=new rr,Mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Xi=!1;function Fn(){return ue===null?me:1}let Me=i;function hr(re,Fe){return e.getContext(re,Fe)}try{let re={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:u,preserveDrawingBuffer:d,powerPreference:g,failIfMajorPerformanceCaveat:v};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${BM}`),e.addEventListener("webglcontextlost",nn,!1),e.addEventListener("webglcontextrestored",pt,!1),e.addEventListener("webglcontextcreationerror",ct,!1),Me===null){let Fe="webgl2";if(Me=hr(Fe,re),Me===null)throw hr(Fe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(re){throw console.error("THREE.WebGLRenderer: "+re.message),re}let Kn,hi,rn,Jn,dn,In,Gi,fe,J,Ge,it,ht,Ke,yn,Ht,kt,fn,mt,Jt,pn,vn,Ft,_n,Re;function Lt(){Kn=new Dle(Me),Kn.init(),Ft=new oue(Me,Kn),hi=new wle(Me,Kn,t,Ft),rn=new rue(Me,Kn),hi.reverseDepthBuffer&&x&&rn.buffers.depth.setReversed(!0),Jn=new Ple(Me),dn=new Gce,In=new sue(Me,Kn,rn,dn,hi,Ft,Jn),Gi=new Cle($),fe=new Ale($),J=new Bse(Me),_n=new ble(Me,J),Ge=new Ile(Me,J,Jn,_n),it=new Lle(Me,Ge,J,Jn),Jt=new kle(Me,hi,In),kt=new Sle(dn),ht=new Wce($,Gi,fe,Kn,hi,_n,kt),Ke=new uue($,dn),yn=new qce,Ht=new Jce(Kn),mt=new _le($,Gi,fe,rn,it,C,u),fn=new nue($,it,hi),Re=new hue(Me,Jn,hi,rn),pn=new xle(Me,Kn,Jn),vn=new Rle(Me,Kn,Jn),Jn.programs=ht.programs,$.capabilities=hi,$.extensions=Kn,$.properties=dn,$.renderLists=yn,$.shadowMap=fn,$.state=rn,$.info=Jn}Lt();let wt=new Lk($,Me);this.xr=wt,this.getContext=function(){return Me},this.getContextAttributes=function(){return Me.getContextAttributes()},this.forceContextLoss=function(){let re=Kn.get("WEBGL_lose_context");re&&re.loseContext()},this.forceContextRestore=function(){let re=Kn.get("WEBGL_lose_context");re&&re.restoreContext()},this.getPixelRatio=function(){return me},this.setPixelRatio=function(re){re!==void 0&&(me=re,this.setSize(he,Pe,!1))},this.getSize=function(re){return re.set(he,Pe)},this.setSize=function(re,Fe,qe=!0){if(wt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}he=re,Pe=Fe,e.width=Math.floor(re*me),e.height=Math.floor(Fe*me),qe===!0&&(e.style.width=re+"px",e.style.height=Fe+"px"),this.setViewport(0,0,re,Fe)},this.getDrawingBufferSize=function(re){return re.set(he*me,Pe*me).floor()},this.setDrawingBufferSize=function(re,Fe,qe){he=re,Pe=Fe,me=qe,e.width=Math.floor(re*qe),e.height=Math.floor(Fe*qe),this.setViewport(0,0,re,Fe)},this.getCurrentViewport=function(re){return re.copy(se)},this.getViewport=function(re){return re.copy(xt)},this.setViewport=function(re,Fe,qe,Xe){re.isVector4?xt.set(re.x,re.y,re.z,re.w):xt.set(re,Fe,qe,Xe),rn.viewport(se.copy(xt).multiplyScalar(me).round())},this.getScissor=function(re){return re.copy(Tt)},this.setScissor=function(re,Fe,qe,Xe){re.isVector4?Tt.set(re.x,re.y,re.z,re.w):Tt.set(re,Fe,qe,Xe),rn.scissor(we.copy(Tt).multiplyScalar(me).round())},this.getScissorTest=function(){return ut},this.setScissorTest=function(re){rn.setScissorTest(ut=re)},this.setOpaqueSort=function(re){$e=re},this.setTransparentSort=function(re){nt=re},this.getClearColor=function(re){return re.copy(mt.getClearColor())},this.setClearColor=function(){mt.setClearColor(...arguments)},this.getClearAlpha=function(){return mt.getClearAlpha()},this.setClearAlpha=function(){mt.setClearAlpha(...arguments)},this.clear=function(re=!0,Fe=!0,qe=!0){let Xe=0;if(re){let Be=!1;if(ue!==null){let At=ue.texture.format;Be=At===n1||At===t1||At===e1}if(Be){let At=ue.texture.type,zt=At===Fc||At===Jd||At===Oy||At===By||At===KM||At===QM,$t=mt.getClearColor(),qt=mt.getClearAlpha(),Wt=$t.r,Tn=$t.g,Rt=$t.b;zt?(A[0]=Wt,A[1]=Tn,A[2]=Rt,A[3]=qt,Me.clearBufferuiv(Me.COLOR,0,A)):(O[0]=Wt,O[1]=Tn,O[2]=Rt,O[3]=qt,Me.clearBufferiv(Me.COLOR,0,O))}else Xe|=Me.COLOR_BUFFER_BIT}Fe&&(Xe|=Me.DEPTH_BUFFER_BIT),qe&&(Xe|=Me.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Me.clear(Xe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",nn,!1),e.removeEventListener("webglcontextrestored",pt,!1),e.removeEventListener("webglcontextcreationerror",ct,!1),mt.dispose(),yn.dispose(),Ht.dispose(),dn.dispose(),Gi.dispose(),fe.dispose(),it.dispose(),_n.dispose(),Re.dispose(),ht.dispose(),wt.dispose(),wt.removeEventListener("sessionstart",Gh),wt.removeEventListener("sessionend",jr),on.stop()};function nn(re){re.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),le=!0}function pt(){console.log("THREE.WebGLRenderer: Context Restored."),le=!1;let re=Jn.autoReset,Fe=fn.enabled,qe=fn.autoUpdate,Xe=fn.needsUpdate,Be=fn.type;Lt(),Jn.autoReset=re,fn.enabled=Fe,fn.autoUpdate=qe,fn.needsUpdate=Xe,fn.type=Be}function ct(re){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",re.statusMessage)}function sn(re){let Fe=re.target;Fe.removeEventListener("dispose",sn),Bn(Fe)}function Bn(re){An(re),dn.remove(re)}function An(re){let Fe=dn.get(re).programs;Fe!==void 0&&(Fe.forEach(function(qe){ht.releaseProgram(qe)}),re.isShaderMaterial&&ht.releaseShaderCache(re))}this.renderBufferDirect=function(re,Fe,qe,Xe,Be,At){Fe===null&&(Fe=Mt);let zt=Be.isMesh&&Be.matrixWorld.determinant()<0,$t=$h(re,Fe,qe,Xe,Be);rn.setMaterial(Xe,zt);let qt=qe.index,Wt=1;if(Xe.wireframe===!0){if(qt=Ge.getWireframeAttribute(qe),qt===void 0)return;Wt=2}let Tn=qe.drawRange,Rt=qe.attributes.position,gn=Tn.start*Wt,ri=(Tn.start+Tn.count)*Wt;At!==null&&(gn=Math.max(gn,At.start*Wt),ri=Math.min(ri,(At.start+At.count)*Wt)),qt!==null?(gn=Math.max(gn,0),ri=Math.min(ri,qt.count)):Rt!=null&&(gn=Math.max(gn,0),ri=Math.min(ri,Rt.count));let Yi=ri-gn;if(Yi<0||Yi===1/0)return;_n.setup(Be,Xe,$t,qe,qt);let Ai,yi=pn;if(qt!==null&&(Ai=J.get(qt),yi=vn,yi.setIndex(Ai)),Be.isMesh)Xe.wireframe===!0?(rn.setLineWidth(Xe.wireframeLinewidth*Fn()),yi.setMode(Me.LINES)):yi.setMode(Me.TRIANGLES);else if(Be.isLine){let Dt=Xe.linewidth;Dt===void 0&&(Dt=1),rn.setLineWidth(Dt*Fn()),Be.isLineSegments?yi.setMode(Me.LINES):Be.isLineLoop?yi.setMode(Me.LINE_LOOP):yi.setMode(Me.LINE_STRIP)}else Be.isPoints?yi.setMode(Me.POINTS):Be.isSprite&&yi.setMode(Me.TRIANGLES);if(Be.isBatchedMesh)if(Be._multiDrawInstances!==null)Fp("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),yi.renderMultiDrawInstances(Be._multiDrawStarts,Be._multiDrawCounts,Be._multiDrawCount,Be._multiDrawInstances);else if(Kn.get("WEBGL_multi_draw"))yi.renderMultiDraw(Be._multiDrawStarts,Be._multiDrawCounts,Be._multiDrawCount);else{let Dt=Be._multiDrawStarts,oi=Be._multiDrawCounts,ai=Be._multiDrawCount,hs=qt?J.get(qt).bytesPerElement:1,Sr=dn.get(Xe).currentProgram.getUniforms();for(let ds=0;ds<ai;ds++)Sr.setValue(Me,"_gl_DrawID",ds),yi.render(Dt[ds]/hs,oi[ds])}else if(Be.isInstancedMesh)yi.renderInstances(gn,Yi,Be.count);else if(qe.isInstancedBufferGeometry){let Dt=qe._maxInstanceCount!==void 0?qe._maxInstanceCount:1/0,oi=Math.min(qe.instanceCount,Dt);yi.renderInstances(gn,Yi,oi)}else yi.render(gn,Yi)};function Li(re,Fe,qe){re.transparent===!0&&re.side===Ul&&re.forceSinglePass===!1?(re.side=sa,re.needsUpdate=!0,Zl(re,Fe,qe),re.side=Pc,re.needsUpdate=!0,Zl(re,Fe,qe),re.side=Ul):Zl(re,Fe,qe)}this.compile=function(re,Fe,qe=null){qe===null&&(qe=re),T=Ht.get(qe),T.init(Fe),Z.push(T),qe.traverseVisible(function(Be){Be.isLight&&Be.layers.test(Fe.layers)&&(T.pushLight(Be),Be.castShadow&&T.pushShadow(Be))}),re!==qe&&re.traverseVisible(function(Be){Be.isLight&&Be.layers.test(Fe.layers)&&(T.pushLight(Be),Be.castShadow&&T.pushShadow(Be))}),T.setupLights();let Xe=new Set;return re.traverse(function(Be){if(!(Be.isMesh||Be.isPoints||Be.isLine||Be.isSprite))return;let At=Be.material;if(At)if(Array.isArray(At))for(let zt=0;zt<At.length;zt++){let $t=At[zt];Li($t,qe,Be),Xe.add($t)}else Li(At,qe,Be),Xe.add(At)}),T=Z.pop(),Xe},this.compileAsync=function(re,Fe,qe=null){let Xe=this.compile(re,Fe,qe);return new Promise(Be=>{function At(){if(Xe.forEach(function(zt){dn.get(zt).currentProgram.isReady()&&Xe.delete(zt)}),Xe.size===0){Be(re);return}setTimeout(At,10)}Kn.get("KHR_parallel_shader_compile")!==null?At():setTimeout(At,10)})};let ns=null;function is(re){ns&&ns(re)}function Gh(){on.stop()}function jr(){on.start()}let on=new G5;on.setAnimationLoop(is),typeof self<"u"&&on.setContext(self),this.setAnimationLoop=function(re){ns=re,wt.setAnimationLoop(re),re===null?on.stop():on.start()},wt.addEventListener("sessionstart",Gh),wt.addEventListener("sessionend",jr),this.render=function(re,Fe){if(Fe!==void 0&&Fe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(le===!0)return;if(re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),Fe.parent===null&&Fe.matrixWorldAutoUpdate===!0&&Fe.updateMatrixWorld(),wt.enabled===!0&&wt.isPresenting===!0&&(wt.cameraAutoUpdate===!0&&wt.updateCamera(Fe),Fe=wt.getCamera()),re.isScene===!0&&re.onBeforeRender($,re,Fe,ue),T=Ht.get(re,Z.length),T.init(Fe),Z.push(T),Ut.multiplyMatrices(Fe.projectionMatrix,Fe.matrixWorldInverse),Ie.setFromProjectionMatrix(Ut),Pt=this.localClippingEnabled,at=kt.init(this.clippingPlanes,Pt),N=yn.get(re,j.length),N.init(),j.push(N),wt.enabled===!0&&wt.isPresenting===!0){let At=$.xr.getDepthSensingMesh();At!==null&&Wc(At,Fe,-1/0,$.sortObjects)}Wc(re,Fe,0,$.sortObjects),N.finish(),$.sortObjects===!0&&N.sort($e,nt),Xi=wt.enabled===!1||wt.isPresenting===!1||wt.hasDepthSensing()===!1,Xi&&mt.addToRenderList(N,re),this.info.render.frame++,at===!0&&kt.beginShadows();let qe=T.state.shadowsArray;fn.render(qe,re,Fe),at===!0&&kt.endShadows(),this.info.autoReset===!0&&this.info.reset();let Xe=N.opaque,Be=N.transmissive;if(T.setupLights(),Fe.isArrayCamera){let At=Fe.cameras;if(Be.length>0)for(let zt=0,$t=At.length;zt<$t;zt++){let qt=At[zt];Uu(Xe,Be,re,qt)}Xi&&mt.render(re);for(let zt=0,$t=At.length;zt<$t;zt++){let qt=At[zt];Gc(N,re,qt,qt.viewport)}}else Be.length>0&&Uu(Xe,Be,re,Fe),Xi&&mt.render(re),Gc(N,re,Fe);ue!==null&&oe===0&&(In.updateMultisampleRenderTarget(ue),In.updateRenderTargetMipmap(ue)),re.isScene===!0&&re.onAfterRender($,re,Fe),_n.resetDefaultState(),te=-1,V=null,Z.pop(),Z.length>0?(T=Z[Z.length-1],at===!0&&kt.setGlobalState($.clippingPlanes,T.state.camera)):T=null,j.pop(),j.length>0?N=j[j.length-1]:N=null};function Wc(re,Fe,qe,Xe){if(re.visible===!1)return;if(re.layers.test(Fe.layers)){if(re.isGroup)qe=re.renderOrder;else if(re.isLOD)re.autoUpdate===!0&&re.update(Fe);else if(re.isLight)T.pushLight(re),re.castShadow&&T.pushShadow(re);else if(re.isSprite){if(!re.frustumCulled||Ie.intersectsSprite(re)){Xe&&hn.setFromMatrixPosition(re.matrixWorld).applyMatrix4(Ut);let zt=it.update(re),$t=re.material;$t.visible&&N.push(re,zt,$t,qe,hn.z,null)}}else if((re.isMesh||re.isLine||re.isPoints)&&(!re.frustumCulled||Ie.intersectsObject(re))){let zt=it.update(re),$t=re.material;if(Xe&&(re.boundingSphere!==void 0?(re.boundingSphere===null&&re.computeBoundingSphere(),hn.copy(re.boundingSphere.center)):(zt.boundingSphere===null&&zt.computeBoundingSphere(),hn.copy(zt.boundingSphere.center)),hn.applyMatrix4(re.matrixWorld).applyMatrix4(Ut)),Array.isArray($t)){let qt=zt.groups;for(let Wt=0,Tn=qt.length;Wt<Tn;Wt++){let Rt=qt[Wt],gn=$t[Rt.materialIndex];gn&&gn.visible&&N.push(re,zt,gn,qe,hn.z,Rt)}}else $t.visible&&N.push(re,zt,$t,qe,hn.z,null)}}let At=re.children;for(let zt=0,$t=At.length;zt<$t;zt++)Wc(At[zt],Fe,qe,Xe)}function Gc(re,Fe,qe,Xe){let Be=re.opaque,At=re.transmissive,zt=re.transparent;T.setupLightsView(qe),at===!0&&kt.setGlobalState($.clippingPlanes,qe),Xe&&rn.viewport(se.copy(Xe)),Be.length>0&&ka(Be,Fe,qe),At.length>0&&ka(At,Fe,qe),zt.length>0&&ka(zt,Fe,qe),rn.buffers.depth.setTest(!0),rn.buffers.depth.setMask(!0),rn.buffers.color.setMask(!0),rn.setPolygonOffset(!1)}function Uu(re,Fe,qe,Xe){if((qe.isScene===!0?qe.overrideMaterial:null)!==null)return;T.state.transmissionRenderTarget[Xe.id]===void 0&&(T.state.transmissionRenderTarget[Xe.id]=new Ru(1,1,{generateMipmaps:!0,type:Kn.has("EXT_color_buffer_half_float")||Kn.has("EXT_color_buffer_float")?Fy:Fc,minFilter:Oc,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Wi.workingColorSpace}));let At=T.state.transmissionRenderTarget[Xe.id],zt=Xe.viewport||se;At.setSize(zt.z*$.transmissionResolutionScale,zt.w*$.transmissionResolutionScale);let $t=$.getRenderTarget();$.setRenderTarget(At),$.getClearColor(je),Ue=$.getClearAlpha(),Ue<1&&$.setClearColor(16777215,.5),$.clear(),Xi&&mt.render(qe);let qt=$.toneMapping;$.toneMapping=Lh;let Wt=Xe.viewport;if(Xe.viewport!==void 0&&(Xe.viewport=void 0),T.setupLightsView(Xe),at===!0&&kt.setGlobalState($.clippingPlanes,Xe),ka(re,qe,Xe),In.updateMultisampleRenderTarget(At),In.updateRenderTargetMipmap(At),Kn.has("WEBGL_multisampled_render_to_texture")===!1){let Tn=!1;for(let Rt=0,gn=Fe.length;Rt<gn;Rt++){let ri=Fe[Rt],Yi=ri.object,Ai=ri.geometry,yi=ri.material,Dt=ri.group;if(yi.side===Ul&&Yi.layers.test(Xe.layers)){let oi=yi.side;yi.side=sa,yi.needsUpdate=!0,Yl(Yi,qe,Xe,Ai,yi,Dt),yi.side=oi,yi.needsUpdate=!0,Tn=!0}}Tn===!0&&(In.updateMultisampleRenderTarget(At),In.updateRenderTargetMipmap(At))}$.setRenderTarget($t),$.setClearColor(je,Ue),Wt!==void 0&&(Xe.viewport=Wt),$.toneMapping=qt}function ka(re,Fe,qe){let Xe=Fe.isScene===!0?Fe.overrideMaterial:null;for(let Be=0,At=re.length;Be<At;Be++){let zt=re[Be],$t=zt.object,qt=zt.geometry,Wt=zt.group,Tn=zt.material;Tn.allowOverride===!0&&Xe!==null&&(Tn=Xe),$t.layers.test(qe.layers)&&Yl($t,Fe,qe,qt,Tn,Wt)}}function Yl(re,Fe,qe,Xe,Be,At){re.onBeforeRender($,Fe,qe,Xe,Be,At),re.modelViewMatrix.multiplyMatrices(qe.matrixWorldInverse,re.matrixWorld),re.normalMatrix.getNormalMatrix(re.modelViewMatrix),Be.onBeforeRender($,Fe,qe,Xe,re,At),Be.transparent===!0&&Be.side===Ul&&Be.forceSinglePass===!1?(Be.side=sa,Be.needsUpdate=!0,$.renderBufferDirect(qe,Fe,Xe,Be,re,At),Be.side=Pc,Be.needsUpdate=!0,$.renderBufferDirect(qe,Fe,Xe,Be,re,At),Be.side=Ul):$.renderBufferDirect(qe,Fe,Xe,Be,re,At),re.onAfterRender($,Fe,qe,Xe,Be,At)}function Zl(re,Fe,qe){Fe.isScene!==!0&&(Fe=Mt);let Xe=dn.get(re),Be=T.state.lights,At=T.state.shadowsArray,zt=Be.state.version,$t=ht.getParameters(re,Be.state,At,Fe,qe),qt=ht.getProgramCacheKey($t),Wt=Xe.programs;Xe.environment=re.isMeshStandardMaterial?Fe.environment:null,Xe.fog=Fe.fog,Xe.envMap=(re.isMeshStandardMaterial?fe:Gi).get(re.envMap||Xe.environment),Xe.envMapRotation=Xe.environment!==null&&re.envMap===null?Fe.environmentRotation:re.envMapRotation,Wt===void 0&&(re.addEventListener("dispose",sn),Wt=new Map,Xe.programs=Wt);let Tn=Wt.get(qt);if(Tn!==void 0){if(Xe.currentProgram===Tn&&Xe.lightsStateVersion===zt)return hl(re,$t),Tn}else $t.uniforms=ht.getUniforms(re),re.onBeforeCompile($t,$),Tn=ht.acquireProgram($t,qt),Wt.set(qt,Tn),Xe.uniforms=$t.uniforms;let Rt=Xe.uniforms;return(!re.isShaderMaterial&&!re.isRawShaderMaterial||re.clipping===!0)&&(Rt.clippingPlanes=kt.uniform),hl(re,$t),Xe.needsLights=Hu(re),Xe.lightsStateVersion=zt,Xe.needsLights&&(Rt.ambientLightColor.value=Be.state.ambient,Rt.lightProbe.value=Be.state.probe,Rt.directionalLights.value=Be.state.directional,Rt.directionalLightShadows.value=Be.state.directionalShadow,Rt.spotLights.value=Be.state.spot,Rt.spotLightShadows.value=Be.state.spotShadow,Rt.rectAreaLights.value=Be.state.rectArea,Rt.ltc_1.value=Be.state.rectAreaLTC1,Rt.ltc_2.value=Be.state.rectAreaLTC2,Rt.pointLights.value=Be.state.point,Rt.pointLightShadows.value=Be.state.pointShadow,Rt.hemisphereLights.value=Be.state.hemi,Rt.directionalShadowMap.value=Be.state.directionalShadowMap,Rt.directionalShadowMatrix.value=Be.state.directionalShadowMatrix,Rt.spotShadowMap.value=Be.state.spotShadowMap,Rt.spotLightMatrix.value=Be.state.spotLightMatrix,Rt.spotLightMap.value=Be.state.spotLightMap,Rt.pointShadowMap.value=Be.state.pointShadowMap,Rt.pointShadowMatrix.value=Be.state.pointShadowMatrix),Xe.currentProgram=Tn,Xe.uniformsList=null,Tn}function Do(re){if(re.uniformsList===null){let Fe=re.currentProgram.getUniforms();re.uniformsList=jy.seqWithValue(Fe.seq,re.uniforms)}return re.uniformsList}function hl(re,Fe){let qe=dn.get(re);qe.outputColorSpace=Fe.outputColorSpace,qe.batching=Fe.batching,qe.batchingColor=Fe.batchingColor,qe.instancing=Fe.instancing,qe.instancingColor=Fe.instancingColor,qe.instancingMorph=Fe.instancingMorph,qe.skinning=Fe.skinning,qe.morphTargets=Fe.morphTargets,qe.morphNormals=Fe.morphNormals,qe.morphColors=Fe.morphColors,qe.morphTargetsCount=Fe.morphTargetsCount,qe.numClippingPlanes=Fe.numClippingPlanes,qe.numIntersection=Fe.numClipIntersection,qe.vertexAlphas=Fe.vertexAlphas,qe.vertexTangents=Fe.vertexTangents,qe.toneMapping=Fe.toneMapping}function $h(re,Fe,qe,Xe,Be){Fe.isScene!==!0&&(Fe=Mt),In.resetTextureUnits();let At=Fe.fog,zt=Xe.isMeshStandardMaterial?Fe.environment:null,$t=ue===null?$.outputColorSpace:ue.isXRRenderTarget===!0?ue.texture.colorSpace:ho,qt=(Xe.isMeshStandardMaterial?fe:Gi).get(Xe.envMap||zt),Wt=Xe.vertexColors===!0&&!!qe.attributes.color&&qe.attributes.color.itemSize===4,Tn=!!qe.attributes.tangent&&(!!Xe.normalMap||Xe.anisotropy>0),Rt=!!qe.morphAttributes.position,gn=!!qe.morphAttributes.normal,ri=!!qe.morphAttributes.color,Yi=Lh;Xe.toneMapped&&(ue===null||ue.isXRRenderTarget===!0)&&(Yi=$.toneMapping);let Ai=qe.morphAttributes.position||qe.morphAttributes.normal||qe.morphAttributes.color,yi=Ai!==void 0?Ai.length:0,Dt=dn.get(Xe),oi=T.state.lights;if(at===!0&&(Pt===!0||re!==V)){let lr=re===V&&Xe.id===te;kt.setState(Xe,re,lr)}let ai=!1;Xe.version===Dt.__version?(Dt.needsLights&&Dt.lightsStateVersion!==oi.state.version||Dt.outputColorSpace!==$t||Be.isBatchedMesh&&Dt.batching===!1||!Be.isBatchedMesh&&Dt.batching===!0||Be.isBatchedMesh&&Dt.batchingColor===!0&&Be.colorTexture===null||Be.isBatchedMesh&&Dt.batchingColor===!1&&Be.colorTexture!==null||Be.isInstancedMesh&&Dt.instancing===!1||!Be.isInstancedMesh&&Dt.instancing===!0||Be.isSkinnedMesh&&Dt.skinning===!1||!Be.isSkinnedMesh&&Dt.skinning===!0||Be.isInstancedMesh&&Dt.instancingColor===!0&&Be.instanceColor===null||Be.isInstancedMesh&&Dt.instancingColor===!1&&Be.instanceColor!==null||Be.isInstancedMesh&&Dt.instancingMorph===!0&&Be.morphTexture===null||Be.isInstancedMesh&&Dt.instancingMorph===!1&&Be.morphTexture!==null||Dt.envMap!==qt||Xe.fog===!0&&Dt.fog!==At||Dt.numClippingPlanes!==void 0&&(Dt.numClippingPlanes!==kt.numPlanes||Dt.numIntersection!==kt.numIntersection)||Dt.vertexAlphas!==Wt||Dt.vertexTangents!==Tn||Dt.morphTargets!==Rt||Dt.morphNormals!==gn||Dt.morphColors!==ri||Dt.toneMapping!==Yi||Dt.morphTargetsCount!==yi)&&(ai=!0):(ai=!0,Dt.__version=Xe.version);let hs=Dt.currentProgram;ai===!0&&(hs=Zl(Xe,Fe,Be));let Sr=!1,ds=!1,Io=!1,Mi=hs.getUniforms(),Di=Dt.uniforms;if(rn.useProgram(hs.program)&&(Sr=!0,ds=!0,Io=!0),Xe.id!==te&&(te=Xe.id,ds=!0),Sr||V!==re){rn.buffers.depth.getReversed()?(rt.copy(re.projectionMatrix),g5(rt),y5(rt),Mi.setValue(Me,"projectionMatrix",rt)):Mi.setValue(Me,"projectionMatrix",re.projectionMatrix),Mi.setValue(Me,"viewMatrix",re.matrixWorldInverse);let er=Mi.map.cameraPosition;er!==void 0&&er.setValue(Me,Cn.setFromMatrixPosition(re.matrixWorld)),hi.logarithmicDepthBuffer&&Mi.setValue(Me,"logDepthBufFC",2/(Math.log(re.far+1)/Math.LN2)),(Xe.isMeshPhongMaterial||Xe.isMeshToonMaterial||Xe.isMeshLambertMaterial||Xe.isMeshBasicMaterial||Xe.isMeshStandardMaterial||Xe.isShaderMaterial)&&Mi.setValue(Me,"isOrthographic",re.isOrthographicCamera===!0),V!==re&&(V=re,ds=!0,Io=!0)}if(Be.isSkinnedMesh){Mi.setOptional(Me,Be,"bindMatrix"),Mi.setOptional(Me,Be,"bindMatrixInverse");let lr=Be.skeleton;lr&&(lr.boneTexture===null&&lr.computeBoneTexture(),Mi.setValue(Me,"boneTexture",lr.boneTexture,In))}Be.isBatchedMesh&&(Mi.setOptional(Me,Be,"batchingTexture"),Mi.setValue(Me,"batchingTexture",Be._matricesTexture,In),Mi.setOptional(Me,Be,"batchingIdTexture"),Mi.setValue(Me,"batchingIdTexture",Be._indirectTexture,In),Mi.setOptional(Me,Be,"batchingColorTexture"),Be._colorsTexture!==null&&Mi.setValue(Me,"batchingColorTexture",Be._colorsTexture,In));let Ni=qe.morphAttributes;if((Ni.position!==void 0||Ni.normal!==void 0||Ni.color!==void 0)&&Jt.update(Be,qe,hs),(ds||Dt.receiveShadow!==Be.receiveShadow)&&(Dt.receiveShadow=Be.receiveShadow,Mi.setValue(Me,"receiveShadow",Be.receiveShadow)),Xe.isMeshGouraudMaterial&&Xe.envMap!==null&&(Di.envMap.value=qt,Di.flipEnvMap.value=qt.isCubeTexture&&qt.isRenderTargetTexture===!1?-1:1),Xe.isMeshStandardMaterial&&Xe.envMap===null&&Fe.environment!==null&&(Di.envMapIntensity.value=Fe.environmentIntensity),ds&&(Mi.setValue(Me,"toneMappingExposure",$.toneMappingExposure),Dt.needsLights&&Wr(Di,Io),At&&Xe.fog===!0&&Ke.refreshFogUniforms(Di,At),Ke.refreshMaterialUniforms(Di,Xe,me,Pe,T.state.transmissionRenderTarget[re.id]),jy.upload(Me,Do(Dt),Di,In)),Xe.isShaderMaterial&&Xe.uniformsNeedUpdate===!0&&(jy.upload(Me,Do(Dt),Di,In),Xe.uniformsNeedUpdate=!1),Xe.isSpriteMaterial&&Mi.setValue(Me,"center",Be.center),Mi.setValue(Me,"modelViewMatrix",Be.modelViewMatrix),Mi.setValue(Me,"normalMatrix",Be.normalMatrix),Mi.setValue(Me,"modelMatrix",Be.matrixWorld),Xe.isShaderMaterial||Xe.isRawShaderMaterial){let lr=Xe.uniformsGroups;for(let er=0,Kl=lr.length;er<Kl;er++){let qs=lr[er];Re.update(qs,hs),Re.bind(qs,hs)}}return hs}function Wr(re,Fe){re.ambientLightColor.needsUpdate=Fe,re.lightProbe.needsUpdate=Fe,re.directionalLights.needsUpdate=Fe,re.directionalLightShadows.needsUpdate=Fe,re.pointLights.needsUpdate=Fe,re.pointLightShadows.needsUpdate=Fe,re.spotLights.needsUpdate=Fe,re.spotLightShadows.needsUpdate=Fe,re.rectAreaLights.needsUpdate=Fe,re.hemisphereLights.needsUpdate=Fe}function Hu(re){return re.isMeshLambertMaterial||re.isMeshToonMaterial||re.isMeshPhongMaterial||re.isMeshStandardMaterial||re.isShadowMaterial||re.isShaderMaterial&&re.lights===!0}this.getActiveCubeFace=function(){return K},this.getActiveMipmapLevel=function(){return oe},this.getRenderTarget=function(){return ue},this.setRenderTargetTextures=function(re,Fe,qe){let Xe=dn.get(re);Xe.__autoAllocateDepthBuffer=re.resolveDepthBuffer===!1,Xe.__autoAllocateDepthBuffer===!1&&(Xe.__useRenderToTexture=!1),dn.get(re.texture).__webglTexture=Fe,dn.get(re.depthTexture).__webglTexture=Xe.__autoAllocateDepthBuffer?void 0:qe,Xe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(re,Fe){let qe=dn.get(re);qe.__webglFramebuffer=Fe,qe.__useDefaultFramebuffer=Fe===void 0};let gf=Me.createFramebuffer();this.setRenderTarget=function(re,Fe=0,qe=0){ue=re,K=Fe,oe=qe;let Xe=!0,Be=null,At=!1,zt=!1;if(re){let qt=dn.get(re);if(qt.__useDefaultFramebuffer!==void 0)rn.bindFramebuffer(Me.FRAMEBUFFER,null),Xe=!1;else if(qt.__webglFramebuffer===void 0)In.setupRenderTarget(re);else if(qt.__hasExternalTextures)In.rebindTextures(re,dn.get(re.texture).__webglTexture,dn.get(re.depthTexture).__webglTexture);else if(re.depthBuffer){let Rt=re.depthTexture;if(qt.__boundDepthTexture!==Rt){if(Rt!==null&&dn.has(Rt)&&(re.width!==Rt.image.width||re.height!==Rt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");In.setupDepthRenderbuffer(re)}}let Wt=re.texture;(Wt.isData3DTexture||Wt.isDataArrayTexture||Wt.isCompressedArrayTexture)&&(zt=!0);let Tn=dn.get(re).__webglFramebuffer;re.isWebGLCubeRenderTarget?(Array.isArray(Tn[Fe])?Be=Tn[Fe][qe]:Be=Tn[Fe],At=!0):re.samples>0&&In.useMultisampledRTT(re)===!1?Be=dn.get(re).__webglMultisampledFramebuffer:Array.isArray(Tn)?Be=Tn[qe]:Be=Tn,se.copy(re.viewport),we.copy(re.scissor),de=re.scissorTest}else se.copy(xt).multiplyScalar(me).floor(),we.copy(Tt).multiplyScalar(me).floor(),de=ut;if(qe!==0&&(Be=gf),rn.bindFramebuffer(Me.FRAMEBUFFER,Be)&&Xe&&rn.drawBuffers(re,Be),rn.viewport(se),rn.scissor(we),rn.setScissorTest(de),At){let qt=dn.get(re.texture);Me.framebufferTexture2D(Me.FRAMEBUFFER,Me.COLOR_ATTACHMENT0,Me.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,qt.__webglTexture,qe)}else if(zt){let qt=dn.get(re.texture),Wt=Fe;Me.framebufferTextureLayer(Me.FRAMEBUFFER,Me.COLOR_ATTACHMENT0,qt.__webglTexture,qe,Wt)}else if(re!==null&&qe!==0){let qt=dn.get(re.texture);Me.framebufferTexture2D(Me.FRAMEBUFFER,Me.COLOR_ATTACHMENT0,Me.TEXTURE_2D,qt.__webglTexture,qe)}te=-1},this.readRenderTargetPixels=function(re,Fe,qe,Xe,Be,At,zt,$t=0){if(!(re&&re.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let qt=dn.get(re).__webglFramebuffer;if(re.isWebGLCubeRenderTarget&&zt!==void 0&&(qt=qt[zt]),qt){rn.bindFramebuffer(Me.FRAMEBUFFER,qt);try{let Wt=re.textures[$t],Tn=Wt.format,Rt=Wt.type;if(!hi.textureFormatReadable(Tn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!hi.textureTypeReadable(Rt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Fe>=0&&Fe<=re.width-Xe&&qe>=0&&qe<=re.height-Be&&(re.textures.length>1&&Me.readBuffer(Me.COLOR_ATTACHMENT0+$t),Me.readPixels(Fe,qe,Xe,Be,Ft.convert(Tn),Ft.convert(Rt),At))}finally{let Wt=ue!==null?dn.get(ue).__webglFramebuffer:null;rn.bindFramebuffer(Me.FRAMEBUFFER,Wt)}}},this.readRenderTargetPixelsAsync=function(re,Fe,qe,Xe,Be,At,zt,$t=0){return Wm(this,null,function*(){if(!(re&&re.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let qt=dn.get(re).__webglFramebuffer;if(re.isWebGLCubeRenderTarget&&zt!==void 0&&(qt=qt[zt]),qt)if(Fe>=0&&Fe<=re.width-Xe&&qe>=0&&qe<=re.height-Be){rn.bindFramebuffer(Me.FRAMEBUFFER,qt);let Wt=re.textures[$t],Tn=Wt.format,Rt=Wt.type;if(!hi.textureFormatReadable(Tn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!hi.textureTypeReadable(Rt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let gn=Me.createBuffer();Me.bindBuffer(Me.PIXEL_PACK_BUFFER,gn),Me.bufferData(Me.PIXEL_PACK_BUFFER,At.byteLength,Me.STREAM_READ),re.textures.length>1&&Me.readBuffer(Me.COLOR_ATTACHMENT0+$t),Me.readPixels(Fe,qe,Xe,Be,Ft.convert(Tn),Ft.convert(Rt),0);let ri=ue!==null?dn.get(ue).__webglFramebuffer:null;rn.bindFramebuffer(Me.FRAMEBUFFER,ri);let Yi=Me.fenceSync(Me.SYNC_GPU_COMMANDS_COMPLETE,0);return Me.flush(),yield m5(Me,Yi,4),Me.bindBuffer(Me.PIXEL_PACK_BUFFER,gn),Me.getBufferSubData(Me.PIXEL_PACK_BUFFER,0,At),Me.deleteBuffer(gn),Me.deleteSync(Yi),At}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(re,Fe=null,qe=0){let Xe=Math.pow(2,-qe),Be=Math.floor(re.image.width*Xe),At=Math.floor(re.image.height*Xe),zt=Fe!==null?Fe.x:0,$t=Fe!==null?Fe.y:0;In.setTexture2D(re,0),Me.copyTexSubImage2D(Me.TEXTURE_2D,qe,0,0,zt,$t,Be,At),rn.unbindTexture()};let qh=Me.createFramebuffer(),La=Me.createFramebuffer();this.copyTextureToTexture=function(re,Fe,qe=null,Xe=null,Be=0,At=null){At===null&&(Be!==0?(Fp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),At=Be,Be=0):At=0);let zt,$t,qt,Wt,Tn,Rt,gn,ri,Yi,Ai=re.isCompressedTexture?re.mipmaps[At]:re.image;if(qe!==null)zt=qe.max.x-qe.min.x,$t=qe.max.y-qe.min.y,qt=qe.isBox3?qe.max.z-qe.min.z:1,Wt=qe.min.x,Tn=qe.min.y,Rt=qe.isBox3?qe.min.z:0;else{let Ni=Math.pow(2,-Be);zt=Math.floor(Ai.width*Ni),$t=Math.floor(Ai.height*Ni),re.isDataArrayTexture?qt=Ai.depth:re.isData3DTexture?qt=Math.floor(Ai.depth*Ni):qt=1,Wt=0,Tn=0,Rt=0}Xe!==null?(gn=Xe.x,ri=Xe.y,Yi=Xe.z):(gn=0,ri=0,Yi=0);let yi=Ft.convert(Fe.format),Dt=Ft.convert(Fe.type),oi;Fe.isData3DTexture?(In.setTexture3D(Fe,0),oi=Me.TEXTURE_3D):Fe.isDataArrayTexture||Fe.isCompressedArrayTexture?(In.setTexture2DArray(Fe,0),oi=Me.TEXTURE_2D_ARRAY):(In.setTexture2D(Fe,0),oi=Me.TEXTURE_2D),Me.pixelStorei(Me.UNPACK_FLIP_Y_WEBGL,Fe.flipY),Me.pixelStorei(Me.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Fe.premultiplyAlpha),Me.pixelStorei(Me.UNPACK_ALIGNMENT,Fe.unpackAlignment);let ai=Me.getParameter(Me.UNPACK_ROW_LENGTH),hs=Me.getParameter(Me.UNPACK_IMAGE_HEIGHT),Sr=Me.getParameter(Me.UNPACK_SKIP_PIXELS),ds=Me.getParameter(Me.UNPACK_SKIP_ROWS),Io=Me.getParameter(Me.UNPACK_SKIP_IMAGES);Me.pixelStorei(Me.UNPACK_ROW_LENGTH,Ai.width),Me.pixelStorei(Me.UNPACK_IMAGE_HEIGHT,Ai.height),Me.pixelStorei(Me.UNPACK_SKIP_PIXELS,Wt),Me.pixelStorei(Me.UNPACK_SKIP_ROWS,Tn),Me.pixelStorei(Me.UNPACK_SKIP_IMAGES,Rt);let Mi=re.isDataArrayTexture||re.isData3DTexture,Di=Fe.isDataArrayTexture||Fe.isData3DTexture;if(re.isDepthTexture){let Ni=dn.get(re),lr=dn.get(Fe),er=dn.get(Ni.__renderTarget),Kl=dn.get(lr.__renderTarget);rn.bindFramebuffer(Me.READ_FRAMEBUFFER,er.__webglFramebuffer),rn.bindFramebuffer(Me.DRAW_FRAMEBUFFER,Kl.__webglFramebuffer);for(let qs=0;qs<qt;qs++)Mi&&(Me.framebufferTextureLayer(Me.READ_FRAMEBUFFER,Me.COLOR_ATTACHMENT0,dn.get(re).__webglTexture,Be,Rt+qs),Me.framebufferTextureLayer(Me.DRAW_FRAMEBUFFER,Me.COLOR_ATTACHMENT0,dn.get(Fe).__webglTexture,At,Yi+qs)),Me.blitFramebuffer(Wt,Tn,zt,$t,gn,ri,zt,$t,Me.DEPTH_BUFFER_BIT,Me.NEAREST);rn.bindFramebuffer(Me.READ_FRAMEBUFFER,null),rn.bindFramebuffer(Me.DRAW_FRAMEBUFFER,null)}else if(Be!==0||re.isRenderTargetTexture||dn.has(re)){let Ni=dn.get(re),lr=dn.get(Fe);rn.bindFramebuffer(Me.READ_FRAMEBUFFER,qh),rn.bindFramebuffer(Me.DRAW_FRAMEBUFFER,La);for(let er=0;er<qt;er++)Mi?Me.framebufferTextureLayer(Me.READ_FRAMEBUFFER,Me.COLOR_ATTACHMENT0,Ni.__webglTexture,Be,Rt+er):Me.framebufferTexture2D(Me.READ_FRAMEBUFFER,Me.COLOR_ATTACHMENT0,Me.TEXTURE_2D,Ni.__webglTexture,Be),Di?Me.framebufferTextureLayer(Me.DRAW_FRAMEBUFFER,Me.COLOR_ATTACHMENT0,lr.__webglTexture,At,Yi+er):Me.framebufferTexture2D(Me.DRAW_FRAMEBUFFER,Me.COLOR_ATTACHMENT0,Me.TEXTURE_2D,lr.__webglTexture,At),Be!==0?Me.blitFramebuffer(Wt,Tn,zt,$t,gn,ri,zt,$t,Me.COLOR_BUFFER_BIT,Me.NEAREST):Di?Me.copyTexSubImage3D(oi,At,gn,ri,Yi+er,Wt,Tn,zt,$t):Me.copyTexSubImage2D(oi,At,gn,ri,Wt,Tn,zt,$t);rn.bindFramebuffer(Me.READ_FRAMEBUFFER,null),rn.bindFramebuffer(Me.DRAW_FRAMEBUFFER,null)}else Di?re.isDataTexture||re.isData3DTexture?Me.texSubImage3D(oi,At,gn,ri,Yi,zt,$t,qt,yi,Dt,Ai.data):Fe.isCompressedArrayTexture?Me.compressedTexSubImage3D(oi,At,gn,ri,Yi,zt,$t,qt,yi,Ai.data):Me.texSubImage3D(oi,At,gn,ri,Yi,zt,$t,qt,yi,Dt,Ai):re.isDataTexture?Me.texSubImage2D(Me.TEXTURE_2D,At,gn,ri,zt,$t,yi,Dt,Ai.data):re.isCompressedTexture?Me.compressedTexSubImage2D(Me.TEXTURE_2D,At,gn,ri,Ai.width,Ai.height,yi,Ai.data):Me.texSubImage2D(Me.TEXTURE_2D,At,gn,ri,zt,$t,yi,Dt,Ai);Me.pixelStorei(Me.UNPACK_ROW_LENGTH,ai),Me.pixelStorei(Me.UNPACK_IMAGE_HEIGHT,hs),Me.pixelStorei(Me.UNPACK_SKIP_PIXELS,Sr),Me.pixelStorei(Me.UNPACK_SKIP_ROWS,ds),Me.pixelStorei(Me.UNPACK_SKIP_IMAGES,Io),At===0&&Fe.generateMipmaps&&Me.generateMipmap(oi),rn.unbindTexture()},this.copyTextureToTexture3D=function(re,Fe,qe=null,Xe=null,Be=0){return Fp('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(re,Fe,qe,Xe,Be)},this.initRenderTarget=function(re){dn.get(re).__webglFramebuffer===void 0&&In.setupRenderTarget(re)},this.initTexture=function(re){re.isCubeTexture?In.setTextureCube(re,0):re.isData3DTexture?In.setTexture3D(re,0):re.isDataArrayTexture||re.isCompressedArrayTexture?In.setTexture2DArray(re,0):In.setTexture2D(re,0),rn.unbindTexture()},this.resetState=function(){K=0,oe=0,ue=null,rn.reset(),_n.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Du}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;let e=this.getContext();e.drawingBufferColorSpace=Wi._getDrawingBufferColorSpace(t),e.unpackColorSpace=Wi._getUnpackColorSpace()}};var Z5={type:"change"},Fk={type:"start"},Q5={type:"end"},N1=new Pu,K5=new Vl,due=Math.cos(70*fb.DEG2RAD),Ws=new Le,Ia=2*Math.PI,vr={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Ok=1e-6,O1=class extends sb{constructor(t,e=null){super(t,e),this.state=vr.NONE,this.target=new Le,this.cursor=new Le,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:zl.ROTATE,MIDDLE:zl.DOLLY,RIGHT:zl.PAN},this.touches={ONE:Nc.ROTATE,TWO:Nc.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Le,this._lastQuaternion=new ia,this._lastTargetPosition=new Le,this._quat=new ia().setFromUnitVectors(t.up,new Le(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Ly,this._sphericalDelta=new Ly,this._scale=1,this._panOffset=new Le,this._rotateStart=new qn,this._rotateEnd=new qn,this._rotateDelta=new qn,this._panStart=new qn,this._panEnd=new qn,this._panDelta=new qn,this._dollyStart=new qn,this._dollyEnd=new qn,this._dollyDelta=new qn,this._dollyDirection=new Le,this._mouse=new qn,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=pue.bind(this),this._onPointerDown=fue.bind(this),this._onPointerUp=mue.bind(this),this._onContextMenu=wue.bind(this),this._onMouseWheel=vue.bind(this),this._onKeyDown=_ue.bind(this),this._onTouchStart=bue.bind(this),this._onTouchMove=xue.bind(this),this._onMouseDown=gue.bind(this),this._onMouseMove=yue.bind(this),this._interceptControlDown=Sue.bind(this),this._interceptControlUp=Cue.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(t){super.connect(t),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(Z5),this.update(),this.state=vr.NONE}update(t=null){let e=this.object.position;Ws.copy(e).sub(this.target),Ws.applyQuaternion(this._quat),this._spherical.setFromVector3(Ws),this.autoRotate&&this.state===vr.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&&isFinite(r)&&(i<-Math.PI?i+=Ia:i>Math.PI&&(i-=Ia),r<-Math.PI?r+=Ia:r>Math.PI&&(r-=Ia),i<=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if(Ws.setFromSpherical(this._spherical),Ws.applyQuaternion(this._quatInverse),e.copy(this.target).add(Ws),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){let a=Ws.length();o=this._clampDistance(a*this._scale);let u=a-o;this.object.position.addScaledVector(this._dollyDirection,u),this.object.updateMatrixWorld(),s=!!u}else if(this.object.isOrthographicCamera){let a=new Le(this._mouse.x,this._mouse.y,0);a.unproject(this.object);let u=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=u!==this.object.zoom;let d=new Le(this._mouse.x,this._mouse.y,0);d.unproject(this.object),this.object.position.sub(d).add(a),this.object.updateMatrixWorld(),o=Ws.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(N1.origin.copy(this.object.position),N1.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(N1.direction))<due?this.object.lookAt(this.target):(K5.setFromNormalAndCoplanarPoint(this.object.up,this.target),N1.intersectPlane(K5,this.target))))}else if(this.object.isOrthographicCamera){let o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>Ok||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Ok||this._lastTargetPosition.distanceToSquared(this.target)>Ok?(this.dispatchEvent(Z5),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(t){return t!==null?Ia/60*this.autoRotateSpeed*t:Ia/60/60*this.autoRotateSpeed}_getZoomScale(t){let e=Math.abs(t*.01);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){Ws.setFromMatrixColumn(e,0),Ws.multiplyScalar(-t),this._panOffset.add(Ws)}_panUp(t,e){this.screenSpacePanning===!0?Ws.setFromMatrixColumn(e,1):(Ws.setFromMatrixColumn(e,0),Ws.crossVectors(this.object.up,Ws)),Ws.multiplyScalar(t),this._panOffset.add(Ws)}_pan(t,e){let i=this.domElement;if(this.object.isPerspectiveCamera){let r=this.object.position;Ws.copy(r).sub(this.target);let s=Ws.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*s/i.clientHeight,this.object.matrix),this._panUp(2*e*s/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),r=t-i.left,s=e-i.top,o=i.width,a=i.height;this._mouse.x=r/o*2-1,this._mouse.y=-(s/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(Ia*this._rotateDelta.x/e.clientHeight),this._rotateUp(Ia*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(Ia*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-Ia*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(Ia*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-Ia*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(this._pointers.length===1)this._rotateStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._rotateStart.set(i,r)}}_handleTouchStartPan(t){if(this._pointers.length===1)this._panStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._panStart.set(i,r)}}_handleTouchStartDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,r=t.pageY-e.y,s=Math.sqrt(i*i+r*r);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(this._pointers.length==1)this._rotateEnd.set(t.pageX,t.pageY);else{let i=this._getSecondPointerPosition(t),r=.5*(t.pageX+i.x),s=.5*(t.pageY+i.y);this._rotateEnd.set(r,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(Ia*this._rotateDelta.x/e.clientHeight),this._rotateUp(Ia*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(this._pointers.length===1)this._panEnd.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._panEnd.set(i,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,r=t.pageY-e.y,s=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let o=(t.pageX+e.x)*.5,a=(t.pageY+e.y)*.5;this._updateZoomParameters(o,a)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];e===void 0&&(e=new qn,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){let e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){let e=t.deltaMode,i={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return t.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}};function fue(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function pue(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function mue(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Q5),this.state=vr.NONE;break;case 1:let t=this._pointers[0],e=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:e.x,pageY:e.y});break}}function gue(n){let t;switch(n.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case zl.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=vr.DOLLY;break;case zl.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=vr.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=vr.ROTATE}break;case zl.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=vr.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=vr.PAN}break;default:this.state=vr.NONE}this.state!==vr.NONE&&this.dispatchEvent(Fk)}function yue(n){switch(this.state){case vr.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case vr.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case vr.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function vue(n){this.enabled===!1||this.enableZoom===!1||this.state!==vr.NONE||(n.preventDefault(),this.dispatchEvent(Fk),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(Q5))}function _ue(n){this.enabled!==!1&&this._handleKeyDown(n)}function bue(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Nc.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=vr.TOUCH_ROTATE;break;case Nc.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=vr.TOUCH_PAN;break;default:this.state=vr.NONE}break;case 2:switch(this.touches.TWO){case Nc.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=vr.TOUCH_DOLLY_PAN;break;case Nc.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=vr.TOUCH_DOLLY_ROTATE;break;default:this.state=vr.NONE}break;default:this.state=vr.NONE}this.state!==vr.NONE&&this.dispatchEvent(Fk)}function xue(n){switch(this._trackPointer(n),this.state){case vr.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case vr.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case vr.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case vr.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=vr.NONE}}function wue(n){this.enabled!==!1&&n.preventDefault()}function Sue(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Cue(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var Bk=(()=>{class n{camera;controls;init(e){let i=e.clientWidth,r=e.clientHeight;this.camera=new Es(25,i/r,.1,1e3),this.controls=new O1(this.camera,e),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.zoomSpeed=0,this.controls.enableRotate=!1,this.controls.enablePan=!0,this.controls.screenSpacePanning=!0,this.controls.panSpeed=10,this.controls.minDistance=10,this.controls.maxDistance=100,this.resetView(),this.controls.mouseButtons={LEFT:zl.PAN,MIDDLE:zl.DOLLY,RIGHT:zl.ROTATE},this.controls.touches={ONE:Nc.PAN,TWO:Nc.DOLLY_PAN},this.controls.addEventListener("change",()=>{let s=this.camera.position.x,o=this.controls.target.x;this.camera.position.set(s,15,25),this.controls.target.set(o,0,0)}),e.addEventListener("wheel",this.handleScroll)}zoomIn(){this.camera.zoom=Math.min(this.camera.zoom+.1,10),this.camera.updateProjectionMatrix()}zoomOut(){this.camera.zoom=Math.max(this.camera.zoom-.1,1),this.camera.updateProjectionMatrix()}resetView(){this.controls&&(this.controls.reset(),this.camera.position.set(-30,20,30),this.camera.lookAt(0,0,0))}zoomTo(e,i=500){if(!this.camera||!this.controls)return;let r=this.camera.position.clone(),s=e.clone().add(new Le(-30,20,30)),o=this.controls.target.clone(),a=null,u=d=>{a||(a=d);let g=Math.min((d-a)/i,1);this.camera.position.lerpVectors(r,s,g),this.controls.target.lerpVectors(o,e,g),this.controls.update(),g<1&&requestAnimationFrame(u)};requestAnimationFrame(u)}resize(e,i){let r=e.parentElement;if(!this.camera||!r)return;let s=r.clientWidth,o=r.clientHeight;this.camera.aspect=s/o,this.camera.updateProjectionMatrix(),i.setSize(s,o,!0)}updateControls(){this.controls&&(this.controls.target.y=0,this.controls.target.z=0,this.camera.position.y=15,this.camera.position.z=25,this.controls.update())}getCamera(){return this.camera}handleScroll=e=>{e.preventDefault(),Math.sign(e.deltaY)>0?this.zoomOut():this.zoomIn()};static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();var Vk=(()=>{class n{raycaster=new rb;pointer=new qn;canvas;camera;sensors=[];bridgeSections=[];hoveredCallback=null;clickedCallback=null;init(e,i,r,s){this.canvas==null&&(e.addEventListener("mousemove",this.handleMouseMove),e.addEventListener("click",this.handleClick)),this.canvas=e,this.camera=i,this.sensors=r,this.bridgeSections=s}onObjectClick(e){this.clickedCallback=e}onObjectHover(e){this.hoveredCallback=e}handleMouseMove=e=>{let{object:i,position:r}=this.getIntersectedObject(e);i?(this.canvas.style.cursor="pointer",this.hoveredCallback?.(i,r)):(this.canvas.style.cursor="move",this.hoveredCallback?.(null))};handleClick=e=>{let{object:i}=this.getIntersectedObject(e);i&&this.clickedCallback?.(i)};getIntersectedObject(e){let i=this.canvas.getBoundingClientRect();this.pointer.x=(e.clientX-i.left)/i.width*2-1,this.pointer.y=-((e.clientY-i.top)/i.height)*2+1,this.raycaster.setFromCamera(this.pointer,this.camera);let r=[...this.sensors.map(C=>C.innerMesh),...this.bridgeSections.map(C=>C.innerMesh)].filter(C=>!!C),s=this.raycaster.intersectObjects(r);if(s.length===0)return{object:null};let o=s[0].object,a=this.sensors.find(C=>C.innerMesh===o),u=this.bridgeSections.find(C=>C.innerMesh===o),d=a||u;if(!d)return{object:null};if(!d.innerMesh)return{object:null};let g=d.innerMesh.position.clone().project(this.camera),v=(g.x+1)/2*this.canvas.clientWidth,x=(-g.y+1)/2*this.canvas.clientHeight-20;return{object:d,position:{left:`${v}px`,top:`${x}px`}}}animateSensors(e){this.sensors.forEach(i=>{if(i.pingMesh){let r=e*.001%1,s=1+r,o=1-r;i.pingMesh.scale.set(s,s,s);let a=i.pingMesh.material;a.opacity=o}})}animateSections(e){this.bridgeSections.forEach(i=>{if(i.pingMesh){let r=e*.001%1,s=1+r/10,o=1-r;i.pingMesh.scale.set(s,s,s);let a=i.pingMesh.material;a.opacity=o}})}clearObjectReferences(){this.sensors.forEach(e=>{e.innerMesh=void 0,e.pingMesh=void 0}),this.bridgeSections.forEach(e=>{e.innerMesh=void 0,e.pingMesh=void 0})}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();function zk(n){return{healthy:"#76996E",warn:"#F4AC32",critical:"#C42021"}[n]}function Uk(n,t,e){let i=new Y_(.3,32,32),r=new ku({color:new kn(t),emissive:new kn(t),emissiveIntensity:e?.3:1,transparent:!e,opacity:1,depthWrite:e}),s=new As(i,r);return s.position.copy(n),s}function Hk(n,t,e,i){let r=new Kd(n.x,n.y,n.z),s=new ku({color:new kn(e),emissive:new kn(e),emissiveIntensity:i?.3:1,transparent:!i,opacity:1,depthWrite:i}),o=new As(r,s);return o.position.copy(t),o}function jk(n,t){if(t===hk)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(t===zy||t===db){let e=n.getIndex();if(e===null){let o=[],a=n.getAttribute("position");if(a!==void 0){for(let u=0;u<a.count;u++)o.push(u);n.setIndex(o),e=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=e.count-2,r=[];if(t===zy)for(let o=1;o<=i;o++)r.push(e.getX(0)),r.push(e.getX(o)),r.push(e.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(e.getX(o)),r.push(e.getX(o+1)),r.push(e.getX(o+2))):(r.push(e.getX(o+2)),r.push(e.getX(o+1)),r.push(e.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),n}var F1=class extends $p{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new Zk(e)}),this.register(function(e){return new Kk(e)}),this.register(function(e){return new o2(e)}),this.register(function(e){return new a2(e)}),this.register(function(e){return new l2(e)}),this.register(function(e){return new Jk(e)}),this.register(function(e){return new e2(e)}),this.register(function(e){return new t2(e)}),this.register(function(e){return new n2(e)}),this.register(function(e){return new Yk(e)}),this.register(function(e){return new i2(e)}),this.register(function(e){return new Qk(e)}),this.register(function(e){return new s2(e)}),this.register(function(e){return new r2(e)}),this.register(function(e){return new qk(e)}),this.register(function(e){return new c2(e)}),this.register(function(e){return new u2(e)})}load(t,e,i,r){let s=this,o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){let d=Ph.extractUrlBase(t);o=Ph.resolveURL(d,this.path)}else o=Ph.extractUrlBase(t);this.manager.itemStart(t);let a=function(d){r?r(d):console.error(d),s.manager.itemError(t),s.manager.itemEnd(t)},u=new ky(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(d){try{s.parse(d,o,function(g){e(g),s.manager.itemEnd(t)},a)}catch(g){a(g)}},i,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,r){let s,o={},a={},u=new TextDecoder;if(typeof t=="string")s=JSON.parse(t);else if(t instanceof ArrayBuffer)if(u.decode(new Uint8Array(t,0,4))===i8){try{o[Fi.KHR_BINARY_GLTF]=new h2(t)}catch(v){r&&r(v);return}s=JSON.parse(o[Fi.KHR_BINARY_GLTF].content)}else s=JSON.parse(u.decode(t));else s=t;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let d=new v2(s,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let g=0;g<this.pluginCallbacks.length;g++){let v=this.pluginCallbacks[g](d);v.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[v.name]=v,o[v.name]=!0}if(s.extensionsUsed)for(let g=0;g<s.extensionsUsed.length;++g){let v=s.extensionsUsed[g],x=s.extensionsRequired||[];switch(v){case Fi.KHR_MATERIALS_UNLIT:o[v]=new Xk;break;case Fi.KHR_DRACO_MESH_COMPRESSION:o[v]=new d2(s,this.dracoLoader);break;case Fi.KHR_TEXTURE_TRANSFORM:o[v]=new f2;break;case Fi.KHR_MESH_QUANTIZATION:o[v]=new p2;break;default:x.indexOf(v)>=0&&a[v]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+v+'".')}}d.setExtensions(o),d.setPlugins(a),d.parse(i,r)}parseAsync(t,e){let i=this;return new Promise(function(r,s){i.parse(t,e,r,s)})}};function Eue(){let n={};return{get:function(t){return n[t]},add:function(t,e){n[t]=e},remove:function(t){delete n[t]},removeAll:function(){n={}}}}var Fi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},qk=class{constructor(t){this.parser=t,this.name=Fi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let t=this.parser,e=this.parser.json.nodes||[];for(let i=0,r=e.length;i<r;i++){let s=e[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(t){let e=this.parser,i="light:"+t,r=e.cache.get(i);if(r)return r;let s=e.json,u=((s.extensions&&s.extensions[this.name]||{}).lights||[])[t],d,g=new kn(16777215);u.color!==void 0&&g.setRGB(u.color[0],u.color[1],u.color[2],ho);let v=u.range!==void 0?u.range:0;switch(u.type){case"directional":d=new Up(g),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new tb(g),d.distance=v;break;case"spot":d=new eb(g),d.distance=v,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,d.angle=u.spot.outerConeAngle,d.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return d.position.set(0,0,0),Oh(d,u),u.intensity!==void 0&&(d.intensity=u.intensity),d.name=e.createUniqueName(u.name||"light_"+t),r=Promise.resolve(d),e.cache.add(i,r),r}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){let e=this,i=this.parser,s=i.json.nodes[t],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(u){return i._getNodeRef(e.cache,a,u)})}},Xk=class{constructor(){this.name=Fi.KHR_MATERIALS_UNLIT}getMaterialType(){return kc}extendParams(t,e,i){let r=[];t.color=new kn(1,1,1),t.opacity=1;let s=e.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){let o=s.baseColorFactor;t.color.setRGB(o[0],o[1],o[2],ho),t.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(t,"map",s.baseColorTexture,Us))}return Promise.all(r)}},Yk=class{constructor(t){this.parser=t,this.name=Fi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(e.emissiveIntensity=s),Promise.resolve()}},Zk=class{constructor(t){this.parser=t,this.name=Fi.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Aa}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(e.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){let a=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new qn(a,a)}return Promise.all(s)}},Kk=class{constructor(t){this.parser=t,this.name=Fi.KHR_MATERIALS_DISPERSION}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Aa}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=r.extensions[this.name];return e.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}},Qk=class{constructor(t){this.parser=t,this.name=Fi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Aa}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(e.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(e,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(e.iridescenceIOR=o.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(e,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}},Jk=class{constructor(t){this.parser=t,this.name=Fi.KHR_MATERIALS_SHEEN}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Aa}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[];e.sheenColor=new kn(0,0,0),e.sheenRoughness=0,e.sheen=1;let o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){let a=o.sheenColorFactor;e.sheenColor.setRGB(a[0],a[1],a[2],ho)}return o.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(e,"sheenColorMap",o.sheenColorTexture,Us)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}},e2=class{constructor(t){this.parser=t,this.name=Fi.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Aa}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(e.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(s)}},t2=class{constructor(t){this.parser=t,this.name=Fi.KHR_MATERIALS_VOLUME}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Aa}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];e.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||1/0;let a=o.attenuationColor||[1,1,1];return e.attenuationColor=new kn().setRGB(a[0],a[1],a[2],ho),Promise.all(s)}},n2=class{constructor(t){this.parser=t,this.name=Fi.KHR_MATERIALS_IOR}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Aa}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=r.extensions[this.name];return e.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}},i2=class{constructor(t){this.parser=t,this.name=Fi.KHR_MATERIALS_SPECULAR}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Aa}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];e.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(e,"specularIntensityMap",o.specularTexture));let a=o.specularColorFactor||[1,1,1];return e.specularColor=new kn().setRGB(a[0],a[1],a[2],ho),o.specularColorTexture!==void 0&&s.push(i.assignTexture(e,"specularColorMap",o.specularColorTexture,Us)),Promise.all(s)}},r2=class{constructor(t){this.parser=t,this.name=Fi.EXT_MATERIALS_BUMP}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Aa}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return e.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(e,"bumpMap",o.bumpTexture)),Promise.all(s)}},s2=class{constructor(t){this.parser=t,this.name=Fi.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Aa}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(e.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(e.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(e,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}},o2=class{constructor(t){this.parser=t,this.name=Fi.KHR_TEXTURE_BASISU}loadTexture(t){let e=this.parser,i=e.json,r=i.textures[t];if(!r.extensions||!r.extensions[this.name])return null;let s=r.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,s.source,o)}},a2=class{constructor(t){this.parser=t,this.name=Fi.EXT_TEXTURE_WEBP}loadTexture(t){let e=this.name,i=this.parser,r=i.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;let o=s.extensions[e],a=r.images[o.source],u=i.textureLoader;if(a.uri){let d=i.options.manager.getHandler(a.uri);d!==null&&(u=d)}return i.loadTextureImage(t,o.source,u)}},l2=class{constructor(t){this.parser=t,this.name=Fi.EXT_TEXTURE_AVIF}loadTexture(t){let e=this.name,i=this.parser,r=i.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;let o=s.extensions[e],a=r.images[o.source],u=i.textureLoader;if(a.uri){let d=i.options.manager.getHandler(a.uri);d!==null&&(u=d)}return i.loadTextureImage(t,o.source,u)}},c2=class{constructor(t){this.name=Fi.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){let e=this.parser.json,i=e.bufferViews[t];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){let u=r.byteOffset||0,d=r.byteLength||0,g=r.count,v=r.byteStride,x=new Uint8Array(a,u,d);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(g,v,x,r.mode,r.filter).then(function(C){return C.buffer}):o.ready.then(function(){let C=new ArrayBuffer(g*v);return o.decodeGltfBuffer(new Uint8Array(C),g,v,x,r.mode,r.filter),C})})}else return null}},u2=class{constructor(t){this.name=Fi.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){let e=this.parser.json,i=e.nodes[t];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=e.meshes[i.mesh];for(let d of r.primitives)if(d.mode!==jl.TRIANGLES&&d.mode!==jl.TRIANGLE_STRIP&&d.mode!==jl.TRIANGLE_FAN&&d.mode!==void 0)return null;let o=i.extensions[this.name].attributes,a=[],u={};for(let d in o)a.push(this.parser.getDependency("accessor",o[d]).then(g=>(u[d]=g,u[d])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(d=>{let g=d.pop(),v=g.isGroup?g.children:[g],x=d[0].count,C=[];for(let A of v){let O=new ui,N=new Le,T=new ia,j=new Le(1,1,1),Z=new j_(A.geometry,A.material,x);for(let $=0;$<x;$++)u.TRANSLATION&&N.fromBufferAttribute(u.TRANSLATION,$),u.ROTATION&&T.fromBufferAttribute(u.ROTATION,$),u.SCALE&&j.fromBufferAttribute(u.SCALE,$),Z.setMatrixAt($,O.compose(N,T,j));for(let $ in u)if($==="_COLOR_0"){let le=u[$];Z.instanceColor=new Qd(le.array,le.itemSize,le.normalized)}else $!=="TRANSLATION"&&$!=="ROTATION"&&$!=="SCALE"&&A.geometry.setAttribute($,u[$]);eo.prototype.copy.call(Z,A),this.parser.assignFinalMaterial(Z),C.push(Z)}return g.isGroup?(g.clear(),g.add(...C),g):C[0]}))}},i8="glTF",gb=12,J5={JSON:1313821514,BIN:5130562},h2=class{constructor(t){this.name=Fi.KHR_BINARY_GLTF,this.content=null,this.body=null;let e=new DataView(t,0,gb),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==i8)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-gb,s=new DataView(t,gb),o=0;for(;o<r;){let a=s.getUint32(o,!0);o+=4;let u=s.getUint32(o,!0);if(o+=4,u===J5.JSON){let d=new Uint8Array(t,gb+o,a);this.content=i.decode(d)}else if(u===J5.BIN){let d=gb+o;this.body=t.slice(d,d+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},d2=class{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Fi.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){let i=this.json,r=this.dracoLoader,s=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},u={},d={};for(let g in o){let v=g2[g]||g.toLowerCase();a[v]=o[g]}for(let g in t.attributes){let v=g2[g]||g.toLowerCase();if(o[g]!==void 0){let x=i.accessors[t.attributes[g]],C=Gy[x.componentType];d[v]=C.name,u[v]=x.normalized===!0}}return e.getDependency("bufferView",s).then(function(g){return new Promise(function(v,x){r.decodeDracoFile(g,function(C){for(let A in C.attributes){let O=C.attributes[A],N=u[A];N!==void 0&&(O.normalized=N)}v(C)},a,d,ho,x)})})}},f2=class{constructor(){this.name=Fi.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}},p2=class{constructor(){this.name=Fi.KHR_MESH_QUANTIZATION}},B1=class extends Dh{constructor(t,e,i,r){super(t,e,i,r)}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=t*r*3+r;for(let o=0;o!==r;o++)e[o]=i[s+o];return e}interpolate_(t,e,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=a*2,d=a*3,g=r-e,v=(i-e)/g,x=v*v,C=x*v,A=t*d,O=A-d,N=-2*C+3*x,T=C-x,j=1-N,Z=T-x+v;for(let $=0;$!==a;$++){let le=o[O+$+a],K=o[O+$+u]*g,oe=o[A+$+a],ue=o[A+$]*g;s[$]=j*le+Z*K+N*oe+T*ue}return s}},Tue=new ia,m2=class extends B1{interpolate_(t,e,i,r){let s=super.interpolate_(t,e,i,r);return Tue.fromArray(s).normalize().toArray(s),s}},jl={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Gy={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},e8={9728:uo,9729:na,9984:YM,9985:Ny,9986:Wp,9987:Oc},t8={33071:Au,33648:by,10497:Yd},Wk={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},g2={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ef={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Aue={CUBICSPLINE:void 0,LINEAR:Np,STEP:Lp},Gk={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Due(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new ku({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Pc})),n.DefaultMaterial}function Kp(n,t,e){for(let i in e.extensions)n[i]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=e.extensions[i])}function Oh(n,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(n.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Iue(n,t,e){let i=!1,r=!1,s=!1;for(let d=0,g=t.length;d<g;d++){let v=t[d];if(v.POSITION!==void 0&&(i=!0),v.NORMAL!==void 0&&(r=!0),v.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);let o=[],a=[],u=[];for(let d=0,g=t.length;d<g;d++){let v=t[d];if(i){let x=v.POSITION!==void 0?e.getDependency("accessor",v.POSITION):n.attributes.position;o.push(x)}if(r){let x=v.NORMAL!==void 0?e.getDependency("accessor",v.NORMAL):n.attributes.normal;a.push(x)}if(s){let x=v.COLOR_0!==void 0?e.getDependency("accessor",v.COLOR_0):n.attributes.color;u.push(x)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(u)]).then(function(d){let g=d[0],v=d[1],x=d[2];return i&&(n.morphAttributes.position=g),r&&(n.morphAttributes.normal=v),s&&(n.morphAttributes.color=x),n.morphTargetsRelative=!0,n})}function Rue(n,t){if(n.updateMorphTargets(),t.weights!==void 0)for(let e=0,i=t.weights.length;e<i;e++)n.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){let e=t.extras.targetNames;if(n.morphTargetInfluences.length===e.length){n.morphTargetDictionary={};for(let i=0,r=e.length;i<r;i++)n.morphTargetDictionary[e[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Pue(n){let t,e=n.extensions&&n.extensions[Fi.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+$k(e.attributes):t=n.indices+":"+$k(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)t+=":"+$k(n.targets[i]);return t}function $k(n){let t="",e=Object.keys(n).sort();for(let i=0,r=e.length;i<r;i++)t+=e[i]+":"+n[e[i]]+";";return t}function y2(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function kue(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}var Lue=new ui,v2=class{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new Eue,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,s=!1,o=-1;if(typeof navigator<"u"){let a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;let u=a.match(/Version\/(\d+)/);r=i&&u?parseInt(u[1],10):-1,s=a.indexOf("Firefox")>-1,o=s?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||s&&o<98?this.textureLoader=new Q_(this.options.manager):this.textureLoader=new ib(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ky(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){let i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){let a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Kp(s,a,r),Oh(a,r),Promise.all(i._invokeAll(function(u){return u.afterRoot&&u.afterRoot(a)})).then(function(){for(let u of a.scenes)u.updateMatrixWorld();t(a)})}).catch(e)}_markDefs(){let t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=e.length;r<s;r++){let o=e[r].joints;for(let a=0,u=o.length;a<u;a++)t[o[a]].isBone=!0}for(let r=0,s=t.length;r<s;r++){let o=t[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;let r=i.clone(),s=(o,a)=>{let u=this.associations.get(o);u!=null&&this.associations.set(a,u);for(let[d,g]of o.children.entries())s(g,a.children[d])};return s(i,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){let e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){let r=t(e[i]);if(r)return r}return null}_invokeAll(t){let e=Object.values(this.plugins);e.unshift(this);let i=[];for(let r=0;r<e.length;r++){let s=t(e[r]);s&&i.push(s)}return i}getDependency(t,e){let i=t+":"+e,r=this.cache.get(i);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(e)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(e)});break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(t,e)}),!r)throw new Error("Unknown type: "+t);break}this.cache.add(i,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){let i=this,r=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(r.map(function(s,o){return i.getDependency(t,o)})),this.cache.add(t,e)}return e}loadBuffer(t){let e=this.json.buffers[t],i=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[Fi.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(s,o){i.load(Ph.resolveURL(e.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){let e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(i){let r=e.byteLength||0,s=e.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(t){let e=this,i=this.json,r=this.json.accessors[t];if(r.bufferView===void 0&&r.sparse===void 0){let o=Wk[r.type],a=Gy[r.componentType],u=r.normalized===!0,d=new a(r.count*o);return Promise.resolve(new Ts(d,o,u))}let s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){let a=o[0],u=Wk[r.type],d=Gy[r.componentType],g=d.BYTES_PER_ELEMENT,v=g*u,x=r.byteOffset||0,C=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,A=r.normalized===!0,O,N;if(C&&C!==v){let T=Math.floor(x/C),j="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+T+":"+r.count,Z=e.cache.get(j);Z||(O=new d(a,T*C,r.count*C/g),Z=new Ty(O,C/g),e.cache.add(j,Z)),N=new Ay(Z,u,x%C/g,A)}else a===null?O=new d(r.count*u):O=new d(a,x,r.count*u),N=new Ts(O,u,A);if(r.sparse!==void 0){let T=Wk.SCALAR,j=Gy[r.sparse.indices.componentType],Z=r.sparse.indices.byteOffset||0,$=r.sparse.values.byteOffset||0,le=new j(o[1],Z,r.sparse.count*T),K=new d(o[2],$,r.sparse.count*u);a!==null&&(N=new Ts(N.array.slice(),N.itemSize,N.normalized)),N.normalized=!1;for(let oe=0,ue=le.length;oe<ue;oe++){let te=le[oe];if(N.setX(te,K[oe*u]),u>=2&&N.setY(te,K[oe*u+1]),u>=3&&N.setZ(te,K[oe*u+2]),u>=4&&N.setW(te,K[oe*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}N.normalized=A}return N})}loadTexture(t){let e=this.json,i=this.options,s=e.textures[t].source,o=e.images[s],a=this.textureLoader;if(o.uri){let u=i.manager.getHandler(o.uri);u!==null&&(a=u)}return this.loadTextureImage(t,s,a)}loadTextureImage(t,e,i){let r=this,s=this.json,o=s.textures[t],a=s.images[e],u=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[u])return this.textureCache[u];let d=this.loadImageSource(e,i).then(function(g){g.flipY=!1,g.name=o.name||a.name||"",g.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(g.name=a.uri);let x=(s.samplers||{})[o.sampler]||{};return g.magFilter=e8[x.magFilter]||na,g.minFilter=e8[x.minFilter]||Oc,g.wrapS=t8[x.wrapS]||Yd,g.wrapT=t8[x.wrapT]||Yd,g.generateMipmaps=!g.isCompressedTexture&&g.minFilter!==uo&&g.minFilter!==na,r.associations.set(g,{textures:t}),g}).catch(function(){return null});return this.textureCache[u]=d,d}loadImageSource(t,e){let i=this,r=this.json,s=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(v=>v.clone());let o=r.images[t],a=self.URL||self.webkitURL,u=o.uri||"",d=!1;if(o.bufferView!==void 0)u=i.getDependency("bufferView",o.bufferView).then(function(v){d=!0;let x=new Blob([v],{type:o.mimeType});return u=a.createObjectURL(x),u});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");let g=Promise.resolve(u).then(function(v){return new Promise(function(x,C){let A=x;e.isImageBitmapLoader===!0&&(A=function(O){let N=new al(O);N.needsUpdate=!0,x(N)}),e.load(Ph.resolveURL(v,s.path),A,void 0,C)})}).then(function(v){return d===!0&&a.revokeObjectURL(u),Oh(v,o),v.userData.mimeType=o.mimeType||kue(o.uri),v}).catch(function(v){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),v});return this.sourceCache[t]=g,g}assignTexture(t,e,i,r){let s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Fi.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[Fi.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let u=s.associations.get(o);o=s.extensions[Fi.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,u)}}return r!==void 0&&(o.colorSpace=r),t[e]=o,o})}assignFinalMaterial(t){let e=t.geometry,i=t.material,r=e.attributes.tangent===void 0,s=e.attributes.color!==void 0,o=e.attributes.normal===void 0;if(t.isPoints){let a="PointsMaterial:"+i.uuid,u=this.cache.get(a);u||(u=new Py,Ea.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.sizeAttenuation=!1,this.cache.add(a,u)),i=u}else if(t.isLine){let a="LineBasicMaterial:"+i.uuid,u=this.cache.get(a);u||(u=new Ry,Ea.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,this.cache.add(a,u)),i=u}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let u=this.cache.get(a);u||(u=i.clone(),s&&(u.vertexColors=!0),o&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(a,u),this.associations.set(u,this.associations.get(i))),i=u}t.material=i}getMaterialType(){return ku}loadMaterial(t){let e=this,i=this.json,r=this.extensions,s=i.materials[t],o,a={},u=s.extensions||{},d=[];if(u[Fi.KHR_MATERIALS_UNLIT]){let v=r[Fi.KHR_MATERIALS_UNLIT];o=v.getMaterialType(),d.push(v.extendParams(a,s,e))}else{let v=s.pbrMetallicRoughness||{};if(a.color=new kn(1,1,1),a.opacity=1,Array.isArray(v.baseColorFactor)){let x=v.baseColorFactor;a.color.setRGB(x[0],x[1],x[2],ho),a.opacity=x[3]}v.baseColorTexture!==void 0&&d.push(e.assignTexture(a,"map",v.baseColorTexture,Us)),a.metalness=v.metallicFactor!==void 0?v.metallicFactor:1,a.roughness=v.roughnessFactor!==void 0?v.roughnessFactor:1,v.metallicRoughnessTexture!==void 0&&(d.push(e.assignTexture(a,"metalnessMap",v.metallicRoughnessTexture)),d.push(e.assignTexture(a,"roughnessMap",v.metallicRoughnessTexture))),o=this._invokeOne(function(x){return x.getMaterialType&&x.getMaterialType(t)}),d.push(Promise.all(this._invokeAll(function(x){return x.extendMaterialParams&&x.extendMaterialParams(t,a)})))}s.doubleSided===!0&&(a.side=Ul);let g=s.alphaMode||Gk.OPAQUE;if(g===Gk.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,g===Gk.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==kc&&(d.push(e.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new qn(1,1),s.normalTexture.scale!==void 0)){let v=s.normalTexture.scale;a.normalScale.set(v,v)}if(s.occlusionTexture!==void 0&&o!==kc&&(d.push(e.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==kc){let v=s.emissiveFactor;a.emissive=new kn().setRGB(v[0],v[1],v[2],ho)}return s.emissiveTexture!==void 0&&o!==kc&&d.push(e.assignTexture(a,"emissiveMap",s.emissiveTexture,Us)),Promise.all(d).then(function(){let v=new o(a);return s.name&&(v.name=s.name),Oh(v,s),e.associations.set(v,{materials:t}),s.extensions&&Kp(r,v,s),v})}createUniqueName(t){let e=Ur.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){let e=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Fi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(u){return n8(u,a,e)})}let o=[];for(let a=0,u=t.length;a<u;a++){let d=t[a],g=Pue(d),v=r[g];if(v)o.push(v.promise);else{let x;d.extensions&&d.extensions[Fi.KHR_DRACO_MESH_COMPRESSION]?x=s(d):x=n8(new Ta,d,e),r[g]={primitive:d,promise:x},o.push(x)}}return Promise.all(o)}loadMesh(t){let e=this,i=this.json,r=this.extensions,s=i.meshes[t],o=s.primitives,a=[];for(let u=0,d=o.length;u<d;u++){let g=o[u].material===void 0?Due(this.cache):this.getDependency("material",o[u].material);a.push(g)}return a.push(e.loadGeometries(o)),Promise.all(a).then(function(u){let d=u.slice(0,u.length-1),g=u[u.length-1],v=[];for(let C=0,A=g.length;C<A;C++){let O=g[C],N=o[C],T,j=d[C];if(N.mode===jl.TRIANGLES||N.mode===jl.TRIANGLE_STRIP||N.mode===jl.TRIANGLE_FAN||N.mode===void 0)T=s.isSkinnedMesh===!0?new z_(O,j):new As(O,j),T.isSkinnedMesh===!0&&T.normalizeSkinWeights(),N.mode===jl.TRIANGLE_STRIP?T.geometry=jk(T.geometry,db):N.mode===jl.TRIANGLE_FAN&&(T.geometry=jk(T.geometry,zy));else if(N.mode===jl.LINES)T=new W_(O,j);else if(N.mode===jl.LINE_STRIP)T=new Bp(O,j);else if(N.mode===jl.LINE_LOOP)T=new G_(O,j);else if(N.mode===jl.POINTS)T=new $_(O,j);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+N.mode);Object.keys(T.geometry.morphAttributes).length>0&&Rue(T,s),T.name=e.createUniqueName(s.name||"mesh_"+t),Oh(T,s),N.extensions&&Kp(r,T,N),e.assignFinalMaterial(T),v.push(T)}for(let C=0,A=v.length;C<A;C++)e.associations.set(v[C],{meshes:t,primitives:C});if(v.length===1)return s.extensions&&Kp(r,v[0],s),v[0];let x=new Ic;s.extensions&&Kp(r,x,s),e.associations.set(x,{meshes:t});for(let C=0,A=v.length;C<A;C++)x.add(v[C]);return x})}loadCamera(t){let e,i=this.json.cameras[t],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?e=new Es(fb.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(e=new zp(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(e.name=this.createUniqueName(i.name)),Oh(e,i),Promise.resolve(e)}loadSkin(t){let e=this.json.skins[t],i=[];for(let r=0,s=e.joints.length;r<s;r++)i.push(this._loadNodeShallow(e.joints[r]));return e.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",e.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let s=r.pop(),o=r,a=[],u=[];for(let d=0,g=o.length;d<g;d++){let v=o[d];if(v){a.push(v);let x=new ui;s!==null&&x.fromArray(s.array,d*16),u.push(x)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[d])}return new H_(a,u)})}loadAnimation(t){let e=this.json,i=this,r=e.animations[t],s=r.name?r.name:"animation_"+t,o=[],a=[],u=[],d=[],g=[];for(let v=0,x=r.channels.length;v<x;v++){let C=r.channels[v],A=r.samplers[C.sampler],O=C.target,N=O.node,T=r.parameters!==void 0?r.parameters[A.input]:A.input,j=r.parameters!==void 0?r.parameters[A.output]:A.output;O.node!==void 0&&(o.push(this.getDependency("node",N)),a.push(this.getDependency("accessor",T)),u.push(this.getDependency("accessor",j)),d.push(A),g.push(O))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(u),Promise.all(d),Promise.all(g)]).then(function(v){let x=v[0],C=v[1],A=v[2],O=v[3],N=v[4],T=[];for(let j=0,Z=x.length;j<Z;j++){let $=x[j],le=C[j],K=A[j],oe=O[j],ue=N[j];if($===void 0)continue;$.updateMatrix&&$.updateMatrix();let te=i._createAnimationTracks($,le,K,oe,ue);if(te)for(let V=0;V<te.length;V++)T.push(te[V])}return new K_(s,void 0,T)})}createNodeMesh(t){let e=this.json,i=this,r=e.nodes[t];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){let o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let u=0,d=r.weights.length;u<d;u++)a.morphTargetInfluences[u]=r.weights[u]}),o})}loadNode(t){let e=this.json,i=this,r=e.nodes[t],s=i._loadNodeShallow(t),o=[],a=r.children||[];for(let d=0,g=a.length;d<g;d++)o.push(i.getDependency("node",a[d]));let u=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),u]).then(function(d){let g=d[0],v=d[1],x=d[2];x!==null&&g.traverse(function(C){C.isSkinnedMesh&&C.bind(x,Lue)});for(let C=0,A=v.length;C<A;C++)g.add(v[C]);return g})}_loadNodeShallow(t){let e=this.json,i=this.extensions,r=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];let s=e.nodes[t],o=s.name?r.createUniqueName(s.name):"",a=[],u=r._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(t)});return u&&a.push(u),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(d){return r._getNodeRef(r.cameraCache,s.camera,d)})),r._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(t)}).forEach(function(d){a.push(d)}),this.nodeCache[t]=Promise.all(a).then(function(d){let g;if(s.isBone===!0?g=new Dy:d.length>1?g=new Ic:d.length===1?g=d[0]:g=new eo,g!==d[0])for(let v=0,x=d.length;v<x;v++)g.add(d[v]);if(s.name&&(g.userData.name=s.name,g.name=o),Oh(g,s),s.extensions&&Kp(i,g,s),s.matrix!==void 0){let v=new ui;v.fromArray(s.matrix),g.applyMatrix4(v)}else s.translation!==void 0&&g.position.fromArray(s.translation),s.rotation!==void 0&&g.quaternion.fromArray(s.rotation),s.scale!==void 0&&g.scale.fromArray(s.scale);if(!r.associations.has(g))r.associations.set(g,{});else if(s.mesh!==void 0&&r.meshCache.refs[s.mesh]>1){let v=r.associations.get(g);r.associations.set(g,Je({},v))}return r.associations.get(g).nodes=t,g}),this.nodeCache[t]}loadScene(t){let e=this.extensions,i=this.json.scenes[t],r=this,s=new Ic;i.name&&(s.name=r.createUniqueName(i.name)),Oh(s,i),i.extensions&&Kp(e,s,i);let o=i.nodes||[],a=[];for(let u=0,d=o.length;u<d;u++)a.push(r.getDependency("node",o[u]));return Promise.all(a).then(function(u){for(let g=0,v=u.length;g<v;g++)s.add(u[g]);let d=g=>{let v=new Map;for(let[x,C]of r.associations)(x instanceof Ea||x instanceof al)&&v.set(x,C);return g.traverse(x=>{let C=r.associations.get(x);C!=null&&v.set(x,C)}),v};return r.associations=d(s),s})}_createAnimationTracks(t,e,i,r,s){let o=[],a=t.name?t.name:t.uuid,u=[];ef[s.path]===ef.weights?t.traverse(function(x){x.morphTargetInfluences&&u.push(x.name?x.name:x.uuid)}):u.push(a);let d;switch(ef[s.path]){case ef.weights:d=Lu;break;case ef.rotation:d=Nu;break;case ef.translation:case ef.scale:d=Ou;break;default:switch(i.itemSize){case 1:d=Lu;break;case 2:case 3:default:d=Ou;break}break}let g=r.interpolation!==void 0?Aue[r.interpolation]:Np,v=this._getArrayFromAccessor(i);for(let x=0,C=u.length;x<C;x++){let A=new d(u[x]+"."+ef[s.path],e.array,v,g);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(A),o.push(A)}return o}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){let i=y2(e.constructor),r=new Float32Array(e.length);for(let s=0,o=e.length;s<o;s++)r[s]=e[s]*i;e=r}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(i){let r=this instanceof Nu?m2:B1;return new r(this.times,this.values,this.getValueSize()/3,i)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function Nue(n,t,e){let i=t.attributes,r=new ra;if(i.POSITION!==void 0){let a=e.json.accessors[i.POSITION],u=a.min,d=a.max;if(u!==void 0&&d!==void 0){if(r.set(new Le(u[0],u[1],u[2]),new Le(d[0],d[1],d[2])),a.normalized){let g=y2(Gy[a.componentType]);r.min.multiplyScalar(g),r.max.multiplyScalar(g)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let s=t.targets;if(s!==void 0){let a=new Le,u=new Le;for(let d=0,g=s.length;d<g;d++){let v=s[d];if(v.POSITION!==void 0){let x=e.json.accessors[v.POSITION],C=x.min,A=x.max;if(C!==void 0&&A!==void 0){if(u.setX(Math.max(Math.abs(C[0]),Math.abs(A[0]))),u.setY(Math.max(Math.abs(C[1]),Math.abs(A[1]))),u.setZ(Math.max(Math.abs(C[2]),Math.abs(A[2]))),x.normalized){let O=y2(Gy[x.componentType]);u.multiplyScalar(O)}a.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let o=new Ma;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function n8(n,t,e){let i=t.attributes,r=[];function s(o,a){return e.getDependency("accessor",o).then(function(u){n.setAttribute(a,u)})}for(let o in i){let a=g2[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(t.indices!==void 0&&!n.index){let o=e.getDependency("accessor",t.indices).then(function(a){n.setIndex(a)});r.push(o)}return Wi.workingColorSpace!==ho&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Wi.workingColorSpace}" not supported.`),Oh(n,t),Nue(n,t,e),Promise.all(r).then(function(){return t.targets!==void 0?Iue(n,t.targets,e):n})}var _2=(()=>{class n{SCENE_NAME="bridge-model";scene=new Ey;loader=new F1;init(e="#f4f4f4"){this.scene=new Ey,this.scene.background=new kn(e),this.initLighting()}getScene(){return this.scene}initLighting(){let e=new Up(16777215,2);e.position.set(20,20,20),this.initShadowsForLight(e),this.scene.add(new nb(16777215,1.5)),this.scene.add(e)}initShadowsForLight(e){e.castShadow=!0,e.shadow.mapSize.width=4096,e.shadow.mapSize.height=4096,e.shadow.camera.near=1,e.shadow.camera.far=100,e.shadow.camera.left=-50,e.shadow.camera.right=50,e.shadow.camera.top=50,e.shadow.camera.bottom=-50,e.shadow.normalBias=.01,e.shadow.bias=-5e-4}loadModelToScene(e){this.disposeExistingBridgeModel(),this.loadNewBridgeModel(e)}loadNewBridgeModel(e){this.loader.load(e,i=>{let r=new ra().setFromObject(i.scene),s=new Le;r.getCenter(s),i.scene.position.sub(s),i.scene.name=this.SCENE_NAME,this.updateModelAppearance(i),this.scene.add(i.scene)},void 0,i=>console.error("Model Load Error:",i))}disposeExistingBridgeModel(){let e=this.scene.getObjectByName(this.SCENE_NAME);e&&(e.traverse(i=>{let r=i;r.geometry?.dispose();let s=r.material;Array.isArray(s)?s.forEach(o=>o?.dispose()):s?.dispose()}),this.scene.remove(e))}updateModelAppearance(e){e.scene.traverse(i=>{if(i.isMesh){let r=i;r.castShadow=!0,r.receiveShadow=!0,this.setModelColor(r)}})}setModelColor(e){(Array.isArray(e.material)?e.material:[e.material]).forEach(r=>{"color"in r&&r.color.setHex(16777215)})}addSensors(e){e.forEach(i=>{let r=zk(i.state),s=Uk(i.position,r,!0),o=Uk(i.position,r,!1);i.innerMesh=s,i.pingMesh=o,i.innerMesh.userData.type="sensor",i.pingMesh.userData.type="sensor",this.scene.add(s),this.scene.add(o)})}addSections(e){e.forEach(i=>{let r=zk(i.state),s=Hk(i.size,i.position,r,!0),o=Hk(i.size,i.position,r,!1);s.userData.type="section",o.userData.type="section",i.innerMesh=s,i.pingMesh=o,this.scene.add(s),this.scene.add(o)})}clearSceneContent(){let e=["bridge-model"],i=["AmbientLight","DirectionalLight"],r=[];this.scene.children.forEach(s=>{let o=e.includes(s.name),a=i.includes(s.type);!o&&!a&&r.push(s)}),r.forEach(s=>{s.traverse(o=>{if(o.geometry&&o.geometry.dispose(),o.material){let a=o.material;Array.isArray(a)?a.forEach(u=>u.dispose()):a.dispose()}}),this.scene.remove(s)})}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();var r8=(()=>{class n{label=vt();style=vt({left:"0px",top:"0px"});static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-tooltip"]],inputs:{label:[1,"label"],style:[1,"style"]},decls:2,vars:2,consts:[[1,"absolute","transform","-translate-x-1/2","-translate-y-full","bg-primary","text-white","text-sm","px-2","py-1","rounded","shadow","pointer-events-none","whitespace-nowrap",3,"ngStyle"]],template:function(i,r){i&1&&(ge(0,"div",0),ot(1),ye()),i&2&&(Ne("ngStyle",r.style()),xe(),Ci(" ",r.label()," "))},dependencies:[Nt,Lg],encapsulation:2})}return n})();var Oue=["canvas"];function Fue(n,t){if(n&1&&tt(0,"lib-tooltip",4),n&2){let e=Ae();uV(e.tooltipStyle),Ne("label",e.hoveredObject.label)}}var b2=(()=>{class n{canvasRef;modelUrl=vt("");backgroundColor=vt("#FFF");sensors=vt([]);sections=vt([]);viewMode=vt("sensor");elementClicked=nr();sceneService=ze(_2);cameraService=ze(Bk);interactionService=ze(Vk);cdr=ze(Ss);renderer;initialModelLoadThrough=!1;hoveredObject=null;tooltipStyle={left:"0px",top:"0px"};constructor(){ji(()=>{this.modelUrl(),this.initialModelLoadThrough&&(this.cleanSectionsAndSensors(),this.loadBridge(),this.initSectionsAndSensors())}),ji(()=>{this.sensors(),this.sections(),this.viewMode(),this.initialModelLoadThrough&&(this.cleanSectionsAndSensors(),this.initSectionsAndSensors())})}ngAfterViewInit(){this.initCanvas(),this.loadBridge(),this.initSectionsAndSensors(),this.initialModelLoadThrough=!0}ngAfterViewChecked(){this.cameraService.resize(this.canvasRef.nativeElement,this.renderer)}cleanSectionsAndSensors(){this.sceneService.clearSceneContent(),this.interactionService.clearObjectReferences()}initSectionsAndSensors(){this.loadObjects(),this.initInteractionHooks()}loadBridge(){this.sceneService.loadModelToScene(this.modelUrl())}initCanvas(){let e=this.canvasRef.nativeElement;this.initRenderer(),this.sceneService.init(this.backgroundColor()),this.cameraService.init(e),this.animate(),this.initResizeHandler(),this.initCanvasEvents()}zoomIn(){this.cameraService.zoomIn()}zoomOut(){this.cameraService.zoomOut()}resetView(){this.cameraService.resetView()}initRenderer(){let e=this.canvasRef.nativeElement;this.renderer=new k1({canvas:e,antialias:!0}),this.renderer.setSize(e.clientWidth,e.clientHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,1)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=VM}initInteractionHooks(){let e=this.canvasRef.nativeElement;this.interactionService.init(e,this.cameraService.getCamera(),this.sensors(),this.sections()),this.interactionService.onObjectClick(i=>{this.elementClicked.emit(i),this.cameraService.zoomTo(i.position)}),this.interactionService.onObjectHover((i,r)=>{this.hoveredObject=i,i&&r&&(this.tooltipStyle=r),this.cdr.markForCheck()})}loadObjects(){this.viewMode()==="sensor"?this.sceneService.addSensors(this.sensors()):this.sceneService.addSections(this.sections())}initCanvasEvents(){let e=this.canvasRef.nativeElement;e.addEventListener("mousemove",this.interactionService.handleMouseMove),e.addEventListener("click",this.interactionService.handleClick)}initResizeHandler(){let e=this.canvasRef.nativeElement;window.addEventListener("resize",()=>this.cameraService.resize(e,this.renderer))}animate=()=>{requestAnimationFrame(this.animate);let e=performance.now();this.cameraService.updateControls(),this.renderer.render(this.sceneService.getScene(),this.cameraService.getCamera()),this.interactionService.animateSensors(e),this.interactionService.animateSections(e)};static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-model-canvas"]],viewQuery:function(i,r){if(i&1&&Oi(Oue,7),i&2){let s;Hn(s=jn())&&(r.canvasRef=s.first)}},inputs:{modelUrl:[1,"modelUrl"],backgroundColor:[1,"backgroundColor"],sensors:[1,"sensors"],sections:[1,"sections"],viewMode:[1,"viewMode"]},outputs:{elementClicked:"elementClicked"},features:[So([_2,Bk,Vk])],decls:4,vars:1,consts:[["canvas",""],[1,"viewer-wrapper"],[1,"model-canvas"],[3,"label","style",4,"ngIf"],[3,"label"]],template:function(i,r){i&1&&(ge(0,"div",1),tt(1,"canvas",2,0),It(3,Fue,1,3,"lib-tooltip",3),ye()),i&2&&(xe(3),Ne("ngIf",r.hoveredObject))},dependencies:[Nt,Ka,r8],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;position:relative}.viewer-wrapper[_ngcontent-%COMP%]{position:relative;height:100%}.model-canvas[_ngcontent-%COMP%]{display:block;width:100%;height:100%}"],changeDetection:0})}return n})();var s8=(()=>{class n{modelUrl=vt.required();sensors=vt([]);sections=vt([]);viewModeInput=vt("section");viewMode=mn("section");constructor(){ji(()=>{this.viewMode.set(this.viewModeInput())})}elementClick=nr();modelCanvas;SensorIconComponent=jU;BridgeIconComponent=gC;zoomIn(){this.modelCanvas.zoomIn()}zoomOut(){this.modelCanvas.zoomOut()}resetView(){this.modelCanvas.resetView()}ResetIconComponent=$U;MinusIconComponent=GU;PlusIconComponent=WU;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-asset-3d-viewer"]],viewQuery:function(i,r){if(i&1&&Oi(b2,5),i&2){let s;Hn(s=jn())&&(r.modelCanvas=s.first)}},inputs:{modelUrl:[1,"modelUrl"],sensors:[1,"sensors"],sections:[1,"sections"],viewModeInput:[1,"viewModeInput"]},outputs:{elementClick:"elementClick"},decls:7,vars:15,consts:[[1,"w-full","h-full","relative"],[1,"absolute","z-1","mt-2","ml-4","md:ml-[min(10%,3rem)]",3,"rightClicked","leftClicked","iconLeftComponent","iconRightComponent","labelLeft","labelRight","activeButton"],[1,"absolute","top-2","right-2","z-1","flex","flex-col","gap-1"],[3,"clicked","iconComponent","position"],[3,"elementClicked","modelUrl","sensors","sections","viewMode"]],template:function(i,r){i&1&&(ge(0,"div",0)(1,"lib-button-group",1),bt("rightClicked",function(){return r.viewMode.set("sensor")})("leftClicked",function(){return r.viewMode.set("section")}),ye(),ge(2,"div",2)(3,"lib-button",3),bt("clicked",function(){return r.zoomIn()}),ye(),ge(4,"lib-button",3),bt("clicked",function(){return r.zoomOut()}),ye(),ge(5,"lib-button",3),bt("clicked",function(){return r.resetView()}),ye()(),ge(6,"lib-model-canvas",4),bt("elementClicked",function(o){return r.elementClick.emit(o)}),ye()()),i&2&&(xe(),Ne("iconLeftComponent",r.BridgeIconComponent)("iconRightComponent",r.SensorIconComponent)("labelLeft","Sections")("labelRight","Sensors")("activeButton",r.viewMode()==="sensor"?"right":"left"),xe(2),Ne("iconComponent",r.PlusIconComponent)("position","center"),xe(),Ne("iconComponent",r.MinusIconComponent)("position","center"),xe(),Ne("iconComponent",r.ResetIconComponent)("position","center"),xe(),Ne("modelUrl",r.modelUrl())("sensors",r.sensors())("sections",r.sections())("viewMode",r.viewMode()))},dependencies:[Nt,b2,pU,Eu],encapsulation:2})}return n})();var Bue=["burgerMenuContainer"],Vue=(n,t)=>({"side-navbar-collapsed":n,"side-navbar-expanded":t});function zue(n,t){if(n&1){let e=Dn();ge(0,"nav",1)(1,"div",3)(2,"span",4),ot(3,"\u2206Vistruct"),ye(),ge(4,"button",5),bt("click",function(){gt(e);let r=Ae();return yt(r.toggleCollapse())}),xo(),ge(5,"svg",6),tt(6,"path",7),ye()(),gu(),ge(7,"div",8,0)(9,"ul",9)(10,"li")(11,"a",10),tt(12,"lib-globe-icon",11),ge(13,"span"),ot(14,"Asset Overview"),ye()()(),ge(15,"li")(16,"a",10),tt(17,"lib-alarm-icon",11),ge(18,"span"),ot(19,"Notifications"),ye()()()()()()()}if(n&2){let e=Ae();xe(7),Pr("height",e.isCollapsed()?"0":e.burgerMenuHeight()),xe(4),Ne("href","assets",hp),xe(),Ne("color","primary")("hover","secondary"),xe(4),Ne("href","notifications",hp),xe(),Ne("color","primary")("hover","secondary")}}function Uue(n,t){n&1&&(ge(0,"span",21),ot(1,"\u2206Vistruct"),ye())}function Hue(n,t){n&1&&(ge(0,"span",22),ot(1,"\u2206V"),ye())}function jue(n,t){n&1&&(ge(0,"span"),ot(1,"Asset Overview"),ye())}function Wue(n,t){n&1&&(ge(0,"span",20),ot(1,"Notifications"),ye())}function Gue(n,t){if(n&1){let e=Dn();ge(0,"div",12),bt("mouseenter",function(){gt(e);let r=Ae();return yt(r.expand())})("mouseleave",function(){gt(e);let r=Ae();return yt(r.collapse())}),ge(1,"div",13),It(2,Uue,2,0,"span",14)(3,Hue,2,0,"span",15),ye(),ge(4,"ul",16)(5,"li")(6,"a",17),tt(7,"lib-globe-icon",18),It(8,jue,2,0,"span"),ye()(),ge(9,"li")(10,"a",19),tt(11,"lib-alarm-icon",18),It(12,Wue,2,0,"span",20),ye()()()()}if(n&2){let e=Ae();Ne("ngClass",oS(15,Vue,e.isCollapsed(),!e.isCollapsed())),xe(2),Ne("ngIf",!e.isCollapsed()),xe(),Ne("ngIf",e.isCollapsed()),xe(3),Si("gap-3",!e.isCollapsed()),Ne("href","assets",hp),xe(),Ne("color","primary")("hover","secondary"),xe(),Kt(e.isCollapsed()?-1:8),xe(2),Si("gap-3",!e.isCollapsed()),Ne("href","notifications",hp),xe(),Ne("color","primary")("hover","secondary"),xe(),Kt(e.isCollapsed()?-1:12)}}var o8=(()=>{class n{burgerMenuRef;isCollapsed=mn(!0);burgerNavigation=vt.required();burgerMenuHeight=mn("0px");collapse(){this.isCollapsed.set(!0),this.setBurgerMenuHeight()}toggleCollapse(){this.isCollapsed()?this.expand():this.collapse()}expand(){this.isCollapsed.set(!1),this.setBurgerMenuHeight()}setBurgerMenuHeight(){if(!this.burgerNavigation())return;let e=this.burgerMenuRef.nativeElement;this.isCollapsed()?this.burgerMenuHeight.set("0px"):this.burgerMenuHeight.set(e.scrollHeight+"px")}onmouseleave=onmouseleave;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-navigation"]],viewQuery:function(i,r){if(i&1&&Oi(Bue,5),i&2){let s;Hn(s=jn())&&(r.burgerMenuRef=s.first)}},inputs:{burgerNavigation:[1,"burgerNavigation"]},decls:2,vars:1,consts:[["burgerMenuContainer",""],[1,"fixed","top-0","left-0","right-0","z-50","bg-elevated-background"],[1,"fixed","top-0","left-0","h-screen","z-40","bg-elevated-background","transition-all","duration-300","overflow-hidden",3,"ngClass"],[1,"max-w-screen-xl","flex","flex-wrap","items-center","justify-between","mx-auto","p-4"],[1,"text-xl","font-bold","text-primary","whitespace-nowrap","overflow-hidden"],["type","button",1,"cursor-pointer","inline-flex","items-center","p-2","w-10","h-10","justify-center","text-sm","text-gray-500","rounded-lg","md:hidden","hover:bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-gray-200",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 17 14",1,"w-5","h-5"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M1 1h15M1 7h15M1 13h15"],["id","navbar-default",1,"overflow-hidden","w-full","burger-menu"],[1,"font-medium","flex","flex-col","p-4","mt-4","border","border-gray-100","rounded-lg","bg-white","rtl:space-x-reverse"],["aria-current","page",1,"flex","gap-2","py-2","px-3","text-gray-900","rounded-sm","hover:bg-gray-100",3,"href"],[3,"color","hover"],[1,"fixed","top-0","left-0","h-screen","z-40","bg-elevated-background","transition-all","duration-300","overflow-hidden",3,"mouseenter","mouseleave","ngClass"],[1,"flex","items-center","justify-between","px-4","pt-4"],["class","text-xl font-bold whitespace-nowrap",4,"ngIf"],["class","text-xl font-bold",4,"ngIf"],[1,"mt-6","space-y-2","font-medium"],[1,"flex","group","py-2","hover:bg-gray-100","hover:text-gray-900","rounded-lg","group","whitespace-nowrap",3,"href"],[1,"icon",3,"color","hover"],[1,"flex","py-2","hover:bg-gray-100","hover:text-gray-900","rounded-lg","group","whitespace-nowrap","overflow-hidden",3,"href"],[1,"flex-1"],[1,"text-xl","font-bold","whitespace-nowrap"],[1,"text-xl","font-bold"]],template:function(i,r){i&1&&It(0,zue,20,8,"nav",1)(1,Gue,13,18,"div",2),i&2&&Kt(r.burgerNavigation()?0:1)},dependencies:[Nt,ls,Ka,y_,Nl],styles:["[_nghost-%COMP%]{display:block}.side-navbar-expanded[_ngcontent-%COMP%]{width:16rem}.side-navbar-collapsed[_ngcontent-%COMP%]{width:4rem}.icon[_ngcontent-%COMP%]{margin-left:calc((4rem - 28px)/2)}.label[_ngcontent-%COMP%]{margin-right:calc((4rem - 28px)/2)}.burger-menu[_ngcontent-%COMP%]{transition:.3s height ease}.burger-menu.collapsed[_ngcontent-%COMP%]{max-height:0}"]})}return n})();var $ue=["layout"];function que(n,t){if(n&1&&tt(0,"lib-navigation",2),n&2){let e=Ae();Ne("burgerNavigation",e.mobileView())}}var a8=(()=>{class n{layoutRef;mobileView=mn(void 0);ngAfterViewInit(){this.updateMobileView()}updateMobileView(){this.mobileView.set(this.layoutRef.nativeElement.offsetWidth<700)}onResize(){this.updateMobileView()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-layout"]],viewQuery:function(i,r){if(i&1&&Oi($ue,7),i&2){let s;Hn(s=jn())&&(r.layoutRef=s.first)}},hostBindings:function(i,r){i&1&&bt("resize",function(o){return r.onResize(o)},!1,qw)},decls:5,vars:3,consts:[["layout",""],["id","layout"],[3,"burgerNavigation"],[1,"router-outlet-container"]],template:function(i,r){i&1&&(ge(0,"div",1,0),It(2,que,1,1,"lib-navigation",2),ge(3,"div",3),tt(4,"router-outlet"),ye()()),i&2&&(Si("mobile",r.mobileView()),xe(2),Kt(r.mobileView()!==void 0?2:-1))},dependencies:[Nt,bp,o8],styles:["#layout[_ngcontent-%COMP%]{height:100vh;width:100%}#layout[_ngcontent-%COMP%]   .router-outlet-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto}#layout[_ngcontent-%COMP%]:not(.mobile){margin-left:4rem}#layout[_ngcontent-%COMP%]:not(.mobile)   .router-outlet-container[_ngcontent-%COMP%]{width:calc(100% - 4rem)}#layout.mobile[_ngcontent-%COMP%]{margin-top:4.5rem}#layout.mobile[_ngcontent-%COMP%]   .router-outlet-container[_ngcontent-%COMP%]{height:calc(100% - 4.5rem)}"]})}return n})();function Qp(n){return n>75?"healthy":n>40?"warn":"critical"}function l8(n){let t=Jo(()=>n());return Yue(t)?new Proxy(n,{get(e,i){return i in t?(qD(e[i])||Object.defineProperty(e,i,{value:cn(()=>e()[i]),configurable:!0}),l8(e[i])):e[i]}}):n}var Xue=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function Yue(n){if(n===null||typeof n!="object"||Zue(n))return!1;let t=Object.getPrototypeOf(n);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(Xue.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function Zue(n){return typeof n?.[Symbol.iterator]=="function"}var Kue=new WeakMap,Vu=Symbol("STATE_SOURCE");function Bi(n,...t){n[Vu].update(e=>t.reduce((i,r)=>Je(Je({},i),typeof r=="function"?r(i):r),e)),ehe(n)}function Que(n){return n[Vu]()}function Jue(n){return Kue.get(n[Vu])||[]}function ehe(n){let t=Jue(n);for(let e of t){let i=Jo(()=>Que(n));e(i)}}function $y(...n){let t=[...n],e=typeof t[0]=="function"?{}:t.shift(),i=t;return(()=>{class s{constructor(){let a=i.reduce((O,N)=>N(O),the()),{stateSignals:u,props:d,methods:g,hooks:v}=a,x=Je(Je(Je({},u),d),g);this[Vu]=a[Vu];for(let O of Reflect.ownKeys(x))this[O]=x[O];let{onInit:C,onDestroy:A}=v;C&&C(),A&&ze(Dl).onDestroy(A)}static \u0275fac=function(u){return new(u||s)};static \u0275prov=Vt({token:s,factory:s.\u0275fac,providedIn:e.providedIn||null})}return s})()}function the(){return{[Vu]:mn({}),stateSignals:{},props:{},methods:{},hooks:{}}}function qy(n){return t=>{let e=n(Je(Je(Je({[Vu]:t[Vu]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(e),Mn(Je({},t),{methods:Je(Je({},t.methods),e)})}}function Xy(n){return t=>{let e=typeof n=="function"?n():n,i=Reflect.ownKeys(e);t[Vu].update(s=>Je(Je({},s),e));let r=i.reduce((s,o)=>{let a=cn(()=>t[Vu]()[o]);return Mn(Je({},s),{[o]:l8(a)})},{});return Mn(Je({},t),{stateSignals:Je(Je({},t.stateSignals),r)})}}var c8=(()=>{class n{assets=[{asset:{id:"1b3d7b28-4e85-4ec0-9347-3c05ce09373a",name:"Z\xFCrich Br\xFCcke",type:"bridge",location:{lat:47.3769,lng:8.5417},description:"Near the Limmatplatz",locationName:"District 5, Z\xFCrich",constructionYear:1982,modelPath:"/assets/models/bridge.glb",material:"Prestressed concrete with steel elements",length:173.4},sensors:[{id:"c35a5f1e-7d3f-41dc-b97f-46aabf8e58e2",label:"Vibration Nord 3",position:{x:20,y:.9,z:0},healthPercentage:90},{id:"7f2e8e6c-3e45-49b0-a934-6176c776f518",label:"Vibration Nord 2",position:{x:13,y:.9,z:0},healthPercentage:95},{id:"8d7c8894-27c3-4ff4-8e2a-f2c53b8cb48d",label:"Vibration Nord 1",position:{x:3.5,y:.9,z:0},healthPercentage:54},{id:"c95a1c63-1d79-4232-b6f5-e13ad024dca6",label:"Vibration S\xFCd 1",position:{x:-3.5,y:.9,z:0},healthPercentage:32},{id:"ebcc62a8-fcef-4df1-984c-7a69222d4382",label:"Vibration S\xFCd 2",position:{x:-13,y:.9,z:0},healthPercentage:41},{id:"0c3092da-d665-435a-ae1f-530965bd7eae",label:"Vibration S\xFCd 3",position:{x:-20,y:.9,z:0},healthPercentage:69}],sections:[{id:"bb5f9422-e40e-4ed6-a6f0-2f2de838f29d",label:"Br\xFCckenabschnitt Nord",position:{x:16.5,y:.9,z:0},size:{x:16,y:.25,z:2},healthPercentage:90},{id:"c6f618b3-f589-401f-9ee7-89fc6e26309a",label:"Br\xFCckenabschnitt Mitte",position:{x:0,y:.9,z:0},size:{x:16,y:.25,z:2},healthPercentage:35},{id:"a12c4ad7-ff63-47e5-9c5b-1e9a3ec4cf69",label:"Br\xFCckenabschnitt S\xFCd",position:{x:-16.5,y:.9,z:0},size:{x:16,y:.25,z:2},healthPercentage:66}],healthPercentage:30},{asset:{id:"e7d8f580-9a6e-49f3-968b-e987c26f6ab9",name:"Kirchenfeldbr\xFCcke",type:"bridge",location:{lat:46.9481,lng:7.4474},description:"Existing bridge connecting old town and Kirchenfeld",locationName:"Aare river, Bern",constructionYear:1974,material:"Reinforced concrete and granite overlay",modelPath:"/assets/models/kirchenfeld.glb",length:201.8},sensors:[{id:"2aea7dd9-2074-4cb9-a3ac-5f51d5b92802",label:"Vibration Verbindung Nord",position:{x:20,y:-.3,z:0},healthPercentage:10},{id:"f8a21e91-fd14-4b4e-91ec-2c30b376d2e6",label:"Strukturspannung Nord",position:{x:10,y:-.3,z:0},healthPercentage:30},{id:"b2d8a5e0-bbc4-406d-87c4-69f28eb0308e",label:"Neigung Mitte",position:{x:2,y:-.3,z:0},healthPercentage:65},{id:"7b95a642-e580-4a7c-8d39-bb8d81c3fbd6",label:"Vibration Mitte",position:{x:-2,y:-.3,z:0},healthPercentage:85},{id:"64099e36-0d5a-4c33-95a1-4f6e879c4076",label:"Temperatur S\xFCd",position:{x:-10,y:-.3,z:0},healthPercentage:90},{id:"b244e9cf-71ca-4c5d-a36f-2203579b90f5",label:"Vibration Verbindung S\xFCd",position:{x:-20,y:-.3,z:0},healthPercentage:100}],sections:[{id:"d5cf89c8-5dc3-4b58-aef2-d2a7be012220",label:"Verbindung Nord",position:{x:19,y:-.3,z:0},size:{x:10,y:.25,z:2},healthPercentage:17},{id:"edc90d04-f305-49b6-9292-1745c3bba54a",label:"Br\xFCckenabschnitt Mitte",position:{x:0,y:-.3,z:0},size:{x:26,y:.25,z:2},healthPercentage:50},{id:"27d926da-ea7d-4bf1-8487-b78970613dc0",label:"Verbindung S\xFCd",position:{x:-19,y:-.3,z:0},size:{x:10,y:.25,z:2},healthPercentage:90}],healthPercentage:67.5},{asset:{id:"8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470",name:"Pont du Mont-Blanc",type:"bridge",location:{lat:46.2044,lng:6.1432},description:"Connects the left and right banks of the Rhone",locationName:"Lake Geneva, Geneva",constructionYear:1995,modelPath:"/assets/models/mont-blanc.glb",material:"Steel box girder with asphalt top",length:157.6},sensors:[{id:"bc9b5730-24a0-46a5-8c11-757f8f85b412",label:"Vibration S\xFCd",position:{x:-18,y:1.5,z:0},healthPercentage:89},{id:"8c74b44e-1a9c-4a55-8f6b-83f4767763c5",label:"Temperatur S\xFCd",position:{x:-12,y:1.5,z:0},healthPercentage:96},{id:"f8226eaf-9b56-45c7-9988-84d84892e0b7",label:"Vibration Mitte",position:{x:-2,y:1.4,z:0},healthPercentage:91},{id:"b7cddbb1-d234-46f7-9a5d-0dfcd9de29d1",label:"Neigung Mitte",position:{x:4,y:1.4,z:0},healthPercentage:93},{id:"02cda3a6-dc27-4f12-82df-f6b3882e946e",label:"Strukturspannung Nord",position:{x:12,y:1.4,z:0},healthPercentage:89},{id:"e7fec506-2608-45f8-85b3-1bc3364adbea",label:"Strukturspannung Nord",position:{x:18,y:1.4,z:0},healthPercentage:99}],sections:[{id:"dd2e9308-9913-4db0-9c0d-453fb6d4fa57",label:"Section West",position:{x:-15,y:1.4,z:0},size:{x:13,y:.25,z:2},healthPercentage:89},{id:"abe09045-5c0d-47ae-9d88-2d77b2f5cb0d",label:"Section Middle",position:{x:0,y:1.4,z:0},size:{x:13,y:.25,z:2},healthPercentage:92},{id:"dbb287d5-eeb3-49e5-a2c8-76a4d927e7b1",label:"Section East",position:{x:15,y:1.4,z:0},size:{x:13,y:.25,z:2},healthPercentage:91}],healthPercentage:90},{asset:{id:"b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7",name:"Mittlere Br\xFCcke",type:"bridge",location:{lat:47.5596,lng:7.5886},description:"Railway crossing between Kleinbasel and Grossbasel",locationName:"Rhine river, Basel",constructionYear:1965,modelPath:"/assets/models/mittlere-bruecke.glb",material:"Metal h-beams with concrete base",length:189.2},sensors:[{id:"62f5a029-5bd7-41a5-9426-2a59c97b5b79",label:"Vibration Pillar 1",position:{x:16.8,y:-1,z:.75},healthPercentage:96},{id:"587c6f1b-6fd0-473c-b2c0-6c6f0eb1eab0",label:"Vibration Pillar 1",position:{x:16.8,y:2,z:.75},healthPercentage:92},{id:"5b096a9b-c03e-4513-acc7-a5c18cd5b3d7",label:"Vibration Nord 2",position:{x:13.5,y:2.75,z:0},healthPercentage:91},{id:"d38db80c-8567-4fc9-9934-175d3633a180",label:"Vibration Pillar 2",position:{x:10.125,y:-1,z:.75},healthPercentage:56},{id:"9e7168fa-e08d-4585-b628-2aeead4878a4",label:"Vibration Pillar 2",position:{x:10.125,y:2,z:.75},healthPercentage:81},{id:"7ba7721b-f40b-4f29-9b54-a1a0bad98041",label:"Vibration Nord 1",position:{x:6.25,y:2.75,z:0},healthPercentage:57},{id:"781c100f-aeef-4122-8422-3bc0ac52de27",label:"Vibration Pillar 3",position:{x:3.4,y:-1,z:.75},healthPercentage:54},{id:"c9c52881-c258-4c73-85ac-fe7d10ed1899",label:"Vibration Pillar 3",position:{x:3.4,y:2,z:.75},healthPercentage:36},{id:"ba71dce3-590c-4bea-9c93-1e642dcf505d",label:"Vibration Middle",position:{x:0,y:2.75,z:0},healthPercentage:19},{id:"23c554a6-1e2c-42b0-8a6a-d24f83998706",label:"Vibration Pillar 4",position:{x:-3.4,y:-1,z:.75},healthPercentage:15},{id:"0d7c0706-fbbc-4465-92b7-3f2593e00b53",label:"Vibration Pillar 4",position:{x:-3.4,y:2,z:.75},healthPercentage:27},{id:"786b66ff-2f76-4bed-82ed-7751c41464e4",label:"Vibration South 1",position:{x:-6.5,y:2.75,z:0},healthPercentage:19},{id:"335d5120-79e5-4627-9bea-dd55d6d3540d",label:"Vibration Pillar 5",position:{x:-10.125,y:-1,z:.75},healthPercentage:24},{id:"e56e66f9-1d4d-423a-81c7-5f5e830d8ba9",label:"Vibration Pillar 5",position:{x:-10.125,y:2,z:.75},healthPercentage:46},{id:"692d084e-9e3b-4014-909d-7137f04e204c",label:"Vibration South 2",position:{x:-13.5,y:2.75,z:0},healthPercentage:66},{id:"3d0ae4e7-62d4-41fd-875f-e88661c8c87b",label:"Vibration Pillar 6",position:{x:-16.8,y:-1,z:.75},healthPercentage:82},{id:"a7ebd388-7a9c-4d98-be79-7466dc09d36c",label:"Vibration Pillar 6",position:{x:-16.8,y:2,z:.75},healthPercentage:83}],sections:[{id:"b4154364-c857-44c9-a2f4-cd7d79933ccb",label:"Br\xFCckenabschnitt Nord 2",position:{x:13.5,y:2.75,z:0},size:{x:6,y:.25,z:1.4},healthPercentage:86},{id:"4c6d95d5-329b-4c9f-9fba-e9786160cf67",label:"Br\xFCckenabschnitt Nord 1",position:{x:6.75,y:2.75,z:0},size:{x:6,y:.25,z:1.4},healthPercentage:63},{id:"fd121158-cb75-4557-a90a-4196065a8c6b",label:"Br\xFCckenabschnitt Mitte",position:{x:0,y:2.75,z:0},size:{x:6,y:.25,z:1.4},healthPercentage:16},{id:"f5be79bb-20d2-4b04-b4d4-2cef294506c7",label:"Br\xFCckenabschnitt S\xFCd 1",position:{x:-6.75,y:2.75,z:0},size:{x:6,y:.25,z:1.4},healthPercentage:10},{id:"13f6bb3c-2f62-438e-b1f2-5aea4aff19d1",label:"Br\xFCckenabschnitt S\xFCd 2",position:{x:-13.5,y:2.75,z:0},size:{x:6,y:.25,z:1.4},healthPercentage:43}],healthPercentage:26}];getAll(){return En(this.assets).pipe(Ml(300))}getAsset(e){let i=this.assets.find(r=>r.asset.id===e);return En(i).pipe(Ml(200))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var u8=(()=>{class n{keyPrefix="asset:";TTL_CACHE_MS=30*60*1e3;get(e){let i=this.getRawCached(e);return i&&i.expiresAt>Date.now()?i.value:(this.remove(e),null)}set(e){let i={id:e.asset.id,value:e,expiresAt:Date.now()+this.TTL_CACHE_MS};localStorage.setItem(this.keyPrefix+e.asset.id,JSON.stringify(i))}remove(e){localStorage.removeItem(this.keyPrefix+e)}getAllStoredMeasurements(){return Object.keys(localStorage).filter(e=>e.startsWith(this.keyPrefix)).map(e=>this.getRawCached(e.replace(this.keyPrefix,""))).filter(e=>!!e)}shouldRefreshByAssetId(e){let i=this.getRawCached(e);return!i||i.expiresAt<Date.now()}getRawCached(e){let i=localStorage.getItem(this.keyPrefix+e);if(!i)return null;try{return JSON.parse(i)}catch{return this.remove(e),null}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ll(n,t=3e4){return!n||Date.now()-n>t}function cl(n,t){let e=new Map(n);return e.set(t,Date.now()),e}function tf(n,t){return new Set([...n,t])}function nf(n,t){let e=new Set(n);return e.delete(t),e}function rf(n,t){return new Set([...n,t])}function Fh(n,t){let e=new Set(n);return e.delete(t),e}function Yy(n,t,e){let i=Date.now();for(let r of n)r.expiresAt<i&&!t(r.id)&&e(r.id)}function Zy(n,t){return n.get(t)??[]}function Ky(n,t,e,i){let r=h8(n),s=h8(t);for(let o of i)e.set(o),f8(r,o.assetId).set(o.id,o),f8(s,o.affectedElementId).set(o.id,o);return{byAsset:d8(r),byElement:d8(s)}}function h8(n){let t=new Map;for(let[e,i]of n.entries()){let r=new Map;for(let s of i)r.set(s.id,s);t.set(e,r)}return t}function d8(n){let t=new Map;for(let[e,i]of n.entries())t.set(e,Array.from(i.values()));return t}function f8(n,t){let e=n.get(t);return e||(e=new Map,n.set(t,e)),e}function sf(n){let{storeName:t,objectType:e,objectId:i,lastRefresh:r,storeHasData:s,cacheHasData:o,isStoreOutdated:a,isCacheOutdated:u,ttl:d,ttr:g,trigger:v}=n,x=!a&&s,C=a&&!u&&o,A={timestamp:new Date().toISOString(),store:t,type:"loadDecision",trigger:v??"unspecified",objectType:e,objectId:i,lastRefresh:r?new Date(r).toISOString():null,refreshDueAt:r?new Date(r+d).toISOString():null,ttl:d,ttr:g,storeHasData:s,cacheHasData:o,isStoreOutdated:a,isCacheOutdated:u,action:x?"skip":C?"cache":"api"};console.info(JSON.stringify(A))}var nhe={assets:new Map,loading:new Set,observedAssetIds:new Set,assetTimestamps:new Map},x2=10*60*1e3,p8=3*60*1e3,of=$y({providedIn:"root"},Xy(nhe),qy((n,t=ze(c8),e=ze(u8))=>{let i=(g,v={})=>{if(n.loading().has(g))return;let x=n.assetTimestamps().get(g),C=ll(x,x2),A=e.shouldRefreshByAssetId(g),O=n.assets().has(g),N=e.get(g);if(sf({storeName:"AssetDataStore",objectType:"assetId",objectId:g,lastRefresh:x,storeHasData:O,cacheHasData:!!N,isStoreOutdated:C,isCacheOutdated:A,ttl:x2,ttr:p8,trigger:v.trigger??"unspecified"}),!(!C&&O)){if(C&&N&&!A){Bi(n,{assets:new Map(n.assets()).set(g,N),assetTimestamps:cl(n.assetTimestamps(),g)});return}Bi(n,{loading:tf(n.loading(),g)}),t.getAsset(g).subscribe({next:T=>{if(T){let j=new Map(n.assets()).set(g,T);Bi(n,{assets:j,assetTimestamps:cl(n.assetTimestamps(),g)}),e.set(T)}},complete:()=>{Bi(n,{loading:nf(n.loading(),g)})}})}},r=()=>{t.getAll().subscribe({next:g=>{let v=new Map,x=new Map,C=new Set(n.observedAssetIds());g.forEach(A=>{let O=A.asset.id;v.set(O,A),x.set(O,Date.now()),e.set(A),C.add(O)}),Bi(n,{assets:v,assetTimestamps:x,observedAssetIds:C})}})},s=g=>{Bi(n,{observedAssetIds:rf(n.observedAssetIds(),g)}),i(g,{trigger:"observe"})},o=g=>{Bi(n,{observedAssetIds:Fh(n.observedAssetIds(),g)}),d()},a=()=>{r()},u=g=>{let v=new Set(n.observedAssetIds());g.forEach(x=>v.delete(x)),Bi(n,{observedAssetIds:v}),d()},d=()=>{let g=new Set(n.observedAssetIds());Yy(e.getAllStoredMeasurements(),v=>g.has(v),v=>e.remove(v))};return ji(()=>{Wf(p8).subscribe(()=>{for(let g of n.observedAssetIds()){let v=n.assetTimestamps().get(g);ll(v,x2)&&i(g,{trigger:"interval"})}})}),{getAssetById:g=>cn(()=>n.assets().get(g)),getAllAssets:()=>cn(()=>Array.from(n.assets().values())),observeAsset:s,unobserveAsset:o,observeAllAssets:a,unobserveAssets:u}}));var m8=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function ihe(n){return typeof n=="string"&&m8.test(n)}var g8=ihe;function rhe(n){if(!g8(n))throw TypeError("Invalid UUID");let t;return Uint8Array.of((t=parseInt(n.slice(0,8),16))>>>24,t>>>16&255,t>>>8&255,t&255,(t=parseInt(n.slice(9,13),16))>>>8,t&255,(t=parseInt(n.slice(14,18),16))>>>8,t&255,(t=parseInt(n.slice(19,23),16))>>>8,t&255,(t=parseInt(n.slice(24,36),16))/1099511627776&255,t/4294967296&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255)}var w2=rhe;var fo=[];for(let n=0;n<256;++n)fo.push((n+256).toString(16).slice(1));function y8(n,t=0){return(fo[n[t+0]]+fo[n[t+1]]+fo[n[t+2]]+fo[n[t+3]]+"-"+fo[n[t+4]]+fo[n[t+5]]+"-"+fo[n[t+6]]+fo[n[t+7]]+"-"+fo[n[t+8]]+fo[n[t+9]]+"-"+fo[n[t+10]]+fo[n[t+11]]+fo[n[t+12]]+fo[n[t+13]]+fo[n[t+14]]+fo[n[t+15]]).toLowerCase()}function she(n){n=unescape(encodeURIComponent(n));let t=new Uint8Array(n.length);for(let e=0;e<n.length;++e)t[e]=n.charCodeAt(e);return t}var v8="6ba7b810-9dad-11d1-80b4-00c04fd430c8",_8="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function S2(n,t,e,i,r,s){let o=typeof e=="string"?she(e):e,a=typeof i=="string"?w2(i):i;if(typeof i=="string"&&(i=w2(i)),i?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+o.length);if(u.set(a),u.set(o,a.length),u=t(u),u[6]=u[6]&15|n,u[8]=u[8]&63|128,r){s=s||0;for(let d=0;d<16;++d)r[s+d]=u[d];return r}return y8(u)}function ohe(n,t,e,i){switch(n){case 0:return t&e^~t&i;case 1:return t^e^i;case 2:return t&e^t&i^e&i;case 3:return t^e^i}}function C2(n,t){return n<<t|n>>>32-t}function ahe(n){let t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520],i=new Uint8Array(n.length+1);i.set(n),i[n.length]=128,n=i;let r=n.length/4+2,s=Math.ceil(r/16),o=new Array(s);for(let a=0;a<s;++a){let u=new Uint32Array(16);for(let d=0;d<16;++d)u[d]=n[a*64+d*4]<<24|n[a*64+d*4+1]<<16|n[a*64+d*4+2]<<8|n[a*64+d*4+3];o[a]=u}o[s-1][14]=(n.length-1)*8/Math.pow(2,32),o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=(n.length-1)*8&4294967295;for(let a=0;a<s;++a){let u=new Uint32Array(80);for(let A=0;A<16;++A)u[A]=o[a][A];for(let A=16;A<80;++A)u[A]=C2(u[A-3]^u[A-8]^u[A-14]^u[A-16],1);let d=e[0],g=e[1],v=e[2],x=e[3],C=e[4];for(let A=0;A<80;++A){let O=Math.floor(A/20),N=C2(d,5)+ohe(O,g,v,x)+C+t[O]+u[A]>>>0;C=x,x=v,v=C2(g,30)>>>0,g=d,d=N}e[0]=e[0]+d>>>0,e[1]=e[1]+g>>>0,e[2]=e[2]+v>>>0,e[3]=e[3]+x>>>0,e[4]=e[4]+C>>>0}return Uint8Array.of(e[0]>>24,e[0]>>16,e[0]>>8,e[0],e[1]>>24,e[1]>>16,e[1]>>8,e[1],e[2]>>24,e[2]>>16,e[2]>>8,e[2],e[3]>>24,e[3]>>16,e[3]>>8,e[3],e[4]>>24,e[4]>>16,e[4]>>8,e[4])}var b8=ahe;function M2(n,t,e,i){return S2(80,b8,n,t,e,i)}M2.DNS=v8;M2.URL=_8;var yb=M2;var x8=(()=>{class n{notifications=[...Yn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","Z\xFCrich Br\xFCcke","c35a5f1e-7d3f-41dc-b97f-46aabf8e58e2","Vibration Nord 3",90,"sensor"),...Yn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","Z\xFCrich Br\xFCcke","7f2e8e6c-3e45-49b0-a934-6176c776f518","Vibration Nord 2",95,"sensor"),...Yn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","Z\xFCrich Br\xFCcke","8d7c8894-27c3-4ff4-8e2a-f2c53b8cb48d","Vibration Nord 1",54,"sensor"),...Yn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","Z\xFCrich Br\xFCcke","c95a1c63-1d79-4232-b6f5-e13ad024dca6","Vibration S\xFCd 1",32,"sensor"),...Yn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","Z\xFCrich Br\xFCcke","ebcc62a8-fcef-4df1-984c-7a69222d4382","Vibration S\xFCd 2",41,"sensor"),...Yn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","Z\xFCrich Br\xFCcke","0c3092da-d665-435a-ae1f-530965bd7eae","Vibration S\xFCd 3",69,"sensor"),...Yn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","Z\xFCrich Br\xFCcke","bb5f9422-e40e-4ed6-a6f0-2f2de838f29d","Br\xFCckenabschnitt Nord",90,"section"),...Yn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","Z\xFCrich Br\xFCcke","c6f618b3-f589-401f-9ee7-89fc6e26309a","Br\xFCckenabschnitt Mitte",35,"section"),...Yn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","Z\xFCrich Br\xFCcke","a12c4ad7-ff63-47e5-9c5b-1e9a3ec4cf69","Br\xFCckenabschnitt S\xFCd",66,"section"),...Yn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","2aea7dd9-2074-4cb9-a3ac-5f51d5b92802","Vibration Nord 1",10,"sensor"),...Yn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","f8a21e91-fd14-4b4e-91ec-2c30b376d2e6","Vibration Nord 2",30,"sensor"),...Yn("e7d8a5e0-bbc4-406d-87c4-69f28eb0308e","Kirchenfeldbr\xFCcke","b2d8a5e0-bbc4-406d-87c4-69f28eb0308e","Vibration Nord 3",65,"sensor"),...Yn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","7b95a642-e580-4a7c-8d39-bb8d81c3fbd6","Vibration Mitte 1",85,"sensor"),...Yn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","64099e36-0d5a-4c33-95a1-4f6e879c4076","Vibration Mitte 2",90,"sensor"),...Yn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","b244e9cf-71ca-4c5d-a36f-2203579b90f5","Vibration S\xFCd 1",100,"sensor"),...Yn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","d5cf89c8-5dc3-4b58-aef2-d2a7be012220","Br\xFCckenabschnitt Nord",17,"section"),...Yn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","edc90d04-f305-49b6-9292-1745c3bba54a","Br\xFCckenabschnitt Mitte",50,"section"),...Yn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","Kirchenfeldbr\xFCcke","27d926da-ea7d-4bf1-8487-b78970613dc0","Br\xFCckenabschnitt S\xFCd",90,"section"),...Yn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","bc9b5730-24a0-46a5-8c11-757f8f85b412","Vibration S\xFCd",89,"sensor"),...Yn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","8c74b44e-1a9c-4a55-8f6b-83f4767763c5","Temperatur S\xFCd",96,"sensor"),...Yn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","f8226eaf-9b56-45c7-9988-84d84892e0b7","Vibration Mitte",91,"sensor"),...Yn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","b7cddbb1-d234-46f7-9a5d-0dfcd9de29d1","Neigung Mitte",93,"sensor"),...Yn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","02cda3a6-dc27-4f12-82df-f6b3882e946e","Strukturspannung Nord",89,"sensor"),...Yn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","e7fec506-2608-45f8-85b3-1bc3364adbea","Strukturspannung Nord",99,"sensor"),...Yn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","dd2e9308-9913-4db0-9c0d-453fb6d4fa57","Section West",89,"section"),...Yn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","abe09045-5c0d-47ae-9d88-2d77b2f5cb0d","Section Middle",92,"section"),...Yn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","Pont du Mont-Blanc","dbb287d5-eeb3-49e5-a2c8-76a4d927e7b1","Section East",91,"section"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","62f5a029-5bd7-41a5-9426-2a59c97b5b79","Vibration Pillar 1",96,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","587c6f1b-6fd0-473c-b2c0-6c6f0eb1eab0","Vibration Pillar 1",92,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","5b096a9b-c03e-4513-acc7-a5c18cd5b3d7","Vibration Nord 2",91,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","d38db80c-8567-4fc9-9934-175d3633a180","Vibration Pillar 2",56,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","9e7168fa-e08d-4585-b628-2aeead4878a4","Vibration Pillar 2",81,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","7ba7721b-f40b-4f29-9b54-a1a0bad98041","Vibration Nord 1",57,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","781c100f-aeef-4122-8422-3bc0ac52de27","Vibration Pillar 3",54,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","c9c52881-c258-4c73-85ac-fe7d10ed1899","Vibration Pillar 3",36,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","ba71dce3-590c-4bea-9c93-1e642dcf505d","Vibration Middle",19,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","23c554a6-1e2c-42b0-8a6a-d24f83998706","Vibration Pillar 4",15,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","0d7c0706-fbbc-4465-92b7-3f2593e00b53","Vibration Pillar 4",27,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","786b66ff-2f76-4bed-82ed-7751c41464e4","Vibration South 1",19,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","335d5120-79e5-4627-9bea-dd55d6d3540d","Vibration Pillar 5",24,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","e56e66f9-1d4d-423a-81c7-5f5e830d8ba9","Vibration Pillar 5",46,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","692d084e-9e3b-4014-909d-7137f04e204c","Vibration South 2",66,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","3d0ae4e7-62d4-41fd-875f-e88661c8c87b","Vibration Pillar 6",82,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","a7ebd388-7a9c-4d98-be79-7466dc09d36c","Vibration Pillar 6",83,"sensor"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","b4154364-c857-44c9-a2f4-cd7d79933ccb","Br\xFCckenabschnitt Nord 2",86,"section"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","4c6d95d5-329b-4c9f-9fba-e9786160cf67","Br\xFCckenabschnitt Nord 1",63,"section"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","fd121158-cb75-4557-a90a-4196065a8c6b","Br\xFCckenabschnitt Mitte",16,"section"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","f5be79bb-20d2-4b04-b4d4-2cef294506c7","Br\xFCckenabschnitt S\xFCd 1",10,"section"),...Yn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","Mittlere Br\xFCcke","13f6bb3c-2f62-438e-b1f2-5aea4aff19d1","Br\xFCckenabschnitt S\xFCd 2",43,"section")];getAll(){return En(this.notifications.sort((e,i)=>i.dateTime.getTime()-e.dateTime.getTime())).pipe(Ml(300))}getById(e){return En(this.notifications.find(i=>i.id===e)).pipe(Ml(200))}getByAssetId(e){return En(this.notifications.filter(i=>i.assetId===e).sort((i,r)=>r.dateTime.getTime()-i.dateTime.getTime())).pipe(Ml(200))}getAllByElementId(e){return En(this.notifications.filter(i=>i.affectedElementId===e).sort((i,r)=>r.dateTime.getTime()-i.dateTime.getTime())).pipe(Ml(200))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lhe="82d49e3d-aa71-4750-ad6a-3defa50cd166";function che(n){let t=n%2147483647;return()=>(t=t*16807%2147483647,(t-1)/2147483646)}function Yn(n,t,e,i,r,s,o=20){let a=[],u=new Date,d=`${n}-${e}`,g=Array.from(d).reduce((x,C)=>x+C.charCodeAt(0),0),v=che(g);for(let x=0;x<o;x++){let C=x*1.5,A=new Date(u);A.setDate(u.getDate()-Math.floor(C)),A.setHours(Math.floor(v()*24)),A.setMinutes(Math.floor(v()*60)),A.setSeconds(Math.floor(v()*60));let O=v(),N=uhe(r,O),j={id:yb(`${d}-${x}`,lhe),status:N,dateTime:A,asset:t,assetId:n,affectedElement:i,affectedElementId:e,affectedElementType:s,notification:hhe(N,s,O)};a.push(j)}return a}function uhe(n,t){return n>75?t>.7?"warn":"healthy":n>50?t<.33?"critical":t<.66?"warn":"healthy":t<.5?"critical":"warn"}function hhe(n,t,e){let i=Math.floor(e*100);if(n==="healthy")if(t==="sensor"){let r=["All sensor readings remain stable and within expected parameters.","No irregularities detected in current sensor output.","Sensor performance is consistent and nominal.","No anomalies found in recent vibration measurements.","Sensor shows stable trends over time."];return r[i%r.length]}else{let r=["Structural metrics are consistent across all sections.","All section-related sensors report normal conditions.","No deviations found in structural behavior.","Span performance remains within safe operational bounds.","Current stress levels are within normal limits."];return r[i%r.length]}if(n==="warn")if(t==="sensor"){let r=["Sporadic anomalies detected in vibration data.","Sensor reported values approaching warning threshold.","Elevated motion patterns observed during traffic peaks.","Sensor readings fluctuate slightly outside average baseline.","Short bursts of increased acceleration detected recently."];return r[i%r.length]}else{let r=["Minor displacement patterns observed in the span.","Section exhibits slight structural inconsistencies.","Recent load patterns suggest early deformation signs.","Deviations from baseline strain profile require review.","Sensor correlation indicates possible section imbalance."];return r[i%r.length]}if(t==="sensor"){let r=["Critical deviation detected in acceleration metrics.","Sensor reports extreme values beyond safety thresholds.","Detected instability suggests potential structural failure.","Dangerous vibration amplitude identified in recent measurements.","Sensor readings indicate immediate inspection is required."];return r[i%r.length]}else{let r=["Critical strain values detected across multiple sections.","Span stability compromised based on combined sensor data.","Section under severe mechanical stress. Immediate response needed.","Structural failure indicators observed in recent readings.","Urgent attention required due to escalating structural anomalies."];return r[i%r.length]}}var w8=(()=>{class n{keyPrefix="notification:";assetPrefix="notification-of-asset:";elementPrefix="notification-of-element:";TTL_CACHE_MS=60*1e3;get(e){let i=localStorage.getItem(this.keyPrefix+e);if(!i)return null;try{let r=JSON.parse(i);return r.expiresAt>Date.now()?r.value:(this.remove(e),null)}catch{return this.remove(e),null}}set(e){let i={id:e.id,value:e,expiresAt:Date.now()+this.TTL_CACHE_MS};localStorage.setItem(this.keyPrefix+e.id,JSON.stringify(i)),this.appendToIndex(this.assetPrefix+e.assetId,e.id),e.affectedElementId&&this.appendToIndex(this.elementPrefix+e.affectedElementId,e.id)}getAllByAssetId(e){return this.getAllIdsForAssetId(e).map(i=>this.get(i)).filter(i=>!!i)}getAllByElementId(e){return this.getAllIdsForElementId(e).map(i=>this.get(i)).filter(i=>!!i)}getAllIdsForAssetId(e){return this.getIdsFromIndex(this.assetPrefix+e)}getAllIdsForElementId(e){return this.getIdsFromIndex(this.elementPrefix+e)}getAllStoredNotificationIds(){let e=[];for(let i=0;i<localStorage.length;i++){let r=localStorage.key(i);r&&r.startsWith(this.keyPrefix)&&e.push(r.replace(this.keyPrefix,""))}return e}getAllStoredNotifications(){return this.getAllStoredNotificationIds().map(e=>{let i=localStorage.getItem(this.keyPrefix+e);if(!i)return null;try{return JSON.parse(i)}catch{return null}}).filter(e=>!!e)}shouldRefreshByAssetId(e){let i=this.getAllIdsForAssetId(e).map(r=>this.getRawCached(r)).filter(r=>!!r);return i.length?i.some(r=>r.expiresAt<Date.now()):!0}shouldRefreshByElementId(e){let i=this.getAllIdsForElementId(e).map(r=>this.getRawCached(r)).filter(r=>!!r);return i.length?i.some(r=>r.expiresAt<Date.now()):!0}remove(e){localStorage.removeItem(this.keyPrefix+e)}getRawCached(e){let i=localStorage.getItem(this.keyPrefix+e);if(!i)return null;try{return JSON.parse(i)}catch{return null}}appendToIndex(e,i){let r=localStorage.getItem(e),s;try{s=r?JSON.parse(r):[]}catch{s=[]}s.includes(i)||(s.push(i),localStorage.setItem(e,JSON.stringify(s)))}getIdsFromIndex(e){let i=localStorage.getItem(e);try{let r=i?JSON.parse(i):[];return Array.isArray(r)?r:[]}catch{return[]}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dhe={notificationsByAssetId:new Map,notificationsByElementId:new Map,loading:new Set,observedAssetIds:new Set,observedElementIds:new Set,assetTimestamps:new Map,elementTimestamps:new Map},Qy=5*60*1e3,E2=30*1e3,V1=$y({providedIn:"root"},Xy(dhe),qy((n,t=ze(x8),e=ze(w8))=>{function i(x,C={}){if(n.loading().has(x))return;let A=n.assetTimestamps().get(x),O=ll(A,Qy),N=e.shouldRefreshByAssetId(x),T=!!n.notificationsByAssetId().get(x)?.length,j=!!e.getAllByAssetId(x).length;if(sf({storeName:"NotificationDataStore",objectType:"assetId",objectId:x,lastRefresh:A,storeHasData:T,cacheHasData:j,isStoreOutdated:O,isCacheOutdated:N,ttl:Qy,ttr:E2,trigger:C.trigger??"unspecified"}),!(!O&&T)){if(O&&!N&&j){Bi(n,{notificationsByAssetId:new Map(n.notificationsByAssetId()).set(x,e.getAllByAssetId(x)),assetTimestamps:cl(n.assetTimestamps(),x)});return}Bi(n,{loading:tf(n.loading(),x)}),t.getByAssetId(x).subscribe({next:Z=>{let{byAsset:$,byElement:le}=Ky(n.notificationsByAssetId(),n.notificationsByElementId(),e,Z);Bi(n,{notificationsByAssetId:$,notificationsByElementId:le,assetTimestamps:cl(n.assetTimestamps(),x)})},complete:()=>{Bi(n,{loading:nf(n.loading(),x)})}})}}function r(x,C={}){if(n.loading().has(x))return;let A=n.elementTimestamps().get(x),O=ll(A,Qy),N=e.shouldRefreshByElementId(x),T=!!n.notificationsByElementId().get(x)?.length,j=!!e.getAllByElementId(x).length;if(sf({storeName:"NotificationDataStore",objectType:"elementId",objectId:x,lastRefresh:A,storeHasData:T,cacheHasData:j,isStoreOutdated:O,isCacheOutdated:N,ttl:Qy,ttr:E2,trigger:C.trigger??"unspecified"}),!(!O&&T)){if(O&&!N&&j){Bi(n,{notificationsByElementId:new Map(n.notificationsByElementId()).set(x,e.getAllByElementId(x)),elementTimestamps:cl(n.elementTimestamps(),x)});return}Bi(n,{loading:tf(n.loading(),x)}),t.getAllByElementId(x).subscribe({next:Z=>{let{byAsset:$,byElement:le}=Ky(n.notificationsByAssetId(),n.notificationsByElementId(),e,Z);Bi(n,{notificationsByAssetId:$,notificationsByElementId:le,elementTimestamps:cl(n.elementTimestamps(),x)})},complete:()=>{Bi(n,{loading:nf(n.loading(),x)})}})}}function s(x){Bi(n,{observedAssetIds:rf(n.observedAssetIds(),x)}),i(x,{trigger:"observe"})}function o(x){Bi(n,{observedAssetIds:Fh(n.observedAssetIds(),x)}),v()}function a(x){let C=new Set(n.observedAssetIds());x.forEach(A=>C.add(A)),Bi(n,{observedAssetIds:C});for(let A of x)i(A)}function u(x){let C=n.observedAssetIds();for(let A of x)C=Fh(C,A);Bi(n,{observedAssetIds:C}),v()}function d(x){Bi(n,{observedElementIds:rf(n.observedElementIds(),x)}),r(x,{trigger:"observe"})}function g(x){Bi(n,{observedElementIds:Fh(n.observedElementIds(),x)}),v()}function v(){let x=new Set;for(let C of n.observedAssetIds())for(let A of e.getAllIdsForAssetId(C))x.add(A);for(let C of n.observedElementIds())for(let A of e.getAllIdsForElementId(C))x.add(A);Yy(e.getAllStoredNotifications(),C=>x.has(C),C=>e.remove(C))}return ji(()=>{Wf(E2).subscribe(()=>{for(let x of n.observedAssetIds()){let C=n.assetTimestamps().get(x);ll(C,Qy)&&i(x,{trigger:"interval"})}for(let x of n.observedElementIds()){let C=n.elementTimestamps().get(x);ll(C,Qy)&&r(x,{trigger:"interval"})}})}),{getAllNotifications:()=>cn(()=>{let x=new Map;for(let C of n.notificationsByAssetId().values())for(let A of C)x.set(A.id,A);return Array.from(x.values())}),getAllByAssetId:x=>cn(()=>Zy(n.notificationsByAssetId(),x)),getAllByElementId:x=>cn(()=>Zy(n.notificationsByElementId(),x)),isLoading:x=>cn(()=>n.loading().has(x)),observeAsset:s,unobserveAsset:o,observeAssets:a,unobserveAssets:u,observeElement:d,unobserveElement:g}}));var S8=(()=>{class n{measurements=[...Zn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","c35a5f1e-7d3f-41dc-b97f-46aabf8e58e2",90,"sensor"),...Zn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","7f2e8e6c-3e45-49b0-a934-6176c776f518",95,"sensor"),...Zn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","8d7c8894-27c3-4ff4-8e2a-f2c53b8cb48d",54,"sensor"),...Zn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","c95a1c63-1d79-4232-b6f5-e13ad024dca6",32,"sensor"),...Zn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","ebcc62a8-fcef-4df1-984c-7a69222d4382",41,"sensor"),...Zn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","0c3092da-d665-435a-ae1f-530965bd7eae",69,"sensor"),...Zn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","bb5f9422-e40e-4ed6-a6f0-2f2de838f29d",90,"aggregated"),...Zn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","c6f618b3-f589-401f-9ee7-89fc6e26309a",35,"aggregated"),...Zn("1b3d7b28-4e85-4ec0-9347-3c05ce09373a","a12c4ad7-ff63-47e5-9c5b-1e9a3ec4cf69",66,"aggregated"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","2aea7dd9-2074-4cb9-a3ac-5f51d5b92802",10,"sensor"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","f8a21e91-fd14-4b4e-91ec-2c30b376d2e6",30,"sensor"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","b2d8a5e0-bbc4-406d-87c4-69f28eb0308e",65,"sensor"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","7b95a642-e580-4a7c-8d39-bb8d81c3fbd6",85,"sensor"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","64099e36-0d5a-4c33-95a1-4f6e879c4076",90,"sensor"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","b244e9cf-71ca-4c5d-a36f-2203579b90f5",100,"sensor"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","d5cf89c8-5dc3-4b58-aef2-d2a7be012220",17,"aggregated"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","edc90d04-f305-49b6-9292-1745c3bba54a",50,"aggregated"),...Zn("e7d8f580-9a6e-49f3-968b-e987c26f6ab9","27d926da-ea7d-4bf1-8487-b78970613dc0",90,"aggregated"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","bc9b5730-24a0-46a5-8c11-757f8f85b412",89,"sensor"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","8c74b44e-1a9c-4a55-8f6b-83f4767763c5",96,"sensor"),...Zn("8b9db78b-dfd4-4f12-82df-f6b3882e946e","f8226eaf-9b56-45c7-9988-84d84892e0b7",91,"sensor"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","b7cddbb1-d234-46f7-9a5d-0dfcd9de29d1",93,"sensor"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","02cda3a6-dc27-4f12-82df-f6b3882e946e",89,"sensor"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","e7fec506-2608-45f8-85b3-1bc3364adbea",99,"sensor"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","dd2e9308-9913-4db0-9c0d-453fb6d4fa57",89,"aggregated"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","abe09045-5c0d-47ae-9d88-2d77b2f5cb0d",92,"aggregated"),...Zn("8b9db78b-dfd4-4d2e-9f8c-59db0c9c2470","dbb287d5-eeb3-49e5-a2c8-76a4d927e7b1",91,"aggregated"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","62f5a029-5bd7-41a5-9426-2a59c97b5b79",96,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","587c6f1b-6fd0-473c-b2c0-6c6f0eb1eab0",92,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","5b096a9b-c03e-4513-acc7-a5c18cd5b3d7",91,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","d38db80c-8567-4fc9-9934-175d3633a180",56,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","9e7168fa-e08d-4585-b628-2aeead4878a4",81,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","7ba7721b-f40b-4f29-9b54-a1a0bad98041",57,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","781c100f-aeef-4122-8422-3bc0ac52de27",54,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","c9c52881-c258-4c73-85ac-fe7d10ed1899",36,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","ba71dce3-590c-4bea-9c93-1e642dcf505d",19,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","23c554a6-1e2c-42b0-8a6a-d24f83998706",15,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","0d7c0706-fbbc-4465-92b7-3f2593e00b53",27,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","786b66ff-2f76-4bed-82ed-7751c41464e4",19,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","335d5120-79e5-4627-9bea-dd55d6d3540d",24,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","e56e66f9-1d4d-423a-81c7-5f5e830d8ba9",46,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","692d084e-9e3b-4014-909d-7137f04e204c",66,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","3d0ae4e7-62d4-41fd-875f-e88661c8c87b",82,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","a7ebd388-7a9c-4d98-be79-7466dc09d36c",83,"sensor"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","b4154364-c857-44c9-a2f4-cd7d79933ccb",86,"aggregated"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","4c6d95d5-329b-4c9f-9fba-e9786160cf67",63,"aggregated"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","fd121158-cb75-4557-a90a-4196065a8c6b",16,"aggregated"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","f5be79bb-20d2-4b04-b4d4-2cef294506c7",10,"aggregated"),...Zn("b7a2c8a5-eec2-4a37-a2f5-f75e9d1f49a7","13f6bb3c-2f62-438e-b1f2-5aea4aff19d1",43,"aggregated")];getByAssetId(e){let i=this.measurements.filter(r=>r.assetId===e);return En(i).pipe(Ml(200))}getAllByElementId(e){let i=this.measurements.filter(r=>r.affectedElementId===e);return En(i).pipe(Ml(200))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fhe="6ba7b810-9dad-11d1-80b4-00c04fd430c8";function phe(n){let t=n%2147483647;return()=>(t=t*16807%2147483647,(t-1)/2147483646)}function Zn(n,t,e,i="sensor"){let s=100-e,o=new Date,a=`${n}-${t}`,u=Array.from(a).reduce((g,v)=>g+v.charCodeAt(0),0),d=phe(u);return Array.from({length:180},(g,v)=>{let x=180-v,C=new Date(o);C.setDate(o.getDate()-x);let A=s+20/180*v,N=Math.pow(1.015,v+s)*(d()-.5),T=Math.round((A+N)*10)/10;return{id:yb(`${a}-${v}`,fhe),dateTime:C,assetId:n,affectedElementId:t,affectedElementType:i,value:T}})}var C8=(()=>{class n{keyPrefix="measurement:";assetPrefix="measurement-of-asset:";elementPrefix="measurement-of-element:";TTL_CACHE_MS=5*60*1e3;get(e){let i=localStorage.getItem(this.keyPrefix+e);if(!i)return null;try{let r=JSON.parse(i);return r.expiresAt>Date.now()?r.value:(this.remove(e),null)}catch{return this.remove(e),null}}set(e){let i={id:e.id,value:e,expiresAt:Date.now()+this.TTL_CACHE_MS};localStorage.setItem(this.keyPrefix+e.id,JSON.stringify(i)),this.appendToIndex(this.assetPrefix+e.assetId,e.id),e.affectedElementId&&this.appendToIndex(this.elementPrefix+e.affectedElementId,e.id)}getAllByAsset(e){return this.getAllIdsForAsset(e).map(i=>this.get(i)).filter(i=>!!i)}getAllByElement(e){return this.getAllIdsForElement(e).map(i=>this.get(i)).filter(i=>!!i)}getAllIdsForAsset(e){return this.getIdsFromIndex(this.assetPrefix+e)}getAllIdsForElement(e){return this.getIdsFromIndex(this.elementPrefix+e)}getAllStoredMeasurementIds(){let e=[];for(let i=0;i<localStorage.length;i++){let r=localStorage.key(i);r&&r.startsWith(this.keyPrefix)&&e.push(r.replace(this.keyPrefix,""))}return e}getAllStoredMeasurements(){return this.getAllStoredMeasurementIds().map(e=>{let i=localStorage.getItem(this.keyPrefix+e);if(!i)return null;try{return JSON.parse(i)}catch{return null}}).filter(e=>!!e)}shouldRefreshByElementId(e){let i=this.getAllIdsForElement(e).map(r=>this.getRawCached(r)).filter(r=>!!r);return i.length?i.some(r=>r.expiresAt<Date.now()):!0}shouldRefreshByAssetId(e){let i=this.getAllIdsForAsset(e).map(r=>this.getRawCached(r)).filter(r=>!!r);return i.length?i.some(r=>r.expiresAt<Date.now()):!0}getRawCached(e){let i=localStorage.getItem(this.keyPrefix+e);if(!i)return null;try{return JSON.parse(i)}catch{return null}}remove(e){localStorage.removeItem(this.keyPrefix+e)}appendToIndex(e,i){let r=localStorage.getItem(e),s;try{s=r?JSON.parse(r):[]}catch{s=[]}s.includes(i)||(s.push(i),localStorage.setItem(e,JSON.stringify(s)))}getIdsFromIndex(e){let i=localStorage.getItem(e);try{let r=i?JSON.parse(i):[];return Array.isArray(r)?r:[]}catch{return[]}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mhe={measurementsByAssetId:new Map,measurementsByElementId:new Map,loading:new Set,observedAssetIds:new Set,observedElementIds:new Set,assetTimestamps:new Map,elementTimestamps:new Map},T2=2*60*1e3,A2=10*1e3,M8=$y({providedIn:"root"},Xy(mhe),qy((n,t=ze(S8),e=ze(C8))=>{function i(g,v={}){if(n.loading().has(g))return;let x=n.assetTimestamps().get(g),C=ll(x,T2),A=e.shouldRefreshByAssetId(g),O=!!n.measurementsByAssetId().get(g)?.length,N=!!e.getAllByAsset(g).length;if(sf({storeName:"MeasurementDataStore",objectType:"assetId",objectId:g,lastRefresh:x,storeHasData:O,cacheHasData:N,isStoreOutdated:C,isCacheOutdated:A,ttl:T2,ttr:A2,trigger:v.trigger??"unspecified"}),!(!C&&O)){if(C&&!A&&N){Bi(n,{measurementsByAssetId:new Map(n.measurementsByAssetId()).set(g,e.getAllByAsset(g)),assetTimestamps:cl(n.assetTimestamps(),g)});return}Bi(n,{loading:tf(n.loading(),g)}),t.getByAssetId(g).subscribe({next:T=>{let{byAsset:j,byElement:Z}=Ky(n.measurementsByAssetId(),n.measurementsByElementId(),e,T);Bi(n,{measurementsByAssetId:j,measurementsByElementId:Z,assetTimestamps:cl(n.assetTimestamps(),g)})},complete:()=>{Bi(n,{loading:nf(n.loading(),g)})}})}}function r(g,v={}){if(n.loading().has(g)){console.log(`[loadByElementId] SKIP: Already loading: ${g}`);return}let x=n.elementTimestamps().get(g),C=ll(x),A=e.shouldRefreshByElementId(g),O=!!n.measurementsByElementId().get(g)?.length,N=!!e.getAllByElement(g).length;if(sf({storeName:"MeasurementDataStore",objectType:"elementId",objectId:g,lastRefresh:x,storeHasData:O,cacheHasData:N,isStoreOutdated:C,isCacheOutdated:A,ttl:T2,ttr:A2,trigger:v.trigger??"unspecified"}),!(!C&&O)){if(C&&!A&&N){Bi(n,{measurementsByElementId:new Map(n.measurementsByElementId()).set(g,e.getAllByElement(g)),elementTimestamps:cl(n.elementTimestamps(),g)});return}Bi(n,{loading:tf(n.loading(),g)}),t.getAllByElementId(g).subscribe({next:T=>{let{byAsset:j,byElement:Z}=Ky(n.measurementsByAssetId(),n.measurementsByElementId(),e,T);Bi(n,{measurementsByAssetId:j,measurementsByElementId:Z,elementTimestamps:cl(n.elementTimestamps(),g)})},complete:()=>{Bi(n,{loading:nf(n.loading(),g)})}})}}function s(g){Bi(n,{observedAssetIds:rf(n.observedAssetIds(),g)}),i(g,{trigger:"observe"})}function o(g){Bi(n,{observedAssetIds:Fh(n.observedAssetIds(),g)}),d()}function a(g){Bi(n,{observedElementIds:rf(n.observedElementIds(),g)}),r(g,{trigger:"observe"})}function u(g){Bi(n,{observedElementIds:Fh(n.observedElementIds(),g)}),d()}function d(){let g=new Set;for(let v of n.observedAssetIds())for(let x of e.getAllIdsForAsset(v))g.add(x);for(let v of n.observedElementIds())for(let x of e.getAllIdsForElement(v))g.add(x);Yy(e.getAllStoredMeasurements(),v=>g.has(v),v=>e.remove(v))}return ji(()=>{Wf(A2).subscribe(()=>{for(let g of n.observedAssetIds()){let v=n.assetTimestamps().get(g);ll(v)&&i(g,{trigger:"interval"})}for(let g of n.observedElementIds()){let v=n.elementTimestamps().get(g);ll(v)&&r(g,{trigger:"interval"})}})}),{getAllByAssetId:g=>cn(()=>Zy(n.measurementsByAssetId(),g)),getAllByElementId:g=>cn(()=>Zy(n.measurementsByElementId(),g)),isLoading:g=>cn(()=>n.loading().has(g)),observeAsset:s,unobserveAsset:o,observeElement:a,unobserveElement:u}}));var vb=class{assetStore=ze(of);notificationStore=ze(V1);selectedAssetId=mn(void 0);availableAssets=cn(()=>this.assetStore.getAllAssets()().map(t=>t.asset));isAssetSelected=cn(()=>!!this.selectedAssetId());notifications=cn(()=>{let t=this.selectedAssetId();return t?this.notificationStore.getAllByAssetId(t)():this.notificationStore.getAllNotifications()()});constructor(){this.assetStore.observeAllAssets();let t,e=[];ji(()=>{let i=this.selectedAssetId(),r=this.availableAssets().map(a=>a.id).sort(),s=r.join(","),o=e.join(",");i?t!==i&&(t&&this.notificationStore.unobserveAsset(t),e.length&&(this.notificationStore.unobserveAssets(e),e=[]),this.notificationStore.observeAsset(i),t=i):s!==o&&(e.length&&this.notificationStore.unobserveAssets(e),t&&(this.notificationStore.unobserveAsset(t),t=void 0),this.notificationStore.observeAssets(r),e=r)})}};var D2=(()=>{class n{store=ze(vb);router=ze(co);route=ze(lo);selectedAssetId=this.store.selectedAssetId;availableAssets=this.store.availableAssets;notifications=this.store.notifications;isAssetSelected=this.store.isAssetSelected;breadCrumbs=mn([{type:"SIMPLE_BREADCRUMB",icon:Nl,text:"Notifications"}]);ngOnInit(){let e=this.route.snapshot.paramMap.get("id")??void 0;this.store.selectedAssetId.set(e),this.router.events.subscribe(i=>{if(i instanceof tl){let r=this.route.snapshot.paramMap.get("id")??void 0;this.store.selectedAssetId.set(r)}}),this.breadCrumbs.set([...this.breadCrumbs(),{type:"ASSET_SELECTOR_BREADCRUMB",allowAllAssets:!0,initialValue:this.availableAssets().find(i=>i.id===e)}])}changeUrlToLocation(e){this.router.navigateByUrl(e===Qg.id?"/notifications":`/notifications/${e}`)}navigateToElement(e){this.router.navigate(["assets",e.assetId,e.affectedElementType,e.affectedElementId])}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-alarm-overview"]],features:[So([vb])],decls:7,vars:5,consts:[["id","notification-overview-container"],[1,"text-4xl","mb-1","font-extrabold","leading-none","tracking-tight","text-gray-900","md:text-5xl","lg:text-6xl"],[1,"text-lg","mb-4","font-normal","text-gray-500","lg:text-xl"],[1,"block","relative","mb-4",3,"selectAssetEffect","crumbs","availableAssets","onAssetSelection"],[3,"notificationClickAction","notifications","hideAssetInfo"]],template:function(i,r){i&1&&(ge(0,"div",0)(1,"h1",1),ot(2," Notification Overview"),ye(),ge(3,"p",2),ot(4,"Notifications Regarding Bridge Health or Sensor Measurements"),ye(),ge(5,"lib-breadcrumb",3),bt("selectAssetEffect",function(o){return r.changeUrlToLocation(o.id)}),ye(),ge(6,"lib-notification-table",4),bt("notificationClickAction",function(o){return r.navigateToElement(o)}),ye()()),i&2&&(xe(5),Ne("crumbs",r.breadCrumbs())("availableAssets",r.availableAssets())("onAssetSelection",r.selectedAssetId),xe(),Ne("notifications",r.notifications())("hideAssetInfo",r.isAssetSelected()))},dependencies:[Nt,Tu,TC,bC],styles:["@media (min-width: 600px){#notification-overview-container[_ngcontent-%COMP%]{padding:min(10%,3rem)}}@media (max-width: 599px){#notification-overview-container[_ngcontent-%COMP%]{padding:2rem 1rem}}"]})}return n})();var E8=(()=>{class n{router;store=ze(of);assetHealthInformation=this.store.getAllAssets();assetFilter=mn(wC);filteredAssets=cn(()=>this.assetHealthInformation().map(e=>Mn(Je({},e),{healthStatus:Qp(e.healthPercentage)})).filter(this.assetFilter()));allAssetNames=cn(()=>this.assetHealthInformation().map(e=>e.asset.name));assetLocations=cn(()=>this.filteredAssets().map(e=>this.assetHealthInformationToAssetMapLocation(e)));assetHealthCardData=cn(()=>this.filteredAssets().map(e=>this.assetHealthCardDataFromHealthData(e)));currentLocation=mn(void 0);constructor(e){this.router=e;let i=ze(lo);this.store.observeAllAssets(),ji(()=>{let r=i.snapshot.queryParamMap.get("asset-id");r&&(this.navigateToLocationOfId(r),this.router.navigate([],{relativeTo:i,queryParamsHandling:"replace",replaceUrl:!0}))})}navigateToLocationOfId(e){this.currentLocation.set(this.assetLocations().find(i=>i.id===e))}assetHealthCardDataFromHealthData(e){let{id:i,name:r,type:s,description:o}=e.asset;return{id:i,name:r,type:s,description:o,healthPercentage:e.healthPercentage}}assetHealthInformationToAssetMapLocation(e){return{id:e.asset.id,lat:e.asset.location.lat,lng:e.asset.location.lng,name:e.asset.name,type:e.asset.type,description:e.asset.description,healthPercentage:e.healthPercentage,state:Qp(e.healthPercentage)}}navigateToDetailViewForId(e){this.router.navigate(["assets",e])}static \u0275fac=function(i){return new(i||n)(Nn(co))};static \u0275cmp=_t({type:n,selectors:[["lib-asset-overview"]],decls:5,vars:4,consts:[[1,"asset-overview-container","h-full"],[1,"absolute","top-0","z-10","w-full","flex","justify-center","p-2"],[1,"asset-filter","relative","top-0","z-40",3,"filter","availableAssetNames"],[3,"locations","currentLocation"],[3,"navigateToAssetOfId","accessAssetDetailViewForId","assetHealthData"]],template:function(i,r){i&1&&(ge(0,"div",0)(1,"div",1)(2,"lib-asset-filter",2),bt("filter",function(o){return r.assetFilter.set(o)}),ye()(),tt(3,"lib-asset-map",3),ge(4,"lib-asset-health-card-carousel",4),bt("navigateToAssetOfId",function(o){return r.navigateToLocationOfId(o)})("accessAssetDetailViewForId",function(o){return r.navigateToDetailViewForId(o)}),ye()()),i&2&&(xe(2),Ne("availableAssetNames",r.allAssetNames()),xe(),Ne("locations",r.assetLocations())("currentLocation",r.currentLocation()),xe(),Ne("assetHealthData",r.assetHealthCardData()))},dependencies:[Nt,BH,UH,KU],styles:[".asset-overview-container[_ngcontent-%COMP%]{position:relative}.asset-filter[_ngcontent-%COMP%]{max-width:30rem;width:100%}"]})}return n})();function I2(n,t){let e=!t?.manualCleanup;e&&!t?.injector&&_v(I2);let i=e?t?.injector?.get(Dl)??ze(Dl):null,r=ghe(t?.equal),s;t?.requireSync?s=mn({kind:0},{equal:r}):s=mn({kind:1,value:t?.initialValue},{equal:r});let o,a=n.subscribe({next:u=>s.set({kind:1,value:u}),error:u=>{if(t?.rejectErrors)throw u;s.set({kind:2,error:u})},complete:()=>{o?.()}});if(t?.requireSync&&s().kind===0)throw new St(601,!1);return o=i?.onDestroy(a.unsubscribe.bind(a)),cn(()=>{let u=s();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new St(601,!1)}},{equal:t?.equal})}function ghe(n=Object.is){return(t,e)=>t.kind===1&&e.kind===1&&n(t.value,e.value)}var _b=class{route=ze(lo);location=ze(xu);assetStore=ze(of);notificationStore=ze(V1);measurementStore=ze(M8);assetId=mn(null);elementId=mn(null);detailType=mn("section");assetHealthDetail=mn(null);assetHealth=cn(()=>{let t=this.assetId();return t?this.assetStore.getAssetById(t)():void 0});elementNotifications=cn(()=>{let t=this.elementId();return t?this.notificationStore.getAllByElementId(t)().slice(0,3):[]});elementMeasurements=cn(()=>{let t=this.elementId();return t?this.measurementStore.getAllByElementId(t)().map(e=>({timestamp:new Date(e.dateTime??Date.now()).toISOString(),value:e.value})):[]});constructor(){this.assetStore.observeAllAssets();let t=I2(this.route.paramMap.pipe(Ei(r=>r.get("id"))));ji(()=>this.assetId.set(t()??null));let e=null;ji(()=>{let r=this.assetId();!r||r===e||(e&&(this.notificationStore.unobserveAsset(e),this.measurementStore.unobserveAsset(e)),this.notificationStore.observeAsset(r),this.measurementStore.observeAsset(r),e=r)});let i=null;ji(()=>{let r=this.elementId();!r||r===i||(i&&(this.notificationStore.unobserveElement(i),this.measurementStore.unobserveElement(i)),this.notificationStore.observeElement(r),this.measurementStore.observeElement(r),i=r)})}showSidebar(t,e,i,r){this.detailType.set(e),this.elementId.set(t),this.assetHealthDetail.set({name:i,healthStatus:r})}closeSidebar(){this.assetHealthDetail.set(null),this.location.replaceState(`/assets/${this.assetId()}`)}};function yhe(n,t){if(n&1){let e=Dn();ge(0,"div",5)(1,"lib-asset-3d-viewer",6),bt("elementClick",function(r){gt(e);let s=Ae();return yt(s.onElementClicked(r))}),ye(),ge(2,"lib-asset-health-detail-sidebar",7),bt("closeSidebar",function(){gt(e);let r=Ae();return yt(r.closeSidebar())}),ye(),ge(3,"lib-asset-information-page",8),bt("assetInformationExpanded",function(){gt(e);let r=Ae();return yt(r.closeSidebar())}),ye()()}if(n&2){let e=Ae();xe(),Ne("modelUrl",e.assetInformation().modelPath)("sensors",e.sensors())("sections",e.sections())("viewModeInput",e.store.detailType()),xe(),Ne("detail",e.store.assetHealthDetail())("id",e.store.elementId())("type",e.store.detailType())("notifications",e.store.elementNotifications())("measurements",e.store.elementMeasurements()),xe(),Ne("assetInformation",e.assetInformation())("collapseInputTrigger",e.assetInformationCollapseTrigger())}}var z1=(()=>{class n{route=ze(lo);router=ze(co);store=ze(_b);assetStore=ze(of);assetInformationCollapseTrigger=mn(0);allSelectableAssets=cn(()=>this.assetStore.getAllAssets()().map(e=>e.asset));sensors=cn(()=>(this.store.assetHealth()?.sensors??[]).map(e=>Mn(Je({},e),{position:this.toVector3(e.position),type:"sensor",state:Qp(e.healthPercentage),healthPercentage:e.healthPercentage})));sections=cn(()=>(this.store.assetHealth()?.sections??[]).map(e=>Mn(Je({},e),{position:this.toVector3(e.position),size:this.toVector3(e.size),type:"section",state:Qp(e.healthPercentage),healthPercentage:e.healthPercentage})));assetInformation=cn(()=>{let e=this.store.assetHealth();if(e)return{name:e.asset.name,healthPercentage:e.healthPercentage,healthStatus:Qp(e.healthPercentage),location:e.asset.locationName??"",constructionYear:e.asset.constructionYear?.toString()??"",modelPath:e.asset.modelPath,material:e.asset.material??"",length:e.asset.length?`${e.asset.length}m`:""}});breadcrumbs=cn(()=>{let e=this.store.assetHealth();return e?[{text:"Asset Overview",icon:y_,href:"assets",type:"SIMPLE_BREADCRUMB"},{type:"ASSET_SELECTOR_BREADCRUMB",allowAllAssets:!1,initialValue:{id:e.asset.id,name:e.asset.name}}]:[{text:"Map Overview",icon:y_,href:"assets",type:"SIMPLE_BREADCRUMB"}]});ngOnInit(){let e=this.route.snapshot.paramMap,i=e.get("id"),r=e.get("sensorId"),s=e.get("sectionId");this.store.assetId.set(i??null);let o=r??s;if(o){let a=[...this.sensors(),...this.sections()].find(u=>u.id===o);a&&this.store.showSidebar(a.id,a.type,a.label,a.state)}}onElementClicked(e){this.store.showSidebar(e.id,e.type,e.label,e.state);let i=`/assets/${this.store.assetId()}/${this.store.detailType()}/${e.id}`;this.router.navigateByUrl(i),this.assetInformationCollapseTrigger.set(this.assetInformationCollapseTrigger()+1)}closeSidebar(){this.store.closeSidebar()}onSelectAsset(e){this.store.assetHealthDetail.set(null),this.router.navigate(["assets",e.id])}toVector3=e=>new Le(e.x,e.y,e.z);static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["lib-asset-detail"]],features:[So([_b])],decls:8,vars:3,consts:[[1,"w-full","h-full","relative","overflow-hidden"],[1,"header-container"],[1,"text-4xl","mb-1","font-extrabold","leading-none","tracking-tight","text-gray-900","md:text-5xl","lg:text-6xl"],[1,"text-lg","font-normal","text-gray-500","lg:text-xl"],[3,"selectAssetEffect","crumbs","availableAssets"],["id","content"],[3,"elementClick","modelUrl","sensors","sections","viewModeInput"],[3,"closeSidebar","detail","id","type","notifications","measurements"],[3,"assetInformationExpanded","assetInformation","collapseInputTrigger"]],template:function(i,r){i&1&&(ge(0,"div",0)(1,"div",1)(2,"h1",2),ot(3," Asset Details "),ye(),ge(4,"p",3),ot(5," Detailed asset health information "),ye(),ge(6,"lib-breadcrumb",4),bt("selectAssetEffect",function(o){return r.onSelectAsset(o)}),ye()(),It(7,yhe,4,11,"div",5),ye()),i&2&&(xe(6),Ne("crumbs",r.breadcrumbs())("availableAssets",r.allSelectableAssets()),xe(),Kt(r.assetInformation()?7:-1))},dependencies:[Nt,s8,HH,bC,kH,l_],styles:["#header[_ngcontent-%COMP%]{height:9rem}@media (min-width: 600px){.header-container[_ngcontent-%COMP%]{padding:min(10%,3rem) min(10%,3rem) 1rem}}@media (max-width: 599px){.header-container[_ngcontent-%COMP%]{padding:2rem 1rem 1rem}}#content[_ngcontent-%COMP%]{height:calc(100% - 10rem);overflow:hidden}"],changeDetection:0})}return n})();var T8=[{path:"",redirectTo:"/assets",pathMatch:"full"},{path:"",component:a8,children:[{path:"assets",component:E8},{path:"assets/:id",component:z1},{path:"assets/:id/sensor/:sensorId",component:z1},{path:"assets/:id/section/:sectionId",component:z1},{path:"notifications",component:D2},{path:"notifications/:id",component:D2},{path:"**",redirectTo:"/assets"}]}];var Ri=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(Ri||{}),Bc="*";function A8(n,t=null){return{type:Ri.Sequence,steps:n,options:t}}function R2(n){return{type:Ri.Style,styles:n,offset:null}}var Bh=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Jy=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,i=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){let t=this.players.reduce((e,i)=>e===null||i.totalTime>e.totalTime?i:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},bb="!";function D8(n){return new St(3e3,!1)}function vhe(){return new St(3100,!1)}function _he(){return new St(3101,!1)}function bhe(n){return new St(3001,!1)}function xhe(n){return new St(3003,!1)}function whe(n){return new St(3004,!1)}function R8(n,t){return new St(3005,!1)}function P8(){return new St(3006,!1)}function k8(){return new St(3007,!1)}function L8(n,t){return new St(3008,!1)}function N8(n){return new St(3002,!1)}function O8(n,t,e,i,r){return new St(3010,!1)}function F8(){return new St(3011,!1)}function B8(){return new St(3012,!1)}function V8(){return new St(3200,!1)}function z8(){return new St(3202,!1)}function U8(){return new St(3013,!1)}function H8(n){return new St(3014,!1)}function j8(n){return new St(3015,!1)}function W8(n){return new St(3016,!1)}function G8(n,t){return new St(3404,!1)}function She(n){return new St(3502,!1)}function $8(n){return new St(3503,!1)}function q8(){return new St(3300,!1)}function X8(n){return new St(3504,!1)}function Y8(n){return new St(3301,!1)}function Z8(n,t){return new St(3302,!1)}function K8(n){return new St(3303,!1)}function Q8(n,t){return new St(3400,!1)}function J8(n){return new St(3401,!1)}function e9(n){return new St(3402,!1)}function t9(n,t){return new St(3505,!1)}function Vh(n){switch(n.length){case 0:return new Bh;case 1:return n[0];default:return new Jy(n)}}function N2(n,t,e=new Map,i=new Map){let r=[],s=[],o=-1,a=null;if(t.forEach(u=>{let d=u.get("offset"),g=d==o,v=g&&a||new Map;u.forEach((x,C)=>{let A=C,O=x;if(C!=="offset")switch(A=n.normalizePropertyName(A,r),O){case bb:O=e.get(C);break;case Bc:O=i.get(C);break;default:O=n.normalizeStyleValue(C,A,O,r);break}v.set(A,O)}),g||s.push(v),a=v,o=d}),r.length)throw She(r);return s}function U1(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&P2(e,"start",n)));break;case"done":n.onDone(()=>i(e&&P2(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&P2(e,"destroy",n)));break}}function P2(n,t,e){let i=e.totalTime,r=!!e.disabled,s=H1(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,i??n.totalTime,r),o=n._data;return o!=null&&(s._data=o),s}function H1(n,t,e,i,r="",s=0,o){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Ra(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function O2(n){let t=n.indexOf(":"),e=n.substring(1,t),i=n.slice(t+1);return[e,i]}var Che=typeof document>"u"?null:document.documentElement;function j1(n){let t=n.parentNode||n.host||null;return t===Che?null:t}function Mhe(n){return n.substring(1,6)=="ebkit"}var Jp=null,I8=!1;function n9(n){Jp||(Jp=Ehe()||{},I8=Jp.style?"WebkitAppearance"in Jp.style:!1);let t=!0;return Jp.style&&!Mhe(n)&&(t=n in Jp.style,!t&&I8&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Jp.style)),t}function Ehe(){return typeof document<"u"?document.body:null}function F2(n,t){for(;t;){if(t===n)return!0;t=j1(t)}return!1}function B2(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let i=n.querySelector(t);return i?[i]:[]}var The=1e3,V2="{{",Ahe="}}",z2="ng-enter",W1="ng-leave",xb="ng-trigger",wb=".ng-trigger",U2="ng-animating",G1=".ng-animating";function zu(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:k2(parseFloat(t[1]),t[2])}function k2(n,t){switch(t){case"s":return n*The;default:return n}}function Sb(n,t,e){return n.hasOwnProperty("duration")?n:Dhe(n,t,e)}function Dhe(n,t,e){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,o="";if(typeof n=="string"){let a=n.match(i);if(a===null)return t.push(D8(n)),{duration:0,delay:0,easing:""};r=k2(parseFloat(a[1]),a[2]);let u=a[3];u!=null&&(s=k2(parseFloat(u),a[4]));let d=a[5];d&&(o=d)}else r=n;if(!e){let a=!1,u=t.length;r<0&&(t.push(vhe()),a=!0),s<0&&(t.push(_he()),a=!0),a&&t.splice(u,0,D8(n))}return{duration:r,delay:s,easing:o}}function i9(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function Vc(n,t,e){t.forEach((i,r)=>{let s=$1(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i})}function af(n,t){t.forEach((e,i)=>{let r=$1(i);n.style[r]=""})}function e0(n){return Array.isArray(n)?n.length==1?n[0]:A8(n):n}function r9(n,t,e){let i=t.params||{},r=H2(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(bhe(s))})}var L2=new RegExp(`${V2}\\s*(.+?)\\s*${Ahe}`,"g");function H2(n){let t=[];if(typeof n=="string"){let e;for(;e=L2.exec(n);)t.push(e[1]);L2.lastIndex=0}return t}function t0(n,t,e){let i=`${n}`,r=i.replace(L2,(s,o)=>{let a=t[o];return a==null&&(e.push(xhe(o)),a=""),a.toString()});return r==i?n:r}var Ihe=/-+([a-z0-9])/g;function $1(n){return n.replace(Ihe,(...t)=>t[1].toUpperCase())}function s9(n,t){return n===0||t===0}function o9(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(a=>o.set(a,q1(n,a)))}}return t}function Pa(n,t,e){switch(t.type){case Ri.Trigger:return n.visitTrigger(t,e);case Ri.State:return n.visitState(t,e);case Ri.Transition:return n.visitTransition(t,e);case Ri.Sequence:return n.visitSequence(t,e);case Ri.Group:return n.visitGroup(t,e);case Ri.Animate:return n.visitAnimate(t,e);case Ri.Keyframes:return n.visitKeyframes(t,e);case Ri.Style:return n.visitStyle(t,e);case Ri.Reference:return n.visitReference(t,e);case Ri.AnimateChild:return n.visitAnimateChild(t,e);case Ri.AnimateRef:return n.visitAnimateRef(t,e);case Ri.Query:return n.visitQuery(t,e);case Ri.Stagger:return n.visitStagger(t,e);default:throw whe(t.type)}}function q1(n,t){return window.getComputedStyle(n)[t]}var sL=(()=>{class n{validateStyleProperty(e){return n9(e)}containsElement(e,i){return F2(e,i)}getParentElement(e){return j1(e)}query(e,i,r){return B2(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,o,a=[],u){return new Bh(r,s)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})(),tm=class{static NOOP=new sL},nm=class{};var Rhe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Q1=class extends nm{normalizePropertyName(t,e){return $1(t)}normalizeStyleValue(t,e,i,r){let s="",o=i.toString().trim();if(Rhe.has(e)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(R8(t,i))}return o+s}};var J1="*";function Phe(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>khe(i,e,t)):e.push(n),e}function khe(n,t,e){if(n[0]==":"){let u=Lhe(n,e);if(typeof u=="function"){t.push(u);return}n=u}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push(j8(n)),t;let r=i[1],s=i[2],o=i[3];t.push(a9(r,o));let a=r==J1&&o==J1;s[0]=="<"&&!a&&t.push(a9(o,r))}function Lhe(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(W8(n)),"* => *"}}var X1=new Set(["true","1"]),Y1=new Set(["false","0"]);function a9(n,t){let e=X1.has(n)||Y1.has(n),i=X1.has(t)||Y1.has(t);return(r,s)=>{let o=n==J1||n==r,a=t==J1||t==s;return!o&&e&&typeof r=="boolean"&&(o=r?X1.has(n):Y1.has(n)),!a&&i&&typeof s=="boolean"&&(a=s?X1.has(t):Y1.has(t)),o&&a}}var y9=":self",Nhe=new RegExp(`s*${y9}s*,?`,"g");function v9(n,t,e,i){return new X2(n).build(t,e,i)}var l9="",X2=class{_driver;constructor(t){this._driver=t}build(t,e,i){let r=new Y2(e);return this._resetContextStyleTimingState(r),Pa(this,e0(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector=l9,t.collectedStyles=new Map,t.collectedStyles.set(l9,new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0,s=[],o=[];return t.name.charAt(0)=="@"&&e.errors.push(P8()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==Ri.State){let u=a,d=u.name;d.toString().split(/\s*,\s*/).forEach(g=>{u.name=g,s.push(this.visitState(u,e))}),u.name=d}else if(a.type==Ri.Transition){let u=this.visitTransition(a,e);i+=u.queryCount,r+=u.depCount,o.push(u)}else e.errors.push(k8())}),{type:Ri.Trigger,name:t.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(t,e){let i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){let s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(u=>{H2(u).forEach(d=>{o.hasOwnProperty(d)||s.add(d)})})}),s.size&&e.errors.push(L8(t.name,[...s.values()]))}return{type:Ri.State,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let i=Pa(this,e0(t.animation),e),r=Phe(t.expr,e.errors);return{type:Ri.Transition,matchers:r,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:em(t.options)}}visitSequence(t,e){return{type:Ri.Sequence,steps:t.steps.map(i=>Pa(this,i,e)),options:em(t.options)}}visitGroup(t,e){let i=e.currentTime,r=0,s=t.steps.map(o=>{e.currentTime=i;let a=Pa(this,o,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:Ri.Group,steps:s,options:em(t.options)}}visitAnimate(t,e){let i=Vhe(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:R2({});if(s.type==Ri.Keyframes)r=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;let d={};i.easing&&(d.easing=i.easing),o=R2(d)}e.currentTime+=i.duration+i.delay;let u=this.visitStyle(o,e);u.isEmptyStep=a,r=u}return e.currentAnimateTimings=null,{type:Ri.Animate,timings:i,style:r,options:null}}visitStyle(t,e){let i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){let i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)typeof a=="string"?a===Bc?i.push(a):e.errors.push(N8(a)):i.push(new Map(Object.entries(a)));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let u of a.values())if(u.toString().indexOf(V2)>=0){s=!0;break}}}),{type:Ri.Style,styles:i,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){let i=e.currentAnimateTimings,r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,u)=>{let d=e.collectedStyles.get(e.currentQuerySelector),g=d.get(u),v=!0;g&&(s!=r&&s>=g.startTime&&r<=g.endTime&&(e.errors.push(O8(u,g.startTime,g.endTime,s,r)),v=!1),s=g.startTime),v&&d.set(u,{startTime:s,endTime:r}),e.options&&r9(a,e.options,e.errors)})})}visitKeyframes(t,e){let i={type:Ri.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(F8()),i;let r=1,s=0,o=[],a=!1,u=!1,d=0,g=t.steps.map(T=>{let j=this._makeStyleAst(T,e),Z=j.offset!=null?j.offset:Bhe(j.styles),$=0;return Z!=null&&(s++,$=j.offset=Z),u=u||$<0||$>1,a=a||$<d,d=$,o.push($),j});u&&e.errors.push(B8()),a&&e.errors.push(V8());let v=t.steps.length,x=0;s>0&&s<v?e.errors.push(z8()):s==0&&(x=r/(v-1));let C=v-1,A=e.currentTime,O=e.currentAnimateTimings,N=O.duration;return g.forEach((T,j)=>{let Z=x>0?j==C?1:x*j:o[j],$=Z*N;e.currentTime=A+O.delay+$,O.duration=$,this._validateStyleAst(T,e),T.offset=Z,i.styles.push(T)}),i}visitReference(t,e){return{type:Ri.Reference,animation:Pa(this,e0(t.animation),e),options:em(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:Ri.AnimateChild,options:em(t.options)}}visitAnimateRef(t,e){return{type:Ri.AnimateRef,animation:this.visitReference(t.animation,e),options:em(t.options)}}visitQuery(t,e){let i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;let[s,o]=Ohe(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,Ra(e.collectedStyles,e.currentQuerySelector,new Map);let a=Pa(this,e0(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:Ri.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:em(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(U8());let i=t.timings==="full"?{duration:0,delay:0,easing:"full"}:Sb(t.timings,e.errors,!0);return{type:Ri.Stagger,animation:Pa(this,e0(t.animation),e),timings:i,options:null}}};function Ohe(n){let t=!!n.split(/\s*,\s*/).find(e=>e==y9);return t&&(n=n.replace(Nhe,"")),n=n.replace(/@\*/g,wb).replace(/@\w+/g,e=>wb+"-"+e.slice(1)).replace(/:animating/g,G1),[n,t]}function Fhe(n){return n?Je({},n):null}var Y2=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function Bhe(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function Vhe(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Sb(n,t).duration;return j2(s,0,"")}let e=n;if(e.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=j2(0,0,"");return s.dynamic=!0,s.strValue=e,s}let r=Sb(e,t);return j2(r.duration,r.delay,r.easing)}function em(n){return n?(n=Je({},n),n.params&&(n.params=Fhe(n.params))):n={},n}function j2(n,t,e){return{duration:n,delay:t,easing:e}}function oL(n,t,e,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}var Mb=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},zhe=1,Uhe=":enter",Hhe=new RegExp(Uhe,"g"),jhe=":leave",Whe=new RegExp(jhe,"g");function _9(n,t,e,i,r,s=new Map,o=new Map,a,u,d=[]){return new Z2().buildKeyframes(n,t,e,i,r,s,o,a,u,d)}var Z2=class{buildKeyframes(t,e,i,r,s,o,a,u,d,g=[]){d=d||new Mb;let v=new K2(t,e,d,r,s,g,[]);v.options=u;let x=u.delay?zu(u.delay):0;v.currentTimeline.delayNextStep(x),v.currentTimeline.setStyles([o],null,v.errors,u),Pa(this,i,v);let C=v.timelines.filter(A=>A.containsAnimation());if(C.length&&a.size){let A;for(let O=C.length-1;O>=0;O--){let N=C[O];if(N.element===e){A=N;break}}A&&!A.allowOnlyTimelineStyles()&&A.setStyles([a],null,v.errors,u)}return C.length?C.map(A=>A.buildKeyframes()):[oL(e,[],[],[],0,x,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let i=e.subInstructions.get(e.element);if(i){let r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){let i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(let r of t){let s=r?.delay;if(s){let o=typeof s=="number"?s:zu(t0(s,r?.params??{},e.errors));i.delayNextStep(o)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime,o=i.duration!=null?zu(i.duration):null,a=i.delay!=null?zu(i.delay):null;return o!==0&&t.forEach(u=>{let d=e.appendInstructionToTimeline(u,o,a);s=Math.max(s,d.duration+d.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Pa(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let i=e.subContextCount,r=e,s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==Ri.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=eE);let o=zu(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Pa(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let i=[],r=e.currentTimeline.currentTime,s=t.options&&t.options.delay?zu(t.options.delay):0;t.steps.forEach(o=>{let a=e.createSubContext(t.options);s&&a.delayNextStep(s),Pa(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let i=t.strValue,r=e.params?t0(i,e.params,e.errors):i;return Sb(r,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());let s=t.style;s.type==Ri.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(u=>{let d=u.offset||0;a.forwardTime(d*s),a.setStyles(u.styles,u.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){let i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?zu(r.delay):0;s&&(e.previousNode.type===Ri.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=eE);let o=i,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let u=null;a.forEach((d,g)=>{e.currentQueryIndex=g;let v=e.createSubContext(t.options,d);s&&v.delayNextStep(s),d===e.element&&(u=v.currentTimeline),Pa(this,t.animation,v),v.currentTimeline.applyStylesToKeyframe();let x=v.currentTimeline.currentTime;o=Math.max(o,x)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let i=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1),u=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=a-u;break;case"full":u=i.currentStaggerTime;break}let g=e.currentTimeline;u&&g.delayNextStep(u);let v=g.currentTime;Pa(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-v+(r.startTime-i.currentTimeline.startTime)}},eE={},K2=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=eE;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,i,r,s,o,a,u){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=u||new tE(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let i=t,r=this.options;i.duration!=null&&(r.duration=zu(i.duration)),i.delay!=null&&(r.delay=zu(i.delay));let s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=t0(s[a],o,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){let r=e||this.element,s=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=eE,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){let r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new Q2(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=t.replace(Hhe,"."+this._enterClassName),t=t.replace(Whe,"."+this._leaveClassName);let u=i!=1,d=this._driver.query(this.element,t,u);i!==0&&(d=i<0?d.slice(d.length+i,d.length):d.slice(0,i)),a.push(...d)}return!s&&a.length==0&&o.push(H8(e)),a}},tE=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=zhe,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Bc),this._currentKeyframe.set(e,Bc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);let s=r&&r.params||{},o=Ghe(t,this._globalTimelineStyles);for(let[a,u]of o){let d=t0(u,s,i);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Bc),this._updateStyle(a,d)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{let r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,u)=>{let d=new Map([...this._backFill,...a]);d.forEach((g,v)=>{g===bb?t.add(v):g===Bc&&e.add(v)}),i||d.set("offset",u/this.duration),r.push(d)});let s=[...t.values()],o=[...e.values()];if(i){let a=r[0],u=new Map(a);a.set("offset",0),u.set("offset",1),r=[a,u]}return oL(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}},Q2=class extends tE{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,i,r,s,o,a=!1){super(t,e,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){let s=[],o=i+e,a=e/o,u=new Map(t[0]);u.set("offset",0),s.push(u);let d=new Map(t[0]);d.set("offset",c9(a)),s.push(d);let g=t.length-1;for(let v=1;v<=g;v++){let x=new Map(t[v]),C=x.get("offset"),A=e+C*i;x.set("offset",c9(A/o)),s.push(x)}i=o,e=0,r="",t=s}return oL(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}};function c9(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function Ghe(n,t){let e=new Map,i;return n.forEach(r=>{if(r==="*"){i??=t.keys();for(let s of i)e.set(s,Bc)}else for(let[s,o]of r)e.set(s,o)}),e}function u9(n,t,e,i,r,s,o,a,u,d,g,v,x){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:u,preStyleProps:d,postStyleProps:g,totalTime:v,errors:x}}var W2={},nE=class{_triggerName;ast;_stateStyles;constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return $he(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return t!==void 0&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,o,a,u,d,g){let v=[],x=this.ast.options&&this.ast.options.params||W2,C=a&&a.params||W2,A=this.buildStyles(i,C,v),O=u&&u.params||W2,N=this.buildStyles(r,O,v),T=new Set,j=new Map,Z=new Map,$=r==="void",le={params:b9(O,x),delay:this.ast.options?.delay},K=g?[]:_9(t,e,this.ast.animation,s,o,A,N,le,d,v),oe=0;return K.forEach(ue=>{oe=Math.max(ue.duration+ue.delay,oe)}),v.length?u9(e,this._triggerName,i,r,$,A,N,[],[],j,Z,oe,v):(K.forEach(ue=>{let te=ue.element,V=Ra(j,te,new Set);ue.preStyleProps.forEach(we=>V.add(we));let se=Ra(Z,te,new Set);ue.postStyleProps.forEach(we=>se.add(we)),te!==e&&T.add(te)}),u9(e,this._triggerName,i,r,$,A,N,K,[...T.values()],j,Z,oe))}};function $he(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}function b9(n,t){let e=Je({},t);return Object.entries(n).forEach(([i,r])=>{r!=null&&(e[i]=r)}),e}var J2=class{styles;defaultParams;normalizer;constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){let i=new Map,r=b9(t,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=t0(o,r,e));let u=this.normalizer.normalizePropertyName(a,e);o=this.normalizer.normalizeStyleValue(a,u,o,e),i.set(a,o)})}),i}};function qhe(n,t,e){return new eL(n,t,e)}var eL=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,e.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new J2(r.style,s,i))}),h9(this.states,"true","1"),h9(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new nE(t,r,this.states))}),this.fallbackTransition=Xhe(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(o=>o.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}};function Xhe(n,t,e){let i=[(o,a)=>!0],r={type:Ri.Sequence,steps:[],options:null},s={type:Ri.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new nE(n,s,t)}function h9(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var Yhe=new Mb,tL=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i}register(t,e){let i=[],r=[],s=v9(this._driver,e,i,r);if(i.length)throw $8(i);this._animations.set(t,s)}_buildPlayer(t,e,i){let r=t.element,s=N2(this._normalizer,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){let r=[],s=this._animations.get(t),o,a=new Map;if(s?(o=_9(this._driver,e,s,z2,W1,new Map,new Map,i,Yhe,r),o.forEach(g=>{let v=Ra(a,g.element,new Map);g.postStyleProps.forEach(x=>v.set(x,null))})):(r.push(q8()),o=[]),r.length)throw X8(r);a.forEach((g,v)=>{g.forEach((x,C)=>{g.set(C,this._driver.computeStyle(v,C,Bc))})});let u=o.map(g=>{let v=a.get(g.element);return this._buildPlayer(g,new Map,v)}),d=Vh(u);return this._playersById.set(t,d),d.onDestroy(()=>this.destroy(t)),this.players.push(d),d}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw Y8(t);return e}listen(t,e,i,r){let s=H1(e,"","","");return U1(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if(i=="register"){this.register(t,r[0]);return}if(i=="create"){let o=r[0]||{};this.create(t,e,o);return}let s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t);break}}},d9="ng-animate-queued",Zhe=".ng-animate-queued",G2="ng-animate-disabled",Khe=".ng-animate-disabled",Qhe="ng-star-inserted",Jhe=".ng-star-inserted",ede=[],x9={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},tde={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zc="__ng_removed",Eb=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let i=t&&t.hasOwnProperty("value"),r=i?t.value:t;if(this.value=ide(r),i){let s=t,{value:o}=s,a=nO(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let i=this.options.params;Object.keys(e).forEach(r=>{i[r]==null&&(i[r]=e[r])})}}},Cb="void",$2=new Eb(Cb),nL=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this._hostClassName="ng-tns-"+t,Wl(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw Z8(i,e);if(i==null||i.length==0)throw K8(e);if(!rde(i))throw Q8(i,e);let s=Ra(this._elementListeners,t,[]),o={name:e,phase:i,callback:r};s.push(o);let a=Ra(this._engine.statesByElement,t,new Map);return a.has(e)||(Wl(t,xb),Wl(t,xb+"-"+e),a.set(e,$2)),()=>{this._engine.afterFlush(()=>{let u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw J8(t);return e}trigger(t,e,i,r=!0){let s=this._getTrigger(e),o=new Tb(this.id,e,t),a=this._engine.statesByElement.get(t);a||(Wl(t,xb),Wl(t,xb+"-"+e),this._engine.statesByElement.set(t,a=new Map));let u=a.get(e),d=new Eb(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&u&&d.absorbOptions(u.options),a.set(e,d),u||(u=$2),!(d.value===Cb)&&u.value===d.value){if(!ade(u.params,d.params)){let O=[],N=s.matchStyles(u.value,u.params,O),T=s.matchStyles(d.value,d.params,O);O.length?this._engine.reportError(O):this._engine.afterFlush(()=>{af(t,N),Vc(t,T)})}return}let x=Ra(this._engine.playersByElement,t,[]);x.forEach(O=>{O.namespaceId==this.id&&O.triggerName==e&&O.queued&&O.destroy()});let C=s.matchTransition(u.value,d.value,t,d.params),A=!1;if(!C){if(!r)return;C=s.fallbackTransition,A=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:C,fromState:u,toState:d,player:o,isFallbackTransition:A}),A||(Wl(t,d9),o.onStart(()=>{n0(t,d9)})),o.onDone(()=>{let O=this.players.indexOf(o);O>=0&&this.players.splice(O,1);let N=this._engine.playersByElement.get(t);if(N){let T=N.indexOf(o);T>=0&&N.splice(T,1)}}),this.players.push(o),x.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let i=this._engine.driver.query(t,wb,!0);i.forEach(r=>{if(r[zc])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){let s=this._engine.statesByElement.get(t),o=new Map;if(s){let a=[];if(s.forEach((u,d)=>{if(o.set(d,u.value),this._triggers.has(d)){let g=this.trigger(t,d,Cb,r);g&&a.push(g)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),i&&Vh(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){let r=new Set;e.forEach(s=>{let o=s.name;if(r.has(o))return;r.add(o);let u=this._triggers.get(o).fallbackTransition,d=i.get(o)||$2,g=new Eb(Cb),v=new Tb(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:u,fromState:d,toState:g,player:v,isFallbackTransition:!0})})}}removeNode(t,e){let i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{let s=t[zc];(!s||s===x9)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Wl(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){let u=H1(s,i.triggerName,i.fromState.value,i.toState.value);u._data=t,U1(i.player,a.phase,u,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{let s=i.transition.ast.depCount,o=r.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},iL=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){let i=new nL(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(e);for(;a;){let u=r.get(a);if(u){let d=i.indexOf(u);i.splice(d+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(t);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,i=this.statesByElement.get(t);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}}return e}trigger(t,e,i,r){if(Z1(e)){let s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!Z1(e))return;let s=e[zc];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){let o=this._fetchNamespace(t);o&&o.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Wl(t,G2)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),n0(t,G2))}removeNode(t,e,i){if(Z1(e)){let r=t?this._fetchNamespace(t):null;r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i);let s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[zc]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return Z1(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,wb,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,G1,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Vh(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[zc];if(e&&e.setForRemoval){if(t[zc]=x9,e.namespaceId){this.destroyInnerAnimations(t);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(G2)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Khe,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Wl(r,Qhe)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?Vh(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw e9(t)}_flushAnimations(t,e){let i=new Mb,r=[],s=new Map,o=[],a=new Map,u=new Map,d=new Map,g=new Set;this.disabledNodes.forEach(he=>{g.add(he);let Pe=this.driver.query(he,Zhe,!0);for(let me=0;me<Pe.length;me++)g.add(Pe[me])});let v=this.bodyNode,x=Array.from(this.statesByElement.keys()),C=m9(x,this.collectedEnterElements),A=new Map,O=0;C.forEach((he,Pe)=>{let me=z2+O++;A.set(Pe,me),he.forEach($e=>Wl($e,me))});let N=[],T=new Set,j=new Set;for(let he=0;he<this.collectedLeaveElements.length;he++){let Pe=this.collectedLeaveElements[he],me=Pe[zc];me&&me.setForRemoval&&(N.push(Pe),T.add(Pe),me.hasAnimation?this.driver.query(Pe,Jhe,!0).forEach($e=>T.add($e)):j.add(Pe))}let Z=new Map,$=m9(x,Array.from(T));$.forEach((he,Pe)=>{let me=W1+O++;Z.set(Pe,me),he.forEach($e=>Wl($e,me))}),t.push(()=>{C.forEach((he,Pe)=>{let me=A.get(Pe);he.forEach($e=>n0($e,me))}),$.forEach((he,Pe)=>{let me=Z.get(Pe);he.forEach($e=>n0($e,me))}),N.forEach(he=>{this.processLeaveNode(he)})});let le=[],K=[];for(let he=this._namespaceList.length-1;he>=0;he--)this._namespaceList[he].drainQueuedTransitions(e).forEach(me=>{let $e=me.player,nt=me.element;if(le.push($e),this.collectedEnterElements.length){let rt=nt[zc];if(rt&&rt.setForMove){if(rt.previousTriggersValues&&rt.previousTriggersValues.has(me.triggerName)){let Ut=rt.previousTriggersValues.get(me.triggerName),Cn=this.statesByElement.get(me.element);if(Cn&&Cn.has(me.triggerName)){let hn=Cn.get(me.triggerName);hn.value=Ut,Cn.set(me.triggerName,hn)}}$e.destroy();return}}let xt=!v||!this.driver.containsElement(v,nt),Tt=Z.get(nt),ut=A.get(nt),Ie=this._buildInstruction(me,i,ut,Tt,xt);if(Ie.errors&&Ie.errors.length){K.push(Ie);return}if(xt){$e.onStart(()=>af(nt,Ie.fromStyles)),$e.onDestroy(()=>Vc(nt,Ie.toStyles)),r.push($e);return}if(me.isFallbackTransition){$e.onStart(()=>af(nt,Ie.fromStyles)),$e.onDestroy(()=>Vc(nt,Ie.toStyles)),r.push($e);return}let at=[];Ie.timelines.forEach(rt=>{rt.stretchStartingKeyframe=!0,this.disabledNodes.has(rt.element)||at.push(rt)}),Ie.timelines=at,i.append(nt,Ie.timelines);let Pt={instruction:Ie,player:$e,element:nt};o.push(Pt),Ie.queriedElements.forEach(rt=>Ra(a,rt,[]).push($e)),Ie.preStyleProps.forEach((rt,Ut)=>{if(rt.size){let Cn=u.get(Ut);Cn||u.set(Ut,Cn=new Set),rt.forEach((hn,Mt)=>Cn.add(Mt))}}),Ie.postStyleProps.forEach((rt,Ut)=>{let Cn=d.get(Ut);Cn||d.set(Ut,Cn=new Set),rt.forEach((hn,Mt)=>Cn.add(Mt))})});if(K.length){let he=[];K.forEach(Pe=>{he.push(t9(Pe.triggerName,Pe.errors))}),le.forEach(Pe=>Pe.destroy()),this.reportError(he)}let oe=new Map,ue=new Map;o.forEach(he=>{let Pe=he.element;i.has(Pe)&&(ue.set(Pe,Pe),this._beforeAnimationBuild(he.player.namespaceId,he.instruction,oe))}),r.forEach(he=>{let Pe=he.element;this._getPreviousPlayers(Pe,!1,he.namespaceId,he.triggerName,null).forEach($e=>{Ra(oe,Pe,[]).push($e),$e.destroy()})});let te=N.filter(he=>g9(he,u,d)),V=new Map;p9(V,this.driver,j,d,Bc).forEach(he=>{g9(he,u,d)&&te.push(he)});let we=new Map;C.forEach((he,Pe)=>{p9(we,this.driver,new Set(he),u,bb)}),te.forEach(he=>{let Pe=V.get(he),me=we.get(he);V.set(he,new Map([...Pe?.entries()??[],...me?.entries()??[]]))});let de=[],je=[],Ue={};o.forEach(he=>{let{element:Pe,player:me,instruction:$e}=he;if(i.has(Pe)){if(g.has(Pe)){me.onDestroy(()=>Vc(Pe,$e.toStyles)),me.disabled=!0,me.overrideTotalTime($e.totalTime),r.push(me);return}let nt=Ue;if(ue.size>1){let Tt=Pe,ut=[];for(;Tt=Tt.parentNode;){let Ie=ue.get(Tt);if(Ie){nt=Ie;break}ut.push(Tt)}ut.forEach(Ie=>ue.set(Ie,nt))}let xt=this._buildAnimation(me.namespaceId,$e,oe,s,we,V);if(me.setRealPlayer(xt),nt===Ue)de.push(me);else{let Tt=this.playersByElement.get(nt);Tt&&Tt.length&&(me.parentPlayer=Vh(Tt)),r.push(me)}}else af(Pe,$e.fromStyles),me.onDestroy(()=>Vc(Pe,$e.toStyles)),je.push(me),g.has(Pe)&&r.push(me)}),je.forEach(he=>{let Pe=s.get(he.element);if(Pe&&Pe.length){let me=Vh(Pe);he.setRealPlayer(me)}}),r.forEach(he=>{he.parentPlayer?he.syncPlayerEvents(he.parentPlayer):he.destroy()});for(let he=0;he<N.length;he++){let Pe=N[he],me=Pe[zc];if(n0(Pe,W1),me&&me.hasAnimation)continue;let $e=[];if(a.size){let xt=a.get(Pe);xt&&xt.length&&$e.push(...xt);let Tt=this.driver.query(Pe,G1,!0);for(let ut=0;ut<Tt.length;ut++){let Ie=a.get(Tt[ut]);Ie&&Ie.length&&$e.push(...Ie)}}let nt=$e.filter(xt=>!xt.destroyed);nt.length?sde(this,Pe,nt):this.processLeaveNode(Pe)}return N.length=0,de.forEach(he=>{this.players.push(he),he.onDone(()=>{he.destroy();let Pe=this.players.indexOf(he);this.players.splice(Pe,1)}),he.play()}),de}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let o=[];if(e){let a=this.playersByQueriedElement.get(t);a&&(o=a)}else{let a=this.playersByElement.get(t);if(a){let u=!s||s==Cb;a.forEach(d=>{d.queued||!u&&d.triggerName!=r||o.push(d)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,e,i){let r=e.triggerName,s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:r;for(let u of e.timelines){let d=u.element,g=d!==s,v=Ra(i,d,[]);this._getPreviousPlayers(d,g,o,a,e.toState).forEach(C=>{let A=C.getRealPlayer();A.beforeDestroy&&A.beforeDestroy(),C.destroy(),v.push(C)})}af(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,o){let a=e.triggerName,u=e.element,d=[],g=new Set,v=new Set,x=e.timelines.map(A=>{let O=A.element;g.add(O);let N=O[zc];if(N&&N.removedBeforeQueried)return new Bh(A.duration,A.delay);let T=O!==u,j=ode((i.get(O)||ede).map(oe=>oe.getRealPlayer())).filter(oe=>{let ue=oe;return ue.element?ue.element===O:!1}),Z=s.get(O),$=o.get(O),le=N2(this._normalizer,A.keyframes,Z,$),K=this._buildPlayer(A,le,j);if(A.subTimeline&&r&&v.add(O),T){let oe=new Tb(t,a,O);oe.setRealPlayer(K),d.push(oe)}return K});d.forEach(A=>{Ra(this.playersByQueriedElement,A.element,[]).push(A),A.onDone(()=>nde(this.playersByQueriedElement,A.element,A))}),g.forEach(A=>Wl(A,U2));let C=Vh(x);return C.onDestroy(()=>{g.forEach(A=>n0(A,U2)),Vc(u,e.toStyles)}),v.forEach(A=>{Ra(r,A,[]).push(C)}),C}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Bh(t.duration,t.delay)}},Tb=class{namespaceId;triggerName;element;_player=new Bh;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>U1(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Ra(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function nde(n,t,e){let i=n.get(t);if(i){if(i.length){let r=i.indexOf(e);i.splice(r,1)}i.length==0&&n.delete(t)}return i}function ide(n){return n??null}function Z1(n){return n&&n.nodeType===1}function rde(n){return n=="start"||n=="done"}function f9(n,t){let e=n.style.display;return n.style.display=t??"none",e}function p9(n,t,e,i,r){let s=[];e.forEach(u=>s.push(f9(u)));let o=[];i.forEach((u,d)=>{let g=new Map;u.forEach(v=>{let x=t.computeStyle(d,v,r);g.set(v,x),(!x||x.length==0)&&(d[zc]=tde,o.push(d))}),n.set(d,g)});let a=0;return e.forEach(u=>f9(u,s[a++])),o}function m9(n,t){let e=new Map;if(n.forEach(a=>e.set(a,[])),t.length==0)return e;let i=1,r=new Set(t),s=new Map;function o(a){if(!a)return i;let u=s.get(a);if(u)return u;let d=a.parentNode;return e.has(d)?u=d:r.has(d)?u=i:u=o(d),s.set(a,u),u}return t.forEach(a=>{let u=o(a);u!==i&&e.get(u).push(a)}),e}function Wl(n,t){n.classList?.add(t)}function n0(n,t){n.classList?.remove(t)}function sde(n,t,e){Vh(e).onDone(()=>n.processLeaveNode(t))}function ode(n){let t=[];return w9(n,t),t}function w9(n,t){for(let e=0;e<n.length;e++){let i=n[e];i instanceof Jy?w9(i.players,t):t.push(i)}}function ade(n,t){let e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){let s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}function g9(n,t,e){let i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}var i0=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,i){this._driver=e,this._normalizer=i,this._transitionEngine=new iL(t.body,e,i),this._timelineEngine=new tL(t.body,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){let o=t+"-"+r,a=this._triggerCache[o];if(!a){let u=[],d=[],g=v9(this._driver,s,u,d);if(u.length)throw G8(r,u);a=qhe(r,g,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i){this._transitionEngine.removeNode(t,e,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if(i.charAt(0)=="@"){let[s,o]=O2(i),a=r;this._timelineEngine.command(s,e,o,a)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if(i.charAt(0)=="@"){let[o,a]=O2(i);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function lde(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=q2(t[0]),t.length>1&&(i=q2(t[t.length-1]))):t instanceof Map&&(e=q2(t)),e||i?new cde(n,e,i):null}var cde=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Vc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Vc(this._element,this._initialStyles),this._endStyles&&(Vc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(af(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(af(this._element,this._endStyles),this._endStyles=null),Vc(this._element,this._initialStyles),this._state=3)}}return n})();function q2(n){let t=null;return n.forEach((e,i)=>{ude(i)&&(t=t||new Map,t.set(i,e))}),t}function ude(n){return n==="display"||n==="position"}var iE=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&t.set(r,this._finished?i:q1(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},rE=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return F2(t,e)}getParentElement(t){return j1(t)}query(t,e,i){return B2(t,e,i)}computeStyle(t,e,i){return q1(t,e)}animate(t,e,i,r,s,o=[]){let a=r==0?"both":"forwards",u={duration:i,delay:r,fill:a};s&&(u.easing=s);let d=new Map,g=o.filter(C=>C instanceof iE);s9(i,r)&&g.forEach(C=>{C.currentSnapshot.forEach((A,O)=>d.set(O,A))});let v=i9(e).map(C=>new Map(C));v=o9(t,v,d);let x=lde(t,v);return new iE(t,v,u,x)}};var K1="@",S9="@.disabled",sE=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){e.charAt(0)==K1&&e==S9?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i,r){return this.delegate.listen(t,e,i,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},rL=class extends sE{factory;constructor(t,e,i,r,s){super(e,i,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){e.charAt(0)==K1?e.charAt(1)=="."&&e==S9?(i=i===void 0?!0:!!i,this.disableAnimations(t,i)):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i,r){if(e.charAt(0)==K1){let s=hde(t),o=e.slice(1),a="";return o.charAt(0)!=K1&&([o,a]=dde(o)),this.engine.listen(this.namespaceId,s,o,a,u=>{let d=u._data||-1;this.factory.scheduleListenerCallback(d,i,u)})}return this.delegate.listen(t,e,i,r)}};function hde(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function dde(n){let t=n.indexOf("."),e=n.substring(0,t),i=n.slice(t+1);return[e,i]}var oE=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,i){this.delegate=t,this.engine=e,this._zone=i,e.onRemovalComplete=(r,s)=>{s?.removeChild(null,r)}}createRenderer(t,e){let i="",r=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let d=this._rendererCache,g=d.get(r);if(!g){let v=()=>d.delete(r);g=new sE(i,r,this.engine,v),d.set(r,g)}return g}let s=e.id,o=e.id+"-"+this._currentId;this._currentId++,this.engine.register(o,t);let a=d=>{Array.isArray(d)?d.forEach(a):this.engine.registerTrigger(s,o,t,d.name,d)};return e.data.animation.forEach(a),new rL(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,i){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var pde=(()=>{class n extends i0{constructor(e,i,r){super(e,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)($n(Zr),$n(tm),$n(nm))};static \u0275prov=Vt({token:n,factory:n.\u0275fac})}return n})();function mde(){return new Q1}function gde(n,t,e){return new oE(n,t,e)}var C9=[{provide:nm,useFactory:mde},{provide:i0,useClass:pde},{provide:Dd,useFactory:gde,deps:[jv,i0,br]}],$ke=[{provide:tm,useClass:sL},{provide:ZD,useValue:"NoopAnimations"},...C9],yde=[{provide:tm,useFactory:()=>new rE},{provide:ZD,useFactory:()=>"BrowserAnimations"},...C9];function M9(){return yu("NgEagerAnimations"),[...yde]}var E9={providers:[IV({eventCoalescing:!0}),SR(T8,MR()),M9()]};var vde=function(){function n(t,e){e===void 0&&(e=[]),this._eventType=t,this._eventFunctions=e}return n.prototype.init=function(){var t=this;this._eventFunctions.forEach(function(e){typeof window<"u"&&window.addEventListener(t._eventType,e)})},n}(),T9=vde;var _de=function(){function n(){this._instances={Accordion:{},Carousel:{},Collapse:{},Dial:{},Dismiss:{},Drawer:{},Dropdown:{},Modal:{},Popover:{},Tabs:{},Tooltip:{},InputCounter:{},CopyClipboard:{},Datepicker:{}}}return n.prototype.addInstance=function(t,e,i,r){if(r===void 0&&(r=!1),!this._instances[t])return console.warn("Flowbite: Component ".concat(t," does not exist.")),!1;if(this._instances[t][i]&&!r){console.warn("Flowbite: Instance with ID ".concat(i," already exists."));return}r&&this._instances[t][i]&&this._instances[t][i].destroyAndRemoveInstance(),this._instances[t][i||this._generateRandomId()]=e},n.prototype.getAllInstances=function(){return this._instances},n.prototype.getInstances=function(t){return this._instances[t]?this._instances[t]:(console.warn("Flowbite: Component ".concat(t," does not exist.")),!1)},n.prototype.getInstance=function(t,e){if(this._componentAndInstanceCheck(t,e)){if(!this._instances[t][e]){console.warn("Flowbite: Instance with ID ".concat(e," does not exist."));return}return this._instances[t][e]}},n.prototype.destroyAndRemoveInstance=function(t,e){this._componentAndInstanceCheck(t,e)&&(this.destroyInstanceObject(t,e),this.removeInstance(t,e))},n.prototype.removeInstance=function(t,e){this._componentAndInstanceCheck(t,e)&&delete this._instances[t][e]},n.prototype.destroyInstanceObject=function(t,e){this._componentAndInstanceCheck(t,e)&&this._instances[t][e].destroy()},n.prototype.instanceExists=function(t,e){return!(!this._instances[t]||!this._instances[t][e])},n.prototype._generateRandomId=function(){return Math.random().toString(36).substr(2,9)},n.prototype._componentAndInstanceCheck=function(t,e){return this._instances[t]?this._instances[t][e]?!0:(console.warn("Flowbite: Instance with ID ".concat(e," does not exist.")),!1):(console.warn("Flowbite: Component ".concat(t," does not exist.")),!1)},n}(),A9=new _de,On=A9;typeof window<"u"&&(window.FlowbiteInstances=A9);var aE=function(){return aE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},aE.apply(this,arguments)},lE={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},bde={id:null,override:!0},D9=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=[]),i===void 0&&(i=lE),r===void 0&&(r=bde),this._instanceId=r.id?r.id:t.id,this._accordionEl=t,this._items=e,this._options=aE(aE({},lE),i),this._initialized=!1,this.init(),On.addInstance("Accordion",this,this._instanceId,r.override)}return n.prototype.init=function(){var t=this;this._items.length&&!this._initialized&&(this._items.forEach(function(e){e.active&&t.open(e.id);var i=function(){t.toggle(e.id)};e.triggerEl.addEventListener("click",i),e.clickHandler=i}),this._initialized=!0)},n.prototype.destroy=function(){this._items.length&&this._initialized&&(this._items.forEach(function(t){t.triggerEl.removeEventListener("click",t.clickHandler),delete t.clickHandler}),this._initialized=!1)},n.prototype.removeInstance=function(){On.removeInstance("Accordion",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getItem=function(t){return this._items.filter(function(e){return e.id===t})[0]},n.prototype.open=function(t){var e,i,r=this,s=this.getItem(t);this._options.alwaysOpen||this._items.map(function(o){var a,u;o!==s&&((a=o.triggerEl.classList).remove.apply(a,r._options.activeClasses.split(" ")),(u=o.triggerEl.classList).add.apply(u,r._options.inactiveClasses.split(" ")),o.targetEl.classList.add("hidden"),o.triggerEl.setAttribute("aria-expanded","false"),o.active=!1,o.iconEl&&o.iconEl.classList.add("rotate-180"))}),(e=s.triggerEl.classList).add.apply(e,this._options.activeClasses.split(" ")),(i=s.triggerEl.classList).remove.apply(i,this._options.inactiveClasses.split(" ")),s.triggerEl.setAttribute("aria-expanded","true"),s.targetEl.classList.remove("hidden"),s.active=!0,s.iconEl&&s.iconEl.classList.remove("rotate-180"),this._options.onOpen(this,s)},n.prototype.toggle=function(t){var e=this.getItem(t);e.active?this.close(t):this.open(t),this._options.onToggle(this,e)},n.prototype.close=function(t){var e,i,r=this.getItem(t);(e=r.triggerEl.classList).remove.apply(e,this._options.activeClasses.split(" ")),(i=r.triggerEl.classList).add.apply(i,this._options.inactiveClasses.split(" ")),r.targetEl.classList.add("hidden"),r.triggerEl.setAttribute("aria-expanded","false"),r.active=!1,r.iconEl&&r.iconEl.classList.add("rotate-180"),this._options.onClose(this,r)},n.prototype.updateOnOpen=function(t){this._options.onOpen=t},n.prototype.updateOnClose=function(t){this._options.onClose=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function r0(){document.querySelectorAll("[data-accordion]").forEach(function(n){var t=n.getAttribute("data-accordion"),e=n.getAttribute("data-active-classes"),i=n.getAttribute("data-inactive-classes"),r=[];n.querySelectorAll("[data-accordion-target]").forEach(function(s){if(s.closest("[data-accordion]")===n){var o={id:s.getAttribute("data-accordion-target"),triggerEl:s,targetEl:document.querySelector(s.getAttribute("data-accordion-target")),iconEl:s.querySelector("[data-accordion-icon]"),active:s.getAttribute("aria-expanded")==="true"};r.push(o)}}),new D9(n,r,{alwaysOpen:t==="open",activeClasses:e||lE.activeClasses,inactiveClasses:i||lE.inactiveClasses})})}typeof window<"u"&&(window.Accordion=D9,window.initAccordions=r0);var cE=function(){return cE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cE.apply(this,arguments)},I9={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},xde={id:null,override:!0},aL=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=I9),r===void 0&&(r=xde),this._instanceId=r.id?r.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=cE(cE({},I9),i),this._visible=!1,this._initialized=!1,this.init(),On.addInstance("Collapse",this,this._instanceId,r.override)}return n.prototype.init=function(){var t=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._clickHandler=function(){t.toggle()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},n.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},n.prototype.removeInstance=function(){On.removeInstance("Collapse",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},n.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},n.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},n.prototype.updateOnCollapse=function(t){this._options.onCollapse=t},n.prototype.updateOnExpand=function(t){this._options.onExpand=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function s0(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(n){var t=n.getAttribute("data-collapse-toggle"),e=document.getElementById(t);e?On.instanceExists("Collapse",e.getAttribute("id"))?new aL(e,n,{},{id:e.getAttribute("id")+"_"+On._generateRandomId()}):new aL(e,n):console.error('The target element with id "'.concat(t,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=aL,window.initCollapses=s0);var im=function(){return im=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},im.apply(this,arguments)},uE={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},wde={id:null,override:!0},R9=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=[]),i===void 0&&(i=uE),r===void 0&&(r=wde),this._instanceId=r.id?r.id:t.id,this._carouselEl=t,this._items=e,this._options=im(im(im({},uE),i),{indicators:im(im({},uE.indicators),i.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init(),On.addInstance("Carousel",this,this._instanceId,r.override)}return n.prototype.init=function(){var t=this;this._items.length&&!this._initialized&&(this._items.map(function(e){e.el.classList.add("absolute","inset-0","transition-transform","transform")}),this.getActiveItem()?this.slideTo(this.getActiveItem().position):this.slideTo(0),this._indicators.map(function(e,i){e.el.addEventListener("click",function(){t.slideTo(i)})}),this._initialized=!0)},n.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},n.prototype.removeInstance=function(){On.removeInstance("Carousel",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getItem=function(t){return this._items[t]},n.prototype.slideTo=function(t){var e=this._items[t],i={left:e.position===0?this._items[this._items.length-1]:this._items[e.position-1],middle:e,right:e.position===this._items.length-1?this._items[0]:this._items[e.position+1]};this._rotate(i),this._setActiveItem(e),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},n.prototype.next=function(){var t=this.getActiveItem(),e=null;t.position===this._items.length-1?e=this._items[0]:e=this._items[t.position+1],this.slideTo(e.position),this._options.onNext(this)},n.prototype.prev=function(){var t=this.getActiveItem(),e=null;t.position===0?e=this._items[this._items.length-1]:e=this._items[t.position-1],this.slideTo(e.position),this._options.onPrev(this)},n.prototype._rotate=function(t){if(this._items.map(function(e){e.el.classList.add("hidden")}),this._items.length===1){t.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),t.middle.el.classList.add("translate-x-0","z-20");return}t.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),t.left.el.classList.add("-translate-x-full","z-10"),t.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),t.middle.el.classList.add("translate-x-0","z-30"),t.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-30"),t.right.el.classList.add("translate-x-full","z-20")},n.prototype.cycle=function(){var t=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){t.next()},this._intervalDuration))},n.prototype.pause=function(){clearInterval(this._intervalInstance)},n.prototype.getActiveItem=function(){return this._activeItem},n.prototype._setActiveItem=function(t){var e,i,r=this;this._activeItem=t;var s=t.position;this._indicators.length&&(this._indicators.map(function(o){var a,u;o.el.setAttribute("aria-current","false"),(a=o.el.classList).remove.apply(a,r._options.indicators.activeClasses.split(" ")),(u=o.el.classList).add.apply(u,r._options.indicators.inactiveClasses.split(" "))}),(e=this._indicators[s].el.classList).add.apply(e,this._options.indicators.activeClasses.split(" ")),(i=this._indicators[s].el.classList).remove.apply(i,this._options.indicators.inactiveClasses.split(" ")),this._indicators[s].el.setAttribute("aria-current","true"))},n.prototype.updateOnNext=function(t){this._options.onNext=t},n.prototype.updateOnPrev=function(t){this._options.onPrev=t},n.prototype.updateOnChange=function(t){this._options.onChange=t},n}();function o0(){document.querySelectorAll("[data-carousel]").forEach(function(n){var t=n.getAttribute("data-carousel-interval"),e=n.getAttribute("data-carousel")==="slide",i=[],r=0;n.querySelectorAll("[data-carousel-item]").length&&Array.from(n.querySelectorAll("[data-carousel-item]")).map(function(d,g){i.push({position:g,el:d}),d.getAttribute("data-carousel-item")==="active"&&(r=g)});var s=[];n.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(n.querySelectorAll("[data-carousel-slide-to]")).map(function(d){s.push({position:parseInt(d.getAttribute("data-carousel-slide-to")),el:d})});var o=new R9(n,i,{defaultPosition:r,indicators:{items:s},interval:t||uE.interval});e&&o.cycle();var a=n.querySelector("[data-carousel-next]"),u=n.querySelector("[data-carousel-prev]");a&&a.addEventListener("click",function(){o.next()}),u&&u.addEventListener("click",function(){o.prev()})})}typeof window<"u"&&(window.Carousel=R9,window.initCarousels=o0);var hE=function(){return hE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hE.apply(this,arguments)},P9={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},Sde={id:null,override:!0},k9=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=P9),r===void 0&&(r=Sde),this._instanceId=r.id?r.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=hE(hE({},P9),i),this._initialized=!1,this.init(),On.addInstance("Dismiss",this,this._instanceId,r.override)}return n.prototype.init=function(){var t=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._clickHandler=function(){t.hide()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},n.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},n.prototype.removeInstance=function(){On.removeInstance("Dismiss",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.hide=function(){var t=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){t._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},n.prototype.updateOnHide=function(t){this._options.onHide=t},n}();function a0(){document.querySelectorAll("[data-dismiss-target]").forEach(function(n){var t=n.getAttribute("data-dismiss-target"),e=document.querySelector(t);e?new k9(e,n):console.error('The dismiss element with id "'.concat(t,'" does not exist. Please check the data-dismiss-target attribute.'))})}typeof window<"u"&&(window.Dismiss=k9,window.initDismisses=a0);var ts="top",Gs="bottom",Ds="right",us="left",dE="auto",lf=[ts,Gs,Ds,us],zh="start",rm="end",L9="clippingParents",fE="viewport",l0="popper",N9="reference",lL=lf.reduce(function(n,t){return n.concat([t+"-"+zh,t+"-"+rm])},[]),pE=[].concat(lf,[dE]).reduce(function(n,t){return n.concat([t,t+"-"+zh,t+"-"+rm])},[]),Cde="beforeRead",Mde="read",Ede="afterRead",Tde="beforeMain",Ade="main",Dde="afterMain",Ide="beforeWrite",Rde="write",Pde="afterWrite",O9=[Cde,Mde,Ede,Tde,Ade,Dde,Ide,Rde,Pde];function to(n){return n?(n.nodeName||"").toLowerCase():null}function Hr(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function Gl(n){var t=Hr(n).Element;return n instanceof t||n instanceof Element}function $s(n){var t=Hr(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function c0(n){if(typeof ShadowRoot>"u")return!1;var t=Hr(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function kde(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},r=t.attributes[e]||{},s=t.elements[e];!$s(s)||!to(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function Lde(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(i){var r=t.elements[i],s=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:e[i]),a=o.reduce(function(u,d){return u[d]="",u},{});!$s(r)||!to(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(u){r.removeAttribute(u)}))})}}var F9={name:"applyStyles",enabled:!0,phase:"write",fn:kde,effect:Lde,requires:["computeStyles"]};function no(n){return n.split("-")[0]}var Uc=Math.max,sm=Math.min,Uh=Math.round;function u0(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Ab(){return!/^((?!chrome|android).)*safari/i.test(u0())}function $l(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var i=n.getBoundingClientRect(),r=1,s=1;t&&$s(n)&&(r=n.offsetWidth>0&&Uh(i.width)/n.offsetWidth||1,s=n.offsetHeight>0&&Uh(i.height)/n.offsetHeight||1);var o=Gl(n)?Hr(n):window,a=o.visualViewport,u=!Ab()&&e,d=(i.left+(u&&a?a.offsetLeft:0))/r,g=(i.top+(u&&a?a.offsetTop:0))/s,v=i.width/r,x=i.height/s;return{width:v,height:x,top:g,right:d+v,bottom:g+x,left:d,x:d,y:g}}function om(n){var t=$l(n),e=n.offsetWidth,i=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:i}}function Db(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&c0(e)){var i=t;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function oa(n){return Hr(n).getComputedStyle(n)}function cL(n){return["table","td","th"].indexOf(to(n))>=0}function po(n){return((Gl(n)?n.ownerDocument:n.document)||window.document).documentElement}function Hh(n){return to(n)==="html"?n:n.assignedSlot||n.parentNode||(c0(n)?n.host:null)||po(n)}function B9(n){return!$s(n)||oa(n).position==="fixed"?null:n.offsetParent}function Nde(n){var t=/firefox/i.test(u0()),e=/Trident/i.test(u0());if(e&&$s(n)){var i=oa(n);if(i.position==="fixed")return null}var r=Hh(n);for(c0(r)&&(r=r.host);$s(r)&&["html","body"].indexOf(to(r))<0;){var s=oa(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function Hc(n){for(var t=Hr(n),e=B9(n);e&&cL(e)&&oa(e).position==="static";)e=B9(e);return e&&(to(e)==="html"||to(e)==="body"&&oa(e).position==="static")?t:e||Nde(n)||t}function am(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function lm(n,t,e){return Uc(n,sm(t,e))}function V9(n,t,e){var i=lm(n,t,e);return i>e?e:i}function Ib(){return{top:0,right:0,bottom:0,left:0}}function Rb(n){return Object.assign({},Ib(),n)}function Pb(n,t){return t.reduce(function(e,i){return e[i]=n,e},{})}var Ode=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,Rb(typeof t!="number"?t:Pb(t,lf))};function Fde(n){var t,e=n.state,i=n.name,r=n.options,s=e.elements.arrow,o=e.modifiersData.popperOffsets,a=no(e.placement),u=am(a),d=[us,Ds].indexOf(a)>=0,g=d?"height":"width";if(!(!s||!o)){var v=Ode(r.padding,e),x=om(s),C=u==="y"?ts:us,A=u==="y"?Gs:Ds,O=e.rects.reference[g]+e.rects.reference[u]-o[u]-e.rects.popper[g],N=o[u]-e.rects.reference[u],T=Hc(s),j=T?u==="y"?T.clientHeight||0:T.clientWidth||0:0,Z=O/2-N/2,$=v[C],le=j-x[g]-v[A],K=j/2-x[g]/2+Z,oe=lm($,K,le),ue=u;e.modifiersData[i]=(t={},t[ue]=oe,t.centerOffset=oe-K,t)}}function Bde(n){var t=n.state,e=n.options,i=e.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||Db(t.elements.popper,r)&&(t.elements.arrow=r))}var z9={name:"arrow",enabled:!0,phase:"main",fn:Fde,effect:Bde,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ql(n){return n.split("-")[1]}var Vde={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zde(n,t){var e=n.x,i=n.y,r=t.devicePixelRatio||1;return{x:Uh(e*r)/r||0,y:Uh(i*r)/r||0}}function U9(n){var t,e=n.popper,i=n.popperRect,r=n.placement,s=n.variation,o=n.offsets,a=n.position,u=n.gpuAcceleration,d=n.adaptive,g=n.roundOffsets,v=n.isFixed,x=o.x,C=x===void 0?0:x,A=o.y,O=A===void 0?0:A,N=typeof g=="function"?g({x:C,y:O}):{x:C,y:O};C=N.x,O=N.y;var T=o.hasOwnProperty("x"),j=o.hasOwnProperty("y"),Z=us,$=ts,le=window;if(d){var K=Hc(e),oe="clientHeight",ue="clientWidth";if(K===Hr(e)&&(K=po(e),oa(K).position!=="static"&&a==="absolute"&&(oe="scrollHeight",ue="scrollWidth")),K=K,r===ts||(r===us||r===Ds)&&s===rm){$=Gs;var te=v&&K===le&&le.visualViewport?le.visualViewport.height:K[oe];O-=te-i.height,O*=u?1:-1}if(r===us||(r===ts||r===Gs)&&s===rm){Z=Ds;var V=v&&K===le&&le.visualViewport?le.visualViewport.width:K[ue];C-=V-i.width,C*=u?1:-1}}var se=Object.assign({position:a},d&&Vde),we=g===!0?zde({x:C,y:O},Hr(e)):{x:C,y:O};if(C=we.x,O=we.y,u){var de;return Object.assign({},se,(de={},de[$]=j?"0":"",de[Z]=T?"0":"",de.transform=(le.devicePixelRatio||1)<=1?"translate("+C+"px, "+O+"px)":"translate3d("+C+"px, "+O+"px, 0)",de))}return Object.assign({},se,(t={},t[$]=j?O+"px":"",t[Z]=T?C+"px":"",t.transform="",t))}function Ude(n){var t=n.state,e=n.options,i=e.gpuAcceleration,r=i===void 0?!0:i,s=e.adaptive,o=s===void 0?!0:s,a=e.roundOffsets,u=a===void 0?!0:a,d={placement:no(t.placement),variation:ql(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,U9(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:u})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,U9(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var H9={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ude,data:{}};var mE={passive:!0};function Hde(n){var t=n.state,e=n.instance,i=n.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,u=Hr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&d.forEach(function(g){g.addEventListener("scroll",e.update,mE)}),a&&u.addEventListener("resize",e.update,mE),function(){s&&d.forEach(function(g){g.removeEventListener("scroll",e.update,mE)}),a&&u.removeEventListener("resize",e.update,mE)}}var j9={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Hde,data:{}};var jde={left:"right",right:"left",bottom:"top",top:"bottom"};function h0(n){return n.replace(/left|right|bottom|top/g,function(t){return jde[t]})}var Wde={start:"end",end:"start"};function gE(n){return n.replace(/start|end/g,function(t){return Wde[t]})}function cm(n){var t=Hr(n),e=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:e,scrollTop:i}}function um(n){return $l(po(n)).left+cm(n).scrollLeft}function uL(n,t){var e=Hr(n),i=po(n),r=e.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,u=0;if(r){s=r.width,o=r.height;var d=Ab();(d||!d&&t==="fixed")&&(a=r.offsetLeft,u=r.offsetTop)}return{width:s,height:o,x:a+um(n),y:u}}function hL(n){var t,e=po(n),i=cm(n),r=(t=n.ownerDocument)==null?void 0:t.body,s=Uc(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Uc(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+um(n),u=-i.scrollTop;return oa(r||e).direction==="rtl"&&(a+=Uc(e.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:u}}function hm(n){var t=oa(n),e=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+r+i)}function yE(n){return["html","body","#document"].indexOf(to(n))>=0?n.ownerDocument.body:$s(n)&&hm(n)?n:yE(Hh(n))}function cf(n,t){var e;t===void 0&&(t=[]);var i=yE(n),r=i===((e=n.ownerDocument)==null?void 0:e.body),s=Hr(i),o=r?[s].concat(s.visualViewport||[],hm(i)?i:[]):i,a=t.concat(o);return r?a:a.concat(cf(Hh(o)))}function d0(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Gde(n,t){var e=$l(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function W9(n,t,e){return t===fE?d0(uL(n,e)):Gl(t)?Gde(t,e):d0(hL(po(n)))}function $de(n){var t=cf(Hh(n)),e=["absolute","fixed"].indexOf(oa(n).position)>=0,i=e&&$s(n)?Hc(n):n;return Gl(i)?t.filter(function(r){return Gl(r)&&Db(r,i)&&to(r)!=="body"}):[]}function dL(n,t,e,i){var r=t==="clippingParents"?$de(n):[].concat(t),s=[].concat(r,[e]),o=s[0],a=s.reduce(function(u,d){var g=W9(n,d,i);return u.top=Uc(g.top,u.top),u.right=sm(g.right,u.right),u.bottom=sm(g.bottom,u.bottom),u.left=Uc(g.left,u.left),u},W9(n,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function kb(n){var t=n.reference,e=n.element,i=n.placement,r=i?no(i):null,s=i?ql(i):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,u;switch(r){case ts:u={x:o,y:t.y-e.height};break;case Gs:u={x:o,y:t.y+t.height};break;case Ds:u={x:t.x+t.width,y:a};break;case us:u={x:t.x-e.width,y:a};break;default:u={x:t.x,y:t.y}}var d=r?am(r):null;if(d!=null){var g=d==="y"?"height":"width";switch(s){case zh:u[d]=u[d]-(t[g]/2-e[g]/2);break;case rm:u[d]=u[d]+(t[g]/2-e[g]/2);break;default:}}return u}function jc(n,t){t===void 0&&(t={});var e=t,i=e.placement,r=i===void 0?n.placement:i,s=e.strategy,o=s===void 0?n.strategy:s,a=e.boundary,u=a===void 0?L9:a,d=e.rootBoundary,g=d===void 0?fE:d,v=e.elementContext,x=v===void 0?l0:v,C=e.altBoundary,A=C===void 0?!1:C,O=e.padding,N=O===void 0?0:O,T=Rb(typeof N!="number"?N:Pb(N,lf)),j=x===l0?N9:l0,Z=n.rects.popper,$=n.elements[A?j:x],le=dL(Gl($)?$:$.contextElement||po(n.elements.popper),u,g,o),K=$l(n.elements.reference),oe=kb({reference:K,element:Z,strategy:"absolute",placement:r}),ue=d0(Object.assign({},Z,oe)),te=x===l0?ue:K,V={top:le.top-te.top+T.top,bottom:te.bottom-le.bottom+T.bottom,left:le.left-te.left+T.left,right:te.right-le.right+T.right},se=n.modifiersData.offset;if(x===l0&&se){var we=se[r];Object.keys(V).forEach(function(de){var je=[Ds,Gs].indexOf(de)>=0?1:-1,Ue=[ts,Gs].indexOf(de)>=0?"y":"x";V[de]+=we[Ue]*je})}return V}function fL(n,t){t===void 0&&(t={});var e=t,i=e.placement,r=e.boundary,s=e.rootBoundary,o=e.padding,a=e.flipVariations,u=e.allowedAutoPlacements,d=u===void 0?pE:u,g=ql(i),v=g?a?lL:lL.filter(function(A){return ql(A)===g}):lf,x=v.filter(function(A){return d.indexOf(A)>=0});x.length===0&&(x=v);var C=x.reduce(function(A,O){return A[O]=jc(n,{placement:O,boundary:r,rootBoundary:s,padding:o})[no(O)],A},{});return Object.keys(C).sort(function(A,O){return C[A]-C[O]})}function qde(n){if(no(n)===dE)return[];var t=h0(n);return[gE(n),t,gE(t)]}function Xde(n){var t=n.state,e=n.options,i=n.name;if(!t.modifiersData[i]._skip){for(var r=e.mainAxis,s=r===void 0?!0:r,o=e.altAxis,a=o===void 0?!0:o,u=e.fallbackPlacements,d=e.padding,g=e.boundary,v=e.rootBoundary,x=e.altBoundary,C=e.flipVariations,A=C===void 0?!0:C,O=e.allowedAutoPlacements,N=t.options.placement,T=no(N),j=T===N,Z=u||(j||!A?[h0(N)]:qde(N)),$=[N].concat(Z).reduce(function(Ie,at){return Ie.concat(no(at)===dE?fL(t,{placement:at,boundary:g,rootBoundary:v,padding:d,flipVariations:A,allowedAutoPlacements:O}):at)},[]),le=t.rects.reference,K=t.rects.popper,oe=new Map,ue=!0,te=$[0],V=0;V<$.length;V++){var se=$[V],we=no(se),de=ql(se)===zh,je=[ts,Gs].indexOf(we)>=0,Ue=je?"width":"height",he=jc(t,{placement:se,boundary:g,rootBoundary:v,altBoundary:x,padding:d}),Pe=je?de?Ds:us:de?Gs:ts;le[Ue]>K[Ue]&&(Pe=h0(Pe));var me=h0(Pe),$e=[];if(s&&$e.push(he[we]<=0),a&&$e.push(he[Pe]<=0,he[me]<=0),$e.every(function(Ie){return Ie})){te=se,ue=!1;break}oe.set(se,$e)}if(ue)for(var nt=A?3:1,xt=function(at){var Pt=$.find(function(rt){var Ut=oe.get(rt);if(Ut)return Ut.slice(0,at).every(function(Cn){return Cn})});if(Pt)return te=Pt,"break"},Tt=nt;Tt>0;Tt--){var ut=xt(Tt);if(ut==="break")break}t.placement!==te&&(t.modifiersData[i]._skip=!0,t.placement=te,t.reset=!0)}}var G9={name:"flip",enabled:!0,phase:"main",fn:Xde,requiresIfExists:["offset"],data:{_skip:!1}};function $9(n,t,e){return e===void 0&&(e={x:0,y:0}),{top:n.top-t.height-e.y,right:n.right-t.width+e.x,bottom:n.bottom-t.height+e.y,left:n.left-t.width-e.x}}function q9(n){return[ts,Ds,Gs,us].some(function(t){return n[t]>=0})}function Yde(n){var t=n.state,e=n.name,i=t.rects.reference,r=t.rects.popper,s=t.modifiersData.preventOverflow,o=jc(t,{elementContext:"reference"}),a=jc(t,{altBoundary:!0}),u=$9(o,i),d=$9(a,r,s),g=q9(u),v=q9(d);t.modifiersData[e]={referenceClippingOffsets:u,popperEscapeOffsets:d,isReferenceHidden:g,hasPopperEscaped:v},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":v})}var X9={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Yde};function Zde(n,t,e){var i=no(n),r=[us,ts].indexOf(i)>=0?-1:1,s=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[us,Ds].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function Kde(n){var t=n.state,e=n.options,i=n.name,r=e.offset,s=r===void 0?[0,0]:r,o=pE.reduce(function(g,v){return g[v]=Zde(v,t.rects,s),g},{}),a=o[t.placement],u=a.x,d=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=d),t.modifiersData[i]=o}var Y9={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Kde};function Qde(n){var t=n.state,e=n.name;t.modifiersData[e]=kb({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Z9={name:"popperOffsets",enabled:!0,phase:"read",fn:Qde,data:{}};function pL(n){return n==="x"?"y":"x"}function Jde(n){var t=n.state,e=n.options,i=n.name,r=e.mainAxis,s=r===void 0?!0:r,o=e.altAxis,a=o===void 0?!1:o,u=e.boundary,d=e.rootBoundary,g=e.altBoundary,v=e.padding,x=e.tether,C=x===void 0?!0:x,A=e.tetherOffset,O=A===void 0?0:A,N=jc(t,{boundary:u,rootBoundary:d,padding:v,altBoundary:g}),T=no(t.placement),j=ql(t.placement),Z=!j,$=am(T),le=pL($),K=t.modifiersData.popperOffsets,oe=t.rects.reference,ue=t.rects.popper,te=typeof O=="function"?O(Object.assign({},t.rects,{placement:t.placement})):O,V=typeof te=="number"?{mainAxis:te,altAxis:te}:Object.assign({mainAxis:0,altAxis:0},te),se=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,we={x:0,y:0};if(K){if(s){var de,je=$==="y"?ts:us,Ue=$==="y"?Gs:Ds,he=$==="y"?"height":"width",Pe=K[$],me=Pe+N[je],$e=Pe-N[Ue],nt=C?-ue[he]/2:0,xt=j===zh?oe[he]:ue[he],Tt=j===zh?-ue[he]:-oe[he],ut=t.elements.arrow,Ie=C&&ut?om(ut):{width:0,height:0},at=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Ib(),Pt=at[je],rt=at[Ue],Ut=lm(0,oe[he],Ie[he]),Cn=Z?oe[he]/2-nt-Ut-Pt-V.mainAxis:xt-Ut-Pt-V.mainAxis,hn=Z?-oe[he]/2+nt+Ut+rt+V.mainAxis:Tt+Ut+rt+V.mainAxis,Mt=t.elements.arrow&&Hc(t.elements.arrow),Xi=Mt?$==="y"?Mt.clientTop||0:Mt.clientLeft||0:0,Fn=(de=se?.[$])!=null?de:0,Me=Pe+Cn-Fn-Xi,hr=Pe+hn-Fn,Kn=lm(C?sm(me,Me):me,Pe,C?Uc($e,hr):$e);K[$]=Kn,we[$]=Kn-Pe}if(a){var hi,rn=$==="x"?ts:us,Jn=$==="x"?Gs:Ds,dn=K[le],In=le==="y"?"height":"width",Gi=dn+N[rn],fe=dn-N[Jn],J=[ts,us].indexOf(T)!==-1,Ge=(hi=se?.[le])!=null?hi:0,it=J?Gi:dn-oe[In]-ue[In]-Ge+V.altAxis,ht=J?dn+oe[In]+ue[In]-Ge-V.altAxis:fe,Ke=C&&J?V9(it,dn,ht):lm(C?it:Gi,dn,C?ht:fe);K[le]=Ke,we[le]=Ke-dn}t.modifiersData[i]=we}}var K9={name:"preventOverflow",enabled:!0,phase:"main",fn:Jde,requiresIfExists:["offset"]};function mL(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function gL(n){return n===Hr(n)||!$s(n)?cm(n):mL(n)}function efe(n){var t=n.getBoundingClientRect(),e=Uh(t.width)/n.offsetWidth||1,i=Uh(t.height)/n.offsetHeight||1;return e!==1||i!==1}function yL(n,t,e){e===void 0&&(e=!1);var i=$s(t),r=$s(t)&&efe(t),s=po(t),o=$l(n,r,e),a={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(i||!i&&!e)&&((to(t)!=="body"||hm(s))&&(a=gL(t)),$s(t)?(u=$l(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):s&&(u.x=um(s))),{x:o.left+a.scrollLeft-u.x,y:o.top+a.scrollTop-u.y,width:o.width,height:o.height}}function tfe(n){var t=new Map,e=new Set,i=[];n.forEach(function(s){t.set(s.name,s)});function r(s){e.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var u=t.get(a);u&&r(u)}}),i.push(s)}return n.forEach(function(s){e.has(s.name)||r(s)}),i}function vL(n){var t=tfe(n);return O9.reduce(function(e,i){return e.concat(t.filter(function(r){return r.phase===i}))},[])}function _L(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function bL(n){var t=n.reduce(function(e,i){var r=e[i.name];return e[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,e},{});return Object.keys(t).map(function(e){return t[e]})}var Q9={placement:"bottom",modifiers:[],strategy:"absolute"};function J9(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function ej(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,i=e===void 0?[]:e,r=t.defaultOptions,s=r===void 0?Q9:r;return function(a,u,d){d===void 0&&(d=s);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},Q9,s),modifiersData:{},elements:{reference:a,popper:u},attributes:{},styles:{}},v=[],x=!1,C={state:g,setOptions:function(T){var j=typeof T=="function"?T(g.options):T;O(),g.options=Object.assign({},s,g.options,j),g.scrollParents={reference:Gl(a)?cf(a):a.contextElement?cf(a.contextElement):[],popper:cf(u)};var Z=vL(bL([].concat(i,g.options.modifiers)));return g.orderedModifiers=Z.filter(function($){return $.enabled}),A(),C.update()},forceUpdate:function(){if(!x){var T=g.elements,j=T.reference,Z=T.popper;if(J9(j,Z)){g.rects={reference:yL(j,Hc(Z),g.options.strategy==="fixed"),popper:om(Z)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(V){return g.modifiersData[V.name]=Object.assign({},V.data)});for(var $=0;$<g.orderedModifiers.length;$++){if(g.reset===!0){g.reset=!1,$=-1;continue}var le=g.orderedModifiers[$],K=le.fn,oe=le.options,ue=oe===void 0?{}:oe,te=le.name;typeof K=="function"&&(g=K({state:g,options:ue,name:te,instance:C})||g)}}}},update:_L(function(){return new Promise(function(N){C.forceUpdate(),N(g)})}),destroy:function(){O(),x=!0}};if(!J9(a,u))return C;C.setOptions(d).then(function(N){!x&&d.onFirstUpdate&&d.onFirstUpdate(N)});function A(){g.orderedModifiers.forEach(function(N){var T=N.name,j=N.options,Z=j===void 0?{}:j,$=N.effect;if(typeof $=="function"){var le=$({state:g,name:T,instance:C,options:Z}),K=function(){};v.push(le||K)}})}function O(){v.forEach(function(N){return N()}),v=[]}return C}}var nfe=[j9,Z9,H9,F9,Y9,G9,K9,z9,X9],dm=ej({defaultModifiers:nfe});var uf=function(){return uf=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},uf.apply(this,arguments)},vE=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},hf={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onShow:function(){},onHide:function(){},onToggle:function(){}},ife={id:null,override:!0},tj=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=hf),r===void 0&&(r=ife),this._instanceId=r.id?r.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=uf(uf({},hf),i),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),On.addInstance("Dropdown",this,this._instanceId,r.override)}return n.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._popperInstance=this._createPopperInstance(),this._setupEventListeners(),this._initialized=!0)},n.prototype.destroy=function(){var t=this,e=this._getTriggerEvents();this._options.triggerType==="click"&&e.showEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._clickHandler)}),this._options.triggerType==="hover"&&(e.showEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._hoverShowTriggerElHandler),t._targetEl.removeEventListener(i,t._hoverShowTargetElHandler)}),e.hideEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._hoverHideHandler),t._targetEl.removeEventListener(i,t._hoverHideHandler)})),this._popperInstance.destroy(),this._initialized=!1},n.prototype.removeInstance=function(){On.removeInstance("Dropdown",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype._setupEventListeners=function(){var t=this,e=this._getTriggerEvents();this._clickHandler=function(){t.toggle()},this._options.triggerType==="click"&&e.showEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._clickHandler)}),this._hoverShowTriggerElHandler=function(i){i.type==="click"?t.toggle():setTimeout(function(){t.show()},t._options.delay)},this._hoverShowTargetElHandler=function(){t.show()},this._hoverHideHandler=function(){setTimeout(function(){t._targetEl.matches(":hover")||t.hide()},t._options.delay)},this._options.triggerType==="hover"&&(e.showEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._hoverShowTriggerElHandler),t._targetEl.addEventListener(i,t._hoverShowTargetElHandler)}),e.hideEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._hoverHideHandler),t._targetEl.addEventListener(i,t._hoverHideHandler)}))},n.prototype._createPopperInstance=function(){return dm(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},n.prototype._setupClickOutsideListener=function(){var t=this;this._clickOutsideEventListener=function(e){t._handleClickOutside(e,t._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._handleClickOutside=function(t,e){var i=t.target,r=this._options.ignoreClickOutsideClass,s=!1;if(r){var o=document.querySelectorAll(".".concat(r));o.forEach(function(a){if(a.contains(i)){s=!0;return}})}i!==e&&!e.contains(i)&&!this._triggerEl.contains(i)&&!s&&this.isVisible()&&this.hide()},n.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["click"],hideEvents:[]}}},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},n.prototype.isVisible=function(){return this._visible},n.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._targetEl.removeAttribute("aria-hidden"),this._popperInstance.setOptions(function(t){return uf(uf({},t),{modifiers:vE(vE([],t.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},n.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._targetEl.setAttribute("aria-hidden","true"),this._popperInstance.setOptions(function(t){return uf(uf({},t),{modifiers:vE(vE([],t.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},n.prototype.updateOnShow=function(t){this._options.onShow=t},n.prototype.updateOnHide=function(t){this._options.onHide=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function f0(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(n){var t=n.getAttribute("data-dropdown-toggle"),e=document.getElementById(t);if(e){var i=n.getAttribute("data-dropdown-placement"),r=n.getAttribute("data-dropdown-offset-skidding"),s=n.getAttribute("data-dropdown-offset-distance"),o=n.getAttribute("data-dropdown-trigger"),a=n.getAttribute("data-dropdown-delay"),u=n.getAttribute("data-dropdown-ignore-click-outside-class");new tj(e,n,{placement:i||hf.placement,triggerType:o||hf.triggerType,offsetSkidding:r?parseInt(r):hf.offsetSkidding,offsetDistance:s?parseInt(s):hf.offsetDistance,delay:a?parseInt(a):hf.delay,ignoreClickOutsideClass:u||hf.ignoreClickOutsideClass})}else console.error('The dropdown element with id "'.concat(t,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=tj,window.initDropdowns=f0);var _E=function(){return _E=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_E.apply(this,arguments)},bE={placement:"center",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},rfe={id:null,override:!0},nj=function(){function n(t,e,i){t===void 0&&(t=null),e===void 0&&(e=bE),i===void 0&&(i=rfe),this._eventListenerInstances=[],this._instanceId=i.id?i.id:t.id,this._targetEl=t,this._options=_E(_E({},bE),e),this._isHidden=!0,this._backdropEl=null,this._initialized=!1,this.init(),On.addInstance("Modal",this,this._instanceId,i.override)}return n.prototype.init=function(){var t=this;this._targetEl&&!this._initialized&&(this._getPlacementClasses().map(function(e){t._targetEl.classList.add(e)}),this._initialized=!0)},n.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),this._initialized=!1)},n.prototype.removeInstance=function(){On.removeInstance("Modal",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype._createBackdrop=function(){var t;if(this._isHidden){var e=document.createElement("div");(t=e.classList).add.apply(t,this._options.backdropClasses.split(" ")),document.querySelector("body").append(e),this._backdropEl=e}},n.prototype._destroyBackdropEl=function(){!this._isHidden&&this._backdropEl&&(this._backdropEl.remove(),this._backdropEl=null)},n.prototype._setupModalCloseEventListeners=function(){var t=this;this._options.backdrop==="dynamic"&&(this._clickOutsideEventListener=function(e){t._handleOutsideClick(e.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(e){e.key==="Escape"&&t.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},n.prototype._removeModalCloseEventListeners=function(){this._options.backdrop==="dynamic"&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},n.prototype._handleOutsideClick=function(t){(t===this._targetEl||t===this._backdropEl&&this.isVisible())&&this.hide()},n.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"];default:return["justify-center","items-center"]}},n.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},n.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,this._options.closable&&this._setupModalCloseEventListeners(),document.body.classList.add("overflow-hidden"),this._options.onShow(this))},n.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},n.prototype.isVisible=function(){return!this._isHidden},n.prototype.isHidden=function(){return this._isHidden},n.prototype.addEventListenerInstance=function(t,e,i){this._eventListenerInstances.push({element:t,type:e,handler:i})},n.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(t){t.element.removeEventListener(t.type,t.handler)}),this._eventListenerInstances=[]},n.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},n.prototype.updateOnShow=function(t){this._options.onShow=t},n.prototype.updateOnHide=function(t){this._options.onHide=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function p0(){document.querySelectorAll("[data-modal-target]").forEach(function(n){var t=n.getAttribute("data-modal-target"),e=document.getElementById(t);if(e){var i=e.getAttribute("data-modal-placement"),r=e.getAttribute("data-modal-backdrop");new nj(e,{placement:i||bE.placement,backdrop:r||bE.backdrop})}else console.error("Modal with id ".concat(t," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(n){var t=n.getAttribute("data-modal-toggle"),e=document.getElementById(t);if(e){var i=On.getInstance("Modal",t);if(i){var r=function(){i.toggle()};n.addEventListener("click",r),i.addEventListenerInstance(n,"click",r)}else console.error("Modal with id ".concat(t," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(t," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(n){var t=n.getAttribute("data-modal-show"),e=document.getElementById(t);if(e){var i=On.getInstance("Modal",t);if(i){var r=function(){i.show()};n.addEventListener("click",r),i.addEventListenerInstance(n,"click",r)}else console.error("Modal with id ".concat(t," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(t," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(n){var t=n.getAttribute("data-modal-hide"),e=document.getElementById(t);if(e){var i=On.getInstance("Modal",t);if(i){var r=function(){i.hide()};n.addEventListener("click",r),i.addEventListenerInstance(n,"click",r)}else console.error("Modal with id ".concat(t," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(t," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=nj,window.initModals=p0);var xE=function(){return xE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xE.apply(this,arguments)},fm={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},sfe={id:null,override:!0},ij=function(){function n(t,e,i){t===void 0&&(t=null),e===void 0&&(e=fm),i===void 0&&(i=sfe),this._eventListenerInstances=[],this._instanceId=i.id?i.id:t.id,this._targetEl=t,this._options=xE(xE({},fm),e),this._visible=!1,this._initialized=!1,this.init(),On.addInstance("Drawer",this,this._instanceId,i.override)}return n.prototype.init=function(){var t=this;this._targetEl&&!this._initialized&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform"),this._getPlacementClasses(this._options.placement).base.map(function(e){t._targetEl.classList.add(e)}),this._handleEscapeKey=function(e){e.key==="Escape"&&t.isVisible()&&t.hide()},document.addEventListener("keydown",this._handleEscapeKey),this._initialized=!0)},n.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),document.removeEventListener("keydown",this._handleEscapeKey),this._initialized=!1)},n.prototype.removeInstance=function(){On.removeInstance("Drawer",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.hide=function(){var t=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(e){t._targetEl.classList.remove(e)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(e){t._targetEl.classList.add(e)})):(this._getPlacementClasses(this._options.placement).active.map(function(e){t._targetEl.classList.remove(e)}),this._getPlacementClasses(this._options.placement).inactive.map(function(e){t._targetEl.classList.add(e)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},n.prototype.show=function(){var t=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(e){t._targetEl.classList.add(e)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(e){t._targetEl.classList.remove(e)})):(this._getPlacementClasses(this._options.placement).active.map(function(e){t._targetEl.classList.add(e)}),this._getPlacementClasses(this._options.placement).inactive.map(function(e){t._targetEl.classList.remove(e)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},n.prototype._createBackdrop=function(){var t,e=this;if(!this._visible){var i=document.createElement("div");i.setAttribute("drawer-backdrop",""),(t=i.classList).add.apply(t,this._options.backdropClasses.split(" ")),document.querySelector("body").append(i),i.addEventListener("click",function(){e.hide()})}},n.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]")!==null&&document.querySelector("[drawer-backdrop]").remove()},n.prototype._getPlacementClasses=function(t){switch(t){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]};default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]}}},n.prototype.isHidden=function(){return!this._visible},n.prototype.isVisible=function(){return this._visible},n.prototype.addEventListenerInstance=function(t,e,i){this._eventListenerInstances.push({element:t,type:e,handler:i})},n.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(t){t.element.removeEventListener(t.type,t.handler)}),this._eventListenerInstances=[]},n.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},n.prototype.updateOnShow=function(t){this._options.onShow=t},n.prototype.updateOnHide=function(t){this._options.onHide=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function m0(){document.querySelectorAll("[data-drawer-target]").forEach(function(n){var t=n.getAttribute("data-drawer-target"),e=document.getElementById(t);if(e){var i=n.getAttribute("data-drawer-placement"),r=n.getAttribute("data-drawer-body-scrolling"),s=n.getAttribute("data-drawer-backdrop"),o=n.getAttribute("data-drawer-edge"),a=n.getAttribute("data-drawer-edge-offset");new ij(e,{placement:i||fm.placement,bodyScrolling:r?r==="true":fm.bodyScrolling,backdrop:s?s==="true":fm.backdrop,edge:o?o==="true":fm.edge,edgeOffset:a||fm.edgeOffset})}else console.error("Drawer with id ".concat(t," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(n){var t=n.getAttribute("data-drawer-toggle"),e=document.getElementById(t);if(e){var i=On.getInstance("Drawer",t);if(i){var r=function(){i.toggle()};n.addEventListener("click",r),i.addEventListenerInstance(n,"click",r)}else console.error("Drawer with id ".concat(t," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(t," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(n){var t=n.getAttribute("data-drawer-dismiss")?n.getAttribute("data-drawer-dismiss"):n.getAttribute("data-drawer-hide"),e=document.getElementById(t);if(e){var i=On.getInstance("Drawer",t);if(i){var r=function(){i.hide()};n.addEventListener("click",r),i.addEventListenerInstance(n,"click",r)}else console.error("Drawer with id ".concat(t," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(t," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(n){var t=n.getAttribute("data-drawer-show"),e=document.getElementById(t);if(e){var i=On.getInstance("Drawer",t);if(i){var r=function(){i.show()};n.addEventListener("click",r),i.addEventListenerInstance(n,"click",r)}else console.error("Drawer with id ".concat(t," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(t," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=ij,window.initDrawers=m0);var wE=function(){return wE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wE.apply(this,arguments)},SE={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},ofe={id:null,override:!0},rj=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=[]),i===void 0&&(i=SE),r===void 0&&(r=ofe),this._instanceId=r.id?r.id:t.id,this._tabsEl=t,this._items=e,this._activeTab=i?this.getTab(i.defaultTabId):null,this._options=wE(wE({},SE),i),this._initialized=!1,this.init(),On.addInstance("Tabs",this,this._instanceId,r.override)}return n.prototype.init=function(){var t=this;this._items.length&&!this._initialized&&(this._activeTab||this.setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(e){e.triggerEl.addEventListener("click",function(i){i.preventDefault(),t.show(e.id)})}))},n.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},n.prototype.removeInstance=function(){this.destroy(),On.removeInstance("Tabs",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getActiveTab=function(){return this._activeTab},n.prototype.setActiveTab=function(t){this._activeTab=t},n.prototype.getTab=function(t){return this._items.filter(function(e){return e.id===t})[0]},n.prototype.show=function(t,e){var i,r,s=this;e===void 0&&(e=!1);var o=this.getTab(t);o===this._activeTab&&!e||(this._items.map(function(a){var u,d;a!==o&&((u=a.triggerEl.classList).remove.apply(u,s._options.activeClasses.split(" ")),(d=a.triggerEl.classList).add.apply(d,s._options.inactiveClasses.split(" ")),a.targetEl.classList.add("hidden"),a.triggerEl.setAttribute("aria-selected","false"))}),(i=o.triggerEl.classList).add.apply(i,this._options.activeClasses.split(" ")),(r=o.triggerEl.classList).remove.apply(r,this._options.inactiveClasses.split(" ")),o.triggerEl.setAttribute("aria-selected","true"),o.targetEl.classList.remove("hidden"),this.setActiveTab(o),this._options.onShow(this,o))},n.prototype.updateOnShow=function(t){this._options.onShow=t},n}();function g0(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(n){var t=[],e=n.getAttribute("data-tabs-active-classes"),i=n.getAttribute("data-tabs-inactive-classes"),r=null;n.querySelectorAll('[role="tab"]').forEach(function(s){var o=s.getAttribute("aria-selected")==="true",a={id:s.getAttribute("data-tabs-target"),triggerEl:s,targetEl:document.querySelector(s.getAttribute("data-tabs-target"))};t.push(a),o&&(r=a.id)}),new rj(n,t,{defaultTabId:r,activeClasses:e||SE.activeClasses,inactiveClasses:i||SE.inactiveClasses})})}typeof window<"u"&&(window.Tabs=rj,window.initTabs=g0);var df=function(){return df=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},df.apply(this,arguments)},CE=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},ME={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},afe={id:null,override:!0},sj=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=ME),r===void 0&&(r=afe),this._instanceId=r.id?r.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=df(df({},ME),i),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),On.addInstance("Tooltip",this,this._instanceId,r.override)}return n.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},n.prototype.destroy=function(){var t=this;if(this._initialized){var e=this._getTriggerEvents();e.showEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._showHandler)}),e.hideEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},n.prototype.removeInstance=function(){On.removeInstance("Tooltip",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype._setupEventListeners=function(){var t=this,e=this._getTriggerEvents();this._showHandler=function(){t.show()},this._hideHandler=function(){t.hide()},e.showEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._showHandler)}),e.hideEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._hideHandler)})},n.prototype._createPopperInstance=function(){return dm(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},n.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},n.prototype._setupKeydownListener=function(){var t=this;this._keydownEventListener=function(e){e.key==="Escape"&&t.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},n.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},n.prototype._setupClickOutsideListener=function(){var t=this;this._clickOutsideEventListener=function(e){t._handleClickOutside(e,t._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._handleClickOutside=function(t,e){var i=t.target;i!==e&&!e.contains(i)&&!this._triggerEl.contains(i)&&this.isVisible()&&this.hide()},n.prototype.isVisible=function(){return this._visible},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},n.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(t){return df(df({},t),{modifiers:CE(CE([],t.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},n.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(t){return df(df({},t),{modifiers:CE(CE([],t.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},n.prototype.updateOnShow=function(t){this._options.onShow=t},n.prototype.updateOnHide=function(t){this._options.onHide=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function y0(){document.querySelectorAll("[data-tooltip-target]").forEach(function(n){var t=n.getAttribute("data-tooltip-target"),e=document.getElementById(t);if(e){var i=n.getAttribute("data-tooltip-trigger"),r=n.getAttribute("data-tooltip-placement");new sj(e,n,{placement:r||ME.placement,triggerType:i||ME.triggerType})}else console.error('The tooltip element with id "'.concat(t,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=sj,window.initTooltips=y0);var ff=function(){return ff=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ff.apply(this,arguments)},EE=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},Lb={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},lfe={id:null,override:!0},oj=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=Lb),r===void 0&&(r=lfe),this._instanceId=r.id?r.id:t.id,this._targetEl=t,this._triggerEl=e,this._options=ff(ff({},Lb),i),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),On.addInstance("Popover",this,r.id?r.id:this._targetEl.id,r.override)}return n.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},n.prototype.destroy=function(){var t=this;if(this._initialized){var e=this._getTriggerEvents();e.showEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._showHandler),t._targetEl.removeEventListener(i,t._showHandler)}),e.hideEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._hideHandler),t._targetEl.removeEventListener(i,t._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},n.prototype.removeInstance=function(){On.removeInstance("Popover",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype._setupEventListeners=function(){var t=this,e=this._getTriggerEvents();this._showHandler=function(){t.show()},this._hideHandler=function(){setTimeout(function(){t._targetEl.matches(":hover")||t.hide()},100)},e.showEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._showHandler),t._targetEl.addEventListener(i,t._showHandler)}),e.hideEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._hideHandler),t._targetEl.addEventListener(i,t._hideHandler)})},n.prototype._createPopperInstance=function(){return dm(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},n.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},n.prototype._setupKeydownListener=function(){var t=this;this._keydownEventListener=function(e){e.key==="Escape"&&t.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},n.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},n.prototype._setupClickOutsideListener=function(){var t=this;this._clickOutsideEventListener=function(e){t._handleClickOutside(e,t._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._handleClickOutside=function(t,e){var i=t.target;i!==e&&!e.contains(i)&&!this._triggerEl.contains(i)&&this.isVisible()&&this.hide()},n.prototype.isVisible=function(){return this._visible},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},n.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(t){return ff(ff({},t),{modifiers:EE(EE([],t.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},n.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(t){return ff(ff({},t),{modifiers:EE(EE([],t.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},n.prototype.updateOnShow=function(t){this._options.onShow=t},n.prototype.updateOnHide=function(t){this._options.onHide=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function v0(){document.querySelectorAll("[data-popover-target]").forEach(function(n){var t=n.getAttribute("data-popover-target"),e=document.getElementById(t);if(e){var i=n.getAttribute("data-popover-trigger"),r=n.getAttribute("data-popover-placement"),s=n.getAttribute("data-popover-offset");new oj(e,n,{placement:r||Lb.placement,offset:s?parseInt(s):Lb.offset,triggerType:i||Lb.triggerType})}else console.error('The popover element with id "'.concat(t,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=oj,window.initPopovers=v0);var TE=function(){return TE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},TE.apply(this,arguments)},xL={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},cfe={id:null,override:!0},aj=function(){function n(t,e,i,r,s){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=null),r===void 0&&(r=xL),s===void 0&&(s=cfe),this._instanceId=s.id?s.id:i.id,this._parentEl=t,this._triggerEl=e,this._targetEl=i,this._options=TE(TE({},xL),r),this._visible=!1,this._initialized=!1,this.init(),On.addInstance("Dial",this,this._instanceId,s.override)}return n.prototype.init=function(){var t=this;if(this._triggerEl&&this._targetEl&&!this._initialized){var e=this._getTriggerEventTypes(this._options.triggerType);this._showEventHandler=function(){t.show()},e.showEvents.forEach(function(i){t._triggerEl.addEventListener(i,t._showEventHandler),t._targetEl.addEventListener(i,t._showEventHandler)}),this._hideEventHandler=function(){t._parentEl.matches(":hover")||t.hide()},e.hideEvents.forEach(function(i){t._parentEl.addEventListener(i,t._hideEventHandler)}),this._initialized=!0}},n.prototype.destroy=function(){var t=this;if(this._initialized){var e=this._getTriggerEventTypes(this._options.triggerType);e.showEvents.forEach(function(i){t._triggerEl.removeEventListener(i,t._showEventHandler),t._targetEl.removeEventListener(i,t._showEventHandler)}),e.hideEvents.forEach(function(i){t._parentEl.removeEventListener(i,t._hideEventHandler)}),this._initialized=!1}},n.prototype.removeInstance=function(){On.removeInstance("Dial",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},n.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},n.prototype.toggle=function(){this._visible?this.hide():this.show()},n.prototype.isHidden=function(){return!this._visible},n.prototype.isVisible=function(){return this._visible},n.prototype._getTriggerEventTypes=function(t){switch(t){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},n.prototype.updateOnShow=function(t){this._options.onShow=t},n.prototype.updateOnHide=function(t){this._options.onHide=t},n.prototype.updateOnToggle=function(t){this._options.onToggle=t},n}();function _0(){document.querySelectorAll("[data-dial-init]").forEach(function(n){var t=n.querySelector("[data-dial-toggle]");if(t){var e=t.getAttribute("data-dial-toggle"),i=document.getElementById(e);if(i){var r=t.getAttribute("data-dial-trigger");new aj(n,t,i,{triggerType:r||xL.triggerType})}else console.error("Dial with id ".concat(e," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(n.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}typeof window<"u"&&(window.Dial=aj,window.initDials=_0);var AE=function(){return AE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},AE.apply(this,arguments)},lj={minValue:null,maxValue:null,onIncrement:function(){},onDecrement:function(){}},ufe={id:null,override:!0},cj=function(){function n(t,e,i,r,s){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=null),r===void 0&&(r=lj),s===void 0&&(s=ufe),this._instanceId=s.id?s.id:t.id,this._targetEl=t,this._incrementEl=e,this._decrementEl=i,this._options=AE(AE({},lj),r),this._initialized=!1,this.init(),On.addInstance("InputCounter",this,this._instanceId,s.override)}return n.prototype.init=function(){var t=this;this._targetEl&&!this._initialized&&(this._inputHandler=function(e){{var i=e.target;/^\d*$/.test(i.value)||(i.value=i.value.replace(/[^\d]/g,"")),t._options.maxValue!==null&&parseInt(i.value)>t._options.maxValue&&(i.value=t._options.maxValue.toString()),t._options.minValue!==null&&parseInt(i.value)<t._options.minValue&&(i.value=t._options.minValue.toString())}},this._incrementClickHandler=function(){t.increment()},this._decrementClickHandler=function(){t.decrement()},this._targetEl.addEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.addEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.addEventListener("click",this._decrementClickHandler),this._initialized=!0)},n.prototype.destroy=function(){this._targetEl&&this._initialized&&(this._targetEl.removeEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.removeEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.removeEventListener("click",this._decrementClickHandler),this._initialized=!1)},n.prototype.removeInstance=function(){On.removeInstance("InputCounter",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getCurrentValue=function(){return parseInt(this._targetEl.value)||0},n.prototype.increment=function(){this._options.maxValue!==null&&this.getCurrentValue()>=this._options.maxValue||(this._targetEl.value=(this.getCurrentValue()+1).toString(),this._options.onIncrement(this))},n.prototype.decrement=function(){this._options.minValue!==null&&this.getCurrentValue()<=this._options.minValue||(this._targetEl.value=(this.getCurrentValue()-1).toString(),this._options.onDecrement(this))},n.prototype.updateOnIncrement=function(t){this._options.onIncrement=t},n.prototype.updateOnDecrement=function(t){this._options.onDecrement=t},n}();function b0(){document.querySelectorAll("[data-input-counter]").forEach(function(n){var t=n.id,e=document.querySelector('[data-input-counter-increment="'+t+'"]'),i=document.querySelector('[data-input-counter-decrement="'+t+'"]'),r=n.getAttribute("data-input-counter-min"),s=n.getAttribute("data-input-counter-max");n?On.instanceExists("InputCounter",n.getAttribute("id"))||new cj(n,e||null,i||null,{minValue:r?parseInt(r):null,maxValue:s?parseInt(s):null}):console.error('The target element with id "'.concat(t,'" does not exist. Please check the data-input-counter attribute.'))})}typeof window<"u"&&(window.InputCounter=cj,window.initInputCounters=b0);var DE=function(){return DE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},DE.apply(this,arguments)},IE={htmlEntities:!1,contentType:"input",onCopy:function(){}},hfe={id:null,override:!0},uj=function(){function n(t,e,i,r){t===void 0&&(t=null),e===void 0&&(e=null),i===void 0&&(i=IE),r===void 0&&(r=hfe),this._instanceId=r.id?r.id:e.id,this._triggerEl=t,this._targetEl=e,this._options=DE(DE({},IE),i),this._initialized=!1,this.init(),On.addInstance("CopyClipboard",this,this._instanceId,r.override)}return n.prototype.init=function(){var t=this;this._targetEl&&this._triggerEl&&!this._initialized&&(this._triggerElClickHandler=function(){t.copy()},this._triggerEl&&this._triggerEl.addEventListener("click",this._triggerElClickHandler),this._initialized=!0)},n.prototype.destroy=function(){this._triggerEl&&this._targetEl&&this._initialized&&(this._triggerEl&&this._triggerEl.removeEventListener("click",this._triggerElClickHandler),this._initialized=!1)},n.prototype.removeInstance=function(){On.removeInstance("CopyClipboard",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getTargetValue=function(){if(this._options.contentType==="input")return this._targetEl.value;if(this._options.contentType==="innerHTML")return this._targetEl.innerHTML;if(this._options.contentType==="textContent")return this._targetEl.textContent.replace(/\s+/g," ").trim()},n.prototype.copy=function(){var t=this.getTargetValue();this._options.htmlEntities&&(t=this.decodeHTML(t));var e=document.createElement("textarea");return e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this._options.onCopy(this),t},n.prototype.decodeHTML=function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.textContent},n.prototype.updateOnCopyCallback=function(t){this._options.onCopy=t},n}();function x0(){document.querySelectorAll("[data-copy-to-clipboard-target]").forEach(function(n){var t=n.getAttribute("data-copy-to-clipboard-target"),e=document.getElementById(t),i=n.getAttribute("data-copy-to-clipboard-content-type"),r=n.getAttribute("data-copy-to-clipboard-html-entities");e?On.instanceExists("CopyClipboard",e.getAttribute("id"))||new uj(n,e,{htmlEntities:r&&r==="true"?!0:IE.htmlEntities,contentType:i||IE.contentType}):console.error('The target element with id "'.concat(t,'" does not exist. Please check the data-copy-to-clipboard-target attribute.'))})}typeof window<"u"&&(window.CopyClipboard=uj,window.initClipboards=x0);function DL(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function dfe(n){if(Array.isArray(n))return n}function ffe(n){if(Array.isArray(n))return DL(n)}function pfe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function kL(n,t,e){return t=mf(t),_fe(n,Dj()?Reflect.construct(t,e||[],mf(n).constructor):t.apply(n,e))}function gm(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function hj(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,wfe(i.key),i)}}function ym(n,t,e){return t&&hj(n.prototype,t),e&&hj(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Vb(){return Vb=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,t,e){var i=bfe(n,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?n:e):r.value}},Vb.apply(null,arguments)}function mf(n){return mf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mf(n)}function LL(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&IL(n,t)}function Dj(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dj=function(){return!!n})()}function mfe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function gfe(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,r,s,o,a=[],u=!0,d=!1;try{if(s=(e=e.call(n)).next,t===0){if(Object(e)!==e)return;u=!1}else for(;!(u=(i=s.call(e)).done)&&(a.push(i.value),a.length!==t);u=!0);}catch(g){d=!0,r=g}finally{try{if(!u&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(d)throw r}}return a}}function yfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _fe(n,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pfe(n)}function IL(n,t){return IL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},IL(n,t)}function ul(n,t){return dfe(n)||gfe(n,t)||Ij(n,t)||yfe()}function bfe(n,t){for(;!{}.hasOwnProperty.call(n,t)&&(n=mf(n))!==null;);return n}function Hb(n){return ffe(n)||mfe(n)||Ij(n)||vfe()}function xfe(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function wfe(n){var t=xfe(n,"string");return typeof t=="symbol"?t:t+""}function kE(n){"@babel/helpers - typeof";return kE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kE(n)}function Ij(n,t){if(n){if(typeof n=="string")return DL(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?DL(n,t):void 0}}function jh(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function NL(n){return n[n.length-1]}function mm(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return e.forEach(function(r){n.includes(r)||n.push(r)}),n}function wL(n,t){return n?n.split(t):[]}function OL(n,t,e){var i=t===void 0||n>=t,r=e===void 0||n<=e;return i&&r}function Rj(n,t,e){return n<t?t:n>e?e:n}function M0(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",s=Object.keys(e).reduce(function(a,u){var d=e[u];return typeof d=="function"&&(d=d(i)),"".concat(a," ").concat(u,'="').concat(d,'"')},n);r+="<".concat(s,"></").concat(n,">");var o=i+1;return o<t?M0(n,t,e,o,r):r}function FL(n){return n.replace(/>\s+/g,">").replace(/\s+</,"<")}function RL(n){return new Date(n).setHours(0,0,0,0)}function vm(){return new Date().setHours(0,0,0,0)}function pf(){switch(arguments.length){case 0:return vm();case 1:return RL(arguments.length<=0?void 0:arguments[0])}var n=new Date(0);return n.setFullYear.apply(n,arguments),n.setHours(0,0,0,0)}function w0(n,t){var e=new Date(n);return e.setDate(e.getDate()+t)}function Sfe(n,t){return w0(n,t*7)}function LE(n,t){var e=new Date(n),i=e.getMonth()+t,r=i%12;r<0&&(r+=12);var s=e.setMonth(i);return e.getMonth()!==r?e.setDate(0):s}function S0(n,t){var e=new Date(n),i=e.getMonth(),r=e.setFullYear(e.getFullYear()+t);return i===1&&e.getMonth()===2?e.setDate(0):r}function dj(n,t){return(n-t+7)%7}function NE(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=new Date(n).getDay();return w0(n,dj(t,e)-dj(i,e))}function Cfe(n){var t=NE(n,4,1),e=NE(new Date(t).setMonth(0,4),4,1);return Math.round((t-e)/6048e5)+1}function pm(n,t){var e=new Date(n).getFullYear();return Math.floor(e/t)*t}var PL=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,Mfe=/[\s!-/:-@[-`{-~å¹´æœˆæ—¥]+/,SL={},fj={y:function(t,e){return new Date(t).setFullYear(parseInt(e,10))},m:function(t,e,i){var r=new Date(t),s=parseInt(e,10)-1;if(isNaN(s)){if(!e)return NaN;var o=e.toLowerCase(),a=function(d){return d.toLowerCase().startsWith(o)};if(s=i.monthsShort.findIndex(a),s<0&&(s=i.months.findIndex(a)),s<0)return NaN}return r.setMonth(s),r.getMonth()!==Pj(s)?r.setDate(0):r.getTime()},d:function(t,e){return new Date(t).setDate(parseInt(e,10))}},Efe={d:function(t){return t.getDate()},dd:function(t){return RE(t.getDate(),2)},D:function(t,e){return e.daysShort[t.getDay()]},DD:function(t,e){return e.days[t.getDay()]},m:function(t){return t.getMonth()+1},mm:function(t){return RE(t.getMonth()+1,2)},M:function(t,e){return e.monthsShort[t.getMonth()]},MM:function(t,e){return e.months[t.getMonth()]},y:function(t){return t.getFullYear()},yy:function(t){return RE(t.getFullYear(),2).slice(-2)},yyyy:function(t){return RE(t.getFullYear(),4)}};function Pj(n){return n>-1?n%12:Pj(n+12)}function RE(n,t){return n.toString().padStart(t,"0")}function kj(n){if(typeof n!="string")throw new Error("Invalid date format.");if(n in SL)return SL[n];var t=n.split(PL),e=n.match(new RegExp(PL,"g"));if(t.length===0||!e)throw new Error("Invalid date format.");var i=e.map(function(s){return Efe[s]}),r=Object.keys(fj).reduce(function(s,o){var a=e.find(function(u){return u[0]!=="D"&&u[0].toLowerCase()===o});return a&&s.push(o),s},[]);return SL[n]={parser:function(o,a){var u=o.split(Mfe).reduce(function(d,g,v){if(g.length>0&&e[v]){var x=e[v][0];x==="M"?d.m=g:x!=="D"&&(d[x]=g)}return d},{});return r.reduce(function(d,g){var v=fj[g](d,u[g],a);return isNaN(v)?d:v},vm())},formatter:function(o,a){var u=i.reduce(function(d,g,v){return d+="".concat(t[v]).concat(g(o,a))},"");return u+=NL(t)}}}function zb(n,t,e){if(n instanceof Date||typeof n=="number"){var i=RL(n);return isNaN(i)?void 0:i}if(n){if(n==="today")return vm();if(t&&t.toValue){var r=t.toValue(n,t,e);return isNaN(r)?void 0:RL(r)}return kj(t).parser(n,e)}}function Ub(n,t,e){if(isNaN(n)||!n&&n!==0)return"";var i=typeof n=="number"?new Date(n):n;return t.toDisplay?t.toDisplay(i,t,e):kj(t).formatter(i,e)}var OE=new WeakMap,Lj=EventTarget.prototype,pj=Lj.addEventListener,mj=Lj.removeEventListener;function BL(n,t){var e=OE.get(n);e||(e=[],OE.set(n,e)),t.forEach(function(i){pj.call.apply(pj,Hb(i)),e.push(i)})}function Nj(n){var t=OE.get(n);t&&(t.forEach(function(e){mj.call.apply(mj,Hb(e))}),OE.delete(n))}Event.prototype.composedPath||(gj=function n(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.push(t);var i;return t.parentNode?i=t.parentNode:t.host?i=t.host:t.defaultView&&(i=t.defaultView),i?n(i,e):e},Event.prototype.composedPath=function(){return gj(this.target)});var gj;function Oj(n,t,e){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=n[i];return t(r)?r:r===e||!r.parentElement?void 0:Oj(n,t,e,i+1)}function Fj(n,t){var e=typeof t=="function"?t:function(i){return i.matches(t)};return Oj(n.composedPath(),e,n.currentTarget)}var Nb={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},jb={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/></svg>',orientation:"auto",pickLevel:0,prevArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5H1m0 0 4 4M1 5l4-4"/></svg>',showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},CL=null;function Wh(n){return CL==null&&(CL=document.createRange()),CL.createContextualFragment(n)}function Fb(n){n.style.display!=="none"&&(n.style.display&&(n.dataset.styleDisplay=n.style.display),n.style.display="none")}function Bb(n){n.style.display==="none"&&(n.dataset.styleDisplay?(n.style.display=n.dataset.styleDisplay,delete n.dataset.styleDisplay):n.style.display="")}function FE(n){n.firstChild&&(n.removeChild(n.firstChild),FE(n))}function Tfe(n,t){FE(n),t instanceof DocumentFragment?n.appendChild(t):typeof t=="string"?n.appendChild(Wh(t)):typeof t.forEach=="function"&&t.forEach(function(e){n.appendChild(e)})}var ML=jb.language,Afe=jb.format,Dfe=jb.weekStart;function yj(n,t){return n.length<6&&t>=0&&t<7?mm(n,t):n}function vj(n){return(n+6)%7}function _j(n,t,e,i){var r=zb(n,t,e);return r!==void 0?r:i}function EL(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,i=parseInt(n,10);return i>=0&&i<=e?i:t}function TL(n,t){var e=Object.assign({},n),i={},r=t.constructor.locales,s=t.config||{},o=s.format,a=s.language,u=s.locale,d=s.maxDate,g=s.maxView,v=s.minDate,x=s.pickLevel,C=s.startView,A=s.weekStart;if(e.language){var O;if(e.language!==a&&(r[e.language]?O=e.language:(O=e.language.split("-")[0],r[O]===void 0&&(O=!1))),delete e.language,O){a=i.language=O;var N=u||r[ML];u=Object.assign({format:Afe,weekStart:Dfe},r[ML]),a!==ML&&Object.assign(u,r[a]),i.locale=u,o===N.format&&(o=i.format=u.format),A===N.weekStart&&(A=i.weekStart=u.weekStart,i.weekEnd=vj(u.weekStart))}}if(e.format){var T=typeof e.format.toDisplay=="function",j=typeof e.format.toValue=="function",Z=PL.test(e.format);(T&&j||Z)&&(o=i.format=e.format),delete e.format}var $=v,le=d;if(e.minDate!==void 0&&($=e.minDate===null?pf(0,0,1):_j(e.minDate,o,u,$),delete e.minDate),e.maxDate!==void 0&&(le=e.maxDate===null?void 0:_j(e.maxDate,o,u,le),delete e.maxDate),le<$?(v=i.minDate=le,d=i.maxDate=$):(v!==$&&(v=i.minDate=$),d!==le&&(d=i.maxDate=le)),e.datesDisabled&&(i.datesDisabled=e.datesDisabled.reduce(function(Ue,he){var Pe=zb(he,o,u);return Pe!==void 0?mm(Ue,Pe):Ue},[]),delete e.datesDisabled),e.defaultViewDate!==void 0){var K=zb(e.defaultViewDate,o,u);K!==void 0&&(i.defaultViewDate=K),delete e.defaultViewDate}if(e.weekStart!==void 0){var oe=Number(e.weekStart)%7;isNaN(oe)||(A=i.weekStart=oe,i.weekEnd=vj(oe)),delete e.weekStart}if(e.daysOfWeekDisabled&&(i.daysOfWeekDisabled=e.daysOfWeekDisabled.reduce(yj,[]),delete e.daysOfWeekDisabled),e.daysOfWeekHighlighted&&(i.daysOfWeekHighlighted=e.daysOfWeekHighlighted.reduce(yj,[]),delete e.daysOfWeekHighlighted),e.maxNumberOfDates!==void 0){var ue=parseInt(e.maxNumberOfDates,10);ue>=0&&(i.maxNumberOfDates=ue,i.multidate=ue!==1),delete e.maxNumberOfDates}e.dateDelimiter&&(i.dateDelimiter=String(e.dateDelimiter),delete e.dateDelimiter);var te=x;e.pickLevel!==void 0&&(te=EL(e.pickLevel,2),delete e.pickLevel),te!==x&&(x=i.pickLevel=te);var V=g;e.maxView!==void 0&&(V=EL(e.maxView,g),delete e.maxView),V=x>V?x:V,V!==g&&(g=i.maxView=V);var se=C;if(e.startView!==void 0&&(se=EL(e.startView,se),delete e.startView),se<x?se=x:se>g&&(se=g),se!==C&&(i.startView=se),e.prevArrow){var we=Wh(e.prevArrow);we.childNodes.length>0&&(i.prevArrow=we.childNodes),delete e.prevArrow}if(e.nextArrow){var de=Wh(e.nextArrow);de.childNodes.length>0&&(i.nextArrow=de.childNodes),delete e.nextArrow}if(e.disableTouchKeyboard!==void 0&&(i.disableTouchKeyboard="ontouchstart"in document&&!!e.disableTouchKeyboard,delete e.disableTouchKeyboard),e.orientation){var je=e.orientation.toLowerCase().split(/\s+/g);i.orientation={x:je.find(function(Ue){return Ue==="left"||Ue==="right"})||"auto",y:je.find(function(Ue){return Ue==="top"||Ue==="bottom"})||"auto"},delete e.orientation}if(e.todayBtnMode!==void 0){switch(e.todayBtnMode){case 0:case 1:i.todayBtnMode=e.todayBtnMode}delete e.todayBtnMode}return Object.keys(e).forEach(function(Ue){e[Ue]!==void 0&&jh(jb,Ue)&&(i[Ue]=e[Ue])}),i}var Ife=FL(`<div class="datepicker hidden">
  <div class="datepicker-picker inline-block rounded-lg bg-white dark:bg-gray-700 shadow-lg p-4">
    <div class="datepicker-header">
      <div class="datepicker-title bg-white dark:bg-gray-700 dark:text-white px-2 py-3 text-center font-semibold"></div>
      <div class="datepicker-controls flex justify-between mb-2">
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 prev-btn"></button>
        <button type="button" class="text-sm rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 font-semibold py-2.5 px-5 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-200 view-switch"></button>
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 next-btn"></button>
      </div>
    </div>
    <div class="datepicker-main p-1"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls flex space-x-2 rtl:space-x-reverse mt-2">
        <button type="button" class="%buttonClass% today-btn text-white bg-blue-700 !bg-primary-700 dark:bg-blue-600 dark:!bg-primary-600 hover:bg-blue-800 hover:!bg-primary-800 dark:hover:bg-blue-700 dark:hover:!bg-primary-700 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
        <button type="button" class="%buttonClass% clear-btn text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
      </div>
    </div>
  </div>
</div>`),Rfe=FL(`<div class="days">
  <div class="days-of-week grid grid-cols-7 mb-1">`.concat(M0("span",7,{class:"dow block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
  <div class="datepicker-grid w-64 grid grid-cols-7">`).concat(M0("span",42,{class:"block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"}),`</div>
</div>`)),Pfe=FL(`<div class="calendar-weeks">
  <div class="days-of-week flex"><span class="dow h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"></span></div>
  <div class="weeks">`.concat(M0("span",6,{class:"week block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
</div>`)),VL=function(){function n(t,e){gm(this,n),Object.assign(this,e,{picker:t,element:Wh('<div class="datepicker-view flex"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}return ym(n,[{key:"init",value:function(e){e.pickLevel!==void 0&&(this.isMinView=this.id===e.pickLevel),this.setOptions(e),this.updateFocus(),this.updateSelection()}},{key:"performBeforeHook",value:function(e,i,r){var s=this.beforeShow(new Date(r));switch(kE(s)){case"boolean":s={enabled:s};break;case"string":s={classes:s}}if(s){if(s.enabled===!1&&(e.classList.add("disabled"),mm(this.disabled,i)),s.classes){var o,a=s.classes.split(/\s+/);(o=e.classList).add.apply(o,Hb(a)),a.includes("disabled")&&mm(this.disabled,i)}s.content&&Tfe(e,s.content)}}}])}(),kfe=function(n){function t(e){return gm(this,t),kL(this,t,[e,{id:0,name:"days",cellClass:"day"}])}return LL(t,n),ym(t,[{key:"init",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(r){var s=Wh(Rfe).firstChild;this.dow=s.firstChild,this.grid=s.lastChild,this.element.appendChild(s)}Vb(mf(t.prototype),"init",this).call(this,i)}},{key:"setOptions",value:function(i){var r=this,s;if(jh(i,"minDate")&&(this.minDate=i.minDate),jh(i,"maxDate")&&(this.maxDate=i.maxDate),i.datesDisabled&&(this.datesDisabled=i.datesDisabled),i.daysOfWeekDisabled&&(this.daysOfWeekDisabled=i.daysOfWeekDisabled,s=!0),i.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=i.daysOfWeekHighlighted),i.todayHighlight!==void 0&&(this.todayHighlight=i.todayHighlight),i.weekStart!==void 0&&(this.weekStart=i.weekStart,this.weekEnd=i.weekEnd,s=!0),i.locale){var o=this.locale=i.locale;this.dayNames=o.daysMin,this.switchLabelFormat=o.titleFormat,s=!0}if(i.beforeShowDay!==void 0&&(this.beforeShow=typeof i.beforeShowDay=="function"?i.beforeShowDay:void 0),i.calendarWeeks!==void 0)if(i.calendarWeeks&&!this.calendarWeeks){var a=Wh(Pfe).firstChild;this.calendarWeeks={element:a,dow:a.firstChild,weeks:a.lastChild},this.element.insertBefore(a,this.element.firstChild)}else this.calendarWeeks&&!i.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);i.showDaysOfWeek!==void 0&&(i.showDaysOfWeek?(Bb(this.dow),this.calendarWeeks&&Bb(this.calendarWeeks.dow)):(Fb(this.dow),this.calendarWeeks&&Fb(this.calendarWeeks.dow))),s&&Array.from(this.dow.children).forEach(function(u,d){var g=(r.weekStart+d)%7;u.textContent=r.dayNames[g],u.className=r.daysOfWeekDisabled.includes(g)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}},{key:"updateFocus",value:function(){var i=new Date(this.picker.viewDate),r=i.getFullYear(),s=i.getMonth(),o=pf(r,s,1),a=NE(o,this.weekStart,this.weekStart);this.first=o,this.last=pf(r,s+1,0),this.start=a,this.focused=this.picker.viewDate}},{key:"updateSelection",value:function(){var i=this.picker.datepicker,r=i.dates,s=i.rangepicker;this.selected=r,s&&(this.range=s.dates)}},{key:"render",value:function(){var i=this;this.today=this.todayHighlight?vm():void 0,this.disabled=Hb(this.datesDisabled);var r=Ub(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(r),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){var s=NE(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach(function(o,a){o.textContent=Cfe(Sfe(s,a))})}Array.from(this.grid.children).forEach(function(o,a){var u=o.classList,d=w0(i.start,a),g=new Date(d),v=g.getDay();if(o.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(i.cellClass),o.dataset.date=d,o.textContent=g.getDate(),d<i.first?u.add("prev","text-gray-500","dark:text-white"):d>i.last&&u.add("next","text-gray-500","dark:text-white"),i.today===d&&u.add("today","bg-gray-100","dark:bg-gray-600"),(d<i.minDate||d>i.maxDate||i.disabled.includes(d))&&(u.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),u.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer")),i.daysOfWeekDisabled.includes(v)&&(u.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),u.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer"),mm(i.disabled,d)),i.daysOfWeekHighlighted.includes(v)&&u.add("highlighted"),i.range){var x=ul(i.range,2),C=x[0],A=x[1];d>C&&d<A&&(u.add("range","bg-gray-200","dark:bg-gray-600"),u.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),d===C&&(u.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),u.remove("rounded-lg","rounded-r-lg")),d===A&&(u.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),u.remove("rounded-lg","rounded-l-lg"))}i.selected.includes(d)&&(u.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),u.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","dark:bg-gray-600","bg-gray-100","bg-gray-200")),d===i.focused&&u.add("focused"),i.beforeShow&&i.performBeforeHook(o,d,d)})}},{key:"refresh",value:function(){var i=this,r=this.range||[],s=ul(r,2),o=s[0],a=s[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(u){u.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white","focused"),u.classList.add("text-gray-900","rounded-lg","dark:text-white")}),Array.from(this.grid.children).forEach(function(u){var d=Number(u.dataset.date),g=u.classList;g.remove("bg-gray-200","dark:bg-gray-600","rounded-l-lg","rounded-r-lg"),d>o&&d<a&&(g.add("range","bg-gray-200","dark:bg-gray-600"),g.remove("rounded-lg")),d===o&&(g.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),g.remove("rounded-lg")),d===a&&(g.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),g.remove("rounded-lg")),i.selected.includes(d)&&(g.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),g.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","bg-gray-100","bg-gray-200","dark:bg-gray-600")),d===i.focused&&g.add("focused")})}},{key:"refreshFocus",value:function(){var i=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(function(r){r.classList.remove("focused")}),this.grid.children[i].classList.add("focused")}}])}(VL);function bj(n,t){if(!(!n||!n[0]||!n[1])){var e=ul(n,2),i=ul(e[0],2),r=i[0],s=i[1],o=ul(e[1],2),a=o[0],u=o[1];if(!(r>t||a<t))return[r===t?s:-1,a===t?u:12]}}var Lfe=function(n){function t(e){return gm(this,t),kL(this,t,[e,{id:1,name:"months",cellClass:"month"}])}return LL(t,n),ym(t,[{key:"init",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(Wh(M0("span",12,{"data-month":function(o){return o}})))),Vb(mf(t.prototype),"init",this).call(this,i)}},{key:"setOptions",value:function(i){if(i.locale&&(this.monthNames=i.locale.monthsShort),jh(i,"minDate"))if(i.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{var r=new Date(i.minDate);this.minYear=r.getFullYear(),this.minMonth=r.getMonth(),this.minDate=r.setDate(1)}if(jh(i,"maxDate"))if(i.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{var s=new Date(i.maxDate);this.maxYear=s.getFullYear(),this.maxMonth=s.getMonth(),this.maxDate=pf(this.maxYear,this.maxMonth+1,0)}i.beforeShowMonth!==void 0&&(this.beforeShow=typeof i.beforeShowMonth=="function"?i.beforeShowMonth:void 0)}},{key:"updateFocus",value:function(){var i=new Date(this.picker.viewDate);this.year=i.getFullYear(),this.focused=i.getMonth()}},{key:"updateSelection",value:function(){var i=this.picker.datepicker,r=i.dates,s=i.rangepicker;this.selected=r.reduce(function(o,a){var u=new Date(a),d=u.getFullYear(),g=u.getMonth();return o[d]===void 0?o[d]=[g]:mm(o[d],g),o},{}),s&&s.dates&&(this.range=s.dates.map(function(o){var a=new Date(o);return isNaN(a)?void 0:[a.getFullYear(),a.getMonth()]}))}},{key:"render",value:function(){var i=this;this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);var r=this.selected[this.year]||[],s=this.year<this.minYear||this.year>this.maxYear,o=this.year===this.minYear,a=this.year===this.maxYear,u=bj(this.range,this.year);Array.from(this.grid.children).forEach(function(d,g){var v=d.classList,x=pf(i.year,g,1);if(d.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(i.cellClass),i.isMinView&&(d.dataset.date=x),d.textContent=i.monthNames[g],(s||o&&g<i.minMonth||a&&g>i.maxMonth)&&v.add("disabled"),u){var C=ul(u,2),A=C[0],O=C[1];g>A&&g<O&&v.add("range"),g===A&&v.add("range-start"),g===O&&v.add("range-end")}r.includes(g)&&(v.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),v.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),g===i.focused&&v.add("focused"),i.beforeShow&&i.performBeforeHook(d,g,x)})}},{key:"refresh",value:function(){var i=this,r=this.selected[this.year]||[],s=bj(this.range,this.year)||[],o=ul(s,2),a=o[0],u=o[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(d){d.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","dark:bg-blue-600","dark:!bg-primary-700","dark:text-white","text-white","focused"),d.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")}),Array.from(this.grid.children).forEach(function(d,g){var v=d.classList;g>a&&g<u&&v.add("range"),g===a&&v.add("range-start"),g===u&&v.add("range-end"),r.includes(g)&&(v.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),v.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),g===i.focused&&v.add("focused")})}},{key:"refreshFocus",value:function(){this.grid.querySelectorAll(".focused").forEach(function(i){i.classList.remove("focused")}),this.grid.children[this.focused].classList.add("focused")}}])}(VL);function Nfe(n){return Hb(n).reduce(function(t,e,i){return t+=i?e:e.toUpperCase()},"")}var xj=function(n){function t(e,i){return gm(this,t),kL(this,t,[e,i])}return LL(t,n),ym(t,[{key:"init",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r&&(this.navStep=this.step*10,this.beforeShowOption="beforeShow".concat(Nfe(this.cellClass)),this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(Wh(M0("span",12)))),Vb(mf(t.prototype),"init",this).call(this,i)}},{key:"setOptions",value:function(i){if(jh(i,"minDate")&&(i.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=pm(i.minDate,this.step),this.minDate=pf(this.minYear,0,1))),jh(i,"maxDate")&&(i.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=pm(i.maxDate,this.step),this.maxDate=pf(this.maxYear,11,31))),i[this.beforeShowOption]!==void 0){var r=i[this.beforeShowOption];this.beforeShow=typeof r=="function"?r:void 0}}},{key:"updateFocus",value:function(){var i=new Date(this.picker.viewDate),r=pm(i,this.navStep),s=r+9*this.step;this.first=r,this.last=s,this.start=r-this.step,this.focused=pm(i,this.step)}},{key:"updateSelection",value:function(){var i=this,r=this.picker.datepicker,s=r.dates,o=r.rangepicker;this.selected=s.reduce(function(a,u){return mm(a,pm(u,i.step))},[]),o&&o.dates&&(this.range=o.dates.map(function(a){if(a!==void 0)return pm(a,i.step)}))}},{key:"render",value:function(){var i=this;this.disabled=[],this.picker.setViewSwitchLabel("".concat(this.first,"-").concat(this.last)),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach(function(r,s){var o=r.classList,a=i.start+s*i.step,u=pf(a,0,1);if(r.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(i.cellClass),i.isMinView&&(r.dataset.date=u),r.textContent=r.dataset.year=a,s===0?o.add("prev"):s===11&&o.add("next"),(a<i.minYear||a>i.maxYear)&&o.add("disabled"),i.range){var d=ul(i.range,2),g=d[0],v=d[1];a>g&&a<v&&o.add("range"),a===g&&o.add("range-start"),a===v&&o.add("range-end")}i.selected.includes(a)&&(o.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),o.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),a===i.focused&&o.add("focused"),i.beforeShow&&i.performBeforeHook(r,a,u)})}},{key:"refresh",value:function(){var i=this,r=this.range||[],s=ul(r,2),o=s[0],a=s[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(u){u.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark!bg-primary-600","dark:text-white","focused")}),Array.from(this.grid.children).forEach(function(u){var d=Number(u.textContent),g=u.classList;d>o&&d<a&&g.add("range"),d===o&&g.add("range-start"),d===a&&g.add("range-end"),i.selected.includes(d)&&(g.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),g.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),d===i.focused&&g.add("focused")})}},{key:"refreshFocus",value:function(){var i=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(function(r){r.classList.remove("focused")}),this.grid.children[i].classList.add("focused")}}])}(VL);function C0(n,t){var e={date:n.getDate(),viewDate:new Date(n.picker.viewDate),viewId:n.picker.currentView.id,datepicker:n};n.element.dispatchEvent(new CustomEvent(t,{detail:e}))}function BE(n,t){var e=n.config,i=e.minDate,r=e.maxDate,s=n.picker,o=s.currentView,a=s.viewDate,u;switch(o.id){case 0:u=LE(a,t);break;case 1:u=S0(a,t);break;default:u=S0(a,t*o.navStep)}u=Rj(u,i,r),n.picker.changeFocus(u).render()}function Bj(n){var t=n.picker.currentView.id;t!==n.config.maxView&&n.picker.changeView(t+1).render()}function Vj(n){n.config.updateOnBlur?n.update({autohide:!0}):(n.refresh("input"),n.hide())}function wj(n,t){var e=n.picker,i=new Date(e.viewDate),r=e.currentView.id,s=r===1?LE(i,t-i.getMonth()):S0(i,t-i.getFullYear());e.changeFocus(s).changeView(r-1).render()}function Ofe(n){var t=n.picker,e=vm();if(n.config.todayBtnMode===1){if(n.config.autohide){n.setDate(e);return}n.setDate(e,{render:!1}),t.update()}t.viewDate!==e&&t.changeFocus(e),t.changeView(0).render()}function Ffe(n){n.setDate({clear:!0})}function Bfe(n){Bj(n)}function Vfe(n){BE(n,-1)}function zfe(n){BE(n,1)}function Ufe(n,t){var e=Fj(t,".datepicker-cell");if(!(!e||e.classList.contains("disabled"))){var i=n.picker.currentView,r=i.id,s=i.isMinView;s?n.setDate(Number(e.dataset.date)):r===1?wj(n,Number(e.dataset.month)):wj(n,Number(e.dataset.year))}}function Hfe(n){!n.inline&&!n.config.disableTouchKeyboard&&n.inputField.focus()}function Sj(n,t){if(t.title!==void 0&&(t.title?(n.controls.title.textContent=t.title,Bb(n.controls.title)):(n.controls.title.textContent="",Fb(n.controls.title))),t.prevArrow){var e=n.controls.prevBtn;FE(e),t.prevArrow.forEach(function(a){e.appendChild(a.cloneNode(!0))})}if(t.nextArrow){var i=n.controls.nextBtn;FE(i),t.nextArrow.forEach(function(a){i.appendChild(a.cloneNode(!0))})}if(t.locale&&(n.controls.todayBtn.textContent=t.locale.today,n.controls.clearBtn.textContent=t.locale.clear),t.todayBtn!==void 0&&(t.todayBtn?Bb(n.controls.todayBtn):Fb(n.controls.todayBtn)),jh(t,"minDate")||jh(t,"maxDate")){var r=n.datepicker.config,s=r.minDate,o=r.maxDate;n.controls.todayBtn.disabled=!OL(vm(),s,o)}t.clearBtn!==void 0&&(t.clearBtn?Bb(n.controls.clearBtn):Fb(n.controls.clearBtn))}function Cj(n){var t=n.dates,e=n.config,i=t.length>0?NL(t):e.defaultViewDate;return Rj(i,e.minDate,e.maxDate)}function Mj(n,t){var e=new Date(n.viewDate),i=new Date(t),r=n.currentView,s=r.id,o=r.year,a=r.first,u=r.last,d=i.getFullYear();switch(n.viewDate=t,d!==e.getFullYear()&&C0(n.datepicker,"changeYear"),i.getMonth()!==e.getMonth()&&C0(n.datepicker,"changeMonth"),s){case 0:return t<a||t>u;case 1:return d!==o;default:return d<a||d>u}}function AL(n){return window.getComputedStyle(n).direction}var jfe=function(){function n(t){gm(this,n),this.datepicker=t;var e=Ife.replace(/%buttonClass%/g,t.config.buttonClass),i=this.element=Wh(e).firstChild,r=ul(i.firstChild.children,3),s=r[0],o=r[1],a=r[2],u=s.firstElementChild,d=ul(s.lastElementChild.children,3),g=d[0],v=d[1],x=d[2],C=ul(a.firstChild.children,2),A=C[0],O=C[1],N={title:u,prevBtn:g,viewSwitch:v,nextBtn:x,todayBtn:A,clearBtn:O};this.main=o,this.controls=N;var T=t.inline?"inline":"dropdown";i.classList.add("datepicker-".concat(T)),T==="dropdown"&&i.classList.add("dropdown","absolute","top-0","left-0","z-50","pt-2"),Sj(this,t.config),this.viewDate=Cj(t),BL(t,[[i,"click",Hfe.bind(null,t),{capture:!0}],[o,"click",Ufe.bind(null,t)],[N.viewSwitch,"click",Bfe.bind(null,t)],[N.prevBtn,"click",Vfe.bind(null,t)],[N.nextBtn,"click",zfe.bind(null,t)],[N.todayBtn,"click",Ofe.bind(null,t)],[N.clearBtn,"click",Ffe.bind(null,t)]]),this.views=[new kfe(this),new Lfe(this),new xj(this,{id:2,name:"years",cellClass:"year",step:1}),new xj(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[t.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),t.config.container.appendChild(this.element)}return ym(n,[{key:"setOptions",value:function(e){Sj(this,e),this.views.forEach(function(i){i.init(e,!1)}),this.currentView.render()}},{key:"detach",value:function(){this.datepicker.config.container.removeChild(this.element)}},{key:"show",value:function(){if(!this.active){this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;var e=this.datepicker;if(!e.inline){var i=AL(e.inputField);i!==AL(e.config.container)?this.element.dir=i:this.element.dir&&this.element.removeAttribute("dir"),this.place(),e.config.disableTouchKeyboard&&e.inputField.blur()}C0(e,"show")}}},{key:"hide",value:function(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,C0(this.datepicker,"hide"))}},{key:"place",value:function(){var e=this.element,i=e.classList,r=e.style,s=this.datepicker,o=s.config,a=s.inputField,u=o.container,d=this.element.getBoundingClientRect(),g=d.width,v=d.height,x=u.getBoundingClientRect(),C=x.left,A=x.top,O=x.width,N=a.getBoundingClientRect(),T=N.left,j=N.top,Z=N.width,$=N.height,le=o.orientation,K=le.x,oe=le.y,ue,te,V;u===document.body?(ue=window.scrollY,te=T+window.scrollX,V=j+ue):(ue=u.scrollTop,te=T-C,V=j-A+ue),K==="auto"&&(te<0?(K="left",te=10):te+g>O?K="right":K=AL(a)==="rtl"?"right":"left"),K==="right"&&(te-=g-Z),oe==="auto"&&(oe=V-v<ue?"bottom":"top"),oe==="top"?V-=v:V+=$,i.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),i.add("datepicker-orient-".concat(oe),"datepicker-orient-".concat(K)),r.top=V&&"".concat(V,"px"),r.left=te&&"".concat(te,"px")}},{key:"setViewSwitchLabel",value:function(e){this.controls.viewSwitch.textContent=e}},{key:"setPrevBtnDisabled",value:function(e){this.controls.prevBtn.disabled=e}},{key:"setNextBtnDisabled",value:function(e){this.controls.nextBtn.disabled=e}},{key:"changeView",value:function(e){var i=this.currentView,r=this.views[e];return r.id!==i.id&&(this.currentView=r,this._renderMethod="render",C0(this.datepicker,"changeView"),this.main.replaceChild(r.element,i.element)),this}},{key:"changeFocus",value:function(e){return this._renderMethod=Mj(this,e)?"render":"refreshFocus",this.views.forEach(function(i){i.updateFocus()}),this}},{key:"update",value:function(){var e=Cj(this.datepicker);return this._renderMethod=Mj(this,e)?"render":"refresh",this.views.forEach(function(i){i.updateFocus(),i.updateSelection()}),this}},{key:"render",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=e&&this._renderMethod||"render";delete this._renderMethod,this.currentView[i]()}}])}();function zj(n,t,e,i,r,s){if(OL(n,r,s)){if(i(n)){var o=t(n,e);return zj(o,t,e,i,r,s)}return n}}function PE(n,t,e,i){var r=n.picker,s=r.currentView,o=s.step||1,a=r.viewDate,u,d;switch(s.id){case 0:i?a=w0(a,e*7):t.ctrlKey||t.metaKey?a=S0(a,e):a=w0(a,e),u=w0,d=function(v){return s.disabled.includes(v)};break;case 1:a=LE(a,i?e*4:e),u=LE,d=function(v){var x=new Date(v),C=s.year,A=s.disabled;return x.getFullYear()===C&&A.includes(x.getMonth())};break;default:a=S0(a,e*(i?4:1)*o),u=S0,d=function(v){return s.disabled.includes(pm(v,o))}}a=zj(a,u,e<0?-o:o,d,s.minDate,s.maxDate),a!==void 0&&r.changeFocus(a).render()}function Wfe(n,t){if(t.key==="Tab"){Vj(n);return}var e=n.picker,i=e.currentView,r=i.id,s=i.isMinView;if(e.active)if(n.editMode)switch(t.key){case"Escape":e.hide();break;case"Enter":n.exitEditMode({update:!0,autohide:n.config.autohide});break;default:return}else switch(t.key){case"Escape":e.hide();break;case"ArrowLeft":if(t.ctrlKey||t.metaKey)BE(n,-1);else if(t.shiftKey){n.enterEditMode();return}else PE(n,t,-1,!1);break;case"ArrowRight":if(t.ctrlKey||t.metaKey)BE(n,1);else if(t.shiftKey){n.enterEditMode();return}else PE(n,t,1,!1);break;case"ArrowUp":if(t.ctrlKey||t.metaKey)Bj(n);else if(t.shiftKey){n.enterEditMode();return}else PE(n,t,-1,!0);break;case"ArrowDown":if(t.shiftKey&&!t.ctrlKey&&!t.metaKey){n.enterEditMode();return}PE(n,t,1,!0);break;case"Enter":s?n.setDate(e.viewDate):e.changeView(r-1).render();break;case"Backspace":case"Delete":n.enterEditMode();return;default:t.key.length===1&&!t.ctrlKey&&!t.metaKey&&n.enterEditMode();return}else switch(t.key){case"ArrowDown":case"Escape":e.show();break;case"Enter":n.update();break;default:return}t.preventDefault(),t.stopPropagation()}function Gfe(n){n.config.showOnFocus&&!n._showing&&n.show()}function $fe(n,t){var e=t.target;(n.picker.active||n.config.showOnClick)&&(e._active=e===document.activeElement,e._clicking=setTimeout(function(){delete e._active,delete e._clicking},2e3))}function qfe(n,t){var e=t.target;e._clicking&&(clearTimeout(e._clicking),delete e._clicking,e._active&&n.enterEditMode(),delete e._active,n.config.showOnClick&&n.show())}function Xfe(n,t){t.clipboardData.types.includes("text/plain")&&n.enterEditMode()}function Yfe(n,t){var e=n.element;if(e===document.activeElement){var i=n.picker.element;Fj(t,function(r){return r===e||r===i})||Vj(n)}}function Uj(n,t){return n.map(function(e){return Ub(e,t.format,t.locale)}).join(t.dateDelimiter)}function Hj(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=n.config,r=n.dates,s=n.rangepicker;if(t.length===0)return e?[]:void 0;var o=s&&n===s.datepickers[1],a=t.reduce(function(u,d){var g=zb(d,i.format,i.locale);if(g===void 0)return u;if(i.pickLevel>0){var v=new Date(g);i.pickLevel===1?g=o?v.setMonth(v.getMonth()+1,0):v.setDate(1):g=o?v.setFullYear(v.getFullYear()+1,0,0):v.setMonth(0,1)}return OL(g,i.minDate,i.maxDate)&&!u.includes(g)&&!i.datesDisabled.includes(g)&&!i.daysOfWeekDisabled.includes(new Date(g).getDay())&&u.push(g),u},[]);if(a.length!==0)return i.multidate&&!e&&(a=a.reduce(function(u,d){return r.includes(d)||u.push(d),u},r.filter(function(u){return!a.includes(u)}))),i.maxNumberOfDates&&a.length>i.maxNumberOfDates?a.slice(i.maxNumberOfDates*-1):a}function VE(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=n.config,r=n.picker,s=n.inputField;if(t&2){var o=r.active?i.pickLevel:i.startView;r.update().changeView(o).render(e)}t&1&&s&&(s.value=Uj(n.dates,i))}function Ej(n,t,e){var i=e.clear,r=e.render,s=e.autohide;r===void 0&&(r=!0),r?s===void 0&&(s=n.config.autohide):s=!1;var o=Hj(n,t,i);o&&(o.toString()!==n.dates.toString()?(n.dates=o,VE(n,r?3:1),C0(n,"changeDate")):VE(n,1),s&&n.hide())}var Wb=function(){function n(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;gm(this,n),t.datepicker=this,this.element=t;var r=this.config=Object.assign({buttonClass:e.buttonClass&&String(e.buttonClass)||"button",container:document.body,defaultViewDate:vm(),maxDate:void 0,minDate:void 0},TL(jb,this));this._options=e,Object.assign(r,TL(e,this));var s=this.inline=t.tagName!=="INPUT",o,a;if(s)r.container=t,a=wL(t.dataset.date,r.dateDelimiter),delete t.dataset.date;else{var u=e.container?document.querySelector(e.container):null;u&&(r.container=u),o=this.inputField=t,o.classList.add("datepicker-input"),a=wL(o.value,r.dateDelimiter)}if(i){var d=i.inputs.indexOf(o),g=i.datepickers;if(d<0||d>1||!Array.isArray(g))throw Error("Invalid rangepicker object.");g[d]=this,Object.defineProperty(this,"rangepicker",{get:function(){return i}})}this.dates=[];var v=Hj(this,a);v&&v.length>0&&(this.dates=v),o&&(o.value=Uj(this.dates,r));var x=this.picker=new jfe(this);if(s)this.show();else{var C=Yfe.bind(null,this),A=[[o,"keydown",Wfe.bind(null,this)],[o,"focus",Gfe.bind(null,this)],[o,"mousedown",$fe.bind(null,this)],[o,"click",qfe.bind(null,this)],[o,"paste",Xfe.bind(null,this)],[document,"mousedown",C],[document,"touchstart",C],[window,"resize",x.place.bind(x)]];BL(this,A)}}return ym(n,[{key:"active",get:function(){return!!(this.picker&&this.picker.active)}},{key:"pickerElement",get:function(){return this.picker?this.picker.element:void 0}},{key:"setOptions",value:function(e){var i=this.picker,r=TL(e,this);Object.assign(this._options,e),Object.assign(this.config,r),i.setOptions(r),VE(this,3)}},{key:"show",value:function(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}},{key:"hide",value:function(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}},{key:"destroy",value:function(){return this.hide(),Nj(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}},{key:"getDate",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,r=i?function(s){return Ub(s,i,e.config.locale)}:function(s){return new Date(s)};if(this.config.multidate)return this.dates.map(r);if(this.dates.length>0)return r(this.dates[0])}},{key:"setDate",value:function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];var s=[].concat(i),o={},a=NL(i);kE(a)==="object"&&!Array.isArray(a)&&!(a instanceof Date)&&a&&Object.assign(o,s.pop());var u=Array.isArray(s[0])?s[0]:s;Ej(this,u,o)}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!this.inline){var i={clear:!0,autohide:!!(e&&e.autohide)},r=wL(this.inputField.value,this.config.dateDelimiter);Ej(this,r,i)}}},{key:"refresh",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e&&typeof e!="string"&&(i=e,e=void 0);var r;e==="picker"?r=2:e==="input"?r=1:r=3,VE(this,r,!i)}},{key:"enterEditMode",value:function(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700","!border-primary-700"))}},{key:"exitEditMode",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!(this.inline||!this.editMode)){var i=Object.assign({update:!1},e);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700","!border-primary-700"),i.update&&this.update(i)}}}],[{key:"formatDate",value:function(e,i,r){return Ub(e,i,r&&Nb[r]||Nb.en)}},{key:"parseDate",value:function(e,i,r){return zb(e,i,r&&Nb[r]||Nb.en)}},{key:"locales",get:function(){return Nb}}])}();function Tj(n){var t=Object.assign({},n);return delete t.inputs,delete t.allowOneSidedRange,delete t.maxNumberOfDates,t}function Aj(n,t,e,i){BL(n,[[e,"changeDate",t]]),new Wb(e,i,n)}function Ob(n,t){if(!n._updating){n._updating=!0;var e=t.target;if(e.datepicker!==void 0){var i=n.datepickers,r={render:!1},s=n.inputs.indexOf(e),o=s===0?1:0,a=i[s].dates[0],u=i[o].dates[0];a!==void 0&&u!==void 0?s===0&&a>u?(i[0].setDate(u,r),i[1].setDate(a,r)):s===1&&a<u&&(i[0].setDate(a,r),i[1].setDate(u,r)):n.allowOneSidedRange||(a!==void 0||u!==void 0)&&(r.clear=!0,i[o].setDate(i[s].dates,r)),i[0].picker.update().render(),i[1].picker.update().render(),delete n._updating}}}var zE=function(){function n(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gm(this,n);var i=Array.isArray(e.inputs)?e.inputs:Array.from(t.querySelectorAll("input"));if(!(i.length<2)){t.rangepicker=this,this.element=t,this.inputs=i.slice(0,2),this.allowOneSidedRange=!!e.allowOneSidedRange;var r=Ob.bind(null,this),s=Tj(e),o=[];Object.defineProperty(this,"datepickers",{get:function(){return o}}),Aj(this,r,this.inputs[0],s),Aj(this,r,this.inputs[1],s),Object.freeze(o),o[0].dates.length>0?Ob(this,{target:this.inputs[0]}):o[1].dates.length>0&&Ob(this,{target:this.inputs[1]})}}return ym(n,[{key:"dates",get:function(){return this.datepickers.length===2?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}},{key:"setOptions",value:function(e){this.allowOneSidedRange=!!e.allowOneSidedRange;var i=Tj(e);this.datepickers[0].setOptions(i),this.datepickers[1].setOptions(i)}},{key:"destroy",value:function(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),Nj(this),delete this.element.rangepicker}},{key:"getDates",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,r=i?function(s){return Ub(s,i,e.datepickers[0].config.locale)}:function(s){return new Date(s)};return this.dates.map(function(s){return s===void 0?s:r(s)})}},{key:"setDates",value:function(e,i){var r=ul(this.datepickers,2),s=r[0],o=r[1],a=this.dates;this._updating=!0,s.setDate(e),o.setDate(i),delete this._updating,o.dates[0]!==a[1]?Ob(this,{target:this.inputs[1]}):s.dates[0]!==a[0]&&Ob(this,{target:this.inputs[0]})}}])}();var UE=function(){return UE=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},UE.apply(this,arguments)},Xl={defaultDatepickerId:null,autohide:!1,format:"mm/dd/yyyy",maxDate:null,minDate:null,orientation:"bottom",buttons:!1,autoSelectToday:0,title:null,language:"en",rangePicker:!1,onShow:function(){},onHide:function(){}},Zfe={id:null,override:!0},jj=function(){function n(t,e,i){t===void 0&&(t=null),e===void 0&&(e=Xl),i===void 0&&(i=Zfe),this._instanceId=i.id?i.id:t.id,this._datepickerEl=t,this._datepickerInstance=null,this._options=UE(UE({},Xl),e),this._initialized=!1,this.init(),On.addInstance("Datepicker",this,this._instanceId,i.override)}return n.prototype.init=function(){this._datepickerEl&&!this._initialized&&(this._options.rangePicker?this._datepickerInstance=new zE(this._datepickerEl,this._getDatepickerOptions(this._options)):this._datepickerInstance=new Wb(this._datepickerEl,this._getDatepickerOptions(this._options)),this._initialized=!0)},n.prototype.destroy=function(){this._initialized&&(this._initialized=!1,this._datepickerInstance.destroy())},n.prototype.removeInstance=function(){this.destroy(),On.removeInstance("Datepicker",this._instanceId)},n.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},n.prototype.getDatepickerInstance=function(){return this._datepickerInstance},n.prototype.getDate=function(){if(this._options.rangePicker&&this._datepickerInstance instanceof zE)return this._datepickerInstance.getDates();if(!this._options.rangePicker&&this._datepickerInstance instanceof Wb)return this._datepickerInstance.getDate()},n.prototype.setDate=function(t){if(this._options.rangePicker&&this._datepickerInstance instanceof zE)return this._datepickerInstance.setDates(t);if(!this._options.rangePicker&&this._datepickerInstance instanceof Wb)return this._datepickerInstance.setDate(t)},n.prototype.show=function(){this._datepickerInstance.show(),this._options.onShow(this)},n.prototype.hide=function(){this._datepickerInstance.hide(),this._options.onHide(this)},n.prototype._getDatepickerOptions=function(t){var e={};return t.buttons&&(e.todayBtn=!0,e.clearBtn=!0,t.autoSelectToday&&(e.todayBtnMode=1)),t.autohide&&(e.autohide=!0),t.format&&(e.format=t.format),t.maxDate&&(e.maxDate=t.maxDate),t.minDate&&(e.minDate=t.minDate),t.orientation&&(e.orientation=t.orientation),t.title&&(e.title=t.title),t.language&&(e.language=t.language),e},n.prototype.updateOnShow=function(t){this._options.onShow=t},n.prototype.updateOnHide=function(t){this._options.onHide=t},n}();function E0(){document.querySelectorAll("[datepicker], [inline-datepicker], [date-rangepicker]").forEach(function(n){if(n){var t=n.hasAttribute("datepicker-buttons"),e=n.hasAttribute("datepicker-autoselect-today"),i=n.hasAttribute("datepicker-autohide"),r=n.getAttribute("datepicker-format"),s=n.getAttribute("datepicker-max-date"),o=n.getAttribute("datepicker-min-date"),a=n.getAttribute("datepicker-orientation"),u=n.getAttribute("datepicker-title"),d=n.getAttribute("datepicker-language"),g=n.hasAttribute("date-rangepicker");new jj(n,{buttons:t||Xl.buttons,autoSelectToday:e||Xl.autoSelectToday,autohide:i||Xl.autohide,format:r||Xl.format,maxDate:s||Xl.maxDate,minDate:o||Xl.minDate,orientation:a||Xl.orientation,title:u||Xl.title,language:d||Xl.language,rangePicker:g||Xl.rangePicker})}else console.error("The datepicker element does not exist. Please check the datepicker attribute.")})}typeof window<"u"&&(window.Datepicker=jj,window.initDatepickers=E0);function HE(){r0(),s0(),o0(),a0(),f0(),p0(),m0(),g0(),y0(),v0(),_0(),b0(),x0(),E0()}typeof window<"u"&&(window.initFlowbite=HE);var Kfe=new T9("load",[r0,s0,o0,a0,f0,p0,m0,g0,y0,v0,_0,b0,x0,E0]);Kfe.init();var Wj=(()=>{class n{ngOnInit(){HE()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=_t({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){i&1&&tt(0,"router-outlet")},dependencies:[l_,bp],encapsulation:2})}return n})();YI(Wj,E9).catch(n=>console.error(n));
